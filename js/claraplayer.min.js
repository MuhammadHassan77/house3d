!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.claraplayer=t():e.claraplayer=t()}(this,function(){return function(e){var t=window.webpackJsonp_name_;window.webpackJsonp_name_=function(r,i,a){for(var o,s,l=0,u=[];l<r.length;l++)s=r[l],n[s]&&u.push(n[s][0]),n[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);for(t&&t(r,i,a);u.length;)u.shift()()};var r={},n={5:0};function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.e=function(e){var t=n[e];if(0===t)return new Promise(function(e){e()});if(t)return t[2];var r=new Promise(function(r,i){t=n[e]=[r,i]});t[2]=r;var a=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.charset="utf-8",o.async=!0,o.timeout=12e4,i.nc&&o.setAttribute("nonce",i.nc),o.src=i.p+"modules/"+({0:"configuratorui",1:"zSpace",2:"steelcase",3:"physics",4:"editorCommands"}[e]||e)+"."+{0:"b19fc380b5c42fe97bcc",1:"bbe1cfe2275260ef46bc",2:"f893378d4cb6e52f6e60",3:"6cae4c77ae54b6e532e4",4:"e35f817b484350418bd4"}[e]+".min.js";var s=setTimeout(l,12e4);function l(){o.onerror=o.onload=null,clearTimeout(s);var t=n[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),n[e]=void 0)}return o.onerror=o.onload=l,a.appendChild(o),r},i.m=e,i.c=r,i.i=function(e){return e},i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e},i(i.s=873)}([function(e,t,r){"use strict";var n,i,a=s(r(317)),o=s(r(2));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){this.x=e||0,this.y=t||0}Object.defineProperty(t,"__esModule",{value:!0}),l.prototype={constructor:l,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return void 0===n&&(n=new l,i=new l),n.set(e,e),i.set(t,t),this.clamp(n,i)},clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*r-a*n+e.x,this.y=i*n+a*r+e.y,this}};var u,c,f,h,d,p,m,v,g,y,x,b={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),f=new Array(36),h=0,function(){for(var e=0;e<36;e++)8===e||13===e||18===e||23===e?f[e]="-":14===e?f[e]="4":(h<=2&&(h=33554432+16777216*Math.random()|0),u=15&h,h>>=4,f[e]=c[19===e?3&u|8:u]);return f.join("")}),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*b.DEG2RAD},radToDeg:function(e){return e*b.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};function w(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function _(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1}function M(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function S(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1}function T(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}w.prototype={constructor:w,isMatrix4:!0,set:function(e,t,r,n,i,a,o,s,l,u,c,f,h,d,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=n,v[1]=i,v[5]=a,v[9]=o,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=f,v[3]=h,v[7]=d,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new w).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(e){void 0===y&&(y=new M);var t=this.elements,r=e.elements,n=1/y.setFromMatrixColumn(e,0).length(),i=1/y.setFromMatrixColumn(e,1).length(),a=1/y.setFromMatrixColumn(e,2).length();return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,this},makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(n),l=Math.sin(n),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var f=a*u,h=a*c,d=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=h+d*l,t[5]=f-p*l,t[9]=-o*s,t[2]=p-f*l,t[6]=d+h*l,t[10]=a*s}else if("YXZ"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m+y*o,t[4]=g*o-v,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m-y*o,t[4]=-a*c,t[8]=g+v*o,t[1]=v+g*o,t[5]=a*u,t[9]=y-m*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){f=a*u,h=a*c,d=o*u,p=o*c;t[0]=s*u,t[4]=d*l-h,t[8]=f*l+p,t[1]=s*c,t[5]=p*l+f,t[9]=h*l-d,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var x=a*s,b=a*l,w=o*s,_=o*l;t[0]=s*u,t[4]=_-x*c,t[8]=w*c+b,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=b*c+w,t[10]=x-_*c}else if("XZY"===e.order){x=a*s,b=a*l,w=o*s,_=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=x*c+_,t[5]=a*u,t[9]=b*c-w,t[2]=w*c-b,t[6]=o*u,t[10]=_*c+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z,a=e.w,o=r+r,s=n+n,l=i+i,u=r*o,c=r*s,f=r*l,h=n*s,d=n*l,p=i*l,m=a*o,v=a*s,g=a*l;return t[0]=1-(h+p),t[4]=c-g,t[8]=f+v,t[1]=c+g,t[5]=1-(u+p),t[9]=d-m,t[2]=f-v,t[6]=d+m,t[10]=1-(u+h),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(e,t,r){void 0===m&&(m=new M,v=new M,g=new M);var n=this.elements;return g.subVectors(e,t).normalize(),0===g.lengthSq()&&(g.z=1),m.crossVectors(r,g).normalize(),0===m.lengthSq()&&(g.z+=1e-4,m.crossVectors(r,g).normalize()),v.crossVectors(g,m),n[0]=m.x,n[4]=v.x,n[8]=g.x,n[1]=m.y,n[5]=v.y,n[9]=g.y,n[2]=m.z,n[6]=v.z,n[10]=g.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,a=r[0],o=r[4],s=r[8],l=r[12],u=r[1],c=r[5],f=r[9],h=r[13],d=r[2],p=r[6],m=r[10],v=r[14],g=r[3],y=r[7],x=r[11],b=r[15],w=n[0],_=n[4],M=n[8],S=n[12],T=n[1],E=n[5],P=n[9],A=n[13],C=n[2],R=n[6],I=n[10],O=n[14],L=n[3],D=n[7],N=n[11],V=n[15];return i[0]=a*w+o*T+s*C+l*L,i[4]=a*_+o*E+s*R+l*D,i[8]=a*M+o*P+s*I+l*N,i[12]=a*S+o*A+s*O+l*V,i[1]=u*w+c*T+f*C+h*L,i[5]=u*_+c*E+f*R+h*D,i[9]=u*M+c*P+f*I+h*N,i[13]=u*S+c*A+f*O+h*V,i[2]=d*w+p*T+m*C+v*L,i[6]=d*_+p*E+m*R+v*D,i[10]=d*M+p*P+m*I+v*N,i[14]=d*S+p*A+m*O+v*V,i[3]=g*w+y*T+x*C+b*L,i[7]=g*_+y*E+x*R+b*D,i[11]=g*M+y*P+x*I+b*N,i[15]=g*S+y*A+x*O+b*V,this},multiplyToArray:function(e,t,r){var n=this.elements;return this.multiplyMatrices(e,t),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new M);for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],f=e[10],h=e[14];return e[3]*(+i*s*c-n*l*c-i*o*f+r*l*f+n*o*h-r*s*h)+e[7]*(+t*s*h-t*l*f+i*a*f-n*a*h+n*l*u-i*s*u)+e[11]*(+t*l*c-t*o*h-i*a*c+r*a*h+i*o*u-r*l*u)+e[15]*(-n*o*u-t*s*c+t*o*f+n*a*c-r*a*f+r*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],f=n[7],h=n[8],d=n[9],p=n[10],m=n[11],v=n[12],g=n[13],y=n[14],x=n[15],b=d*y*f-g*p*f+g*c*m-u*y*m-d*c*x+u*p*x,w=v*p*f-h*y*f-v*c*m+l*y*m+h*c*x-l*p*x,_=h*g*f-v*d*f+v*u*m-l*g*m-h*u*x+l*d*x,M=v*d*c-h*g*c-v*u*p+l*g*p+h*u*y-l*d*y,S=i*b+a*w+o*_+s*M;if(0===S){var T="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(),this.identity()}var E=1/S;return r[0]=b*E,r[1]=(g*p*s-d*y*s-g*o*m+a*y*m+d*o*x-a*p*x)*E,r[2]=(u*y*s-g*c*s+g*o*f-a*y*f-u*o*x+a*c*x)*E,r[3]=(d*c*s-u*p*s-d*o*f+a*p*f+u*o*m-a*c*m)*E,r[4]=w*E,r[5]=(h*y*s-v*p*s+v*o*m-i*y*m-h*o*x+i*p*x)*E,r[6]=(v*c*s-l*y*s-v*o*f+i*y*f+l*o*x-i*c*x)*E,r[7]=(l*p*s-h*c*s+h*o*f-i*p*f-l*o*m+i*c*m)*E,r[8]=_*E,r[9]=(v*d*s-h*g*s-v*a*m+i*g*m+h*a*x-i*d*x)*E,r[10]=(l*g*s-v*u*s+v*a*f-i*g*f-l*a*x+i*u*x)*E,r[11]=(h*u*s-l*d*s-h*a*f+i*d*f+l*a*m-i*u*m)*E,r[12]=M*E,r[13]=(h*g*o-v*d*o+v*a*p-i*g*p-h*a*y+i*d*y)*E,r[14]=(v*u*o-l*g*o-v*a*c+i*g*c+l*a*y-i*u*y)*E,r[15]=(l*d*o-h*u*o+h*a*c-i*d*c-l*a*p+i*u*p)*E,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+r,l*o-n*s,l*s+n*o,0,l*o+n*s,u*o+r,u*s-n*a,0,l*s-n*o,u*s+n*a,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r,n){return this.set(1,e,t,0,0,1,r,0,0,0,1,0,0,0,0,1),n&&this.transpose(),this},compose:function(e,t,r,n){return this.makeRotationFromQuaternion(t),n&&this.multiply((new w).makeShear(n.x,n.y,n.z)),this.scale(r),this.setPosition(e),this},decompose:function(e,t,r,n){if(n)return this.decompose2(e,t,r,n);void 0===d&&(d=new M,p=new w);var i=this.elements,a=d.set(i[0],i[1],i[2]).length(),o=d.set(i[4],i[5],i[6]).length(),s=d.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],p.elements.set(this.elements);var l=1/a,u=1/o,c=1/s;return p.elements[0]*=l,p.elements[1]*=l,p.elements[2]*=l,p.elements[4]*=u,p.elements[5]*=u,p.elements[6]*=u,p.elements[8]*=c,p.elements[9]*=c,p.elements[10]*=c,t.setFromRotationMatrix(p),r.x=a,r.y=o,r.z=s,this},decompose2:function(e,t,r,n){var i=this.clone();if(i[3]=0,i[7]=0,i[11]=0,i[15]=1,0===i.determinant())return console.error("THREE.Matrix4.decompose2(): Cannot apply decompose2 on singular matrix"),this;var a=(new w).copy(this),o=a.elements;e.set(o[12],o[13],o[14]),o[12]=o[13]=o[14]=0;var s=new M(o[0],o[1],o[2]),l=new M(o[4],o[5],o[6]),u=new M(o[8],o[9],o[10]);return r.setX(s.length()),s.divideScalar(r.x),n.setX(s.dot(l)),l.sub(s.clone().multiplyScalar(n.x)),r.setY(l.length()),l.divideScalar(r.y),n.setX(n.x/r.y),n.setY(s.dot(u)),u.sub(s.clone().multiplyScalar(n.y)),n.setZ(l.dot(u)),u.sub(l.clone().multiplyScalar(n.z)),r.setZ(u.length()),u.divideScalar(r.z),n.setY(n.y/r.z),n.setZ(n.z/r.z),o[0]=s.x,o[4]=l.x,o[8]=u.x,o[1]=s.y,o[5]=l.y,o[9]=u.y,o[2]=s.z,o[6]=l.z,o[10]=u.z,s.dot((new M).crossVectors(l,u))<0&&(r.multiplyScalar(-1),a.multiplyScalar(-1)),t.setFromRotationMatrix(a),this},makePerspective:function(e,t,r,n,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),l=2*i/(r-n),u=(t+e)/(t-e),c=(r+n)/(r-n),f=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,r,n,i,a){var o=this.elements,s=1/(t-e),l=1/(r-n),u=1/(a-i),c=(t+e)*s,f=(r+n)*l,h=(a+i)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},_.prototype={constructor:_,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=Math.cos(e._x/2),n=Math.cos(e._y/2),i=Math.cos(e._z/2),a=Math.sin(e._x/2),o=Math.sin(e._y/2),s=Math.sin(e._z/2),l=e.order;return"XYZ"===l?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"YXZ"===l?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"ZXY"===l?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"ZYX"===l?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"YZX"===l?(this._x=a*n*i+r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i-a*o*s):"XZY"===l&&(this._x=a*n*i-r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i+a*o*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],a=r[8],o=r[1],s=r[5],l=r[9],u=r[2],c=r[6],f=r[10],h=n+s+f;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(c-l)*t,this._y=(a-u)*t,this._z=(o-i)*t):n>s&&n>f?(t=2*Math.sqrt(1+n-s-f),this._w=(c-l)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(a+u)/t):s>f?(t=2*Math.sqrt(1+s-n-f),this._w=(a-u)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+f-n-s),this._w=(o-i)/t,this._x=(a+u)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(r,n){return void 0===e&&(e=new M),(t=r.dot(n)+1)<1e-6?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=r*u+a*o+n*l-i*s,this._y=n*u+a*s+i*o-r*l,this._z=i*u+a*l+r*s-n*o,this._w=a*u-r*o-n*s-i*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,a=this._w,o=a*e._w+r*e._x+n*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=n,this._z=i,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var l=Math.atan2(s,o),u=Math.sin((1-t)*l)/s,c=Math.sin(t*l)/s;return this._w=a*u+this._w*c,this._x=r*u+this._x*c,this._y=n*u+this._y*c,this._z=i*u+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},(0,o.default)(_,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,o,s){var l=r[n+0],u=r[n+1],c=r[n+2],f=r[n+3],h=i[o+0],d=i[o+1],p=i[o+2],m=i[o+3];if(f!==m||l!==h||u!==d||c!==p){var v=1-s,g=l*h+u*d+c*p+f*m,y=g>=0?1:-1,x=1-g*g;if(x>a.default){var b=Math.sqrt(x),w=Math.atan2(b,g*y);v=Math.sin(v*w)/b,s=Math.sin(s*w)/b}var _=s*y;if(l=l*v+h*_,u=u*v+d*_,c=c*v+p*_,f=f*v+m*_,v===1-s){var M=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=M,u*=M,c*=M,f*=M}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f}}),M.prototype={constructor:M,isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return!1===(e&&e.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===x&&(x=new _),this.applyQuaternion(x.setFromEuler(e))},applyAxisAngle:function(){var e;return function(t,r){return void 0===e&&(e=new _),this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;this.x=i[0]*t+i[4]*r+i[8]*n+i[12],this.y=i[1]*t+i[5]*r+i[9]*n+i[13],this.z=i[2]*t+i[6]*r+i[10]*n+i[14];var a=i[3]*t+i[7]*r+i[11]*n+i[15];return this.divideScalar(a)},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*n-o*r,u=s*r+o*t-i*n,c=s*n+i*r-a*t,f=-i*t-a*r-o*n;return this.x=l*s+f*-i+u*-o-c*-a,this.y=u*s+f*-a+c*-i-l*-o,this.z=c*s+f*-o+l*-a-u*-i,this},project:function(){var e;return function(t){return void 0===e&&(e=new w),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new w),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new M,t=new M),e.set(r,r,r),t.set(n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var r=this.x,n=this.y,i=this.z;return this.x=n*e.z-i*e.y,this.y=i*e.x-r*e.z,this.z=r*e.y-n*e.x,this},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new M),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new M),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(b.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var r=e;e=t,t=r}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},S.prototype={constructor:S,isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*n+a[12]*i,this.y=a[1]*t+a[5]*r+a[9]*n+a[13]*i,this.z=a[2]*t+a[6]*r+a[10]*n+a[14]*i,this.w=a[3]*t+a[7]*r+a[11]*n+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],f=a[9],h=a[2],d=a[6],p=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-h)<.01&&Math.abs(f-d)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+h)<.1&&Math.abs(f+d)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,v=(c+1)/2,g=(p+1)/2,y=(s+u)/4,x=(l+h)/4,b=(f+d)/4;return m>v&&m>g?m<.01?(r=0,n=.707106781,i=.707106781):(n=y/(r=Math.sqrt(m)),i=x/r):v>g?v<.01?(r=.707106781,n=0,i=.707106781):(r=y/(n=Math.sqrt(v)),i=b/n):g<.01?(r=.707106781,n=.707106781,i=0):(r=x/(i=Math.sqrt(g)),n=b/i),this.set(r,n,i,t),this}var w=Math.sqrt((d-f)*(d-f)+(l-h)*(l-h)+(u-s)*(u-s));return Math.abs(w)<.001&&(w=1),this.x=(d-f)/w,this.y=(l-h)/w,this.z=(u-s)/w,this.w=Math.acos((o+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new S,t=new S),e.set(r,r,r,r),t.set(n,n,n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},T.prototype={constructor:T,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(t,r,n){if(t=b.euclideanModulo(t,1),r=b.clamp(r,0,1),n=b.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+r):n+r-n*r,a=2*n-i;this.r=e(a,i,t+1/3),this.g=e(a,i,t),this.b=e(a,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(o,s,l)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,c=(u=r[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(u=k[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,n=e||{h:0,s:0,l:0},i=this.r,a=this.g,o=this.b,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(l+s)/2;if(l===s)t=0,r=0;else{var c=s-l;switch(r=u<=.5?c/(s+l):c/(2-s-l),s){case i:t=(a-o)/c+(a<o?6:0);break;case a:t=(o-i)/c+2;break;case o:t=(i-a)/c+4}t/=6}return n.h=t,n.s=r,n.l=u,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var n=this.getHSL();return n.h+=e,n.s+=t,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}};var E,P,A,C,R,I,O,L,D,N,V,F,B,U,k={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function z(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function G(e,t){this.start=void 0!==e?e:new M,this.end=void 0!==t?t:new M}function j(e,t){this.normal=void 0!==e?e:new M(1,0,0),this.constant=void 0!==t?t:0}function H(e,t,r){this.a=void 0!==e?e:new M,this.b=void 0!==t?t:new M,this.c=void 0!==r?r:new M}function W(e,t){this.center=void 0!==e?e:new M,this.radius=void 0!==t?t:0}function X(e,t){this.min=void 0!==e?e:new M(1/0,1/0,1/0),this.max=void 0!==t?t:new M(-1/0,-1/0,-1/0)}function q(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||q.DefaultOrder}function Y(e,t){this.origin=void 0!==e?e:new M,this.direction=void 0!==t?t:new M}function Z(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}z.prototype={constructor:z,isMatrix3:!0,set:function(e,t,r,n,i,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=n,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=r,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new M);for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-r*i*u+r*o*s+n*i*l-n*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var r=e.elements,n=this.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],f=r[7],h=r[8],d=h*l-u*f,p=u*c-h*s,m=f*s-l*c,v=i*d+a*p+o*m;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return n[0]=d*y,n[1]=(o*f-h*a)*y,n[2]=(u*a-o*l)*y,n[3]=p*y,n[4]=(h*i-o*c)*y,n[5]=(o*s-u*i)*y,n[6]=m*y,n[7]=(a*c-f*i)*y,n[8]=(l*i-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}},G.prototype={constructor:G,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new M).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new M).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new M;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(E=new M,P=new M,function(e,t){E.subVectors(e,this.start),P.subVectors(this.end,this.start);var r=P.dot(P),n=P.dot(E)/r;return t&&(n=b.clamp(n,0,1)),n}),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t),i=r||new M;return this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},j.prototype={constructor:j,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new M,t=new M;return function(r,n,i){var a=e.subVectors(i,n).cross(t.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e);return(t||new M).copy(this.normal).multiplyScalar(r)},intersectLine:function(){var e=new M;return function(t,r){var n=r||new M,i=t.delta(e),a=this.normal.dot(i);if(0===a)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/a;return o<0||o>1?void 0:n.copy(i).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new M).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new M,t=new z;return function(r,n){var i=this.coplanarPoint(e).applyMatrix4(r),a=n||t.getNormalMatrix(r),o=this.normal.applyMatrix3(a).normalize();return this.constant=-i.dot(o),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},H.normal=(A=new M,function(e,t,r,n){var i=n||new M;i.subVectors(r,t),A.subVectors(e,t),i.cross(A);var a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}),H.barycoordFromPoint=function(){var e=new M,t=new M,r=new M;return function(n,i,a,o,s){e.subVectors(o,i),t.subVectors(a,i),r.subVectors(n,i);var l=e.dot(e),u=e.dot(t),c=e.dot(r),f=t.dot(t),h=t.dot(r),d=l*f-u*u,p=s||new M;if(0===d)return p.set(-2,-1,-1);var m=1/d,v=(f*c-u*h)*m,g=(l*h-u*c)*m;return p.set(1-v-g,g,v)}}(),H.containsPoint=function(){var e=new M;return function(t,r,n,i){var a=H.barycoordFromPoint(t,r,n,i,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),H.prototype={constructor:H,set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new M,t=new M;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new M).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return H.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new j).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return H.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return H.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(e,t){void 0===C&&(C=new j,R=[new G,new G,new G],I=new M,O=new M);var r=t||new M,n=1/0;if(C.setFromCoplanarPoints(this.a,this.b,this.c),C.projectPoint(e,I),!0===this.containsPoint(I))r.copy(I);else{R[0].set(this.a,this.b),R[1].set(this.b,this.c),R[2].set(this.c,this.a);for(var i=0;i<R.length;i++){R[i].closestPointToPoint(I,!0,O);var a=I.distanceToSquared(O);a<n&&(n=a,r.copy(O))}}return r},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},W.prototype={constructor:W,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(L=new X,function(e,t){var r=this.center;void 0!==t?r.copy(t):L.setFromPoints(e).getCenter(r);for(var n=0,i=0,a=e.length;i<a;i++)n=Math.max(n,r.distanceToSquared(e[i]));return this.radius=Math.sqrt(n),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),n=t||new M;return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){var t=e||new X;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},X.prototype={constructor:X,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],f=e[s+2];u<t&&(t=u),c<r&&(r=c),f<n&&(n=f),u>i&&(i=u),c>a&&(a=c),f>o&&(o=f)}this.min.set(t,r,n),this.max.set(i,a,o)},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),f=e.getZ(s);u<t&&(t=u),c<r&&(r=c),f<n&&(n=f),u>i&&(i=u),c>a&&(a=c),f>o&&(o=f)}this.min.set(t,r,n),this.max.set(i,a,o)},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new M;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(){var e=new M;return function(t){var r=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var n,i,a=t.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(n=0,i=o.length;n<i;n++)e.copy(o[n]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(n=0,i=s.count;n<i;n++)e.fromBufferAttribute(s,n).applyMatrix4(t.matrixWorld),r.expandByPoint(e)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new M;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new M;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new M).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e;return function(t){return void 0===e&&(e=new M),this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant},clampPoint:function(e,t){return(t||new M).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new M;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new M;return function(t){var r=t||new W;return this.getCenter(r.center),r.radius=.5*this.getSize(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(D=[new M,new M,new M,new M,new M,new M,new M,new M],function(e){return this.isEmpty()?this:(D[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),D[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),D[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),D[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),D[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),D[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),D[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),D[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(D),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},q.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],q.DefaultOrder="XYZ",q.prototype={constructor:q,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=b.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],f=i[2],h=i[6],d=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(h,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===t?(this._y=Math.asin(-n(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===t?(this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(h,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,r,n){return void 0===e&&(e=new w),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(N=new _,function(e){return N.setFromEuler(this),this.setFromQuaternion(N,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new M(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Y.prototype={constructor:Y,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new M).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new M;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new M;r.subVectors(e,this.origin);var n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new M;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(F=new M,B=new M,U=new M,function(e,t,r,n){F.copy(e).add(t).multiplyScalar(.5),B.copy(t).sub(e).normalize(),U.copy(this.origin).sub(F);var i,a,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(B),c=U.dot(this.direction),f=-U.dot(B),h=U.lengthSq(),d=Math.abs(1-u*u);if(d>0)if(a=u*c-f,s=l*d,(i=u*f-c)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+u*(a*=p)+2*c)+a*(u*i+a+2*f)+h}else a=l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*f)+h;else a=-l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*f)+h;else a<=-s?o=-(i=Math.max(0,-(-u*l+c)))*i+(a=i>0?-l:Math.min(Math.max(-l,-f),l))*(a+2*f)+h:a<=s?(i=0,o=(a=Math.min(Math.max(-l,-f),l))*(a+2*f)+h):o=-(i=Math.max(0,-(u*l+c)))*i+(a=i>0?l:Math.min(Math.max(-l,-f),l))*(a+2*f)+h;else a=u>0?-l:l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*f)+h;return r&&r.copy(this.direction).multiplyScalar(i).add(this.origin),n&&n.copy(B).multiplyScalar(a).add(F),o}),intersectSphere:function(){var e=new M;return function(t,r){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),i=e.dot(e)-n*n,a=t.radius*t.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=n-o,l=n+o;return s<0&&l<0?null:s<0?this.at(l,r):this.at(s,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,n,i,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,f=this.origin;return l>=0?(r=(e.min.x-f.x)*l,n=(e.max.x-f.x)*l):(r=(e.max.x-f.x)*l,n=(e.min.x-f.x)*l),u>=0?(i=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(i=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),r>a||i>n?null:((i>r||r!=r)&&(r=i),(a<n||n!=n)&&(n=a),c>=0?(o=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(o=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),r>s||o>n?null:((o>r||r!=r)&&(r=o),(s<n||n!=n)&&(n=s),n<0?null:this.at(r>=0?r:n,t)))},intersectsBox:(V=new M,function(e){return null!==this.intersectBox(e,V)}),intersectTriangle:function(){var e=new M,t=new M,r=new M,n=new M;return function(i,a,o,s,l){t.subVectors(a,i),r.subVectors(o,i),n.crossVectors(t,r);var u,c=this.direction.dot(n);if(c>0){if(s)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}e.subVectors(this.origin,i);var f=u*this.direction.dot(r.crossVectors(e,r));if(f<0)return null;var h=u*this.direction.dot(t.cross(e));if(h<0)return null;if(f+h>c)return null;var d=-u*e.dot(n);return d<0?null:this.at(d/c,l)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},Z.prototype={constructor:Z,set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(b.clamp(e.y/this.radius,-1,1))),this}};l.InstanceScalarSize=2,M.InstanceScalarSize=3,S.InstanceScalarSize=4,T.InstanceScalarSize=3,_.InstanceScalarSize=4,z.InstanceScalarSize=9,w.InstanceScalarSize=16,T.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},t.Matrix4=w,t.Matrix3=z,t.Vector2=l,t.Vector3=M,t.Vector4=S,t.Quaternion=_,t.Line3=G,t.Color=T,t.Triangle=H,t.Box3=X,t.Euler=q,t.Math=b,t.Ray=Y,t.Spherical=Z,t.Sphere=W,t.Plane=j,t.REVISION="84-threekit",t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=0,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.PCSSSoftShadowMap=3,t.FrontSide=0,t.BackSide=1,t.DoubleSide=2,t.FlatShading=1,t.SmoothShading=2,t.NoColors=0,t.FaceColors=1,t.VertexColors=2,t.NoBlending=0,t.NormalBlending=1,t.AdditiveBlending=2,t.SubtractiveBlending=3,t.MultiplyBlending=4,t.CustomBlending=5,t.AddEquation=100,t.SubtractEquation=101,t.ReverseSubtractEquation=102,t.MinEquation=103,t.MaxEquation=104,t.ZeroFactor=200,t.OneFactor=201,t.SrcColorFactor=202,t.OneMinusSrcColorFactor=203,t.SrcAlphaFactor=204,t.OneMinusSrcAlphaFactor=205,t.DstAlphaFactor=206,t.OneMinusDstAlphaFactor=207,t.DstColorFactor=208,t.OneMinusDstColorFactor=209,t.SrcAlphaSaturateFactor=210,t.NeverDepth=0,t.AlwaysDepth=1,t.LessDepth=2,t.LessEqualDepth=3,t.EqualDepth=4,t.GreaterEqualDepth=5,t.GreaterDepth=6,t.NotEqualDepth=7,t.MultiplyOperation=0,t.MixOperation=1,t.AddOperation=2,t.NoToneMapping=0,t.LinearToneMapping=1,t.ReinhardToneMapping=2,t.Uncharted2ToneMapping=3,t.CineonToneMapping=4,t.UVMapping=300,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.SphericalReflectionMapping=305,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.RepeatWrapping=1e3,t.ClampToEdgeWrapping=1001,t.MirroredRepeatWrapping=1002,t.NearestFilter=1003,t.NearestMipMapNearestFilter=1004,t.NearestMipMapLinearFilter=1005,t.LinearFilter=1006,t.LinearMipMapNearestFilter=1007,t.LinearMipMapLinearFilter=1008,t.UnsignedByteType=1009,t.ByteType=1010,t.ShortType=1011,t.UnsignedShortType=1012,t.IntType=1013,t.UnsignedIntType=1014,t.FloatType=1015,t.HalfFloatType=1016,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedInt248Type=1020,t.AlphaFormat=1021,t.RGBFormat=1022,t.RGBAFormat=1023,t.LuminanceFormat=1024,t.LuminanceAlphaFormat=1025,t.RGBEFormat=1023,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.RGB_S3TC_DXT1_Format=2001,t.RGBA_S3TC_DXT1_Format=2002,t.RGBA_S3TC_DXT3_Format=2003,t.RGBA_S3TC_DXT5_Format=2004,t.RGB_PVRTC_4BPPV1_Format=2100,t.RGB_PVRTC_2BPPV1_Format=2101,t.RGBA_PVRTC_4BPPV1_Format=2102,t.RGBA_PVRTC_2BPPV1_Format=2103,t.RGB_ETC1_Format=2151,t.LoopOnce=2200,t.LoopRepeat=2201,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=2400,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=0,t.TriangleStripDrawMode=1,t.TriangleFanDrawMode=2,t.LinearEncoding=3e3,t.sRGBEncoding=3001,t.GammaEncoding=3007,t.RGBEEncoding=3002,t.LogLuvEncoding=3003,t.RGBM7Encoding=3004,t.RGBM16Encoding=3005,t.RGBDEncoding=3006,t.BasicDepthPacking=3200,t.RGBADepthPacking=3201,t.OrderIndependentTransperancy=3300,t.PaintersTransperancy=3301},function(e,t,r){var n=r(16),i=r(128),a=r(54),o=r(72),s=r(61),l=function(e,t,r){var u,c,f,h,d=e&l.F,p=e&l.G,m=e&l.S,v=e&l.P,g=e&l.B,y=p?n:m?n[t]||(n[t]={}):(n[t]||{}).prototype,x=p?i:i[t]||(i[t]={}),b=x.prototype||(x.prototype={});for(u in p&&(r=t),r)f=((c=!d&&y&&void 0!==y[u])?y:r)[u],h=g&&c?s(f,n):v&&"function"==typeof f?s(Function.call,f):f,y&&o(y,u,f,e&l.U),x[u]!=f&&a(x,u,h),v&&b[u]!=f&&(b[u]=f)};n.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,r){e.exports={default:r(391),__esModule:!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(56)),i=l(r(2));t.default=u;var a=l(r(43)),o=l(r(282)),s=l(r(76));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,n){var i=e.InstanceScalarSize||n,s=n||i,l=null!==t?t*s:null;if(void 0===i||void 0===s)throw Error("Can't determine element size / stride!");var u=r||Float32Array,c=a.default.maybeCreate(u,l);o.default.call(this,c,t||(c.length+s-i)/s|0),this.type=e,this.stride=s,this.elementSize=i,this.tempBuffer=new Float32Array(i)}u.prototype=(0,i.default)((0,n.default)(o.default.prototype),{constructor:u,getAt:function(e,t){return(t||new this.type).fromArray(this.data,e*this.stride)},setAt:function(e,t){t.toArray(this.data,e*this.stride)},addAt:function(e,t){t.toArray(this.tempBuffer,0);for(var r=0,n=e*this.stride;r<this.elementSize;r++)this.data[n+r]+=this.tempBuffer[r]},multiplyScalarAt:function(e,t){for(var r=0,n=e*this.stride;r<this.elementSize;r++)this.data[n+r]*=t},newCompatibleView:function(e,t){return new u(this.type,t||null,e,this.stride)},newCompatibleBuffer:function(){return new s.default(this.type,this.data.constructor,this.stride)}}),u.fromObjects=function(e,t,r){var n=new u(e,t.length,r);return a.default.copyObjects(t,n.data),n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(r(89)),i=y(r(18)),a=y(r(33)),o=y(r(30)),s=y(r(6)),l=y(r(13));t.find=x,t.filter=b,t.get=w,t.getAll=_,t.getEval=function(e,t,r,n){return w(e,n?[t,r,n]:[t,r])},t.getWorldTransform=M,t.getRelativeTransform=S,t.getLocalTransform=function(e){var t=e.translation,r=e.rotation,n=e.scale,i=e.rotateOrder,a=e.preRotation,o=e.rotatePivotOffset,s=e.localRotatePivot,l=e.scalePivotOffset,c=e.localScalePivot,f=e.shear;0===n.x&&(n.x=1e-7);0===n.y&&(n.y=1e-7);0===n.z&&(n.z=1e-7);var h=new u.Vector3(0,0,0),d=[],p=(new u.Matrix4).makeTranslation(t.x,t.y,t.z);d.push(p);var m=new u.Matrix4;h.equals(o)||(m.makeTranslation(o.x,o.y,o.z),d.push(m));var v=new u.Matrix4,g=new u.Matrix4,y=!1;h.equals(s)||(v.makeTranslation(s.x,s.y,s.z),d.push(v),g.getInverse(v,!0),y=!0);var x=new u.Matrix4;if(!h.equals(a)){var b=(new u.Vector3).copy(a).multiplyScalar(Math.PI/180);x.makeRotationFromEuler(new u.Euler(b.x,b.y,b.z,i)),d.push(x)}var w=(new u.Vector3).copy(r).multiplyScalar(Math.PI/180),_=(new u.Matrix4).makeRotationFromEuler(new u.Euler(w.x,w.y,w.z,i));d.push(_),y&&d.push(g);var M=new u.Matrix4;h.equals(l)||(M.makeTranslation(l.x,l.y,l.z),d.push(M));var S=new u.Matrix4,T=new u.Matrix4,E=!1;h.equals(c)||(S.makeTranslation(c.x,c.y,c.z),d.push(S),T.getInverse(S,!0),E=!0);var P=f.x,A=f.y,C=f.z,R=new u.Matrix4;R.set(1,P,A,0,0,1,C,0,0,0,1,0,0,0,0,1),d.push(R);var I=(new u.Matrix4).makeScale(n.x,n.y,n.z);d.push(I),E&&d.push(T);for(var O=new u.Matrix4,L=0;L<d.length;L++)O.multiply(d[L]);return O},t.set=T,t.setAll=E,t.reparent=P,t.getWarnings=A,t.setVRCamera=C,t.clone=R,t.cloneModel=I,t.attachModel=O,t.getAttachTransform=L,t.pruneAssets=D,t.getLocalBoundingBox=N,t.getNodeBoundingBox=V,t.isVisible=F,t.getAvailableOperators=B,t.getScreenPosition=U,t.getCurrentPass=k,t.exportJSON=z,t.addNode=j,t.addOperator=H;var u=r(0),c=r(10),f=r(8),h=r(23),d=r(90),p=r(111),m=y(p),v=r(74),g=(y(r(42)),y(r(118)));function y(e){return e&&e.__esModule?e:{default:e}}function x(e,t,r){var n=(0,d.buildQueryObject)(t),i=e.get("sceneGraph");if(n.id){var a=i.nodes[n.id];return a&&n.parent?a.parent||null:a&&n.child?(0,d.findChild)(e,a,{type:n.child,shallow:!0},!1,!0)||null:a?(0,d.getMatch)(a,n,r):null}if(n.from&&n.from.all){var o=void 0,u=!0,c=!1,f=void 0;try{for(var h,p=(0,l.default)((0,s.default)(i.nodes));!(u=(h=p.next()).done);u=!0){var m=h.value;if(o=(0,d.getMatch)(i.nodes[m],n))return o}}catch(e){c=!0,f=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw f}}return null}var v=n.from?x(e,n.from,!0):i.activeSceneId,g=v&&i.nodes[v];return g?(0,d.findChild)(e,g,n,n.includeParent&&g,r):null}function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,d.buildQueryObject)(t),i=e.get("sceneGraph"),a=n.from?x(e,n.from):i.activeSceneId;if(!a)return[];var o=i.nodes[a];if(!o)throw new Error("Unknown node to filter from");return(0,d.matchChildren)(e,o,n,n.includeParent&&o,r.onlyNode)}function w(e,t){var r=Array.isArray(t)?t:x(e,t);if(r&&Array.isArray(r)){if(r.length>=2&&"eval"===r[1]){var n=(0,c.getEvalSceneGraph)(e).evaluatedNodes[r[0]],i=n&&n[r[2]];return i&&r[3]?i[r[3]]:i}return(0,c.get)(e,r)}}function _(e,t){var r=Array.isArray(t)?t:b(e,t);return r?r.reduce(function(t,r){return t[r[0]]=(0,c.get)(e,r),t},{}):void 0}function M(e,t){var r=w(e,{id:t,evalPlug:"Transform"});if(!r)return null;var n=r.transform,i=e.get("sceneGraph").nodes[t],a=i&&i.parent,o=a&&M(e,a);return o?(new u.Matrix4).copy(o).multiply(n):(new u.Matrix4).copy(n)}function S(e,t,r){var n=e.get("sceneGraph"),i=n.nodes,a=n.evaluatedNodes,o=a[t]&&a[t].Transform;if(!o)return null;if(t===r)return new u.Matrix4;var s=o.transform,l=i[t]&&i[t].parent,c=l&&S(e,l,r);return c?(new u.Matrix4).copy(c).multiply(s):(new u.Matrix4).copy(s)}function T(e,t){return function(r){var n=Array.isArray(e)?e:x(r,e);if(!n)return console.warn("No matching query",e),o.default.resolve();if(3===n.length){if("object"!==(void 0===t?"undefined":(0,a.default)(t)))throw new Error("If no property is set, expect an object to merge into the operator");return r.dispatch((0,c.merge)(n,t))}if(4===n.length)return r.dispatch((0,c.set)(n,t));if(2===n.length){if("name"!==n[1])throw new Error("Can only set node name");return r.dispatch((0,c.set)(n,t))}}}function E(e,t){return function(r){var n=Array.isArray(e)?e:b(r,e);return o.default.all(n.map(function(e){return r.dispatch(T(e,t))}))}}function P(e,t){return function(r){var n=r.get("sceneGraph").nodes,i=x(r,e);if(!n[i])return console.warn("Unknown parent for reparent: "+i);var a=Array.isArray(t)?t:b(r,t),o=M(r,i)||new u.Matrix4,s=(new u.Matrix4).getInverse(o),l=a.filter(function(e){return!!n[e]&&e!==i});return l.map(function(e){return{id:e,worldTransform:M(r,e)}}).forEach(function(e){var t=e.id,n=e.worldTransform,i=new u.Vector3,a=new u.Vector3,o=new u.Quaternion;n.premultiply(s).decompose(i,o,a);var l=(new u.Euler).setFromQuaternion(o,"ZYX").toVector3().multiplyScalar(180/Math.PI);r.dispatch((0,c.merge)([t,"Transform",0],{translation:i,rotation:l,scale:a}))}),r.dispatch((0,c.reparent)(i,l))}}function A(e){for(var t=e.get("sceneGraph"),r=(0,s.default)(t.nodes),n=void 0,i=[],a=0;a<r.length;a++)(n=t.nodes[r[a]])&&n.warnings&&n.warnings.length&&i.push(n);return i}function C(e){return function(t){e.type="Camera";var r=x(t,e);Array.isArray(r)&&(r=r[0]),t.dispatch(T({plug:"Player",property:"vrCamera"},r))}}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===t.cloneDependencies&&(t.cloneDependencies=!0),function(r){var n,a=Array.isArray(e)?e:b(r,e),s=r.get("sceneGraph");if(!a.length)return console.warn("No match for clone: ",e),o.default.resolve(!0);var l=(0,c.findRoot)(r,a[0]),u=t.to||s.activeSceneId,f=x(r,{id:l,child:"Objects"}),h=x(r,{id:u,child:"Objects"}),d=(n={},(0,i.default)(n,f,h),(0,i.default)(n,x(r,{id:l,child:"MaterialLibrary"}),x(r,{id:u,child:"MaterialLibrary"})),n);return(t.withNull?r.dispatch((0,c.addNode)({name:t.withNull,parent:h,type:"Null",plugs:{Null:[["Null",{}]],Transform:[["Transform",{}]],Properties:[["Default",{}]]}})):o.default.resolve(null)).then(function(e){return e&&(d[f]=e),r.dispatch((0,c.clone)(a,d,{cloneDependencies:t.cloneDependencies})).then(function(r){return e&&(r[t.withNull]=e),r})})}}function I(e){var t=e.sceneId,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){var n={from:{id:t},child:"Objects",type:["PolyMesh","Null","Light","Shape","Vrscene"]},a=b(e,n),s=e.get("sceneGraph");if(!a.length)return console.warn("No match for clone: ",n),o.default.resolve(!0);var l=(0,c.findRoot)(e,a[0]),u=r.to||s.activeSceneId,f=x(e,{id:l,child:"Objects"}),h=x(e,{id:u,child:"Objects"}),d=x(e,{id:l,child:"MaterialLibrary"}),p=w(e,{id:l,plug:"Player",property:"configurator"}),m=(0,i.default)({},f,h),g=w(e,{id:l,property:"name"});return e.dispatch(j({name:g+" Model",parent:h,type:"Model"})).then(function(r){return e.dispatch((0,v.initializeConfiguration)({id:r,config:p,sceneId:t})),m[f]=r,m[d]=r,e.dispatch((0,c.clone)(a,m,{cloneDependencies:!0})).then(function(e){return r})})}}function O(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(a){var o=L(a,e,t,r,n,i),s=o.translation,l=o.rotation,u=o.scale;l&&a.dispatch(T({id:t,plug:"Transform",property:"rotation"},l)),s&&a.dispatch(T({id:t,plug:"Transform",property:"translation"},s)),u&&a.dispatch(T({id:t,plug:"Transform",property:"scale"},u))}}function L(e,t,r,i,a,o){var s=new u.Vector3,l=void 0,c=void 0,f=void 0,h=M(e,x(e,{id:r,parent:!0}))||new u.Matrix4,d=(new u.Matrix4).getInverse(h),p=M(e,t),m=M(e,r),v=M(e,i);if(!p||!m||!v)return{translation:l,rotation:c};p.premultiply(d),m.premultiply(d),v.premultiply(d);var g=new u.Vector3,y=new u.Quaternion;p.decompose(g,y,s);var b=new u.Vector3,w=new u.Quaternion,_=new u.Vector3;if(v.decompose(b,w,_),o){var S=(new u.Matrix4).makeScale((0,n.default)(s.x*_.x),(0,n.default)(s.y*_.y),(0,n.default)(s.z*_.z));v.premultiply(S),m.premultiply(S)}var T=new u.Vector3,E=new u.Quaternion;if(m.decompose(T,E,s),o&&(f=s.clone()),v.decompose(b,w,_),l=g.clone().sub(b).add(T),a){var P=y.multiply(w.inverse());c=(new u.Euler).setFromQuaternion(E.premultiply(P),"ZYX").toVector3().multiplyScalar(180/Math.PI);var A=b.clone().sub(T),C=A.clone().applyQuaternion(P);l.add(A.sub(C))}return{translation:l,rotation:c,scale:f}}function D(){return function(e){var t=e.get("sceneGraph"),r={};return b(e,{includeParent:!0}).forEach(function(e){var n=t.nodes[e]&&t.nodes[e].plugs,i=!0,a=!1,o=void 0;try{for(var u,c=function(){var e=u.value;n[e].forEach(function(t,n){var i=(0,p.lookupOperator)(e,t.type,[]),a=!0,o=!1,s=void 0;try{for(var u,c=(0,l.default)(i.fileReferenceKeys);!(a=(u=c.next()).done);a=!0){var f=u.value;t[f]&&(r[t[f]]=!0)}}catch(e){o=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}})},f=(0,l.default)((0,s.default)(n||{}));!(i=(u=f.next()).done);i=!0)c()}catch(e){a=!0,o=e}finally{try{!i&&f.return&&f.return()}finally{if(a)throw o}}}),o.default.all((0,h.filter)(e).map(function(t){return!r[t.get("id")]&&e.dispatch((0,h.removeFile)(t.get("id")))}))}}function N(e,t){var r=new u.Box3,n=e.get("sceneGraph").nodes[t].type;if("PolyMesh"===n){var i=w(e,{id:t,evalPlug:"PolyMesh",property:"mesh"});i&&r.copy(i.boundingBox)}else if("Shape"===n){var a=w(e,{id:t,evalPlug:"Shape",property:"shape"});a&&r.copy(a.boundingBox)}return r}function V(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.layer||null,i=new u.Box3,a=e.get("sceneGraph").nodes;if(r.ignoreChildren){var o=N(e,t);i.union(o)}else(0,c.traverseHierarchy)(e,t,!0,function(r){if(a[r]&&a[r].plugs&&a[r].plugs.Properties){if(n){var o=a[r].plugs.Properties,s=o&&o[0];if(s&&s.layer&&s.layer!==n)return}var l=N(e,r),u=S(e,r,t);l.applyMatrix4(u),i.union(l)}});var s=M(e,t)||new u.Matrix4;return i.applyMatrix4(s),i}function F(e,t){if("Enable"!==w(e,{id:e.get("sceneGraph").activeSceneId,plug:"Properties",property:"hierarchyVisibility"})){var r=w(e,{id:t,plug:"Properties",property:"visible"});return void 0===r||r}return function t(r){var n=e.get("sceneGraph").nodes[r],i=n&&n.parent,a=w(e,{id:r,plug:"Properties",property:"visible"});return!i||void 0===a||a&&t(i)}(t)}function B(){return m.default}function U(e,t){if(!t)return null;var r=(0,f.getRect)(e),n=.5*r.width,i=.5*r.height,a=V(e,t),o=new u.Box3,s=new u.Vector3,l=(0,f.getCamera)(e),c=(0,f.getCameraWorldTransform)(e),h=w(e,{id:l,evalPlug:"Camera"}),d={projectionMatrix:(0,g.default)(h),matrixWorld:c};if(a.isEmpty()){var p=M(e,t);if(!p)return null;var m=(new u.Vector3).setFromMatrixPosition(p);return m.project(d),{top:(m.y-1)*-i,left:(m.x+1)*n,width:0,height:0,x:(m.x+1)*n,y:(m.y-1)*-i}}for(var v=0;v<8;v++)s.set(a[Math.floor(v/4)?"max":"min"].x,a[Math.floor(v/2)%2?"max":"min"].y,a[v%2?"max":"min"].z),s.project(d),o.expandByPoint(s);var y={top:(o.max.y-1)*-i,left:(o.min.x+1)*n,width:(o.max.x-o.min.x)*n,height:(o.max.y-o.min.y)*i};return y.x=y.left+y.width/2,y.y=y.top+y.height/2,y}function k(e,t){return t?w(e,{name:t,evalPlug:"Pass"}):w(e,{id:w(e,{name:"Passes",plug:"GeneralRenderer",property:"curPass"}),evalPlug:"Pass"})||w(e,{type:"Pass",evalPlug:"Pass"})}function z(e,t){var r=b(e,{from:{id:t||e.get("sceneGraph").activeSceneId},includeParent:!0});return{sceneGraph:(0,c.exportJSON)(e,r),assets:(0,h.exportJSON)(e)}}var G={PolyMesh:{PolyMesh:"Box",Transform:"Transform",Material:"Reference",Properties:"PolyMeshProperties"},Light:{Light:"PointLight",Transform:"Transform",Properties:"Default"},Camera:{Camera:"Camera",Transform:"Transform",Properties:"Default"},Null:{Null:"Null",Transform:"Transform",Properties:"Default"},Model:{Null:"Null",Transform:"Transform",Mixer:"Mixer",Properties:"ModelProperties"},Material:{Material:"Physical",Properties:"MaterialProperties"},Image:{Image:"Image",Properties:"ImageProperties"},Pass:{Pass:"Pass"},Renderer:{Renderer:"WebGLRenderer"},Bone:{Bone:"Bone",Transform:"BoneTransform",Properties:"Default"},Annotation:{Annotation:"Annotation",Transform:"Transform",Properties:"Default"},Shape:{Shape:"Rectangle",Transform:"Transform",Material:"Reference",Properties:"ShapeProperties"},Helper:{Null:"Helper",Transform:"Transform",Properties:"Default"}};function j(e){var t=e.name,r=e.type,n=e.parent,i=e.plugs;if(!n)throw new Error("addNode requires parent to be set");if(!r)throw new Error("addNode requires type to be set");if(!t)throw new Error("addNode requires name to be set");if(!G[r])throw new Error("invalid type: "+r+" for addNode");var a=i||{},o=!0,u=!1,f=void 0;try{for(var h,d=(0,l.default)((0,s.default)(G[r]));!(o=(h=d.next()).done);o=!0){var p=h.value;if(a[p]||(a[p]=[[G[r][p],{}]]),!a[p][0][0])throw new Error("Required operator for "+p)}}catch(e){u=!0,f=e}finally{try{!o&&d.return&&d.return()}finally{if(u)throw f}}return(0,c.addNode)({name:t,type:r,plugs:a,parent:n})}function H(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments[4];if(!e)throw new Error("addOperator requires the id for the element receiving the operator");if(!t)throw new Error("addOperator requires the plug to be set");if(!r)throw new Error("addOperator requires the operator type to be set");var a=m.default[t];if(!a)throw new Error("Unknown plug: "+t);if(!a[r])throw new Error("Unknown operator: "+r);return(0,c.addOperator)(e,t,[r,n,i])}var W={actions:{set:T,setAll:E,clone:R,cloneModel:I,pruneAssets:D,setVRCamera:C,addOperator:H,addNode:j,reparent:P,attachModel:O},selectors:{get:w,getAll:_,getWorldTransform:M,find:x,filter:b,getWarnings:A,exportJSON:z,getNodeBoundingBox:V,getCurrentPass:k,getAvailableOperators:B,getScreenPosition:U,isVisible:F}};t.default=W},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(2));t.default=p;var i=d(r(244)),a=(r(0),d(r(14))),o=(d(r(3)),d(r(553))),s=d(r(550)),l=(d(r(112)),d(r(44))),u=d(r(7)),c=d(r(142)),f=d(r(293)),h=r(287);r(40);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){e?(this.faceRangeOffsets=e.faceRangeOffsets,this.positions=e.positions,this.normalMap=e.normalMap,this.uvMaps=a.default.shallowClone(e.uvMaps),e.tangentMap&&(this.tangentMap=e.tangentMap),e.skinning&&(this.skinning=e.skinning),e.edgeCreaseWeights&&(this.edgeCreaseWeights=e.edgeCreaseWeights),e.materialIds&&(this.materialIds=e.materialIds),e.blendShapes&&(this.blendShapes=e.blendShapes),e.faceConvexity&&(this.faceConvexity=e.faceConvexity),this.colorMaps=a.default.shallowClone(e.colorMaps),this._boundingBox=e.boundingBox,t&&(0,n.default)(this,t)):(this.faceRangeOffsets=new Uint32Array(1),this.positions=new u.default,this.colorMaps=new a.default,this.uvMaps=new a.default),this._cachedVolume=null,this._boundingBox=null,this._faceNormals=null}p.prototype={constructor:p,get boundingBox(){return this._boundingBox||(this._boundingBox=(0,o.default)(this.positions)),this._boundingBox},getNumFaces:function(){return this.faceRangeOffsets.length-1},getNumFaceVertices:function(){return this.positions.faceValueIndices.length},getNumVertices:function(){return this.positions.values.length},getMapById:function(e){return l.default.resolveMap(this,e)||null},topologyChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.skinning&&(this.skinning=null),this.edgeCreaseWeights&&(this.edgeCreaseWeights=null),this.materialIds&&!e&&(this.materialIds=null),this},getVolume:function(){return null===this._cachedVolume&&(this._cachedVolume=(0,s.default)(this)),this._cachedVolume},get faceNormals(){return this._faceNormals||(this._faceNormals=new c.default(this.positions)),this._faceNormals}},p.fromData=function(e,t,r,n){var i=new p({faceRangeOffsets:e,positions:t.isPolyMap?t:u.default.fromData(e,r||null,t),uvMaps:new a.default,colorMaps:new a.default});return n&&(i.materialIds=n),i},p.fromShapeSet=function(e){for(var t=e.loopRangeOffsets.length-1,r=[0],n=[],o=[],s=0,l=e.loopRangeOffsets[0],c=0;c<t;++c){var d=e.loopRangeOffsets[c+1],m=(0,i.default)(e.positions.data.subarray(3*l,3*d),e.holeOffsets[c],3);e.backFaceOffsets||(e.backFaceOffsets=0);for(var v=l+e.backFaceOffsets,g=m.length,y=0;y<g;y+=3)s+=3,r.push(s),n.push(m[y]+l),n.push(m[y+1]+l),n.push(m[y+2]+l),o.push(h.SmoothingGroupIds.Front),s+=3,r.push(s),n.push(m[y]+v),n.push(m[y+2]+v),n.push(m[y+1]+v),o.push(h.SmoothingGroupIds.Back);l=d}if(e.bevelSegments){for(var x=e.bevelSegments.length,b=0;b<x;b+=3)s+=3,r.push(s),n.push(e.bevelSegments[b]),n.push(e.bevelSegments[b+1]),n.push(e.bevelSegments[b+2]);o=o.concat(e.bevelSmoothingGroups)}var w=new Uint32Array(r),_=new Uint32Array(n),M=new p({faceRangeOffsets:w,positions:u.default.fromData(w,_,e.positions),normalMap:new a.default,uvMaps:new a.default,colorMaps:new a.default});return M=(0,f.default)(M,o)}},function(e,t,r){e.exports={default:r(395),__esModule:!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(r(2));t.default=d;var i=r(0),a=h(r(141)),o=h(r(3)),s=h(r(43)),l=h(r(544)),u=h(r(545)),c=h(r(548)),f=h(r(546));function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(e){this.faceRangeOffsets=e.faceRangeOffsets,this.faceValueIndices=e.faceValueIndices,this.values=e.values;var r=e.valueFaceIndices||null;this.valueFaceIndices=r,this.valueFaceIndexOffsets=r&&e.valueFaceIndexOffsets||null,this._edgeVertexAdjacency=null,this._faceEdgeAdjacency=null,this._valueAdjacency=null,this._valueValueAdjacency=null,this._faceFaceAdjacency=null,t&&(0,n.default)(this,t)}else this.faceRangeOffsets=new Uint32Array(1),this.faceValueIndices=new Uint32Array(0),this.values=new o.default(i.Vector3,0)}d.fromData=function(e,t,r){var n=new d({faceRangeOffsets:e,faceValueIndices:t||a.default.identity(r.length,Uint32Array),values:r.repack(Float32Array)}),i=e[e.length-1];if(n.faceValueIndices.length<i)throw Error("Number of position indices or unindexed data values does not match the number of face vertices!");return n.faceValueIndices.length>i&&console.warn("PolyMap has more position indices than face vertices"),n},d.prototype={constructor:d,isPolyMap:!0,findValueIndexOffset:function(e,t){for(var r=this.faceRangeOffsets,n=this.faceValueIndices,i=r[e],a=r[e+1],o=i;o!==a;++o)if(n[o]===t)return o;return-1},get edgeVertexAdjacency(){return this._edgeVertexAdjacency||(this._edgeVertexAdjacency=new l.default(this)),this._edgeVertexAdjacency},get faceEdgeAdjacency(){return this._faceEdgeAdjacency||(this._faceEdgeAdjacency=new u.default(this)),this._faceEdgeAdjacency},get valueAdjacency(){return this._valueAdjacency||(this._valueAdjacency=new c.default(this)),this._valueAdjacency},get valueValueAdjacency(){return this._valueValueAdjacency||(this._valueValueAdjacency=new ValueValueAdjacency(this)),this._valueValueAdjacency},get faceFaceAdjacency(){return this._faceFaceAdjacency||(this._faceFaceAdjacency=new f.default(this)),this._faceFaceAdjacency},updateInverseIndex:function(){if(null===this.valueFaceIndices){for(var e=this.faceRangeOffsets,t=-1,r=e[0],n=this.faceValueIndices,i=this._updateValueFaceIndexOffsets(),a=i.length,o=n.length,s=new Uint32Array(o),l=0;l!==o;++l)l===r&&(r=e[++t+1]),s[i[n[l]]++]=t;if(this.valueFaceIndices=s,0===i.byteOffset)throw Error("Invalid .valueFaceIndexOffsets != null!");this.valueFaceIndexOffsets=new Uint32Array(i.buffer,0,a)}return this},_updateValueFaceIndexOffsets:function(){var e=this.valueFaceIndexOffsets;if(null===e){var t=this.values.length,r=new Uint32Array(t+2),n=r.subarray(2);e=r.subarray(1),a.default.histogram(this.faceValueIndices,t,n),s.default.accumulate(n),this.valueFaceIndices=null,this.valueFaceIndexOffsets=e}return e},compactValues:function(){var e=this.values.length;if(0!==e){var t=new Uint32Array(e),r=this._compactFaceIndexOffsets(t);r!==e&&(this._compactData(t,r),this._compactIndices(t))}return this},_compactFaceIndexOffsets:function(e){for(var t=this._updateValueFaceIndexOffsets(),r=e.length,n=0,i=0,a=0;a!==r;++a){var o=t[a+1];e[a]=n,i!==o&&(n!==a&&(t[n]=i),i=o,++n)}if(t[n]=i,n!==r)if(0!==t.byteOffset){var l=new Uint32Array(t.buffer);t=s.default.slice(l,0,n+2).subarray(1)}else t=s.default.slice(t,0,n+1);return this.valueFaceIndexOffsets=t,n},_compactData:function(e,t){for(var r=this.values,n=r.length,i=new o.default(r.type,t),a=e[0],s=i.newRangeArray(),l=1;l!==n;++l){var u=e[l];a!==u&&(r.rangeToArray(l-1,1,s),i.arrayToRange(s,a,1),a=u)}r.rangeToArray(n-1,1,s),i.arrayToRange(s,a,1),this.values=i},_compactIndices:function(e){var t=this.faceValueIndices,r=t.length,n=new Uint32Array(r);a.default.apply(t,e,n),this.faceValueIndices=n}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WIREFRAME_MODE=t.progressBarOptions=t.manipulators=t.RENDER_MODES=void 0;var n,i=S(r(38)),a=S(r(30)),o=S(r(2)),s=S(r(18));t.useManipulator=te,t.getActiveManipulator=function(e){return e.getIn(["player","activeManipulator"])},t.addTool=re,t.removeTool=ne,t.showTool=ie,t.hideTool=ae,t.updateToolOptions=oe,t.getRect=function(e){return e.getIn(["player","rect"])},t.setRect=function(e){return{type:L,payload:e}},t.setCameraAttrs=se,t.getCameraAttrs=le,t.getCameraWorldTransform=ue,t.useCamera=ce,t.useVrCamera=function(e){return function(t){if(e){var r=t.getIn(["player","activeCamera"]),n=(0,d.get)(t,{plug:"Player",property:"vrCamera"})||m.virtualCameraId;t.dispatch(fe(m.vrCameraId,r));var i=t.get("sceneGraph"),a=i.nodes[n],s=i.nodes[m.vrCameraId],l=(0,m.initNode)(a),u=(0,o.default)({},l.plugs);return t.dispatch((0,m.replace)(m.vrCameraId,(0,o.default)(s,{plugs:u})))}var c=t.getIn(["player","prevCamera"])||m.virtualCameraId;return t.dispatch(fe(c,null,!1))}},t.setCamera=fe,t.setThree=function(e){return{type:Y,payload:e}},t.getThree=he,t.getThreeScene=de,t.getThreeCamera=pe,t.getBoundingBox=function(e,t){var r=t||me(e),n=(0,d.get)(e,{id:r,plug:"Properties",property:"frameLayer"});return(0,d.getNodeBoundingBox)(e,(0,d.find)(e,"Objects"),{layer:n})},t.getCamera=me,t.getTools=function(e){return e.getIn(["player","tools"])},t.setCameraPosition=ve,t.getInitialCameraPosition=ge,t.requestFullscreen=ye,t.exitFullscreen=xe,t.toggleFullscreen=be,t.isFullscreen=we,t.setFullscreen=_e,t.getRenderingMode=function(e){return e.getIn(["player","renderingMode"])},t.isNormalRenderingMode=function(e){return e.getIn(["player","renderingMode"])===T.normal},t.isVRMode=Me,t.isLenticularMode=Se,t.activateTool=function(e){return function(t){var r=t.getIn(["player","tools",e]);if(r){if(r.get("action"))return r.get("action")(t);var n=Te(t,r);return r.get("activate")&&!n?r.get("activate")(t):r.get("deactivate")&&n?r.get("deactivate")(t):t.dispatch(te(e))}}},t.isToolActive=function(e,t){var r=e.getIn(["player","tools",t]);return r&&Te(e,r)},t.getActiveTools=function(e){return e.getIn(["player","tools"]).filter(function(t){return Te(e,t)})},t.requestLenticularMode=Ee,t.requestNormalMode=Pe,t.getPrevCamera=function(e){return e.getIn(["player","prevCamera"])},t.setRenderMode=function(e){if(!T[e])throw new Error("Invalid Render Mode: "+e);return{type:G,payload:e}},t.toggleLenticularMode=function(){return function(e){e.dispatch(Se(e)?Pe():Ee({}))}},t.enableDeviceTracking=Ae,t.disableDeviceTracking=Ce,t.toggleDeviceTracking=Re,t.isDeviceTracking=Ie,t.setPlayerElement=function(e,t){return{type:B,payload:{playerEl:e,canvasEl:t}}},t.setActiveColor=Oe,t.setHoverColor=Le,t.setFullscreenBGColor=De,t.getActiveColor=Ne,t.getHoverColor=function(e){return e.getIn(["player","hoverColor"])},t.getFullscreenBGColor=Ve,t.animateCameraTo=Fe,t.resize=Be,t.filterNodesFromPosition=Ue,t.filterNodesFromCenter=ke,t.filterInteractiveBoxesFromPosition=function(e,t){(0,d.filter)(e,{plug:"Properties",properties:{interactive:!0}});var r=e.getTranslator();if(!r||!r.getCameraMouseRay)return null;var n=t.clientX/(t.rect.width/2)-1,i=-(t.clientY/(t.rect.height/2)-1),a=r.getCameraMouseRay({x:n,y:i}).ray;return ze(e,a)},t.filterInteractiveBoxesFromCenter=function(e){var t=e.getTranslator();if(!t||!t.getCameraMouseRay)return null;var r=t.getCameraMouseRay({x:0,y:0}).ray;return ze(e,r)},t.setCameraRadiusConstraint=Ge,t.getCanvasElement=je,t.getCameraRadiusConstraint=function(e){return e.getIn(["player","constrainCameraRadius"])},t.displayThumbnail=He,t.shouldDisplayThumbnail=We,t.getThumbnailOptions=function(e){return e.getIn(["player","thumbnailOptions"])},t.getThumbnailURL=function(e,t){var r=e.getIn(["player","thumbnailOptions"]),n=r.get("url");if(n)return n;var i=(0,u.is)(r,$)?"v2thumbnail":"render?"+c.default.stringify(r.toJS());return"https://clara.io/api/scenes/"+t+"/"+i},t.displayVrSettings=function(e){return{type:N,payload:e}},t.shouldDisplayVrSettings=function(e){return e.getIn(["player","displayVrSettings"])},t.setProgressBar=Xe,t.getProgressBar=qe,t.frameScene=Ze,t.createExplode=Je,t.addGoogleAnalytics=Qe,t.getWireframeMode=Ke,t.setWireframeMode=$e,t.setZSpaceCapable=function(e){return{type:J,payload:e}},t.getZSpaceCapable=et,t.initStartingCamera=function(e){var t=(0,m.getCameraController)(e);if(!t.id){var r=me(e);t.setActiveCamera(e,r,e.get("sceneGraph").nodes[r])}},t.enterVrayMode=tt,t.updateVrayTranslator=rt,t.requestVrayImgUpdate=nt,t.exitVrayMode=it,t.onStreamingUpdate=ot;var l=r(0),u=r(36),c=S(r(245)),f=S(r(64)),h=S(r(50)),d=r(4),p=r(68),m=r(10),v=r(19),g=S(r(309)),y=S(r(42)),x=S(r(65)),b=r(25),w=r(74),_=r(311),M=r(23);function S(e){return e&&e.__esModule?e:{default:e}}var T=t.RENDER_MODES={high:"high",normal:"normal",vr:"vr",ar:"ar",zSpace:"zSpace",lenticular:"lenticular",nowebgl:"nowebgl"},E=t.manipulators={orbit:"orbit",pan:"pan",zoom:"zoom",nodeRotate:"nodeRotate",nodeMove:"nodeMove",nodeScale:"nodeScale"},P=t.progressBarOptions={default:"default",circle:"circle",line:"line",none:"none"},A=t.WIREFRAME_MODE={NONE:0,WIREFRAME_AND_FACES:1,WIREFRAME_ONLY:2},C="USE_MANIPULATOR",R="SET_CAMERA",I="SET_CAMERA_ATTRS",O="SET_CAMERA_POSITION",L="SET_RECT",D="DISPLAY_THUMBNAIL",N="DISPLAY_VR_SETTINGS",V="SET_ACTIVE_COLOR",F="SET_HOVER_COLOR",B="SET_PLAYER_ELEMENT",U="REQUEST_FULL_SCREEN",k="EXIT_FULL_SCREEN",z="SET_FULL_SCREEN",G="SET_RENDER_MODE",j="SET_PROGRESS_BAR",H="REQUEST_NORMAL_MODE",W="REQUEST_LENTICULAR_MODE",X="SET_DEVICE_TRACKING",q="SET_BACKGROUND_COLOR",Y="SET_THREE_OBJECTS",Z="SET_WIREFRAME_MODE",J="SET_ZSPACE_CAPABLE",Q="SET_WEBSOCKET",K="ADD_STREAMING_UPDATE_LISTENER",$=(0,u.Map)({width:1280,height:960,cache:!0,renderer:"webgl"}),ee=(0,u.Map)({activeColor:"#ffc85f",hoverColor:"#C08618",fullscreenBackgroundColor:"#FFF",activeManipulator:E.orbit,fullScreen:!1,renderingMode:T.normal,deviceTracking:!1,camera:(0,u.Map)({polarAngle:null,azimuthAngle:null,boundingRadius:null,maxZoom:null}),rect:new l.Vector2(400,300),initialCameraWorldMatrix:null,initialTargetWorldMatrix:null,cameraWorldMatrix:null,displayThumbnail:!0,playerElement:null,canvasElement:null,activeCamera:null,threeObjects:(0,u.Map)(),displayVrSettings:!1,prevCamera:null,orientationHandler:null,constrainCameraRadius:null,progressBarOption:P.default,thumbnailOptions:$,wireframeMode:A.NONE,zSpaceCapable:!1,ws:null,streamingUpdateListeners:(0,u.List)()});function te(e){return{type:C,payload:e}}function re(e,t){return(0,b.addCommand)({tool:e,enabled:!0},t)}function ne(e){return(0,b.removeCommand)(e)}function ie(e){return(0,b.updateCommand)(e,{display:{playerTools:!0}})}function ae(e){return(0,b.updateCommand)(e,{display:{playerTools:!1}})}function oe(e,t){return{type:UPDATE_COMMAND_OPTIONS,payload:{name:e,options:t}}}function se(e){return function(t){t.dispatch({type:I,payload:e}),(0,m.getCameraController)(t).setCameraAttrs(e)}}function le(e){return e.getIn(["player","camera"])}function ue(e){return(0,d.getWorldTransform)(e,me(e))}function ce(e){return function(t){return t.dispatch((0,d.set)({scene:!0,plug:"Player",property:"camera"},e))}}function fe(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(n){var i=(0,x.default)(n,t),a=(0,d.get)(n,{id:t,evalPlug:"Camera"}),o=(0,d.get)(n,{id:t,evalPlug:"Transform"});o&&!o.target&&(a.targetWorldMatrix=i);var s=(0,d.get)(n,{id:e,evalPlug:"Camera"});s.targetWorldMatrix&&(n.dispatch((0,m.merge)([m.virtualTargetId,"Transform",0],(0,y.default)(s.targetWorldMatrix))),s.targetWorldMatrix=null),n.dispatch({type:R,payload:{id:e,prevCameraId:t}}),(0,m.getCameraController)(n).setActiveCamera(n,e,n.get("sceneGraph").nodes[e],r)}}function he(e){return e.getIn(["player","threeObjects"]).toJS()}function de(e){return e.getIn(["player","threeObjects","scene"])}function pe(e){return e.getIn(["player","threeObjects","camera"])}function me(e){return e.getIn(["player","activeCamera"])||m.virtualCameraId}function ve(e){return{type:O,payload:e}}function ge(e){return{initialCameraWorldMatrix:e.getIn(["player","initialCameraWorldMatrix"]),initialTargetWorldMatrix:e.getIn(["player","initialTargetWorldMatrix"])}}function ye(){return function(e){var t=e.getIn(["player","playerElement"]);["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].forEach(function(e){if(t[e])return t[e]()}),e.dispatch({type:U})}}function xe(){return function(e){return["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].forEach(function(e){if(document[e])return document[e]()}),e.dispatch({type:k})}}function be(){return function(e){return e.dispatch(we(e)?xe():ye())}}function we(e){return e.getIn(["player","fullScreen"])}function _e(e){return function(t){we(t)!==e&&(t.dispatch({type:z,payload:e}),t.dispatch((0,b.updateCommand)("fullscreen",{active:e}))),!e&&Me(t)&&t.dispatch((0,b.deactivateCommand)("vrSettings"))}}function Me(e){return e.getIn(["player","renderingMode"])===T.vr}function Se(e){return e.getIn(["player","renderingMode"])===T.lenticular}function Te(e,t){return t.get("isActive")?t.get("isActive")(e):e.getIn(["player","activeManipulator"])===t.get("name")}function Ee(e){var t=e.fullscreen,r=e.trackDevice;return function(e){t&&e.dispatch(ye());var n=me(e);e.dispatch({type:W,payload:{trackDevice:r,cameraId:n}})}}function Pe(){return{type:H}}function Ae(){return{type:X,payload:!0}}function Ce(){return{type:X,payload:!1}}function Re(){return function(e){console.log("toggle device tracking",!Ie(e)),e.dispatch(Ie(e)?Ce():Ae())}}function Ie(e){return e.getIn(["player","deviceTracking"])}function Oe(e){return{type:V,payload:e}}function Le(e){return{type:F,payload:e}}function De(e){return{type:q,payload:e}}function Ne(e){return e.getIn(["player","activeColor"])}function Ve(e){return e.getIn(["player","fullscreenBackgroundColor"])}function Fe(e,t){return function(r){var n=(0,m.getCameraController)(r),i=me(r);if(i&&e){var o=a.default.resolve(),s=null,u=(0,d.get)(r,{id:i,plug:"Camera",property:"fieldOfView"}),c=(0,d.get)(r,{id:e,plug:"Camera",property:"fieldOfView"});return o.then(function(){var e=r.getIn(["animation","animations"]).filter(function(e){return"animateCameraTo"===e.name});return a.default.all(e.map(function(e){return r.dispatch((0,p.removeAnimation)(e.id))}))}).then(function(){n.useTarget=!1;var e=["orbit","pan","zoom"];for(var t in e)(0,b.isCommandActive)(r,e[t])&&(s=e[t]);return r.dispatch((0,b.updateCommand)(s,{active:!1}))}).then(function(){var n=(0,d.getWorldTransform)(r,i),o=(0,x.default)(r,i),s=(0,_.initCamera)(r,e),f=s.cameraWorldTransform,h=s.lookAtTransform,m=t||300;return new a.default(function(e,t){r.dispatch((0,p.queueAnimation)({autoplay:!0,name:"animateCameraTo",iterations:1,tracks:[{duration:m,value:f,startValue:n,tween:function(e,t,r,n){var i=new l.Vector3,a=new l.Quaternion,o=new l.Vector3(1,1,1);e.decompose(i,a,o);var s=new l.Vector3,u=new l.Quaternion;t.decompose(s,u,o);var c=(new l.Vector3).setFromMatrixPosition(r),f=c.distanceTo(i),h=(new l.Vector3).setFromMatrixPosition(n),d=h.distanceTo(s),p=new l.Vector3,m=new l.Vector3,v=new l.Vector3,g=new l.Quaternion,y=new l.Matrix4;return function(e,t,r,n){var i=e/n;p.lerpVectors(c,h,i);var s=f*(1-i)+d*i;return l.Quaternion.slerp(a,u,g,i),m.set(0,0,1).applyQuaternion(g),v.copy(p).addScaledVector(m,s),y.compose(v,g,o),y}}(n,f,o,h),set:function(e,t){(0,g.default)(r,i,t)}},{path:{id:i,plug:"Camera",property:"fieldOfView"},duration:m,value:c,startValue:u}],onEnd:e}))})}).then(function(t){return t||r.dispatch(ce(e)),n.useTarget=!0,r.dispatch((0,b.updateCommand)(s,{active:!0}))})}}}function Be(){return function(e){var t=e.getTranslator();t&&t.resize()}}function Ue(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.getTranslator();if(!i||!i.raycastSelect)return null;var a=t.eventRay?t.eventRay:void 0,o=t.clientX/(t.rect.width/2)-1,s=-(t.clientY/(t.rect.height/2)-1),l=i.raycastSelect({x:o,y:s},r,a,n);return n.subObjects?l.map(function(e){var t=e.data[0];return{id:e.id,index:t.index,subObjectType:t.subObjectType}}):l.map(function(e){return e.id})}function ke(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.getTranslator();if(!n||!n.raycastSelect)return null;var i=n.raycastSelect({x:0,y:0},t,null,r);return r.subObjects?i.map(function(e){var t=e.data[0];return{id:e.id,index:t.index,subObjectType:t.subObjectType}}):i.map(function(e){return e.id})}function ze(e,t){var r=(0,d.filter)(e,{plug:"Properties",properties:{interactive:!0}}).map(function(r){var n=r[0],i=(0,d.getNodeBoundingBox)(e,n),a=t.intersectBox(i);return{hit:!!a,id:n,distance:a?a.distanceTo(t.origin):1/0}}).filter(function(e){return e.hit});return r.sort(function(e,t){return e.distance-t.distance}),r.map(function(e){return e.id})}function Ge(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=me(n);if(i)if(e||t){var a=r&&r.nodeList&&r.nodeList.map&&r.nodeList.map(function(e){return(0,d.find)(n,e)}).filter(function(e){return!!e});(0,m.getCameraController)(n).setConstrainNodeList(a),e=Math.max(e||5,1),t=Math.max(t||1,.1),e<t&&(e=t),n.dispatch((0,m.merge)([i,"Properties",0],{constrainCameraSphere:!0,maxZoom:e,minZoom:t}))}else n.dispatch((0,m.merge)([i,"Properties",0],{constrainCameraSphere:!1}))}}function je(e){return e.getIn(["player","canvasElement"])}function He(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:D,payload:{display:e,options:t}}}function We(e){return e.getIn(["player","displayThumbnail"])}function Xe(e){return{type:j,payload:e}}function qe(e){return e.getIn(["player","progressBarOption"])}var Ye={sphere:"sphere",box:"box",geometry:"geometry"};function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.cameraId||me(r),i=t.layer||(0,d.get)(r,{id:n,plug:"Properties",property:"frameLayer"}),a=e||[(0,d.find)(r,"Objects")];if((Ye[t.mode]||Ye.sphere)===Ye.geometry){for(var o=function(e){if(i){var t=s[e].plugs.Properties,r=t&&t[0];if(r&&r.layer&&r.layer!==i)return}"PolyMesh"!==s[e].type&&"Shape"!==s[e].type||u.push(e)},s=r.get("sceneGraph").nodes,u=[],c=0;c<a.length;++c)(0,m.traverseHierarchy)(r,a[c],!0,o);(0,_.frameGeometry)(r,u,n,t.lookAtCenter,t.padding)}else{var f=(new l.Box3).makeEmpty();if(a.forEach(function(e){return f.union((0,d.getNodeBoundingBox)(r,e,{layer:i}))}),f.isEmpty())return;(0,_.frameSphere)(r,f.getBoundingSphere(),n,t.padding)}}}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Objects",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3e3;return function(a){n=n>0?n:1;var o=function(e){switch(e=e||"xyz"){case"xyz":case"xzy":case"yxz":case"yzx":case"zxy":case"zyx":default:e=0;break;case"xy":case"yx":e=1;break;case"xz":case"zx":e=2;break;case"yz":case"zy":e=3;break;case"x":e=4;break;case"y":e=5;break;case"z":e=6}return e}(e),s=a.get("sceneGraph"),l=a.getTranslator(),u=[],c=0;(r.length?r:(0,d.filter)(a,{from:{name:t},plug:"Properties",properties:{visible:!0},shallow:!0}).map(function(e){return e[0]})).forEach(function(e){var t=s.nodes[e],r=l.getNodeListBoundingBox([e].concat(t.children)).getBoundingSphere();u.push({id:e,boundingSphere:r}),c+=r.radius});var h=c*n;switch(o){case 0:case 1:case 2:case 3:u.sort(function(e,t){return t.boundingSphere.radius-e.boundingSphere.radius});break;case 4:u.sort(function(e,t){return t.boundingSphere.center.x-e.boundingSphere.center.x});break;case 5:u.sort(function(e,t){return t.boundingSphere.center.y-e.boundingSphere.center.y});break;case 6:u.sort(function(e,t){return t.boundingSphere.center.z-e.boundingSphere.center.z})}var m=function(e,t,r,n,i,a){var o=e.getTranslator(),s=(0,d.filter)(e,{type:"PolyMesh"}),l=o.getNodeListBoundingBox(s).getBoundingSphere(),u={id:(0,f.default)(),name:"Explode Clip",tracks:[]};return t.forEach(function(t,o){var s=t.id,c=t.boundingSphere,f=(0,d.get)(e,{id:s,plug:"Transform",property:"translation"}),h=f.clone(),p=c.center.sub(l.center).normalize();switch(a){case 0:if(o<1)break;h.x+=p.x*(l.radius+c.radius)*i,h.y+=p.y*(l.radius+c.radius)*i,h.z+=p.z*(l.radius+c.radius)*i;break;case 1:if(o<1)break;h.x+=p.x*(l.radius+c.radius)*i,h.y+=p.y*(l.radius+c.radius)*i;break;case 2:if(o<1)break;h.x+=p.x*(l.radius+c.radius)*i,h.z+=p.z*(l.radius+c.radius)*i;break;case 3:if(o<1)break;h.y+=p.y*(l.radius+c.radius)*i,h.z+=p.z*(l.radius+c.radius)*i;break;case 4:r-=c.radius*i,h.x=r,r-=c.radius*i;break;case 5:r-=c.radius*i,h.y=r,r-=c.radius*i;break;case 6:r-=c.radius*i,h.z=r,r-=c.radius*i}var m=(0,d.find)(e,{id:s,plug:"Transform",property:"translation"});u.tracks.push({easing:"linear",type:"Vec3",path:m,start:0,keyframes:{x:{ts:[0,n],vs:[f.x,h.x]},y:{ts:[0,n],vs:[f.y,h.y]},z:{ts:[0,n],vs:[f.z,h.z]}}})}),u}(a,u,h,i,n,o);return a.dispatch((0,p.addClip)(m,m.id)),function(e,t,r,n){var i=e.getTranslator(),a=(0,d.filter)(e,{type:"PolyMesh"}),o=i.getNodeListBoundingBox(a).getBoundingSphere(),s=me(e),l=(0,d.getWorldTransform)(e,s);t=n<4?4*o.radius*r:2*t;var u=(0,d.get)(e,{id:s,evalPlug:"Camera"}),c=u.aspectRatio>=1?Math.PI*u.fieldOfView/360:Math.atan(u.aspectRatio*Math.tan(Math.PI*u.fieldOfView/360)),f=t/2/Math.sin(c),h=(0,y.default)(l),p=h.translation,m=h.rotation,v=(0,d.find)(e,{name:"Objects"}),g={Camera:[["Camera",{}]],Transform:[["Transform",{translation:p,rotation:m}]],Properties:[["CameraProperties",{}]]},x=p.clone().sub(o.center);x.normalize().multiplyScalar(f).add(o.center);var b={Camera:[["Camera",{}]],Transform:[["Transform",{translation:x,rotation:m}]],Properties:[["CameraProperties",{}]]};return e.dispatch((0,d.addNode)({name:"srcCamera",type:"Camera",plugs:g,parent:v})).then(function(t){return e.dispatch((0,d.addNode)({name:"dstCamera",type:"Camera",plugs:b,parent:v})).then(function(e){return{srcCamera:t,dstCamera:e}})})}(a,h,n,o).then(function(e){return{explodeClipId:m.id,srcCamera:e.srcCamera,dstCamera:e.dstCamera}})}}function Qe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){if("undefined"==typeof ga)return a.default.reject(new Error("Google Analytics is not initialized"));if(!e||!t)return a.default.reject(new Error("Google Analytics should have id and name"));if(ga("create",e,"auto",t),ga(t+".require","displayfeatures"),r.configurationChange){n.dispatch((0,w.onChange)(function(e,r){return n.trackEvent(t,e.name,r)}))}}}function Ke(e){return e.getIn(["player","wireframeMode"])}function $e(e){return function(t){t.dispatch({type:Z,payload:e}),(0,d.filter)(t,{type:["PolyMesh","Shape"]}).forEach(function(e){t.dispatch((0,m.touch)(e))})}}function et(e){return e.getIn(["player","zSpaceCapable"])}function tt(e,t,r,n){return function(o){var s=document.getElementById(e);if(!s)return a.default.reject(new Error("No element found for vray image"));var l=(0,v.getSceneId)(o),u=n||"ws://10.0.3.3:8895/vray/streaming/"+l+"?width="+t+"&height="+r;console.log("Conneting to "+u);var c=new WebSocket(u);c.binaryType="arraybuffer";c.onmessage=function(e){return function(e){var t=o.getIn(["player","streamingUpdateListeners"]);if("string"==typeof e.data){var r=JSON.parse(e.data);"error"===r.type&&(console.log("Websocket error",r.message),(0,v.reportError)(new Error("vray websocket error "+r.message)),o.dispatch(at(null)))}else{var n=new Uint8Array(e.data),i=new Blob([n],{type:"image/jpeg"}),a=window.URL.createObjectURL(i);s.src=a,t.forEach(function(e){return e(a)})}}(e)},c.onerror=function(e){console.error("Error",e),(0,v.reportError)(e),o.dispatch(at(null))},c.onclose=function(){console.log("Socket closed..."),o.dispatch(at(null))},c.onopen=function(){var e=(0,m.getEvalSceneGraph)(o).nodes,t=(0,M.getActiveAssets)(o),r=me(o);c.send((0,i.default)({type:"init",payload:{currentCamera:r,nodes:e,assets:t}}))},o.dispatch(at(c))}}function rt(){return function(e){var t=e.getIn(["player","ws"]);if(t&&1===t.readyState){var r=(0,m.getEvalSceneGraph)(e).nodes,n=(0,M.getActiveAssets)(e),a=me(e);t.send((0,i.default)({type:"update",payload:{currentCamera:a,nodes:r,assets:n}}))}}}function nt(){return function(e){var t=e.getIn(["player","ws"]);t&&1===t.readyState&&t.send((0,i.default)({type:"request"}))}}function it(){return function(e){var t=e.getIn(["player","ws"]);t&&t.close()}}function at(e,t){return{type:Q,payload:e}}function ot(e){return{type:K,payload:e}}var st={reducer:(0,h.default)(ee,(n={},(0,s.default)(n,Z,function(e,t){return e.set("wireframeMode",t)}),(0,s.default)(n,C,function(e,t){return e.set("activeManipulator",t)}),(0,s.default)(n,R,function(e,t){var r=t.id,n=t.prevCameraId;return e.set("activeCamera",r).set("prevCamera",n)}),(0,s.default)(n,I,function(e,t){return e.mergeIn(["camera"],t)}),(0,s.default)(n,L,function(e,t){return e.set("rect",t)}),(0,s.default)(n,O,function(e,t){return e.merge(t)}),(0,s.default)(n,B,function(e,t){var r=t.playerEl,n=t.canvasEl;return e.set("playerElement",r).set("canvasElement",n)}),(0,s.default)(n,D,function(e,t){var r=t.display,n=t.options;return e.set("displayThumbnail",!!r).mergeIn(["thumbnailOptions"],(0,u.Map)(n))}),(0,s.default)(n,N,function(e,t){return e.set("displayVrSettings",!!t)}),(0,s.default)(n,V,function(e,t){return e.set("activeColor",t)}),(0,s.default)(n,F,function(e,t){return e.set("hoverColor",t)}),(0,s.default)(n,q,function(e,t){return e.set("fullscreenBackgroundColor",t)}),(0,s.default)(n,j,function(e,t){return P[t]||(t=P.default),e.set("progressBarOption",t)}),(0,s.default)(n,U,function(e){return e.set("fullScreen",!0)}),(0,s.default)(n,k,function(e){return e.set("fullScreen",!1)}),(0,s.default)(n,z,function(e,t){return e.set("fullScreen",t)}),(0,s.default)(n,G,function(e,t,r){var n=r.createEvent;return e.get("renderingMode")!==t&&n("renderingMode",t),e.set("renderingMode",t)}),(0,s.default)(n,W,function(e,t){var r=t.trackDevice,n=t.cameraId;return e.merge({renderingMode:"lenticular",deviceTracking:r,prevCamera:n})}),(0,s.default)(n,H,function(e){return e.merge({renderingMode:"normal",deviceTracking:!1})}),(0,s.default)(n,X,function(e,t){return e.set("deviceTracking",t)}),(0,s.default)(n,"SET_CONSTRAIN_CAMERA_RADIUS",function(e,t){return e.set("constrainCameraRadius",t)}),(0,s.default)(n,Y,function(e,t,r){return(0,r.createEvent)("threeinitialized"),e.set("threeObjects",(0,u.Map)(t))}),(0,s.default)(n,J,function(e,t){return e.set("zSpaceCapable",t)}),(0,s.default)(n,Q,function(e,t,r){var n=r.createEvent;return t||n("socketdisconnect"),e.set("ws",t)}),(0,s.default)(n,K,function(e,t){return e.updateIn(["streamingUpdateListeners"],(0,u.List)(),function(e){return e.push(t)})}),n)),actions:{addTool:re,removeTool:ne,showTool:ie,hideTool:ae,useManipulator:te,setCameraAttrs:se,useCamera:ce,setCameraPosition:ve,animateCameraTo:Fe,resize:Be,displayThumbnail:He,setActiveColor:Oe,requestFullscreen:ye,exitFullscreen:xe,setFullscreen:_e,toggleFullscreen:be,setHoverColor:Le,requestLenticularMode:Ee,enableDeviceTracking:Ae,disableDeviceTracking:Ce,toggleDeviceTracking:Re,requestNormalMode:Pe,setFullscreenBGColor:De,setCameraRadiusConstraint:Ge,updateToolOptions:oe,setCamera:fe,frameScene:Ze,setProgressBar:Xe,createExplode:Je,addGoogleAnalytics:Qe,setWireframeMode:$e,enterVrayMode:tt,exitVrayMode:it,onStreamingUpdate:ot,updateVrayTranslator:rt,requestVrayImgUpdate:nt},selectors:{getCamera:me,getCameraAttrs:le,getInitialCameraPosition:ge,getCameraWorldTransform:ue,getActiveColor:Ne,getCanvasElement:je,isFullscreen:we,isVRMode:Me,isLenticularMode:Se,getFullscreenBGColor:Ve,isDeviceTracking:Ie,shouldDisplayThumbnail:We,filterNodesFromPosition:Ue,filterNodesFromCenter:ke,getThreeScene:de,getThreeCamera:pe,getProgressBar:qe,getThree:he,getWireframeMode:Ke,getZSpaceCapable:et}};t.default=st},function(e,t,r){"use strict";var n,i=h(r(18)),a=h(r(30)),o=h(r(205)),s=h(r(321)),l=h(r(6)),u=h(r(56)),c=h(r(2)),f=h(r(204));function h(e){return e&&e.__esModule?e:{default:e}}var d,p=r(278);p.PMREMGenerator=function(e,t,r){this.sourceTexture=e,this.resolution=void 0!==r?r:256,this.samplesPerLevel=void 0!==t?t:64,this.samplesPerLevel=Math.min(128,this.samplesPerLevel),this.cubeTextureLod=null;var n=e.encoding===p.LinearEncoding||e.encoding===p.GammaEncoding||e.encoding===p.sRGBEncoding;this.sourceTexture.minFilter=n?p.LinearFilter:p.NearestFilter,this.sourceTexture.magFilter=n?p.LinearFilter:p.NearestFilter,this.sourceTexture.generateMipmaps=this.sourceTexture.generateMipmaps&&n,this.cubeLods=[];var i=this.resolution,a={format:this.sourceTexture.format,magFilter:this.sourceTexture.magFilter,minFilter:this.sourceTexture.minFilter,type:this.sourceTexture.type,generateMipmaps:this.sourceTexture.generateMipmaps,anisotropy:this.sourceTexture.anisotropy,encoding:this.sourceTexture.encoding};this.numLods=Math.log(i)/Math.log(2)-2;for(var o=0;o<this.numLods;o++){var s=new p.WebGLRenderTargetCube(i,i,a);s.texture.name="PMREMGenerator.cube"+o,this.cubeLods.push(s),i=Math.max(8,i/2)}this.camera=new p.OrthographicCamera(-1,1,1,-1,0,1e3),this.shader=this.getShader(),this.shader.defines.SAMPLES_PER_LEVEL=this.samplesPerLevel,this.planeMesh=new p.Mesh(new p.PlaneGeometry(2,2,0),this.shader),this.planeMesh.material.side=p.DoubleSide,this.scene=new p.Scene,this.scene.add(this.planeMesh),this.scene.add(this.camera),this.shader.uniforms.envMap.value=this.sourceTexture,this.shader.envMap=this.sourceTexture},p.PMREMGenerator.prototype={constructor:p.PMREMGenerator,update:function(e){this.shader.uniforms.envMap.value=this.sourceTexture,this.shader.envMap=this.sourceTexture;var t=e.gammaInput,r=e.gammaOutput,n=e.toneMapping,i=e.toneMappingExposure;e.toneMapping=p.LinearToneMapping,e.toneMappingExposure=1,e.gammaInput=!1,e.gammaOutput=!1;for(var a=0;a<this.numLods;a++){var o=a/(this.numLods-1);this.shader.uniforms.roughness.value=.95*o,this.shader.uniforms.queryScale.value.x=0==a?-1:1;var s=this.cubeLods[a].width;this.shader.uniforms.mapSize.value=s,this.renderToCubeMapTarget(e,this.cubeLods[a]),a<5&&(this.shader.uniforms.envMap.value=this.cubeLods[a].texture)}e.toneMapping=n,e.toneMappingExposure=i,e.gammaInput=t,e.gammaOutput=r},renderToCubeMapTarget:function(e,t){for(var r=0;r<6;r++)this.renderToCubeMapTargetFace(e,t,r)},renderToCubeMapTargetFace:function(e,t,r){t.activeCubeFace=r,this.shader.uniforms.faceIndex.value=r,this.shader.uniforms.seed.value=Math.random(),e.render(this.scene,this.camera,t,!0)},readCubeTextureWithLOD:function(e){if(e.extensions.get("EXT_shader_texture_lod")){if(!this.cubeTextureLod){this.cubeTextureLod=new p.CubeTexture;for(var t=(0,f.default)(this.cubeLods[0].width)+1,r=0;r<6;r++){var n=this.resolution,i=new p.DataTexture;this.cubeTextureLod.image[r]=i;for(var a=0;a<t;a++){var o=new Uint8Array(4*n*n);i.mipmaps[a]={data:o,width:n,height:n},n/=2}}this.cubeTextureLod.format=this.sourceTexture.format,this.cubeTextureLod.minFilter=p.LinearMipMapLinearFilter,this.cubeTextureLod.magFilter=p.LinearFilter,this.cubeTextureLod.generateMipmaps=!1,this.cubeTextureLod.anisotropy=this.sourceTexture.anisotropy,this.cubeTextureLod.encoding=this.sourceTexture.encoding}for(r=0;r<6;r++)for(i=this.cubeTextureLod.image[r],t=(0,f.default)(this.cubeLods[0].width)+1,n=this.cubeLods[0].width,a=0;a<t;a++)if(!(a>=this.numLods)){var s=a<this.numLods?this.cubeLods[a]:this.cubeLods[this.numLods-1];s.activeCubeFace=r,e.setRenderTarget(s);o=i.mipmaps[a].data;a<this.numLods&&e.readRenderTargetPixels(s,0,0,s.width,s.height,o),n/=2}this.cubeTextureLod.needsUpdate=!0}return this.cubeTextureLod},getShader:function(){return new p.ShaderMaterial({defines:{SAMPLES_PER_LEVEL:20},uniforms:{faceIndex:{value:0},roughness:{value:.5},mapSize:{value:.5},envMap:{value:null},queryScale:{value:new p.Vector3(1,1,1)},testColor:{value:new p.Vector3(1,1,1)},seed:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"precision highp float;\n\t\t\t\t#include <common>\n\t\t\t\t#include <math>\n\t\t\t\t#include <halton>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform int faceIndex;\n\t\t\t\tuniform float roughness;\n\t\t\t\tuniform samplerCube envMap;\n\t\t\t\tuniform float mapSize;\n\t\t\t\tuniform vec3 testColor;\n\t\t\t\tuniform vec3 queryScale;\n\t\t\t\tuniform float seed;\n\t\t\t\t\n\t\t\t\tvec3 ImportanceSampleGGX( float radians, float radius, mat3 vecSpace, float roughness )\n\t\t\t\t{\n\t\t\t\t\tfloat rad = radius * roughness;\n\t\t\t\t\tfloat up = sqrt( max( 1.0 - pow2( rad ), 0.0001 ) );\n\t\t\t\t\treturn vecSpace * vec3 (rad * cos( radians ), rad * sin( radians ), up );\n\t\t\t\t}\n\t\t\t\tmat3 matrixFromVector(vec3 n) {\n\t\t\t\t\tfloat a = 1.0 / (1.0 + n.z);\n\t\t\t\t\tfloat b = -n.x * n.y * a;\n\t\t\t\t\tvec3 b1 = vec3(1.0 - n.x * n.x * a, b, -n.x);\n\t\t\t\t\tvec3 b2 = vec3(b, 1.0 - n.y * n.y * a, -n.y);\n\t\t\t\t\treturn mat3(b1, b2, n);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfloat unitToRadians( float unit ) { return PI * 2.0 * unit; }\n\t\t\t\t\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec3 sampleDirection;\n\t\t\t\t\tvec2 uv = vUv*2.0 - 1.0;\n\t\t\t\t\tfloat offset = -1.0/mapSize;\n\t\t\t\t\tconst float a = -1.0;\n\t\t\t\t\tconst float b = 1.0;\n\t\t\t\t\tfloat c = -1.0 + offset;\n\t\t\t\t\tfloat d = 1.0 - offset;\n\t\t\t\t\tfloat bminusa = b - a;\n\t\t\t\t\tuv.x = (uv.x - a)/bminusa * d - (uv.x - b)/bminusa * c;\n\t\t\t\t\tuv.y = (uv.y - a)/bminusa * d - (uv.y - b)/bminusa * c;\n\t\t\t\t\tif (faceIndex==0) {\n\t\t\t\t\t\tsampleDirection = vec3(1.0, -uv.y, -uv.x);\n\t\t\t\t\t} else if (faceIndex==1) {\n\t\t\t\t\t\tsampleDirection = vec3(-1.0, -uv.y, uv.x);\n\t\t\t\t\t} else if (faceIndex==2) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, 1.0, uv.y);\n\t\t\t\t\t} else if (faceIndex==3) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -1.0, -uv.y);\n\t\t\t\t\t} else if (faceIndex==4) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -uv.y, 1.0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsampleDirection = vec3(-uv.x, -uv.y, -1.0);\n\t\t\t\t\t}\n\t\t\t\t\tmat3 vecSpace = matrixFromVector(normalize(sampleDirection * queryScale));\n\t\t\t\t\tvec3 rgbColor = vec3(0.0);\n\t\t\t\t\tconst int NumSamples = SAMPLES_PER_LEVEL;\n\t\t\t\t\tvec3 direction;\n\t\t\t\t\tfloat invNumSamples = 1.0 / float(NumSamples);\n\t\t\t\t\tfor( int i = 0; i < NumSamples; i ++ ) {\n\t\t\t\t\t\tfloat unit = ( float(i) ) * invNumSamples;\n\t\t\t\t\t\tfloat angle = unitToRadians( unit + 0.5 );\n\t\t\t\t\t\tfloat radius = getHalton1DFast(float(i), 2., 1. / 2.);\n\t\t\t\t\t\tdirection = ImportanceSampleGGX( angle, radius, vecSpace, roughness);\n\t\t\t\t\t\tvec3 color = envMapTexelToLinear(textureCube(envMap,direction)).rgb;\n\t\t\t\t\t\trgbColor.rgb += color;\n\t\t\t\t\t}\n\t\t\t\t\trgbColor *= invNumSamples;\n\t\t\t\t\t//rgbColor = testColorMap( roughness ).rgb;\n\t\t\t\t\tgl_FragColor = linearToOutputTexel( vec4( rgbColor, 1.0 ) );\n\t\t\t\t}",blending:p.CustomBlending,blendSrc:p.OneFactor,blendDst:p.ZeroFactor,blendSrcAlpha:p.OneFactor,blendDstAlpha:p.ZeroFactor,blendEquation:p.AddEquation})},dispose:function(){for(var e=0,t=this.cubeLods.length;e<t;e++)this.cubeLods[e].dispose();this.planeMesh.geometry.dispose(),this.planeMesh.material.dispose()}},p.PMREMCubeUVPacker=function(e,t){this.cubeLods=e,this.numLods=t;var r=4*e[0].width,n=e[0].texture,i={format:n.format,magFilter:n.magFilter,minFilter:n.minFilter,type:n.type,generateMipmaps:n.generateMipmaps,anisotropy:n.anisotropy,encoding:n.encoding===p.RGBEEncoding?p.RGBM16Encoding:n.encoding};i.encoding===p.RGBM16Encoding&&(i.magFilter=p.LinearFilter,i.minFilter=p.LinearFilter),this.CubeUVRenderTarget=new p.WebGLRenderTarget(r,r,i),this.CubeUVRenderTarget.texture.name="PMREMCubeUVPacker.cubeUv",this.CubeUVRenderTarget.texture.mapping=p.CubeUVReflectionMapping,this.camera=new p.OrthographicCamera(.5*-r,.5*r,.5*-r,.5*r,0,1e3),this.scene=new p.Scene,this.scene.add(this.camera),this.objects=[];var a=[];a.push(new p.Vector2(0,0)),a.push(new p.Vector2(1,0)),a.push(new p.Vector2(2,0)),a.push(new p.Vector2(0,1)),a.push(new p.Vector2(1,1)),a.push(new p.Vector2(2,1));var o=r;r=e[0].width;var s=0,l=4;this.numLods=Math.log(e[0].width)/Math.log(2)-2;for(var u=0;u<this.numLods;u++){var c=.5*(o-o/l);l*=2;for(var f=0,h=0,d=r,m=0;m<6;m++){for(var v=0;v<6;v++){var g=this.getShader();g.uniforms.envMap.value=this.cubeLods[u].texture,g.envMap=this.cubeLods[u].texture,g.uniforms.faceIndex.value=v,g.uniforms.mapSize.value=d;g.uniforms.testColor.value;var y=new p.Mesh(new p.PlaneGeometry(d,d,0),g);y.position.x=a[v].x*d-c+f,y.position.y=a[v].y*d-c+s+h,y.material.side=p.DoubleSide,this.scene.add(y),this.objects.push(y)}h+=1.75*d,f+=1.25*d,d/=2}s+=2*r,r/=2}},p.PMREMCubeUVPacker.prototype={constructor:p.PMREMCubeUVPacker,update:function(e){var t=e.gammaInput,r=e.gammaOutput,n=e.toneMapping,i=e.toneMappingExposure;e.gammaInput=!1,e.gammaOutput=!1,e.toneMapping=p.LinearToneMapping,e.toneMappingExposure=1,e.render(this.scene,this.camera,this.CubeUVRenderTarget,!1),e.toneMapping=n,e.toneMappingExposure=i,e.gammaInput=t,e.gammaOutput=r},getShader:function(){return new p.ShaderMaterial({uniforms:{faceIndex:{value:0},mapSize:{value:0},envMap:{value:null},testColor:{value:new p.Vector3(1,1,1)}},vertexShader:"precision highp float;\t\t\t\tvarying vec2 vUv;\t\t\t\tvoid main() {\t\t\t\t\tvUv = uv;\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\t\t\t\t}",fragmentShader:"precision highp float;\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform samplerCube envMap;\t\t\t\tuniform float mapSize;\t\t\t\tuniform vec3 testColor;\t\t\t\tuniform int faceIndex;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec3 sampleDirection;\t\t\t\t\tvec2 uv = vUv;\t\t\t\t\tuv = uv * 2.0 - 1.0;\t\t\t\t\tuv.y *= -1.0;\t\t\t\t\tif(faceIndex == 0) {\t\t\t\t\t\tsampleDirection = normalize(vec3(1.0, uv.y, -uv.x));\t\t\t\t\t} else if(faceIndex == 1) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, 1.0, uv.y));\t\t\t\t\t} else if(faceIndex == 2) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, uv.y, 1.0));\t\t\t\t\t} else if(faceIndex == 3) {\t\t\t\t\t\tsampleDirection = normalize(vec3(-1.0, uv.y, uv.x));\t\t\t\t\t} else if(faceIndex == 4) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, -1.0, -uv.y));\t\t\t\t\t} else {\t\t\t\t\t\tsampleDirection = normalize(vec3(-uv.x, uv.y, -1.0));\t\t\t\t\t}\t\t\t\t\tvec4 color = envMapTexelToLinear( textureCube( envMap, sampleDirection ) );\t\t\t\t\tgl_FragColor = linearToOutputTexel( color );\t\t\t\t}",blending:p.CustomBlending,premultipliedAlpha:!1,blendSrc:p.OneFactor,blendDst:p.ZeroFactor,blendSrcAlpha:p.OneFactor,blendDstAlpha:p.ZeroFactor,blendEquation:p.AddEquation})},dispose:function(){for(var e=0,t=this.objects.length;e<t;e++)this.objects[e].material.dispose();this.objects[0].geometry.dispose()}},p.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1},offset:{value:0},overbrightProtection:{value:!1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float offset;","uniform sampler2D tDiffuse;","uniform bool overbrightProtection;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel + vec4(offset);","if(overbrightProtection) {","gl_FragColor.rgb = min(gl_FragColor.rgb, vec3(gl_FragColor.a));","}","}"].join("\n")},p.CompositeShader={defines:{BLENDING:p.NoBlending},uniforms:{tSource:{type:"t",value:null},opacitySource:{type:"f",value:1},tDestination:{type:"t",value:null},opacityDestination:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tSource;","uniform float opacitySource;","uniform sampler2D tDestination;","uniform float opacityDestination;","varying vec2 vUv;","void main() {","vec4 d = opacityDestination * texture2D( tDestination, vUv );","vec4 s = opacitySource * texture2D( tSource, vUv );","#if (BLENDING == "+p.NormalBlending+")","gl_FragColor = d * ( 1.0 - s.a ) + s;","#elif (BLENDING == "+p.AdditiveBlending+")","gl_FragColor = d + s;","#elif (BLENDING == "+p.SubtractiveBlending+")","gl_FragColor = d - s;","#elif (BLENDING == "+p.MultiplyBlending+")","gl_FragColor = d * s;","#else","gl_FragColor = s;","#endif","}"].join("\n")},p.GlossyMirrorShader={defines:{SPECULAR_MAP:0,ROUGHNESS_MAP:0,GLOSSY_REFLECTIONS:1,REFLECTION_LOD_LEVELS:4,PERSPECTIVE_CAMERA:1},uniforms:{metalness:{type:"f",value:0},specularColor:{type:"c",value:new p.Color(16777215)},tSpecular:{type:"t",value:null},tReflection:{type:"t",value:null},tReflection1:{type:"t",value:null},tReflection2:{type:"t",value:null},tReflection3:{type:"t",value:null},tReflection4:{type:"t",value:null},tReflectionDepth:{type:"t",value:null},roughness:{type:"f",value:0},distanceFade:{type:"f",value:.01},fresnelStrength:{type:"f",value:1},reflectionTextureMatrix:{type:"m4",value:new p.Matrix4},mirrorCameraWorldMatrix:{type:"m4",value:new p.Matrix4},mirrorCameraProjectionMatrix:{type:"m4",value:new p.Matrix4},mirrorCameraInverseProjectionMatrix:{type:"m4",value:new p.Matrix4},mirrorCameraNear:{type:"f",value:0},mirrorCameraFar:{type:"f",value:0},screenSize:{type:"v2",value:new p.Vector2},mirrorNormal:{type:"v3",value:new p.Vector3},mirrorWorldPosition:{type:"v3",value:new p.Vector3}},vertexShader:["#include <common>","#include <oit_pars_vertex>","uniform mat4 reflectionTextureMatrix;","varying vec4 mirrorCoord;","varying vec3 vecPosition;","varying vec3 worldNormal;","varying vec3 vNormal;","varying vec2 vUv;","void main() {","vUv = uv;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vecPosition = cameraPosition - worldPosition.xyz;","worldNormal = (modelMatrix * vec4(normal,0.0)).xyz;","mirrorCoord = reflectionTextureMatrix * worldPosition;","vNormal = transformDirection(normal, modelViewMatrix);","gl_Position = projectionMatrix * mvPosition;","#include <oit_vertex>","}"].join("\n"),blending:p.NormalBlending,transparent:!0,fragmentShader:["#include <common>","#include <packing>","#include <bsdfs>","#include <oit_pars_fragment>","#define DITHERING","#define DITHERING_SCALE","#include <dithering_pars_fragment>","uniform float roughness;","#if ROUGHNESS_MAP == 1","uniform sampler2D tRoughness;","#endif","uniform float metalness;","uniform float distanceFade;","uniform float fresnelStrength;","uniform vec3 specularColor;","#if SPECULAR_MAP == 1","uniform sampler2D tSpecular;","#endif","uniform sampler2D tReflection;","#if GLOSSY_REFLECTIONS == 1","uniform sampler2D tReflection1;","uniform sampler2D tReflection2;","uniform sampler2D tReflection3;","uniform sampler2D tReflection4;","uniform sampler2D tReflectionDepth;","#endif","varying vec3 vecPosition;","varying vec3 worldNormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec4 mirrorCoord;","uniform mat4 mirrorCameraProjectionMatrix;","uniform mat4 mirrorCameraInverseProjectionMatrix;","uniform mat4 mirrorCameraWorldMatrix;","uniform float mirrorCameraNear;","uniform float mirrorCameraFar;","uniform vec2 screenSize;","uniform vec3 mirrorNormal;","uniform vec3 mirrorWorldPosition;","#if GLOSSY_REFLECTIONS == 1","float getReflectionDepth() {","return unpackRGBAToDepth( texture2DProj( tReflectionDepth, mirrorCoord ) );","}","float getReflectionViewZ( const in float reflectionDepth ) {","#if PERSPECTIVE_CAMERA == 1","return perspectiveDepthToViewZ( reflectionDepth, mirrorCameraNear, mirrorCameraFar );","#else","return orthographicDepthToViewZ( reflectionDepth, mirrorCameraNear, mirrorCameraFar );","#endif","}","vec3 getReflectionViewPosition( const in vec2 screenPosition, const in float reflectionDepth, const in float reflectionViewZ ) {","float clipW = mirrorCameraProjectionMatrix[2][3] * reflectionViewZ + mirrorCameraProjectionMatrix[3][3];","vec4 clipPosition = vec4( ( vec3( screenPosition, reflectionDepth ) - 0.5 ) * 2.0, 1.0 );","clipPosition *= clipW;","return ( mirrorCameraInverseProjectionMatrix * clipPosition ).xyz;","}","#endif","vec4 getReflection( const in vec4 mirrorCoord, const in float lodLevel ) {","#if GLOSSY_REFLECTIONS == 0","return texture2DProj( tReflection, mirrorCoord );","#else","vec4 color0, color1;","float alpha;","if( lodLevel < 1.0 ) {","color0 = texture2DProj( tReflection, mirrorCoord );","color1 = texture2DProj( tReflection1, mirrorCoord );","alpha = lodLevel;","}","else if( lodLevel < 2.0) {","color0 = texture2DProj( tReflection1, mirrorCoord );","color1 = texture2DProj( tReflection2, mirrorCoord );","alpha = lodLevel - 1.0;","}","else if( lodLevel < 3.0 ) {","color0 = texture2DProj( tReflection2, mirrorCoord );","color1 = texture2DProj( tReflection3, mirrorCoord );","alpha = lodLevel - 2.0;","}","else {","color0 = texture2DProj( tReflection3, mirrorCoord );","color1 = color0;","alpha = 0.0;","}","return mix( color0, color1, alpha );","#endif","}","void main() {","vec3 specular = specularColor;","#if SPECULAR_MAP == 1","specular *= texture2D( tSpecular, vUv );","#endif","float fade = 1.0;","#if GLOSSY_REFLECTIONS == 1","float localRoughness = roughness;","#if ROUGHNESS_MAP == 1","localRoughness *= texture2D( tRoughness, vUv ).r;","#endif","vec2 screenPosition = gl_FragCoord.xy / screenSize;","float reflectionDepth = getReflectionDepth();","float reflectionViewZ = getReflectionViewZ( reflectionDepth );","vec3 reflectionViewPosition = getReflectionViewPosition( screenPosition, reflectionDepth, reflectionViewZ );","vec3 reflectionWorldPosition = ( mirrorCameraWorldMatrix * vec4( reflectionViewPosition, 1.0 ) ).xyz;","vec3 closestPointOnMirror = projectOnPlane( reflectionWorldPosition, mirrorWorldPosition, mirrorNormal );","vec3 pointOnMirror = linePlaneIntersect( cameraPosition, normalize( reflectionWorldPosition - cameraPosition ), mirrorWorldPosition, mirrorNormal );","float distance = length( closestPointOnMirror - reflectionWorldPosition );","localRoughness = localRoughness * distance * 0.2;","float lodLevel = localRoughness;","fade = 1.0 - smoothstep( 0.0, 1.0, distanceFade * distance * 0.2 );","#else","float lodLevel = 0.0;","#endif","vec4 reflection = getReflection( mirrorCoord, lodLevel );","float dotNV = clamp( dot( normalize( worldNormal ), normalize( vecPosition ) ), EPSILON, 1.0 );","specular = mix( vec3( 0.05 ), specular, metalness );","vec3 fresnel;","if( fresnelStrength < 0.0 ) {","fresnel = mix( specular, specular * pow( dotNV, 2.0 ), -fresnelStrength ) * pow( 1.0 - roughness, 2.0 );","} else {","fresnel = mix( specular, F_Schlick( specular, dotNV ), fresnelStrength ) * pow( 1.0 - roughness, 2.0 );","}","gl_FragColor = reflection;","if(gl_FragColor.a < EPSILON) { gl_FragColor = vec4(0); return; }","#ifdef PREMULTIPLIED_ALPHA","gl_FragColor.rgb /= gl_FragColor.a;","#endif","#ifdef USE_OIT","if(oitMode != 2) {","gl_FragColor.rgb /= gl_FragColor.a;","}","#endif","float alphaMod = fade * fresnel.r;","gl_FragColor.a *= alphaMod;","#include <oit_fragment>","#include <premultiplied_alpha_fragment>","vec3 normal = vNormal;","#include <dithering_fragment>","}"].join("\n")},p.ShaderChunk.sao=["#include <packing>","float getDepth( const in vec2 screenPosition ) {","#if DEPTH_PACKING == 3201","return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","#else","return texture2D( tDepth, screenPosition ).x;","#endif","}","vec4 setDepth( const in float depth ) {","#if DEPTH_PACKING == 3201","return packDepthToRGBA( depth );","#else","return vec4( depth, 0, 0, 0 );","#endif","}","float getViewZ( const in float depth ) {","#if PERSPECTIVE_CAMERA == 1","return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","#else","return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","#endif","}"].join("\n"),p.SAOShader={blending:p.NoBlending,defines:{NUM_SAMPLES:13,NUM_RINGS:7,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:1,DEPTH_PACKING:3201,DEPTH_MIPS:0,PERSPECTIVE_CAMERA:1},extensions:{derivatives:!0},uniforms:{tDepth:{type:"t",value:null},tDepth1:{type:"t",value:null},tDepth2:{type:"t",value:null},tDepth3:{type:"t",value:null},tDiffuse:{type:"t",value:null},tNormal:{type:"t",value:null},size:{type:"v2",value:new p.Vector2(512,512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},cameraProjectionMatrix:{type:"m4",value:new p.Matrix4},cameraInverseProjectionMatrix:{type:"m4",value:new p.Matrix4},intensity:{type:"f",value:.1},occlusionSphereWorldRadius:{type:"f",value:100},worldToScreenRatio:{type:"v2",value:new p.Vector2(1,1)},randomSeed:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","#if DIFFUSE_TEXTURE == 1","uniform sampler2D tDiffuse;","#endif","#define MAX_MIP_LEVEL 3","uniform sampler2D tDepth;","#if DEPTH_MIPS == 1","uniform sampler2D tDepth1;","uniform sampler2D tDepth2;","uniform sampler2D tDepth3;","#endif","#if NORMAL_TEXTURE == 1","uniform sampler2D tNormal;","#endif","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float intensity;","uniform float occlusionSphereWorldRadius;","uniform vec2 size;","uniform vec2 worldToScreenRatio;","uniform float randomSeed;","#include <sao>","vec4 getDefaultColor( const in vec2 screenPosition ) {","#if DIFFUSE_TEXTURE == 1","return texture2D( tDiffuse, vUv );","#else","return vec4( 1.0 );","#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","clipPosition *= clipW;","return ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {","#if NORMAL_TEXTURE == 1","return unpackRGBAToNormal( texture2D( tNormal, screenPosition ) );","#else","return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );","#endif","}","float getDepthMIP( const in vec2 screenPosition, const int mipLevel ) {","vec4 rawDepth;","#if DEPTH_MIPS == 0","rawDepth = texture2D( tDepth, screenPosition );","#else","if( mipLevel == 0 ) {","rawDepth = texture2D( tDepth, screenPosition );","}","else if( mipLevel == 1 ) {","rawDepth = texture2D( tDepth1, screenPosition );","}","else if( mipLevel == 2 ) {","rawDepth = texture2D( tDepth2, screenPosition );","}","else {","rawDepth = texture2D( tDepth3, screenPosition );","}","#endif","#if DEPTH_PACKING == 3201","return unpackRGBAToDepth( rawDepth );","#else","return rawDepth.x;","#endif","}","float scaleDividedByCameraFar;","float minResolutionMultipliedByCameraFar;","float errorCorrectionFactor;","float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {","vec3 viewDelta = sampleViewPosition - centerViewPosition;","float viewDistance2 = dot( viewDelta, viewDelta );","return max( ( dot( centerViewNormal, viewDelta ) + centerViewPosition.z * 0.001 ) / ( viewDistance2 + 0.0001 ), 0.0 );// * smoothstep( pow2( occlusionSphereWorldRadius ), 0.0, viewDistance2 );","}","int getMipLevel( const in vec2 occlusionSphereScreenRadius ) {","return int( clamp( floor( log2( length( occlusionSphereScreenRadius * size ) ) - 4.0 ), 0.0, 3.0 ) );","}","const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );","const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );","float getAmbientOcclusion( const in vec3 centerViewPosition ) {","vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );","vec2 invSize = 1.0 / size;","vec2 occlusionSphereScreenRadius = occlusionSphereWorldRadius * worldToScreenRatio / centerViewPosition.z;","float random = rand( vUv + randomSeed );","float angle = random * PI2;","float radiusStep = INV_NUM_SAMPLES;","float radius = radiusStep * ( 0.5 + random );","float occlusionSum = 0.0;","for( int i = 0; i < NUM_SAMPLES; i ++ ) {","radius = (float(i) + 0.5) * radiusStep;","vec2 sampleUvOffset = vec2( cos( angle ), sin( angle ) ) * radius * occlusionSphereScreenRadius * 1.0;","sampleUvOffset = floor( sampleUvOffset * size + vec2( 0.5 ) ) * invSize;","if( sampleUvOffset.x == 0.0 && sampleUvOffset.y == 0.0 ) continue;","angle += ANGLE_STEP;","vec2 sampleUv = vUv + sampleUvOffset;","if( sampleUv.x <= 0.0 || sampleUv.y <= 0.0 || sampleUv.x >= 1.0 || sampleUv.y >= 1.0 ) continue;","float sampleDepth = getDepthMIP( sampleUv, int( 4.0 * radius ) );","if( sampleDepth >= ( 1.0 - EPSILON ) ) {","continue;","}","float sampleViewZ = getViewZ( sampleDepth );","vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );","occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );","}","return occlusionSum * intensity * 2.0 * occlusionSphereWorldRadius / ( float( NUM_SAMPLES ) );","}","void main() {","float centerDepth = getDepth( vUv );","if( centerDepth >= ( 1.0 - EPSILON ) ) {","discard;","}","float centerViewZ = getViewZ( centerDepth );","vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );","float ambientOcclusion = getAmbientOcclusion( viewPosition );","gl_FragColor = packDepthToRGBA( centerDepth );","gl_FragColor.x = max( 1.0 - ambientOcclusion, 0.0 );","}"].join("\n")},p.SAODepthMinifyShader={blending:p.NoBlending,defines:{DEPTH_PACKING:3201},uniforms:{tDepth:{type:"t",value:null},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},size:{type:"v2",value:new p.Vector2(256,256)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#include <packing>","varying vec2 vUv;","uniform sampler2D tDepth;","uniform vec2 size;","uniform float cameraNear;","uniform float cameraFar;","void main() {","vec2 uv = vUv;","vec2 invSize = 0.5 / size;","float depth = unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, -1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, 1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, 1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, -1.0 ) ) );","depth *= 0.25;","gl_FragColor = packDepthToRGBA( depth );","}"].join("\n")},p.SAOBilaterialFilterShader={blending:p.NoBlending,defines:{PERSPECTIVE_CAMERA:1,KERNEL_SAMPLE_RADIUS:4},uniforms:{tAODepth:{type:"t",value:null},tAONormal:{type:"t",value:null},size:{type:"v2",value:new p.Vector2(256,256)},kernelDirection:{type:"v2",value:new p.Vector2(1,0)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},edgeSharpness:{type:"f",value:3},packOutput:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","uniform sampler2D tAODepth;","uniform sampler2D tAONormal;","uniform vec2 size;","uniform float cameraNear;","uniform float cameraFar;","uniform float edgeSharpness;","uniform int packOutput;","uniform vec2 kernelDirection;","#include <packing>","float getViewZ( const in float depth ) {","#if PERSPECTIVE_CAMERA == 1","return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","#else","return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","#endif","}","void addTapInfluence( const in vec2 tapUv, const in vec3 centerNormal, const in float centerViewZ, const in float kernelWeight, inout float aoSum, inout float weightSum ) {","vec4 depthTexel = texture2D( tAODepth, tapUv );","float ao = depthTexel.r;","depthTexel.r = 1.0;","float depth = unpackRGBAToDepth( depthTexel );","if( depth >= ( 1.0 - EPSILON ) ) {","return;","}","float tapViewZ = -getViewZ( depth );","float depthWeight = max(0.0, 1.0 - (edgeSharpness * 20.0) * abs(tapViewZ - centerViewZ));","vec3 normal = unpackRGBAToNormal(texture2D(tAONormal, tapUv));","float normalCloseness = dot(normal, centerNormal);","float k_normal = 4.0;","float normalError = (1.0 - pow4( normalCloseness )) * k_normal;","float normalWeight = max((1.0 - edgeSharpness * normalError), 0.00);","float tapWeight = kernelWeight * ( depthWeight + normalWeight );","aoSum += ao * tapWeight;","weightSum += tapWeight;","}","float normpdf(in float x, in float sigma) {","return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;","}","void main() {","vec4 depthTexel = texture2D( tAODepth, vUv );","float ao = depthTexel.r;","depthTexel.r = 1.0;","float depth = unpackRGBAToDepth( depthTexel );","if( depth >= ( 1.0 - EPSILON ) ) {","discard;","}","float centerViewZ = -getViewZ( depth );","float weightSum = normpdf(0.0, 5.0) + 0.1;","float aoSum = ao * weightSum;","vec2 uvIncrement = ( kernelDirection / size );","vec2 rTapUv = vUv, lTapUv = vUv;","vec3 normalCenter = unpackRGBAToNormal(texture2D(tAONormal, vUv));","for( int i = 1; i <= KERNEL_SAMPLE_RADIUS; i ++ ) {","float kernelWeight = normpdf(float(i), 5.0) + 0.1;","rTapUv += uvIncrement;","addTapInfluence( rTapUv, normalCenter, centerViewZ, kernelWeight, aoSum, weightSum );","lTapUv -= uvIncrement;","addTapInfluence( lTapUv, normalCenter, centerViewZ, kernelWeight, aoSum, weightSum );","}","ao = aoSum / weightSum;","if( packOutput == 1 ) {","gl_FragColor = depthTexel;","gl_FragColor.r = ao;","}","else {","gl_FragColor = vec4( vec3( ao ), 1.0 );","}","}"].join("\n")},p.ShaderChunk.sao2=["#include <packing>","float getDepth( const in vec2 screenPosition ) {","#if DEPTH_PACKING == 3201","return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","#else","return texture2D( tDepth, screenPosition ).x;","#endif","}","float getViewZ( const in float depth ) {","#if PERSPECTIVE_CAMERA == 1","return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","#else","return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","#endif","}"].join("\n"),p.SAO2Shader={blending:p.NoBlending,defines:{NUM_SAMPLES:11,NUM_RINGS:3,DIFFUSE_TEXTURE:1,DEPTH_PACKING:3201,DEPTH_MIPS:0,PERSPECTIVE_CAMERA:1},extensions:{derivatives:!0},uniforms:{tDepth:{type:"t",value:null},tDepth1:{type:"t",value:null},tDepth2:{type:"t",value:null},tDepth3:{type:"t",value:null},tDepth4:{type:"t",value:null},tDepth5:{type:"t",value:null},tDiffuse:{type:"t",value:null},tNormal:{type:"t",value:null},size:{type:"v2",value:new p.Vector2(512,512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},cameraProjectionMatrix:{type:"m4",value:new p.Matrix4},cameraInverseProjectionMatrix:{type:"m4",value:new p.Matrix4},intensity:{type:"f",value:.1},bias:{type:"f",value:.001},occlusionSphereWorldRadius:{type:"f",value:100},worldToScreenRatio:{type:"v2",value:new p.Vector2(1,1)},randomSeed:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","#if DIFFUSE_TEXTURE == 1","uniform sampler2D tDiffuse;","#endif","#define MAX_MIP_LEVEL 5","#define LOG_MAX_OFFSET 3","#define _rand1out(_p) _p += dot(_p, _p.yzx + 19.19); return fract((_p.x + _p.y) * _p.z);","uniform sampler2D tDepth;","uniform sampler2D tDepth1;","uniform sampler2D tDepth2;","uniform sampler2D tDepth3;","uniform sampler2D tDepth4;","uniform sampler2D tDepth5;","uniform sampler2D tNormal;","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float intensity;","uniform float bias;","uniform float supersampleTime;","uniform float occlusionSphereWorldRadius;","uniform vec2 size;","uniform vec2 worldToScreenRatio;","uniform float randomSeed;","#include <sao2>","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","clipPosition *= clipW;","return ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {","return unpackRGBAToNormal( texture2D( tNormal, screenPosition ) );","}","const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );","vec3 getPositionFromOffsetPixel(","const in vec2 uvOffset,","const in float screenSpaceRadius) {","int mipLevel = int(clamp(floor(log2(screenSpaceRadius)) - float(LOG_MAX_OFFSET), 0.0, float(MAX_MIP_LEVEL)));","float d;","#if DEPTH_MIPS == 1","if (mipLevel == 0) d = unpackRGBAToDepth(texture2D(tDepth, uvOffset));","else if (mipLevel == 1) d = unpackRGBAToDepth(texture2D(tDepth1,uvOffset));","else if (mipLevel == 2) d = unpackRGBAToDepth(texture2D(tDepth2,uvOffset));","else if (mipLevel == 3) d = unpackRGBAToDepth(texture2D(tDepth3,uvOffset));","else if (mipLevel == 4) d = unpackRGBAToDepth(texture2D(tDepth4,uvOffset));","else d = unpackRGBAToDepth(texture2D(tDepth5,uvOffset));","#else","d = getDepth( uvOffset );","#endif","float sampleViewZ = getViewZ( d );","return getViewPosition( uvOffset, d, sampleViewZ );","}","float getSSAO(const in vec2 uv, const in int id, const in float randomAngle, const in float occlusionSphereScreenRadius, const in vec3 cameraSpacePosition, const in vec3 normal) {","float screenSpaceRadius = (float(id) + 0.5) * INV_NUM_SAMPLES; ","float angle = screenSpaceRadius * (float(NUM_RINGS) * 6.28) + randomAngle; ","screenSpaceRadius = max(0.75, screenSpaceRadius * occlusionSphereScreenRadius);","vec2 offsetUnitVec = vec2(cos(angle), sin(angle));","vec2 uvOffset = uv + floor(screenSpaceRadius * offsetUnitVec) / size;","if( uvOffset.x <= 0.0 || uvOffset.y <= 0.0 || uvOffset.x >= 1.0 || uvOffset.y >= 1.0 ) return 0.0;","vec3 occludingPoint = getPositionFromOffsetPixel(uvOffset, screenSpaceRadius);","occludingPoint -= cameraSpacePosition;","float vv = dot(occludingPoint, occludingPoint);","float vn = dot(occludingPoint, normal);","float invRadius2 = 1.0 / (occlusionSphereWorldRadius * occlusionSphereWorldRadius);","return max(1.0 - vv * invRadius2, 0.0) * max((vn - bias) * inversesqrt(vv), 0.0); ","}","float randomOut(vec3 v) { v  = fract(v * 443.8975);","v += dot(v, v.yzx + 19.19); return fract((v.x + v.y) * v.z); }","void main() {","float centerDepth = getDepth( vUv );","if( centerDepth >= ( 1.0 - EPSILON ) ) {","discard;","}","float centerViewZ = getViewZ( centerDepth );","vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );","vec3 centerViewNormal = getViewNormal( viewPosition, vUv );","vec2 occlusionSphereScreenRadius = occlusionSphereWorldRadius * worldToScreenRatio / (-viewPosition.z);","if( occlusionSphereScreenRadius.x < 1. ) {","discard;","}","float nFalloff = mix(1.0, max(0.0, 1.5 * centerViewNormal.z), 0.35);","float randomAngle = 6.23 * randomOut(vec3(vUv, 0.12 * fract(randomSeed)));;//rand_NEW( vUv + vec2( randomSeed,  randomSeed * 0.12 ) );","float invRadius2 = 1.0 / (occlusionSphereWorldRadius * occlusionSphereWorldRadius);","float sum = 0.0;","sum += getSSAO(vUv, 0, randomAngle, occlusionSphereScreenRadius.x, viewPosition, centerViewNormal);","sum += getSSAO(vUv, 1, randomAngle, occlusionSphereScreenRadius.x, viewPosition, centerViewNormal);","sum += getSSAO(vUv, 2, randomAngle, occlusionSphereScreenRadius.x, viewPosition, centerViewNormal);","sum += getSSAO(vUv, 3, randomAngle, occlusionSphereScreenRadius.x, viewPosition, centerViewNormal);","sum += getSSAO(vUv, 4, randomAngle, occlusionSphereScreenRadius.x, viewPosition, centerViewNormal);","sum += getSSAO(vUv, 5, randomAngle, occlusionSphereScreenRadius.x, viewPosition, centerViewNormal);","sum += getSSAO(vUv, 6, randomAngle, occlusionSphereScreenRadius.x, viewPosition, centerViewNormal);","sum += getSSAO(vUv, 7, randomAngle, occlusionSphereScreenRadius.x, viewPosition, centerViewNormal);","sum += getSSAO(vUv, 8, randomAngle, occlusionSphereScreenRadius.x, viewPosition, centerViewNormal);","sum += getSSAO(vUv, 9, randomAngle, occlusionSphereScreenRadius.x, viewPosition, centerViewNormal);","sum += getSSAO(vUv, 10, randomAngle, occlusionSphereScreenRadius.x, viewPosition, centerViewNormal);","float aoValue = max(0.0, 1.0 - sqrt(sum * nFalloff * INV_NUM_SAMPLES));","aoValue = pow(aoValue, 10.0 * intensity);","float ambientOcclusion = mix(1.0, aoValue, clamp(occlusionSphereScreenRadius.x - 1.0, 0.0, 1.0));","gl_FragColor = packDepthToRGBA( centerDepth );","gl_FragColor.x = max( ambientOcclusion, 0.0 );","}"].join("\n")},p.SAO2DepthMinifyShader={blending:p.NoBlending,defines:{DEPTH_PACKING:1},uniforms:{tDepth:{type:"t",value:null},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},size:{type:"v2",value:new p.Vector2(256,256)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#include <packing>","varying vec2 vUv;","uniform sampler2D tDepth;","uniform vec2 size;","uniform float cameraNear;","uniform float cameraFar;","void main() {","vec2 uv = vUv;","vec2 invSize = 0.5 / size;","float depth = unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, 1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, 1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, 1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, -1.0 ) ) );","depth *= 0.25;","gl_FragColor = packDepthToRGBA( depth );","}"].join("\n")},p.SAO2BilaterialFilterShader={blending:p.NoBlending,extensions:{derivatives:!0},defines:{PERSPECTIVE_CAMERA:1,KERNEL_SAMPLE_RADIUS:4},uniforms:{tAODepth:{type:"t",value:null},tAONormal:{type:"t",value:null},size:{type:"v2",value:new p.Vector2(256,256)},kernelDirection:{type:"v2",value:new p.Vector2(1,0)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},edgeSharpness:{type:"f",value:3},packOutput:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","uniform sampler2D tAODepth;","uniform sampler2D tAONormal;","uniform vec2 size;","uniform float cameraNear;","uniform float cameraFar;","uniform float edgeSharpness;","uniform int packOutput;","uniform vec2 kernelDirection;","#include <packing>","float getViewZ( const in float depth ) {","#if PERSPECTIVE_CAMERA == 1","return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","#else","return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","#endif","}","void addTapInfluence( const in vec2 tapUv, const in float centerViewZ, const in float kernelWeight, inout float aoSum, inout float weightSum ) {","vec4 depthTexel = texture2D( tAODepth, tapUv );","float ao = depthTexel.r;","depthTexel.r = 1.0;","float depth = unpackRGBAToDepth( depthTexel );","if( depth >= ( 1.0 - EPSILON ) ) {","return;","}","float tapViewZ = -getViewZ( depth );","float depthWeight = max(0.0, 1.0 - (edgeSharpness * 400.0) * abs(tapViewZ - centerViewZ) * kernelWeight );","float tapWeight = ( depthWeight );","aoSum += ao * tapWeight;","weightSum += tapWeight;","}","float normpdf(in float x, in float sigma) {","return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;","}","void main() {","vec4 depthTexel = texture2D( tAODepth, vUv );","float ao = depthTexel.r;","depthTexel.r = 1.0;","float depth = unpackRGBAToDepth( depthTexel );","if( depth >= ( 1.0 - EPSILON ) ) {","discard;","}","float centerViewZ = -getViewZ( depth );","float weights[4];","weights[0] = 0.153170;","weights[1] = 0.144893;","weights[2] = 0.122649;","weights[3] = 0.092902;","float weightSum = weights[0] + 0.3;","float aoSum = ao * weightSum;","vec2 uvIncrement = ( 2.0 * kernelDirection / ( size) );","vec2 rTapUv = vUv, lTapUv = vUv;","for( int i = 1; i <= KERNEL_SAMPLE_RADIUS; i ++ ) {","float kernelWeight = weights[i] + 0.3;","rTapUv += uvIncrement;","addTapInfluence( rTapUv, centerViewZ, kernelWeight, aoSum, weightSum );","lTapUv -= uvIncrement;","addTapInfluence( lTapUv, centerViewZ, kernelWeight, aoSum, weightSum );","}","ao = aoSum / weightSum;","if( packOutput == 1 ) {","gl_FragColor = depthTexel;","gl_FragColor.r = ao;","}","else {","gl_FragColor = vec4( vec3( ao ), 1.0 );","}","}"].join("\n")},p.BlurShader={defines:{KERNEL_RADIUS:4},uniforms:{tDiffuse:{type:"t",value:null},size:{type:"v2",value:new p.Vector2(512,512)},sampleUvOffsets:{type:"v2v",value:[new p.Vector2(0,0)]},sampleWeights:{type:"1fv",value:[1]}},vertexShader:["#include <common>","varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 size;","uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];","uniform float sampleWeights[ KERNEL_RADIUS + 1 ];","varying vec2 vUv;","void main() {","vec2 invSize = 1.0 / size;","float weightSum = sampleWeights[0];","vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;","for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {","float weight = sampleWeights[i];","vec2 sampleUvOffset = sampleUvOffsets[i] * invSize;","diffuseSum += ( texture2D( tDiffuse, vUv + sampleUvOffset ) + texture2D( tDiffuse, vUv - sampleUvOffset ) ) * weight;","weightSum += 2.0 * weight;","}","gl_FragColor =diffuseSum / weightSum;","}"].join("\n")},p.BlurShaderUtils={createSampleWeights:function(e,t){for(var r=function(e,t){return Math.exp(-e*e/(t*t*2))/(Math.sqrt(2*Math.PI)*t)},n=[],i=0;i<=e;i++)n.push(r(i,t));return n},createSampleOffsets:function(e,t){for(var r=[],n=0;n<=e;n++)r.push(t.clone().multiplyScalar(n));return r},configure:function(e,t,r,n){t|=0,e.defines.KERNEL_RADIUS===t&&e.stdDev==r||(e.defines.KERNEL_RADIUS=t,e.uniforms.sampleUvOffsets.value=p.BlurShaderUtils.createSampleOffsets(t,n),e.uniforms.sampleWeights.value=p.BlurShaderUtils.createSampleWeights(t,r),e.uvIncrement=n,e.stdDev=r,e.needsUpdate=!0)}},p.LuminosityHighPassShader={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{type:"t",value:null},luminosityThreshold:{type:"f",value:1},smoothWidth:{type:"f",value:1},defaultColor:{type:"c",value:new p.Color(0)},defaultOpacity:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","gl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")},p.GeometricRefractionShader={defines:{NUM_BOUNCES:4},extensions:{derivatives:!0},side:p.DoubleSide,uniforms:p.UniformsUtils.merge([p.UniformsLib.common,{normalCubeMap:{value:null},bDebugBounces:{value:!1},rIndexDelta:{value:.03},envMapIntensity:{value:1},crystalIOR:{value:1},absorptionColor:{value:new p.Vector3(0,.8,.8)},boostFactor:{value:1},boostColor:{value:new p.Vector3(1,1,1)},abbeNumber:{value:10},sphereSquish:{value:new p.Vector3(1,1,1)},boundingSphere:{value:new p.Vector4(0,0,0,1)}}]),vertexShader:["varying vec3 vPosition;","varying vec3 vNormal;","void main() {","vPosition = position;","vNormal = normal;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#include <bsdfs>","#include <packing>","varying vec3 vPosition;","varying vec3 vNormal;","uniform float crystalIOR;","uniform float boostFactor;","uniform vec3 boostColor;","uniform float abbeNumber;","float spectrumSpread;","uniform vec3 absorptionColor;","uniform vec3 sphereSquish;","uniform vec4 boundingSphere;","uniform samplerCube normalCubeMap;","uniform mat4 modelMatrix;","uniform mat4 modelMatrixInverse;","const float airIOR = 1.0;","#include <envmap_pars_fragment>","#include <cube_uv_reflection_fragment>","float abbeNumberToIORDispersion(float abbeNumber) {","return (crystalIOR - 1.) / abbeNumber;","}","struct Ray3 { vec3 origin; vec3 direction; };","void setRay( out Ray3 resultRay, in vec3 origin, in vec3 direction ) {","resultRay.origin = origin;","resultRay.direction = normalize( direction );","}","vec3 rayIntersectSquishedSphere( in Ray3 ray ) {","vec3 squishedDirection = ray.direction / sphereSquish;","float A = dot( squishedDirection, squishedDirection );","float B = 2.0 * dot( ray.origin, squishedDirection );","float C = dot( ray.origin, ray.origin ) - 1.0;","float disc = pow2( B ) - 4.0 * A * C;","if( disc > 0.0 ) {","disc = sqrt( disc );","float t1 = ( -B + disc ) * 0.5 / A;","float t2 = ( -B - disc ) * 0.5 / A;","float t = ( t1 > t2 ) ? t1 : t2;","return vec3( ray.origin + ray.direction * t );","}","return vec3( 0.0 );","}","vec3 queryEnvMapLocal( vec3 localNormal ) {","vec3 worldNormal = transformDirection( localNormal, modelMatrix );","vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.y, flipEnvMap * worldNormal.z );","#ifdef ENVMAP_TYPE_CUBE","vec3 envColor = envMapIntensity * envMapTexelToLinear( textureCube( envMap, queryVec ) ).rgb;","#elif defined( ENVMAP_TYPE_CUBE_UV )","vec3 envColor = envMapIntensity * textureCubeUV(queryVec, localNormal, 0.0).rgb;","#endif","return envColor;","}","float fresnelReflectance( float n0, float n1, vec3 incident, vec3 refracted, vec3 normal ) {","float cosI = dot( incident, normal );","float cosT = dot( refracted, normal );","float Rs = pow2( ( n0 * cosI - n1 * cosT ) / ( abs( n0 * cosI + n1 * cosT ) + 0.000001 ) );","float Rp = pow2( ( n0 * cosT - n1 * cosI ) / ( abs( n0 * cosT + n1 * cosI ) + 0.000001 ) );","return 0.5 * ( Rs + Rp );","}","vec3 traceRay( Ray3 incidentRay, vec3 diamondNormal ) {","float reflectance;","vec3 result = vec3( 0.0 );","vec3 transmittance = vec3( 1.0 );","Ray3 refractedRay, reflectedRay;","setRay( refractedRay, incidentRay.origin, refract( incidentRay.direction, diamondNormal, airIOR/crystalIOR ) );","setRay( reflectedRay, incidentRay.origin, reflect( incidentRay.direction, diamondNormal ) );","reflectance = fresnelReflectance( airIOR, crystalIOR, incidentRay.direction, refractedRay.direction, diamondNormal );","result += queryEnvMapLocal( reflectedRay.direction ) * reflectance;","transmittance *= ( 1.0 - reflectance );","incidentRay = refractedRay;","for( int bounce = 0; bounce < NUM_BOUNCES; bounce ++ ) {","vec3 pointOnUnitSphere = rayIntersectSquishedSphere( incidentRay );","vec4 gemstoneNormal = textureCube( normalCubeMap, pointOnUnitSphere );","vec3 inwardDiamondNormal = - normalize( unpackRGBToNormal( gemstoneNormal.rgb ) );","vec3 pointOnGemStone = pointOnUnitSphere;// * gemstoneNormal.a;","float raySegmentLength = length( pointOnGemStone - incidentRay.origin );","transmittance *= exp( -raySegmentLength * absorptionColor );","setRay( refractedRay, pointOnGemStone, refract( incidentRay.direction, inwardDiamondNormal, crystalIOR/airIOR ) );","setRay( reflectedRay, pointOnGemStone, reflect( incidentRay.direction, inwardDiamondNormal ) );","reflectance = fresnelReflectance( crystalIOR, airIOR, -incidentRay.direction, refractedRay.direction, inwardDiamondNormal );","if( reflectance >= 0.0 && reflectance < 0.99 ) {","vec3 refractedColor = vec3( 0 );","refractedColor.g = queryEnvMapLocal( refractedRay.direction ).g;","setRay( refractedRay, pointOnGemStone, refract( incidentRay.direction, inwardDiamondNormal, (crystalIOR+spectrumSpread*0.075)/airIOR ) );","refractedColor.r = queryEnvMapLocal( refractedRay.direction ).r;","setRay( refractedRay, pointOnGemStone, refract( incidentRay.direction, inwardDiamondNormal, (crystalIOR-spectrumSpread*0.05)/airIOR ) );","refractedColor.b = queryEnvMapLocal( refractedRay.direction ).b;","result += refractedColor * transmittance * ( 1.0 - reflectance ) * boostFactor * boostColor;","}","else {","reflectance = 1.0;","if( bounce == NUM_BOUNCES - 1 ) {","result += queryEnvMapLocal( incidentRay.direction )* transmittance * boostFactor * boostColor;","}","}","transmittance *= reflectance;","incidentRay = reflectedRay;","}","return result;","}","void main() {","spectrumSpread = abbeNumberToIORDispersion(abbeNumber);","vec3 localCameraPosition = transformPosition( cameraPosition, modelMatrixInverse );","vec3 localRayDirection = normalize( vPosition - localCameraPosition );","vec3 unitPosition = ( vPosition - boundingSphere.xyz ) / boundingSphere.w;","Ray3 incidentRay;","setRay( incidentRay, unitPosition, localRayDirection );","vec3 color = traceRay( incidentRay, vNormal );","gl_FragColor = vec4( toneMapping( color.rgb ), 1.0 );","}"].join("\n\n")},p.GeometricNormalCaptureShader={side:p.DoubleSide,vertexShader:["varying vec3 vNormal;","varying vec3 vPosition;","void main() {","vNormal = normal;","vec4 tempPosition = modelViewMatrix * vec4( position, 1.0 );","gl_Position = projectionMatrix * tempPosition;","vPosition = tempPosition.xyz;","}"].join("\n"),fragmentShader:["#include <packing>","varying vec3 vNormal;","varying vec3 vPosition;","void main() {","float offsetDistance = max( length( vPosition ), 0.0 );","gl_FragColor = vec4( packNormalToRGB( vNormal ), offsetDistance );","}"].join("\n")},p.FXAAShader={uniforms:{tDiffuse:{value:null},resolution:{value:new p.Vector2(1/1024,1/512)}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     6.0","void main() {","vec4 rgbaNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution );","vec4 rgbaNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution );","vec4 rgbaSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution );","vec4 rgbaSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution );","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec4 luma = vec4( 0.299, 0.587, 0.114, 0. );","float lumaNW = dot( rgbaNW, luma );","float lumaNE = dot( rgbaNE, luma );","float lumaSW = dot( rgbaSW, luma );","float lumaSE = dot( rgbaSE, luma );","float lumaM  = dot( rgbaM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE ), max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma.xyz, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n")},p.ExpandShader={uniforms:{tDiffuse:{value:null},resolution:{value:new p.Vector2(1/1024,1/512)}},defines:{INPUT_HAS_PREMULTIPLIED_ALPHA:1},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:"\n\n#include <common>\n\nuniform sampler2D tDiffuse;\nuniform vec2 resolution;\n\nvoid premul(inout vec4 c) {\n  c.rgb *= c.a;\n}\n\nvoid depremul(inout vec4 c) {\n  if(c.a < EPSILON) c = vec4(0);\n  else c.rgb /= c.a;\n}\n\nvoid main() {\n  // higher = cuts into opaque objects\n  // lower = less effective\n  const float rad = 1.1;\n\n  vec4 texelM  = texture2D(tDiffuse, (gl_FragCoord.xy) * resolution);\n\n  vec4 texel1 = texture2D(tDiffuse, (gl_FragCoord.xy + vec2(0, -rad)) * resolution);\n  vec4 texel2 = texture2D(tDiffuse, (gl_FragCoord.xy + vec2(0, +rad)) * resolution);\n  vec4 texel3 = texture2D(tDiffuse, (gl_FragCoord.xy + vec2(-rad, 0)) * resolution);\n  vec4 texel4 = texture2D(tDiffuse, (gl_FragCoord.xy + vec2(+rad, 0)) * resolution);\n\n  float max_a = max(max(max(texel1.a, texel2.a), texel3.a), texel4.a);\n\n  if(max_a - texelM.a <= EPSILON) {\n    gl_FragColor = texelM;\n    return;\n  }\n\n  // convert FROM premultiplied alpha\n  #if INPUT_HAS_PREMULTIPLIED_ALPHA\n    depremul(texelM);\n    depremul(texel1);\n    depremul(texel2);\n    depremul(texel3);\n    depremul(texel4);\n  #endif\n\n  float a1 = max(0., texel1.a - texelM.a);\n  float a2 = max(0., texel2.a - texelM.a);\n  float a3 = max(0., texel3.a - texelM.a);\n  float a4 = max(0., texel4.a - texelM.a);\n\n  float total_a = a1 + a2 + a3 + a4;\n\n  vec3 avg = (\n    (texel1.rgb * a1) +\n    (texel2.rgb * a2) +\n    (texel3.rgb * a3) +\n    (texel4.rgb * a4)\n  ) / total_a;\n\n  texelM.rgb = avg;\n  texelM.a = max_a;\n\n  if(texel1.a > texelM.a) texelM = texel1;\n  if(texel2.a > texelM.a) texelM = texel2;\n  if(texel3.a > texelM.a) texelM = texel3;\n  if(texel4.a > texelM.a) texelM = texel4;\n\n  // convert TO premultiplied alpha\n  #if INPUT_HAS_PREMULTIPLIED_ALPHA\n    premul(texelM);\n  #endif\n\n  gl_FragColor = texelM;\n}\n\n  "},p.NoiseShader={uniforms:{},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","void main() {","gl_FragColor = vec4(rand(vUv), vec3(0.0));","}"].join("\n")},p.EffectComposer=function(e,t,r){if(this.renderer=e,this.cameraAware=t||!1,void 0===r){var n={minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat,stencilBuffer:!0},i=e.getSize();(r=new p.WebGLRenderTarget(i.width,i.height,n)).texture.name="EffectComposer.rt1",r.texture.generateMipmaps=!1}this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.renderTarget2.texture.generateMipmaps=!1,this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.cameraAware&&(this.writeBuffer2=this.renderTarget1.clone(),this.readBuffer2=this.renderTarget2.clone()),this.tempBufferMap={},this.passes=[],void 0===p.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new p.ShaderPass(p.CopyShader)},(0,c.default)(p.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},swapDualBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e,e=this.readBuffer2,this.readBuffer2=this.writeBuffer2,this.writeBuffer2=e},requestBuffer:function(e){if(!this.tempBufferMap[e]){var t=this.renderTarget1.clone();t.texture.name="EffectComposer.buffer["+e+"]",t.texture.generateMipmaps=!1,this.tempBufferMap[e]=t}return this.tempBufferMap[e]},addPass:function(e){this.passes.push(e);var t=this.renderer.getSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,r,n=!1,i=this.passes.length;for(r=0;r<i;r++)if(!1!==(t=this.passes[r]).enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){var a=this.renderer.context;a.stencilFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.stencilFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==p.MaskPass&&(t instanceof p.MaskPass?n=!0:t instanceof p.ClearMaskPass&&(n=!1))}},vrRender:function(e,t,r,n,i){var a=e.getVRDisplay();if(a&&a.isPresenting){var o=t.autoUpdate;o&&(t.updateMatrixWorld(),t.autoUpdate=!1);var s=this.renderer.getSize(),l=[0,0,.5,1],u=[.5,0,.5,1],c=null;"VRFrameData"in window&&(c=new window.VRFrameData);var f=!1;Array.isArray(t)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),t=t[0]);var h,d,m=a.getLayers();if(m.length){var v=m[0];h=null!==v.leftBounds&&4===v.leftBounds.length?v.leftBounds:l,d=null!==v.rightBounds&&4===v.rightBounds.length?v.rightBounds:u}else h=l,d=u;var g={x:Math.round(s.width*h[0]),y:Math.round(s.height*h[1]),width:Math.round(s.width*h[2]),height:Math.round(s.height*h[3])},y={x:Math.round(s.width*d[0]),y:Math.round(s.height*d[1]),width:Math.round(s.width*d[2]),height:Math.round(s.height*d[3])};(this.renderer.autoClear||n)&&this.renderer.clear(),null===r.parent&&r.updateMatrixWorld();var x=e.getCameraL(),b=e.getCameraR();if(a.getFrameData){a.depthNear=r.near,a.depthFar=r.far;var w=new p.Matrix4;a.getFrameData(c),w.elements.set(c.leftViewMatrix),w.getInverse(w),w.premultiply(r.matrixWorld),w.decompose(x.position,x.quaternion,x.scale),w.elements.set(c.rightViewMatrix),w.getInverse(w),w.premultiply(r.matrixWorld),w.decompose(b.position,b.quaternion,b.scale),x.projectionMatrix.elements.set(c.leftProjectionMatrix),b.projectionMatrix.elements.set(c.rightProjectionMatrix)}else{var _=a.getEyeParameters("left"),M=a.getEyeParameters("right"),S=(new p.Vector3).fromArray(_.offset),T=(new p.Vector3).fromArray(M.offset);r.matrixWorld.decompose(x.position,x.quaternion,x.scale),b.position.copy(x.position),b.quaternion.copy(x.quaternion),b.scale.copy(x.scale);var E=e.scale;x.translateOnAxis(S,E),b.translateOnAxis(T,E),x.projectionMatrix=e.fovToProjection(_.fieldOfView,!0,r.near,r.far),b.projectionMatrix=e.fovToProjection(M.fieldOfView,!0,r.near,r.far)}x.updateMatrixWorld(),b.updateMatrixWorld();var P,A,C=this.passes.length;for(A=0;A<C;++A)if(!1!==(P=this.passes[A]).enabled&&!1!==P.cameraAware){if(this.renderer.setScissorTest(!0),this.renderer.setScissor(g.x,g.y,g.width,g.height),this.renderer.setViewport(g.x,g.y,g.width,g.height),P.render(this.renderer,this.writeBuffer,this.readBuffer,i,f,x),this.renderer.setScissor(y.x,y.y,y.width,y.height),this.renderer.setViewport(y.x,y.y,y.width,y.height),P.render(this.renderer,this.writeBuffer2,this.readBuffer2,i,f,b),P.needsSwap){if(f){var R=this.renderer.context;R.stencilFunc(R.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,i),R.stencilFunc(R.EQUAL,1,4294967295)}this.swapDualBuffers()}void 0!==p.MaskPass&&(P instanceof p.MaskPass?f=!0:P instanceof p.ClearMaskPass&&(f=!1)),P.camera&&P.camera.isPerspectiveCamera&&(P.camera=r)}this.renderer.setScissorTest(!1),this.renderer.setViewport(0,0,s.width,s.height),o&&(t.autoUpdate=!0),e.autoSubmitFrame&&e.submitFrame()}this.renderer.getContextAttributes().preserveDrawingBuffer||this.render()},stereoRender:function(e,t,r,n){r.updateMatrixWorld(),e.updateStereo(r);var i,a,o=!1,s=this.passes.length,l=this.renderer.getSize();for(a=0;a<s;++a)if(!1!==(i=this.passes[a]).enabled&&!1!==i.cameraAware){if(this.renderer.setScissorTest(!0),this.renderer.setScissor(0,0,l.width/2,l.height),this.renderer.setViewport(0,0,l.width/2,l.height),i.camera instanceof p.PerspectiveCamera&&(i.camera=e.getCameraL()),i.render(this.renderer,this.writeBuffer,this.readBuffer,n,o),this.renderer.setScissor(l.width/2,0,l.width/2,l.height),this.renderer.setViewport(l.width/2,0,l.width/2,l.height),i.camera instanceof p.PerspectiveCamera&&(i.camera=e.getCameraR()),i.render(this.renderer,this.writeBuffer2,this.readBuffer2,n,o),i.needsSwap){if(o){var u=this.renderer.context;u.stencilFunc(u.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,n),u.stencilFunc(u.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==p.MaskPass&&(i instanceof p.MaskPass?o=!0:i instanceof p.ClearMaskPass&&(o=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getSize();(e=this.renderTarget1.clone()).setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.cameraAware&&(this.writeBuffer2=this.writeBuffer.clone(),this.readBuffer2=this.readBuffer.clone())},dispose:function(){for(var e in this.tempBufferMap)this.tempBufferMap.hasOwnProperty(e)&&this.tempBufferMap[e].dispose();for(var t=0;t<this.passes.length;t++)this.passes[t].dispose()},setSize:function(e,t){for(var r in this.renderer.effectComposerSize=this.renderer.effectComposerSize||new p.Vector2,this.renderer.effectComposerSize.set(e,t),this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t),this.cameraAware&&(this.writeBuffer2.setSize(e,t),this.readBuffer2.setSize(e,t)),this.tempBufferMap)this.tempBufferMap.hasOwnProperty(r)&&this.tempBufferMap[r].setSize(e,t);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(e,t)}}),p.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1,this.cameraAware=!1},(0,c.default)(p.Pass.prototype,{setSize:function(e,t){},dispose:function(){},render:function(e,t,r,n,i,a){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),p.ClearPass=function(e,t){p.Pass.call(this),this.needsSwap=!1,this.clearColor=void 0!==e?e:0,this.clearAlpha=void 0!==t?t:0},p.ClearPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.ClearPass,render:function(e,t,r,n,i,a){var o,s;void 0!==this.clearColor&&(o=e.getClearColor().getHex(),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.setRenderTarget(this.renderToScreen?null:r),e.clear(),this.clearColor&&e.setClearColor(o,s)}}),p.CubeTexturePass=function(e,t,r){p.Pass.call(this),this.camera=e,this.needsSwap=!1,this.cubeMaterial=new p.MeshCubeMaterial,this.cubeMesh=new p.Mesh(new p.BoxBufferGeometry(10,10,10),this.cubeMaterial),this.envMap=t,this.envMapIntensity=1,this.opacity=void 0!==r?r:1,this.roughness=0,this.cubeScene=new p.Scene,this.cubeCamera=new p.PerspectiveCamera,this.cubeScene.add(this.cubeMesh)},p.CubeTexturePass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.CubeTexturePass,render:function(e,t,r,n,i,a){var o=a||this.camera,s=e.autoClear;e.autoClear=!1,this.cubeCamera.projectionMatrix.copy(o.projectionMatrix),this.cubeCamera.near=.01,this.cubeCamera.far=20,this.cubeCamera.aspect=o.aspect,this.cubeCamera.updateProjectionMatrix(),this.cubeCamera.quaternion.setFromRotationMatrix(o.matrixWorld),this.cubeMaterial.envMap!=this.envMap&&(this.cubeMaterial.envMap=this.envMap,this.cubeMaterial.needsUpdate=!0),this.cubeMaterial.envMapIntensity=this.envMapIntensity,this.cubeMaterial.roughness=this.roughness,this.cubeMaterial.opacity=this.opacity,this.cubeMaterial.transparent=this.opacity<1,e.render(this.cubeScene,this.cubeCamera,this.renderToScreen?null:r,this.clear),e.autoClear=s}}),p.DofPass=function(e,t,r){p.Pass.call(this);e=void 0!==e?e:new p.Vector2(256,256);this.downSampleRes=new p.Vector2(Math.round(e.x/2),Math.round(e.y/2));var n={minFilter:p.NearestFilter,magFilter:p.NearestFilter,type:p.HalfFloatType,format:p.RGBAFormat};this.renderTargetColorDownSample=new p.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,n),this.renderTargetColorDownSample.texture.generateMipmaps=!1,this.renderTargetCoCDownSample=new p.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,n),this.renderTargetCoCDownSample.texture.generateMipmaps=!1,this.renderTargetBlurTemp=new p.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,n),this.renderTargetBlurTemp.texture.generateMipmaps=!1;n={minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat};this.renderTargetDofBlur=new p.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,n),this.renderTargetDofBlur.texture.generateMipmaps=!1,this.renderTargetDofBlurTemp=new p.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,n),this.renderTargetDofBlurTemp.texture.generateMipmaps=!1,this.renderTargetDofCombine=new p.WebGLRenderTarget(e.x,e.y,n),this.renderTargetDofCombine.texture.generateMipmaps=!1,this.needsSwap=!1,this.oldClearColor=new p.Color,this.oldClearAlpha=1,this.renderCamera=new p.OrthographicCamera(-1,1,1,-1,0,1),this.renderScene=new p.Scene,this.quad=new p.Mesh(new p.PlaneBufferGeometry(2,2),null),this.renderScene.add(this.quad),this.focalDistance=10,this.cameraNear=.1,this.cameraFar=100,this.NearFarBlurScale=new p.Vector2(.1,.5),this.downSamplingMaterial=this.getColorDownSamplingMaterial(),this.cocMaterial=this.getCoCMaterial(),this.cocMaterial.uniforms.NearFarBlurScale.value=this.NearFarBlurScale,this.cocMaterial.uniforms.cameraNearFar.value=new p.Vector2(r.near,r.far),this.cocMaterial.uniforms.focalDistance.value=this.focalDistance,this.dilateNearCocMaterial=this.getDilateNearCocMaterial(),this.dilateNearCocMaterial.uniforms.NearFarBlurScale.value=this.NearFarBlurScale,this.dofBlurType=1,this.dofBlurMaterial=0===this.dofBlurType?this.getDofBlurCircularMaterial():this.getDofBlurSeperableMaterial(),this.dofCombineMaterial=this.getDofCombineMaterial(),this.dofCombineMaterial.uniforms.NearFarBlurScale.value=this.NearFarBlurScale,this.dofCombineMaterial.uniforms.cameraNearFar.value=new p.Vector2(r.near,r.far),this.dofCombineMaterial.uniforms.focalDistance.value=this.focalDistance,void 0===p.CopyShader&&console.error("THREE.DofPass relies on THREE.CopyShader");var i=p.CopyShader;this.copyUniforms=p.UniformsUtils.clone(i.uniforms),this.materialCopy=new p.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),this.depthMaterial=new p.MeshDepthMaterial,this.depthMaterial.side=p.DoubleSide,this.depthMaterial.depthPacking=p.RGBADepthPacking,this.depthMaterial.blending=p.NoBlending,this.depthRenderTarget=new p.WebGLRenderTarget(e.x,e.y,{minFilter:p.NearesFilter,magFilter:p.NearesFilter,format:p.RGBAFormat}),this.scene=t,this.camera=r},p.DofPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.DofPass,setSize:function(e,t){this.downSampleRes=new p.Vector2(Math.round(e/2),Math.round(t/2));var r=this.downSampleRes.x,n=this.downSampleRes.y;this.renderTargetColorDownSample.setSize(r,n),this.renderTargetCoCDownSample.setSize(r,n),this.renderTargetBlurTemp.setSize(r,n),this.renderTargetDofBlur.setSize(r,n),this.renderTargetDofBlurTemp.setSize(r,n),this.renderTargetDofCombine.setSize(e,t),this.depthRenderTarget.setSize(e,t)},changeBlurType:function(e){this.dofBlurType=e,this.dofBlurMaterial=0===this.dofBlurType?this.getDofBlurCircularMaterial():this.getDofBlurSeperableMaterial()},render:function(e,t,r,n,i,a){this.dilateNearCocMaterial.uniforms.texSize.value=this.downSampleRes,this.dofBlurMaterial.uniforms.texSize.value=this.downSampleRes,this.dofCombineMaterial.uniforms.texSize.value=this.downSampleRes,this.cocMaterial.uniforms.focalDistance.value=this.focalDistance,this.cocMaterial.uniforms.cameraNearFar.value.x=this.cameraNear,this.cocMaterial.uniforms.cameraNearFar.value.y=this.cameraFar,this.dofCombineMaterial.uniforms.focalDistance.value=this.focalDistance,this.dofCombineMaterial.uniforms.cameraNearFar.value.x=this.cameraNear,this.dofCombineMaterial.uniforms.cameraNearFar.value.y=this.cameraFar,this.oldClearColor=e.getClearColor().getHex(),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!0,i&&e.context.disable(e.context.STENCIL_TEST),this.scene.overrideMaterial=this.depthMaterial,e.setClearColor(16777215,1),e.render(this.scene,a||this.camera,this.depthRenderTarget),this.scene.overrideMaterial=null,this.quad.material=this.downSamplingMaterial,this.downSamplingMaterial.uniforms.colorTexture.value=r.texture,e.render(this.renderScene,this.renderCamera,this.renderTargetColorDownSample),this.quad.material=this.cocMaterial,this.cocMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,e.render(this.renderScene,this.renderCamera,this.renderTargetCoCDownSample),this.quad.material=this.dilateNearCocMaterial,this.dilateNearCocMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dilateNearCocMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,this.dilateNearCocMaterial.uniforms.direction.value=new p.Vector2(1,0),e.render(this.renderScene,this.renderCamera,this.renderTargetBlurTemp),this.dilateNearCocMaterial.uniforms.cocTexture.value=this.renderTargetBlurTemp.texture,this.dilateNearCocMaterial.uniforms.direction.value=new p.Vector2(0,1),e.render(this.renderScene,this.renderCamera,this.renderTargetCoCDownSample),0===this.dofBlurType?(this.quad.material=this.dofBlurMaterial,this.dofBlurMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dofBlurMaterial.uniforms.colorTexture.value=this.renderTargetDownSample.texture,this.dofBlurMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,e.render(this.renderScene,this.renderCamera,this.renderTargetDofBlurTemp)):(this.quad.material=this.dofBlurMaterial,this.dofBlurMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dofBlurMaterial.uniforms.colorTexture.value=this.renderTargetColorDownSample.texture,this.dofBlurMaterial.uniforms.direction.value=new p.Vector2(1,0),e.render(this.renderScene,this.renderCamera,this.renderTargetDofBlur),this.dofBlurMaterial.uniforms.colorTexture.value=this.renderTargetDofBlur.texture,this.dofBlurMaterial.uniforms.direction.value=new p.Vector2(0,1),e.render(this.renderScene,this.renderCamera,this.renderTargetDofBlurTemp)),this.quad.material=this.dofCombineMaterial,this.dofCombineMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dofCombineMaterial.uniforms.colorTexture.value=r.texture,this.dofCombineMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,this.dofCombineMaterial.uniforms.blurTexture.value=this.renderTargetDofBlurTemp.texture,e.render(this.renderScene,this.renderCamera,this.renderTargetDofCombine),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetDofCombine.texture,i&&e.context.enable(e.context.STENCIL_TEST),e.render(this.renderScene,this.renderCamera,r),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o},getColorDownSamplingMaterial:function(){return new p.ShaderMaterial({uniforms:{colorTexture:{value:null}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = texture2D(colorTexture, vUv);\n\t\t\t\t}"})},getCoCMaterial:function(){return new p.ShaderMaterial({uniforms:{depthTexture:{value:null},NearFarBlurScale:{value:new p.Vector2(.5,.5)},cameraNearFar:{value:new p.Vector2(.1,100)},focalDistance:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\tuniform float focalDistance;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tfloat computeCoc() {\t\t\t\t\tvec4 packDepth = texture2D(depthTexture, vUv).rgba;\t\t\t\t\tif(packDepth.x == 1.0) return max(NearFarBlurScale.x, NearFarBlurScale.y);\t\t\t\t\t\tfloat depth = unpackRGBAToDepth(packDepth);\t\t\t\t\t\tdepth = -perspectiveDepthToViewZ(depth, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\tfloat coc = (depth - focalDistance)/depth;\t\t\t\t\treturn (coc > 0.0 ? coc * NearFarBlurScale.y : coc * NearFarBlurScale.x);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, computeCoc());\n\t\t\t\t}"})},getDilateNearCocMaterial:function(){return new p.ShaderMaterial({uniforms:{cocTexture:{value:null},depthTexture:{value:null},NearFarBlurScale:{value:new p.Vector2(.5,.5)},texSize:{value:new p.Vector2(.5,.5)},direction:{value:new p.Vector2(1,0)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 direction;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tfloat expandNear(const in vec2 offset, const in bool isBackground) {\t\t\t\t\tfloat coc = 0.0;\t\t\t\t\tvec2 sampleOffsets = MAXIMUM_BLUR_SIZE * offset / 5.0;\t\t\t\t\tfloat coc0 = texture2D(cocTexture, vUv).a;\t\t\t\t\tfloat coc1 = texture2D(cocTexture, vUv - 5.0 * sampleOffsets).a;\t\t\t\t\tfloat coc2 = texture2D(cocTexture, vUv - 4.0 * sampleOffsets).a;\t\t\t\t\tfloat coc3 = texture2D(cocTexture, vUv - 3.0 * sampleOffsets).a;\t\t\t\t\tfloat coc4 = texture2D(cocTexture, vUv - 2.0 * sampleOffsets).a;\t\t\t\t\tfloat coc5 = texture2D(cocTexture, vUv - 1.0 * sampleOffsets).a;\t\t\t\t\tfloat coc6 = texture2D(cocTexture, vUv + 1.0 * sampleOffsets).a;\t\t\t\t\tfloat coc7 = texture2D(cocTexture, vUv + 2.0 * sampleOffsets).a;\t\t\t\t\tfloat coc8 = texture2D(cocTexture, vUv + 3.0 * sampleOffsets).a;\t\t\t\t\tfloat coc9 = texture2D(cocTexture, vUv + 4.0 * sampleOffsets).a;\t\t\t\t\tfloat coc10 = texture2D(cocTexture, vUv + 5.0 * sampleOffsets).a;\t\t\t\t\t\t\t\t\t\t\tif(isBackground){\t\t\t\t\t\tcoc = abs(coc0) * 0.095474 + \t\t\t\t\t\t(abs(coc1) + abs(coc10)) * 0.084264 + \t\t\t\t\t\t(abs(coc2) + abs(coc9)) * 0.088139 + \t\t\t\t\t\t(abs(coc3) + abs(coc8)) * 0.091276 + \t\t\t\t\t\t(abs(coc4) + abs(coc7)) * 0.093585 + \t\t\t\t\t\t(abs(coc5) + abs(coc6)) * 0.094998;\t\t\t\t\t} else {\t\t\t\t\t\tcoc = min(coc0, 0.0);\t\t\t\t\t\tcoc = min(coc1 * 0.3, coc);\t\t\t\t\t\tcoc = min(coc2 * 0.5, coc);\t\t\t\t\t\tcoc = min(coc3 * 0.75, coc);\t\t\t\t\t\tcoc = min(coc4 * 0.8, coc);\t\t\t\t\t\tcoc = min(coc5 * 0.95, coc);\t\t\t\t\t\tcoc = min(coc6 * 0.95, coc);\t\t\t\t\t\tcoc = min(coc7 * 0.8, coc);\t\t\t\t\t\tcoc = min(coc8 * 0.75, coc);\t\t\t\t\t\tcoc = min(coc9 * 0.5, coc);\t\t\t\t\t\tcoc = min(coc10 * 0.3, coc);\t\t\t\t\t\tif(abs(coc0) > abs(coc))\t\t\t\t\t\t\tcoc = coc0;\t\t\t\t\t}\t\t\t\t\treturn coc;\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 offset = direction/texSize;\t\t\t\t\tfloat coc = expandNear(offset, texture2D(depthTexture, vUv).x == 1.0);\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, coc);\n\t\t\t\t}"})},getDofBlurCircularMaterial:function(){return new p.ShaderMaterial({uniforms:{colorTexture:{value:null},cocTexture:{value:null},depthTexture:{value:null},texSize:{value:new p.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tvec4 CircularBlur() {\t\t\t\t\t\t\t\t\t\tconst int NUM_SAMPLES = 16;\t\t\t\t\tvec2 poisson_disk_samples[NUM_SAMPLES];\t\t\t\t\tpoisson_disk_samples[0] = vec2(-0.399691779231, 0.728591545584);\t\t\t\t\tpoisson_disk_samples[1] = vec2(-0.48622557676, -0.84016533712);\t\t\t\t\tpoisson_disk_samples[2] = vec2(0.770309468987, -0.24906070432);\t\t\t\t\tpoisson_disk_samples[3] = vec2(0.556596796154, 0.820359876432);\t\t\t\t\tpoisson_disk_samples[4] = vec2(-0.933902004071, 0.0600539051593);\t\t\t\t\tpoisson_disk_samples[5] = vec2(0.330144964342, 0.207477293384);\t\t\t\t\tpoisson_disk_samples[6] = vec2(0.289013230975, -0.686749271417);\t\t\t\t\tpoisson_disk_samples[7] = vec2(-0.0832470893559, -0.187351643125);\t\t\t\t\tpoisson_disk_samples[8] = vec2(-0.296314525615, 0.254474834305);\t\t\t\t\tpoisson_disk_samples[9] = vec2(-0.850977666059, 0.484642744689);\t\t\t\t\tpoisson_disk_samples[10] = vec2(0.829287915319, 0.2345063545);\t\t\t\t\tpoisson_disk_samples[11] = vec2(-0.773042143899, -0.543741521254);\t\t\t\t\tpoisson_disk_samples[12] = vec2(0.0561133030864, 0.928419742597);\t\t\t\t\tpoisson_disk_samples[13] = vec2(-0.205799249508, -0.562072714492);\t\t\t\t\tpoisson_disk_samples[14] = vec2(-0.526991665882, -0.193690188118);\t\t\t\t\tpoisson_disk_samples[15] = vec2(-0.051789270667, -0.935374050821);\t\t\t\t\t\t\t\t\t\t\tvec4 cocr = texture2D(cocTexture, vUv);\t\t\t\t\t\t\t\t\t\t\tfloat blurDist = MAXIMUM_BLUR_SIZE * coc.a;\t\t\t\t\t\t\t\t\t\t\tfloat rnd = PI2 * rand( vUv );\t\t\t\t\tfloat costheta = cos(rnd);\t\t\t\t\tfloat sintheta = sin(rnd);\t\t\t\t\tvec4 rotationMatrix = vec4(costheta, -sintheta, sintheta, costheta);\t\t\t\t\t\t\t\t\t\t\tvec3 colorSum = vec3(0.0);\t\t\t\t\tfloat weightSum = 0.0;\t\t\t\t\t\t\t\t\t\t\tfor (int i = 0; i < NUM_SAMPLES; i++) {\t\t\t\t\t\tvec2 ofs = poisson_disk_samples[i];\t\t\t\t\t\tofs = vec2(dot(ofs, rotationMatrix.xy), dot(ofs, rotationMatrix.zw) );\t\t\t\t\t\tvec2 texcoord = vUv + blurDist * ofs / texSize.xy;\t\t\t\t\t\tvec4 sample = texture2D(colorTexture, texcoord);\t\t\t\t\t\tfloat cocWeight = abs(sample.a);\t\t\t\t\t\tcocWeight *= cocWeight * cocWeight;\t\t\t\t\t\tcolorSum += sample.rgb * cocWeight;\t\t\t\t\t\tweightSum += cocWeight;\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\tcolorSum /= weightSum;\t\t\t\t\t\t\t\t\t\t\treturn vec4(colorSum, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = CircularBlur();\n\t\t\t\t}"})},getDofBlurSeperableMaterial:function(){return new p.ShaderMaterial({uniforms:{cocTexture:{value:null},colorTexture:{value:null},texSize:{value:new p.Vector2(.5,.5)},direction:{value:new p.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tconst float SIGMA = 5.0;\t\t\t\tconst int NUM_SAMPLES = 4;\t\t\t\tfloat normpdf(in float x, in float sigma)\t\t\t\t{\t\t\t\t\treturn 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;\t\t\t\t}\t\t\t\t\t\t\t\tvec4 weightedBlur() { \t\t\t\t\tfloat cocIn = texture2D(cocTexture, vUv).a;\t\t\t\t\tfloat kernelRadius = MAXIMUM_BLUR_SIZE * cocIn;\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tcocIn *= cocIn * cocIn;\t\t\t\t\tfloat centreSpaceWeight = normpdf(0.0, SIGMA) * abs(cocIn);\t\t\t\t\tfloat weightSum = centreSpaceWeight;\t\t\t\t\tvec4 centreSample = texture2D(colorTexture, vUv);\t\t\t\t\tvec4 diffuseSum = centreSample * weightSum;\t\t\t\t\tvec2 delta = invSize * kernelRadius/float(NUM_SAMPLES);\t\t\t\t\tfor( int i = 1; i <= NUM_SAMPLES; i ++ ) {\t\t\t\t\t\t\tfloat spaceWeight = normpdf(float(i), SIGMA);\t\t\t\t\t\t\tvec2 texcoord = direction * delta * float(i);\t\t\t\t\t\t\tvec4 rightSample = texture2D( colorTexture, vUv + texcoord);\t\t\t\t\t\t\tvec4 leftSample = texture2D( colorTexture, vUv - texcoord);\t\t\t\t\t\t\tfloat leftCocWeight = abs(texture2D( cocTexture, vUv - texcoord).a);\t\t\t\t\t\t\tfloat rightCocWeight = abs(texture2D( cocTexture, vUv + texcoord).a);\t\t\t\t\t\t\tleftCocWeight *= leftCocWeight * leftCocWeight;\t\t\t\t\t\t\trightCocWeight *= rightCocWeight * rightCocWeight;\t\t\t\t\t\t\tdiffuseSum += ( (leftSample * leftCocWeight) + (rightSample * rightCocWeight) ) * spaceWeight;\t\t\t\t\t\t\tweightSum += (spaceWeight * (leftCocWeight + rightCocWeight));\t\t\t\t\t}\t\t\t\t  return diffuseSum/weightSum;\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = weightedBlur();\n\t\t\t\t}"})},getDofCombineMaterial:function(){return new p.ShaderMaterial({uniforms:{colorTexture:{value:null},blurTexture:{value:null},cocTexture:{value:null},depthTexture:{value:null},NearFarBlurScale:{value:new p.Vector2(.5,.5)},texSize:{value:new p.Vector2(.5,.5)},cameraNearFar:{value:new p.Vector2(.1,100)},focalDistance:{value:20}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform sampler2D blurTexture;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\tuniform float focalDistance;\t\t\t\t\t\t\t\tfloat computeCoc() {\t\t\t\t\tvec4 packedDepth = texture2D(depthTexture, vUv);\t\t\t\t\tif(packedDepth.x == 1.0) return max(NearFarBlurScale.x, NearFarBlurScale.y);\t\t\t\t\t\tfloat depth = unpackRGBAToDepth(packedDepth);\t\t\t\t\t\tdepth = -perspectiveDepthToViewZ(depth, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\tfloat coc = (depth - focalDistance)/depth;\t\t\t\t\treturn (coc > 0.0 ? coc * NearFarBlurScale.y : coc * NearFarBlurScale.x);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 blur = texture2D(blurTexture, vUv);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(1.5, 0.5) / texSize);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(-0.5, 1.5) / texSize);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(-1.5, -0.5) / texSize);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(0.5, -1.5) / texSize);\t\t\t\t\tblur /= 5.0;\t\t\t\t\tfloat coc = abs(min(texture2D(cocTexture, vUv).a, computeCoc()));\t\t\t\t\tcoc = clamp(coc * coc * 8.0, 0.0, 1.0);\t\t\t\t\tvec4 color = mix(texture2D(colorTexture, vUv), blur, vec4(coc));\t\t\t\t\tgl_FragColor = color;\n\t\t\t\t}"})}}),p.IndexPass=function(e,t,r){p.Pass.call(this),this.camera=t,this.retrieveIdFunc=r||function(e){return e.uuid},this.meshMatMap={},this.indexColorScene=e},p.IndexPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.IndexPass,switchMaterial:function(){if(this.indexColorScene){var e=this;this.indexColorScene.traverse(function(t){if("Mesh"===t.type){var r=e.retrieveIdFunc(t);if(void 0!==r)if(e.meshMatMap[r])t.material!==e.meshMatMap[r].index&&t.material!==e.meshMatMap[r].original&&(e.meshMatMap[r].original=t.material),t.material=e.enabled?e.meshMatMap[r].index:e.meshMatMap[r].original,e.enabled||(t.material.needsUpdate=!0);else{var n={};n.original=t.material;var i=r.slice(0,6);n.index=new p.MeshBasicMaterial({color:"#"+i,side:p.DoubleSide}),e.meshMatMap[r]=n}}})}},render:function(e,t,r,n,i,a){if(this.indexColorScene){var o=a||this.camera;e.toneMapping=p.NoToneMapping,e.gammaInput=!1,e.gammaOutput=!1,e.setClearColor(16777215,0),e.autoClear=!0,this.switchMaterial(),this.renderToScreen?e.render(this.indexColorScene,o):e.render(this.indexColorScene,o,t,this.clear)}}}),p.RenderPass=function(e,t,r,n,i){p.Pass.call(this),this.scene=e,this.camera=t,this.renderOver=!1,this.overrideMaterial=r,this.clearColor=n,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,void 0===p.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader"),this.overMaterial=new p.ShaderMaterial(p.CopyShader),this.overMaterial.uniforms=p.UniformsUtils.clone(this.overMaterial.uniforms),this.overMaterial.blending=p.NormalBlending,this.overMaterial.premultipliedAlpha=!0,this.overMaterial.transparent=!0,this.overMaterial.depthTest=!1,this.overMaterial.depthWrite=!1,this.camera2=new p.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new p.Scene,this.quad2=new p.Mesh(new p.PlaneGeometry(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)},p.RenderPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.RenderPass,render:function(e,t,r,n,i,a){var o,s,l=a||this.camera,u=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,o=e.getClearColor(),s=e.getClearAlpha(),this.clearDepth&&e.clearDepth(),this.renderOver?(e.setClearColor(0,0),e.renderOverride(this.overrideMaterial,this.scene,l,t,!0,this.visibilityFunc),this.overMaterial.uniforms.tDiffuse.value=t.texture,void 0!==this.clearColor&&e.setClearColor(this.clearColor,this.clearAlpha),e.renderOverride(this.overMaterial,this.scene2,this.camera2,this.renderToScreen?null:r,this.clear)):(void 0!==this.clearColor&&e.setClearColor(this.clearColor,this.clearAlpha),e.renderOverride(this.overrideMaterial,this.scene,l,this.renderToScreen?null:r,this.clear,this.visibilityFunc)),this.clearColor&&e.setClearColor(o,s),this.scene.overrideMaterial=null,e.autoClear=u}}),p.MaskPass=function(e,t){p.Pass.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1},p.MaskPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.MaskPass,render:function(e,t,r,n,i,a){var o,s,l=e.context,u=e.state;u.buffers.color.setMask(!1),u.buffers.depth.setMask(!1),u.buffers.color.setLocked(!0),u.buffers.depth.setLocked(!0),this.inverse?(o=0,s=1):(o=1,s=0),u.buffers.stencil.setTest(!0),u.buffers.stencil.setOp(l.REPLACE,l.REPLACE,l.REPLACE),u.buffers.stencil.setFunc(l.ALWAYS,o,4294967295),u.buffers.stencil.setClear(s);var c=a||this.camera;e.render(this.scene,c,r,this.clear),e.render(this.scene,c,t,this.clear),u.buffers.color.setLocked(!1),u.buffers.depth.setLocked(!1),u.buffers.stencil.setFunc(l.EQUAL,1,4294967295),u.buffers.stencil.setOp(l.KEEP,l.KEEP,l.KEEP)}}),p.ClearMaskPass=function(){p.Pass.call(this),this.needsSwap=!1},p.ClearMaskPass.prototype=(0,u.default)(p.Pass.prototype),(0,c.default)(p.ClearMaskPass.prototype,{render:function(e,t,r,n,i){e.state.buffers.stencil.setTest(!1)}}),p.MultiPass=function(e,t,r){p.Pass.call(this),this.scene=t,this.camera=r,this.orthoScene=new p.Scene,this.orthoCamera=new p.OrthographicCamera(-1,1,1,-1,-.01,1e3);var n=new p.PlaneGeometry(2,2),i=new p.Mesh(n,this.currentMaterial);this.orthoScene.add(i),this.needsSwap=!1,this.normalRenderTarget=new p.WebGLRenderTarget(256,256,{minFilter:p.NearestFilter,magFilter:p.NearestFilter,format:p.RGBAFormat}),this.side=p.FrontSide,this.normalTexture=this.normalRenderTarget.texture,this.depthRenderTarget=new p.WebGLRenderTarget(256,256,{minFilter:p.NearestFilter,magFilter:p.NearestFilter,format:p.RGBAFormat}),this.depthTexture=this.depthRenderTarget.texture,this.depthTexture.depthPacking=p.RGBADepthPacking,this.visibilityFunc=function(e){return!e.material.transparent}},p.MultiPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.MultiPass,dispose:function(){this.normalRenderTarget&&(this.normalRenderTarget.dispose(),this.normalRenderTarget=null),this.depthRenderTarget&&(this.depthRenderTarget.dispose(),this.depthRenderTarget=null)},setSize:function(e,t){this.normalRenderTarget&&this.normalRenderTarget.setSize(e,t),this.depthRenderTarget&&this.depthRenderTarget.setSize(e,t)},render:function(e,t,r,n,i,a){var o=a||this.camera,s=e.getClearColor(),l=e.getClearAlpha(),u=e.autoClear;e.setClearColor(new p.Color(.5,.5,1),1),p.MaterialChanger.renderPassNormal(e,this.scene,o,this.normalRenderTarget,this.visibilityFunc),this.depthRenderTarget&&(e.setClearColor(new p.Color(1,1,1),1),p.MaterialChanger.renderPassDepth(e,this.scene,o,this.depthRenderTarget,this.visibilityFunc,{depthPacking:this.depthTexture.depthPacking})),e.autoClear=u,e.setClearColor(s),e.setClearAlpha(l)}}),p.OITRenderPass=function(e,t,r,n,i,a){var o=r.extensions,s={};!o.get("OES_texture_half_float")?!!o.get("OES_texture_float")?s.type=p.FloatType:console.log("OIT Needs either Float or Half Float texture support, using general render"):s.type=p.HalfFloatType;!!o.get("WEBGL_depth_texture")||console.warn("OIT Needs support of Depth Texture"),r.transparency=p.OrderIndependentTransperancy,this.scene=e,this.camera=t,this.renderOver=!1,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==a?a:0,this.clear=!1,this.clearDepth=!1,this.needsSwap=!1,this.accumulateRT=new p.WebGLRenderTarget(0,0,s),this.revealageRT=new p.WebGLRenderTarget(0,0,{type:p.UnsignedByteType}),this.depthTexture=new p.DepthTexture,this.accumulateRT.depthTexture=this.depthTexture,this.revealageRT.depthTexture=this.depthTexture,this.mergeRT=new p.WebGLRenderTarget(0,0),this.mergeMaterial=new p.ShaderMaterial({uniforms:{accumulationTexture:{value:null},revealageTexture:{value:null}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n    ",fragmentShader:"\nvarying vec2 vUv;\nuniform sampler2D accumulationTexture;\nuniform sampler2D revealageTexture;\nvoid main() {\n  vec4 accumulationColor = texture2D( accumulationTexture, vUv );\n  vec4 revealage = texture2D( revealageTexture, vUv );\n  vec3 finalColor = pow(vec3(accumulationColor.rgb / max(accumulationColor.a, 1e-5)), vec3(1.0));\n  gl_FragColor = vec4( finalColor, 1. - revealage.r );\n  gl_FragColor.rgb *= gl_FragColor.a;\n}\n    "}),this.mergeMaterial.uniforms.accumulationTexture.value=this.accumulateRT.texture,this.mergeMaterial.uniforms.revealageTexture.value=this.revealageRT.texture,this.copyMaterial=new p.ShaderMaterial(p.CopyShader),this.copyMaterial.uniforms=p.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.depthTest=!1,this.copyMaterial.depthWrite=!1,this.copyMaterial.transparent=!0,this.copyMaterial.blending=p.NormalBlending,this.copyMaterial.premultipliedAlpha=!0,this.copyMaterial.needsUpdate=!0,void 0===p.CopyShader&&console.error("THREE.OITRenderPass relies on THREE.CopyShader"),this.PASS_TYPE_ACCUM=0,this.PASS_TYPE_REVEALAGE=1,this.BlendStates=[],this.BlendStates[this.PASS_TYPE_ACCUM]={blending:p.CustomBlending,blendEquation:p.AddEquation,blendSrc:p.OneFactor,blendDst:p.OneFactor,blendEquationAlpha:p.AddEquation,blendSrcAlpha:p.OneFactor,blendDstAlpha:p.OneFactor,premultipliedAlpha:!1},this.BlendStates[this.PASS_TYPE_REVEALAGE]={blending:p.CustomBlending,blendEquation:p.AddEquation,blendSrc:p.ZeroFactor,blendDst:p.OneMinusSrcAlphaFactor,blendEquationAlpha:p.AddEquation,blendSrcAlpha:p.OneFactor,blendDstAlpha:p.OneFactor,premultipliedAlpha:!1};var l=this.opaqueFilter=function(e,t){return!t.transparent};this.transparentFilter=function(e,t){return!l(e,t)},this.blendFactorsMap={},this.fxaaPass=new p.FXAAPass,this.expandPass=new p.ExpandPass,this.fxaaPreRT=new p.WebGLRenderTarget(1,1),this.useSeparateAA=!1},p.OITRenderPass.prototype={constructor:p.OITRenderPass,setSize:function(e,t){this.accumulateRT.setSize(e,t),this.revealageRT.setSize(e,t),this.mergeRT.setSize(e,t),this.fxaaPass.setSize(e,t),this.expandPass.setSize(e,t),this.fxaaPreRT.setSize(e,t)},render:function(e,t,r,n,i,a){var o=a||this.camera,s=e.autoClear;e.autoClear=!1;var l=e.autoClearDepth,u=e.autoCleraColor,c=e.getClearColor(),f=e.getClearAlpha(),h=e.getSize(),d=h.width,m=h.height;if(o.view&&this.useSeparateAA){var v=o.view.offsetX,g=o.view.offsetY;o.setViewOffset(d,m,0,0,d,m)}e.autoClearColor=!1,e.autoClearDepth=!0,p.MaterialChanger.renderPassDepth(e,this.scene,o,this.accumulateRT,this.opaqueFilter),e.autoClearColor=!0,e.autoClearDepth=!1,this.scene.overrideMaterial=void 0,this.changeBlendState(e,this.PASS_TYPE_ACCUM),e.oitMode=0,e.setClearColor(0,0),e.render(this.scene,o,this.accumulateRT,!0,this.transparentFilter),this.restoreBlendState(e),this.changeBlendState(e,this.PASS_TYPE_REVEALAGE),e.oitMode=1,e.setClearColor(16777215,1),e.render(this.scene,o,this.revealageRT,!0,this.transparentFilter),this.restoreBlendState(e),e.setClearColor(0,0),e.autoClearColor=!0,e.autoClearDepth=!0,e.renderPass(this.mergeMaterial,this.mergeRT,!0),this.useSeparateAA&&(this.expandPass.render(e,this.fxaaPreRT,this.mergeRT,n,i,o),this.fxaaPass.render(e,this.mergeRT,this.fxaaPreRT,n,i,o)),e.autoClear=!1,this.copyMaterial.uniforms.tDiffuse.value=this.mergeRT.texture,e.renderPass(this.copyMaterial,r,!1),e.autoClear=s,e.autoClearDepth=l,e.autoClearColor=u,e.setClearColor(c,f),e.oitMode=2,o.view&&this.useSeparateAA&&o.setViewOffset(d,m,v,g,d,m)},changeBlendState:function(e,t){if(void 0===t||t!==this.PASS_TYPE_ACCUM&&t!==this.PASS_TYPE_REVEALAGE)console.log("WebGLOrderIndependentTransparency::Invalid passType");else for(var r=0==(0,l.default)(this.blendFactorsMap).length,n=this.BlendStates[t],i=[e.transparentObjects,e.sprites],a=0;a<i.length;a++)for(var o=i[a],s=0,u=o.length;s<u;s++){var c=o[s],f=c.object||c,h=c.material;if(this.transparentFilter(f,h)&&!this.blendFactorsMap[h.uuid]){if(r){var d={blending:h.blending,blendEquation:h.blendEquation,blendSrc:h.blendSrc,blendDst:h.blendDst,blendEquationAlpha:h.blendEquationAlpha,blendSrcAlpha:h.blendSrcAlpha,blendDstAlpha:h.blendDstAlpha,premultipliedAlpha:h.premultipliedAlpha,needsUpdate:h.needsUpdate,depthWrite:h.depthWrite,depthTest:h.depthTest};this.blendFactorsMap[h.uuid]=d}h.blending=n.blending,h.blendEquation=n.blendEquation,h.blendSrc=n.blendSrc,h.blendDst=n.blendDst,h.blendEquationAlpha=n.blendEquationAlpha,h.blendSrcAlpha=n.blendSrcAlpha,h.blendDstAlpha=n.blendDstAlpha,h.premultipliedAlpha=n.premultipliedAlpha,h.depthWrite=!1,h.depthTest=!0,h.needsUpdate=!0}}},restoreBlendState:function(e){for(var t=[e.transparentObjects,e.sprites],r=0;r<t.length;r++)for(var n=t[r],i=0,a=n.length;i<a;i++){var o=n[i],s=o.object||o,l=o.material;if(this.transparentFilter(s,l)){var u=this.blendFactorsMap[l.uuid];l.blending=u.blending,l.blendEquation=u.blendEquation,l.blendSrc=u.blendSrc,l.blendDst=u.blendDst,l.blendEquationAlpha=u.blendEquationAlpha,l.blendSrcAlpha=u.blendSrcAlpha,l.blendDstAlpha=u.blendDstAlpha,l.depthWrite=u.depthWrite,l.depthTest=u.depthTest}}this.blendFactorsMap={}},isSupport:function(e){var t=e.extensions,r=!!t.get("OES_texture_half_float");return!!t.get("WEBGL_depth_texture")?!!r||(!!!!t.get("OES_texture_float")||(console.log("OIT Needs either Float or Half Float texture support, using general render"),!1)):(console.warn("OIT Needs support of Depth Texture"),!1)}},p.OutlinePass=function(e,t,r,n){this.renderScene=t,this.camera=r,this.selectedObjects=void 0!==n?n:[],this.visibleEdgeColor=new p.Color(1,1,1),this.hiddenEdgeColor=new p.Color(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=1,this.pulsePeriod=0,p.Pass.call(this),this.resolution=void 0!==e?new p.Vector2(e.x,e.y):new p.Vector2(256,256);var i={minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat},a=Math.round(this.resolution.x/this.downSampleRatio),o=Math.round(this.resolution.y/this.downSampleRatio);this.maskBufferMaterial=new p.MeshBasicMaterial({color:16777215}),this.maskBufferMaterial.side=p.DoubleSide,this.renderTargetMaskBuffer=new p.WebGLRenderTarget(this.resolution.x,this.resolution.y,i),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new p.MeshDepthMaterial,this.depthMaterial.side=p.DoubleSide,this.depthMaterial.depthPacking=p.RGBADepthPacking,this.depthMaterial.blending=p.NoBlending,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=p.DoubleSide,this.renderTargetDepthBuffer=new p.WebGLRenderTarget(this.resolution.x,this.resolution.y,i),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new p.WebGLRenderTarget(a,o,i),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new p.WebGLRenderTarget(a,o,i),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new p.WebGLRenderTarget(Math.round(a/2),Math.round(o/2),i),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new p.WebGLRenderTarget(a,o,i),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new p.WebGLRenderTarget(Math.round(a/2),Math.round(o/2),i),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;this.separableBlurMaterial1=this.getSeperableBlurMaterial(8),this.separableBlurMaterial1.uniforms.texSize.value=new p.Vector2(a,o),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value=new p.Vector2(Math.round(a/2),Math.round(o/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===p.CopyShader&&console.error("THREE.OutlinePass relies on THREE.CopyShader");var s=p.CopyShader;this.copyUniforms=p.UniformsUtils.clone(s.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new p.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,blending:p.NoBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new p.Color,this.oldClearAlpha=1,this.orthoCamera=new p.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new p.Scene,this.quad=new p.Mesh(new p.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.tempPulseColor1=new p.Color,this.tempPulseColor2=new p.Color,this.textureMatrix=new p.Matrix4},p.OutlinePass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.OutlinePass,dispose:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()},setSize:function(e,t){this.renderTargetMaskBuffer.setSize(e,t);var r=Math.round(e/this.downSampleRatio),n=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(r,n),this.renderTargetBlurBuffer1.setSize(r,n),this.renderTargetEdgeBuffer1.setSize(r,n),this.separableBlurMaterial1.uniforms.texSize.value=new p.Vector2(r,n),r=Math.round(r/2),n=Math.round(n/2),this.renderTargetBlurBuffer2.setSize(r,n),this.renderTargetEdgeBuffer2.setSize(r,n),this.separableBlurMaterial2.uniforms.texSize.value=new p.Vector2(r,n)},updateTextureMatrix:function(e){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(e.projectionMatrix),this.textureMatrix.multiply(e.matrixWorldInverse)},render:function(e,t,r,n,i,a){var o=a||this.camera;if(0!==this.selectedObjects.length){var s=this;this.oldClearColor=e.getClearColor().getHex(),this.oldClearAlpha=e.getClearAlpha();var l=e.autoClear;if(e.autoClear=!1,i&&e.context.disable(e.context.STENCIL_TEST),e.setClearColor(16777215,1),this.renderScene.overrideMaterial=this.depthMaterial,e.render(this.renderScene,o,this.renderTargetDepthBuffer,!0,function(e){for(var t=0;t<s.selectedObjects.length;t++){var r=s.selectedObjects[t];if(e.uuid===r.uuid)return!1}return!0}),this.updateTextureMatrix(o),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value=new p.Vector2(o.near,o.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.render(this.renderScene,o,this.renderTargetMaskBuffer,!0,function(e){for(var t=0;t<s.selectedObjects.length;t++){var r=s.selectedObjects[t];if(e.uuid===r.uuid)return!0}return!1}),this.renderScene.overrideMaterial=null,this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.render(this.scene,this.orthoCamera,this.renderTargetMaskDownSampleBuffer,!0),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var u=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(u),this.tempPulseColor2.multiplyScalar(u)}this.quad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value=new p.Vector2(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.render(this.scene,this.orthoCamera,this.renderTargetEdgeBuffer1,!0),this.quad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=p.OutlinePass.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.render(this.scene,this.orthoCamera,this.renderTargetBlurBuffer1,!0),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=p.OutlinePass.BlurDirectionY,e.render(this.scene,this.orthoCamera,this.renderTargetEdgeBuffer1,!0),this.quad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=p.OutlinePass.BlurDirectionX,e.render(this.scene,this.orthoCamera,this.renderTargetBlurBuffer2,!0),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=p.OutlinePass.BlurDirectionY,e.render(this.scene,this.orthoCamera,this.renderTargetEdgeBuffer2,!0),this.quad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,i&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.orthoCamera,r,!1),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=l}},getPrepareMaskMaterial:function(){return new p.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new p.Vector2(.5,.5)},textureMatrix:{value:new p.Matrix4}},vertexShader:"varying vec2 vUv;\t\t\t\tvarying vec4 projTexCoord;\t\t\t\tvarying vec4 vPosition;\t\t\t\tuniform mat4 textureMatrix;\t\t\t\tvoid main() {\t\t\t\t\tvUv = uv;\t\t\t\t\tvPosition = modelViewMatrix * vec4( position, 1.0 );\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <packing>\t\t\t\tvarying vec2 vUv;\t\t\t\tvarying vec4 vPosition;\t\t\t\tvarying vec4 projTexCoord;\t\t\t\tuniform sampler2D depthTexture;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\t\t\t\t\tfloat viewZ = -perspectiveDepthToViewZ( depth, cameraNearFar.x, cameraNearFar.y );\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\t\t\t\t}"})},getEdgeDetectionMaterial:function(){return new p.ShaderMaterial({uniforms:{maskTexture:{value:null},texSize:{value:new p.Vector2(.5,.5)},visibleEdgeColor:{value:new p.Vector3(1,1,1)},hiddenEdgeColor:{value:new p.Vector3(1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t}"})},getSeperableBlurMaterial:function(e){return new p.ShaderMaterial({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new p.Vector2(.5,.5)},direction:{value:new p.Vector2(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform sampler2D colorTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv)* weightSum;\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\t\t\t\t}"})},getOverlayMaterial:function(){return new p.ShaderMaterial({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\tuniform sampler2D patternTexture;\t\t\t\tuniform float edgeStrength;\t\t\t\tuniform float edgeGlow;\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t}",depthTest:!1,depthWrite:!1,transparent:!0})}}),p.OutlinePass.BlurDirectionX=new p.Vector2(1,0),p.OutlinePass.BlurDirectionY=new p.Vector2(0,1),p.ShaderPass=function(e,t){p.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof p.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=p.UniformsUtils.clone(e.uniforms),this.material=new p.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new p.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new p.Scene,this.quad=new p.Mesh(new p.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},p.ShaderPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.ShaderPass,render:function(e,t,r,n,i,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.renderToScreen?e.renderPass(this.material):e.renderPass(this.material,t,this.clear)}}),p.SAOPass=function(e,t){p.Pass.call(this),this.scene=e,this.camera=t,this.intensity=.5,this.implicitNormals=!1,this.occlusionSphereWorldRadius=20,this.blurEnabled=!0,this.outputOverride=null,this.depthMIPs=!1,this.downSamplingRatio=2,this.blurKernelSize=1===this.downSamplingRatio?8:6,this.edgeSharpness=1,void 0===p.SAOShader&&console.error("THREE.SAOPass relies on THREE.SAOShader"),void 0===p.CopyShader&&console.error("THREE.SAOPass relies on THREE.CopyShader"),this.depthMinifyMaterial=new p.ShaderMaterial(p.SAODepthMinifyShader),this.depthMinifyMaterial.uniforms=p.UniformsUtils.clone(this.depthMinifyMaterial.uniforms),this.depthMinifyMaterial.defines=(0,c.default)({},this.depthMinifyMaterial.defines),this.depthMinifyMaterial.blending=p.NoBlending,this.saoMaterial=new p.ShaderMaterial(p.SAOShader),this.saoMaterial.uniforms=p.UniformsUtils.clone(this.saoMaterial.uniforms),this.saoMaterial.defines=(0,c.default)({},this.saoMaterial.defines),this.saoMaterial.defines.DIFFUSE_TEXTURE=0,this.saoMaterial.defines.NORMAL_TEXTURE=this.implicitNormals?0:1,this.saoMaterial.defines.MODE=2,this.bilateralFilterMaterial=new p.ShaderMaterial(p.SAOBilaterialFilterShader),this.bilateralFilterMaterial.uniforms=p.UniformsUtils.clone(this.bilateralFilterMaterial.uniforms),this.bilateralFilterMaterial.defines=(0,c.default)({},this.bilateralFilterMaterial.defines),this.bilateralFilterMaterial.blending=p.NoBlending,this.bilateralFilterMaterial.premultipliedAlpha=!0,this.bilateralUpsamplerMaterial=this.getBilateralUpsamplerMaterial(),this.copyMaterial=new p.ShaderMaterial(p.CopyShader),this.copyMaterial.uniforms=p.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.uniforms.opacity.value=1,this.copyMaterial.blending=p.NoBlending,this.copyMaterial.premultipliedAlpha=!0,this.copyMaterial.transparent=!0,this.copyMaterial.depthTest=!1,this.copyMaterial.depthWrite=!1},p.SAOPass.prototype={dispose:function(){this.saoRenderTarget&&(this.saoRenderTarget.dispose(),this.saoRenderTarget=null),this.blurIntermediateRenderTarget&&(this.blurIntermediateRenderTarget.dispose(),this.blurIntermediateRenderTarget=null),this.depthRenderTarget&&(this.depthRenderTarget.dispose(),this.depthRenderTarget=null),this.depth1RenderTarget&&(this.depth1RenderTarget.dispose(),this.depth1RenderTarget=null),this.depth2RenderTarget&&(this.depth2RenderTarget.dispose(),this.depth2RenderTarget=null),this.depth3RenderTarget&&(this.depth3RenderTarget.dispose(),this.depth3RenderTarget=null),this.normalRenderTarget&&(this.normalRenderTarget.dispose(),this.normalRenderTarget=null),this.normalRenderTargetFullRes&&(this.normalRenderTargetFullRes.dispose(),this.normalRenderTargetFullRes=null),this.depthRenderTargetFullRes&&(this.depthRenderTargetFullRes.dispose(),this.depthRenderTargetFullRes=null),this.saoRenderTargetFullRes&&(this.saoRenderTargetFullRes.dispose(),this.saoRenderTargetFullRes=null)},setSize:function(e,t){this.saoRenderTargetFullRes&&this.saoRenderTargetFullRes.setSize(e,t),this.depthRenderTargetFullRes&&this.depthRenderTargetFullRes.setSize(e,t),this.normalRenderTargetFullRes&&this.normalRenderTargetFullRes.setSize(e,t),e=Math.ceil(e/this.downSamplingRatio),t=Math.ceil(t/this.downSamplingRatio),this.saoRenderTarget&&this.saoRenderTarget.setSize(e,t),this.blurIntermediateRenderTarget&&this.blurIntermediateRenderTarget.setSize(e,t),this.depthRenderTarget&&this.depthRenderTarget.setSize(e,t),this.depth1RenderTarget&&this.depth1RenderTarget.setSize(Math.ceil(e/2),Math.ceil(t/2)),this.depth2RenderTarget&&this.depth2RenderTarget.setSize(Math.ceil(e/4),Math.ceil(t/4)),this.depth3RenderTarget&&this.depth3RenderTarget.setSize(Math.ceil(e/8),Math.ceil(t/8)),this.normalRenderTarget&&this.normalRenderTarget.setSize(e,t),this.saoMaterial.uniforms.size.value.set(e,t),this.bilateralFilterMaterial.uniforms.size.value.set(e,t)},updateParameters:function(e){var t=1/(2*Math.tan(p.Math.DEG2RAD*e.fov*.5)),r=new p.Vector2(t/e.aspect,t);this.saoMaterial.uniforms.worldToScreenRatio.value=r,this.saoMaterial.uniforms.intensity.value=this.intensity,this.saoMaterial.uniforms.occlusionSphereWorldRadius.value=this.occlusionSphereWorldRadius,this.depthMinifyMaterial.uniforms.cameraNear.value=e.near,this.depthMinifyMaterial.uniforms.cameraFar.value=e.far,this.saoMaterial.uniforms.cameraNear.value=e.near,this.saoMaterial.uniforms.cameraFar.value=e.far,this.saoMaterial.uniforms.cameraProjectionMatrix.value=e.projectionMatrix,this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(e.projectionMatrix),this.bilateralFilterMaterial.uniforms.cameraNear.value=e.near,this.bilateralFilterMaterial.uniforms.cameraFar.value=e.far},render:function(e,t,r,n,i,a){var o=a||this.camera,s=r.width,l=r.height;s=Math.ceil(s/this.downSamplingRatio),l=Math.ceil(l/this.downSamplingRatio);var u=r.depthBuffer&&r.depthTexture?r.depthTexture:null;this.saoRenderTarget||(this.saoRenderTarget=new p.WebGLRenderTarget(s,l,{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.saoRenderTargetFullRes=new p.WebGLRenderTarget(r.width,r.height,{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.blurIntermediateRenderTarget=new p.WebGLRenderTarget(s,l,{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.depth1RenderTarget=new p.WebGLRenderTarget(Math.ceil(s/2),Math.ceil(l/2),{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.depth2RenderTarget=new p.WebGLRenderTarget(Math.ceil(s/4),Math.ceil(l/4),{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.depth3RenderTarget=new p.WebGLRenderTarget(Math.ceil(s/8),Math.ceil(l/8),{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.normalRenderTarget=new p.WebGLRenderTarget(s,l,{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.normalRenderTargetFullRes=new p.WebGLRenderTarget(r.width,r.height,{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat})),u||this.depthRenderTarget||(this.depthRenderTarget=new p.WebGLRenderTarget(s,l,{minFilter:p.NearestFilter,magFilter:p.NearestFilter,format:p.RGBAFormat}),this.depthRenderTargetFullRes=new p.WebGLRenderTarget(r.width,r.height,{minFilter:p.NearestFilter,magFilter:p.NearestFilter,format:p.RGBAFormat}));var c=function(e,t){return!e.isPlanarShadow&&!t.transparent};this.updateParameters(o);var f=e.getClearColor().getHex(),h=e.getClearAlpha(),d=e.autoClear;if(e.autoClear=!1,this.renderToScreen||(this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=p.NoBlending,e.renderPass(this.copyMaterial,t,!0)),u)u.depthPacking=p.BasicDepthPacking;else{var m=e.getClearColor().getHex(),v=e.getClearAlpha();if(e.setClearColor(16777215,1),o.view){var g=o.view.offsetX,y=o.view.offsetY;o.setViewOffset(s,l,0,0,s,l)}p.MaterialChanger.renderPassDepth(e,this.scene,o,this.depthRenderTarget,c,{depthPacking:p.RGBADepthPacking}),e.setClearColor(16777215,1),1!==this.downSamplingRatio&&(p.MaterialChanger.renderPassDepth(e,this.scene,o,this.depthRenderTarget,c,{depthPacking:p.RGBADepthPacking}),e.setClearColor(m,v)),(u=this.depthRenderTarget.texture).depthPacking=p.RGBADepthPacking,o.view&&o.setViewOffset(s,l,g,y,s,l)}if(this.depthMIPs&&(this.depthMinifyMaterial.uniforms.tDepth.value=u,this.depthMinifyMaterial.uniforms.size.value.set(s,l),e.renderPass(this.depthMinifyMaterial,this.depth1RenderTarget,!0),this.depthMinifyMaterial.uniforms.tDepth.value=this.depth1RenderTarget.texture,this.depthMinifyMaterial.uniforms.size.value.set(Math.ceil(s/2),Math.ceil(l/2)),e.renderPass(this.depthMinifyMaterial,this.depth2RenderTarget,!0),this.depthMinifyMaterial.uniforms.tDepth.value=this.depth2RenderTarget.texture,this.depthMinifyMaterial.uniforms.size.value.set(Math.ceil(s/4),Math.ceil(l/4)),e.renderPass(this.depthMinifyMaterial,this.depth3RenderTarget,!0)),"depth"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=u,this.copyMaterial.blending=p.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);if("depth1"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.depth1RenderTarget.texture,this.copyMaterial.blending=p.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);if("depth2"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.depth2RenderTarget.texture,this.copyMaterial.blending=p.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);if("depth3"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.depth3RenderTarget.texture,this.copyMaterial.blending=p.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);if(!this.implicitNormals){if(o.view){g=o.view.offsetX,y=o.view.offsetY;o.setViewOffset(s,l,0,0,s,l)}m=e.getClearColor().getHex(),v=e.getClearAlpha();e.setClearColor(new p.Color(.5,.5,1),1),p.MaterialChanger.renderPassNormal(e,this.scene,o,this.normalRenderTarget,c),1!==this.downSamplingRatio&&(e.setClearColor(new p.Color(.5,.5,1),1),p.MaterialChanger.renderPassNormal(e,this.scene,o,this.normalRenderTarget,c)),e.setClearColor(m,v),o.view&&o.setViewOffset(s,l,g,y,s,l)}if("normal"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=p.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:this.renderToScreen?null:t,!0);this.saoMaterial.defines.DEPTH_PACKING=u.depthPacking,this.saoMaterial.defines.DEPTH_MIPS=this.depthMIPs?1:0,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.tDepth.value=u,this.depthMIPs&&(this.saoMaterial.uniforms.tDepth1.value=this.depth1RenderTarget.texture,this.saoMaterial.uniforms.tDepth2.value=this.depth2RenderTarget.texture,this.saoMaterial.uniforms.tDepth3.value=this.depth3RenderTarget.texture);m=e.getClearColor().getHex(),v=e.getClearAlpha();if(e.setClearColor(16777215,1),e.renderPass(this.saoMaterial,this.saoRenderTarget,!0),this.blurEnabled&&(this.bilateralFilterMaterial.defines.KERNEL_SAMPLE_RADIUS=this.blurKernelSize,this.bilateralFilterMaterial.uniforms.tAODepth.value=this.saoRenderTarget.texture,this.bilateralFilterMaterial.uniforms.tAONormal.value=this.normalRenderTarget.texture,this.bilateralFilterMaterial.uniforms.kernelDirection.value=new p.Vector2(1,0),this.bilateralFilterMaterial.uniforms.packOutput.value=1,this.bilateralFilterMaterial.uniforms.edgeSharpness.value=this.edgeSharpness,e.renderPass(this.bilateralFilterMaterial,this.blurIntermediateRenderTarget,!0),this.bilateralFilterMaterial.uniforms.tAODepth.value=this.blurIntermediateRenderTarget.texture,this.bilateralFilterMaterial.uniforms.kernelDirection.value=new p.Vector2(0,1),this.bilateralFilterMaterial.uniforms.packOutput.value=0,e.renderPass(this.bilateralFilterMaterial,this.saoRenderTarget,!0)),this.downSamplingRatio>1&&(this.bilateralUpsamplerMaterial.uniforms.inputTexture.value=this.saoRenderTarget.texture,this.bilateralUpsamplerMaterial.uniforms.NormalTextureFullRes.value=this.normalRenderTargetFullRes.texture,this.bilateralUpsamplerMaterial.uniforms.DepthTextureFullRes.value=this.depthRenderTargetFullRes.texture,this.bilateralUpsamplerMaterial.uniforms.NormalTextureHalfRes.value=this.normalRenderTarget.texture,this.bilateralUpsamplerMaterial.uniforms.DepthTextureHalfRes.value=this.depthRenderTarget.texture,this.bilateralUpsamplerMaterial.uniforms.texSize.value=new p.Vector2(this.saoRenderTarget.width,this.saoRenderTarget.height),this.bilateralUpsamplerMaterial.uniforms.cameraNearFar.value=new p.Vector2(o.near,o.far),e.renderPass(this.bilateralUpsamplerMaterial,this.saoRenderTargetFullRes,!0)),e.setClearColor(m,v),"sao"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.downSamplingRatio>1?this.saoRenderTargetFullRes.texture:this.saoRenderTarget.texture,this.copyMaterial.blending=p.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);e.autoClear=!1,this.copyMaterial.uniforms.tDiffuse.value=this.downSamplingRatio>1?this.saoRenderTargetFullRes.texture:this.saoRenderTarget.texture,this.copyMaterial.blending=p.MultiplyBlending,this.copyMaterial.premultipliedAlpha=!0,e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!1),e.autoClear=d,e.setClearColor(f),e.setClearAlpha(h)},getBilateralUpsamplerMaterial:function(e){return new p.ShaderMaterial({uniforms:{inputTexture:{value:null},NormalTextureFullRes:{value:null},DepthTextureFullRes:{value:null},NormalTextureHalfRes:{value:null},DepthTextureHalfRes:{value:null},texSize:{value:new p.Vector2(.5,.5)},cameraNearFar:{value:new p.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D inputTexture;\n\t\t\t\tuniform sampler2D NormalTextureFullRes;\n\t\t\t\tuniform sampler2D DepthTextureFullRes;\n\t\t\t\tuniform sampler2D NormalTextureHalfRes;\n\t\t\t\tuniform sampler2D DepthTextureHalfRes;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\t\t\t\t\tvoid main()\t\t\t\t{\t\t\t\t\tvec2 uvOffsets[4];\t\t\t\t\tuvOffsets[0] = vUv + vec2(0.0, 1.0)/texSize;\t\t\t\t\tuvOffsets[1] = vUv + vec2(1.0, 0.0)/texSize;\t\t\t\t\tuvOffsets[2] = vUv + vec2(-1.0, 0.0)/texSize;\t\t\t\t\tuvOffsets[3] = vUv + vec2(0.0, -1.0)/texSize;\t\t\t\t\t\t\t\t\t\tfloat depth_weights[4];\t\t\t\t\tfloat depth_hires = unpackRGBAToDepth(texture2D(DepthTextureFullRes, vUv));\t\t\t\t\tdepth_hires = -perspectiveDepthToViewZ(depth_hires, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tif(depth_hires == 1.0)\t\t\t\t\t\tdiscard;\t\t\t\t\tfloat depth_coarse1 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[0]));\t\t\t\t\tdepth_coarse1 = -perspectiveDepthToViewZ(depth_coarse1, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[0] = 1.0 / (0.001 + abs(depth_hires-depth_coarse1));\t\t\t\t\tfloat depth_coarse2 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[1]));\t\t\t\t\tdepth_coarse2 = -perspectiveDepthToViewZ(depth_coarse2, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[1] = 1.0 / (0.001 + abs(depth_hires-depth_coarse2));\t\t\t\t\tfloat depth_coarse3 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[2]));\t\t\t\t\tdepth_coarse3 = -perspectiveDepthToViewZ(depth_coarse3, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[2] = 1.0 / (0.001 + abs(depth_hires-depth_coarse3));\t\t\t\t\tfloat depth_coarse4 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[3]));\t\t\t\t\tdepth_coarse4 = -perspectiveDepthToViewZ(depth_coarse4, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[3] = 1.0 / (0.001 + abs(depth_hires-depth_coarse4));\t\t\t\t\t\t\t\t\t\tfloat norm_weights[4];\t\t\t\t\tvec3 norm_fullRes = unpackRGBAToNormal(texture2D(NormalTextureFullRes, vUv));\t\t\t\t\tvec3 norm_coarse1 = unpackRGBAToNormal(texture2D(NormalTextureHalfRes, uvOffsets[0]));\t\t\t\t\tnorm_weights[0] = pow(abs(dot(norm_coarse1, norm_fullRes)), 32.0);\t\t\t\t\tvec3 norm_coarse2 = unpackRGBAToNormal(texture2D(NormalTextureHalfRes, uvOffsets[1]));\t\t\t\t\tnorm_weights[1] = pow(abs(dot(norm_coarse2, norm_fullRes)), 32.0);\t\t\t\t\tvec3 norm_coarse3 = unpackRGBAToNormal(texture2D(NormalTextureHalfRes, uvOffsets[2]));\t\t\t\t\tnorm_weights[2] = pow(abs(dot(norm_coarse3, norm_fullRes)), 32.0);\t\t\t\t\tvec3 norm_coarse4 = unpackRGBAToNormal(texture2D(NormalTextureHalfRes, uvOffsets[3]));\t\t\t\t\tnorm_weights[3] = pow(abs(dot(norm_coarse4, norm_fullRes)), 32.0);\t\t\t\t\t\t\t\t\t\tvec3 colorOut = vec3(0.0);\t\t\t\t\tfloat weight_sum = 0.0;\t\t\t\t\tfloat weight = norm_weights[0] * depth_weights[0];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[0]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t  weight = norm_weights[1] * depth_weights[1];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[1]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t  weight = norm_weights[2] * depth_weights[2];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[2]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t  weight = norm_weights[3] * depth_weights[3];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[3]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t\tcolorOut /= weight_sum;\t\t\t\t\tgl_FragColor = vec4(colorOut, 1.0);\t\t\t\t}"})}},p.SAO2Pass=function(e,t){p.Pass.call(this),this.scene=e,this.camera=t,this.intensity=.15,this.occlusionSphereWorldRadius=.07,this.blurEnabled=!0,this.outputOverride=null,this.depthMIPs=!0,this.downSamplingRatio=1,this.blurKernelSize=3,this.edgeSharpness=1.3,this.bias=.001,void 0===p.SAO2Shader&&console.error("THREE.SAO2Pass relies on THREE.SAO2Shader"),void 0===p.CopyShader&&console.error("THREE.SAO2Pass relies on THREE.CopyShader"),this.depthMinifyMaterial=new p.ShaderMaterial(p.SAO2DepthMinifyShader),this.depthMinifyMaterial.uniforms=p.UniformsUtils.clone(this.depthMinifyMaterial.uniforms),this.depthMinifyMaterial.defines=(0,c.default)({},this.depthMinifyMaterial.defines),this.depthMinifyMaterial.blending=p.NoBlending,this.saoMaterial=new p.ShaderMaterial(p.SAO2Shader),this.saoMaterial.uniforms=p.UniformsUtils.clone(this.saoMaterial.uniforms),this.saoMaterial.defines=(0,c.default)({},this.saoMaterial.defines),this.saoMaterial.defines.DIFFUSE_TEXTURE=0,this.saoMaterial.defines.MODE=2,this.bilateralFilterMaterial=new p.ShaderMaterial(p.SAO2BilaterialFilterShader),this.bilateralFilterMaterial.uniforms=p.UniformsUtils.clone(this.bilateralFilterMaterial.uniforms),this.bilateralFilterMaterial.defines=(0,c.default)({},this.bilateralFilterMaterial.defines),this.bilateralFilterMaterial.blending=p.NoBlending,this.bilateralFilterMaterial.premultipliedAlpha=!0,this.copyMaterial=new p.ShaderMaterial(p.CopyShader),this.copyMaterial.uniforms=p.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.uniforms.opacity.value=1,this.copyMaterial.blending=p.NoBlending,this.copyMaterial.premultipliedAlpha=!0,this.copyMaterial.transparent=!0,this.copyMaterial.depthTest=!1,this.copyMaterial.depthWrite=!1,this.randomSeed=0,this.applySao=!0,this.depthTexture=null,this.normalTexture=null},p.SAO2Pass.prototype={dispose:function(){this.saoRenderTarget&&(this.saoRenderTarget.dispose(),this.saoRenderTarget=null),this.blurIntermediateRenderTarget&&(this.blurIntermediateRenderTarget.dispose(),this.blurIntermediateRenderTarget=null),this.depth1RenderTarget&&(this.depth1RenderTarget.dispose(),this.depth1RenderTarget=null),this.depth2RenderTarget&&(this.depth2RenderTarget.dispose(),this.depth2RenderTarget=null),this.depth3RenderTarget&&(this.depth3RenderTarget.dispose(),this.depth3RenderTarget=null),this.depth4RenderTarget&&(this.depth4RenderTarget.dispose(),this.depth4RenderTarget=null),this.depth5RenderTarget&&(this.depth5RenderTarget.dispose(),this.depth5RenderTarget=null)},setSize:function(e,t){this.saoRenderTarget&&this.saoRenderTarget.setSize(e,t),this.blurIntermediateRenderTarget&&this.blurIntermediateRenderTarget.setSize(e,t),this.depth1RenderTarget&&this.depth1RenderTarget.setSize(Math.ceil(e/4),Math.ceil(t/4)),this.depth2RenderTarget&&this.depth2RenderTarget.setSize(Math.ceil(e/8),Math.ceil(t/8)),this.depth3RenderTarget&&this.depth3RenderTarget.setSize(Math.ceil(e/16),Math.ceil(t/16)),this.depth4RenderTarget&&this.depth4RenderTarget.setSize(Math.ceil(e/32),Math.ceil(t/32)),this.depth5RenderTarget&&this.depth5RenderTarget.setSize(Math.ceil(e/64),Math.ceil(t/64)),this.saoMaterial.uniforms.size.value.set(e,t),this.bilateralFilterMaterial.uniforms.size.value.set(e,t)},updateParameters:function(e,t){var r=1/(2*Math.tan(p.Math.DEG2RAD*e.fov*.5));new p.Vector2(r/e.aspect,r);this.saoMaterial.uniforms.randomSeed.value=Math.random(),this.saoMaterial.uniforms.worldToScreenRatio.value=new p.Vector2(t*r,t*r),this.saoMaterial.uniforms.intensity.value=this.intensity,this.saoMaterial.uniforms.bias.value=this.bias,this.saoMaterial.uniforms.occlusionSphereWorldRadius.value=this.occlusionSphereWorldRadius,this.depthMinifyMaterial.uniforms.cameraNear.value=e.near,this.depthMinifyMaterial.uniforms.cameraFar.value=e.far,this.saoMaterial.uniforms.cameraNear.value=e.near,this.saoMaterial.uniforms.cameraFar.value=e.far,this.saoMaterial.uniforms.cameraProjectionMatrix.value=e.projectionMatrix,this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(e.projectionMatrix),this.bilateralFilterMaterial.uniforms.cameraNear.value=e.near,this.bilateralFilterMaterial.uniforms.cameraFar.value=e.far},render:function(e,t,r,n,i,a){var o=a||this.camera,s=r.width,l=r.height;this.saoRenderTarget||(this.saoRenderTarget=new p.WebGLRenderTarget(s,l,{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.blurIntermediateRenderTarget=new p.WebGLRenderTarget(s,l,{minFilter:p.NearestFilter,magFilter:p.NearestFilter,format:p.RGBAFormat}),this.depth1RenderTarget=new p.WebGLRenderTarget(Math.ceil(s/4),Math.ceil(l/4),{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.depth2RenderTarget=new p.WebGLRenderTarget(Math.ceil(s/8),Math.ceil(l/8),{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.depth3RenderTarget=new p.WebGLRenderTarget(Math.ceil(s/16),Math.ceil(l/16),{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.depth4RenderTarget=new p.WebGLRenderTarget(Math.ceil(s/32),Math.ceil(l/32),{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat}),this.depth5RenderTarget=new p.WebGLRenderTarget(Math.ceil(s/64),Math.ceil(l/64),{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat})),this.updateParameters(o,l);var u=e.getClearColor().getHex(),c=e.getClearAlpha(),f=e.autoClear;e.autoClear=!1,this.renderToScreen||(this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=p.NoBlending,e.renderPass(this.copyMaterial,t,!0)),this.normalTexture||console.error("SAOPass.normalTexture is required!"),this.depthTexture||console.error("SAOPass.depthTexture is required!"),this.depthMIPs=this.depthMIPs&&this.depthTexture.depthPacking!==p.BasicDepthPacking,this.depthMIPs&&this.depthTexture.depthPacking!==p.BasicDepthPacking&&(this.depthMinifyMaterial.uniforms.tDepth.value=this.depthTexture,this.depthMinifyMaterial.uniforms.size.value.set(s,l),e.renderPass(this.depthMinifyMaterial,this.depth1RenderTarget,!0),this.depthMinifyMaterial.uniforms.tDepth.value=this.depth1RenderTarget.texture,this.depthMinifyMaterial.uniforms.size.value.set(this.depth1RenderTarget.width,this.depth1RenderTarget.height),e.renderPass(this.depthMinifyMaterial,this.depth2RenderTarget,!0),this.depthMinifyMaterial.uniforms.tDepth.value=this.depth2RenderTarget.texture,this.depthMinifyMaterial.uniforms.size.value.set(this.depth2RenderTarget.width,this.depth2RenderTarget.height),e.renderPass(this.depthMinifyMaterial,this.depth3RenderTarget,!0),this.depthMinifyMaterial.uniforms.tDepth.value=this.depth3RenderTarget.texture,this.depthMinifyMaterial.uniforms.size.value.set(this.depth3RenderTarget.width,this.depth3RenderTarget.height),e.renderPass(this.depthMinifyMaterial,this.depth4RenderTarget,!0),this.depthMinifyMaterial.uniforms.tDepth.value=this.depth4RenderTarget.texture,this.depthMinifyMaterial.uniforms.size.value.set(this.depth4RenderTarget.width,this.depth4RenderTarget.height),e.renderPass(this.depthMinifyMaterial,this.depth5RenderTarget,!0)),this.saoMaterial.defines.DEPTH_PACKING=this.depthTexture.depthPacking,this.saoMaterial.defines.DEPTH_MIPS=this.depthMIPs?1:0,this.saoMaterial.uniforms.tNormal.value=this.normalTexture,this.saoMaterial.uniforms.tDepth.value=this.depthTexture,this.depthMIPs&&(this.saoMaterial.uniforms.tDepth1.value=this.depth1RenderTarget.texture,this.saoMaterial.uniforms.tDepth2.value=this.depth2RenderTarget.texture,this.saoMaterial.uniforms.tDepth3.value=this.depth3RenderTarget.texture,this.saoMaterial.uniforms.tDepth4.value=this.depth4RenderTarget.texture,this.saoMaterial.uniforms.tDepth5.value=this.depth5RenderTarget.texture);var h=e.getClearColor().getHex(),d=e.getClearAlpha();if(e.setClearColor(16777215,1),e.renderPass(this.saoMaterial,this.saoRenderTarget,!0),this.blurEnabled){var m=this.randomSeed%2==0;this.bilateralFilterMaterial.defines.KERNEL_SAMPLE_RADIUS=this.blurKernelSize,this.bilateralFilterMaterial.uniforms.tAODepth.value=this.saoRenderTarget.texture,this.bilateralFilterMaterial.uniforms.tAONormal.value=this.normalTexture,this.bilateralFilterMaterial.uniforms.kernelDirection.value=m?new p.Vector2(1,0):new p.Vector2(0,1),this.bilateralFilterMaterial.uniforms.packOutput.value=1,this.bilateralFilterMaterial.uniforms.edgeSharpness.value=this.edgeSharpness,e.renderPass(this.bilateralFilterMaterial,this.blurIntermediateRenderTarget,!0),this.bilateralFilterMaterial.uniforms.tAODepth.value=this.blurIntermediateRenderTarget.texture,this.bilateralFilterMaterial.uniforms.kernelDirection.value=m?new p.Vector2(0,1):new p.Vector2(1,0),this.bilateralFilterMaterial.uniforms.packOutput.value=0,e.renderPass(this.bilateralFilterMaterial,this.saoRenderTarget,!0)}this.applySao&&(e.setClearColor(h,d),e.autoClear=!1,this.copyMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.copyMaterial.blending=p.MultiplyBlending,this.copyMaterial.premultipliedAlpha=!0,e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!1)),e.autoClear=f,e.setClearColor(u),e.setClearAlpha(c)}},p.SSAARenderPass=function(e,t,r,n){p.Pass.call(this),this.scene=e,this.camera=t,this.sampleLevel=4,this.cameraJitter=new p.CameraJitter,this.unbiased=!0,this.needsSwap=!1,this.clearColor=void 0!==r?r:0,this.clearAlpha=void 0!==n?n:0,void 0===p.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader"),this.overMaterial=new p.ShaderMaterial(p.CopyShader),this.overMaterial.uniforms=p.UniformsUtils.clone(this.overMaterial.uniforms),this.overMaterial.blending=p.NormalBlending,this.overMaterial.premultipliedAlpha=!0,this.overMaterial.transparent=!0,this.overMaterial.depthTest=!1,this.overMaterial.depthWrite=!1,this.addMaterial=new p.ShaderMaterial(p.CopyShader),this.addMaterial.uniforms=p.UniformsUtils.clone(this.addMaterial.uniforms),this.addMaterial.blending=p.AdditiveBlending,this.addMaterial.premultipliedAlpha=!0,this.addMaterial.transparent=!0,this.addMaterial.depthTest=!1,this.addMaterial.depthWrite=!1,this.camera2=new p.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new p.Scene,this.quad2=new p.Mesh(new p.PlaneGeometry(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2),this.visibilityFunc=function(e,t){return!t.isGemMaterial&&!t.transparent}},p.SSAARenderPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.SSAARenderPass,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)},render:function(e,t,r,n,i,a){this.sampleRenderTarget||(this.sampleRenderTarget=new p.WebGLRenderTarget(r.width,r.height,{minFilter:p.NearestFilter,magFilter:p.NearestFilter,format:p.RGBAFormat,type:p.UnsignedByteType,name:"SSAARenderPass.sample"}));var o=a||this.camera,s=e.autoClear;e.autoClear=!1;var l=e.getClearColor().getHex(),u=e.getClearAlpha();this.cameraJitter.setJitterLevel(this.sampleLevel);var c=this.cameraJitter.numJitterSamples,f=1/c;this.addMaterial.uniforms.tDiffuse.value=this.sampleRenderTarget.texture;var h=r.width,d=r.height;e.setClearColor(0,0);var m=e.ditherScale;this.unbiased&&(e.ditherScale=c);for(var v=0;v<c;v++){this.cameraJitter.advance(h,d,o);var g=0,y=f;this.unbiased&&c>1&&(g=1/255*((v+.5)/c-.5)),this.addMaterial.uniforms.opacity.value=y,this.addMaterial.uniforms.offset.value=g,e.render(this.scene,o,this.sampleRenderTarget,!0,this.visibilityFunc),e.renderPass(this.addMaterial,t,0===v)}this.cameraJitter.clear(o),e.ditherScale=m,this.overMaterial.uniforms.tDiffuse.value=t.texture,e.setClearColor(this.clearColor,this.clearAlpha),e.renderPass(this.overMaterial,this.renderToScreen?null:r,this.clear),e.autoClear=s,e.setClearColor(l,u)}}),p.SparklePass=function(e,t,r,n){p.Pass.call(this),this.camera=e,this.worldSizeOfSparkle=r,this.sparkleTexture=n,this.sparkleScene=new p.Scene,this.sparkles=[],this.gems={},this.needsSwap=!0,this.noiseTexture=new p.WebGLRenderTarget(256,256,{minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat,name:"Sparkle Noise Texture"});var i=new p.ShaderMaterial(p.NoiseShader);i.uniforms=p.UniformsUtils.clone(i.uniforms),i.blending=p.NoBlending,i.premultipliedAlpha=!0,i.transparent=!0,i.depthTest=!1,i.depthWrite=!1,i.needsUpdate=!0,t.renderPass(i,this.noiseTexture,!0),this.copyMaterial=new p.ShaderMaterial(p.CopyShader),this.copyMaterial.uniforms=p.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.uniforms.opacity.value=1,this.copyMaterial.blending=p.NoBlending,this.copyMaterial.premultipliedAlpha=!0,this.copyMaterial.transparent=!0,this.copyMaterial.depthTest=!1,this.copyMaterial.depthWrite=!1},p.SparklePass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.SparklePass,setSparkleTexture:function(e){this.sparkleTexture=e},setWorldSizeOfSparkles:function(e){this.worldSizeOfSparkle=e},updateScene:function(e){},addGemstone:function(e,t,r){if(this.sparkleTexture&&!this.gems[t.uuid]){var n=[],i=new p.Object3D,a=new p.Sparkle(this.sparkleTexture),o=new p.Vector3,s=new p.Quaternion,l=new p.Vector3;t.matrixWorld.decompose(o,s,l),a.mesh.scale.set(1,1,1).divide(l),a.setScale(this.worldSizeOfSparkle),this.noiseTexture&&(a.material.uniforms.noiseTexture.value=this.noiseTexture.texture);var u=new p.Vector3;if(e instanceof p.BufferGeometry)for(var c=e.attributes.position.array,f=c.length/3-1,h=0;h<r;++h){var d=3*Math.round(Math.random()*f);u.x=c[d],u.y=c[d+1],u.z=c[d+2],(v=a.shallowCopy()).mesh.position.copy(u),v.setIntensity(1),n.push(v),i.add(v.mesh),v.mesh.updateMatrixWorld(!0)}else{var m=e.vertices;for(f=m.length-1,h=0;h<r;++h){var v;u.copy(m[Math.round(Math.random()*f)]),(v=a.shallowCopy()).mesh.position.copy(u),v.setIntensity(1),n.push(v),i.add(v.mesh),v.mesh.updateMatrixWorld(!0)}}this.sparkleScene.add(i),this.gems[t.uuid]={transform:i,originalMesh:t,sparkles:n},this.enabled=!0}},removeGemstone:function(e){this.gems[e.uuid]&&(this.sparkleScene.remove(this.gems[e.uuid].transform),this.gems[e.uuid]=null)},setScreenTexture:function(e){for(var t in this.gems){var r=this.gems[t]&&this.gems[t].sparkles;if(r)for(var n=0;n<r.length;++n)r[n].material.uniforms.screenTexture.value=e}},alignSparklesWithCamera:function(){for(var e in this.gems){var t=this.gems[e];if(t){var r=t&&t.sparkles;if(t.transform.visible=t.originalMesh.visible,t.transform.visible&&r)for(var n=r.length,i=0;i<n;++i)r[i].alignWithCamera(this.camera,t.originalMesh)}}},render:function(e,t,r,n,i,a){var o=a||this.camera;this.alignSparklesWithCamera(),this.setScreenTexture(r.texture),this.copyMaterial.uniforms.tDiffuse.value=r.texture,e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);var s=e.autoClear;e.autoClear=!1,e.render(this.sparkleScene,o,this.renderToScreen?null:t),e.autoClear=s}}),p.TexturePass=function(e,t){p.Pass.call(this),void 0===p.CopyShader&&console.error("THREE.TexturePass relies on THREE.CopyShader");var r=p.CopyShader;this.map=e,this.opacity=void 0!==t?t:1,this.uniforms=p.UniformsUtils.clone(r.uniforms),this.material=new p.ShaderMaterial({uniforms:this.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,depthTest:!1,depthWrite:!1}),this.needsSwap=!1,this.camera=new p.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new p.Scene,this.quad=new p.Mesh(new p.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},p.TexturePass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.TexturePass,render:function(e,t,r,n,i,a){var o=e.autoClear;if(e.autoClear=!1,this.quad.material=this.material,this.uniforms.opacity.value=this.opacity,this.uniforms.tDiffuse.value=this.map,this.material.transparent=this.opacity<1,this.map){var s=e.getSize(),l=this.map.image.width/s.width||1,u=this.map.image.height/s.height||1,c=Math.min(l,u);l*=1/c,u*=1/c,this.quad.scale.set(l,u,1)}e.render(this.scene,this.camera,this.renderToScreen?null:r,this.clear),e.autoClear=o}}),p.TRAAPass=function(e,t,r){p.Pass.call(this),this.scene=e,this.camera=t,this.orthoScene=new p.Scene,this.orthoCamera=new p.OrthographicCamera(-1,1,1,-1,-.01,1e3),this.superSampleTRAAMaterial=new p.ShaderMaterial({defines:{DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{jitterOffset:{value:new p.Vector2(0,0)},currentBeauty:{value:null},previousBeauty:{value:null},transparentBeauty:{value:null},tDepth:{value:null},tVelocity:{value:null},minSampleWeight:{value:1/16},mode:{value:0},cameraNearFar:{value:new p.Vector2},textureSize:{value:new p.Vector2},cameraProjectionMatrix:{value:new p.Matrix4},cameraInverseProjectionMatrix:{value:new p.Matrix4},cameraInverseViewMatrix:{value:new p.Matrix4}},depthWrite:!1,vertexShader:"varying vec2 vUv;      void main() {        vUv = uv;        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );      }",fragmentShader:["#include <common>","varying vec2 vUv;","uniform sampler2D currentBeauty;","uniform sampler2D previousBeauty;","uniform sampler2D transparentBeauty;","uniform sampler2D tDepth;","uniform sampler2D tVelocity;","uniform vec2 textureSize;","uniform mat4 prevProjectionViewMatrix;","uniform mat4 currentProjectionViewMatrix;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform mat4 cameraInverseViewMatrix;","uniform vec2 cameraNearFar;","uniform float minSampleWeight;","uniform int mode;","uniform vec2 jitterOffset;","#define MODE_MOVING 0","#define MODE_STATIC 1","#include <packing>","float getDepth( const in vec2 screenPosition ) {","\t#if DEPTH_PACKING == 1","\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","\t#else","\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","vec3 find_closest_fragment_9tap(const in vec2 uv) { ","const vec3 offset = vec3(1.0, -1.0, 0.0);","vec2 texelSize = 1.0/textureSize; ","vec3 dtl = vec3(-1, 1, getDepth( uv + offset.yx * texelSize) ); ","vec3 dtc = vec3( 0, 1, getDepth( uv + offset.zx * texelSize) );","vec3 dtr = vec3( 1, 1, getDepth( uv + offset.xx * texelSize) );","vec3 dml = vec3(-1, 0, getDepth( uv + offset.yz * texelSize) );","vec3 dmc = vec3( 0, 0, getDepth( uv ) );","vec3 dmr = vec3( 1, 0, getDepth( uv + offset.xz * texelSize) );","vec3 dbl = vec3(-1, -1, getDepth( uv + offset.yy * texelSize) );","vec3 dbc = vec3( 0, -1, getDepth( uv + offset.zy * texelSize) );","vec3 dbr = vec3( 1, -1, getDepth( uv + offset.xy * texelSize) );","vec3 dmin = dtl;","if ( dmin.z > dtc.z ) dmin = dtc;","if ( dmin.z > dtr.z ) dmin = dtr;","if ( dmin.z > dml.z ) dmin = dml;","if ( dmin.z > dmc.z ) dmin = dmc;","if ( dmin.z > dmr.z ) dmin = dmr;","if ( dmin.z > dbl.z ) dmin = dbl;","if ( dmin.z > dbc.z ) dmin = dbc;","if ( dmin.z > dbr.z ) dmin = dbr;","return vec3(uv + texelSize.xy * dmin.xy, dmin.z);","}","vec3 find_closest_fragment_5tap(const in vec2 uv) ","{ ","vec2 offset = vec2(1.0, -1.0);","vec2 texelSize = 1.0/textureSize; ","vec3 dtl = vec3(-1, 1, getDepth( uv + offset.yx * texelSize ) ); ","vec3 dtr = vec3( 1, 1, getDepth( uv + offset.xx * texelSize ) );","vec3 dmc = vec3( 0, 0, getDepth( uv) );","vec3 dbl = vec3(-1, -1, getDepth( uv + offset.yy * texelSize ) );","vec3 dbr = vec3( 1, -1, getDepth( uv + offset.xy * texelSize ) );","vec3 dmin = dtl;","if ( dmin.z > dtr.z ) dmin = dtr;","if ( dmin.z > dmc.z ) dmin = dmc;","if ( dmin.z > dbl.z ) dmin = dbl;","if ( dmin.z > dbr.z ) dmin = dbr;","return vec3(uv + texelSize * dmin.xy, dmin.z);","}","vec4 clip_aabb(const in vec4 aabb_min, const in vec4 aabb_max, vec4 p )","{ ","const float FLT_EPS = 1e-8;","vec4 p_clip = 0.5 * (aabb_max + aabb_min); ","vec4 e_clip = 0.5 * (aabb_max - aabb_min) + FLT_EPS; ","vec4 v_clip = p - p_clip;","vec4 v_unit = abs(v_clip / e_clip);","float mv_unit = max(v_unit.x, max(v_unit.y, v_unit.z));","float a = clamp(p.a, aabb_min.a, aabb_max.a);","if (mv_unit > 1.0) ","return vec4((p_clip + v_clip / mv_unit).rgb, a);","else ","return vec4(p.rgb, a);","}","bool calcMinMax(vec4[9] colors, vec4[9] transp, int count, vec4 truth, inout vec4 cMin, inout vec4 cMax) {","cMin = vec4(2,2,2,2);","cMax = vec4(-2,-2,-2,-2);","bool foundColor = false;","bool foundAlpha = false;","bool centerTransparent = (truth.a > EPSILON);","for(int i = 0; i < 9; i++) {","if(i >= count) break;","bool pixelTransparent = (transp[i].a > EPSILON);","if(centerTransparent == pixelTransparent) {","vec4 min_ = min(cMin, colors[i]);","vec4 max_ = max(cMax, colors[i]);","foundAlpha = true;","if(colors[i].a > .5) {","cMin = min_;","cMax = max_;","foundColor = true;","} else {","cMin.a = min_.a;","cMax.a = max_.a;","}","}","}","return foundColor;","}","void premul(inout vec4 c) {","c.rgb *= c.a;","}","vec2 getScreenSpaceVelocity( vec2 uv ) {","vec4 value = texture2D(tVelocity, uv);","if( value.x == 0.0 && value.y == 0.0 && value.z == 0.0 && value.w == 0.0 ) {","return vec2( 0.0, 0.0 );","}","float vx = unpackRGToDepth(value.xy);","float vy = unpackRGToDepth(value.zw);","return vec2(2.*vx - 1., 2.*vy - 1.);","}","vec4 calculateTAA(const in vec2 uv, const in vec2 screenSpaceVelocity) {","float _FeedbackMin = 1.0 - 2.0 * minSampleWeight;","float _FeedbackMax = 1.0 - minSampleWeight;","vec2 texelSize = 1./textureSize;","vec4 currentColor = texture2D(currentBeauty, uv - 0.*jitterOffset * texelSize);","premul(currentColor);","vec2 lookBackUV = uv - screenSpaceVelocity;","vec4 previousColor = texture2D(previousBeauty, lookBackUV);","const vec3 offset = vec3(1., -1., 0.);","vec4 ctl = texture2D(currentBeauty, uv + offset.yx * texelSize);","vec4 ctc = texture2D(currentBeauty, uv + offset.zx * texelSize);","vec4 ctr = texture2D(currentBeauty, uv + offset.xx * texelSize);","vec4 cml = texture2D(currentBeauty, uv + offset.yz * texelSize);","vec4 cmc = texture2D(currentBeauty, uv);","vec4 cmr = texture2D(currentBeauty, uv + offset.xz * texelSize);","vec4 cbl = texture2D(currentBeauty, uv + offset.yy * texelSize);","vec4 cbc = texture2D(currentBeauty, uv + offset.zy * texelSize);","vec4 cbr = texture2D(currentBeauty, uv + offset.xy * texelSize);","vec4 ttl = texture2D(transparentBeauty, uv + offset.yx * texelSize);","vec4 ttc = texture2D(transparentBeauty, uv + offset.zx * texelSize);","vec4 ttr = texture2D(transparentBeauty, uv + offset.xx * texelSize);","vec4 tml = texture2D(transparentBeauty, uv + offset.yz * texelSize);","vec4 tmc = texture2D(transparentBeauty, uv);","vec4 tmr = texture2D(transparentBeauty, uv + offset.xz * texelSize);","vec4 tbl = texture2D(transparentBeauty, uv + offset.yy * texelSize);","vec4 tbc = texture2D(transparentBeauty, uv + offset.zy * texelSize);","vec4 tbr = texture2D(transparentBeauty, uv + offset.xy * texelSize);","vec4 cmin, cmax, cmin5, cmax5;","vec4 cneighbors[9];","cneighbors[0] = cmc;","cneighbors[1] = ctc;","cneighbors[2] = cbc;","cneighbors[3] = cml;","cneighbors[4] = cmr;","cneighbors[5] = ctl;","cneighbors[6] = ctr;","cneighbors[7] = cbl;","cneighbors[8] = cbr;","vec4 tneighbors[9];","tneighbors[0] = tmc;","tneighbors[1] = ttc;","tneighbors[2] = tbc;","tneighbors[3] = tml;","tneighbors[4] = tmr;","tneighbors[5] = ttl;","tneighbors[6] = ttr;","tneighbors[7] = tbl;","tneighbors[8] = tbr;","if(!calcMinMax(cneighbors, tneighbors, 9, tmc, cmin, cmax))","return currentColor;","if(calcMinMax(cneighbors, tneighbors, 5, tmc, cmin5, cmax5)) {","cmin = (cmin + cmin5) * .5;","cmax = (cmax + cmax5) * .5;","}","vec4 clampedPreviousColor =clip_aabb(cmin, cmax, previousColor);","premul(clampedPreviousColor);","float lum0 = linearToRelativeLuminance(currentColor.rgb);","float lum1 = linearToRelativeLuminance(clampedPreviousColor.rgb);","float unbiased_diff = abs(lum0 - lum1) / max(lum0, max(lum1, 0.2));","float unbiased_weight = 1.0 - unbiased_diff;","float unbiased_weight_sqr = unbiased_weight * unbiased_weight;","float k_feedback = mix(_FeedbackMin, _FeedbackMax, unbiased_weight_sqr);","vec2 previousVelocity = getScreenSpaceVelocity(lookBackUV);","k_feedback *= 1.0 - saturate( length( ( screenSpaceVelocity - previousVelocity ) / texelSize ) / 10.0 );","if( mode == MODE_MOVING ) {","return mix(currentColor, clampedPreviousColor, k_feedback);","}","else if( mode == MODE_STATIC ) {","return mix(currentColor, previousColor, 1.0 - pow( minSampleWeight, 0.75 ) );","}","else { // mode == MODE_RESET","return currentColor;","}","}","void main() {","vec2 screenSpaceVelocity = getScreenSpaceVelocity( vUv );","gl_FragColor = calculateTAA(vUv, screenSpaceVelocity);","}"].join("\n")}),this.currentMaterial=this.superSampleTRAAMaterial;var n=new p.PlaneGeometry(2,2),i=new p.Mesh(n,this.currentMaterial);this.orthoScene.add(i),this.oldClearColor=new p.Color,this.oldClearAlpha=1,this.needsSwap=!1,void 0===p.CopyShader&&console.error("THREE.TRAAPass relies on THREE.CopyShader");var a=p.CopyShader;this.copyUniforms=p.UniformsUtils.clone(a.uniforms),this.copyMaterial=new p.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,transparent:!1,depthWrite:!1,blending:p.NoBlending});var o={minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat,stencilBuffer:!0};this.accumulatedBeautyRenderTarget=new p.WebGLRenderTarget(256,256,o),this.transparentRT=new p.WebGLRenderTarget(0,0,o),this.previousProjectionViewMatrix=new p.Matrix4,this.currentProjectionViewMatrix=new p.Matrix4,this.projectionMatrix=new p.Matrix4,this.projectionMatrix.copy(this.camera.projectionMatrix),this.numSamplesPerAccumulation=16,this.staticMode=!1,this.depthTexture=null,this.visibilityFunc=function(e,t){return!t.transparent},this.depthMaterial=new p.ShaderMaterial({defines:[],uniforms:[],side:p.DoubleSide,vertexShader:"\n  void main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n  }",fragmentShader:"\n  void main() {\n    gl_FragColor = vec4(0);\n  }"})},p.TRAAPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.TRAAPass,dispose:function(){this.accumulatedBeautyRenderTarget&&this.accumulatedBeautyRenderTarget.dispose()},setSize:function(e,t){this.accumulatedBeautyRenderTarget&&this.accumulatedBeautyRenderTarget.setSize(e,t),this.velocityRenderTarget&&this.velocityRenderTarget.setSize(e,t),this.projectionMatrix.copy(this.camera.projectionMatrix),this.transparentRT.setSize(e,t),this.resetPending=!0},renderOverride:function(e,t,r,n,i){var a=e.getClearColor().getHex(),o=e.getClearAlpha(),s=e.autoClear;e.autoClear=!1,n=t.clearColor||n,i=t.clearAlpha||i;var l=void 0!==n&&null!==n;l&&(e.setClearColor(n),e.setClearAlpha(i||0)),this.scene.overrideMaterial=t,e.render(this.scene,this.camera,r,l,this.visibilityFunc),this.scene.overrideMaterial=null,e.autoClear=s,e.setClearColor(a),e.setClearAlpha(o)},render:function(e,t,r,n,i,a){var o=this,s=a||this.camera;this.oldClearColor=e.getClearColor().getHex(),this.oldClearAlpha=e.getClearAlpha();var l=e.autoClear,u=e.autoClearDepth,c=t.width,f=t.height;if(!this.velocityRenderTarget){var h={minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat};this.velocityRenderTarget=new p.WebGLRenderTarget(c,f,h)}this.currentMaterial=this.superSampleTRAAMaterial,this.currentProjectionViewMatrix.multiplyMatrices(this.projectionMatrix,s.matrixWorldInverse),this.oldClearColor=e.getClearColor().getHex(),this.oldClearAlpha=e.getClearAlpha();l=e.autoClear,u=e.autoClearDepth;var d=e.autoClearColor;e.autoClear=!1,e.setClearColor(new p.Color(0,0,0),0),p.MaterialChanger.renderPassVelocity(e,this.scene,s,this.velocityRenderTarget,this.visibilityFunc,this.currentProjectionViewMatrix,this.previousProjectionViewMatrix),this.scene.traverse(function(e){e instanceof p.Object3D&&e.matrixWorldPrevious.copy(e.matrixWorld)}),e.autoClearColor=!0,e.autoClearDepth=!0,e.renderOverride(this.depthMaterial,this.scene,s,this.transparentRT,!0,this.visibilityFunc),e.render(this.scene,s,this.transparentRT,!1,function(e,t){return!o.visibilityFunc(e,t)}),s.view&&this.currentMaterial.uniforms.jitterOffset.value.set(s.view.offsetX,s.view.offsetY),this.currentMaterial.uniforms.transparentBeauty.value=this.transparentRT.texture,this.currentMaterial.uniforms.currentBeauty.value=r.texture,this.currentMaterial.uniforms.previousBeauty.value=this.accumulatedBeautyRenderTarget.texture,this.currentMaterial.defines.DEPTH_PACKING=this.depthTexture.depthPacking,this.currentMaterial.uniforms.tDepth.value=this.depthTexture,this.currentMaterial.uniforms.tVelocity.value=this.velocityRenderTarget.texture,this.resetPending?(this.currentMaterial.uniforms.mode.value=2,this.resetPending=!1):this.staticMode?this.currentMaterial.uniforms.mode.value=1:this.currentMaterial.uniforms.mode.value=0,this.currentMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(this.projectionMatrix),this.currentMaterial.uniforms.cameraProjectionMatrix.value.copy(this.projectionMatrix),this.currentMaterial.uniforms.cameraInverseViewMatrix.value.copy(s.matrixWorld),this.currentMaterial.uniforms.cameraNearFar.value.copy(new p.Vector2(s.near,s.far)),this.currentMaterial.uniforms.textureSize.value.copy(new p.Vector2(c,f)),this.currentMaterial.uniforms.minSampleWeight.value=1/this.numSamplesPerAccumulation,this.orthoScene.overrideMaterial=this.currentMaterial,e.autoClearDepth=!1,e.render(this.orthoScene,this.orthoCamera,t,!0),this.orthoScene.overrideMaterial=null,this.copyUniforms.tDiffuse.value=t.texture,this.copyUniforms.opacity.value=1,this.orthoScene.overrideMaterial=this.copyMaterial,e.render(this.orthoScene,this.orthoCamera,this.accumulatedBeautyRenderTarget,!0),e.render(this.orthoScene,this.orthoCamera,r,!0),this.orthoScene.overrideMaterial=null,e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=l,e.autoClearColor=d,e.autoClearDepth=u,this.previousProjectionViewMatrix.copy(this.currentProjectionViewMatrix)}}),p.UnrealBloomPass=function(e,t,r,n){p.Pass.call(this),this.strength=void 0!==t?t:1,this.radius=r,this.threshold=n,this.resolution=void 0!==e?new p.Vector2(e.x,e.y):new p.Vector2(256,256);var i={minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var a=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new p.WebGLRenderTarget(a,o,i),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var s=0;s<this.nMips;s++){var l;(l=new p.WebGLRenderTarget(a,o,i)).texture.name="UnrealBloomPass.h"+s,l.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(l),(l=new p.WebGLRenderTarget(a,o,i)).texture.name="UnrealBloomPass.v"+s,l.texture.generateMipmaps=!1,this.renderTargetsVertical.push(l),a=Math.round(a/2),o=Math.round(o/2)}void 0===p.LuminosityHighPassShader&&console.error("THREE.UnrealBloomPass relies on THREE.LuminosityHighPassShader");var u=p.LuminosityHighPassShader;this.highPassUniforms=p.UniformsUtils.clone(u.uniforms),this.highPassUniforms.luminosityThreshold.value=n,this.highPassUniforms.smoothWidth.value=.05,this.materialHighPassFilter=new p.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var c=[3,5,7,9,11];for(a=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2),s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[s])),this.separableBlurMaterials[s].uniforms.texSize.value=new p.Vector2(a,o),a=Math.round(a/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new p.Vector3(1,1,1),new p.Vector3(1,1,1),new p.Vector3(1,1,1),new p.Vector3(1,1,1),new p.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===p.CopyShader&&console.error("THREE.BloomPass relies on THREE.CopyShader");var f=p.CopyShader;this.copyUniforms=p.UniformsUtils.clone(f.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new p.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,blending:p.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new p.Color,this.oldClearAlpha=1,this.camera=new p.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new p.Scene,this.quad=new p.Mesh(new p.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},p.UnrealBloomPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.UnrealBloomPass,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length();e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length();e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var r=Math.round(e/2),n=Math.round(t/2);this.renderTargetBright.setSize(r,n);for(var i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(r,n),this.renderTargetsVertical[i].setSize(r,n),this.separableBlurMaterials[i].uniforms.texSize.value=new p.Vector2(r,n),r=Math.round(r/2),n=Math.round(n/2)},render:function(e,t,r,n,i,a){this.oldClearColor=e.getClearColor().getHex(),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,e.setClearColor(new p.Color(0,0,0),0),i&&e.context.disable(e.context.STENCIL_TEST),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.quad.material=this.materialHighPassFilter,e.render(this.scene,this.camera,this.renderTargetBright,!0);for(var s=this.renderTargetBright,l=0;l<this.nMips;l++)this.quad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=s.texture,this.separableBlurMaterials[l].uniforms.direction.value=p.UnrealBloomPass.BlurDirectionX,e.render(this.scene,this.camera,this.renderTargetsHorizontal[l],!0),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=p.UnrealBloomPass.BlurDirectionY,e.render(this.scene,this.camera,this.renderTargetsVertical[l],!0),s=this.renderTargetsVertical[l];this.quad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.render(this.scene,this.camera,this.renderTargetsHorizontal[0],!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.camera,r),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o},getSeperableBlurMaterial:function(e){return new p.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new p.Vector2(.5,.5)},direction:{value:new p.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new p.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t \t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),p.UnrealBloomPass.BlurDirectionX=new p.Vector2(1,0),p.UnrealBloomPass.BlurDirectionY=new p.Vector2(0,1),p.RenderTargetPass=function(e,t,r,n,i){p.Pass.call(this),this.scene=e,this.camera=t,this.renderOver=!1,this.overrideMaterial=r,this.clearColor=n||new p.Color(1,1,1),this.clearAlpha=void 0!==i?i:0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearColorRT=!0,this.autoClearDepthRT=!0,void 0===p.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader"),this.overMaterial=new p.ShaderMaterial(p.CopyShader),this.overMaterial.uniforms=p.UniformsUtils.clone(this.overMaterial.uniforms),this.overMaterial.blending=p.NormalBlending,this.overMaterial.premultipliedAlpha=!0,this.overMaterial.transparent=!0,this.overMaterial.depthTest=!1,this.overMaterial.depthWrite=!1,this.renderTarget=null,this.renderToScreen=!1,this.renderToBuffer=!0,this.needsSwap=!1,this.width=this.height=0,this.copyMaterial=new p.ShaderMaterial(p.CopyShader),this.copyMaterial.uniforms=p.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.transparent=!0,this.copyMaterial.depthWrite=!1,this.copyMaterial.depthTest=!1,this.copyMaterial.premultipliedAlpha=!0,this.copyMaterial.needsUpdate=!0,this.copyMaterial.blending=p.NormalBlending,this.depthMaterial=new p.ShaderMaterial({defines:[],uniforms:[],side:p.DoubleSide,vertexShader:"\n  void main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n  }",fragmentShader:"\n  void main() {\n    gl_FragColor = vec4(0);\n  }"})},p.RenderTargetPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.RenderTargetPass,setSize:function(e,t){this.width=e,this.height=t,this.renderTarget&&this.renderTarget.setSize(e,t)},useRT:function(){return this.renderTarget||(this.renderTarget=new p.WebGLRenderTarget(this.width,this.height)),this.renderTarget},render:function(e,t,r,n,i,a){var o=a||this.camera;this.needsSwap||(t=r),this.needsSwap&&(this.copyMaterial.uniforms.tDiffuse.value=r.texture,e.renderPass(this.copyMaterial,t,!0));var s=e.autoClear,l=e.autoClearDepth,u=e.autoClearColor,c=e.getClearColor(),f=e.getClearAlpha();e.autoClear=!1,e.setClearColor(this.clearColor,this.clearAlpha);var h=this.visibilityFunc;this.depthOnly&&(h=function(e,t){return!(this.visibilityFunc&&!this.visibilityFunc(e,t))&&(this.depthMaterial.side=e.material.side,!0)}),this.renderTarget?(this.autoClearColorRT||this.autoClearDepthRT?(e.setRenderTarget(this.renderTarget),e.clear(this.autoClearColorRT,this.autoClearDepthRT)):r&&(this.overMaterial.uniforms.tDiffuse.value=r.texture,e.renderPass(this.overMaterial,this.renderTarget,!1)),this.depthOnly&&this.changeSide(e),e.renderOverride(this.overrideMaterial,this.scene,o,this.renderTarget,!1,h),this.depthOnly&&this.restoreSide(e),(this.renderToScreen||t&&this.renderToBuffer)&&(e.autoClearColor=this.autoClearColor,e.autoClearDepth=this.autoClearDepth,this.overMaterial.uniforms.tDiffuse.value=this.renderTarget.texture,e.renderPass(this.overMaterial,this.renderToScreen?null:t,!0))):(e.autoClearColor=this.autoClearColor,e.autoClearDepth=this.autoClearDepth,e.renderOverride(this.depthOnly?this.depthMaterial:this.overrideMaterial,this.scene,o,this.renderToScreen?null:t,!0,h)),e.setClearColor(c,f),e.autoClear=s,e.autoClearDepth=l,e.autoClearColor=u}}),p.RefractiveGlassPass=function(e,t,r){p.Pass.call(this),this.camera=t,this.originalScene=e,this.copyMaterial=new p.ShaderMaterial(p.CopyShader),this.copyMaterial.uniforms=p.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.transparent=!0,this.copyMaterial.depthWrite=!1,this.copyMaterial.depthTest=!1,this.depthNormalPeeler=new p.DepthNormalPeeler(r),this.needsSwap=!1,this.numPasses=4,this.lqFallback=!1;for(var n=["WEBGL_color_buffer_float","OES_texture_float"],i=0;i<n.length;i++){var a=n[i];r.extensions.get(a)||(this.lqFallback=!0)}this.visibilityFunc=function(e,t){return e.material.isGemMaterial},this.opaqueVisibilityFunc=function(e,t){return!t.isGemMaterial&&!t.transparent}},p.RefractiveGlassPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.RefractiveGlassPass,setSize:function(e,t){this.width=e,this.height=t,this.depthNormalPeeler.setSize(e,t)},render:function(e,t,r,n,i,a){var o=a||this.camera,s=e.getSize(),l=(s.width,s.height,e.autoClear),u=e.autoClearDepth,c=e.autoClearColor;e.lqFallback=this.lqFallback,this.lqFallback||(this.depthNormalPeeler.nPeelPasses=this.numPasses,this.depthNormalPeeler.render(e,this.originalScene,this.camera,this.visibilityFunc)),e.autoClear=!0,e.autoClearColor=!1,e.autoClearDepth=!0,p.MaterialChanger.renderPassDepth(e,this.originalScene,o,r,this.opaqueVisibilityFunc),e.autoClear=!1,e.autoClearColor=!1,e.autoClearDepth=!1,e.render(this.originalScene,o,r,!1,this.visibilityFunc),e.autoClear=l,e.autoClearDepth=u,e.autoClearColor=c}}),p.RenderTargetPass=function(e,t,r,n,i){p.Pass.call(this),this.scene=e,this.camera=t,this.renderOver=!1,this.overrideMaterial=r,this.clearColor=n||new p.Color(1,1,1),this.clearAlpha=void 0!==i?i:0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearColorRT=!0,this.autoClearDepthRT=!0,void 0===p.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader"),this.overMaterial=new p.ShaderMaterial(p.CopyShader),this.overMaterial.uniforms=p.UniformsUtils.clone(this.overMaterial.uniforms),this.overMaterial.blending=p.NormalBlending,this.overMaterial.premultipliedAlpha=!0,this.overMaterial.transparent=!0,this.overMaterial.depthTest=!1,this.overMaterial.depthWrite=!1,this.renderTarget=null,this.renderToScreen=!1,this.renderToBuffer=!0,this.needsSwap=!1,this.width=this.height=0,this.copyMaterial=new p.ShaderMaterial(p.CopyShader),this.copyMaterial.uniforms=p.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.transparent=!0,this.copyMaterial.depthWrite=!1,this.copyMaterial.depthTest=!1,this.copyMaterial.premultipliedAlpha=!0,this.copyMaterial.needsUpdate=!0,this.copyMaterial.blending=p.NormalBlending,this.depthMaterial=new p.ShaderMaterial({defines:[],uniforms:[],side:p.DoubleSide,vertexShader:"\n  void main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n  }",fragmentShader:"\n  void main() {\n    gl_FragColor = vec4(0);\n  }"})},p.RenderTargetPass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype),{constructor:p.RenderTargetPass,setSize:function(e,t){this.width=e,this.height=t,this.renderTarget&&this.renderTarget.setSize(e,t)},useRT:function(){return this.renderTarget||(this.renderTarget=new p.WebGLRenderTarget(this.width,this.height)),this.renderTarget},render:function(e,t,r,n,i,a){var o=a||this.camera;this.needsSwap||(t=r),this.needsSwap&&(this.copyMaterial.uniforms.tDiffuse.value=r.texture,e.renderPass(this.copyMaterial,t,!0));var s=e.autoClear,l=e.autoClearDepth,u=e.autoClearColor,c=e.getClearColor(),f=e.getClearAlpha();e.autoClear=!1,e.setClearColor(this.clearColor,this.clearAlpha);var h=this.visibilityFunc;this.depthOnly&&(h=function(e,t){return!(this.visibilityFunc&&!this.visibilityFunc(e,t))&&(this.depthMaterial.side=e.material.side,!0)}),this.renderTarget?(this.autoClearColorRT||this.autoClearDepthRT?(e.setRenderTarget(this.renderTarget),e.clear(this.autoClearColorRT,this.autoClearDepthRT)):r&&(this.overMaterial.uniforms.tDiffuse.value=r.texture,e.renderPass(this.overMaterial,this.renderTarget,!1)),this.depthOnly&&this.changeSide(e),e.renderOverride(this.overrideMaterial,this.scene,o,this.renderTarget,!1,h),this.depthOnly&&this.restoreSide(e),(this.renderToScreen||t&&this.renderToBuffer)&&(e.autoClearColor=this.autoClearColor,e.autoClearDepth=this.autoClearDepth,this.overMaterial.uniforms.tDiffuse.value=this.renderTarget.texture,e.renderPass(this.overMaterial,this.renderToScreen?null:t,!0))):(e.autoClearColor=this.autoClearColor,e.autoClearDepth=this.autoClearDepth,e.renderOverride(this.depthOnly?this.depthMaterial:this.overrideMaterial,this.scene,o,this.renderToScreen?null:t,!0,h)),e.setClearColor(c,f),e.autoClear=s,e.autoClearDepth=l,e.autoClearColor=u}}),p.TransparentPass=function(e,t,r,n,i){p.RenderTargetPass.call(this,e,t,r,n,i),this.autoClearColor=!0,this.autoClearDepth=!1,this.autoClearColorRT=!0,this.autoClearDepthRT=!1,this.clearAlpha=0,this.visibilityFunc=function(e,t){return t.transparent},this.fxaaPass=new p.FXAAPass,this.expandPass=new p.ExpandPass,this.miscRT1=new p.WebGLRenderTarget(0,0),this.miscRT2=new p.WebGLRenderTarget(0,0),this.needsSwap=!1,this.useSeparateAA=!1},p.TransparentPass.prototype=(0,c.default)((0,u.default)(p.RenderTargetPass.prototype),{constructor:p.TransparentPass,setSize:function(e,t){this.miscRT1.setSize(e,t),this.miscRT2.setSize(e,t),p.RenderTargetPass.prototype.setSize.call(this,e,t),this.fxaaPass.setSize(e,t),this.expandPass.setSize(e,t)},render:function(e,t,r,n,i,a){var o=this.camera||a,s=e.getSize(),l=s.width,u=s.height;if(o.view&&this.useSeparateAA){var c=o.view.offsetX,f=o.view.offsetY;o.setViewOffset(l,u,0,0,l,u)}var h=e.autoClear,d=e.autoClearColor,m=e.autoClearDepth;e.autoClear=!1,e.autoClearColor=!1,e.autoClearDepth=!1;var v=this.copyMaterial;e.autoClearDepth=!0,e.autoClearColor=!0;var g,y,x;p.MaterialChanger.renderPassDepth(e,this.scene,o,this.miscRT1,function(e,t){return!t.transparent}),e.autoClearDepth=!1,p.RenderTargetPass.prototype.render.call(this,e,null,this.miscRT1,n,i,o),e.autoClear=!1,e.autoClearColor=!1,e.autoClearDepth=!1,this.useSeparateAA&&(this.expandPass.render(e,this.miscRT2,this.miscRT1,n,i,o),this.fxaaPass.render(e,this.miscRT1,this.miscRT2,n,i,o)),g=this.miscRT1.texture,y=r,x=!1,v.uniforms.tDiffuse.value=g,e.renderPass(v,y,x),o.view&&this.useSeparateAA&&o.setViewOffset(l,u,c,f,l,u),e.autoClear=h,e.autoClearColor=d,e.autoClearDepth=m}}),p.OpaquePass=function(e,t,r,n,i){p.RenderPass.call(this,e,t,r,n,i),this.visibilityFunc=function(e,t){return!t.isGemMaterial&&!t.transparent},this.rt=new p.WebGLRenderTarget(0,0),this.copyMaterial=new p.ShaderMaterial(p.CopyShader),this.copyMaterial.uniforms=p.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.depthTest=!1,this.copyMaterial.depthWrite=!1,this.copyMaterial.transparent=!0,this.copyMaterial.premultipliedAlpha=!0,this.copyMaterial.needsUpdate=!0},p.OpaquePass.prototype=(0,c.default)((0,u.default)(p.RenderPass.prototype),{constructor:p.OpaquePass,setSize:function(e,t){p.RenderPass.prototype.setSize.call(this,e,t),this.rt.setSize(e,t)},render:function(e,t,r,n,i,a){var o=e.autoClear,s=e.autoClearDepth,l=e.autoClearColor,u=e.getClearColor(),c=e.getClearAlpha(),f=a||this.camera;e.autoClear=!1,e.autoClearColor=!0,e.autoClearDepth=!0,e.setClearColor(0,0),e.render(this.scene,f,this.rt,!0,this.visibilityFunc),this.copyMaterial.uniforms.tDiffuse.value=this.rt.texture,e.renderPass(this.copyMaterial,r,!1),e.setClearColor(u,c),e.autoClear=o,e.autoClearDepth=s,e.autoClearColor=l}}),p.FXAAPass=function(){void 0===p.ShaderPass&&console.error("THREE.FXAAPass relies on THREE.ShaderPass"),void 0===p.FXAAShader&&console.error("THREE.FXAAPass relies on THREE.FXAAShader"),p.ShaderPass.call(this,p.FXAAShader)},p.FXAAPass.prototype=(0,c.default)((0,u.default)(p.ShaderPass.prototype),{constructor:p.FXAAPass,setSize:function(e,t){this.uniforms.resolution.value.set(1/e,1/t)}}),p.ExpandPass=function(){void 0===p.ShaderPass&&console.error("THREE.ExpandPass relies on THREE.ShaderPass"),void 0===p.ExpandShader&&console.error("THREE.ExpandPass relies on THREE.ExpandShader"),p.ShaderPass.call(this,p.ExpandShader)},p.ExpandPass.prototype=(0,c.default)((0,u.default)(p.ShaderPass.prototype),{constructor:p.ExpandShader,setSize:function(e,t){this.uniforms.resolution.value.set(1/e,1/t)}}),p.AxisOverlayPass=function(e,t){t=t||{},p.RenderPass.call(this,{}),this.camera=e,this.needsSwap=!1,this.width=0,this.height=0,this.displayOffsetPixels={x:-0,y:0},this.rt=new p.WebGLRenderTarget(1,1),this.dock={fromLeft:1,fromTop:1},this.copyMaterial=new p.ShaderMaterial(p.CopyShader),this.copyMaterial.uniforms=p.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.transparent=!0,this.copyMaterial.depthWrite=!1,this.copyMaterial.depthTest=!1,this.copyMaterial.premultipliedAlpha=!0,this.copyMaterial.needsUpdate=!0,this.gimbal=this.createGimbalModel(),this.scene=new p.Scene,this.scene.add(this.gimbal),this.scene.add(new p.AmbientLight(16777215,10));var r=new p.DirectionalLight(16777215,10);r.position.set(1,1,1),r.lookAt(new p.Vector3(0,0,0)),this.scene.add(r);var n=t.gimbalCameraSize||2;this.gimbalCamera=new p.OrthographicCamera(-n,n,n,-n,.01,100),this.gimbalCamera.position.set(0,0,10),this.gimbalCamera.lookAt(new p.Vector3(0,0,0)),this.copyScene=new p.Scene,this.copyCamera=new p.OrthographicCamera(0,1,1,0,-1,1),this.copyPlane=new p.Mesh(new p.PlaneGeometry(1,1),this.copyMaterial),this.copyScene.add(this.copyPlane)},p.AxisOverlayPass.prototype=(0,c.default)((0,u.default)(p.RenderPass.prototype),{constructor:p.AxisOverlayPass,setSize:function(e,t){this.height=t,this.width=e},render:function(e,t,r,n,i,a){var o=e.autoClear,s=e.autoClearColor,l=e.autoClearDepth,u=(e.clearColor,e.clearAlpha,this.camera||a);e.getSize();e.autoClear=!1,e.autoClearColor=!0,e.autoClearDepth=!0,e.setClearColor(0,0),this.updateDisplay(u,e),this.copyMaterial.uniforms.tDiffuse.value=this.rt.texture,e.render(this.copyScene,this.copyCamera,r,!1),e.autoClear=o,e.autoClearColor=s,e.autoClearDepth=l,e.setClearColor(e.clearColor,e.clearAlpha)},updateDisplay:function(e,t){var r=this.width/this.height,n=this.copyPlane,i=.1*(this.height<this.width?1:1/r),a=i/r,o=Math.ceil(i*this.height);this.rt.setSize(o,o);var s=p.Math.lerp(a/2,1-a/2,this.dock.fromLeft)+this.displayOffsetPixels.x/this.width,l=p.Math.lerp(1-i/2,i/2,this.dock.fromTop)+this.displayOffsetPixels.y/this.height;n.scale.set(a,i,1),n.position.set(s,l,0),this.gimbal.quaternion.copy(e.quaternion),this.gimbal.quaternion.inverse(),this.gimbal.updateMatrixWorld(),t.render(this.scene,this.gimbalCamera,this.rt,!0)},createGimbalModel:function(){var e=16711680,t=65280,r=255,n={x:new p.MeshBasicMaterial({color:e}),y:new p.MeshBasicMaterial({color:t}),z:new p.MeshBasicMaterial({color:r})},i=new p.ConeGeometry(.2,.5,25),a=new p.CylinderGeometry(.1,.1,1,32);i.translate(0,.5,0),a.merge(i),a.translate(0,.5,0);var o=a.clone(),s=a.clone(),l=new p.CylinderGeometry(.05,.05,.5,32),u=l.clone();l.rotateZ(Math.PI/4),u.rotateZ(-Math.PI/4),l.translate(0,1.5,0),u.translate(0,1.5,0),s.merge(l),s.merge(u);var c=new p.CylinderGeometry(.05,.05,.3,32),f=new p.CylinderGeometry(.05,.05,.25,32),h=f.clone();f.rotateZ(-Math.PI/4+.1),h.rotateZ(Math.PI/4-.1),c.translate(0,1.5,0),f.translate(.08,1.7,0),h.translate(-.08,1.7,0),a.merge(c),a.merge(f),a.merge(h);var d=new p.CylinderGeometry(.05,.05,.5,32),m=new p.CylinderGeometry(.05,.05,.4,32),v=new p.CylinderGeometry(.05,.05,.4,32);d.rotateX(-Math.PI/4+.08),d.translate(0,1.5,0),m.translate(0,1.5,-.16),v.translate(0,1.5,.16),o.merge(d),o.merge(m),o.merge(v);var g=new p.Mesh(a,n.y);g.axis="y",o.rotateX(Math.PI/2);var y=new p.Mesh(o,n.z);y.axis="z",s.rotateZ(Math.PI/2);var x=new p.Mesh(s,n.x);x.axis="x";var b=new p.Object3D;return b.add(x),b.add(g),b.add(y),b}}),p.DepthNormalPeeler=function(e){this.renderTargetsDepth=[],this.renderTargetsNormal=[],this.nPeelPassesMax=4,this.nPeelPasses=this.nPeelPasses,this.peelMaterial=this.getPeelMaterial(),this.peelMaterial.side=p.DoubleSide,this.peelMaterial.blending=p.NoBlending,this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new p.Color,this.oldClearAlpha=1;for(var t=e.getSize().width,r=e.getSize().height,n=e.extensions.get("OES_texture_float_linear"),i={minFilter:n?p.LinearFilter:p.NearestFilter,magFilter:n?p.LinearFilter:p.NearestFilter,format:p.RGBAFormat,type:p.FloatType},a=0;a<this.nPeelPassesMax;a++){var o=new p.WebGLRenderTarget(t,r,i);o.texture.generateMipmaps=!1,this.renderTargetsDepth.push(o);var s=new p.WebGLRenderTarget(t,r,i);s.texture.generateMipmaps=!1,this.renderTargetsNormal.push(s)}},p.DepthNormalPeeler.prototype={constructor:p.DepthNormalPeeler,dispose:function(){for(var e=0;e<this.renderTargetsDepth.length;e++)this.renderTargetsDepth[e].dispose(),this.renderTargetsNormal[e].dispose()},setSize:function(e,t){for(var r=0;r<this.renderTargetsDepth.length;r++)this.renderTargetsDepth[r].setSize(e,t),this.renderTargetsNormal[r].setSize(e,t)},getPeelMaterial:function(){return new p.ShaderMaterial({uniforms:{previousTextureDepth:{value:null},passNumber:{value:0}},defines:{},vertexShader:"\n#include <common>\n\nvarying vec4 viewPosition;\nvarying vec3 viewNormal;\n\nvoid main() {\n  viewNormal = transformDirection(normal, modelViewMatrix);\n  viewPosition = modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\n#include <common>\n#include <packing>\n\nvarying vec4 viewPosition;\nvarying vec3 viewNormal;\nuniform sampler2D previousTextureDepth;\nuniform int passNumber;\nuniform vec2 windowSize;\nuniform vec2 cameraNearFar;\n\nfloat unmix(float a, float b, float x) {  return (x-a) / (b-a);\n}\n\nfloat getDepth(vec4 texel) {\n  /*\n  return -mix( cameraNearFar.x, cameraNearFar.y, unpackRGBToDepth(\n      texel.xyz\n    ) );\n  */\n  return texel.z;\n}\n\nvec3 packDepth() {\n  //return packDepthToRGB(unmix(cameraNearFar.x, cameraNearFar.y, -viewPosition.z));\n  return vec3(viewPosition.z, 0, 0);\n}\n\nvoid main() {\n\n  float layerOut;\n  vec3 normal;\n\n  if( passNumber == 0 ) {\n    layerOut = .25;\n  } else {\n    vec4 previousValues = texture2D( previousTextureDepth, gl_FragCoord.xy/windowSize );\n    float previousDepth = getDepth( previousValues );\n\n    if( (viewPosition.z / previousDepth) > 1.001 ) {\n      layerOut = previousValues.w + .25;\n    } else\n      discard;\n  }\n\n  vec3 normalizedNormal = normalize(viewNormal);\n  if( dot( normalize( viewPosition.xyz ), normalizedNormal ) > 0.0 ) normalizedNormal *= -1.0;\n  normal = normalizedNormal.xyz;\n\n  normal.x = saturate(normal.x * .5 + .5);\n  normal.x *= sign(normal.z);\n\n  gl_FragColor = vec4(\n    normal.xy,\n    packDepth().x,\n    layerOut\n  );\n}\n"})},render:function(e,t,r,n){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var i=e.autoClear,a=e.autoClearDepth;e.autoClear=!0,t.overrideMaterial=this.peelMaterial,this.peelMaterial.uniforms.previousTextureDepth.value=null;for(var o=0;o<this.nPeelPasses;o++)o%2==0?e.setClearColor(new p.Color(-r.far,0,0),0):e.setClearColor(new p.Color(-r.near,0,0),0),this.peelMaterial.uniforms.passNumber.value=o,this.peelMaterial.needsUpdate=!0,e.render(t,r,this.renderTargetsDepth[o],!0,n),this.peelMaterial.uniforms.previousTextureDepth.value=this.renderTargetsDepth[o].texture;t.overrideMaterial=null,e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=i,e.autoClearDepth=a}},p.MirrorHelper=function(e){this.scene=new p.Scene,this.cameraOrtho=new p.OrthographicCamera(-1,1,1,-1,0,1),this.quad=new p.Mesh(new p.PlaneGeometry(2,2),null),this.scene.add(this.quad),this.mirror=e,this.numMipMaps=4,this.mirrorTextureMipMaps=[],this.tempRenderTargets=[];for(var t={minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat,stencilBuffer:!1},r=e.mirrorRenderTarget,n=r.width/2,i=r.height/2,a=0;a<this.numMipMaps;a++){var o=new p.WebGLRenderTarget(n,i,t);o.texture.generateMipmaps=!1,this.mirrorTextureMipMaps.push(o);var s=new p.WebGLRenderTarget(n,i,t);s.texture.generateMipmaps=!1,this.tempRenderTargets.push(s),n/=2,i/=2}this.vBlurMaterial=new p.ShaderMaterial(p.BlurShader),this.vBlurMaterial.side=p.DoubleSide,this.vBlurMaterial.uniforms.size.value.set(r.width/2,r.height/2),this.vBlurMaterial.blending=p.NoBlending,p.BlurShaderUtils.configure(this.vBlurMaterial,5,3,new p.Vector2(0,1)),this.hBlurMaterial=this.vBlurMaterial.clone(),this.hBlurMaterial.side=p.DoubleSide,this.hBlurMaterial.uniforms.size.value.set(r.width/2,r.height/2),this.hBlurMaterial.blending=p.NoBlending,p.BlurShaderUtils.configure(this.hBlurMaterial,5,3,new p.Vector2(1,0))},p.MirrorHelper.prototype={constructor:p.MirrorHelper,setSize:function(e,t){for(var r=0;r<this.numMipMaps;r++)e/=2,t/=2,this.mirrorTextureMipMaps[r].setSize(e,t),this.tempRenderTargets[r].setSize(e,t)},update:function(e){for(var t=this.mirror.mirrorRenderTarget,r=0;r<this.numMipMaps;r++){var n=this.mirrorTextureMipMaps[r],i=this.tempRenderTargets[r];this.hBlurMaterial.uniforms.size.value.set(t.width,t.height),this.hBlurMaterial.uniforms.tDiffuse.value=t.texture,this.quad.material=this.hBlurMaterial,e.render(this.scene,this.cameraOrtho,i,!0),this.vBlurMaterial.uniforms.size.value.set(i.width,i.height),this.vBlurMaterial.uniforms.tDiffuse.value=i.texture,this.quad.material=this.vBlurMaterial,e.render(this.scene,this.cameraOrtho,n,!0),t=n}}},p.GlossyMirror=function(e){p.Object3D.call(this),this.name="mirror_"+this.id,e=e||{},this.matrixNeedsUpdate=!0;var t=void 0!==e.textureWidth?e.textureWidth:512,r=void 0!==e.textureHeight?e.textureHeight:512;if(this.size=new p.Vector3(t,r),this.localMirrorNormal=void 0!==e.localMirrorNormal?e.localMirrorNormal:new p.Vector3(0,0,1),this.distanceFade=.1,this.metalness=0,this.specularColor=new p.Color(16777215),this.roughness=0,this.fresnelStrength=1,this.mirrorPlane=new p.Plane,this.mirrorWorldPosition=new p.Vector3,this.cameraWorldPosition=new p.Vector3,this.rotationMatrix=new p.Matrix4,this.lookAtPosition=new p.Vector3(0,0,-1),this.matrixNeedsUpdate=!0,void 0!==e.debugMode&&e.debugMode){var n=new p.ArrowHelper(new p.Vector3(0,0,1),new p.Vector3(0,0,0),10,16777088),i=new p.Geometry;i.vertices.push(new p.Vector3(-10,-10,0)),i.vertices.push(new p.Vector3(10,-10,0)),i.vertices.push(new p.Vector3(10,10,0)),i.vertices.push(new p.Vector3(-10,10,0)),i.vertices.push(i.vertices[0]);var a=new p.Line(i,new p.LineBasicMaterial({color:16777088}));this.add(n),this.add(a)}this.reflectionTextureMatrix=new p.Matrix4,this.mirrorNormal=new p.Vector3;var o={minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat,stencilBuffer:!1};this.mirrorRenderTarget=new p.WebGLRenderTarget(t,r,o),this.mirrorRenderTarget.texture.name="GlossyMirror.mirror",this.material=new p.ShaderMaterial(p.GlossyMirrorShader),this.material.defines=(0,c.default)({},this.material.defines),this.material.uniforms=p.UniformsUtils.clone(this.material.uniforms),this.material.uniforms.tReflection.value=this.mirrorRenderTarget.texture,this.material.uniforms.reflectionTextureMatrix.value=this.reflectionTextureMatrix,this.material.depthWrite=!1,this.material.isGlossyMirrorMaterial=!0,this.mirrorRenderTarget.texture.generateMipmaps=!1,this.clipPlane=new p.Plane(this.localMirrorNormal,0),this.originalClipPlane=this.clipPlane.clone(),this.falseClipPlane=this.clipPlane.clone(),this.falseClipPlane.constant=1e4,this.depthMaterial=new p.MeshDepthMaterial,this.depthMaterial.depthPacking=p.RGBADepthPacking,this.depthMaterial.blending=p.NoBlending,this.depthMaterial.side=p.FrontSide,this.depthRenderTarget=new p.WebGLRenderTarget(t,r,{minFilter:p.NearestFilter,magFilter:p.NearestFilter,format:p.RGBAFormat}),this.depthRenderTarget.texture.generateMipmaps=!1,this.depthRenderTarget.texture.name="GlossyMirror.depth",this.material.uniforms.tReflectionDepth.value=this.depthRenderTarget.texture,this.material.uniforms.screenSize.value=new p.Vector2(t,r),this.mirrorHelper=new p.MirrorHelper(this),this.material.uniforms.tReflection.value=this.mirrorRenderTarget.texture,this.material.uniforms.tReflection1.value=this.mirrorHelper.mirrorTextureMipMaps[0].texture,this.material.uniforms.tReflection2.value=this.mirrorHelper.mirrorTextureMipMaps[1].texture,this.material.uniforms.tReflection3.value=this.mirrorHelper.mirrorTextureMipMaps[2].texture,this.material.uniforms.tReflection4.value=this.mirrorHelper.mirrorTextureMipMaps[3].texture,this.setSize(t,r)},p.GlossyMirror.prototype=(0,c.default)((0,u.default)(p.Object3D.prototype),{constructor:p.GlossyMirror,setSize:function(e,t){this.size.x===e&&this.size.y===t||(this.mirrorRenderTarget.setSize(e,t),this.depthRenderTarget.setSize(e,t),this.mirrorHelper.setSize(e,t),this.material.uniforms.screenSize.value=new p.Vector2(e,t),this.size.set(e,t),this.matrixNeedsUpdate=!0),this.matrixNeedsUpdate=!0},updateReflectionTextureMatrix:function(e){this.updateMatrixWorld(),e.updateMatrixWorld(),this.mirrorWorldPosition.setFromMatrixPosition(this.matrixWorld),this.cameraWorldPosition.setFromMatrixPosition(e.matrixWorld),this.rotationMatrix.extractRotation(this.matrixWorld),this.mirrorNormal.copy(this.localMirrorNormal),this.mirrorNormal.applyMatrix4(this.rotationMatrix);var t=this.mirrorWorldPosition.clone().sub(this.cameraWorldPosition);t.reflect(this.mirrorNormal).negate(),t.add(this.mirrorWorldPosition),this.rotationMatrix.extractRotation(e.matrixWorld),this.lookAtPosition.set(0,0,-1),this.lookAtPosition.applyMatrix4(this.rotationMatrix),this.lookAtPosition.add(this.cameraWorldPosition);var r=this.mirrorWorldPosition.clone().sub(this.lookAtPosition);r.reflect(this.mirrorNormal).negate(),r.add(this.mirrorWorldPosition),this.up.set(0,-1,0),this.up.applyMatrix4(this.rotationMatrix),this.up.reflect(this.mirrorNormal).negate(),this.mirrorCamera.position.copy(t),this.mirrorCamera.up=this.up,this.mirrorCamera.lookAt(r),this.mirrorCamera.fov=e.fov,this.mirrorCamera.near=e.near,this.mirrorCamera.far=e.far,this.mirrorCamera.aspect=e.aspect,this.mirrorCamera.updateProjectionMatrix(),this.mirrorCamera.updateMatrixWorld(),this.mirrorCamera.matrixWorldInverse.getInverse(this.mirrorCamera.matrixWorld),this.reflectionTextureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.reflectionTextureMatrix.multiply(this.mirrorCamera.projectionMatrix),this.reflectionTextureMatrix.multiply(this.mirrorCamera.matrixWorldInverse),this.mirrorPlane.setFromNormalAndCoplanarPoint(this.mirrorNormal,this.mirrorWorldPosition),this.mirrorPlane.applyMatrix4(this.mirrorCamera.matrixWorldInverse),this.material.uniforms.mirrorCameraProjectionMatrix.value.copy(this.mirrorCamera.projectionMatrix),this.material.uniforms.mirrorCameraInverseProjectionMatrix.value.getInverse(this.mirrorCamera.projectionMatrix),this.material.uniforms.mirrorCameraWorldMatrix.value.copy(e.matrixWorld),this.material.uniforms.mirrorCameraNear.value=this.mirrorCamera.near,this.material.uniforms.mirrorCameraFar.value=this.mirrorCamera.far,this.material.uniforms.mirrorNormal.value=this.mirrorNormal,this.material.uniforms.mirrorWorldPosition.value=this.mirrorWorldPosition,this.material.transparent=!0,this.material.premultipliedAlpha=!0},render:function(e,t,r,n,i){if(!r instanceof p.PerspectiveCamera&&console.error("THREE.GlossyMirror: camera is not a Perspective Camera!"),this.setSize(n,i),this.mirrorCamera||(this.mirrorCamera=r.clone(),this.mirrorCamera.matrixAutoUpdate=!0),this.matrixNeedsUpdate&&this.updateReflectionTextureMatrix(r),this.matrixNeedsUpdate=!0,void 0!==this.clipPlane&&(this.clipPlane.copy(this.originalClipPlane),this.clipPlane.applyMatrix4(this.matrixWorld),this.clippingPlanes=[this.clipPlane]),e.clippingPlanes=this.clippingPlanes,e.drawingMirror=!0,void 0!==t&&t instanceof p.Scene){var a=this.material.visible;this.material.visible=!1,e.render(t,this.mirrorCamera,this.mirrorRenderTarget,!0),this.material.visible=a}t.overrideMaterial=this.depthMaterial;a=this.material.visible;var o=e.getClearColor(),s=e.getClearAlpha();e.setClearColor(16777215,1),this.material.visible=!1,e.render(t,this.mirrorCamera,this.depthRenderTarget,!0),e.drawingMirror=!1,t.overrideMaterial=null,e.setClearColor(o,s),this.material.visible=a,this.material.uniforms.distanceFade.value=this.distanceFade,this.material.uniforms.metalness.value=this.metalness,this.material.uniforms.fresnelStrength.value=this.fresnelStrength,this.material.uniforms.specularColor.value.copy(this.specularColor),this.material.uniforms.roughness.value=this.roughness,void 0!==this.clipPlane&&this.clipPlane.copy(this.falseClipPlane),void 0!==this.mirrorHelper&&this.mirrorHelper.update(e)}}),p.OrbitControls=function(e,t){var r,n,i,a,o;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new p.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:p.MOUSE.LEFT,ZOOM:p.MOUSE.MIDDLE,PAN:p.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(l),s.update(),h=f.NONE},this.update=(r=new p.Vector3,n=(new p.Quaternion).setFromUnitVectors(e.up,new p.Vector3(0,1,0)),i=n.clone().inverse(),a=new p.Vector3,o=new p.Quaternion,function(){var e=s.object.position;return r.copy(e).sub(s.target),r.applyQuaternion(n),m.setFromVector3(r),s.autoRotate&&h===f.NONE&&R(2*Math.PI/60/60*s.autoRotateSpeed),m.theta+=v.theta,m.phi+=v.phi,m.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,m.theta)),m.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=g,m.radius=Math.max(s.minDistance,Math.min(s.maxDistance,m.radius)),s.target.add(y),r.setFromSpherical(m),r.applyQuaternion(i),e.copy(s.target).add(r),s.object.lookAt(s.target),!0===s.enableDamping?(v.theta*=1-s.dampingFactor,v.phi*=1-s.dampingFactor):v.set(0,0,0),g=1,y.set(0,0,0),!!(x||a.distanceToSquared(s.object.position)>d||8*(1-o.dot(s.object.quaternion))>d)&&(s.dispatchEvent(l),a.copy(s.object.position),o.copy(s.object.quaternion),x=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",X,!1),s.domElement.removeEventListener("mousedown",B,!1),s.domElement.removeEventListener("wheel",z,!1),s.domElement.removeEventListener("touchstart",j,!1),s.domElement.removeEventListener("touchend",W,!1),s.domElement.removeEventListener("touchmove",H,!1),document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",k,!1),window.removeEventListener("keydown",G,!1)};var s=this,l={type:"change"},u={type:"start"},c={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},h=f.NONE,d=1e-6,m=new p.Spherical,v=new p.Spherical,g=1,y=new p.Vector3,x=!1,b=new p.Vector2,w=new p.Vector2,_=new p.Vector2,M=new p.Vector2,S=new p.Vector2,T=new p.Vector2,E=new p.Vector2,P=new p.Vector2,A=new p.Vector2;function C(){return Math.pow(.95,s.zoomSpeed)}function R(e){v.theta-=e}function I(e){v.phi-=e}var O,L=(O=new p.Vector3,function(e,t){O.setFromMatrixColumn(t,0),O.multiplyScalar(-e),y.add(O)}),D=function(){var e=new p.Vector3;return function(t,r){e.setFromMatrixColumn(r,1),e.multiplyScalar(t),y.add(e)}}(),N=function(){var e=new p.Vector3;return function(t,r){var n=s.domElement===document?s.domElement.body:s.domElement;if(s.object.isPerspectiveCamera){var i=s.object.position;e.copy(i).sub(s.target);var a=e.length();a*=Math.tan(s.object.fov/2*Math.PI/180),L(2*t*a/n.clientHeight,s.object.matrix),D(2*r*a/n.clientHeight,s.object.matrix)}else s.object instanceof p.OrthographicCamera?(L(t*(s.object.right-s.object.left)/s.object.zoom/n.clientWidth,s.object.matrix),D(r*(s.object.top-s.object.bottom)/s.object.zoom/n.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function V(e){s.object.isPerspectiveCamera?g/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function F(e){s.object.isPerspectiveCamera?g*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function B(e){if(!1!==s.enabled){if(e.preventDefault(),e.button===s.mouseButtons.ORBIT){if(!1===s.enableRotate)return;!function(e){b.set(e.clientX,e.clientY)}(e),h=f.ROTATE}else if(e.button===s.mouseButtons.ZOOM){if(!1===s.enableZoom)return;!function(e){E.set(e.clientX,e.clientY)}(e),h=f.DOLLY}else if(e.button===s.mouseButtons.PAN){if(!1===s.enablePan)return;!function(e){M.set(e.clientX,e.clientY)}(e),h=f.PAN}h!==f.NONE&&(document.addEventListener("mousemove",U,!1),document.addEventListener("mouseup",k,!1),s.dispatchEvent(u))}}function U(e){if(!1!==s.enabled)if(e.preventDefault(),h===f.ROTATE){if(!1===s.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),_.subVectors(w,b);var t=s.domElement===document?s.domElement.body:s.domElement;R(2*Math.PI*_.x/t.clientWidth*s.rotateSpeed),I(2*Math.PI*_.y/t.clientHeight*s.rotateSpeed),b.copy(w),s.update()}(e)}else if(h===f.DOLLY){if(!1===s.enableZoom)return;!function(e){P.set(e.clientX,e.clientY),A.subVectors(P,E),A.y>0?V(C()):A.y<0&&F(C()),E.copy(P),s.update()}(e)}else if(h===f.PAN){if(!1===s.enablePan)return;!function(e){S.set(e.clientX,e.clientY),T.subVectors(S,M),N(T.x,T.y),M.copy(S),s.update()}(e)}}function k(e){!1!==s.enabled&&(document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",k,!1),s.dispatchEvent(c),h=f.NONE)}function z(e){!1===s.enabled||!1===s.enableZoom||h!==f.NONE&&h!==f.ROTATE||(e.preventDefault(),e.stopPropagation(),function(e){e.deltaY<0?F(C()):e.deltaY>0&&V(C()),s.update()}(e),s.dispatchEvent(u),s.dispatchEvent(c))}function G(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){switch(e.keyCode){case s.keys.UP:N(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:N(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:N(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:N(-s.keyPanSpeed,0),s.update()}}(e)}function j(e){if(!1!==s.enabled){switch(e.touches.length){case 1:if(!1===s.enableRotate)return;!function(e){b.set(e.touches[0].pageX,e.touches[0].pageY)}(e),h=f.TOUCH_ROTATE;break;case 2:if(!1===s.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);E.set(0,n)}(e),h=f.TOUCH_DOLLY;break;case 3:if(!1===s.enablePan)return;!function(e){M.set(e.touches[0].pageX,e.touches[0].pageY)}(e),h=f.TOUCH_PAN;break;default:h=f.NONE}h!==f.NONE&&s.dispatchEvent(u)}}function H(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===s.enableRotate)return;if(h!==f.TOUCH_ROTATE)return;!function(e){w.set(e.touches[0].pageX,e.touches[0].pageY),_.subVectors(w,b);var t=s.domElement===document?s.domElement.body:s.domElement;R(2*Math.PI*_.x/t.clientWidth*s.rotateSpeed),I(2*Math.PI*_.y/t.clientHeight*s.rotateSpeed),b.copy(w),s.update()}(e);break;case 2:if(!1===s.enableZoom)return;if(h!==f.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);P.set(0,n),A.subVectors(P,E),A.y>0?F(C()):A.y<0&&V(C()),E.copy(P),s.update()}(e);break;case 3:if(!1===s.enablePan)return;if(h!==f.TOUCH_PAN)return;!function(e){S.set(e.touches[0].pageX,e.touches[0].pageY),T.subVectors(S,M),N(T.x,T.y),M.copy(S),s.update()}(e);break;default:h=f.NONE}}function W(e){!1!==s.enabled&&(s.dispatchEvent(c),h=f.NONE)}function X(e){e.preventDefault()}s.domElement.addEventListener("contextmenu",X,!1),s.domElement.addEventListener("mousedown",B,!1),s.domElement.addEventListener("wheel",z,!1),s.domElement.addEventListener("touchstart",j,!1),s.domElement.addEventListener("touchend",W,!1),s.domElement.addEventListener("touchmove",H,!1),window.addEventListener("keydown",G,!1),this.update()},p.OrbitControls.prototype=(0,u.default)(p.EventDispatcher.prototype),p.OrbitControls.prototype.constructor=p.OrbitControls,(0,s.default)(p.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),p.VRControls=function(e,t){var r,n,i=this,a=new p.Matrix4,o=null;"VRFrameData"in window&&(o=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(e){n=e,e.length>0?r=e[0]:t&&t("VR input not available.")}).catch(function(){console.warn("THREE.VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return r},this.setVRDisplay=function(e){r=e},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),n},this.getStandingMatrix=function(){return a},this.update=function(){var t;r&&(r.getFrameData?(r.getFrameData(o),t=o.pose):r.getPose?t=r.getPose():r.getImmediatePose&&(t=r.getImmediatePose()),null!==t.orientation?e.quaternion.fromArray(t.orientation):e.quaternion.set(0,0,0,1),null!==t.position?e.position.fromArray(t.position):e.position.set(0,0,0),this.standing&&(r.stageParameters?(e.updateMatrix(),a.fromArray(r.stageParameters.sittingToStandingTransform),e.applyMatrix(a)):e.position.setY(e.position.y+this.userHeight)),e.position.multiplyScalar(i.scale))},this.resetPose=function(){r&&r.resetPose()},this.resetSensor=function(){console.warn("THREE.VRControls: .resetSensor() is now .resetPose()."),this.resetPose()},this.zeroSensor=function(){console.warn("THREE.VRControls: .zeroSensor() is now .resetPose()."),this.resetPose()},this.dispose=function(){r=null}},p.Color.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},p.EXRLoader=function(e){this.manager=void 0!==e?e:p.DefaultLoadingManager},p.EXRLoader.prototype=(0,u.default)(p.DataTextureLoader.prototype),p.EXRLoader.prototype._parser=function(e){var t=65536,r=t>>3,n=14,i=65537,a=1<<n,s=a-1,l=59,u=63,c=2+u-l,f=8,h=4,d=4,m=2,v=1;var g={l:0,c:0,lc:0};function y(e,t,r,n,i){for(;r<e;)t=t<<8|V(n,i),r+=8;r-=e,g.l=t>>r&(1<<e)-1,g.c=t,g.lc=r}var x=new Array(59);function b(e,t,r,n,a,o,s){for(var f=r,h=0,d=0;a<=o;a++){if(f.value-r.value>n)return!1;y(6,h,d,e,f);var p=g.l;if(h=g.c,d=g.lc,s[a]=p,p==u){if(f.value-r.value>n)throw"Something wrong with hufUnpackEncTable";y(8,h,d,e,f);var m=g.l+c;if(h=g.c,d=g.lc,a+m>o+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)s[a++]=0;a--}else if(p>=l){if(a+(m=p-l+2)>o+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)s[a++]=0;a--}}!function(e){for(var t=0;t<=58;++t)x[t]=0;for(t=0;t<i;++t)x[e[t]]+=1;var r=0;for(t=58;t>0;--t){var n=r+x[t]>>1;x[t]=r,r=n}for(t=0;t<i;++t){var a=e[t];a>0&&(e[t]=a|x[a]++<<6)}}(s)}function w(e){return 63&e}function _(e){return e>>6}var M={c:0,lc:0};function S(e,t,r,n){e=e<<8|V(r,n),t+=8,M.c=e,M.lc=t}var T={c:0,lc:0};function E(e,t,r,n,i,a,o,s,l,u){if(e==t){n<8&&(S(r,n,i,o),r=M.c,n=M.lc);var c=r>>(n-=8);c=new Uint8Array([c])[0];if(l.value+c>u)return!1;for(var f=s[l.value-1];c-- >0;)s[l.value++]=f}else{if(!(l.value<u))return!1;s[l.value++]=e}T.c=r,T.lc=n}function P(e){var t=function(e){return 65535&e}(e);return t>32767?t-65536:t}var A={a:0,b:0};function C(e,t){var r=P(e),n=P(t),i=r+(1&n)+(n>>1),a=i,o=i-n;A.a=a,A.b=o}function R(e,t,r,n,i,a,o){for(var s,l=r>i?i:r,u=1;u<=l;)u<<=1;for(s=u>>=1,u>>=1;u>=1;){for(var c,f,h,d,p=0,m=p+a*(i-s),v=a*u,g=a*s,y=n*u,x=n*s;p<=m;p+=g){for(var b=p,w=p+n*(r-s);b<=w;b+=x){var _=b+y,M=(S=b+v)+y;C(t[b+e],t[S+e]),c=A.a,h=A.b,C(t[_+e],t[M+e]),f=A.a,d=A.b,C(c,f),t[b+e]=A.a,t[_+e]=A.b,C(h,d),t[S+e]=A.a,t[M+e]=A.b}if(r&u){var S=b+v;C(t[b+e],t[S+e]),c=A.a,t[S+e]=A.b,t[b+e]=c}}if(i&u)for(b=p,w=p+n*(r-s);b<=w;b+=x){_=b+y;C(t[b+e],t[_+e]),c=A.a,t[_+e]=A.b,t[b+e]=c}s=u,u>>=1}return p}function I(e,t,r,l,u,c,f){var h=r.value,d=N(t,r),p=N(t,r);r.value+=4;var m=N(t,r);if(r.value+=4,d<0||d>=i||p<0||p>=i)throw"Something wrong with HUF_ENCSIZE";var v=new Array(i),g=new Array(a);if(function(e){for(var t=0;t<a;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(g),b(e,0,r,l-(r.value-h),d,p,v),m>8*(l-(r.value-h)))throw"Something wrong with hufUncompress";!function(e,t,r,i){for(;t<=r;t++){var a=_(e[t]),o=w(e[t]);if(a>>o)throw"Invalid table entry";if(o>n){if((c=i[a>>o-n]).len)throw"Invalid table entry";if(c.lit++,c.p){var s=c.p;c.p=new Array(c.lit);for(var l=0;l<c.lit-1;++l)c.p[l]=s[l]}else c.p=new Array(1);c.p[c.lit-1]=t}else if(o){var u=0;for(l=1<<n-o;l>0;l--){var c;if((c=i[(a<<n-o)+u]).len||c.p)throw"Invalid table entry";c.len=o,c.lit=t,u++}}}}(v,d,p,g),function(e,t,r,i,a,l,u,c,f,h){for(var d=0,p=0,m=c,v=(0,o.default)(a.value+(l+7)/8);a.value<v;)for(S(d,p,r,a),d=M.c,p=M.lc;p>=n;)if((b=t[d>>p-n&s]).len)p-=b.len,E(b.lit,u,d,p,r,0,a,f,h,m),d=T.c,p=T.lc;else{if(!b.p)throw"hufDecode issues";var g;for(g=0;g<b.lit;g++){for(var y=w(e[b.p[g]]);p<y&&a.value<v;)S(d,p,r,a),d=M.c,p=M.lc;if(p>=y&&_(e[b.p[g]])==(d>>p-y&(1<<y)-1)){p-=y,E(b.p[g],u,d,p,r,0,a,f,h,m),d=T.c,p=T.lc;break}}if(g==b.lit)throw"hufDecode issues"}var x=8-l&7;for(d>>=x,p-=x;p>0;){var b;if(!(b=t[d<<n-p&s]).len)throw"hufDecode issues";p-=b.len,E(b.lit,u,d,p,r,0,a,f,h,m),d=T.c,p=T.lc}}(v,g,e,0,r,m,p,f,u,c)}function O(e,n,i,a,o,s,l,u,c,f){var h=new Uint8Array(r),d=k(a,o),p=k(a,o);if(p>=r)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(d<=p)for(var m=0;m<p-d+1;m++)h[m+d]=F(a,o);var v=new Uint16Array(t);!function(e,r){for(var n=0,i=0;i<t;++i)(0==i||e[i>>3]&1<<(7&i))&&(r[n++]=i);for(var a=n-1;n<t;)r[n++]=0}(h,v);I(i,a,o,N(a,o),e,n,s);var g=new Array(l),y=0;for(m=0;m<l;m++){u[m];g[m]={},g[m].start=y,g[m].end=g[m].start,g[m].nx=c,g[m].ny=f,g[m].size=1,y+=g[m].nx*g[m].ny*g[m].size}var x=0;for(m=0;m<l;m++)for(var b=0;b<g[m].size;++b)x+=R(b+x,e,g[m].nx,g[m].size,g[m].ny,g[m].nx*g[m].size);return function(e,t,r){for(var n=0;n<r;++n)t[n]=e[t[n]]}(v,e,y),!0}function L(e,t){for(var r=new Uint8Array(e),n=0;0!=r[t.value+n];)n+=1;var i=(new TextDecoder).decode(r.slice(t.value,t.value+n));return t.value=t.value+n+1,i}function D(e,t){var r=e.getUint32(0,!0);return t.value=t.value+f,r}function N(e,t){var r=e.getUint32(t.value,!0);return t.value=t.value+d,r}function V(e,t){var r=e[t.value];return t.value=t.value+v,r}function F(e,t){var r=e.getUint8(t.value);return t.value=t.value+v,r}function B(e,t){var r=e.getFloat32(t.value,!0);return t.value+=h,r}function U(e){var t=(31744&e)>>10,r=1023&e;return(e>>15?-1:1)*(t?31===t?r?NaN:1/0:Math.pow(2,t-15)*(1+r/1024):r/1024*6103515625e-14)}function k(e,t){var r=e.getUint16(t.value,!0);return t.value+=m,r}function z(e,t){return U(k(e,t))}function G(e,t,r,n,i){if("string"===n||"iccProfile"===n)return function(e,t,r){var n=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+r));return t.value=t.value+r,n}(t,r,i);if("chlist"===n)return function(e,t,r,n){for(var i=r.value,a=[];r.value<i+n-1;){var o=L(t,r),s=N(e,r),l=F(e,r);r.value+=3;var u=N(e,r),c=N(e,r);a.push({name:o,pixelType:s,pLinear:l,xSampling:u,ySampling:c})}return r.value+=1,a}(e,t,r,i);if("chromaticities"===n)return function(e,t){return{redX:B(e,t),redY:B(e,t),greenX:B(e,t),greenY:B(e,t),blueX:B(e,t),blueY:B(e,t),whiteX:B(e,t),whiteY:B(e,t)}}(e,r);if("compression"===n)return function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION"][F(e,t)]}(e,r);if("box2i"===n)return function(e,t){return{xMin:N(e,t),yMin:N(e,t),xMax:N(e,t),yMax:N(e,t)}}(e,r);if("lineOrder"===n)return function(e,t){return["INCREASING_Y"][F(e,t)]}(e,r);if("float"===n)return B(e,r);if("v2f"===n)return function(e,t){return[B(e,t),B(e,t)]}(e,r);if("int"===n)return N(e,r);throw"Cannot parse value for unsupported type: "+n}for(var j=new DataView(e),H=new Uint8Array(e),W={},X=(j.getUint32(0,!0),j.getUint8(4,!0),j.getUint8(5,!0),{value:8}),q=!0;q;){var Y=L(e,X);if(0==Y)q=!1;else{var Z=G(j,e,X,L(e,X),N(j,X));W[Y]=Z}}var J=W.dataWindow.yMax+1,Q=1;"PIZ_COMPRESSION"===W.compression&&(Q=32);for(var K=J/Q,$=0;$<K;$++)D(j,X);var ee=W.dataWindow.xMax-W.dataWindow.xMin+1,te=W.dataWindow.yMax-W.dataWindow.yMin+1,re=W.channels.length,ne=new Float32Array(ee*te*re),ie={R:0,G:1,B:2,A:3};if("NO_COMPRESSION"===W.compression)for(var ae=0;ae<te;ae++)for(var oe=N(j,X),se=(N(j,X),0);se<W.channels.length;se++){var le=ie[W.channels[se].name];if(1!==W.channels[se].pixelType)throw"Only supported pixel format is HALF";for(var ue=0;ue<ee;ue++){var ce=z(j,X);ne[ee*re*(te-oe)+ue*re+le]=ce}}else{if("PIZ_COMPRESSION"!==W.compression)throw"Cannot decompress unsupported compression";for(var fe=0;fe<te/Q;fe++){N(j,X),N(j,X);var he=ee*Q*(2*W.channels.length),de=new Uint16Array(he);O(de,{value:0},H,j,X,he,re,W.channels,ee,Q);for(var pe=0;pe<Q;pe++)for(se=0;se<W.channels.length;se++){le=ie[W.channels[se].name];if(1!==W.channels[se].pixelType)throw"Only supported pixel format is HALF";for(ue=0;ue<ee;ue++){ce=U(de[se*(Q*ee)+pe*ee+ue]);ne[ee*re*(te-(pe+fe*Q))+ue*re+le]=ce}}}}return{header:W,width:ee,height:te,data:ne,format:4==W.channels.length?p.RGBAFormat:p.RGBFormat,type:p.FloatType}},p.HDRLoader=p.RGBELoader=function(e){this.manager=void 0!==e?e:p.DefaultLoadingManager},p.RGBELoader.prototype=(0,u.default)(p.DataTextureLoader.prototype),p.RGBELoader.prototype._parser=function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},r=function(e,t,r){t=t||1024;for(var n=e.pos,i=-1,a=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));0>(i=s.indexOf("\n"))&&a<t&&n<e.byteLength;)o+=s,a+=s.length,n+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return-1<i&&(!1!==r&&(e.pos+=a+i+1),o+s.slice(0,i))},n=new Uint8Array(e);n.byteLength;n.pos=0;var i=function(e){var n,i,a=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(n=r(e)))return t(1,"no header found");if(!(i=n.match(/^#\?(\S+)$/)))return t(3,"bad initial token");for(u.valid|=1,u.programtype=i[1],u.string+=n+"\n";!1!==(n=r(e));)if(u.string+=n+"\n","#"!==n.charAt(0)){if((i=n.match(a))&&(u.gamma=parseFloat(i[1],10)),(i=n.match(o))&&(u.exposure=parseFloat(i[1],10)),(i=n.match(s))&&(u.valid|=2,u.format=i[1]),(i=n.match(l))&&(u.valid|=4,u.height=parseInt(i[1],10),u.width=parseInt(i[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=n+"\n";return 2&u.valid?4&u.valid?u:t(3,"missing image size specifier"):t(3,"missing format specifier")}(n);if(-1!==i){var a=i.width,o=i.height,s=function(e,r,n){var i,a,o,s,l,u,c,f,h,d,p,m,v,g=r,y=n;if(g<8||g>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(g!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");if(!(i=new Uint8Array(4*r*n))||!i.length)return t(4,"unable to allocate buffer space");for(a=0,o=0,f=4*g,v=new Uint8Array(4),u=new Uint8Array(f);y>0&&o<e.byteLength;){if(o+4>e.byteLength)return t(1);if(v[0]=e[o++],v[1]=e[o++],v[2]=e[o++],v[3]=e[o++],2!=v[0]||2!=v[1]||(v[2]<<8|v[3])!=g)return t(3,"bad rgbe scanline format");for(c=0;c<f&&o<e.byteLength;){if((m=(s=e[o++])>128)&&(s-=128),0===s||c+s>f)return t(3,"bad scanline data");if(m)for(l=e[o++],h=0;h<s;h++)u[c++]=l;else u.set(e.subarray(o,o+s),c),c+=s,o+=s}for(d=g,h=0;h<d;h++)p=0,i[a]=u[h+p],p+=g,i[a+1]=u[h+p],p+=g,i[a+2]=u[h+p],p+=g,i[a+3]=u[h+p],a+=4;y--}return i}(n.subarray(n.pos),a,o);if(-1!==s)return{width:a,height:o,data:s,header:i.string,gamma:i.gamma,exposure:i.exposure,format:p.RGBEFormat,type:p.UnsignedByteType}}return null},p.EquirectangularToCubeGenerator=function(e,t){this.sourceTexture=e,this.resolution=t.resolution||512,this.views=[{x:0,y:-90,z:180},{x:0,y:90,z:180},{x:90,y:0,z:0},{x:-90,y:0,z:0},{x:0,y:180,z:180},{x:0,y:0,z:180}],this.camera=new p.PerspectiveCamera(90,1,.1,10),this.boxMesh=new p.Mesh(new p.BoxBufferGeometry(1,1,1),this.getShader()),this.boxMesh.material.side=p.BackSide,this.scene=new p.Scene,this.scene.add(this.boxMesh);var r={format:t.format||this.sourceTexture.format,magFilter:this.sourceTexture.magFilter,minFilter:this.sourceTexture.minFilter,type:t.type||this.sourceTexture.type,generateMipmaps:this.sourceTexture.generateMipmaps,anisotropy:this.sourceTexture.anisotropy,encoding:this.sourceTexture.encoding};this.renderTarget=new p.WebGLRenderTargetCube(this.resolution,this.resolution,r)},p.EquirectangularToCubeGenerator.prototype={constructor:p.EquirectangularToCubeGenerator,update:(d=new p.Euler(0,0,0,"XYZ"),function(e){for(var t=0;t<6;t++){this.renderTarget.activeCubeFace=t;var r=this.views[t];this.camera.position.set(0,0,0);var n=Math.PI/180;this.camera.quaternion.setFromEuler(d.set(r.x*n,r.y*n,r.z*n)),this.boxMesh.material.uniforms.i.value=t,e.render(this.scene,this.camera,this.renderTarget,!0)}return this.renderTarget.texture}),getShader:function(){var e=new p.ShaderMaterial({uniforms:{equirectangularMap:{value:this.sourceTexture},i:{value:0}},vertexShader:"varying vec3 localPosition;\n\t\t\t\t\n\t\t\t\tvoid main() {\n\t\t\t\t\tlocalPosition = position;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec3 localPosition;\n\t\t\t\tuniform sampler2D equirectangularMap;\n\t\t\t\tuniform int i;\n\t\t\t\tconst float INV_PI = 0.3183099;\n\t\t\t\tconst float INV_TWO_PI = 0.1591549;\n\t\t\t\t\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec3 v = normalize(localPosition);\n\t\t\t\t\tvec2 uv = vec2(atan(v.z, v.x), asin(v.y));\n\t\t\t\t\t// Map uv onto unit square; flip it upside down and rotate a quarter-turn about z.\n\t\t\t    uv *= vec2(-INV_TWO_PI, -INV_PI);\n\t\t\t\t\tuv += 0.5;\n\t\t\t\t\tuv.x = mod(uv.x + 0.25, 1.0);\n\t\t\t\t\t\n\t\t\t\t\tgl_FragColor = texture2D(equirectangularMap, uv);\n\t\t\t\t}",blending:p.NoBlending});return e.type="EquirectangularToCubeGenerator",e},dispose:function(){this.boxMesh.geometry.dispose(),this.boxMesh.material.dispose(),this.renderTarget.dispose()}},p.CombinedCamera=function(e,t,r,n,i){p.Camera.call(this),this.fov=r,this.far=i,this.near=n,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2,this.aspect=e/t,this.zoom=1,this.focus=10,this.view=null,this.hyperfocusOffset=0,this.hyperfocusScale=.5,this.cameraO=new p.OrthographicCamera(this.left,this.right,this.top,this.bottom,this.near,this.far),this.cameraP=new p.PerspectiveCamera(this.fov,this.aspect,this.near,this.far),this.toPerspective()},p.CombinedCamera.prototype=(0,u.default)(p.Camera.prototype),p.CombinedCamera.prototype.constructor=p.CombinedCamera,p.CombinedCamera.prototype.toPerspective=function(){this.cameraP.near=this.near,this.cameraP.far=this.far,this.cameraP.aspect=this.aspect,this.cameraP.fov=this.fov,this.cameraP.zoom=this.zoom,this.cameraP.view=this.view,this.cameraP.focus=this.focus,this.cameraP.updateProjectionMatrix(),this.projectionMatrix=this.cameraP.projectionMatrix,this.inPerspectiveMode=!0,this.inOrthographicMode=!1},p.CombinedCamera.prototype.toOrthographic=function(){var e=this.fov,t=this.aspect,r=Math.tan(e*Math.PI/180/2)*(this.hyperfocusOffset+this.hyperfocusScale*(this.near+this.far)),n=r*t;this.cameraO.near=this.near,this.cameraO.far=this.far,this.cameraO.left=-n,this.cameraO.right=n,this.cameraO.top=r,this.cameraO.bottom=-r,this.cameraO.zoom=this.zoom,this.cameraO.view=this.view,this.cameraO.updateProjectionMatrix(),this.projectionMatrix=this.cameraO.projectionMatrix,this.inPerspectiveMode=!1,this.inOrthographicMode=!0},p.CombinedCamera.prototype.setSize=function(e,t){this.aspect=e/t,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2},p.CombinedCamera.prototype.setFov=function(e){this.fov=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},p.CombinedCamera.prototype.copy=function(e){return p.Camera.prototype.copy.call(this,e),this.fov=e.fov,this.far=e.far,this.near=e.near,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.zoom=e.zoom,this.view=null===e.view?null:(0,c.default)({},e.view),this.aspect=e.aspect,this.hyperfocusOffset=e.hyperfocusOffset,this.hyperfocusScale=e.hyperfocusScale,this.cameraO.copy(e.cameraO),this.cameraP.copy(e.cameraP),this.inOrthographicMode=e.inOrthographicMode,this.inPerspectiveMode=e.inPerspectiveMode,this},p.CombinedCamera.prototype.setViewOffset=function(e,t,r,n,i,a){this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:n,width:i,height:a},this.inPerspectiveMode?(this.aspect=e/t,this.toPerspective()):this.toOrthographic()},p.CombinedCamera.prototype.clearViewOffset=function(){this.view=null,this.updateProjectionMatrix()},p.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())},p.CombinedCamera.prototype.setLens=function(e,t){void 0===t&&(t=35);var r=.5*t/(e*Math.max(this.cameraP.aspect,1)),n=2*p.Math.RAD2DEG*Math.atan(r);return this.setFov(n),n},p.CombinedCamera.prototype.setZoom=function(e){this.zoom=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},p.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0,this.rotation.y=0,this.rotation.z=0,this.position.x=0,this.position.y=0,this.position.z=-15},p.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0,this.rotation.y=Math.PI,this.rotation.z=0,this.position.x=0,this.position.y=0,this.position.z=15},p.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0,this.rotation.y=-Math.PI/2,this.rotation.z=0,this.position.x=-15,this.position.y=0,this.position.z=0},p.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0,this.rotation.y=Math.PI/2,this.rotation.z=0,this.position.x=15,this.position.y=0,this.position.z=0},p.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.position.x=0,this.position.y=15,this.position.z=0},p.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.position.x=0,this.position.y=-15,this.position.z=0},p.CombinedCamera.prototype.toPerspectiveView=function(){this.rotation.x=-Math.PI/4,this.rotation.y=-Math.PI/4,this.rotation.z=0,this.position.x=4,this.position.y=4,this.position.z=4},p.ParallaxBarrierEffect=function(e){var t=new p.OrthographicCamera(-1,1,1,-1,0,1),r=new p.Scene,n=new p.StereoCamera,i={minFilter:p.LinearFilter,magFilter:p.NearestFilter,format:p.RGBAFormat},a=new p.WebGLRenderTarget(512,512,i),o=new p.WebGLRenderTarget(512,512,i),s=new p.ShaderMaterial({uniforms:{mapLeft:{value:a.texture},mapRight:{value:o.texture},resolution:{value:new p.Vector2(512,512)}},vertexShader:["varying vec2 vUv;","void main() {"," vUv = vec2( uv.x, uv.y );"," gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D mapLeft;","uniform sampler2D mapRight;","uniform vec2 resolution;","varying vec2 vUv;","void main() {"," vec2 uv = vUv;"," if ( ( mod( gl_FragCoord.x + 1.0, 2.0 ) ) > 1.00 ) {","   gl_FragColor = texture2D( mapLeft, uv );"," } else {","   gl_FragColor = texture2D( mapRight, uv - vec2( resolution.x, 0 ) );"," }","}"].join("\n")}),l=new p.Mesh(new p.PlaneBufferGeometry(2,2),s);r.add(l),this.setSize=function(t,r){e.setSize(t,r);var n=e.getPixelRatio();s.uniforms.resolution.value.set(1/t,1/r),a.setSize(t*n/2+1,r*n),o.setSize(t*n/2+1,r*n)},this.render=function(i,s){i.updateMatrixWorld(),null===s.parent&&s.updateMatrixWorld(),n.update(s),e.render(i,n.cameraL,a,!0),e.render(i,n.cameraR,o,!0),e.render(r,t)}},p.StereoEffect=function(e){var t=new p.StereoCamera;t.aspect=.5,this.setEyeSeparation=function(e){t.eyeSep=e},this.setSize=function(t,r){e.setSize(t,r)},this.updateStereo=function(e){t.update(e)},this.getCameraL=function(){return t.cameraL},this.getCameraR=function(){return t.cameraR},this.render=function(r,n){r.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),t.update(n);var i=e.getSize();e.autoClear&&e.clear(),e.setScissorTest(!0),e.setScissor(0,0,i.width/2,i.height),e.setViewport(0,0,i.width/2,i.height),e.render(r,t.cameraL),e.setScissor(i.width/2,0,i.width/2,i.height),e.setViewport(i.width/2,0,i.width/2,i.height),e.render(r,t.cameraR),e.setScissorTest(!1)}},p.VREffect=function(e,t){var r,n,i,o,s=new p.Vector3,l=new p.Vector3,u=null;"VRFrameData"in window&&(u=new window.VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(e){n=e,e.length>0?r=e[0]:t&&t("HMD not available")}).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1,this.scale=1;var c=this,f=e.getSize(),h=!1,d=e.getPixelRatio();this.getVRDisplay=function(){return r},this.setVRDisplay=function(e){r=e},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),n},this.setSize=function(t,n,i){if(f={width:t,height:n},h=i,c.isPresenting){var a=r.getEyeParameters("left");e.setPixelRatio(1),e.setSize(2*a.renderWidth,a.renderHeight,!1)}else e.setPixelRatio(d),e.setSize(t,n,i)};var m=e.domElement,v=[0,0,.5,1],g=[.5,0,.5,1];function y(){var t=c.isPresenting;if(c.isPresenting=void 0!==r&&r.isPresenting,c.isPresenting){var n=r.getEyeParameters("left"),i=n.renderWidth,a=n.renderHeight;t||(d=e.getPixelRatio(),f=e.getSize(),e.setPixelRatio(1),e.setSize(2*i,a,!1))}else t&&(e.setPixelRatio(d),e.setSize(f.width,f.height,h))}window.addEventListener("vrdisplaypresentchange",y,!1),this.setFullScreen=function(e){return new a.default(function(t,n){void 0!==r?c.isPresenting!==e?t(e?r.requestPresent([{source:m}]):r.exitPresent()):t():n(new Error("No VR hardware found."))})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(e){return void 0!==r?r.requestAnimationFrame(e):window.requestAnimationFrame(e)},this.cancelAnimationFrame=function(e){void 0!==r?r.cancelAnimationFrame(e):window.cancelAnimationFrame(e)},this.submitFrame=function(){void 0!==r&&c.isPresenting&&r.submitFrame()},this.autoSubmitFrame=!0;var x=new p.Matrix4,b=new p.PerspectiveCamera;b.layers.enable(1);var w=new p.PerspectiveCamera;function _(e,t,r,n){var i=Math.PI/180;return function(e,t,r,n){t=void 0===t||t,r=void 0===r?.01:r,n=void 0===n?1e4:n;var i=t?-1:1,a=new p.Matrix4,o=a.elements,s=function(e){var t=2/(e.leftTan+e.rightTan),r=(e.leftTan-e.rightTan)*t*.5,n=2/(e.upTan+e.downTan);return{scale:[t,n],offset:[r,(e.upTan-e.downTan)*n*.5]}}(e);return o[0]=s.scale[0],o[1]=0,o[2]=s.offset[0]*i,o[3]=0,o[4]=0,o[5]=s.scale[1],o[6]=-s.offset[1]*i,o[7]=0,o[8]=0,o[9]=0,o[10]=n/(r-n)*-i,o[11]=n*r/(r-n),o[12]=0,o[13]=0,o[14]=i,o[15]=0,a.transpose(),a}({upTan:Math.tan(e.upDegrees*i),downTan:Math.tan(e.downDegrees*i),leftTan:Math.tan(e.leftDegrees*i),rightTan:Math.tan(e.rightDegrees*i)},t,r,n)}w.layers.enable(2),this.getCameraL=function(){return b},this.getCameraR=function(){return w},this.render=function(t,n,a,f){if(r&&c.isPresenting){var h=t.autoUpdate;h&&(t.updateMatrixWorld(),t.autoUpdate=!1),Array.isArray(t)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),t=t[0]);var d,p,m=e.getSize(),y=r.getLayers();if(y.length){var M=y[0];d=null!==M.leftBounds&&4===M.leftBounds.length?M.leftBounds:v,p=null!==M.rightBounds&&4===M.rightBounds.length?M.rightBounds:g}else d=v,p=g;if(i={x:Math.round(m.width*d[0]),y:Math.round(m.height*d[1]),width:Math.round(m.width*d[2]),height:Math.round(m.height*d[3])},o={x:Math.round(m.width*p[0]),y:Math.round(m.height*p[1]),width:Math.round(m.width*p[2]),height:Math.round(m.height*p[3])},a?(e.setRenderTarget(a),a.scissorTest=!0):(e.setRenderTarget(null),e.setScissorTest(!0)),(e.autoClear||f)&&e.clear(),null===n.parent&&n.updateMatrixWorld(),r.getFrameData)r.depthNear=n.near,r.depthFar=n.far,r.getFrameData(u),x.elements.set(u.leftViewMatrix),x.getInverse(x),x.premultiply(n.matrixWorld),x.decompose(b.position,b.quaternion,b.scale),x.elements.set(u.rightViewMatrix),x.getInverse(x),x.premultiply(n.matrixWorld),x.decompose(w.position,w.quaternion,w.scale),b.projectionMatrix.elements.set(u.leftProjectionMatrix),w.projectionMatrix.elements.set(u.rightProjectionMatrix);else{var S=r.getEyeParameters("left"),T=r.getEyeParameters("right");s.fromArray(S.offset),l.fromArray(T.offset),n.matrixWorld.decompose(b.position,b.quaternion,b.scale),w.position.copy(b.position),w.quaternion.copy(b.quaternion),w.scale.copy(b.scale);var E=this.scale;b.translateOnAxis(s,E),w.translateOnAxis(l,E),b.projectionMatrix=_(S.fieldOfView,!0,n.near,n.far),w.projectionMatrix=_(T.fieldOfView,!0,n.near,n.far)}return a?(a.viewport.set(i.x,i.y,i.width,i.height),a.scissor.set(i.x,i.y,i.width,i.height)):(e.setViewport(i.x,i.y,i.width,i.height),e.setScissor(i.x,i.y,i.width,i.height)),e.render(t,b,a,f),a?(a.viewport.set(o.x,o.y,o.width,o.height),a.scissor.set(o.x,o.y,o.width,o.height)):(e.setViewport(o.x,o.y,o.width,o.height),e.setScissor(o.x,o.y,o.width,o.height)),e.render(t,w,a,f),a?(a.viewport.set(0,0,m.width,m.height),a.scissor.set(0,0,m.width,m.height),a.scissorTest=!1,e.setRenderTarget(null)):(e.setViewport(0,0,m.width,m.height),e.setScissorTest(!1)),h&&(t.autoUpdate=!0),void(c.autoSubmitFrame&&c.submitFrame())}e.render(t,n,a,f)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",y,!1)}},p.VRController=function(e,t){p.Object3D.call(this);var r,n=this,i=[0,0],a=!1,o=!1,s=!1,l=!1;void 0===t&&(t=0),this.matrixAutoUpdate=!1,this.standingMatrix=new p.Matrix4,this.getGamepad=function(){return r},this.getButtonState=function(e){return"thumbpad"===e?a:"trigger"===e?o:"grips"===e?s:"menu"===e?l:void 0},this.update=function(u,c){if(void 0!==(r=function(e){for(var r=navigator.getGamepads(),n=0,i=0;n<4;n++){var a=r[n];if(a&&a.id===e){if(i===t)return a;i++}}}(e))&&r.pose){var f=r.pose;null!==r.pose.position?n.position.fromArray(f.position):n.position.fromArray([0,1,0]),null!==r.pose.orientation?n.quaternion.fromArray(f.orientation):n.quaternion.set(0,0,0,1),n.matrix.compose(n.position,n.quaternion,n.scale),n.matrix.multiplyMatrices(n.standingMatrix,n.matrix),n.matrix.decompose(n.position,n.quaternion,n.scale),n.matrixWorldNeedsUpdate=!0,n.visible=!0}else n.visible=!1;if(r){if(!r.axes||i[0]===r.axes[0]&&i[1]===r.axes[1]||(i[0]=r.axes[0],i[1]=r.axes[1],n.dispatchEvent({type:"axischanged",axes:i})),r.buttons[0]&&a!==r.buttons[0].pressed)if(a=r.buttons[0].pressed,u&&c){var h={which:2,position:n.position,quaternion:n.quaternion};a?u(h):c(h)}else{var d=new Event(a?"thumbpaddown":"thumbpadup");window.dispatchEvent(d)}if(r.buttons[1]&&o!==r.buttons[1].pressed)if(o=r.buttons[1].pressed,u&&c){h={which:1,position:n.position,quaternion:n.quaternion};o?u(h):c(h)}else{d=new Event(o?"triggerdown":"triggerup");window.dispatchEvent(d)}if(r.buttons[2]&&s!==r.buttons[2].pressed)if(s=r.buttons[2].pressed,u&&c){h={which:3,position:n.position,quaternion:n.quaternion};s?u(h):c(h)}else{d=new Event(s?"gripsdown":"gripsup");window.dispatchEvent(d)}if(r.buttons[3]&&l!==r.buttons[3].pressed)if(l=r.buttons[3].pressed,u&&c){h={which:4,position:n.position,quaternion:n.quaternion};l?u(h):c(h)}else{d=new Event(l?"menudown":"menuup");window.dispatchEvent(d)}}}},p.VRController.prototype=(0,u.default)(p.Object3D.prototype),p.VRController.prototype.constructor=p.VRController;var m=(n={blending:p.NormalBlending,side:p.DoubleSide,premultipliedAlpha:!0},(0,i.default)(n,"side",p.DoubleSide),(0,i.default)(n,"depthTest",!1),(0,i.default)(n,"depthWrite",!1),(0,i.default)(n,"transparent",!0),(0,i.default)(n,"uniforms",{ModelViewMatrix:{type:"m4",value:(new p.Matrix4).identity()},sparkleTexture:{type:"t",value:null},screenTexture:{type:"t",value:null},noiseTexture:{type:"t",value:null},scale:{type:"f",value:1},intensity:{type:"f",value:1}}),(0,i.default)(n,"vertexShader","varying vec2 vUv;\n      varying vec2 sparkleCentreUV;\n      uniform mat4 ModelViewMatrix;\n      uniform float scale;\n      \n      void main() {\n          vUv = uv;\n          vec2 alignedPosition = position.xy * scale;\n          vec4 finalPosition = ModelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n          finalPosition.xy += alignedPosition;\n          finalPosition = projectionMatrix * finalPosition;\n          vec4 sparkleProjectedCentre = projectionMatrix * ModelViewMatrix * vec4(0.0,0.0,0.0,1.0);\n          sparkleCentreUV = (sparkleProjectedCentre.xy/sparkleProjectedCentre.w + 1.0)*0.5;\n          gl_Position = finalPosition;\n      }"),(0,i.default)(n,"fragmentShader","#include <common>\n     varying vec2 vUv;\n     varying vec2 sparkleCentreUV;\n     uniform sampler2D sparkleTexture;\n     uniform sampler2D screenTexture;\n     uniform sampler2D noiseTexture;\n     uniform float intensity;\n     \n     void main() {\n          vec4 screenColor = texture2D( screenTexture, sparkleCentreUV );\n          float screenIntensity = pow( average( screenColor.xyz ), 3.0 );\n          float noise = texture2D( noiseTexture, sparkleCentreUV ).r;\n          gl_FragColor = vec4( texture2D( sparkleTexture, vUv ).a * screenIntensity * noise * intensity );\n    }"),n);p.Sparkle=function(e){this.texture=e,this.geometry=new p.PlaneGeometry(1,1,0),this.material=new p.ShaderMaterial(m),this.material.uniforms=p.UniformsUtils.clone(m.uniforms),void 0!==this.texture&&(this.material.uniforms.sparkleTexture.value=e),this.mesh=new p.Mesh(this.geometry,this.material),this.rotationSpeedFactor=5},p.Sparkle.prototype={constructor:p.Sparkle,shallowCopy:function(){var e=new p.Sparkle(this.texture);return e.mesh.position.copy(this.mesh.position),e.mesh.quaternion.copy(this.mesh.quaternion),e.mesh.scale.copy(this.mesh.scale),e.material.uniforms.scale.value=this.material.uniforms.scale.value,e.material.uniforms.intensity.value=this.material.uniforms.intensity.value,e.material.uniforms.screenTexture.value=this.material.uniforms.screenTexture.value,e.material.uniforms.noiseTexture.value=this.material.uniforms.noiseTexture.value,e.material.uniforms.ModelViewMatrix.value.copy(this.material.uniforms.ModelViewMatrix.value),e.rotationSpeedFactor=this.rotationSpeedFactor,e},setScale:function(e){this.material.uniforms.scale.value=e},setIntensity:function(e){this.material.uniforms.intensity.value=e},alignWithCamera:function(e,t){this.mesh.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,t.matrixWorld),this.mesh.modelViewMatrix.multiplyMatrices(this.mesh.modelViewMatrix,this.mesh.matrix),this.material.uniforms.ModelViewMatrix.value.copy(this.mesh.modelViewMatrix)}},p.NormalCubeMapBaker=function(e,t,r){var n=new p.ShaderMaterial(p.GeometricNormalCaptureShader);n.blending=p.NoBlending;var i=t;i.computeBoundingSphere();var a=(new p.Matrix4).setPosition(i.boundingSphere.center.clone().negate()),o=1/i.boundingSphere.radius,s=(new p.Matrix4).makeScale(o,o,o),l=(new p.Matrix4).multiplyMatrices(s,a),u=new p.Vector3,c=new p.Quaternion,f=new p.Vector3;l.decompose(u,c,f);var h=new p.Mesh(i,n);h.position.copy(u),h.scale.copy(f);var d=new p.Scene;d.add(h);var m=e.extensions.get("OES_texture_float")&&e.extensions.get("OES_texture_float_linear"),v=new p.CubeCamera(.01,100,512);v.renderTarget.texture.generateMipmaps=!1,v.renderTarget.texture.magFilter=r?p.NearestFilter:p.LinearFilter,v.renderTarget.texture.minFilter=r?p.NearestFilter:p.LinearFilter,v.renderTarget.texture.format=p.RGBAFormat,v.renderTarget.texture.type=m&&!r?p.FloatType:p.UnsignedByteType,v.updateCubeMap(e,d),this.texture=v.renderTarget.texture},p.SHADOW_PLANE_STATE=function(){var e;return{getInstance:function(){return null==e&&((e=new function(){this.numShadowMipMaps=4,this.shadowMipMaps=[],this.tempRenderTargets=[],this.resolution=new p.Vector2(512,512);for(var e={minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat,stencilBuffer:!1},t=Math.ceil(this.resolution.x),r=Math.ceil(this.resolution.y),n=0;n<this.numShadowMipMaps;n++)(i=new p.WebGLRenderTarget(t,r,e)).texture.generateMipmaps=!1,this.shadowMipMaps.push(i),t=Math.ceil(t/2),r=Math.ceil(r/2);for(t=Math.ceil(this.resolution.x),r=Math.ceil(this.resolution.y),n=0;n<this.numShadowMipMaps;n++){var i;(i=new p.WebGLRenderTarget(t,r,e)).texture.generateMipmaps=!1,this.tempRenderTargets.push(i),t=Math.ceil(t/2),r=Math.ceil(r/2)}this.vBlurMaterial=new p.ShaderMaterial(p.BlurShader),this.vBlurMaterial.side=p.DoubleSide,this.vBlurMaterial.uniforms.size.value.set(Math.ceil(this.resolution.x),Math.ceil(this.resolution.y)),this.vBlurMaterial.blending=p.NoBlending,p.BlurShaderUtils.configure(this.vBlurMaterial,3,3,new p.Vector2(0,1)),this.hBlurMaterial=this.vBlurMaterial.clone(),this.hBlurMaterial.side=p.DoubleSide,this.hBlurMaterial.uniforms.size.value.set(Math.ceil(this.resolution.x),Math.ceil(this.resolution.y)),this.hBlurMaterial.blending=p.NoBlending,p.BlurShaderUtils.configure(this.hBlurMaterial,3,3,new p.Vector2(1,0)),this.distanceBlurMaterial=new p.ShaderMaterial({uniforms:{planeDistance:{value:0},maxDistance:{value:0},lightArea:{value:1},nearFar:{value:null},shadowSampler1:{value:null},shadowSampler2:{value:null},shadowSampler3:{value:null},shadowSampler4:{value:null}},vertexShader:"varying vec2 vUv;\n          void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n          }",fragmentShader:"#include <packing>\n          varying vec2 vUv;\n          uniform sampler2D shadowSampler1;\n          uniform sampler2D shadowSampler2;\n          uniform sampler2D shadowSampler3;\n          uniform sampler2D shadowSampler4;\n          uniform vec2 nearFar;          uniform float planeDistance;          uniform float maxDistance;          uniform float lightArea;          \n          void main() {\n            float f1 = texture2D(shadowSampler1, vUv).a;            float f2 = texture2D(shadowSampler2, vUv).a;            float f3 = texture2D(shadowSampler3, vUv).a;            float f4 = texture2D(shadowSampler4, vUv).a;            float diff = (f1 + f2 + f3 + f4)*0.25;            diff *= lightArea;            diff = min(diff, 1.0);            float value1 = 0.0;            float value2 = 0.0;            float t = 0.0;            if( diff <= 0.33) {             value1 = f1;             value2 = f2;             t = diff;            }            else if( diff > 0.33 && diff <= 0.66) {             value1 = f2;             value2 = f3;             t = diff - 0.33;            }            else {             value1 = f3;             value2 = f4;             t = diff - 0.66;            }            t *= 3.0;            t = t>1.0 ? 1.0: t;            float value = mix(value1, value2, t);            gl_FragColor = vec4( vec3(0), value );\n          }"}),this.depthMaterial=new p.MeshDepthMaterial,this.depthMaterial.side=p.DoubleSide,this.depthMaterial.depthPacking=p.RGBADepthPacking,this.depthMaterial.blending=p.NoBlending,this.shadowProjectionMaterial=new p.ShaderMaterial({uniforms:{planeDistance:{value:0},maxDistance:{value:0},nearFar:{value:null},depthTexture:{value:null}},vertexShader:"varying vec2 vUv;\n          void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n          }",fragmentShader:"precision highp float;          #include <packing>\n          varying vec2 vUv;\n          uniform sampler2D depthTexture;\n          uniform vec2 nearFar;          uniform float planeDistance;          uniform float maxDistance;          \n          void main() {\n            float orthoDepth = unpackRGBAToDepth(texture2D(depthTexture, vec2(vUv.x, 1.0-vUv.y)));            float viewZ = -orthographicDepthToViewZ(orthoDepth, nearFar.x, nearFar.y);            float diff = ( viewZ - planeDistance)/maxDistance;            gl_FragColor = vec4( vec3(0), 1. - diff);\n          }"})}).constructor=null),e}}}(),p.ShadowPlane=function(e,t){this.resolution=e||new p.Vector2(512,512),this.shadowPlanePosition=new p.Vector3(0,0,0),this.shadowPlaneNormal=new p.Vector3(0,1,0),this.shadowPlaneSize=new p.Vector2(1,1),this.useBlur=!0,this.maxDistance=1,this.lightArea=1,void 0!==t&&(this.shadowPlaneNormal=t.shadowPlaneNormal?this.shadowPlaneNormal.copy(t.shadowPlaneNormal):this.shadowPlaneNormal,this.shadowPlanePosition=t.shadowPlanePosition?this.shadowPlanePosition.copy(t.shadowPlanePosition):this.shadowPlanePosition,this.shadowPlaneSize=t.shadowPlaneSize?this.shadowPlaneSize.copy(t.shadowPlaneSize):this.shadowPlaneSize,this.maxDistance=t.maxDistance||this.maxDistance,this.useBlur=void 0===t.useBlur?this.useBlur:t.useBlur,this.lightArea=t.lightArea||this.lightArea),this.depthRT=new p.WebGLRenderTarget(this.resolution.x,this.resolution.y),this.depthRT.texture.generateMipmaps=!1,this.shadowRT=new p.WebGLRenderTarget(this.resolution.x,this.resolution.y),this.shadowRT.texture.generateMipmaps=!1,this.camera=new p.OrthographicCamera,this.clipPlane=new p.Plane(new p.Vector3(0,1,0),0),this.originalClipPlane=this.clipPlane.clone(),this.falseClipPlane=new p.Plane(new p.Vector3(0,0,1),1e4);var r=p.SHADOW_PLANE_STATE.getInstance();this.depthMaterial=r.depthMaterial,this.shadowProjectionMaterial=r.shadowProjectionMaterial,this.numShadowMipMaps=r.numShadowMipMaps,this.shadowMipMaps=r.shadowMipMaps,this.tempRenderTargets=r.tempRenderTargets,this.vBlurMaterial=r.vBlurMaterial,this.hBlurMaterial=r.hBlurMaterial,this.distanceBlurMaterial=r.distanceBlurMaterial,this.distanceBlurMaterial.uniforms.shadowSampler1.value=this.shadowMipMaps[0].texture,this.distanceBlurMaterial.uniforms.shadowSampler2.value=this.shadowMipMaps[1].texture,this.distanceBlurMaterial.uniforms.shadowSampler3.value=this.shadowMipMaps[2].texture,this.distanceBlurMaterial.uniforms.shadowSampler4.value=this.shadowMipMaps[3].texture},p.ShadowPlane.prototype={constructor:p.ShadowPlane,setCameraParams:function(){this.camera.left=-this.shadowPlaneSize.x/2,this.camera.right=this.shadowPlaneSize.x/2,this.camera.top=this.shadowPlaneSize.y/2,this.camera.bottom=-this.shadowPlaneSize.y/2,this.camera.near=.01,this.camera.far=1e4,this.camera.updateProjectionMatrix();var e=new p.Vector3;e.copy(this.shadowPlanePosition),e.addScaledVector(this.shadowPlaneNormal,-this.maxDistance),this.camera.position.copy(e),this.camera.lookAt(this.shadowPlanePosition)},applyBlur:function(e,t){for(var r=0;r<this.numShadowMipMaps;r++){var n=this.shadowMipMaps[r],i=this.tempRenderTargets[r];this.hBlurMaterial.uniforms.size.value.set(t.width,t.height),this.hBlurMaterial.uniforms.tDiffuse.value=t.texture,e.renderPass(this.hBlurMaterial,i,!0),this.vBlurMaterial.uniforms.size.value.set(i.width,i.height),this.vBlurMaterial.uniforms.tDiffuse.value=i.texture,e.renderPass(this.vBlurMaterial,n,!0),t=n}},update:function(e,t,r){var n=e.clearColor;this.setCameraParams();var i=this.shadowPlaneNormal.dot(this.shadowPlanePosition);this.originalClipPlane.constant=-i,this.originalClipPlane.normal.copy(this.shadowPlaneNormal),void 0!==this.clipPlane&&this.clipPlane.copy(this.originalClipPlane),e.clippingPlanes=[this.clipPlane],e.setClearColor(16777215,1),t.overrideMaterial=this.depthMaterial,e.render(t,this.camera,this.depthRT,!0,function(e,t){return!!e.castShadow&&(!r||r(e,t))}),t.overrideMaterial=null,void 0!==this.clipPlane&&this.clipPlane.copy(this.falseClipPlane);var a=new p.Vector3;a.copy(this.shadowPlanePosition),a.sub(this.camera.position);var o=a.dot(this.shadowPlaneNormal);return this.shadowProjectionMaterial.uniforms.planeDistance.value=o,this.shadowProjectionMaterial.uniforms.depthTexture.value=this.depthRT.texture,this.shadowProjectionMaterial.uniforms.nearFar.value=new p.Vector2(this.camera.near,this.camera.far),this.shadowProjectionMaterial.uniforms.maxDistance.value=this.maxDistance,e.renderPass(this.shadowProjectionMaterial,this.shadowRT,!0),this.useBlur&&(this.applyBlur(e,this.shadowRT),this.distanceBlurMaterial.uniforms.nearFar.value=new p.Vector2(this.camera.near,this.camera.far),this.distanceBlurMaterial.uniforms.maxDistance.value=this.maxDistance,this.distanceBlurMaterial.uniforms.planeDistance.value=o,this.distanceBlurMaterial.uniforms.lightArea.value=this.lightArea,e.renderPass(this.distanceBlurMaterial,this.shadowRT,!0)),e.setClearColor(n),this.shadowRT}},p.MaterialSet=function(){this.map={},this.getMaterial=function(e){for(var t=this.map,r=0;r<e.length;r++)void 0===(t=t[e[r]])&&r==e.length-1&&console.error("Argument count exceeds tree depth");return t},this.setMaterial=function(e,t){for(var r=this.map,n=0;n<t.length-1;n++)r=r[t[n]]=r[t[n]]||{};r[t[n]]=e},this.traverse=function(e){"function"!=typeof e&&console.error("Function expected"),function t(r){if(r.isMaterial)e(r);else for(var n=(0,l.default)(r),i=0;i<n.length;i++)t(r[n[i]])}(this.map)},this.applyAll=function(e){this.traverse(function(t){(0,c.default)(t,e)})},this.init=function(e,t){if(0!=e.length){var r=[];r.length=e.length,function n(i,a){for(var o=e[i],s=0;s<o.length;s++){var l=o[s];r[i]=l,i==e.length-1?a[l]=t(r):(a[l]=a[l]||{},n(i+1,a[l]))}}(0,this.map)}}},p.MaterialChanger=new function(){this.dummyTexture=new p.Texture,this.velMatSet=new p.MaterialSet,this.depthMatSet=new p.MaterialSet,this.normalMatSet=new p.MaterialSet;for(var e=0;e<3;e++){var t=[this.velMatSet,this.depthMatSet,this.normalMatSet][e],r=[[!0,!1]];t===this.depthMatSet&&(r.length=2,r[1]=[p.BasicDepthPacking,p.RGBADepthPacking,-1]);var n=this;t.init(r,function(e){var r,i={alphaTest:e[0]?.5:0,forceRefreshMaterial:!0,map:n.dummyTexture,skip_map:!0,mapSlot:(0,c.default)(new p.MaterialMap("map",0,!0,!0),{texture:n.dummyTexture}),alphaMap:n.dummyTexture,skip_alphaMap:!0,alphaMapSlot:(0,c.default)(new p.MaterialMap("alphaMap",0,!0,!0),{texture:n.dummyTexture}),displacementMap:n.dummyTexture,skip_displacementMap:!0,displacementMapSlot:(0,c.default)(new p.MaterialMap("displacementMap",0,!0,!0),{texture:n.dummyTexture})};if(t===n.normalMatSet&&(i.normalMap=n.dummyTexture,i.skip_normalMap=!0,i.bumpMap=n.dummyTexture,i.skip_bumpMap=!0),t===n.velMatSet)r=new p.MeshVelocityMaterial(i);else if(t===n.depthMatSet){var a=e[1],o=-1==a;(r=new p.MeshDepthMaterial(i)).depthPacking=a,o&&(r.transparent=!0,r.blending=p.NormalBlending,r.depthWrite=!0),r.needsUpdate=!0}else t===n.normalMatSet&&(r=new p.MeshNormalMaterial(i));return r}),this.opaqueVisFunc=function(e,t){return!t.transparent}}},p.MaterialChanger.renderPassVelocity=function(e,t,r,n,i,a,o,s){void 0===i&&(i=this.opaqueVisFunc),this.velMatSet.traverse(function(e){e.currentProjectionViewMatrix.copy(a)}),this.velMatSet.traverse(function(e){e.previousProjectionViewMatrix.copy(o)}),this.renderPass(this.velMatSet,e,t,r,n,i,s)},p.MaterialChanger.renderPassDepth=function(e,t,r,n,i,a){void 0===i&&(i=this.opaqueVisFunc),this.renderPass(this.depthMatSet,e,t,r,n,i,a)},p.MaterialChanger.renderPassNormal=function(e,t,r,n,i,a){void 0===i&&(i=this.opaqueVisFunc),this.renderPass(this.normalMatSet,e,t,r,n,i,a)},p.MaterialChanger.renderPass=function(e,t,r,n,i,a,o){var s=this;t.materialOverrider=function(t){var r=-1;e===s.depthMatSet&&void 0!==o&&void 0!==o.depthPacking&&(r=o.depthPacking);var n=[void 0!==t.alphaTest&&t.alphaTest>0];e===s.depthMatSet&&(n.length=2,n[1]=r);var i=e.getMaterial(n);function a(e,t,r){var n=r+"Slot",i=e[n];e[r];if(!i)return t[n].uvOffset.x=0,t[n].uvOffset.y=0,t[n].uvRepeat.x=1,t[n].uvRepeat.y=1,t[n].uvRotation=0,void(t[r]=i.texture);t[n].copy(i),t[r]=i.texture}i.alphaTest=t.alphaTest,i.usedSlotsVersion=-1;for(var l=["map","alphaMap","bumpMap","normalMap","displacementMap"],u=0;u<l.length;u++){var c=l[u],f=c+"Slot";if(t[c]&&i[f]){a(t,i,c);"bumpMap"==c?i.bumpScale=t.bumpScale:"normalMap"==c?i.normalScale=t.normalScale:"displacementMap"==c&&(i.displacementScale=t.displacementScale,i.displacementBias=t.displacementBias),i["skip_"+c]=!1}else i["skip_"+c]=!0}return i.side=t.side,i.opacity=t.opacity,i.depthWrite=t.depthWrite,e===s.normalMatSet&&(i.triplanarScale.copy(t.triplanarScale||new p.Vector3(1,1,1)),i.triplanarEnabledBumpMap=!!t.triplanarEnabledBumpMap,i.triplanarEnabledNormalMap=!!t.triplanarEnabledNormalMap),i},t.render(r,n,i,!0,a),t.materialOverrider=void 0},p.SSRPrePass=function(e,t,r,n,i,a,o){p.Pass.call(this),this.scene=e,this.camera=t,this.scale=i||.5;r=r||32,n=n||4;for(var s=new Uint8Array(16384),l=0;l<16384;++l)s[l]=255*Math.random();var u=new p.DataTexture(s,64,64);u.needsUpdate=!0,u.wrapS=p.RepeatWrapping,u.wrapT=p.RepeatWrapping,this.textureLOD=a,this.velocityRenderTarget=new p.WebGLRenderTarget(512,512,{minFilter:p.NearestFilter,magFilter:p.NearestFilter,format:p.RGBAFormat}),this.ssrTarget=new p.WebGLRenderTarget(512,512,{minFilter:this.textureLOD?p.LinearMipMapLinearFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat,depthBuffer:!1,stencilBuffer:!1}),this.textureLOD&&(this.ssrTarget.texture.generateMipmaps=!0),this.ssrMaterial=new p.ShaderMaterial({defines:{NUM_SAMPLES:r,DEPTH_PACKING:1,INTERPOLATE_HIT:0},uniforms:{tDiffuse:{value:null},tDither:{value:u},tDepth:{value:null},tVelocity:{value:null},tNormal:{value:null},ditherSize:{value:64},unprojectionMatrix:{value:new p.Matrix4},projectionMatrix:{value:new p.Matrix4},currSStoPrevVSMatrix:{value:new p.Matrix4},cameraNear:{value:0},cameraFar:{value:0},stepSize:{value:n},stepMultiplier:{value:1.05},maxDistance:{value:50},renderTargetResolution:{value:new p.Vector2},sourceResolution:{value:new p.Vector2},traaFrame:{value:0}},vertexShader:p.ShaderChunk.ssr_vert,fragmentShader:p.ShaderChunk.ssr_frag,blending:p.AdditiveBlending}),this.copyMaterial=new p.ShaderMaterial(p.CopyShader),this.normalMaterial=new p.MeshNormalMaterial,this.normalMaterial.blending=p.NoBlending,this.quadCamera=new p.OrthographicCamera(-1,1,1,-1,0,1),this.quadScene=new p.Scene,this.quad=new p.Mesh(new p.PlaneGeometry(2,2),null),this.quadScene.add(this.quad),this.prevProjectionMatrix=new p.Matrix4,this.prevViewMatrix=new p.Matrix4,this.reprojectionMatrix=new p.Matrix4,this.ssrBufferScale=new p.Vector2,this.prevNear=0,this.prevFar=0,this.traaEnabled=!1,this.hasSource=!1,this.needsSwap=!1,this.projViewMat=new p.Matrix4,this.prevProjViewMat=new p.Matrix4,this.qualityOptions=[{numSamples:16,stepSize:20,stepMultiplier:1.02},{numSamples:32,stepSize:10,stepMultiplier:1.03},{numSamples:48,stepSize:8,stepMultiplier:1.01}],this.setQuality(2)},p.SSRPrePass.prototype=(0,c.default)((0,u.default)(p.Pass.prototype,{texture:{get:function(){return this.ssrTarget.texture}},numMips:{get:function(){return Math.floor((0,f.default)(Math.min(this.ssrTarget.width,this.ssrTarget.height)))}}}),{render:function(e,t,r,n,i){this.camera.updateMatrix(),this.camera.updateMatrixWorld(!0),this.camera.updateProjectionMatrix(),e.ssrMap=this.ssrTarget.texture,e.ssrNumMips=this.numMips,e.ssrBufferScale.copy(this.ssrBufferScale),this.reprojectionMatrix.copy(this.prevProjectionMatrix);var a=e.getClearColor(),o=e.getClearAlpha();if(this.hasSource){e.setClearColor(0,0),e.autoClearColor=!0,e.autoClearDepth=!0,e.autoClear=!0,this.projViewMat.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.prevProjViewMat.multiplyMatrices(this.prevProjectionMatrix,this.prevViewMatrix),p.MaterialChanger.renderPassVelocity(e,this.scene,this.camera,this.velocityRenderTarget,void 0,this.projViewMat,this.prevProjViewMat),this.scene.traverse(function(e){e instanceof p.Object3D&&e.matrixWorldPrevious.copy(e.matrixWorld)}),e.setClearColor(0,0),this.quad.material=this.ssrMaterial;var s=this.ssrMaterial.uniforms;s.tVelocity.value=this.velocityRenderTarget.texture,this.depthRenderTarget&&(s.tDepth.value=this.depthRenderTarget.texture),this.normalRenderTarget&&(s.tNormal.value=this.normalRenderTarget.texture),this.diffuseRenderTarget&&(s.tDiffuse.value=this.diffuseRenderTarget.texture),s.projectionMatrix.value.copy(this.reprojectionMatrix),s.unprojectionMatrix.value.getInverse(this.reprojectionMatrix),s.currSStoPrevVSMatrix.value.getInverse(this.projViewMat).premultiply(this.prevViewMatrix),s.cameraNear.value=this.prevNear,s.cameraFar.value=this.prevFar,s.renderTargetResolution.value.set(this.ssrTarget.width,this.ssrTarget.height),s.sourceResolution.value.set(this.normalRenderTarget.width,this.normalRenderTarget.height),this.traaEnabled&&s.traaFrame.value++,e.render(this.quadScene,this.quadCamera,this.ssrTarget)}else e.setClearColor(0,0),e.clearTarget(this.ssrTarget);e.setClearColor(a,o),this.prevViewMatrix.copy(this.camera.matrixWorldInverse),this.prevProjectionMatrix.copy(this.camera.projectionMatrix),this.prevNear=this.camera.near,this.prevFar=this.camera.far,this.hasSource=!0},setSize:function(e,t){var r=Math.floor(e*this.scale),n=Math.floor(t*this.scale),i=r,a=n;this.textureLOD&&(r=Math.min(p.Math.ceilPowerOfTwo(r),2048),n=Math.min(p.Math.ceilPowerOfTwo(n),2048)),this.ssrBufferScale.set(i/r,a/n),this.ssrTarget.setSize(r,n),this.ssrTarget.viewport.set(0,0,i,a)},linkDiffuseRT:function(e){this.diffuseRenderTarget=e},linkNormalRT:function(e){this.normalRenderTarget=e},linkDepthRT:function(e){this.depthRenderTarget=e},setQuality:function(e){if(this._quality!==e)if(e>=0&&e<=2){this._quality=e;var t=this.qualityOptions[e];this.ssrMaterial.defines.NUM_SAMPLES=t.numSamples,this.ssrMaterial.uniforms.stepSize.value=t.stepSize,this.ssrMaterial.uniforms.stepMultiplier.value=t.stepMultiplier,this.ssrMaterial.needsUpdate=!0}else console.warn('Invalid quality setting "'+e+'", expected 0, 1, or 2')},disable:function(e){e.ssrMap=null}}),p.SSRPostPass=function(){this.copyMaterial=new p.ShaderMaterial(p.CopyShader),this.renderTarget=new p.WebGLRenderTarget(1,1),this.needsSwap=!1},p.SSRPostPass.prototype=(0,c.default)((0,u.default)(p.SSRPostPass.prototype),{constructor:p.SSRPostPass,setSize:function(e,t){this.renderTarget.setSize(e,t)},render:function(e,t,r,n,i,a){this.camera,e.getSize();e.autoClearColor=!0,e.autoClearDepth=!0,this.copyMaterial.uniforms.tDiffuse.value=r.texture,e.renderPass(this.copyMaterial,this.renderTarget,!0)}});!function(){p.UniformsLib;var e=p.ShaderLib,t=new p.DataTexture(new Float32Array([2e-4,-0,1,-0,504e-6,-0,1,-0,.002016,-0,1,-0,.004535,-0,1,-0,.008063,-0,1,-0,.012598,-0,1,-0,.018141,-0,1,-0,.024692,-0,1,-0,.032252,-0,1,-0,.040821,-0,1,-0,.0504,-0,1,-0,.060989,-0,1,-0,.072591,-0,1,-0,.085206,-0,1,-0,.098836,-0,1,-0,.113483,-0,1,-0,.129147,-0,1,-0,.145828,-0,1,-0,.163499,-0,1,-0,.181972,-0,1,-0,.199498,-0,1,-0,.220031,-0,1,-0,.241588,-0,1,-0,.26412,-0,1,-0,.287521,-0,1,-0,.311478,-0,1,-0,.335127,-0,1,-0,.359811,-0,1,-0,.386446,-0,1,-0,.413161,-0,1,-0,.439142,-0,1,-0,.467039,-0,1,-0,.49517,-0,1,-0,.522324,-0,1,-0,.551482,-0,1,-0,.579621,-0,1,-0,.608255,-0,1,-0,.636515,-0,1,-0,.664835,-0,1,-0,.692549,-0,1,-0,.720375,-0,1,-0,.747238,-0,1,-0,.773956,-0,1,-0,.799879,-0,1,-0,.824889,-0,1,-0,.849357,-0,1,-0,.873016,-0,1,-0,.89567,-0,1,-0,.917194,-0,1,-0,.937978,-0,1,-0,.957872,-0,1,-0,.976736,-0,1,-0,.994433,-0,1,-0,1.011206,-0,1,-0,1.02682,-0,1,-0,1.04172,-0,1,-0,1.055657,-0,1,-0,1.068642,-0,1,-0,1.080646,-0,1,-0,1.091637,-0,1,-0,1.101837,-0,1,-0,1.111292,-0,1,-0,1.120025,-0,1,-0,1.127918,-0,1,-0,2e-4,-5e-6,1.000623,.024938,504e-6,-13e-6,1.000643,.024938,.002016,-5e-5,1.000618,.024938,.004535,-113e-6,1.000621,.024938,.008063,-201e-6,1.000746,.024938,.012596,-314e-6,1.000463,.024937,.01814,-452e-6,1.000511,.024939,.024693,-616e-6,1.000541,.024938,.032253,-804e-6,1.000684,.024938,.040815,-.001018,1.000524,.02494,.050399,-.001257,1.000582,.024937,.060989,-.001521,1.000655,.024937,.072591,-.00181,1.000608,.024938,.085204,-.002125,1.000622,.024939,.098835,-.002465,1.000632,.024937,.113483,-.00283,1.00064,.024939,.129143,-.00322,1.000568,.024938,.14583,-.003633,1.000635,.024938,.163497,-.004062,1.000626,.024938,.181956,-.004424,1.000612,.024924,.199791,-.004593,1.000627,.02489,.220029,-.00548,1.000594,.024935,.241586,-.00601,1.000616,.024933,.264115,-.00655,1.000607,.024927,.287514,-.007072,1.000595,.024909,.311455,-.007472,1.000616,.024872,.335083,-.007491,1.000589,.024755,.359805,-.00881,1.000601,.024877,.386438,-.009282,1.00064,.024824,.413131,-.009534,1.000599,.024708,.439249,-.009701,1.000497,.024573,.466997,-.010878,1.000467,.024652,.495138,-.010959,1.000539,.024455,.522654,-.011386,1.000518,.024318,.551415,-.012022,1.000533,.024216,.57961,-.011805,1.000495,.023867,.608185,-.012773,1.000474,.023834,.636492,-.012377,1.000488,.023327,.664826,-.013172,1.000576,.023205,.692674,-.012847,1.000505,.022708,.720341,-.013141,1.000424,.022349,.747373,-.013227,1.000449,.021871,.77398,-.012739,1.000478,.021171,.799839,-.012999,1.000396,.020606,.825113,-.012727,1.000425,.020006,.849579,-.01217,1.000469,.019089,.873046,-.011855,1.000411,.018291,.895777,-.011711,1.000426,.017534,.917518,-.011107,1.000373,.016542,.938264,-.010439,1.000322,.015512,.958032,-.009807,1.000324,.014491,.976838,-.009268,1.000341,.013468,.994631,-.008662,1.000318,.012376,1.011434,-.007923,1.000289,.011187,1.027169,-.007132,1.000216,.010078,1.041929,-.006332,1.000096,.008924,1.055767,-.005554,1.000156,.00777,1.068595,-.004811,1.000084,.006611,1.080612,-.00395,1.000047,.005485,1.091785,-.003174,1.000109,.004352,1.101998,-.002363,1.000029,.00318,1.111423,-.001552,.999985,.002091,1.120007,-786e-6,.999947,991e-6,1.127918,4e-6,1,-4e-6,2e-4,-1e-5,1.002495,.049907,504e-6,-25e-6,1.002476,.049908,.002016,-101e-6,1.0025,.049908,.004535,-226e-6,1.002487,.049908,.008062,-402e-6,1.002364,.049908,.012598,-629e-6,1.002412,.049908,.01814,-905e-6,1.002379,.049908,.024691,-.001232,1.00249,.049907,.032251,-.00161,1.002398,.049908,.040821,-.002037,1.002392,.049908,.050398,-.002515,1.002431,.049907,.060989,-.003044,1.002475,.049908,.072592,-.003623,1.002546,.049907,.085204,-.004252,1.002467,.049907,.098832,-.004932,1.00245,.049908,.113481,-.005663,1.002482,.049907,.129145,-.006443,1.002443,.049907,.145825,-.007271,1.002495,.049906,.163491,-.008128,1.002475,.049903,.181911,-.008826,1.002459,.049879,.200065,-.009285,1.002443,.049824,.220025,-.010966,1.00245,.049897,.241581,-.012025,1.002463,.049893,.264099,-.013105,1.002395,.049881,.287493,-.014145,1.00239,.049855,.311399,-.014925,1.002414,.049769,.335096,-.015239,1.002363,.049591,.359815,-.017559,1.002415,.049777,.386365,-.018554,1.002354,.049675,.413017,-.019043,1.002297,.049444,.439519,-.019815,1.002284,.049253,.466938,-.021741,1.002307,.049327,.494999,-.021887,1.002181,.048922,.522922,-.022844,1.002107,.048677,.55127,-.024014,1.002101,.048478,.579771,-.024156,1.00206,.047904,.608156,-.025317,1.002077,.047594,.636662,-.025321,1.001975,.046876,.664846,-.026018,1.001992,.046354,.692877,-.026041,1.001846,.045504,.720316,-.026252,1.001846,.044655,.747658,-.026159,1.001931,.04367,.774252,-.026086,1.001845,.042515,.800179,-.025653,1.001794,.041211,.825525,-.02517,1.001787,.039823,.850013,-.024788,1.001806,.038409,.873593,-.023992,1.001688,.036767,.896343,-.022985,1.001666,.0349,.918062,-.022005,1.001548,.03301,.938928,-.02111,1.001503,.031143,.958667,-.019893,1.001341,.029059,.977457,-.018546,1.001194,.026888,.995243,-.017152,1.001095,.024713,1.012023,-.01575,1.0011,.022496,1.027614,-.014289,1.000851,.020153,1.042389,-.012688,1.000724,.017839,1.056161,-.011118,1.000572,.015529,1.068968,-.00954,1.000407,.01324,1.080866,-.007963,1.000258,.01094,1.091944,-.006416,1.000254,.008716,1.102104,-.004771,1.000175,.006434,1.111571,-.003056,1.000148,.004169,1.120084,-.001458,1.00005,.002033,1.127981,21e-6,.999987,-27e-6,2e-4,-15e-6,1.00562,.07494,504e-6,-38e-6,1.00565,.074939,.002016,-151e-6,1.005613,.074939,.004535,-34e-5,1.005618,.074939,.008062,-604e-6,1.005614,.074939,.012597,-944e-6,1.005616,.07494,.018141,-.001359,1.005558,.074939,.024695,-.001851,1.005495,.07494,.032253,-.002417,1.005616,.074939,.040822,-.003059,1.005591,.07494,.050399,-.003777,1.005596,.07494,.060989,-.00457,1.005599,.074939,.072591,-.00544,1.005616,.07494,.085203,-.006385,1.005616,.074939,.098833,-.007406,1.005595,.074938,.113481,-.008502,1.005605,.074938,.129147,-.009674,1.005605,.074937,.145817,-.010916,1.005513,.074937,.163485,-.012199,1.005579,.074928,.181824,-.013172,1.005552,.074885,.200274,-.0141,1.005524,.074825,.220017,-.016464,1.005529,.074928,.241568,-.018052,1.00549,.074914,.264084,-.019671,1.005457,.074898,.28745,-.021217,1.005431,.07486,.311281,-.022341,1.005395,.074717,.335228,-.023296,1.00532,.074526,.360047,-.025965,1.005302,.074649,.386273,-.027808,1.005285,.074575,.412855,-.028504,1.005167,.074237,.439705,-.030007,1.005129,.074013,.466975,-.032263,1.005082,.073967,.494874,-.032931,1.00496,.073475,.523066,-.034348,1.004834,.073084,.551198,-.035739,1.004806,.072657,.579889,-.036575,1.004687,.072029,.608282,-.037434,1.004605,.071309,.636812,-.038323,1.004589,.070507,.66501,-.038676,1.004403,.069424,.693063,-.039237,1.00434,.06837,.72075,-.039332,1.004224,.066988,.747911,-.039179,1.004117,.065447,.774576,-.03911,1.004035,.063838,.800737,-.038542,1.004027,.061923,.825966,-.037966,1.003825,.059859,.850534,-.036943,1.003786,.057529,.874289,-.035853,1.00356,.055081,.897152,-.03473,1.003549,.052476,.919029,-.033242,1.003454,.049647,.939851,-.031508,1.003215,.04667,.959599,-.029695,1.002916,.043588,.978293,-.027845,1.00272,.040401,.996085,-.025775,1.002445,.03706,1.012768,-.023607,1.002133,.033726,1.028404,-.021374,1.001822,.030217,1.04315,-.019108,1.001602,.02682,1.05676,-.016823,1.001274,.023372,1.069471,-.014378,1.000964,.019891,1.081283,-.011884,1.000684,.016405,1.092238,-.009398,1.000514,.01295,1.102384,-.00703,1.000319,.009579,1.111737,-.004751,1.000225,.006384,1.120274,-.002404,1.000046,.003192,1.128182,31e-6,1.00002,33e-6,2e-4,-2e-5,1.010006,.100065,504e-6,-5e-5,1.009927,.100065,.002016,-202e-6,1.010026,.100064,.004535,-454e-6,1.010018,.100065,.008062,-807e-6,1.009891,.100064,.012599,-.001261,1.010175,.100064,.018141,-.001815,1.010067,.100065,.024692,-.002471,1.010014,.100066,.032251,-.003227,1.00995,.100065,.040818,-.004084,1.009963,.100067,.050401,-.005043,1.010032,.100064,.060988,-.006102,1.009979,.100064,.072588,-.007263,1.009984,.100063,.085205,-.008525,1.010023,.100063,.098832,-.009888,1.00996,.100062,.113479,-.011352,1.009974,.100063,.129142,-.012916,1.009945,.100062,.145817,-.014573,1.009924,.100058,.163468,-.016276,1.009912,.10005,.181674,-.017411,1.009859,.099975,.200435,-.019002,1.009842,.099932,.220005,-.021978,1.00982,.100043,.24155,-.024096,1.009778,.100031,.264058,-.02625,1.009765,.100002,.287399,-.028286,1.009724,.099939,.311134,-.029698,1.009596,.099748,.33535,-.031442,1.009508,.099582,.360295,-.034401,1.009475,.099613,.386112,-.03703,1.009329,.099558,.412733,-.038163,1.00925,.099137,.439833,-.04025,1.009125,.098866,.467099,-.042583,1.009011,.098626,.494828,-.044299,1.008803,.098149,.523217,-.045876,1.008712,.0976,.551338,-.04744,1.008509,.096929,.579917,-.048995,1.008371,.096178,.608454,-.049901,1.008212,.095145,.636785,-.051224,1.007963,.094151,.66522,-.051675,1.007741,.092728,.693194,-.052278,1.007616,.091195,.721008,-.052406,1.007327,.089384,.748196,-.052529,1.007219,.087461,.774975,-.05195,1.006851,.085133,.801129,-.051456,1.006732,.082628,.826668,-.050569,1.006612,.079817,.851291,-.049328,1.006374,.07671,.875056,-.047988,1.006183,.073481,.897872,-.046149,1.005742,.069943,.919803,-.044144,1.005514,.066151,.940701,-.042095,1.005153,.062247,.96058,-.03973,1.004843,.058158,.979427,-.037104,1.004535,.05385,.997157,-.034369,1.004023,.049403,1.013777,-.031555,1.003622,.044944,1.029452,-.028571,1.003212,.040414,1.044029,-.025416,1.002698,.035723,1.057586,-.022217,1.002202,.031072,1.070148,-.019037,1.001703,.026429,1.081875,-.015936,1.001322,.021896,1.092789,-.012734,1.001053,.017288,1.102704,-.009454,1.000604,.012841,1.112011,-.006199,1.000387,.008446,1.12059,-.00301,1.000166,.004122,1.128283,27e-6,.999956,-38e-6,2e-4,-25e-6,1.015664,.125315,504e-6,-63e-6,1.015664,.125316,.002016,-253e-6,1.015727,.125315,.004535,-568e-6,1.015695,.125314,.008063,-.00101,1.015823,.125316,.012599,-.001579,1.015867,.125315,.018141,-.002273,1.015758,.125316,.024691,-.003094,1.015662,.125316,.032252,-.004042,1.015674,.125316,.04082,-.005115,1.015678,.125316,.0504,-.006316,1.015684,.125315,.060989,-.007642,1.015685,.125315,.07259,-.009096,1.015703,.125314,.085203,-.010676,1.015654,.125314,.098833,-.012383,1.01567,.125315,.113477,-.014215,1.015635,.125312,.129138,-.016173,1.015599,.125311,.145815,-.018246,1.01561,.125306,.16345,-.02036,1.015564,.125294,.181595,-.021807,1.01546,.125204,.200563,-.023971,1.01544,.125165,.220186,-.02728,1.015412,.12525,.241528,-.030164,1.015342,.125267,.26402,-.032847,1.015269,.125233,.287311,-.035345,1.015232,.125138,.310993,-.037108,1.015063,.124903,.335467,-.039653,1.01497,.124749,.360497,-.042914,1.014819,.124702,.385986,-.046142,1.014685,.124623,.412703,-.04805,1.014543,.124193,.439929,-.050527,1.014315,.123833,.467163,-.05288,1.014087,.123375,.494824,-.055672,1.013898,.122982,.523222,-.057388,1.013647,.122166,.551557,-.059328,1.013403,.121343,.579884,-.061315,1.013059,.12043,.608619,-.062531,1.012745,.11914,.637014,-.063778,1.012425,.117721,.665425,-.064734,1.012067,.116069,.69358,-.065315,1.011712,.114146,.721194,-.065535,1.0112,.111846,.748586,-.065501,1.010896,.109309,.775437,-.065091,1.010576,.106504,.801554,-.064332,1.010136,.103308,.827079,-.063078,1.009629,.099695,.851693,-.061728,1.009233,.095946,.875586,-.059853,1.008726,.091802,.898589,-.057727,1.008412,.087339,.920421,-.055377,1.007767,.082687,.941533,-.052571,1.007529,.077716,.961426,-.049544,1.006929,.072574,.980287,-.0464,1.006393,.067217,.99808,-.042966,1.005872,.061757,1.01494,-.039321,1.005346,.056072,1.030455,-.035585,1.004609,.05041,1.045078,-.031823,1.004151,.044622,1.058555,-.027947,1.003421,.038893,1.071009,-.023891,1.002704,.032977,1.082594,-.019822,1.002023,.02729,1.093265,-.015765,1.001403,.021543,1.103132,-.01179,1.000944,.016072,1.112348,-.007784,1.00055,.010511,1.120845,-.003849,1.000224,.005174,1.128573,57e-6,.999975,-39e-6,2e-4,-3e-5,1.022609,.150725,504e-6,-76e-6,1.022728,.150725,.002016,-304e-6,1.022728,.150725,.004535,-684e-6,1.022733,.150725,.008062,-.001215,1.022715,.150725,.012598,-.001899,1.02272,.150725,.018141,-.002734,1.022659,.150725,.024694,-.003722,1.022801,.150724,.032254,-.004861,1.022779,.150726,.040815,-.006152,1.022693,.150724,.0504,-.007596,1.022716,.150725,.06099,-.009192,1.022733,.150725,.072587,-.010939,1.02263,.150723,.085203,-.012839,1.022676,.150725,.098828,-.014891,1.022659,.150725,.113473,-.017095,1.022589,.15072,.129137,-.019449,1.022572,.150716,.145803,-.021938,1.022508,.150712,.163417,-.024443,1.022471,.150691,.18158,-.026329,1.022406,.1506,.200667,-.028997,1.022336,.150553,.220429,-.032584,1.022296,.15061,.241497,-.03626,1.022202,.150658,.263975,-.039465,1.022119,.150619,.28721,-.042385,1.021988,.15049,.310935,-.044758,1.021771,.150241,.335556,-.047922,1.021658,.150076,.360667,-.051493,1.021437,.149931,.386028,-.054931,1.021228,.149754,.412665,-.058007,1.021023,.1494,.439951,-.060813,1.020723,.148913,.467262,-.063461,1.020332,.148319,.494972,-.066738,1.020097,.147798,.523153,-.068976,1.01963,.146903,.5517,-.071268,1.019245,.145863,.580046,-.073439,1.018797,.144695,.608649,-.075193,1.018201,.143237,.637239,-.076536,1.017746,.141463,.665388,-.077771,1.017111,.139462,.693755,-.078344,1.016609,.137082,.721345,-.078817,1.015863,.134403,.748879,-.078512,1.01539,.131252,.77556,-.078128,1.014652,.127866,.801897,-.077094,1.013877,.123928,.827193,-.075863,1.013021,.119733,.85199,-.073973,1.012395,.115055,.875823,-.071765,1.011595,.110098,.898655,-.069241,1.010862,.104722,.920915,-.066232,1.010185,.098991,.941969,-.06298,1.009588,.093044,.961882,-.059507,1.008777,.086925,.980952,-.055606,1.008252,.08052,.998955,-.051503,1.007633,.07389,1.015756,-.047292,1.006908,.067302,1.031571,-.042804,1.006338,.060412,1.046095,-.038132,1.005512,.053497,1.059542,-.03338,1.004592,.046569,1.072006,-.028613,1.003731,.039679,1.083348,-.023811,1.002871,.032772,1.093969,-.01893,1.002068,.025894,1.103697,-.014098,1.001284,.019178,1.112813,-.009339,1.00082,.012652,1.121193,-.004661,1.000324,.006226,1.12893,52e-6,.999988,-8e-6,2e-4,-35e-6,1.030857,.176327,504e-6,-89e-6,1.031137,.176326,.002016,-355e-6,1.031049,.176325,.004535,-8e-4,1.031105,.176326,.008062,-.001422,1.030973,.176326,.012598,-.002221,1.031168,.176326,.018141,-.003199,1.031093,.176326,.024695,-.004354,1.031297,.176326,.032253,-.005687,1.031091,.176327,.040821,-.007197,1.031012,.176326,.050399,-.008886,1.031068,.176325,.060987,-.010752,1.030967,.176323,.072588,-.012797,1.031028,.176324,.0852,-.015019,1.030985,.176322,.098829,-.017419,1.030983,.17632,.113474,-.019997,1.030953,.176317,.129133,-.022748,1.030891,.176312,.1458,-.025655,1.030825,.176306,.163372,-.02851,1.030781,.176279,.181578,-.030914,1.030683,.176187,.200761,-.034076,1.030574,.176139,.220645,-.037985,1.030476,.17616,.241473,-.042391,1.030384,.176238,.263922,-.046105,1.030241,.176175,.287074,-.04939,1.030049,.176013,.310915,-.052511,1.029839,.175776,.335604,-.056236,1.029608,.175578,.360775,-.060118,1.029355,.175359,.386196,-.063907,1.029052,.175083,.412599,-.067997,1.028766,.174791,.439916,-.071088,1.028326,.174174,.467444,-.074247,1.02789,.173487,.495132,-.077728,1.027374,.172774,.523117,-.080822,1.026763,.171824,.551783,-.083228,1.026205,.170554,.580234,-.085682,1.025614,.16909,.608568,-.08786,1.024668,.167468,.637357,-.089346,1.023939,.165283,.665507,-.090704,1.022946,.162966,.693704,-.091388,1.02201,.160131,.721396,-.091783,1.021085,.156957,.748676,-.091688,1.019894,.153292,.77537,-.090992,1.018608,.149158,.801547,-.089881,1.017646,.144551,.827013,-.088267,1.016355,.139614,.851708,-.086132,1.015446,.134026,.875652,-.083707,1.014321,.128101,.898703,-.080619,1.013454,.121841,.920904,-.07728,1.012634,.115379,.942077,-.073484,1.01177,.108355,.962245,-.069252,1.010894,.101153,.981385,-.064807,1.010114,.093666,.999379,-.06008,1.009294,.086007,1.016494,-.055007,1.008591,.078194,1.032357,-.04976,1.007821,.070328,1.047061,-.044468,1.006871,.062358,1.060675,-.03896,1.006062,.054279,1.073032,-.033343,1.004911,.046158,1.084293,-.027699,1.003791,.038111,1.094724,-.02213,1.002744,.030239,1.104302,-.016508,1.001815,.022397,1.11329,-.010846,1.001083,.014747,1.121649,-.005294,1.00049,.007234,1.12923,71e-6,.999975,-53e-6,2e-4,-4e-5,1.040431,.202155,504e-6,-102e-6,1.040912,.202154,.002016,-407e-6,1.041328,.202152,.004535,-917e-6,1.040877,.202154,.008063,-.00163,1.040867,.202153,.012598,-.002547,1.04087,.202153,.01814,-.003667,1.040808,.202153,.024692,-.004991,1.040861,.202153,.032252,-.006519,1.040861,.202153,.040822,-.008252,1.040864,.202153,.050397,-.010187,1.040717,.202151,.060988,-.012327,1.040791,.202152,.072582,-.014669,1.04064,.202149,.085198,-.017217,1.040716,.202147,.098827,-.019968,1.040748,.202141,.113467,-.022921,1.040632,.202142,.129129,-.026074,1.040606,.202137,.145793,-.029399,1.040566,.202127,.163294,-.032524,1.040459,.202078,.181589,-.035552,1.040315,.201996,.200844,-.039208,1.040221,.201948,.220835,-.043489,1.040047,.201945,.241471,-.048523,1.039921,.202031,.263854,-.052764,1.039756,.201957,.286935,-.056387,1.039497,.201743,.310902,-.060338,1.039252,.201531,.335642,-.064594,1.038954,.201286,.360859,-.068772,1.038582,.200983,.386419,-.073086,1.03816,.200651,.412588,-.077887,1.037724,.200343,.439836,-.081391,1.037182,.199618,.467538,-.085121,1.036602,.198839,.495286,-.088718,1.035893,.197895,.523231,-.092514,1.035121,.196887,.55173,-.095238,1.034127,.19539,.580302,-.097949,1.033131,.193668,.608559,-.100418,1.031962,.191773,.637224,-.102129,1.030838,.189319,.665597,-.103578,1.029511,.186529,.693535,-.104652,1.028263,.183303,.721325,-.104766,1.026611,.179497,.748384,-.104717,1.025128,.175283,.775058,-.103846,1.023385,.170493,.801387,-.102728,1.022236,.165187,.826412,-.100679,1.019908,.159362,.851314,-.098451,1.018839,.153059,.8751,-.095363,1.017306,.146284,.89828,-.092008,1.016151,.138975,.92045,-.088095,1.01488,.131361,.941727,-.08369,1.013556,.123417,.962308,-.079077,1.012998,.115201,.981364,-.073894,1.011841,.106711,.999798,-.068435,1.011021,.098063,1.016983,-.06283,1.010194,.089183,1.033039,-.056914,1.009292,.08019,1.047994,-.050721,1.008474,.07101,1.06158,-.044454,1.007386,.061867,1.074023,-.038145,1.006135,.052711,1.08547,-.031679,1.00489,.043595,1.095673,-.025157,1.003627,.034506,1.105,-.018702,1.002331,.025468,1.113795,-.012458,1.001278,.016834,1.122012,-.006169,1.000548,.008265,1.129683,78e-6,.999988,-72e-6,2e-4,-46e-6,1.052496,.228243,504e-6,-115e-6,1.052079,.228243,.002016,-46e-5,1.052079,.228241,.004535,-.001035,1.052091,.228242,.008062,-.00184,1.051962,.228242,.012598,-.002875,1.052087,.228242,.018141,-.00414,1.052088,.228242,.024692,-.005636,1.052096,.228239,.032251,-.007361,1.052029,.228243,.04082,-.009316,1.052038,.228241,.050399,-.011501,1.052042,.228239,.06099,-.013917,1.052046,.228238,.072586,-.016562,1.05199,.228236,.085198,-.019437,1.051946,.228234,.098824,-.022542,1.051879,.228229,.113467,-.025875,1.051841,.228227,.129121,-.02943,1.051724,.228219,.14578,-.03317,1.051672,.228205,.163222,-.036567,1.051556,.228143,.181604,-.040245,1.051382,.228069,.200913,-.044395,1.05123,.22801,.221005,-.049088,1.051062,.227988,.241667,-.054506,1.050881,.228044,.263777,-.059437,1.050643,.227986,.286841,-.06359,1.050312,.227755,.310879,-.068224,1.050009,.227525,.33565,-.072986,1.049597,.227253,.360869,-.077435,1.049121,.226845,.386609,-.082385,1.048587,.226466,.412742,-.08757,1.047987,.226059,.439789,-.091929,1.047308,.225331,.467558,-.096038,1.046423,.224409,.495406,-.099938,1.045481,.223288,.523417,-.10405,1.044512,.222066,.551755,-.107503,1.043408,.220487,.580468,-.110234,1.042016,.218451,.608904,-.112993,1.040535,.2162,.63723,-.115173,1.038934,.213458,.665566,-.116433,1.036961,.210158,.693413,-.117589,1.03513,.206457,.721025,-.117885,1.03308,.202197,.748054,-.117606,1.030752,.197296,.774631,-.116771,1.028608,.191813,.800677,-.115194,1.02635,.185691,.826062,-.113138,1.024472,.179053,.85059,-.110359,1.022174,.171839,.87455,-.107072,1.020381,.164067,.897567,-.103268,1.018777,.155959,.919609,-.098794,1.016886,.14732,.941177,-.094067,1.01588,.138365,.961752,-.08867,1.014616,.129051,.981518,-.082965,1.013807,.119515,.99988,-.076971,1.012793,.109897,1.01737,-.070518,1.011894,.099872,1.033661,-.06383,1.010943,.089883,1.048672,-.05704,1.009802,.079691,1.062479,-.049917,1.00867,.069458,1.075052,-.042735,1.007429,.059191,1.086371,-.035513,1.005991,.048894,1.096623,-.028359,1.004468,.03877,1.105871,-.021111,1.002927,.028745,1.114481,-.013908,1.001728,.018884,1.12261,-.006843,1.00074,.009264,1.130165,62e-6,.999983,-6e-6,2e-4,-51e-6,1.064931,.25463,504e-6,-128e-6,1.064668,.25463,.002016,-513e-6,1.064794,.25463,.004535,-.001155,1.064851,.25463,.008063,-.002053,1.064966,.25463,.012598,-.003208,1.06484,.25463,.01814,-.004619,1.064602,.254631,.024695,-.006288,1.064965,.254632,.032251,-.008211,1.064795,.25463,.040821,-.010393,1.064802,.254628,.050398,-.01283,1.064758,.254627,.060987,-.015525,1.064731,.254625,.072584,-.018474,1.064615,.254621,.085199,-.021682,1.064672,.254619,.098826,-.025144,1.06463,.254613,.113465,-.02886,1.064515,.254606,.129119,-.032823,1.064416,.254598,.145767,-.036969,1.064347,.254579,.16319,-.040754,1.064132,.254506,.181622,-.044989,1.063951,.254437,.200981,-.049642,1.063745,.25437,.221145,-.054776,1.063547,.254324,.241896,-.060538,1.063289,.254346,.263684,-.066113,1.063013,.254296,.286796,-.070925,1.062625,.254059,.310867,-.076187,1.062216,.253817,.335644,-.081406,1.061703,.253481,.360917,-.086336,1.061066,.253005,.386786,-.09179,1.060454,.252558,.412921,-.09723,1.059568,.252008,.439722,-.102574,1.058706,.251323,.467559,-.106972,1.057682,.250239,.495605,-.111329,1.056612,.248944,.523589,-.115561,1.055101,.247471,.551787,-.119732,1.053745,.245777,.580426,-.122711,1.051829,.243448,.608778,-.125436,1.049642,.240769,.637069,-.127993,1.047749,.237739,.665251,-.129448,1.045244,.233928,.692977,-.130408,1.042279,.22964,.720346,-.130931,1.039693,.224829,.747365,-.130392,1.036675,.219144,.773734,-.12954,1.033719,.212965,.799578,-.127689,1.030774,.206047,.825002,-.125456,1.028551,.198576,.849564,-.122291,1.0258,.190471,.873412,-.11872,1.023657,.181739,.896628,-.114323,1.021381,.172586,.918952,-.109587,1.019674,.162914,.940602,-.104093,1.018126,.153039,.960917,-.098187,1.016339,.142774,.980911,-.091963,1.01544,.132316,.999686,-.085159,1.014377,.121453,1.017538,-.078139,1.013498,.110527,1.033918,-.070797,1.012332,.099437,1.04939,-.063129,1.011368,.088157,1.063402,-.055354,1.010111,.076951,1.076096,-.047522,1.008774,.065616,1.087562,-.039447,1.007202,.05431,1.097591,-.031359,1.005346,.042948,1.106782,-.023393,1.00371,.031799,1.115234,-.015461,1.002116,.020943,1.123166,-.007589,1.000858,.010288,1.130796,104e-6,1.000032,-24e-6,2e-4,-56e-6,1.07878,.281356,504e-6,-142e-6,1.079271,.281355,.002015,-567e-6,1.078635,.281355,.004535,-.001276,1.079164,.281356,.008064,-.002269,1.0793,.281355,.012598,-.003544,1.079149,.281355,.018143,-.005104,1.079329,.281355,.024691,-.006947,1.079073,.281353,.032254,-.009074,1.079253,.281354,.040822,-.011484,1.079176,.281353,.050399,-.014177,1.079057,.281349,.060987,-.017153,1.079007,.281347,.072586,-.020412,1.078998,.281343,.085203,-.023956,1.078962,.281336,.098823,-.027778,1.078839,.281332,.113464,-.031882,1.078783,.281325,.129114,-.036255,1.078633,.281315,.145748,-.04079,1.078545,.281287,.163179,-.045024,1.078311,.281208,.181649,-.049791,1.078135,.281137,.201042,-.054953,1.077845,.281063,.221267,-.060551,1.077576,.281006,.242114,-.066663,1.077257,.280978,.263568,-.072771,1.076897,.280925,.286744,-.078349,1.076405,.280689,.31084,-.084201,1.075898,.280418,.335612,-.089846,1.075287,.28002,.360975,-.095394,1.074482,.279513,.386932,-.10129,1.073617,.278961,.413171,-.107042,1.072719,.278283,.439886,-.113083,1.071698,.277547,.467535,-.11801,1.070213,.276311,.495701,-.122793,1.068857,.274867,.523772,-.127278,1.067037,.273153,.551849,-.131671,1.064923,.271176,.580338,-.135293,1.062749,.268626,.608771,-.138065,1.059944,.265569,.636756,-.140565,1.056851,.262054,.664574,-.142434,1.053461,.257807,.692151,-.143237,1.04991,.25293,.719376,-.143717,1.046426,.247414,.745852,-.143117,1.042377,.241001,.7723,-.141975,1.038789,.233797,.79805,-.140114,1.03529,.226218,.82337,-.137379,1.032374,.217785,.847735,-.134119,1.028853,.208748,.871897,-.129985,1.026395,.198877,.89495,-.125324,1.023787,.188803,.917909,-.120007,1.022073,.178493,.939567,-.114099,1.020098,.167466,.960534,-.107748,1.018851,.156223,.980423,-.100748,1.017362,.144716,.999334,-.093494,1.015961,.133028,1.017561,-.085728,1.015059,.120953,1.034225,-.077627,1.013888,.108943,1.049937,-.069375,1.012898,.096678,1.064265,-.060807,1.011635,.08435,1.077188,-.052052,1.010095,.071964,1.088637,-.043304,1.008399,.059531,1.098766,-.034458,1.006397,.047134,1.107697,-.025637,1.004354,.034887,1.116055,-.016932,1.002611,.022948,1.123819,-.008437,1.001023,.011386,1.131333,87e-6,.999952,-97e-6,2e-4,-62e-6,1.095622,.308458,504e-6,-155e-6,1.094863,.308458,.002016,-622e-6,1.095169,.308458,.004535,-.001399,1.095156,.308458,.008063,-.002487,1.095413,.308455,.012598,-.003886,1.095147,.308458,.018141,-.005596,1.09515,.308457,.024692,-.007616,1.09514,.308457,.032252,-.009947,1.095098,.308456,.040822,-.012589,1.095096,.308453,.050399,-.015541,1.09507,.308451,.060985,-.018803,1.094922,.308448,.072583,-.022375,1.094902,.308444,.085197,-.026258,1.094882,.308438,.098822,-.030448,1.094775,.308429,.11346,-.034944,1.094641,.308419,.129112,-.039731,1.09453,.308403,.145711,-.04461,1.094332,.308365,.163178,-.049362,1.094149,.308285,.181679,-.054666,1.093876,.30821,.201109,-.060336,1.093603,.308132,.221388,-.066414,1.09325,.308047,.242315,-.072881,1.092835,.307985,.263651,-.079453,1.092391,.307902,.28672,-.085882,1.091866,.307688,.310817,-.092274,1.091225,.307379,.335562,-.098306,1.090346,.306906,.361043,-.104572,1.089423,.306374,.387051,-.110843,1.088437,.30571,.413405,-.117062,1.087228,.304906,.440122,-.123501,1.085879,.304017,.467522,-.129245,1.084197,.302783,.495721,-.134285,1.082284,.301104,.523925,-.139143,1.080109,.299142,.551814,-.143638,1.077043,.296825,.579878,-.147774,1.074071,.294071,.608316,-.150724,1.070621,.290519,.636059,-.153168,1.06639,.286424,.663481,-.155139,1.062069,.281559,.690753,-.155944,1.057211,.276024,.717767,-.156176,1.052682,.269622,.743937,-.155783,1.047747,.262532,.770214,-.154245,1.04351,.254609,.795542,-.152192,1.039121,.246007,.821099,-.149256,1.035962,.236663,.845452,-.145605,1.03232,.226751,.86978,-.141186,1.02939,.216165,.893141,-.136137,1.026485,.204937,.916034,-.130332,1.024389,.193624,.938089,-.12404,1.02227,.181756,.959488,-.117011,1.020457,.169339,.979594,-.109617,1.018871,.156875,.998912,-.101562,1.017533,.144288,1.0171,-.093164,1.016445,.13137,1.034413,-.084488,1.015453,.118322,1.050347,-.075377,1.014259,.104963,1.064958,-.066108,1.013057,.091722,1.078045,-.056702,1.011491,.078231,1.089749,-.047106,1.009662,.064797,1.099831,-.037467,1.007417,.051315,1.108789,-.02799,1.005144,.038064,1.116865,-.018464,1.002925,.025008,1.124609,-.009068,1.001221,.01225,1.13204,93e-6,.999984,-71e-6,2e-4,-67e-6,1.112554,.335981,504e-6,-169e-6,1.11266,.335981,.002016,-677e-6,1.112827,.335981,.004533,-.001523,1.112147,.335982,.008063,-.002709,1.112882,.335979,.012598,-.004233,1.112891,.33598,.018141,-.006095,1.112882,.33598,.024693,-.008296,1.112877,.335978,.032252,-.010834,1.11286,.335976,.040824,-.013713,1.112965,.335974,.050398,-.016927,1.112753,.335971,.060991,-.020482,1.112826,.33597,.072587,-.024371,1.112676,.335962,.085199,-.028597,1.112593,.335955,.098822,-.033159,1.112453,.335943,.113461,-.038052,1.112329,.33593,.129108,-.043255,1.112144,.33591,.145665,-.048412,1.111905,.335857,.163185,-.053786,1.111668,.335781,.18171,-.059608,1.111345,.335696,.201166,-.065794,1.110979,.335606,.221489,-.072361,1.110553,.335505,.242471,-.079184,1.110112,.335396,.2639,-.086213,1.109584,.335271,.286688,-.093491,1.108927,.335089,.310773,-.100406,1.108091,.334737,.335573,-.106987,1.107169,.334208,.361117,-.113844,1.106097,.3336,.387175,-.120463,1.104826,.332828,.413665,-.127245,1.103415,.331929,.440386,-.133927,1.101632,.330851,.467527,-.140496,1.099563,.329538,.49563,-.145874,1.096956,.327618,.523864,-.150997,1.094201,.32539,.551705,-.155713,1.090342,.322688,.579383,-.159993,1.08601,.319483,.607301,-.163238,1.081226,.315522,.634873,-.165667,1.076065,.31084,.662028,-.167606,1.070466,.305377,.688755,-.168626,1.064601,.299056,.715612,-.168578,1.059269,.291963,.741604,-.167961,1.053648,.284018,.767757,-.166439,1.048928,.275474,.793264,-.164023,1.044343,.266056,.818165,-.160965,1.039909,.25575,.843255,-.156896,1.03618,.244843,.867249,-.152262,1.032303,.233464,.890994,-.146655,1.029365,.221128,.913829,-.140574,1.026607,.208554,.936508,-.13364,1.024512,.195772,.95772,-.12622,1.022421,.18242,.97894,-.118164,1.021293,.168852,.998285,-.109558,1.019444,.155261,1.016764,-.100562,1.017825,.141395,1.034387,-.091064,1.016996,.127311,1.050916,-.081468,1.015945,.113089,1.065652,-.071463,1.014547,.098879,1.079155,-.06124,1.013066,.084468,1.090822,-.05098,1.010788,.06994,1.1011,-.040549,1.008563,.055475,1.109824,-.030101,1.00595,.041033,1.117828,-.019884,1.003453,.027022,1.125443,-.0099,1.001484,.013306,1.132869,94e-6,1.000004,-46e-6,2e-4,-73e-6,1.132849,.36397,504e-6,-183e-6,1.132155,.363969,.002016,-734e-6,1.132516,.363969,.004535,-.001651,1.132256,.363969,.008062,-.002934,1.132318,.363966,.012597,-.004585,1.132386,.363968,.018141,-.006602,1.132457,.363967,.024693,-.008987,1.132511,.363967,.032252,-.011737,1.132488,.363965,.040819,-.014853,1.132241,.363959,.050398,-.018336,1.132372,.363958,.060988,-.022185,1.132373,.363954,.072582,-.026396,1.132137,.363943,.085195,-.030973,1.132071,.363935,.098822,-.035913,1.131978,.363922,.113461,-.041209,1.131801,.363905,.129116,-.046833,1.131535,.363867,.14564,-.052346,1.13129,.363814,.163199,-.058275,1.131046,.363734,.181742,-.064623,1.130671,.363642,.201227,-.071336,1.130224,.363539,.221587,-.078396,1.129758,.363419,.242625,-.085545,1.129213,.363256,.264183,-.09311,1.128549,.363097,.286668,-.101206,1.127767,.362939,.310745,-.108586,1.126796,.362516,.335602,-.115827,1.125686,.361953,.361202,-.123212,1.124451,.361275,.387298,-.130294,1.122861,.360376,.413918,-.137553,1.121154,.359362,.44068,-.144577,1.118825,.358069,.467667,-.151558,1.116002,.356581,.495449,-.157621,1.112778,.354531,.523514,-.162844,1.108842,.351915,.55125,-.167744,1.104075,.348797,.578629,-.172132,1.098733,.345222,.605757,-.175733,1.092224,.340665,.633392,-.178109,1.086201,.335286,.660783,-.180009,1.08011,.329286,.687219,-.181105,1.073419,.322319,.713873,-.181046,1.06741,.314616,.740094,-.180219,1.061414,.306014,.765233,-.178559,1.055287,.296704,.790885,-.175806,1.049727,.286394,.815464,-.172354,1.044519,.275189,.840259,-.168048,1.040375,.263441,.864285,-.162904,1.03601,.250918,.888806,-.157194,1.033525,.237611,.911682,-.150486,1.02949,.223809,.934481,-.143212,1.026778,.209705,.956337,-.135233,1.024632,.195281,.97738,-.12665,1.022737,.180878,.997427,-.117552,1.02111,.166112,1.016666,-.107814,1.019869,.151231,1.034337,-.097814,1.018543,.136375,1.051082,-.08733,1.017476,.121187,1.066326,-.076614,1.016083,.106043,1.079897,-.065793,1.014227,.090566,1.092136,-.054654,1.012334,.074988,1.102315,-.043516,1.009627,.059577,1.111105,-.032509,1.006808,.044202,1.118861,-.021381,1.003917,.028995,1.126363,-.010489,1.00167,.014269,1.133598,83e-6,.999989,-35e-6,2e-4,-79e-6,1.155026,.39247,504e-6,-198e-6,1.154184,.392469,.002016,-791e-6,1.15399,.392469,.004535,-.00178,1.154045,.392469,.008063,-.003164,1.154007,.392466,.012598,-.004944,1.154022,.392469,.018141,-.007119,1.154015,.392468,.024692,-.00969,1.154017,.392466,.032254,-.012656,1.154069,.392465,.040826,-.016018,1.15398,.392459,.050399,-.019771,1.153911,.392456,.060987,-.023919,1.15386,.392447,.072588,-.028461,1.153777,.392442,.085197,-.033393,1.153582,.392428,.098822,-.038716,1.153434,.392412,.113462,-.044422,1.153271,.39239,.129101,-.050455,1.153019,.392359,.145642,-.056392,1.152721,.392283,.163223,-.062859,1.152404,.392201,.181779,-.069721,1.151941,.392099,.201289,-.076968,1.151422,.391978,.221678,-.084518,1.150861,.391833,.242752,-.092017,1.150156,.391618,.264474,-.100184,1.149402,.391421,.286768,-.108921,1.148545,.391249,.310719,-.116815,1.147388,.390773,.335638,-.124785,1.146042,.390168,.36124,-.13263,1.144529,.389394,.387443,-.140298,1.142602,.388391,.414067,-.147913,1.140361,.387199,.440904,-.155362,1.137612,.385742,.467771,-.162574,1.133659,.383926,.494907,-.169312,1.129246,.381715,.522801,-.174778,1.124228,.378678,.550751,-.179824,1.118697,.375158,.578018,-.184284,1.112019,.370851,.605291,-.188215,1.105151,.365928,.632269,-.19076,1.097677,.360114,.659432,-.192457,1.090816,.353498,.685839,-.193458,1.083286,.346094,.711876,-.193502,1.076245,.337754,.738184,-.192371,1.069684,.328412,.763723,-.190531,1.063249,.318164,.789192,-.187726,1.057265,.3069,.813744,-.183783,1.051177,.295021,.838408,-.179328,1.045902,.282144,.862116,-.173573,1.040853,.268438,.885636,-.16735,1.036515,.254108,.909342,-.160229,1.033269,.239082,.931962,-.152529,1.029627,.224024,.954671,-.14408,1.027507,.208393,.975707,-.135023,1.024657,.19263,.996644,-.125258,1.022998,.176741,1.015817,-.115089,1.021234,.160926,1.034301,-.104317,1.020025,.145042,1.051131,-.093218,1.018739,.129052,1.066836,-.081828,1.017419,.112905,1.081027,-.070132,1.015714,.096578,1.093225,-.058382,1.013465,.080077,1.103691,-.046527,1.010853,.06358,1.112431,-.034624,1.007702,.047118,1.120035,-.022913,1.004551,.031018,1.127336,-.011284,1.001924,.015283,1.13451,17e-5,.999937,-58e-6,2e-4,-84e-6,1.177044,.421534,504e-6,-212e-6,1.177312,.421533,.002016,-85e-5,1.17773,.421533,.004535,-.001912,1.177722,.421533,.008063,-.003399,1.177844,.421529,.012598,-.00531,1.177768,.421533,.018141,-.007646,1.17773,.421531,.024692,-.010407,1.177663,.42153,.032252,-.013592,1.177681,.421527,.040821,-.017201,1.177562,.421524,.050401,-.021234,1.177445,.421516,.060988,-.025688,1.177461,.421509,.07259,-.030565,1.177364,.421498,.0852,-.03586,1.177205,.421482,.098823,-.041572,1.177011,.421462,.113465,-.047694,1.176794,.421436,.129094,-.054122,1.176504,.421396,.145652,-.06053,1.176203,.421311,.163245,-.067517,1.175805,.421218,.181825,-.074919,1.175271,.421108,.20136,-.0827,1.174717,.420974,.221773,-.090727,1.174021,.420795,.242908,-.098719,1.173173,.420536,.264742,-.107417,1.172285,.420296,.287091,-.116601,1.171326,.420065,.310723,-.125265,1.169907,.419582,.335685,-.133876,1.168352,.418912,.361285,-.14214,1.166322,.418006,.387562,-.150436,1.164136,.416899,.414175,-.158388,1.161162,.415513,.441021,-.166258,1.157608,.413836,.467698,-.17372,1.152519,.411702,.49473,-.180843,1.14702,.409102,.522524,-.186906,1.141256,.405789,.550055,-.192004,1.134114,.401759,.577512,-.196588,1.127086,.397153,.604348,-.20042,1.119029,.391767,.63097,-.20332,1.110308,.385573,.658023,-.204883,1.102643,.378245,.684422,-.205716,1.094573,.370191,.710405,-.205767,1.086405,.361231,.736417,-.204513,1.078712,.351106,.761836,-.202281,1.071619,.340096,.78714,-.199395,1.064873,.328139,.812197,-.195185,1.058313,.315044,.836342,-.190191,1.052085,.300933,.860311,-.184343,1.046705,.286411,.883597,-.177415,1.041072,.270897,.906852,-.170003,1.036797,.254825,.929991,-.161592,1.033264,.238176,.952478,-.152792,1.03025,.221581,.974216,-.143032,1.027331,.204378,.995372,-.132922,1.025135,.18747,1.01533,-.122009,1.02325,.170538,1.03407,-.11074,1.022021,.153777,1.051295,-.099016,1.020271,.136916,1.06746,-.08692,1.018948,.11988,1.082022,-.074729,1.017336,.102565,1.094378,-.062036,1.01482,.084994,1.104998,-.049413,1.011999,.06765,1.113773,-.036812,1.008711,.050148,1.121263,-.024274,1.005141,.032976,1.12842,-.012038,1.002196,.016239,1.135496,106e-6,1.000042,-62e-6,2e-4,-9e-5,1.203048,.451217,504e-6,-227e-6,1.203226,.451215,.002016,-909e-6,1.20345,.451215,.004535,-.002046,1.203569,.451215,.008062,-.003638,1.203609,.451209,.012598,-.005684,1.20358,.451214,.018141,-.008185,1.203515,.451212,.024694,-.011141,1.203618,.451211,.032253,-.014549,1.203609,.451207,.040815,-.018409,1.203302,.451203,.050401,-.022727,1.203454,.451195,.06099,-.027495,1.20348,.451188,.072591,-.032713,1.20322,.451172,.085203,-.038378,1.203058,.451154,.098829,-.044489,1.202838,.45113,.113466,-.051031,1.20253,.451098,.129084,-.057808,1.20227,.451041,.145669,-.064769,1.201904,.450956,.163278,-.072278,1.201411,.450853,.18188,-.080224,1.200825,.450721,.201436,-.088537,1.200164,.450566,.221865,-.097009,1.199335,.450351,.243083,-.105591,1.198383,.450062,.265033,-.114818,1.19738,.449769,.287456,-.124372,1.196137,.449438,.310758,-.133892,1.194554,.448974,.335721,-.143052,1.192649,.448216,.361348,-.151868,1.190233,.447202,.387573,-.160644,1.187211,.445926,.414159,-.169028,1.183452,.444313,.44095,-.177169,1.178562,.442315,.467998,-.18509,1.17354,.43996,.494566,-.192396,1.166344,.436989,.52173,-.198915,1.159283,.433439,.549405,-.20424,1.151503,.428984,.576755,-.208861,1.143004,.423839,.603635,-.212734,1.134099,.418012,.629979,-.215712,1.124555,.411445,.656597,-.217385,1.115293,.403628,.683317,-.218093,1.10646,.394639,.70899,-.217835,1.097389,.385012,.734898,-.216774,1.08894,.373999,.760342,-.21412,1.080385,.362128,.785517,-.210821,1.072959,.349184,.809933,-.206443,1.06545,.33508,.834339,-.200942,1.058701,.320257,.858793,-.194938,1.052711,.304133,.8823,-.187615,1.047044,.287771,.90556,-.179626,1.042083,.270571,.927916,-.170753,1.037077,.252741,.950415,-.16127,1.0332,.234656,.97292,-.151239,1.030418,.216652,.993893,-.140358,1.027479,.198252,1.014204,-.128963,1.024897,.180113,1.033878,-.117128,1.023648,.162282,1.051754,-.104678,1.02223,.144366,1.067924,-.092,1.020453,.126455,1.082643,-.078837,1.018518,.108194,1.095503,-.065669,1.016199,.089966,1.10629,-.052345,1.013113,.07153,1.115219,-.039024,1.009636,.053158,1.122587,-.025789,1.005801,.034959,1.129461,-.012622,1.002442,.017222,1.136468,152e-6,.999964,-65e-6,2e-4,-96e-6,1.231156,.481574,504e-6,-243e-6,1.232187,.481572,.002016,-971e-6,1.231948,.481572,.004535,-.002184,1.231919,.481572,.008061,-.003882,1.231453,.481566,.012597,-.006066,1.2318,.481572,.018142,-.008736,1.231756,.481569,.024693,-.011889,1.232062,.48157,.032254,-.015528,1.231915,.481563,.040822,-.01965,1.231863,.481559,.050402,-.024255,1.231737,.48155,.060992,-.029342,1.231678,.481537,.072592,-.034908,1.231537,.481521,.085207,-.040953,1.231336,.481499,.098834,-.047469,1.231071,.481469,.113474,-.054441,1.230757,.481431,.129077,-.061556,1.230424,.481359,.145691,-.069091,1.230022,.481269,.163321,-.077151,1.229461,.481156,.181936,-.085636,1.228718,.481011,.201516,-.094484,1.228023,.48083,.221963,-.103362,1.227057,.480562,.243264,-.112628,1.225997,.480247,.265291,-.122366,1.224744,.479891,.287824,-.132256,1.223255,.479461,.310927,-.142614,1.221348,.478978,.335749,-.152326,1.218953,.478132,.361361,-.161747,1.215806,.476971,.38748,-.170879,1.211853,.475477,.414231,-.179865,1.207783,.473686,.441065,-.188331,1.202051,.471415,.467923,-.196454,1.195463,.468647,.494526,-.204048,1.187542,.465459,.521318,-.21102,1.179235,.46165,.548654,-.21652,1.17011,.456868,.575778,-.221098,1.160163,.451227,.60261,-.224923,1.149751,.444866,.628891,-.227895,1.139169,.437577,.655635,-.23002,1.129736,.429369,.682115,-.230419,1.119516,.419673,.707514,-.229789,1.108277,.409143,.733169,-.22852,1.099159,.397296,.758342,-.225793,1.089839,.384578,.783477,-.222049,1.081428,.370323,.808497,-.217562,1.073742,.355253,.83279,-.211697,1.06585,.339282,.856677,-.204989,1.058834,.322181,.880662,-.197653,1.053291,.30461,.903474,-.188858,1.046822,.286042,.926313,-.179746,1.041663,.267224,.948458,-.169542,1.036532,.247978,.970873,-.159005,1.033008,.228535,.992958,-.147658,1.029844,.208819,1.013413,-.135771,1.02693,.189486,1.033483,-.123256,1.025545,.170422,1.051872,-.110401,1.023935,.152075,1.068396,-.09686,1.022092,.133169,1.083731,-.083259,1.020221,.114022,1.096849,-.069266,1.017663,.094772,1.107864,-.055203,1.014524,.075432,1.1166,-.041097,1.010514,.05598,1.123871,-.027083,1.006313,.036839,1.130718,-.01351,1.002778,.018156,1.137649,154e-6,1.000033,-28e-6,2e-4,-103e-6,1.264025,.51267,504e-6,-258e-6,1.262437,.512667,.002016,-.001033,1.262691,.512668,.004535,-.002325,1.262834,.512667,.008063,-.004133,1.262783,.512659,.012598,-.006458,1.262803,.512666,.018141,-.009299,1.26272,.512665,.024683,-.012652,1.262061,.512655,.032257,-.016532,1.262858,.512656,.040826,-.020919,1.262709,.512649,.050403,-.02582,1.262685,.512639,.060993,-.031233,1.262544,.512625,.072597,-.037157,1.262435,.512607,.085211,-.043587,1.262209,.512581,.098842,-.05052,1.261907,.512544,.113484,-.057926,1.261575,.5125,.129097,-.06546,1.261293,.51242,.145727,-.073543,1.260736,.512316,.163375,-.082134,1.260117,.51219,.182011,-.091173,1.259299,.512024,.201598,-.10054,1.258381,.51181,.222084,-.109931,1.257293,.511505,.243446,-.119838,1.25605,.511151,.265574,-.13009,1.254607,.510724,.28823,-.140421,1.252808,.510191,.311336,-.151343,1.250489,.509627,.335719,-.161689,1.247279,.508688,.361314,-.171748,1.243467,.507393,.387541,-.181399,1.239145,.505758,.414204,-.190768,1.23376,.503676,.441092,-.199659,1.227433,.501129,.467789,-.207934,1.219247,.498078,.494454,-.215747,1.210441,.49463,.52095,-.222869,1.200559,.490467,.547802,-.228881,1.189872,.485444,.575563,-.23376,1.180081,.479268,.602426,-.237566,1.168544,.472272,.628772,-.240447,1.156546,.46439,.654963,-.242427,1.145123,.455345,.681384,-.24298,1.134322,.444885,.707173,-.24215,1.122665,.433338,.732477,-.240435,1.111733,.420647,.757567,-.237806,1.101271,.406799,.782341,-.233503,1.091341,.391761,.80669,-.228346,1.082042,.375576,.830804,-.222386,1.073504,.358545,.85494,-.215141,1.06588,.340431,.878709,-.207207,1.05885,.32169,.901928,-.198273,1.052588,.30193,.924845,-.188476,1.046521,.281513,.946932,-.177996,1.040966,.261234,.969256,-.166644,1.03667,.240356,.991323,-.154968,1.032694,.219748,1.013013,-.142425,1.030061,.199103,1.032845,-.129456,1.027254,.178936,1.051887,-.115763,1.025497,.159243,1.069179,-.101851,1.023807,.13956,1.084499,-.087357,1.021441,.119607,1.097921,-.072796,1.01878,.099501,1.109281,-.058037,1.015566,.079211,1.118194,-.043226,1.011494,.058873,1.125351,-.028633,1.007089,.038736,1.132002,-.013996,1.003014,.019063,1.138951,132e-6,1.000036,-7e-6,2e-4,-109e-6,1.296791,.544571,504e-6,-274e-6,1.296055,.544568,.002016,-.001098,1.297239,.544568,.004535,-.00247,1.2966,.544568,.008062,-.00439,1.296368,.544559,.012597,-.00686,1.296454,.544566,.018141,-.009878,1.296522,.544565,.024693,-.013444,1.296536,.54456,.032256,-.017559,1.296638,.544557,.040824,-.022218,1.296491,.544547,.050408,-.027426,1.296552,.544532,.060997,-.033173,1.296283,.544518,.0726,-.039463,1.296113,.544496,.08522,-.046292,1.295894,.544466,.098851,-.053648,1.295545,.544422,.113496,-.061487,1.295201,.544371,.129112,-.069467,1.294754,.544273,.145765,-.078092,1.294209,.54416,.163431,-.087231,1.293534,.544017,.182088,-.096837,1.29258,.543828,.201698,-.106713,1.291586,.543585,.222231,-.116699,1.290325,.543238,.243653,-.127208,1.288888,.542836,.265855,-.137949,1.287131,.542329,.288623,-.148847,1.284936,.5417,.31183,-.160204,1.282109,.540997,.335728,-.171324,1.278036,.540045,.361403,-.181915,1.273912,.538603,.387647,-.192124,1.268881,.536741,.414217,-.201807,1.262363,.534432,.44109,-.211093,1.254755,.531623,.467823,-.219678,1.245456,.528314,.494361,-.227581,1.234953,.524391,.521264,-.235087,1.224839,.519902,.547881,-.241508,1.213175,.514574,.574965,-.246315,1.200505,.507837,.601847,-.250061,1.187901,.500286,.628207,-.252822,1.174601,.491502,.654445,-.254691,1.161944,.481726,.680175,-.255318,1.149305,.470727,.706168,-.254257,1.136708,.458045,.731458,-.2521,1.124047,.444438,.756378,-.249115,1.112942,.429611,.781311,-.244899,1.1018,.413501,.805755,-.239225,1.091662,.395889,.829867,-.23283,1.082291,.37786,.853067,-.225193,1.07282,.358704,.877084,-.216648,1.065415,.338413,.900123,-.20739,1.058403,.317596,.92337,-.197095,1.051412,.296301,.946021,-.186084,1.045877,.274498,.967669,-.174262,1.040316,.252565,.989761,-.161814,1.035489,.230312,1.012163,-.149076,1.03254,.208746,1.032547,-.135299,1.029598,.18718,1.052032,-.121277,1.027355,.166482,1.069907,-.106582,1.025622,.145939,1.085563,-.091589,1.023244,.125362,1.099447,-.076263,1.020661,.104087,1.110848,-.060825,1.017035,.083036,1.119923,-.045319,1.012675,.061719,1.126805,-.029852,1.007668,.040583,1.133282,-.014846,1.003335,.019969,1.140128,149e-6,1.000024,-37e-6,2e-4,-116e-6,1.334863,.57735,504e-6,-291e-6,1.33335,.577348,.002015,-.001164,1.332853,.577347,.004535,-.002618,1.333295,.577347,.008062,-.004655,1.333189,.577336,.012598,-.007273,1.333309,.577345,.018141,-.010472,1.333274,.577342,.024694,-.014253,1.333231,.577339,.032254,-.018614,1.333265,.577332,.040827,-.023556,1.333261,.577321,.0504,-.029069,1.332893,.577309,.061,-.035166,1.332998,.577288,.072608,-.041833,1.332901,.577263,.085227,-.049067,1.332603,.577226,.098864,-.05686,1.332264,.577177,.113507,-.065114,1.331825,.577109,.129146,-.07361,1.331311,.577005,.145808,-.082766,1.330639,.576872,.163494,-.092458,1.329878,.576709,.182176,-.102639,1.328889,.576501,.201804,-.112983,1.32771,.576207,.222394,-.12365,1.326256,.575823,.243881,-.13478,1.324593,.575363,.266122,-.145931,1.322426,.574751,.289043,-.1575,1.319837,.574033,.31233,-.169208,1.316301,.573181,.33612,-.181125,1.312251,.572188,.361506,-.192232,1.307003,.570631,.387757,-.202981,1.301068,.568558,.414365,-.21316,1.293695,.566027,.440986,-.222617,1.283958,.562942,.467943,-.231583,1.274057,.559219,.494821,-.239881,1.262864,.554913,.521486,-.247336,1.250633,.549953,.547884,-.253921,1.237448,.544251,.574582,-.259099,1.223164,.53712,.601342,-.262695,1.208784,.52865,.627861,-.265337,1.194424,.518978,.653745,-.266872,1.179361,.508525,.679348,-.267403,1.16501,.496705,.705068,-.266429,1.151693,.482926,.730312,-.263829,1.137584,.468519,.755576,-.260491,1.125328,.452213,.780371,-.256166,1.113759,.435127,.804632,-.250079,1.101656,.416833,.828983,-.243181,1.091235,.397009,.852585,-.235383,1.081475,.376647,.875237,-.226031,1.071806,.355506,.899152,-.216343,1.064453,.333133,.922121,-.205772,1.057161,.311073,.944523,-.19398,1.050447,.287781,.967313,-.18192,1.044531,.26435,.989042,-.168822,1.039312,.241128,1.010881,-.15535,1.035298,.218138,1.032368,-.141231,1.032073,.195579,1.052254,-.126521,1.029395,.173399,1.070207,-.111243,1.026938,.151866,1.086528,-.095617,1.024957,.130711,1.10067,-.079687,1.021924,.108865,1.112461,-.063593,1.018281,.08676,1.121588,-.047313,1.013747,.064575,1.128522,-.031385,1.008433,.042499,1.134759,-.015356,1.003569,.02084,1.141448,114e-6,.999978,-56e-6,2e-4,-122e-6,1.372763,.611086,503e-6,-308e-6,1.371456,.611084,.002016,-.001232,1.37344,.611084,.004535,-.002771,1.373387,.611083,.008061,-.004926,1.372916,.611083,.012601,-.0077,1.373956,.611084,.018142,-.011084,1.373419,.611078,.024695,-.015087,1.373492,.611074,.032255,-.019701,1.37336,.611066,.040827,-.02493,1.373327,.611055,.050408,-.030769,1.373222,.611037,.061004,-.037217,1.373079,.611014,.072613,-.04427,1.372895,.610982,.085238,-.051923,1.372624,.610941,.098878,-.060161,1.372252,.610883,.113522,-.068785,1.371785,.610798,.129176,-.077863,1.371103,.610683,.145876,-.087593,1.370541,.610537,.16357,-.097847,1.369496,.610349,.182283,-.108592,1.368477,.610109,.20193,-.11942,1.36698,.609763,.22257,-.130789,1.365375,.609343,.244123,-.142514,1.363456,.608815,.266437,-.154232,1.360916,.608114,.289467,-.16637,1.357909,.607291,.312861,-.178505,1.353588,.606272,.336736,-.19098,1.349211,.605153,.36174,-.202859,1.343319,.603548,.387878,-.213997,1.335908,.601268,.414357,-.224584,1.326676,.598499,.441442,-.234664,1.317331,.595066,.468409,-.243875,1.305818,.590996,.494999,-.252121,1.291863,.586293,.52173,-.259714,1.278212,.58084,.547894,-.266242,1.262656,.574494,.573865,-.271578,1.246364,.567007,.601124,-.275503,1.231274,.557771,.627606,-.277954,1.215252,.547255,.654004,-.279404,1.199977,.535766,.679554,-.279632,1.183995,.522792,.70428,-.278457,1.167428,.508488,.72983,-.275706,1.15276,.492425,.754376,-.27164,1.137942,.475285,.779209,-.266911,1.125222,.456679,.803562,-.260838,1.112179,.437267,.827985,-.253353,1.101439,.416227,.851737,-.245027,1.08989,.394728,.87485,-.235719,1.080018,.372244,.89768,-.225051,1.070807,.348846,.921351,-.214051,1.06318,.324961,.943818,-.202039,1.056148,.300836,.966368,-.189134,1.049277,.276333,.987426,-.175613,1.042176,.251862,1.010162,-.161473,1.038567,.227217,1.031224,-.146866,1.034102,.203582,1.052317,-.131644,1.0316,.180629,1.070879,-.115909,1.028913,.158165,1.087407,-.099638,1.026193,.135905,1.102159,-.083091,1.023567,.113394,1.114006,-.066178,1.019567,.090325,1.123374,-.04943,1.014856,.067302,1.13031,-.032557,1.009141,.044264,1.136334,-.016157,1.003984,.021807,1.142961,172e-6,.999951,-77e-6,2e-4,-129e-6,1.416584,.645866,504e-6,-326e-6,1.417762,.645865,.002016,-.001302,1.417825,.645866,.004535,-.002929,1.417142,.645865,.008062,-.005207,1.416968,.645864,.012598,-.008136,1.417109,.645862,.018141,-.011715,1.417001,.645859,.02469,-.015941,1.416878,.645853,.032257,-.020823,1.417134,.645843,.040827,-.026347,1.416983,.645829,.050411,-.032518,1.416949,.645808,.061007,-.03933,1.416694,.645781,.072621,-.046783,1.416599,.645746,.085249,-.054865,1.416241,.645695,.098897,-.063563,1.415832,.64563,.113546,-.072607,1.415264,.645529,.12922,-.082257,1.414482,.645396,.145888,-.092515,1.413626,.645268,.163659,-.103393,1.41271,.645018,.182385,-.114684,1.411418,.644739,.202078,-.126098,1.409822,.644348,.222772,-.138145,1.407948,.643872,.24437,-.150405,1.405678,.643255,.266787,-.162798,1.402763,.642463,.289844,-.175434,1.398863,.641504,.31354,-.188158,1.394695,.640346,.337489,-.201014,1.389376,.639042,.362008,-.213719,1.382439,.637412,.38799,-.225248,1.373281,.63493,.414728,-.236348,1.363729,.631861,.441635,-.246701,1.352304,.628155,.468588,-.256167,1.339162,.623625,.495337,-.264662,1.323811,.618458,.521886,-.272207,1.30763,.612373,.548355,-.27889,1.291265,.605263,.574535,-.284442,1.273752,.597048,.60087,-.288389,1.256171,.587401,.627715,-.290816,1.238447,.576001,.65383,-.291886,1.221036,.563198,.679175,-.291629,1.202283,.549249,.704539,-.290489,1.185866,.533881,.729126,-.287529,1.168822,.516966,.754297,-.283184,1.152934,.498501,.778678,-.277732,1.137821,.478728,.802473,-.271203,1.123387,.457814,.826596,-.263494,1.110573,.435865,.850835,-.254572,1.099099,.412597,.874203,-.244815,1.088403,.388995,.897271,-.233993,1.078085,.364487,.919667,-.221934,1.068543,.339344,.943001,-.209714,1.061081,.31377,.965688,-.196367,1.054023,.287928,.987598,-.182263,1.047247,.262157,1.00928,-.167775,1.041376,.236855,1.031762,-.15253,1.037647,.211847,1.051965,-.136809,1.033396,.187546,1.071699,-.120418,1.031021,.164186,1.088881,-.103618,1.028403,.141184,1.103482,-.086271,1.024987,.117665,1.115646,-.068973,1.020884,.093896,1.125258,-.051285,1.015966,.069978,1.132045,-.033998,1.00999,.046126,1.138004,-.016696,1.00427,.022635,1.144463,89e-6,.999987,-16e-6,2e-4,-136e-6,1.463614,.681786,504e-6,-344e-6,1.465345,.681785,.002015,-.001374,1.464172,.681783,.004535,-.003092,1.464846,.681784,.008062,-.005496,1.464783,.681784,.012598,-.008588,1.464883,.681781,.018141,-.012366,1.46474,.681777,.024692,-.016829,1.464665,.68177,.032258,-.02198,1.46472,.68176,.040829,-.027811,1.464625,.681742,.050415,-.034324,1.464571,.68172,.061013,-.041513,1.464346,.681688,.072628,-.049375,1.464131,.681644,.085264,-.057903,1.463847,.681588,.098918,-.067067,1.463369,.681509,.113568,-.07657,1.462549,.681389,.129265,-.086782,1.461703,.681239,.145997,-.097637,1.46084,.681047,.163751,-.109101,1.459737,.680806,.182505,-.120922,1.458231,.68048,.202241,-.133007,1.456393,.680042,.222987,-.145693,1.454258,.679503,.244638,-.158488,1.451543,.678792,.267132,-.171585,1.448115,.677907,.290365,-.184746,1.443992,.676796,.314178,-.198101,1.439271,.675498,.338289,-.21137,1.43283,.673922,.362543,-.224489,1.424163,.672151,.38847,-.236914,1.41516,.669601,.415105,-.248342,1.403811,.666255,.441925,-.258957,1.390149,.662166,.468668,-.268556,1.374104,.657229,.49572,-.277359,1.358102,.651347,.522574,-.285078,1.340754,.644598,.548981,-.291718,1.322033,.63682,.574946,-.297087,1.302148,.627812,.600744,-.301079,1.28213,.617485,.627565,-.303566,1.263339,.605047,.653598,-.30433,1.242712,.591167,.679239,-.30382,1.223212,.576025,.704043,-.302064,1.203763,.559649,.728796,-.299095,1.185434,.541271,.753581,-.294392,1.16763,.5218,.778577,-.288603,1.15193,.500628,.80255,-.281604,1.136072,.478434,.825803,-.273472,1.121673,.455384,.849768,-.264011,1.108491,.430811,.87325,-.253653,1.09655,.405524,.896725,-.242642,1.085905,.380038,.919158,-.230191,1.075091,.353482,.942236,-.217145,1.066848,.326605,.965031,-.203555,1.05931,.299842,.987048,-.188777,1.051749,.272859,1.008718,-.173613,1.044999,.24604,1.031097,-.157972,1.040066,.219826,1.052493,-.141589,1.035951,.194278,1.071773,-.124814,1.03252,.16983,1.089646,-.107321,1.029803,.146135,1.104932,-.089726,1.026612,.122127,1.117687,-.071433,1.022391,.097461,1.127188,-.053395,1.017113,.072556,1.13401,-.035151,1.010934,.047749,1.139746,-.017427,1.004633,.02353,1.146205,151e-6,1.00002,-106e-6,2e-4,-144e-6,1.517643,.718949,504e-6,-362e-6,1.516387,.718947,.002016,-.001449,1.516742,.718946,.004536,-.003261,1.517196,.718946,.008063,-.005796,1.516806,.718945,.012598,-.009057,1.516986,.718943,.01814,-.013039,1.516603,.718937,.024694,-.017747,1.516739,.718929,.03226,-.023178,1.516994,.718917,.040831,-.029325,1.516649,.718896,.050419,-.036192,1.516594,.71887,.061019,-.04377,1.516327,.718833,.072638,-.052056,1.516054,.718782,.085274,-.061039,1.515628,.718714,.098938,-.070676,1.515199,.718623,.113607,-.080679,1.514222,.718483,.129329,-.091485,1.513354,.718316,.146077,-.102931,1.512301,.718096,.163856,-.114986,1.510977,.717818,.18264,-.127305,1.509225,.717432,.202432,-.140147,1.507152,.716939,.223229,-.153468,1.50478,.716331,.244943,-.166875,1.501612,.715527,.267559,-.180658,1.497898,.714523,.290926,-.194405,1.493208,.713266,.314863,-.208302,1.487388,.711758,.339053,-.22202,1.479677,.709982,.363627,-.235683,1.47095,.707958,.388887,-.248723,1.459907,.705346,.415474,-.260563,1.446579,.701644,.442065,-.271352,1.429962,.697134,.469418,-.281541,1.414343,.691665,.496419,-.290429,1.395681,.685227,.523071,-.298032,1.375347,.677815,.549641,-.304679,1.354816,.669063,.575489,-.309902,1.332505,.659071,.601108,-.313771,1.309752,.647799,.627199,-.316225,1.288381,.634856,.653243,-.316679,1.265785,.619627,.67896,-.315816,1.244333,.603244,.704055,-.313776,1.223315,.585191,.728713,-.310417,1.203142,.565969,.753301,-.305786,1.184323,.545347,.77789,-.299262,1.16607,.522753,.802354,-.29183,1.149599,.499017,.826005,-.283281,1.133655,.474335,.84892,-.273512,1.118132,.449019,.872765,-.262525,1.105606,.422329,.89595,-.250769,1.093539,.395057,.918816,-.238257,1.082388,.367709,.941089,-.224381,1.072484,.33935,.964514,-.210289,1.064054,.311239,.987128,-.195488,1.056645,.283272,1.009064,-.179491,1.049549,.255163,1.030163,-.163172,1.042741,.227757,1.052502,-.146457,1.03827,.20097,1.072971,-.129054,1.035014,.175767,1.091223,-.111285,1.032231,.151118,1.106518,-.092617,1.028211,.126196,1.119235,-.074168,1.023686,.100828,1.129311,-.055212,1.018311,.07524,1.135983,-.036571,1.011485,.049558,1.141648,-.017954,1.004952,.024273,1.147938,125e-6,1.000009,-48e-6,199e-6,-151e-6,1.566887,.757466,504e-6,-382e-6,1.574111,.757466,.002016,-.001527,1.573735,.757466,.004535,-.003435,1.573737,.757466,.008062,-.006107,1.573782,.757464,.012599,-.009542,1.573796,.75746,.018142,-.013739,1.57371,.757455,.024694,-.018697,1.573562,.757446,.032259,-.024418,1.573667,.757429,.040834,-.030895,1.573555,.757407,.050422,-.038127,1.573383,.757376,.061025,-.046108,1.573086,.757332,.07265,-.054835,1.572833,.757274,.085296,-.064294,1.572395,.757195,.098962,-.074376,1.571729,.757087,.113649,-.084955,1.570571,.756925,.129389,-.096334,1.569582,.756729,.146167,-.108406,1.568444,.756481,.163973,-.121056,1.566905,.756158,.182798,-.13397,1.564939,.755715,.20265,-.147522,1.562666,.755167,.223502,-.161466,1.559877,.754465,.245269,-.175539,1.556008,.753552,.26801,-.189957,1.552013,.75242,.291474,-.204361,1.546509,.751008,.315527,-.218714,1.539575,.749266,.339954,-.233029,1.530968,.747232,.364649,-.247149,1.520994,.744906,.38952,-.260672,1.507748,.742123,.415717,-.272873,1.491777,.738187,.442862,-.284317,1.475658,.733189,.469939,-.294552,1.456572,.727165,.496916,-.303517,1.435237,.720043,.52348,-.311061,1.412192,.71164,.550092,-.317596,1.389033,.702174,.576384,-.322921,1.365086,.691225,.60228,-.326806,1.341317,.678841,.627676,-.329057,1.316518,.664815,.653458,-.329372,1.291877,.648548,.679227,-.328067,1.268126,.630676,.704476,-.325585,1.244424,.611585,.729232,-.321775,1.22301,.590803,.753405,-.316713,1.201297,.568653,.777274,-.309858,1.181071,.544763,.801882,-.301866,1.162826,.519747,.82603,-.292861,1.145704,.493531,.849359,-.282794,1.129629,.4669,.871837,-.271197,1.114155,.43923,.895896,-.258954,1.102334,.41057,.918951,-.245878,1.090163,.381314,.941148,-.231897,1.078738,.352268,.963464,-.216743,1.068862,.322688,.986628,-.201486,1.061077,.293523,1.009289,-.185521,1.053561,.264125,1.030659,-.168429,1.046627,.235706,1.052382,-.15121,1.040953,.208022,1.073476,-.133289,1.036534,.181245,1.092237,-.114768,1.03358,.155661,1.1082,-.095917,1.029997,.130223,1.121435,-.076492,1.025374,.104098,1.131382,-.057204,1.019485,.077776,1.137994,-.037747,1.012188,.05125,1.143441,-.018673,1.005309,.025245,1.149714,216e-6,1.000004,-12e-5,2e-4,-159e-6,1.633988,.797469,504e-6,-402e-6,1.636076,.797469,.002016,-.001607,1.635679,.797467,.004535,-.003617,1.63604,.797468,.008063,-.00643,1.636159,.797467,.012599,-.010046,1.636128,.797462,.018141,-.014464,1.63573,.797457,.024696,-.019685,1.635836,.797445,.032259,-.025705,1.635719,.797426,.040835,-.032523,1.63561,.797401,.050425,-.040135,1.63546,.797363,.061033,-.048536,1.635182,.797313,.072661,-.057718,1.634817,.797243,.085315,-.067666,1.634314,.79715,.098985,-.078179,1.63335,.797016,.113699,-.089383,1.632253,.796839,.129456,-.101364,1.631025,.796623,.146275,-.114081,1.629867,.796331,.164108,-.127318,1.628043,.795956,.182983,-.140901,1.625813,.795458,.202891,-.155174,1.623149,.794834,.223787,-.169654,1.619686,.794015,.245678,-.18454,1.615694,.793013,.268495,-.199543,1.610812,.791727,.292093,-.214639,1.604629,.790107,.316184,-.229499,1.596061,.788154,.340986,-.244407,1.587195,.785797,.365808,-.258907,1.575031,.783093,.390528,-.272746,1.559448,.77997,.41651,-.285845,1.543294,.775852,.443443,-.297404,1.523476,.770323,.470442,-.307757,1.501515,.763721,.497499,-.316846,1.477841,.755889,.524316,-.324561,1.452427,.746662,.551212,-.33106,1.427421,.736004,.577323,-.335956,1.400369,.72381,.602976,-.339501,1.373093,.710184,.628357,-.341577,1.345853,.695017,.653642,-.342031,1.31904,.677972,.67944,-.340342,1.29249,.658877,.704744,-.337356,1.267182,.638085,.729692,-.333042,1.24328,.615615,.75392,-.327504,1.219751,.592054,.777695,-.320537,1.197796,.566967,.801426,-.31188,1.176872,.540643,.825649,-.302211,1.15816,.512906,.849282,-.291665,1.141257,.484587,.872341,-.28005,1.125469,.455556,.89511,-.266978,1.110222,.425652,.918841,-.253326,1.097419,.395015,.941209,-.238899,1.086101,.364948,.963142,-.223523,1.075023,.334151,.985996,-.207346,1.065628,.303708,1.008718,-.190889,1.057256,.273008,1.030554,-.173517,1.04972,.243221,1.053085,-.155645,1.043837,.214426,1.074267,-.137472,1.039312,.187036,1.093591,-.118385,1.035457,.160512,1.10985,-.098883,1.03163,.134384,1.123516,-.07905,1.026762,.107424,1.133578,-.058977,1.02064,.080317,1.140289,-.039013,1.013096,.052944,1.14561,-.019228,1.005694,.025989,1.151704,105e-6,.999981,-19e-6,2e-4,-168e-6,1.704841,.839096,504e-6,-423e-6,1.704242,.839097,.002016,-.001691,1.703821,.839091,.004534,-.003805,1.703804,.839094,.008063,-.006765,1.704224,.839092,.012598,-.01057,1.704013,.839087,.018142,-.015219,1.703889,.839079,.024697,-.020712,1.704023,.839066,.032261,-.027046,1.703836,.839045,.040837,-.034218,1.703608,.839014,.050429,-.042224,1.703414,.838972,.061041,-.051061,1.703148,.838912,.072676,-.060717,1.702744,.838831,.08534,-.071175,1.702223,.838724,.099023,-.082182,1.700984,.838567,.113759,-.094007,1.699764,.838367,.129546,-.106621,1.698462,.838112,.146382,-.119956,1.696938,.837782,.16426,-.13376,1.694868,.837346,.183188,-.148108,1.692262,.83678,.203158,-.163075,1.689251,.836073,.224147,-.178255,1.685408,.835148,.246147,-.1939,1.680946,.833992,.269072,-.209553,1.675277,.832546,.292718,-.225226,1.667626,.830727,.317159,-.240836,1.658952,.82851,.341979,-.256103,1.647624,.825843,.366844,-.270887,1.633014,.82276,.392043,-.285324,1.617191,.819159,.417356,-.298817,1.597501,.814788,.444093,-.310711,1.575184,.808751,.471379,-.32141,1.55159,.801294,.498267,-.330421,1.524134,.792711,.525401,-.338331,1.496672,.78248,.551846,-.34443,1.467062,.770659,.578009,-.349047,1.436943,.757348,.604054,-.35249,1.407611,.742541,.629387,-.354158,1.377441,.726071,.654435,-.354422,1.347651,.707524,.679845,-.352663,1.318769,.687067,.704892,-.348994,1.2906,.664637,.729763,-.344105,1.263997,.640663,.754345,-.338129,1.239273,.615484,.778629,-.330905,1.215858,.58921,.801939,-.322113,1.192318,.56155,.825723,-.311673,1.17138,.532175,.849387,-.30041,1.152991,.502055,.872792,-.288328,1.136139,.471308,.895083,-.275087,1.119534,.440427,.918335,-.2607,1.105542,.40926,.941577,-.245717,1.09307,.377142,.963992,-.230079,1.081207,.345289,.98651,-.213523,1.071488,.313508,1.008806,-.196157,1.062011,.281962,1.030724,-.178467,1.05324,.251177,1.053782,-.160291,1.047057,.220986,1.075451,-.141308,1.041842,.192256,1.094947,-.121975,1.037704,.165023,1.111783,-.101744,1.0333,.138228,1.125525,-.081476,1.028234,.110679,1.135873,-.06077,1.021695,.082672,1.142478,-.040207,1.013838,.054506,1.147889,-.019908,1.006166,.026938,1.153852,204e-6,.999983,-123e-6,199e-6,-176e-6,1.771601,.882501,504e-6,-445e-6,1.779195,.882504,.002016,-.001779,1.779635,.882498,.004536,-.004003,1.779586,.882499,.008062,-.007115,1.778613,.882496,.012598,-.011116,1.778678,.882492,.018142,-.016005,1.778531,.882481,.024696,-.021782,1.778556,.882466,.032262,-.028444,1.778507,.882442,.040842,-.035987,1.778385,.882408,.050436,-.044404,1.778034,.882364,.061053,-.053695,1.777761,.882287,.072692,-.063842,1.777256,.88219,.085364,-.074821,1.776518,.882067,.099064,-.086368,1.77508,.881884,.113828,-.098805,1.773836,.881657,.129649,-.11209,1.77237,.881361,.146518,-.126067,1.770594,.880982,.16444,-.140493,1.768089,.880484,.183437,-.155646,1.765301,.879843,.203468,-.171266,1.761698,.879035,.224562,-.187231,1.757518,.877982,.246665,-.20354,1.752318,.876667,.269652,-.219916,1.745356,.875028,.293531,-.236255,1.737186,.872977,.318048,-.25241,1.726709,.870448,.342963,-.268192,1.713109,.8674,.368336,-.283587,1.698087,.863882,.393512,-.298186,1.678638,.859724,.418602,-.311882,1.655604,.854835,.44508,-.3245,1.63225,.848353,.472289,-.335295,1.605069,.840218,.499128,-.344256,1.573846,.830556,.525834,-.351716,1.54112,.819269,.553177,-.358241,1.511385,.806222,.57948,-.36264,1.477866,.791647,.605205,-.365513,1.444218,.775398,.630617,-.366822,1.410954,.757144,.65573,-.366785,1.37901,.737323,.680529,-.364904,1.34728,.715601,.7058,-.36099,1.316416,.691547,.73055,-.355397,1.286344,.666141,.75497,-.348664,1.258954,.638929,.779042,-.340774,1.232965,.611015,.802839,-.331767,1.209775,.581877,.825793,-.321054,1.185813,.551509,.849512,-.309016,1.16508,.519698,.87312,-.296369,1.147091,.487506,.895942,-.282704,1.129658,.45532,.917996,-.268007,1.113463,.422605,.941281,-.252329,1.10004,.389347,.964584,-.236203,1.087973,.35643,.986371,-.219209,1.075983,.323089,1.009522,-.201588,1.06694,.290806,1.031976,-.183296,1.057999,.258682,1.053461,-.164509,1.049542,.227722,1.076121,-.145165,1.043718,.197439,1.096597,-.125199,1.039607,.169578,1.113908,-.104921,1.035528,.142222,1.127939,-.083623,1.029807,.113802,1.138391,-.062589,1.023312,.085164,1.14511,-.041376,1.014806,.056186,1.150141,-.020433,1.006501,.027654,1.156069,97e-6,.999949,-46e-6,2e-4,-185e-6,1.858268,.927857,504e-6,-468e-6,1.861583,.927859,.002016,-.00187,1.860659,.927855,.004535,-.004208,1.860963,.927867,.008063,-.00748,1.860766,.927855,.012594,-.011683,1.859996,.927851,.018142,-.016828,1.860739,.927839,.024698,-.022901,1.860763,.927818,.032263,-.029903,1.860501,.927791,.040846,-.037834,1.860431,.927751,.05044,-.04668,1.859827,.92769,.061066,-.056446,1.859624,.92761,.072713,-.067109,1.859039,.927505,.085393,-.078613,1.858144,.927357,.09912,-.090747,1.856618,.927145,.11391,-.10385,1.855221,.926884,.129755,-.117777,1.85347,.926546,.146669,-.132441,1.851413,.926104,.164648,-.147565,1.848498,.92553,.183708,-.16347,1.845281,.924802,.203832,-.179763,1.841273,.923871,.225029,-.196564,1.836481,.922691,.247221,-.213537,1.830273,.921198,.270343,-.230662,1.822374,.91932,.294399,-.24774,1.812975,.917008,.31904,-.264448,1.800693,.914141,.344269,-.280831,1.785923,.910707,.369625,-.296478,1.767203,.906585,.394925,-.311287,1.744434,.901918,.420583,-.325578,1.720938,.89624,.4462,-.338384,1.693005,.889335,.472969,-.349187,1.660901,.880394,.50049,-.358687,1.628806,.869705,.527312,-.366042,1.593001,.857145,.554207,-.372045,1.557046,.842943,.58062,-.376134,1.520192,.826837,.60648,-.378636,1.482947,.808891,.631815,-.379414,1.445954,.789119,.657021,-.378972,1.410833,.767564,.681686,-.376728,1.376575,.744338,.706498,-.372844,1.342935,.718799,.731258,-.366649,1.311052,.691756,.755937,-.359354,1.280478,.662683,.779259,-.350487,1.250585,.632892,.803295,-.340941,1.225722,.60216,.82657,-.330174,1.201003,.57052,.849954,-.317854,1.178488,.537651,.873696,-.304426,1.158302,.503799,.896695,-.29012,1.139886,.469645,.919149,-.275106,1.122884,.435625,.942121,-.259282,1.107691,.401228,.964627,-.242123,1.093661,.367086,.986614,-.224575,1.08158,.332885,1.009623,-.206837,1.071375,.299209,1.033126,-.188092,1.062241,.266187,1.054954,-.168637,1.052912,.233733,1.07766,-.149166,1.047047,.203192,1.097983,-.128587,1.041607,.173918,1.115586,-.107339,1.03685,.145531,1.13017,-.086203,1.031427,.11689,1.141018,-.064171,1.024395,.087388,1.147681,-.04253,1.015719,.057733,1.15256,-.021011,1.006883,.028413,1.158406,158e-6,.999897,-106e-6,2e-4,-195e-6,1.950982,.975366,504e-6,-491e-6,1.950207,.975365,.002015,-.001966,1.950675,.975362,.004535,-.004423,1.951281,.97537,.008062,-.007863,1.951045,.975362,.012597,-.012285,1.951199,.975356,.018145,-.017692,1.951528,.97534,.024699,-.024074,1.951194,.975321,.032266,-.031434,1.950865,.975288,.040853,-.039771,1.951038,.975244,.050452,-.049067,1.950336,.975173,.061077,-.059324,1.949805,.975078,.072736,-.070526,1.949133,.974951,.085431,-.082528,1.947947,.974777,.099182,-.095345,1.946337,.97454,.113999,-.109118,1.944725,.974241,.129888,-.123741,1.942857,.973852,.146842,-.139071,1.940251,.973342,.16489,-.154986,1.937086,.972684,.184025,-.171661,1.933404,.971856,.204245,-.188672,1.92877,.970785,.225528,-.206252,1.923041,.969448,.247841,-.223972,1.915788,.967742,.271157,-.241827,1.907008,.965607,.295297,-.259562,1.895854,.963007,.320121,-.276909,1.881289,.959722,.345566,-.293883,1.864528,.955831,.371012,-.309816,1.842062,.951127,.396834,-.325157,1.818068,.945725,.422277,-.339357,1.788874,.939318,.447928,-.352387,1.758283,.93147,.474315,-.36368,1.723668,.9219,.50156,-.372963,1.686081,.909996,.528391,-.380159,1.645816,.896244,.554754,-.385545,1.603709,.880326,.581888,-.389778,1.565475,.862716,.607791,-.391839,1.524196,.843146,.633511,-.392331,1.483921,.821554,.658621,-.391193,1.445013,.798336,.68316,-.388424,1.406963,.773299,.707429,-.384104,1.370996,.746668,.732212,-.377945,1.335879,.717502,.756871,-.369856,1.302489,.686954,.781065,-.360707,1.271815,.655372,.804167,-.350091,1.242416,.622683,.827948,-.338941,1.217208,.589185,.850901,-.326427,1.192354,.555005,.873589,-.312199,1.169639,.519594,.897085,-.297374,1.150181,.484105,.920459,-.281932,1.132858,.448661,.942637,-.265625,1.115401,.413051,.965341,-.248332,1.101078,.377329,.98753,-.229983,1.087377,.342349,1.010739,-.211647,1.076582,.307824,1.033449,-.192725,1.0659,.273368,1.055618,-.172726,1.056958,.240238,1.079345,-.15264,1.04962,.208322,1.100058,-.131931,1.044084,.178242,1.118547,-.110351,1.039387,.149493,1.132748,-.088128,1.033049,.119673,1.143419,-.066069,1.025521,.089728,1.150316,-.043513,1.016378,.059253,1.155208,-.021593,1.007506,.02914,1.160871,111e-6,.999916,-35e-6,201e-6,-206e-6,2.061,1.025243,504e-6,-516e-6,2.049647,1.025237,.002015,-.002066,2.050169,1.025237,.004535,-.00465,2.051254,1.025255,.008063,-.008266,2.051302,1.025236,.0126,-.012915,2.051508,1.025226,.018144,-.018594,2.050981,1.025215,.0247,-.025304,2.050841,1.02519,.032267,-.033038,2.050537,1.025152,.040852,-.041795,2.05066,1.02509,.05046,-.05157,2.049921,1.025017,.061094,-.062347,2.04935,1.024908,.072762,-.074111,2.048517,1.02476,.085475,-.086661,2.047009,1.024555,.099249,-.10016,2.045261,1.024278,.114106,-.114628,2.043508,1.023941,.130032,-.130002,2.041321,1.023488,.14705,-.145985,2.038299,1.022905,.165164,-.162762,2.034658,1.022151,.18438,-.180172,2.030312,1.0212,.204704,-.198022,2.024944,1.019966,.226129,-.216359,2.018546,1.018424,.248582,-.234923,2.010153,1.016519,.272011,-.253474,1.999659,1.014072,.296259,-.27182,1.986076,1.011071,.321423,-.289959,1.970618,1.007389,.346897,-.307283,1.949667,1.002955,.37275,-.323817,1.925287,.997633,.398603,-.339241,1.896006,.991354,.424351,-.353633,1.863658,.983937,.449887,-.36666,1.82743,.975254,.475715,-.378213,1.789521,.964753,.502204,-.387133,1.745632,.951594,.530179,-.394976,1.705347,.936344,.556732,-.400134,1.658928,.918907,.583123,-.403439,1.613077,.899504,.609477,-.405285,1.567884,.878172,.634927,-.405055,1.523507,.854396,.660357,-.403494,1.481712,.829259,.684851,-.400104,1.439,.802359,.709654,-.395536,1.400956,.773534,.733472,-.388996,1.362156,.74323,.757502,-.380263,1.325113,.71109,.782249,-.370594,1.292913,.677166,.806017,-.359509,1.262088,.642527,.828687,-.347126,1.232059,.607589,.852372,-.334474,1.20716,.571938,.874266,-.320074,1.181978,.535518,.898168,-.304719,1.161156,.498375,.920456,-.288246,1.140667,.461179,.942832,-.271311,1.12278,.424533,.966458,-.254154,1.108743,.387784,.988907,-.235659,1.093872,.351689,1.011557,-.216322,1.081959,.315743,1.035099,-.197007,1.070885,.280402,1.056354,-.176878,1.059968,.246472,1.079854,-.156058,1.051815,.212818,1.101494,-.134772,1.045757,.182143,1.120587,-.113071,1.041169,.152867,1.135399,-.090411,1.034844,.122796,1.146612,-.067477,1.026974,.091888,1.153168,-.044849,1.017303,.060779,1.157912,-.021998,1.007735,.029919,1.163607,121e-6,.999959,3e-6,2e-4,-216e-6,2.163956,1.077737,504e-6,-543e-6,2.161128,1.077732,.002016,-.002173,2.162732,1.077729,.004535,-.004887,2.161402,1.077749,.008066,-.008692,2.163252,1.077732,.012599,-.013576,2.1613,1.077727,.018145,-.019546,2.161151,1.077702,.024702,-.026599,2.161223,1.077675,.032272,-.034729,2.160949,1.077632,.040862,-.043936,2.160967,1.077575,.05047,-.054203,2.160035,1.077473,.061113,-.065528,2.15949,1.077348,.072794,-.077882,2.158517,1.077178,.085528,-.09103,2.156605,1.076937,.099337,-.105251,2.154828,1.076631,.114228,-.120456,2.152812,1.076229,.130202,-.136573,2.150298,1.075713,.147284,-.153306,2.146752,1.075031,.16548,-.170931,2.142744,1.074173,.184793,-.189083,2.137475,1.073063,.205224,-.20784,2.13132,1.071683,.226743,-.226939,2.123154,1.069914,.249401,-.246344,2.114086,1.067718,.272955,-.26564,2.101599,1.064924,.297494,-.284846,2.086612,1.061512,.322731,-.303452,2.067356,1.057359,.348451,-.32133,2.043711,1.052294,.374451,-.338201,2.015033,1.046153,.400454,-.353816,1.981139,1.039003,.426434,-.368216,1.944128,1.030498,.452088,-.381251,1.903094,1.020454,.477901,-.392833,1.860402,1.008793,.504173,-.402408,1.814402,.994791,.53152,-.409545,1.766273,.977733,.558049,-.414351,1.714119,.958625,.584778,-.417437,1.664612,.937189,.610808,-.418519,1.613793,.913543,.636915,-.418094,1.565942,.888137,.662204,-.415742,1.518783,.860728,.686848,-.411746,1.473306,.831793,.710992,-.406153,1.430153,.800862,.735382,-.399519,1.389824,.768768,.759079,-.390927,1.350744,.734825,.782912,-.380111,1.313559,.69945,.806746,-.368383,1.280028,.663191,.830269,-.355606,1.249814,.625927,.853305,-.341988,1.221138,.588644,.876326,-.327545,1.195837,.550849,.898322,-.311779,1.171844,.512694,.921811,-.294944,1.150671,.474225,.944563,-.277333,1.132224,.435772,.967089,-.25934,1.115422,.398001,.989754,-.240836,1.100405,.360802,1.01247,-.221293,1.086533,.323566,1.036426,-.201191,1.075496,.287387,1.058709,-.18059,1.064233,.252184,1.081593,-.15981,1.055296,.218441,1.103146,-.137772,1.047978,.186223,1.122814,-.115347,1.042693,.156019,1.13779,-.092582,1.036049,.125579,1.149184,-.069152,1.027944,.093986,1.156062,-.045661,1.018039,.062122,1.160733,-.022719,1.008072,.03065,1.166487,231e-6,1.000063,-12e-5,201e-6,-228e-6,2.308308,1.133128,504e-6,-571e-6,2.283756,1.133123,.002016,-.002284,2.283756,1.133123,.004535,-.005138,2.28331,1.133144,.008048,-.009119,2.266192,1.133138,.0126,-.014274,2.284377,1.13311,.018147,-.020553,2.284204,1.133093,.024702,-.027964,2.283517,1.13306,.032272,-.03651,2.282997,1.133007,.040866,-.046188,2.282986,1.13293,.050481,-.056979,2.28226,1.132824,.061133,-.068881,2.281533,1.132678,.07283,-.08185,2.280504,1.132481,.085592,-.095657,2.278304,1.132202,.099431,-.110594,2.276269,1.131845,.11436,-.12659,2.27389,1.131383,.130388,-.143454,2.270761,1.130784,.147547,-.161029,2.266794,1.130003,.165836,-.179523,2.262332,1.129016,.185269,-.198527,2.256326,1.127738,.205822,-.218138,2.249031,1.126156,.227527,-.238141,2.239993,1.124132,.250325,-.258302,2.228878,1.121594,.27407,-.278329,2.214204,1.118449,.298793,-.29831,2.196654,1.114528,.324131,-.317462,2.173394,1.109783,.350101,-.335853,2.146395,1.103901,.376293,-.353064,2.112341,1.096954,.402547,-.36895,2.0737,1.088642,.428791,-.383462,2.031152,1.078946,.454976,-.396635,1.986661,1.067536,.480566,-.407873,1.937038,1.054403,.506154,-.417303,1.885155,1.038894,.532862,-.424194,1.830369,1.020535,.560354,-.429344,1.776976,.999295,.587114,-.431949,1.721214,.97599,.613345,-.432547,1.665739,.950239,.639335,-.431338,1.6122,.922467,.664996,-.428473,1.561035,.892593,.688947,-.423355,1.50824,.861325,.713403,-.417235,1.461776,.828289,.737649,-.409848,1.418888,.793863,.761275,-.400901,1.376807,.758074,.784778,-.390174,1.337204,.721974,.808762,-.377683,1.301527,.682718,.831993,-.364037,1.267144,.644001,.854696,-.349494,1.236023,.605478,.877933,-.334499,1.209284,.565588,.90018,-.318435,1.183967,.526138,.923039,-.301669,1.161513,.486524,.945895,-.283298,1.140838,.446747,.968069,-.264438,1.122475,.408041,.991179,-.245463,1.106968,.369477,1.012926,-.22568,1.091435,.331626,1.036995,-.205401,1.079561,.294288,1.060909,-.18431,1.068215,.257696,1.083531,-.162846,1.058133,.223343,1.105644,-.14104,1.050851,.190541,1.125691,-.117965,1.045001,.15931,1.141297,-.094377,1.038028,.128238,1.152672,-.070831,1.029694,.096282,1.159333,-.046853,1.019136,.06372,1.163819,-.022991,1.008518,.031234,1.169564,125e-6,1.000069,-24e-6,202e-6,-241e-6,2.458341,1.191742,504e-6,-6e-4,2.418738,1.19174,.002015,-.002401,2.418821,1.19173,.004535,-.005405,2.421986,1.191756,.008071,-.009618,2.424988,1.191753,.0126,-.015012,2.420242,1.191727,.018145,-.021612,2.419937,1.191703,.024704,-.02941,2.419746,1.191662,.032278,-.038398,2.419409,1.191604,.040874,-.048574,2.418995,1.191515,.050496,-.05992,2.41819,1.191389,.06116,-.072432,2.417487,1.191221,.072871,-.086009,2.415853,1.190984,.085664,-.100559,2.413669,1.190664,.099543,-.116283,2.411423,1.190256,.11452,-.133071,2.408711,1.189719,.130616,-.15067,2.4049,1.189019,.147856,-.169197,2.400512,1.188125,.166235,-.188545,2.394939,1.186972,.185804,-.20848,2.388232,1.185515,.206488,-.228883,2.37919,1.183673,.228383,-.249897,2.369208,1.181382,.251305,-.270851,2.355459,1.178478,.275349,-.29178,2.339142,1.174857,.300106,-.312257,2.316655,1.170411,.325849,-.332225,2.29154,1.164883,.351782,-.350862,2.257242,1.158196,.378248,-.368431,2.218671,1.150173,.404674,-.384428,2.17368,1.140703,.431385,-.39923,2.127083,1.129555,.457407,-.411875,2.073236,1.116436,.483275,-.423013,2.018223,1.101373,.509278,-.432624,1.962674,1.084257,.534751,-.439261,1.900814,1.064592,.561895,-.443801,1.839558,1.040881,.588677,-.445872,1.777763,1.015208,.6149,-.445896,1.71655,.987252,.641051,-.444148,1.657984,.957271,.666409,-.440299,1.600832,.924841,.691872,-.435318,1.548237,.891185,.716638,-.428631,1.497572,.855929,.739864,-.419872,1.447043,.819676,.763707,-.410456,1.403648,.781455,.786744,-.39939,1.360844,.742965,.809585,-.386381,1.320529,.70326,.834164,-.372622,1.286467,.662385,.856713,-.357177,1.252306,.621379,.87982,-.341458,1.22307,.580238,.902721,-.325024,1.197115,.539028,.92465,-.307543,1.172314,.498592,.947613,-.289557,1.151171,.45798,.96959,-.269799,1.129986,.417696,.992961,-.250111,1.113321,.377529,1.014582,-.229761,1.097149,.339096,1.038069,-.209375,1.083913,.301119,1.061661,-.188038,1.071241,.263506,1.085069,-.165874,1.060508,.227921,1.107744,-.143437,1.05293,.194062,1.127982,-.120574,1.046396,.162506,1.144541,-.096569,1.03988,.130788,1.155876,-.072039,1.030946,.098057,1.162719,-.047888,1.020124,.064956,1.167089,-.02374,1.008953,.031966,1.172775,277e-6,1.000067,-111e-6,2e-4,-251e-6,2.573709,1.253951,504e-6,-632e-6,2.572401,1.25394,.002015,-.002527,2.571267,1.253927,.004535,-.005687,2.572481,1.253948,.008062,-.010108,2.571851,1.253941,.012588,-.01578,2.568431,1.253934,.018139,-.022731,2.569765,1.253893,.024709,-.030948,2.572115,1.253853,.032283,-.040401,2.571456,1.253785,.040883,-.051105,2.571041,1.253683,.050514,-.063041,2.570153,1.253538,.061188,-.076195,2.569085,1.253336,.072926,-.090402,2.567184,1.253065,.085746,-.105745,2.564731,1.252697,.099661,-.122296,2.561995,1.252218,.114699,-.139912,2.559019,1.25159,.130882,-.158362,2.555017,1.250766,.148202,-.177856,2.549419,1.249744,.166706,-.198049,2.542908,1.248423,.186404,-.219014,2.535205,1.246741,.207272,-.240376,2.524893,1.244596,.229345,-.26223,2.512804,1.241917,.252494,-.284134,2.496923,1.23861,.27669,-.305828,2.476583,1.234474,.301798,-.327107,2.451548,1.229292,.327423,-.3473,2.41863,1.222997,.353848,-.366699,2.381002,1.215366,.380342,-.384421,2.334413,1.206199,.40739,-.400855,2.28566,1.195374,.433913,-.415241,2.228604,1.18229,.460837,-.428275,2.171532,1.167385,.486381,-.438573,2.105639,1.150401,.511959,-.447348,2.040835,1.13099,.537586,-.454152,1.974797,1.109302,.564035,-.458684,1.907895,1.084131,.59069,-.460058,1.839482,1.055803,.61725,-.459662,1.772332,1.025103,.643406,-.45726,1.707313,.992502,.668794,-.452666,1.644722,.957657,.69393,-.446641,1.586832,.92134,.718708,-.439121,1.531197,.883841,.743469,-.430429,1.480765,.844931,.76608,-.419622,1.430338,.804786,.789801,-.408368,1.386295,.764206,.812718,-.395392,1.343758,.722565,.835453,-.380699,1.304655,.680585,.858801,-.364834,1.269287,.637235,.881537,-.348092,1.237493,.594579,.904656,-.331087,1.208862,.552313,.926357,-.312966,1.182365,.51008,.949001,-.294684,1.159452,.468677,.971598,-.275361,1.138706,.426723,.994905,-.254947,1.120552,.385875,1.017981,-.234109,1.104215,.345751,1.04084,-.21304,1.089276,.306762,1.063893,-.191616,1.075845,.269066,1.086907,-.169272,1.063788,.232171,1.109937,-.146076,1.054977,.197826,1.130808,-.122544,1.048572,.165272,1.146831,-.098492,1.040742,.13328,1.158955,-.07371,1.031818,.100262,1.166161,-.04861,1.020747,.066165,1.170491,-.024209,1.00938,.032741,1.176111,1e-5,1.000042,56e-6,202e-6,-267e-6,2.786357,1.320169,504e-6,-665e-6,2.741889,1.320168,.002015,-.00266,2.74,1.320143,.004536,-.005987,2.744276,1.320161,.008063,-.010644,2.743432,1.320162,.0126,-.016628,2.741741,1.320148,.018144,-.023937,2.741314,1.320127,.024708,-.032577,2.741916,1.320061,.03229,-.042536,2.742132,1.319976,.040894,-.053799,2.741199,1.319861,.050533,-.066361,2.740258,1.319691,.061223,-.080202,2.739045,1.319458,.072985,-.095109,2.736519,1.319138,.085841,-.111296,2.733903,1.318715,.099808,-.128685,2.730944,1.318156,.114903,-.147202,2.727293,1.317424,.131164,-.166575,2.722169,1.316485,.148599,-.187019,2.716148,1.315274,.167245,-.20824,2.708701,1.313733,.187078,-.230151,2.698998,1.311792,.208153,-.252538,2.687341,1.309343,.230418,-.275295,2.672621,1.306247,.253802,-.298066,2.653619,1.302374,.278261,-.320673,2.629943,1.297573,.303527,-.342528,2.599228,1.291625,.329571,-.363531,2.562226,1.284374,.355939,-.382963,2.515491,1.275478,.382987,-.401306,2.464858,1.264866,.409917,-.417455,2.404877,1.252184,.437015,-.432067,2.341408,1.237415,.463474,-.444204,2.271837,1.220687,.489835,-.454631,2.200593,1.200973,.516054,-.463338,2.129733,1.179346,.541397,-.469425,2.055635,1.155039,.566798,-.473526,1.980812,1.127866,.593114,-.474632,1.904723,1.097304,.619945,-.473597,1.832456,1.063603,.646325,-.470656,1.761501,1.027971,.67232,-.465675,1.694248,.990692,.697163,-.458527,1.629227,.951582,.721472,-.449904,1.568132,.911197,.745855,-.44014,1.512084,.869745,.770089,-.429338,1.460694,.827648,.792546,-.416701,1.410739,.784728,.815161,-.403151,1.365438,.741884,.837994,-.388714,1.324811,.6978,.86122,-.372573,1.287723,.653341,.883737,-.355024,1.252491,.609455,.906784,-.337092,1.221844,.565275,.928493,-.31837,1.192881,.521558,.951495,-.299605,1.169131,.478149,.973586,-.280067,1.146316,.436325,.9964,-.259823,1.12786,.394409,1.01978,-.238313,1.110521,.353045,1.042775,-.216506,1.093915,.312803,1.066822,-.194695,1.080326,.2741,1.089869,-.17229,1.067722,.236657,1.113606,-.149264,1.058471,.201603,1.134229,-.124814,1.050701,.168398,1.150922,-.10007,1.043051,.135616,1.163224,-.075155,1.033742,.102144,1.169965,-.049933,1.021818,.067532,1.1742,-.024461,1.009916,.033215,1.179766,188e-6,1.000045,-14e-6,202e-6,-281e-6,2.964186,1.39088,505e-6,-702e-6,2.945157,1.390903,.002015,-.002802,2.931184,1.390863,.004535,-.006307,2.935673,1.3909,.008063,-.011213,2.934274,1.39089,.012598,-.017516,2.932216,1.390876,.018147,-.025221,2.933324,1.390832,.024711,-.034322,2.933945,1.390769,.032295,-.04481,2.933496,1.390674,.040904,-.056673,2.932487,1.390538,.050555,-.069906,2.931571,1.390342,.061259,-.084468,2.929914,1.390064,.073053,-.100152,2.927039,1.389695,.085948,-.117202,2.924241,1.389201,.099968,-.135531,2.92076,1.388548,.115135,-.154906,2.915998,1.387692,.131496,-.175352,2.910285,1.386611,.149049,-.196783,2.903174,1.38519,.167848,-.219066,2.894584,1.383407,.187879,-.241983,2.883171,1.381148,.209143,-.265398,2.869102,1.378261,.231689,-.289254,2.852238,1.37469,.255223,-.312776,2.828264,1.370166,.279952,-.33626,2.800175,1.364591,.305572,-.358865,2.764282,1.357758,.33165,-.380223,2.717845,1.349413,.358491,-.400252,2.665326,1.339084,.385445,-.418422,2.602293,1.326773,.412947,-.434993,2.536973,1.312141,.439681,-.448757,2.459463,1.295205,.467272,-.461427,2.38625,1.275573,.493568,-.471102,2.303225,1.2534,.519743,-.47893,2.221945,1.22889,.544882,-.484098,2.136425,1.20173,.57069,-.488125,2.057093,1.172022,.595905,-.489185,1.975334,1.139312,.622747,-.487535,1.895055,1.103038,.648695,-.483482,1.815995,1.064364,.675159,-.478096,1.744272,1.024098,.700714,-.470492,1.675257,.982186,.725641,-.461398,1.609135,.939137,.748552,-.449825,1.545091,.894791,.772808,-.438185,1.489394,.850373,.795928,-.425073,1.437026,.805287,.8189,-.411028,1.389654,.760003,.841633,-.396047,1.345873,.714914,.863213,-.379637,1.305185,.669271,.886662,-.362227,1.269147,.622935,.908504,-.343068,1.234714,.577757,.931425,-.323982,1.204997,.532922,.953835,-.304347,1.178871,.488154,.975813,-.284219,1.155019,.444885,.997662,-.263544,1.133941,.402224,1.021167,-.242611,1.1161,.36053,1.044038,-.220065,1.098348,.318968,1.068837,-.19758,1.084605,.279107,1.092548,-.174779,1.071217,.241111,1.116157,-.151596,1.060486,.204913,1.137486,-.127478,1.052751,.17141,1.154694,-.101915,1.044807,.137999,1.166867,-.076246,1.034824,.103807,1.173715,-.050661,1.022501,.068802,1.178236,-.025355,1.010324,.034155,1.183545,205e-6,1.000059,-11e-5,201e-6,-294e-6,3.16108,1.466721,505e-6,-74e-5,3.155526,1.466737,.002016,-.002957,3.152852,1.466688,.004537,-.006655,3.150654,1.466667,.008066,-.011828,3.153109,1.466694,.012604,-.018479,3.152143,1.466721,.01815,-.026598,3.151025,1.466636,.024714,-.036191,3.1503,1.466562,.032301,-.047249,3.149861,1.46645,.040924,-.059766,3.149548,1.466289,.050579,-.073703,3.147516,1.466055,.061306,-.089022,3.14568,1.465738,.073135,-.105563,3.142428,1.465301,.086075,-.123544,3.139113,1.464715,.100153,-.142853,3.135064,1.463956,.115411,-.163183,3.129509,1.462962,.131876,-.18476,3.122959,1.46167,.14957,-.207172,3.114153,1.460045,.168523,-.230578,3.103626,1.457945,.188784,-.254658,3.090818,1.455279,.210264,-.279114,3.073352,1.451998,.23303,-.30393,3.052592,1.44778,.256959,-.328517,3.025187,1.442568,.281901,-.352755,2.990341,1.436026,.307728,-.375894,2.94682,1.427979,.334197,-.397924,2.892845,1.418249,.360966,-.417914,2.827937,1.40637,.388478,-.436526,2.758006,1.392134,.415567,-.452366,2.674696,1.375244,.443518,-.466917,2.595136,1.35566,.470631,-.478417,2.504173,1.333123,.497419,-.487825,2.413227,1.308181,.523961,-.495064,2.321239,1.280227,.549708,-.499844,2.228911,1.249894,.575296,-.502844,2.138834,1.21713,.600168,-.503368,2.04903,1.181412,.625874,-.501622,1.962267,1.142648,.652164,-.496936,1.8769,1.101268,.678029,-.490319,1.796344,1.057782,.703248,-.481575,1.718925,1.012884,.72852,-.471822,1.648358,.966487,.752577,-.460134,1.581989,.91988,.776163,-.447164,1.520109,.873087,.800016,-.433601,1.465081,.825803,.822176,-.418388,1.412564,.778249,.844873,-.402704,1.366184,.730849,.865955,-.385633,1.321865,.684037,.888173,-.368255,1.283464,.637192,.910994,-.349332,1.249215,.590131,.93427,-.329612,1.218366,.543213,.956653,-.309228,1.189808,.497752,.978476,-.28831,1.163674,.452837,1.000755,-.267243,1.141389,.409481,1.023827,-.246015,1.122012,.367354,1.045572,-.223777,1.103303,.325171,1.070445,-.200837,1.08801,.284442,1.094268,-.177211,1.07365,.245138,1.118639,-.153531,1.063051,.208289,1.139786,-.129074,1.053921,.173607,1.157848,-.104051,1.045968,.140467,1.170697,-.077694,1.035782,.105594,1.177874,-.051393,1.023483,.069898,1.182242,-.025392,1.01062,.034532,1.187612,-32e-6,1.000062,-35e-6,202e-6,-313e-6,3.450327,1.548291,504e-6,-78e-5,3.396162,1.548289,.002015,-.00312,3.395621,1.54826,.004533,-.007019,3.394299,1.548217,.008066,-.012486,3.398803,1.548274,.0126,-.0195,3.396363,1.548245,.018151,-.028076,3.396805,1.548192,.024722,-.038209,3.396384,1.548109,.032306,-.049868,3.395158,1.547979,.040936,-.063077,3.394303,1.547785,.05061,-.077791,3.392979,1.547513,.06136,-.093869,3.38991,1.547134,.073227,-.11138,3.386669,1.546619,.086217,-.130371,3.382974,1.545938,.100364,-.150684,3.378046,1.545039,.115733,-.172116,3.371719,1.54388,.132309,-.194809,3.363764,1.54238,.150174,-.218431,3.353699,1.540462,.16934,-.242954,3.341397,1.538002,.189788,-.268175,3.324957,1.534894,.211581,-.293776,3.304776,1.530954,.234561,-.319619,3.278192,1.526033,.258776,-.345089,3.24491,1.519926,.284059,-.370176,3.203338,1.512296,.310312,-.394171,3.152477,1.502956,.336748,-.416137,3.083616,1.491463,.364029,-.436752,3.010481,1.477493,.391575,-.455102,2.925454,1.460933,.419409,-.471378,2.83438,1.441554,.446811,-.484714,2.733329,1.418861,.474489,-.496021,2.63363,1.393405,.501751,-.504991,2.530935,1.364633,.528488,-.511392,2.426653,1.333234,.554428,-.515395,2.323633,1.299138,.580434,-.517761,2.224964,1.262462,.605474,-.517598,2.127228,1.223784,.629888,-.514946,2.030545,1.182321,.655579,-.510177,1.93907,1.138515,.68194,-.503097,1.852355,1.091502,.707228,-.493537,1.768084,1.043464,.731894,-.482372,1.69084,.994242,.756741,-.470312,1.619277,.944749,.78016,-.456412,1.55343,.894816,.803384,-.441492,1.493357,.845202,.826347,-.425944,1.43783,.795954,.849145,-.409532,1.388578,.746915,.870617,-.391988,1.341527,.698025,.892943,-.374229,1.302188,.649579,.913828,-.355148,1.262877,.601833,.93683,-.335238,1.230136,.554521,.958687,-.313939,1.199596,.507208,.982008,-.292741,1.173619,.461357,1.003691,-.27094,1.149015,.416031,1.027223,-.249102,1.128689,.372457,1.050048,-.226899,1.109444,.330281,1.074105,-.204329,1.092943,.288987,1.098971,-.18056,1.078591,.249075,1.123324,-.155987,1.066885,.211519,1.145445,-.130929,1.057617,.176506,1.162856,-.105269,1.048453,.142345,1.17536,-.079267,1.037439,.107452,1.182514,-.052547,1.024393,.071252,1.186575,-.025744,1.011093,.035019,1.19205,318e-6,1.000013,-152e-6,204e-6,-334e-6,3.909175,1.636412,504e-6,-825e-6,3.678647,1.63641,.002015,-.003298,3.678315,1.636387,.004533,-.007417,3.674126,1.63631,.008062,-.01319,3.676771,1.636376,.012603,-.020613,3.678135,1.636369,.018153,-.029675,3.677315,1.636299,.024723,-.040378,3.676872,1.636196,.032318,-.052708,3.67575,1.636038,.040955,-.06666,3.674803,1.63581,.050645,-.082203,3.672735,1.635494,.061429,-.09915,3.669047,1.635048,.073333,-.117679,3.665401,1.634437,.086388,-.137725,3.661315,1.633634,.10062,-.159081,3.654992,1.632571,.116087,-.181721,3.647341,1.631202,.13282,-.205611,3.637877,1.629432,.150867,-.230542,3.626333,1.627161,.170234,-.256239,3.610671,1.624266,.190981,-.282751,3.591685,1.620589,.213013,-.30943,3.565864,1.615999,.236387,-.336427,3.534826,1.610216,.260943,-.362931,3.493984,1.603047,.286497,-.388644,3.442075,1.59392,.312769,-.412912,3.375973,1.582961,.339832,-.435635,3.299355,1.569343,.367214,-.456181,3.208994,1.553137,.394935,-.474325,3.10891,1.533791,.422935,-.490318,3.001767,1.511093,.451166,-.503827,2.891735,1.485145,.478695,-.514185,2.77343,1.455617,.506313,-.522502,2.657639,1.422946,.533427,-.528119,2.541132,1.387843,.559942,-.53143,2.42695,1.349542,.58515,-.531978,2.312437,1.309303,.6105,-.531054,2.205966,1.26628,.63538,-.528058,2.101993,1.221709,.659852,-.522751,2.00295,1.175062,.685151,-.515026,1.908647,1.125078,.71092,-.50502,1.819389,1.074296,.736066,-.493268,1.735806,1.02242,.760503,-.480032,1.658607,.97023,.785091,-.465986,1.589424,.917077,.807523,-.449721,1.522533,.864888,.830974,-.433461,1.465416,.813006,.852659,-.415808,1.409076,.761689,.874841,-.397855,1.360758,.711258,.896322,-.379041,1.316829,.661721,.918134,-.360048,1.278574,.612263,.939356,-.340108,1.2422,.564369,.961025,-.318877,1.210305,.516506,.984371,-.29713,1.183689,.469342,1.006905,-.274661,1.157466,.42308,1.029941,-.252234,1.135066,.378315,1.052751,-.229268,1.114518,.335169,1.077981,-.206662,1.09776,.293336,1.102542,-.183331,1.082051,.252984,1.126539,-.158797,1.068935,.21499,1.149023,-.133014,1.058996,.178903,1.16755,-.106641,1.050245,.144559,1.179994,-.079952,1.038648,.108667,1.187104,-.053316,1.025284,.072209,1.191406,-.026826,1.011453,.035833,1.196748,226e-6,1.000034,-61e-6,2e-4,-346e-6,3.996419,1.732034,504e-6,-873e-6,4.000138,1.732038,.002016,-.003492,4.002078,1.732012,.004538,-.007859,4.005626,1.731962,.008064,-.013963,3.9985,1.731999,.01259,-.021794,3.995024,1.732004,.018154,-.031406,3.999233,1.731901,.024727,-.042733,3.998497,1.731774,.032327,-.055781,3.997064,1.731599,.040974,-.070543,3.995856,1.731325,.050685,-.086984,3.993839,1.730945,.061506,-.104897,3.989519,1.730417,.073458,-.124506,3.985313,1.729697,.086573,-.145706,3.979984,1.728747,.100909,-.168211,3.972562,1.727491,.116509,-.192198,3.963836,1.725854,.133404,-.21728,3.951919,1.723749,.151659,-.243556,3.937734,1.721093,.171288,-.270611,3.919021,1.71764,.192301,-.298389,3.895171,1.713272,.214683,-.326338,3.864171,1.707825,.238392,-.354394,3.824682,1.700956,.263151,-.381636,3.771168,1.692392,.289155,-.408266,3.709961,1.681769,.315832,-.43307,3.630302,1.668539,.342942,-.455741,3.534719,1.652513,.370892,-.476655,3.431531,1.633428,.398985,-.494692,3.314933,1.610694,.427206,-.510313,3.189741,1.58424,.455266,-.52276,3.058325,1.554195,.483472,-.532872,2.927213,1.520805,.511192,-.540229,2.794112,1.484026,.538706,-.545105,2.663786,1.443796,.565422,-.547251,2.534841,1.401429,.59127,-.547115,2.408437,1.356231,.616787,-.545113,2.291284,1.308887,.64138,-.540853,2.177478,1.260447,.665344,-.534561,2.069265,1.210634,.690147,-.527115,1.969776,1.158569,.714578,-.516171,1.870847,1.104593,.740349,-.504048,1.782674,1.049578,.764563,-.489683,1.698614,.994458,.78871,-.474541,1.624447,.938612,.812154,-.458099,1.554453,.883694,.834566,-.440345,1.490045,.83022,.857486,-.422491,1.432889,.776499,.879224,-.403588,1.380669,.724257,.899971,-.383819,1.333124,.673311,.922111,-.36425,1.292648,.622999,.942842,-.343873,1.253933,.573304,.964398,-.323206,1.221027,.52509,.98686,-.301711,1.191806,.47758,1.00976,-.278695,1.165162,.430624,1.033347,-.255591,1.141715,.384482,1.055937,-.232039,1.119739,.340532,1.081178,-.208664,1.102117,.297311,1.105696,-.184935,1.085062,.256227,1.129575,-.160673,1.070918,.217709,1.152135,-.135414,1.060642,.181471,1.171221,-.108462,1.051041,.14638,1.184412,-.081008,1.039694,.11012,1.19182,-.05371,1.025903,.073052,1.196195,-.026625,1.011816,.036129,1.201677,-175e-6,.999945,98e-6,196e-6,-36e-5,4.100786,1.83629,504e-6,-925e-6,4.370184,1.836295,.002018,-.003706,4.385247,1.836243,.004534,-.008324,4.370146,1.83621,.008064,-.014805,4.372335,1.836256,.012597,-.023116,4.359918,1.836259,.018158,-.033299,4.371503,1.836123,.024732,-.045301,4.370533,1.835988,.032344,-.059143,4.369649,1.835768,.040999,-.074779,4.367861,1.835454,.050739,-.092178,4.364322,1.834974,.061594,-.111161,4.359221,1.834355,.073604,-.131958,4.35462,1.833499,.086796,-.154393,4.347915,1.832355,.101246,-.178201,4.339152,1.83088,.11699,-.203531,4.328327,1.828936,.134086,-.230043,4.31424,1.826442,.152589,-.257718,4.296795,1.82323,.172514,-.286176,4.273985,1.819124,.193853,-.315295,4.244136,1.813909,.216582,-.344507,4.205152,1.80741,.240668,-.373646,4.154781,1.799084,.265904,-.401897,4.091563,1.788905,.292226,-.429136,4.013199,1.776206,.319045,-.454057,3.912886,1.7605,.346721,-.477219,3.800927,1.741586,.374849,-.497883,3.675652,1.718818,.403078,-.515504,3.536892,1.692138,.431597,-.530621,3.391351,1.661434,.460246,-.542852,3.242817,1.626989,.488899,-.552238,3.093685,1.588582,.517215,-.559045,2.944163,1.5463,.54448,-.562351,2.794189,1.501299,.571542,-.563394,2.650239,1.453758,.598167,-.56259,2.513757,1.403321,.624104,-.559636,2.384203,1.352431,.648789,-.554148,2.259149,1.298758,.672715,-.546779,2.14025,1.244943,.696258,-.537896,2.030401,1.189971,.720048,-.527401,1.928311,1.134526,.744078,-.514142,1.830175,1.076504,.768895,-.499352,1.740731,1.018032,.792551,-.482982,1.658911,.96025,.817007,-.466406,1.586579,.903029,.839035,-.447616,1.516969,.846484,.862742,-.429261,1.458675,.79142,.884307,-.409479,1.402989,.737125,.905641,-.389303,1.352817,.683912,.926185,-.368344,1.306684,.63269,.947229,-.347366,1.267395,.581739,.969502,-.32672,1.233192,.532305,.990758,-.304973,1.201017,.484166,1.012749,-.282816,1.173018,.437385,1.035533,-.259084,1.147184,.390755,1.059915,-.235239,1.125388,.345399,1.084348,-.211044,1.105859,.301356,1.109544,-.186698,1.088888,.259708,1.13377,-.1619,1.073848,.220324,1.157553,-.136604,1.06319,.183857,1.176461,-.110428,1.05311,.148521,1.190137,-.082898,1.041484,.112124,1.197215,-.054554,1.026844,.07416,1.201654,-.026744,1.012264,.036527,1.207085,399e-6,1.000034,-201e-6,191e-6,-373e-6,4.194318,1.950551,504e-6,-983e-6,4.80435,1.950552,.002015,-.003931,4.80282,1.950518,.004536,-.008847,4.805254,1.950472,.008064,-.015725,4.804152,1.950517,.012693,-.02474,4.826828,1.949914,.018159,-.035365,4.803103,1.950349,.02474,-.048122,4.80322,1.950183,.032361,-.062822,4.801522,1.949917,.041034,-.07943,4.799593,1.949538,.050815,-.097841,4.797179,1.948972,.061702,-.118026,4.789557,1.948246,.073766,-.140112,4.783293,1.947204,.087066,-.163819,4.775698,1.945855,.101637,-.189122,4.764612,1.944052,.117558,-.215884,4.751486,1.94171,.134884,-.243968,4.734791,1.938727,.153637,-.27317,4.712078,1.934891,.17389,-.303146,4.683575,1.929976,.195643,-.333704,4.646766,1.92374,.218767,-.36417,4.596814,1.915888,.243337,-.39453,4.535509,1.90597,.26886,-.423512,4.452006,1.893623,.295173,-.450609,4.345682,1.878286,.322784,-.476488,4.231632,1.859391,.350616,-.49942,4.093553,1.836912,.379127,-.519862,3.944127,1.809625,.40786,-.537373,3.782223,1.778529,.436717,-.551802,3.615563,1.742684,.465345,-.562951,3.440672,1.702289,.494158,-.571334,3.26807,1.658666,.522896,-.577227,3.100668,1.611027,.551379,-.580514,2.937615,1.559742,.578992,-.58061,2.778703,1.507257,.605095,-.577729,2.621626,1.451941,.630653,-.573,2.476506,1.395218,.656175,-.566944,2.341592,1.337862,.681036,-.558988,2.216478,1.279275,.704713,-.549211,2.096972,1.220526,.726894,-.53719,1.983311,1.161709,.749865,-.524167,1.8811,1.102095,.773553,-.508991,1.785637,1.042039,.797102,-.491658,1.697234,.981588,.821187,-.474093,1.62025,.921265,.843848,-.45498,1.547071,.862757,.866662,-.435421,1.482008,.8047,.888696,-.41499,1.424116,.749432,.910945,-.394472,1.372658,.694767,.9323,-.373239,1.325157,.641106,.95285,-.351347,1.282217,.589689,.974718,-.329809,1.244897,.539322,.996445,-.307902,1.212306,.490083,1.01758,-.285392,1.181402,.442702,1.040342,-.262782,1.155996,.395911,1.064399,-.238995,1.131708,.350206,1.089464,-.214297,1.111215,.305175,1.115565,-.189293,1.093094,.262686,1.14064,-.163843,1.077994,.223078,1.163824,-.137789,1.066014,.185651,1.182577,-.111087,1.055615,.150045,1.195775,-.083945,1.04294,.113457,1.203175,-.056145,1.028015,.075453,1.207282,-.027685,1.012552,.037217,1.213019,362e-6,.999938,-293e-6,187e-6,-388e-6,4.316009,2.0765,504e-6,-.001048,5.317799,2.076499,.002014,-.004182,5.306557,2.076523,.004539,-.009425,5.317505,2.076453,.008063,-.016737,5.312143,2.07641,.012614,-.026171,5.316434,2.076389,.018158,-.037641,5.307836,2.076265,.024767,-.051266,5.315297,2.076044,.032372,-.066859,5.307433,2.075743,.041066,-.084538,5.304809,2.07527,.050871,-.104062,5.299277,2.074622,.061821,-.125613,5.293419,2.073708,.07397,-.149085,5.286629,2.072457,.087375,-.174214,5.275937,2.070804,.102105,-.201136,5.263267,2.068647,.118223,-.229505,5.246309,2.065846,.135814,-.259217,5.225496,2.062189,.154887,-.28999,5.19658,2.057566,.17551,-.321618,5.160716,2.051593,.197636,-.353632,5.112202,2.043949,.221168,-.385303,5.046981,2.034445,.246099,-.416511,4.965386,2.022368,.27207,-.446377,4.860735,2.00716,.29909,-.474279,4.73514,1.988598,.326702,-.499809,4.584962,1.965865,.355017,-.52279,4.420447,1.938705,.383856,-.542755,4.241942,1.90637,.413059,-.559903,4.053302,1.869455,.441882,-.573174,3.852753,1.827946,.471516,-.584151,3.660377,1.781652,.500872,-.591843,3.466027,1.730885,.529677,-.596253,3.272812,1.676821,.557683,-.597604,3.084286,1.620064,.585652,-.596591,2.906111,1.560909,.612819,-.593138,2.738258,1.500318,.639848,-.588245,2.584172,1.438127,.664758,-.58014,2.430697,1.375746,.688754,-.570189,2.290701,1.312727,.712848,-.55942,2.162679,1.250063,.735111,-.54657,2.042186,1.18784,.757521,-.532944,1.933435,1.125513,.780056,-.517981,1.833524,1.063827,.802513,-.500724,1.739053,1.002154,.825462,-.481625,1.652381,.939811,.848973,-.462327,1.57756,.878279,.871521,-.441928,1.509291,.8192,.892325,-.420297,1.443799,.761607,.914935,-.399072,1.389647,.705351,.936429,-.377232,1.339903,.650213,.957614,-.355091,1.295467,.597773,.979578,-.332767,1.256692,.545914,1.00086,-.310147,1.221666,.495661,1.02255,-.287395,1.190775,.448026,1.045005,-.264582,1.162641,.40049,1.068703,-.241464,1.138358,.354088,1.093098,-.217504,1.115973,.309812,1.11923,-.19214,1.096284,.266297,1.144608,-.165975,1.080042,.225831,1.168599,-.139174,1.067749,.187761,1.18797,-.11191,1.056635,.151322,1.20124,-.083978,1.043566,.114337,1.208895,-.056089,1.028366,.076083,1.213344,-.028369,1.013074,.037735,1.21922,-534e-6,.999968,76e-6,182e-6,-404e-6,4.433519,2.216201,504e-6,-.001117,5.911693,2.216198,.002017,-.004469,5.919142,2.21619,.004536,-.010051,5.913172,2.21613,.008065,-.017867,5.911791,2.216145,.012467,-.027603,5.785357,2.216447,.018156,-.040159,5.901121,2.215958,.024758,-.05467,5.908781,2.215654,.032395,-.071352,5.906098,2.215283,.041108,-.090201,5.902558,2.214715,.050955,-.111004,5.895707,2.213905,.061968,-.134002,5.888736,2.212807,.074206,-.159038,5.880633,2.211303,.087742,-.185801,5.867001,2.209297,.102652,-.214368,5.851446,2.206657,.119006,-.244573,5.830722,2.203232,.136883,-.276067,5.802688,2.198778,.156335,-.30866,5.767185,2.193091,.177396,-.34194,5.719726,2.185858,.20007,-.375591,5.658792,2.176584,.224067,-.408564,5.573508,2.164759,.24942,-.440668,5.465696,2.149777,.275879,-.471138,5.332207,2.131225,.303307,-.499204,5.173339,2.108794,.331189,-.524547,4.985102,2.080585,.359932,-.547256,4.785788,2.047792,.389063,-.566479,4.569344,2.009518,.418725,-.583031,4.349557,1.965601,.448181,-.595809,4.121278,1.916911,.477703,-.605102,3.892291,1.86353,.507999,-.612462,3.676557,1.806286,.536889,-.615451,3.456241,1.745841,.565778,-.616029,3.249464,1.681137,.593863,-.613644,3.050273,1.615238,.62077,-.608268,2.859599,1.548003,.647171,-.601116,2.683287,1.480447,.673458,-.59284,2.524036,1.412084,.698064,-.581973,2.371046,1.34513,.721011,-.568963,2.229104,1.27844,.744293,-.555642,2.103213,1.212448,.766314,-.540934,1.98537,1.146287,.788164,-.525271,1.878842,1.0826,.809019,-.507986,1.779821,1.019978,.830947,-.489717,1.69163,.956931,.853732,-.469345,1.607513,.894207,.874904,-.447618,1.531176,.833436,.897289,-.426124,1.467302,.773611,.919226,-.404025,1.408321,.716016,.94086,-.381454,1.356209,.659515,.962764,-.358901,1.310082,.604629,.984322,-.335983,1.268485,.552335,1.005343,-.312533,1.230662,.501591,1.028153,-.289452,1.199168,.452032,1.049283,-.265754,1.168575,.404347,1.073687,-.242571,1.143533,.357445,1.097546,-.218681,1.119859,.312534,1.12334,-.194465,1.099634,.269437,1.148166,-.168797,1.081968,.228586,1.172518,-.141552,1.068789,.189866,1.19293,-.113325,1.057548,.152772,1.206816,-.0848,1.044145,.11539,1.215045,-.056019,1.028938,.076493,1.220048,-.027733,1.013338,.037767,1.225852,5e-5,.999927,-16e-5,178e-6,-422e-6,4.587902,2.372253,504e-6,-.001195,6.624675,2.372248,.002016,-.004782,6.626884,2.372187,.004531,-.010746,6.607379,2.372318,.008081,-.019161,6.640102,2.372084,.012637,-.029945,6.653708,2.372128,.018167,-.042999,6.623837,2.371902,.024769,-.058516,6.624484,2.371595,.032421,-.07637,6.620877,2.37112,.041164,-.096474,6.615235,2.370428,.051057,-.118786,6.607844,2.36944,.062136,-.14339,6.599216,2.368075,.07449,-.170034,6.588018,2.366218,.088179,-.198717,6.572526,2.363747,.103307,-.229147,6.551868,2.360517,.119964,-.261253,6.526089,2.356304,.138173,-.294703,6.489593,2.350797,.158072,-.329261,6.443573,2.343783,.179592,-.364298,6.379764,2.334673,.202709,-.399375,6.295845,2.323125,.227335,-.433616,6.184929,2.308547,.25323,-.466794,6.045905,2.28998,.2801,-.497509,5.871803,2.266964,.308146,-.525956,5.672422,2.239074,.336544,-.551101,5.443256,2.204809,.365223,-.572471,5.188034,2.164827,.395484,-.592088,4.943783,2.119489,.424416,-.606026,4.6664,2.067262,.455641,-.619671,4.418961,2.009937,.485298,-.627583,4.152737,1.9489,.514774,-.632072,3.893344,1.882692,.544172,-.634033,3.645332,1.814073,.573283,-.633239,3.414651,1.742717,.602155,-.630008,3.195712,1.669703,.63052,-.62455,2.994536,1.596021,.657121,-.615749,2.799373,1.522572,.682071,-.604738,2.616102,1.448978,.707605,-.593301,2.456112,1.37625,.731492,-.579628,2.303517,1.305297,.754139,-.564473,2.16534,1.235548,.776505,-.548787,2.041646,1.167051,.796833,-.531415,1.923334,1.100534,.817565,-.513778,1.818176,1.035144,.837981,-.495167,1.72383,.971583,.858513,-.47569,1.638448,.908841,.879892,-.454099,1.55942,.846701,.902258,-.432038,1.491471,.785332,.924114,-.409316,1.428878,.726409,.94423,-.385618,1.370785,.668588,.967001,-.362604,1.323529,.612943,.988579,-.339117,1.279679,.559038,1.01021,-.315355,1.240104,.506867,1.032084,-.291408,1.205261,.456934,1.054671,-.267387,1.175197,.407792,1.078314,-.243346,1.148153,.360992,1.102443,-.219205,1.123799,.315577,1.128524,-.194996,1.102624,.271742,1.153989,-.169897,1.085134,.230702,1.17942,-.14396,1.071699,.192146,1.200098,-.116173,1.060179,.155164,1.214837,-.086655,1.04629,.117071,1.222749,-.056956,1.03004,.07745,1.227273,-.027883,1.01365,.038092,1.233293,831e-6,1.000043,-462e-6,173e-6,-442e-6,4.741539,2.547922,504e-6,-.001284,7.491127,2.547919,.002014,-.005132,7.484889,2.547844,.004523,-.011521,7.439875,2.547587,.008059,-.020524,7.483694,2.547725,.012586,-.032029,7.470912,2.547685,.018081,-.045948,7.422534,2.547686,.024783,-.062844,7.487581,2.547107,.032451,-.082011,7.483603,2.546522,.041233,-.10354,7.475124,2.545684,.051181,-.127537,7.467521,2.544438,.062347,-.153921,7.456266,2.542744,.074829,-.182427,7.440422,2.540459,.088703,-.213134,7.420694,2.53738,.10408,-.24575,7.394875,2.533347,.12105,-.279941,7.358515,2.528069,.139697,-.315591,7.313001,2.521237,.160036,-.35198,7.246342,2.512378,.182147,-.388993,7.163688,2.500993,.205799,-.42557,7.048339,2.48645,.231091,-.461093,6.902586,2.468174,.257405,-.494668,6.712721,2.444774,.284956,-.525889,6.491261,2.415538,.31318,-.553693,6.232833,2.38061,.342327,-.578724,5.953834,2.338525,.371689,-.599706,5.649698,2.290256,.401919,-.617615,5.3479,2.235157,.432204,-.631632,5.036417,2.173932,.463151,-.643082,4.735976,2.107298,.493388,-.64997,4.432044,2.036121,.524128,-.654188,4.145472,1.961595,.55393,-.654671,3.866877,1.883602,.583856,-.653051,3.607848,1.804521,.611762,-.646994,3.356237,1.724047,.639117,-.63886,3.122531,1.643016,.666279,-.629093,2.913178,1.563932,.692936,-.617862,2.722675,1.484614,.716498,-.603279,2.536926,1.406734,.742273,-.589878,2.381054,1.331469,.764031,-.572744,2.228312,1.256796,.786601,-.555933,2.095451,1.18529,.807776,-.537992,1.972866,1.11594,.8284,-.519596,1.863394,1.048371,.847412,-.499847,1.76063,.982934,.86685,-.47992,1.670998,.919972,.88634,-.459434,1.587962,.8581,.906933,-.437767,1.515505,.796714,.92749,-.414068,1.448243,.736162,.950217,-.39091,1.390505,.677613,.971545,-.366964,1.337865,.620477,.992901,-.342603,1.291104,.565807,1.01546,-.318596,1.251138,.513086,1.037859,-.294242,1.214291,.461573,1.060535,-.269601,1.182517,.411838,1.086885,-.245608,1.1553,.363221,1.111237,-.220589,1.129715,.317174,1.138718,-.196008,1.108103,.273213,1.164223,-.170408,1.08964,.231968,1.187256,-.144205,1.074145,.192987,1.207851,-.116945,1.061615,.156118,1.222217,-.088852,1.047599,.118674,1.230315,-.059381,1.030869,.078993,1.235052,-.029145,1.014126,.038924,1.241359,479e-6,1.000114,-211e-6,169e-6,-465e-6,4.953966,2.747437,504e-6,-.001384,8.54453,2.74743,.002015,-.005537,8.545147,2.747339,.004542,-.012477,8.557734,2.747125,.008064,-.022143,8.530193,2.747341,.012543,-.034411,8.465151,2.747411,.018178,-.049792,8.543328,2.746874,.02481,-.067784,8.547247,2.746396,.032489,-.088416,8.537436,2.74573,.041313,-.11158,8.526655,2.744596,.051332,-.137462,8.517438,2.743082,.062603,-.16586,8.502803,2.74095,.07524,-.196548,8.481507,2.738057,.089341,-.22944,8.454287,2.734174,.105021,-.264395,8.420289,2.729086,.122399,-.30102,8.373503,2.72242,.141526,-.338997,8.309059,2.713686,.162451,-.377589,8.221539,2.702492,.185098,-.416349,8.100116,2.687893,.209406,-.454284,7.941704,2.669386,.235098,-.49045,7.733318,2.64559,.2621,-.524592,7.48612,2.615709,.290103,-.555558,7.193498,2.579231,.319135,-.583516,6.874796,2.534957,.348286,-.606714,6.516118,2.483017,.37884,-.62785,6.163912,2.424214,.409608,-.644715,5.801404,2.357563,.440553,-.657657,5.435955,2.285835,.470599,-.665621,5.063481,2.20794,.503172,-.673767,4.743532,2.12644,.533884,-.676009,4.413409,2.040694,.563808,-.674536,4.092169,1.953979,.591849,-.668913,3.787057,1.865897,.621474,-.663159,3.520578,1.777762,.6505,-.655018,3.275065,1.689902,.678011,-.643949,3.043141,1.603528,.70349,-.63003,2.827104,1.519484,.72825,-.61491,2.63262,1.436677,.752165,-.598649,2.45557,1.355753,.775894,-.581771,2.295932,1.278884,.79765,-.563193,2.152291,1.202767,.818505,-.54375,2.022099,1.130338,.838596,-.524017,1.903562,1.060263,.858396,-.504064,1.797204,.993077,.877088,-.483418,1.701208,.928606,.896606,-.462786,1.617736,.866039,.914342,-.440943,1.539227,.804293,.93355,-.419129,1.470383,.745206,.955237,-.3961,1.4091,.685832,.9767,-.371743,1.35493,.627953,.997681,-.346882,1.305249,.572127,1.020784,-.322391,1.262603,.517941,1.04384,-.297564,1.225115,.466188,1.067224,-.272639,1.190817,.415499,1.092358,-.247664,1.161265,.366782,1.117573,-.22226,1.133935,.319377,1.14573,-.196933,1.11175,.275293,1.170822,-.170577,1.091981,.233306,1.194559,-.143878,1.07581,.19395,1.214819,-.116347,1.062438,.156724,1.22983,-.088233,1.048092,.118984,1.238185,-.059408,1.031325,.079385,1.243527,-.030703,1.014698,.039893,1.249724,-.00152,.999819,76e-5,164e-6,-489e-6,5.157359,2.9763,505e-6,-.001502,9.891415,2.976286,.002016,-.006,9.85773,2.976197,.004543,-.013519,9.870651,2.975832,.008064,-.023985,9.85578,2.97617,.012611,-.037471,9.850209,2.975941,.018162,-.053866,9.827134,2.974968,.02482,-.07339,9.849955,2.97501,.032545,-.095758,9.842021,2.974073,.041418,-.120834,9.829989,2.9727,.051511,-.148861,9.817421,2.970736,.06292,-.179456,9.797347,2.968033,.075744,-.212674,9.771533,2.964371,.090131,-.248193,9.735924,2.959437,.106187,-.285748,9.687707,2.952881,.124035,-.325017,9.622684,2.944273,.143733,-.365463,9.531452,2.933093,.165262,-.406157,9.401732,2.918484,.188622,-.446833,9.232451,2.899529,.213693,-.486209,9.013432,2.875137,.239987,-.522925,8.725671,2.844166,.267796,-.557452,8.400028,2.805649,.296547,-.588266,8.023041,2.75872,.325838,-.614837,7.606773,2.702676,.355479,-.63676,7.16068,2.638483,.386984,-.65723,6.736765,2.566849,.418853,-.673592,6.313742,2.488091,.450302,-.684966,5.884479,2.402458,.481149,-.691591,5.455771,2.311816,.512177,-.695337,5.055698,2.21733,.543437,-.69637,4.681506,2.121285,.574309,-.694186,4.334716,2.02416,.604787,-.689158,4.008524,1.927738,.633483,-.68058,3.703505,1.830456,.660766,-.669088,3.418386,1.734934,.688471,-.656673,3.168101,1.642316,.715729,-.64282,2.941735,1.550744,.740435,-.626155,2.73057,1.463345,.764114,-.608299,2.537561,1.378151,.787028,-.589519,2.364323,1.29763,.807985,-.569257,2.20797,1.21783,.830663,-.550055,2.076646,1.142746,.850416,-.528812,1.948085,1.070757,.869609,-.507478,1.834684,1.001282,.888324,-.486131,1.734879,.934987,.907482,-.46491,1.645974,.871203,.924829,-.442742,1.56355,.80926,.942958,-.420777,1.491264,.750037,.961999,-.398842,1.428069,.691715,.981043,-.375967,1.369668,.635669,1.002371,-.351469,1.318588,.578689,1.025343,-.326601,1.273628,.524424,1.048511,-.301395,1.234572,.471403,1.072242,-.275835,1.198354,.41995,1.096758,-.2502,1.166392,.370733,1.122781,-.224474,1.138991,.322864,1.150871,-.198592,1.114313,.277723,1.177319,-.171805,1.093534,.23495,1.201765,-.144291,1.077462,.195376,1.222629,-.115949,1.063288,.157315,1.237334,-.08714,1.048366,.118843,1.246153,-.058094,1.031224,.079207,1.25257,-.029194,1.014695,.039376,1.25906,-418e-6,.999881,307e-6,159e-6,-515e-6,5.393984,3.241865,505e-6,-.001636,11.548038,3.241848,.002016,-.006534,11.50664,3.241718,.004537,-.014706,11.51346,3.241196,.008068,-.026134,11.510533,3.241693,.012573,-.040676,11.428978,3.24103,.018212,-.058794,11.510745,3.240924,.024847,-.079926,11.497339,3.240201,.032603,-.10416,11.484607,3.238994,.041543,-.131552,11.470801,3.237182,.051738,-.162012,11.453219,3.234635,.063313,-.19526,11.427244,3.231153,.076381,-.231205,11.388534,3.226361,.091096,-.269678,11.340406,3.219943,.1076,-.31017,11.270127,3.211448,.126017,-.352435,11.178583,3.200168,.146411,-.395551,11.046559,3.185328,.168663,-.438627,10.858624,3.165972,.19273,-.48066,10.606379,3.140735,.218497,-.520987,10.288093,3.108388,.245752,-.558483,9.90748,3.067586,.273993,-.59209,9.453246,3.016931,.303495,-.622416,8.966138,2.956444,.333717,-.648303,8.443776,2.885116,.363928,-.66864,7.894122,2.805963,.39624,-.687748,7.385728,2.718338,.427161,-.699903,6.838511,2.622346,.460175,-.71121,6.356371,2.522476,.492593,-.717734,5.878312,2.417984,.524449,-.719956,5.423285,2.310941,.55601,-.719127,4.997909,2.201885,.587032,-.715077,4.600426,2.09333,.61703,-.707574,4.235885,1.986585,.644684,-.695781,3.881712,1.881279,.674483,-.685313,3.59096,1.777918,.70029,-.669619,3.303138,1.678004,.727892,-.654728,3.057771,1.581162,.751694,-.635727,2.826642,1.487769,.776271,-.617343,2.622178,1.399628,.799502,-.597683,2.441265,1.313195,.821768,-.57709,2.276954,1.232316,.84196,-.555165,2.125744,1.153914,.861582,-.532983,1.991236,1.079598,.88146,-.510933,1.874027,1.008883,.899952,-.488321,1.766812,.940802,.918954,-.466405,1.673436,.875653,.93613,-.443623,1.586986,.81313,.954799,-.421532,1.513558,.752241,.972435,-.398897,1.445787,.694711,.990147,-.376302,1.384382,.63877,1.009189,-.353623,1.331934,.583826,1.029687,-.330635,1.284478,.530476,1.052604,-.305698,1.243632,.477187,1.076524,-.279917,1.204997,.425349,1.101701,-.253951,1.17175,.375165,1.127264,-.227541,1.142519,.326869,1.156397,-.201265,1.116817,.280912,1.18302,-.173943,1.095289,.237447,1.208448,-.14586,1.078296,.196694,1.230417,-.116901,1.064416,.158409,1.248617,-.087507,1.050504,.119483,1.25731,-.057353,1.032796,.079092,1.263076,-.027785,1.015128,.038883,1.26987,.001331,.999935,-557e-6,154e-6,-549e-6,5.705205,3.554136,506e-6,-.001797,13.703335,3.554133,.002014,-.007156,13.614074,3.553937,.004544,-.016145,13.657344,3.553096,.00807,-.028652,13.627997,3.553894,.012584,-.044617,13.606235,3.554,.01818,-.064288,13.581339,3.549637,.024887,-.087627,13.608851,3.552006,.03269,-.114134,13.599099,3.550341,.041705,-.144154,13.579829,3.547982,.052035,-.1774,13.552845,3.544641,.06381,-.213813,13.515619,3.539941,.077171,-.252978,13.46046,3.533696,.092329,-.294852,13.393559,3.524977,.10939,-.338688,13.292376,3.513655,.128455,-.384018,13.147332,3.498484,.149661,-.42996,12.945774,3.478323,.172694,-.475024,12.658979,3.451862,.19765,-.518614,12.289564,3.417602,.224156,-.559298,11.828307,3.372913,.252008,-.59611,11.285162,3.317454,.281165,-.629292,10.684922,3.251171,.311434,-.658379,10.052939,3.172222,.342741,-.683455,9.405296,3.082825,.373543,-.701674,8.716078,2.983976,.407008,-.719664,8.108425,2.876244,.438623,-.729882,7.461252,2.763279,.471872,-.738696,6.880182,2.64559,.5047,-.743136,6.324308,2.52468,.537118,-.743676,5.808302,2.402723,.569412,-.741181,5.332306,2.281437,.598202,-.732348,4.857402,2.161401,.62964,-.724832,4.465554,2.043872,.659239,-.713435,4.093661,1.930129,.686547,-.698539,3.752593,1.817654,.715529,-.684471,3.457593,1.712567,.739456,-.664983,3.17122,1.610687,.764892,-.646322,2.929674,1.512031,.789301,-.626393,2.710719,1.419033,.809881,-.603498,2.506139,1.330115,.833385,-.582934,2.336089,1.245859,.854254,-.560419,2.17847,1.165042,.873964,-.537294,2.040087,1.086633,.893433,-.514264,1.911969,1.015028,.911756,-.490657,1.79984,.944938,.930894,-.467601,1.703188,.878743,.948078,-.444043,1.612092,.815356,.966162,-.421155,1.534444,.753883,.984166,-.398238,1.462397,.695534,1.002184,-.375278,1.400793,.638806,1.019669,-.352159,1.344172,.584549,1.039571,-.329651,1.295227,.53166,1.059989,-.306804,1.251281,.480529,1.081116,-.283345,1.211504,.430071,1.105742,-.258568,1.1764,.380277,1.13308,-.232146,1.144519,.331076,1.161888,-.205244,1.118059,.28404,1.192408,-.177932,1.097561,.239958,1.221043,-.149532,1.082021,.198751,1.244141,-.120046,1.067634,.160114,1.259465,-.089542,1.051626,.121101,1.268124,-.058593,1.033296,.079898,1.27433,-.028011,1.015382,.039038,1.28159,.00233,1.000087,-.001259,149e-6,-587e-6,6.059834,3.927143,507e-6,-.001992,16.5604,3.927149,.002014,-.00791,16.406326,3.926821,.004549,-.017856,16.545532,3.927027,.008064,-.031632,16.375853,3.925487,.01245,-.048749,15.928564,3.928272,.01803,-.070371,16.072989,3.917862,.024964,-.096897,16.458925,3.924489,.032807,-.126073,16.377851,3.921896,.041917,-.159205,16.351561,3.91886,.052416,-.195762,16.307037,3.914339,.064464,-.235784,16.255514,3.907954,.078225,-.278812,16.176226,3.899254,.0939,-.324457,16.06653,3.887455,.111657,-.372174,15.913818,3.871777,.131478,-.42053,15.669197,3.850776,.153574,-.46933,15.355453,3.822348,.177505,-.516029,14.908978,3.785168,.203383,-.560585,14.352687,3.736602,.230569,-.600607,13.666022,3.675046,.259188,-.636296,12.900244,3.599811,.289272,-.668312,12.111226,3.51055,.32049,-.695986,11.292102,3.408535,.353031,-.719848,10.493485,3.295667,.385228,-.737073,9.661955,3.171998,.419219,-.752419,8.909942,3.042428,.452096,-.761179,8.155107,2.907108,.484909,-.766166,7.450609,2.769858,.518306,-.768596,6.811866,2.631935,.550067,-.765683,6.205275,2.49287,.582562,-.761197,5.663215,2.358645,.61445,-.753834,5.165358,2.227377,.644563,-.74286,4.712554,2.097547,.673658,-.729294,4.306101,1.97492,.702857,-.714839,3.943352,1.857613,.72935,-.696774,3.609432,1.743601,.754958,-.677394,3.308389,1.636607,.779575,-.657018,3.043803,1.533841,.800491,-.633342,2.793592,1.437092,.82503,-.612471,2.590307,1.344272,.847535,-.589882,2.406477,1.256436,.865979,-.56485,2.231999,1.173938,.886254,-.541357,2.083556,1.094722,.905566,-.517353,1.950928,1.021107,.924607,-.49332,1.835979,.948941,.943365,-.469366,1.731417,.88106,.960405,-.444745,1.635838,.816479,.977893,-.420493,1.552981,.754604,.996573,-.39715,1.481595,.694917,1.014,-.373483,1.41407,.638445,1.031807,-.349985,1.356031,.584035,1.051877,-.327062,1.305041,.53001,1.071701,-.304134,1.258836,.479439,1.093109,-.280962,1.217297,.429763,1.116681,-.258121,1.182063,.38105,1.143886,-.235365,1.150039,.333395,1.175163,-.211621,1.125074,.287477,1.203675,-.184061,1.102339,.243301,1.230477,-.154815,1.083927,.201826,1.253134,-.124513,1.067989,.162271,1.270092,-.093383,1.052032,.122855,1.279576,-.06177,1.033685,.081639,1.286472,-.030317,1.015583,.040411,1.294476,964e-6,1.000206,-454e-6,144e-6,-63e-5,6.467978,4.381146,504e-6,-.002208,20.193617,4.381151,.002017,-.008834,20.206446,4.380687,.004536,-.019864,20.183254,4.38055,.008174,-.035759,20.564249,4.381247,.012608,-.055034,20.111612,4.38239,.018198,-.079119,20.106096,4.379815,.025057,-.108067,20.215635,4.376874,.032962,-.14063,20.153549,4.374143,.042199,-.17735,20.084061,4.369558,.052928,-.218094,20.026609,4.363287,.065327,-.262407,19.940054,4.354386,.079568,-.309833,19.806814,4.342127,.095961,-.360074,19.641878,4.325533,.114516,-.411747,19.370914,4.30295,.135349,-.463726,18.9839,4.271991,.158293,-.514211,18.433926,4.230856,.183348,-.562511,17.733471,4.17625,.209959,-.60631,16.864214,4.105895,.238736,-.646958,15.935207,4.020104,.268543,-.681574,14.890014,3.916094,.299996,-.712458,13.846786,3.798239,.33193,-.73713,12.758296,3.664191,.365222,-.758156,11.73294,3.521867,.399061,-.774364,10.741743,3.369831,.43348,-.786412,9.812527,3.212079,.467002,-.792373,8.91513,3.053715,.500754,-.79541,8.094276,2.894526,.534023,-.794617,7.342067,2.735959,.566988,-.790689,6.664186,2.58116,.59996,-.784433,6.052983,2.432318,.630599,-.773378,5.486277,2.28763,.660807,-.760334,4.982516,2.150183,.690103,-.74543,4.531104,2.017266,.717315,-.727511,4.120734,1.891699,.743819,-.708376,3.759599,1.77268,.770147,-.688632,3.441912,1.66062,.79351,-.665931,3.1526,1.553166,.816535,-.643045,2.898883,1.45208,.839163,-.619917,2.674488,1.355544,.859066,-.594923,2.469262,1.267232,.879489,-.570343,2.292209,1.181702,.898525,-.544975,2.131086,1.102089,.918359,-.520585,1.994526,1.024744,.937502,-.496044,1.873079,.951712,.955573,-.47101,1.761232,.883374,.972957,-.445712,1.661604,.818008,.991248,-.421201,1.577169,.754446,1.008997,-.396444,1.499653,.694518,1.028127,-.372362,1.43203,.637259,1.04571,-.347895,1.36987,.581515,1.065977,-.324409,1.317341,.527713,1.087469,-.301181,1.270447,.476281,1.109943,-.277866,1.228398,.426403,1.13444,-.254849,1.190986,.377822,1.160986,-.231754,1.157681,.33074,1.188458,-.207973,1.128665,.286014,1.214405,-.183424,1.103711,.2436,1.239504,-.157972,1.084253,.203686,1.262961,-.130607,1.068258,.165214,1.28034,-.099652,1.051919,.126067,1.292129,-.067363,1.034016,.084791,1.299876,-.035026,1.015775,.042786,1.308328,-.002944,.999963,.001385,138e-6,-681e-6,6.943771,4.946556,503e-6,-.002486,25.346689,4.946532,.002016,-.009973,25.49432,4.946311,.004539,-.02244,25.484949,4.945823,.008069,-.039836,25.420902,4.945311,.012628,-.062172,25.394403,4.945041,.018294,-.089609,25.440279,4.943295,.025079,-.121584,25.399988,4.939368,.033142,-.158595,25.356537,4.9362,.042596,-.199971,25.295067,4.929842,.053628,-.245624,25.196465,4.920586,.066496,-.29524,25.055311,4.9077,.081434,-.348006,24.84617,4.889647,.09864,-.403167,24.527803,4.86468,.118231,-.459106,24.051735,4.830574,.140139,-.513907,23.352467,4.78353,.164198,-.565953,22.418245,4.72053,.190502,-.614858,21.324049,4.638075,.21853,-.658304,20.038671,4.535464,.248094,-.696133,18.639786,4.411646,.279435,-.729388,17.234526,4.268872,.312002,-.757534,15.830426,4.109603,.346173,-.781866,14.495901,3.938782,.379435,-.797579,13.136444,3.756138,.414945,-.812334,11.946491,3.571258,.449991,-.821119,10.811908,3.384217,.484636,-.825066,9.763482,3.198076,.518675,-.824728,8.796811,3.015808,.552559,-.82171,7.932528,2.836886,.587272,-.817478,7.185156,2.664995,.61696,-.804441,6.445302,2.502223,.648054,-.792063,5.818812,2.345851,.678575,-.777793,5.264731,2.19715,.707287,-.760476,4.766033,2.056042,.735851,-.742541,4.335871,1.922805,.760594,-.720503,3.928021,1.798585,.784534,-.697719,3.579153,1.680605,.811029,-.677036,3.285307,1.568942,.831809,-.651479,3.001423,1.465496,.854364,-.627376,2.760672,1.367849,.872639,-.600496,2.540697,1.275644,.894296,-.576297,2.355273,1.188638,.913123,-.550377,2.188563,1.105652,.932025,-.52464,2.040739,1.028614,.949876,-.498402,1.910315,.954421,.968933,-.47322,1.79575,.884061,.985366,-.447086,1.690336,.817765,1.00494,-.422394,1.599626,.753295,1.022217,-.396726,1.519055,.69338,1.04149,-.371854,1.448745,.635747,1.05992,-.346769,1.384292,.579508,1.080408,-.322343,1.328798,.525045,1.101632,-.297979,1.279898,.473773,1.124812,-.274059,1.234005,.422949,1.148503,-.249954,1.195373,.374609,1.174554,-.225988,1.160362,.32735,1.202931,-.201932,1.131307,.283494,1.229335,-.176886,1.105885,.241092,1.254254,-.151225,1.085802,.201514,1.275743,-.124282,1.068524,.162866,1.292929,-.097122,1.051493,.124991,1.305805,-.068939,1.03389,.085521,1.314991,-.040082,1.015927,.045247,1.324033,-.009923,.999893,.004738,131e-6,-745e-6,7.562414,5.671075,473e-6,-.002681,27.216688,5.670949,.002021,-.011462,32.962402,5.670177,.00454,-.025728,33.183949,5.670197,.008087,-.045746,33.185688,5.667313,.012673,-.071427,33.170441,5.668396,.018358,-.102673,33.145138,5.665252,.025299,-.13978,33.303326,5.653404,.033469,-.181718,33.107243,5.652829,.043139,-.228698,32.859524,5.645676,.054622,-.280648,32.694893,5.631547,.068115,-.336524,32.422569,5.611561,.083957,-.395671,32.035511,5.583449,.102259,-.456164,31.415047,5.543651,.123021,-.515765,30.47044,5.488278,.146127,-.572309,29.186451,5.413118,.171749,-.62571,27.653852,5.312369,.199549,-.673853,25.902435,5.185774,.229188,-.715905,23.978609,5.030582,.260421,-.751533,21.999035,4.853484,.293421,-.782309,20.087366,4.656137,.327077,-.806332,18.186535,4.443975,.361892,-.825818,16.418409,4.223844,.397146,-.840019,14.774344,3.998959,.434169,-.852434,13.321097,3.775443,.469288,-.856632,11.929448,3.552818,.504319,-.85713,10.675201,3.338825,.540067,-.855903,9.5919,3.130547,.575404,-.851565,8.607655,2.93293,.606782,-.839818,7.69056,2.743876,.63866,-.827508,6.900781,2.565115,.670577,-.814154,6.216821,2.395215,.696718,-.793162,5.551886,2.238233,.72599,-.775291,5.015406,2.090264,.75414,-.755758,4.546843,1.950834,.775992,-.729824,4.094254,1.820582,.80299,-.708909,3.732984,1.699191,.828291,-.686483,3.413194,1.583805,.847406,-.659162,3.103861,1.478093,.864951,-.631051,2.832976,1.378496,.887154,-.60659,2.616645,1.282127,.906337,-.580124,2.413988,1.194643,.927184,-.554835,2.24438,1.110354,.94381,-.527583,2.081964,1.031996,.96363,-.502243,1.948979,.956718,.979691,-.475006,1.822701,.886957,.99769,-.448815,1.715714,.819006,1.01646,-.423044,1.621868,.754892,1.035485,-.397637,1.539537,.693707,1.053165,-.371775,1.462285,.634867,1.072394,-.346372,1.396193,.578574,1.093397,-.321291,1.338344,.524341,1.115194,-.296102,1.287594,.472059,1.137943,-.271023,1.240495,.421674,1.164163,-.246367,1.201224,.371963,1.191457,-.221414,1.164472,.32504,1.220253,-.196228,1.134325,.280343,1.245456,-.169991,1.108214,.238098,1.270647,-.143314,1.087277,.197886,1.292124,-.115881,1.069397,.15956,1.309091,-.087816,1.051426,.120547,1.32113,-.059301,1.032904,.080834,1.332484,-.030912,1.015767,.040933,1.342834,-.002172,.999591,.001185,125e-6,-83e-5,8.392562,6.634228,443e-6,-.002936,29.687805,6.634032,.002016,-.013374,45.025234,6.633008,.00454,-.030089,45.020294,6.633056,.008092,-.053499,45.066029,6.626466,.01271,-.08361,44.810101,6.63033,.018485,-.12026,45.216747,6.614516,.025134,-.161031,44.674168,6.600349,.033897,-.212161,44.819195,6.610186,.043978,-.266661,44.450245,6.593605,.056094,-.326582,44.134544,6.570142,.070528,-.390342,43.591648,6.536712,.087498,-.456162,42.70816,6.488329,.107138,-.521609,41.365093,6.420198,.129461,-.584225,39.525822,6.323702,.154245,-.641931,37.186111,6.193606,.181228,-.692829,34.47847,6.026897,.210711,-.73844,31.680904,5.825769,.242181,-.777397,28.828054,5.595428,.275337,-.80998,26.042755,5.342321,.309698,-.83599,23.376804,5.073076,.345702,-.858077,20.965754,4.794572,.382135,-.874122,18.710079,4.516676,.419871,-.887133,16.713011,4.241767,.455609,-.891199,14.819674,3.972124,.492617,-.894082,13.187921,3.717271,.528186,-.89127,11.708584,3.471719,.563462,-.885719,10.422834,3.23776,.596013,-.874241,9.237741,3.01906,.629455,-.862814,8.248549,2.813572,.66111,-.848126,7.358398,2.621046,.690314,-.829798,6.569392,2.441627,.720589,-.812314,5.905934,2.274629,.745631,-.788704,5.2768,2.119423,.771488,-.766133,4.752773,1.97438,.798704,-.744726,4.306095,1.839482,.820172,-.718062,3.889792,1.713244,.844368,-.693972,3.545456,1.594809,.863128,-.665748,3.212762,1.487512,.880094,-.637003,2.926572,1.386724,.904252,-.613728,2.70426,1.288131,.920506,-.585217,2.483164,1.199845,.940919,-.559603,2.300348,1.114958,.957044,-.531597,2.130516,1.034754,.972648,-.503583,1.979313,.960912,.994318,-.478813,1.859664,.889786,1.008754,-.450943,1.742705,.820833,1.028667,-.425516,1.64522,.756332,1.046145,-.398977,1.557184,.693921,1.067212,-.373657,1.480814,.635955,1.084111,-.346657,1.408762,.578832,1.106749,-.321392,1.350468,.523561,1.12844,-.295773,1.294865,.471146,1.151073,-.270028,1.246118,.420298,1.178601,-.244816,1.204226,.370575,1.206845,-.219027,1.166896,.323716,1.235963,-.192622,1.135756,.278058,1.26303,-.165331,1.10924,.235743,1.288937,-.137489,1.088379,.19539,1.310681,-.108685,1.068987,.156439,1.334352,-.07971,1.054273,.117096,1.344847,-.049947,1.034598,.076554,1.354943,-.020272,1.016079,.035585,1.365515,.00917,.999969,-.004771,117e-6,-935e-6,9.424866,7.979243,41e-5,-.003275,33.013195,7.979422,.002009,-.016024,64.370331,7.977156,.004541,-.036176,64.655952,7.976128,.008109,-.064384,64.864494,7.964988,.012694,-.099984,64.487198,7.971348,.018554,-.143991,64.63797,7.923116,.025303,-.19204,61.930538,7.953975,.035297,-.259442,66.274422,7.921861,.045226,-.31837,63.33469,7.909609,.05837,-.388821,62.686401,7.864696,.074083,-.461667,61.332054,7.801843,.092537,-.533744,59.125607,7.708949,.113781,-.601905,55.997845,7.575799,.137786,-.664409,52.177567,7.393524,.16477,-.721193,48.019485,7.161756,.193894,-.768842,43.460278,6.882018,.225586,-.810332,39.08659,6.564607,.259311,-.845096,34.896049,6.221983,.294517,-.872849,30.952213,5.865831,.331163,-.895159,27.375792,5.507064,.368964,-.91286,24.21331,5.149763,.407255,-.925338,21.364958,4.806172,.444704,-.930956,18.791691,4.472272,.482041,-.932576,16.52116,4.160864,.519572,-.931547,14.589918,3.865206,.556236,-.926554,12.887797,3.590445,.590431,-.915839,11.352402,3.332747,.622723,-.901266,10.00266,3.093264,.657029,-.888747,8.90521,2.873842,.686164,-.868666,7.876704,2.66674,.719168,-.853152,7.051816,2.479017,.742294,-.826169,6.226034,2.306498,.77032,-.804936,5.590831,2.141328,.792337,-.777772,4.984083,1.994663,.81905,-.755478,4.507655,1.85395,.837684,-.726072,4.049884,1.72559,.861324,-.701424,3.678201,1.606303,.880741,-.673615,3.337163,1.495452,.903335,-.648506,3.05572,1.391162,.920311,-.61964,2.792068,1.294734,.935769,-.590245,2.554566,1.204518,.956592,-.564944,2.366468,1.11863,.972424,-.536842,2.187863,1.038323,.986269,-.50802,2.02348,.963803,1.006122,-.482411,1.895137,.890986,1.022504,-.45511,1.775886,.820936,1.037905,-.42745,1.665951,.758556,1.059281,-.402198,1.577363,.696126,1.076613,-.375156,1.493391,.636676,1.097828,-.349577,1.421129,.579947,1.116671,-.322955,1.355205,.52514,1.140514,-.297406,1.299979,.47146,1.166473,-.271786,1.249847,.420473,1.192591,-.245461,1.204625,.371118,1.223349,-.219412,1.166686,.3226,1.254833,-.19266,1.134121,.277572,1.285808,-.165167,1.108617,.234417,1.322015,-.137236,1.093841,.19464,1.342172,-.106871,1.074616,.155001,1.357238,-.075759,1.05355,.114648,1.367725,-.044279,1.033851,.073254,1.379461,-.013001,1.015713,.031895,1.391625,.018075,1.000203,-.009397,109e-6,-.001093,10.98682,9.992467,378e-6,-.003779,37.989063,9.992861,.002028,-.020252,101.850441,9.988345,.004557,-.045429,101.10675,9.983879,.008115,-.080453,100.646606,9.953411,.012864,-.125836,101.366592,9.943727,.018734,-.17935,100.786118,9.908408,.026314,-.24368,99.779343,9.821631,.0355,-.313552,98.608231,9.78245,.047562,-.394644,97.689568,9.845875,.062065,-.476697,95.177795,9.755218,.079552,-.557933,91.095581,9.615121,.099905,-.632818,85.110382,9.408299,.123231,-.699926,77.948921,9.120996,.14998,-.760671,70.491119,8.764173,.17955,-.812251,62.821407,8.341752,.211839,-.855909,55.51289,7.876337,.246434,-.892023,48.744549,7.386268,.282317,-.9192,42.462059,6.886009,.31958,-.940333,36.901031,6.400318,.360135,-.962176,32.353752,5.937503,.397805,-.969755,27.996445,5.489783,.437077,-.976494,24.359192,5.072855,.474388,-.975265,21.1243,4.684682,.513695,-.975335,18.476677,4.326597,.551542,-.970264,16.167391,3.999049,.587525,-.960365,14.143442,3.696317,.621251,-.945944,12.374341,3.414176,.654738,-.930709,10.877112,3.160455,.685794,-.911702,9.580887,2.921461,.717135,-.892948,8.481939,2.707478,.740798,-.865086,7.435941,2.510382,.77092,-.845137,6.650625,2.329648,.792303,-.815956,5.879976,2.163206,.818363,-.792225,5.274404,2.008042,.837362,-.762396,4.70096,1.867576,.862266,-.738465,4.254798,1.735819,.880069,-.70889,3.828697,1.61469,.896021,-.678588,3.451655,1.503477,.920156,-.654832,3.168722,1.3958,.934948,-.62474,2.879533,1.299955,.949686,-.595203,2.628258,1.208597,.970989,-.570041,2.433689,1.12231,.985606,-.541116,2.241461,1.042168,1.000819,-.512835,2.075567,.966543,1.012209,-.483024,1.919932,.895758,1.03532,-.459125,1.807884,.825668,1.052077,-.432333,1.695689,.760812,1.070459,-.406131,1.595491,.699897,1.088704,-.379721,1.508512,.640575,1.103817,-.352104,1.428159,.583765,1.131711,-.328122,1.366565,.52824,1.156448,-.302568,1.306843,.473988,1.181821,-.276487,1.252861,.422189,1.211347,-.25054,1.205265,.372005,1.243636,-.224264,1.165943,.324184,1.283038,-.198289,1.137772,.278419,1.316722,-.170179,1.115057,.235425,1.342715,-.140095,1.092994,.195084,1.363288,-.108794,1.071875,.155439,1.380656,-.076774,1.052475,.114636,1.394826,-.044509,1.032525,.07289,1.40883,-.011968,1.015459,.031101,1.42237,.020555,.999808,-.011002,1e-4,-.001334,13.377127,13.342275,342e-6,-.004563,45.758434,13.34271,.002026,-.027004,179.672058,13.331846,.004559,-.060563,179.294235,13.314877,.008232,-.108154,181.242035,13.222856,.013031,-.16759,179.684509,13.15386,.019526,-.242041,181.004608,12.986094,.026364,-.309289,159.606293,13.247752,.03767,-.409755,179.468521,12.368877,.051804,-.512051,167.955582,12.981333,.068214,-.601994,156.278793,12.704532,.088295,-.686849,143.096878,12.316531,.111478,-.75867,127.423111,11.793048,.138336,-.821348,111.763031,11.157992,.168447,-.873616,96.887924,10.447472,.201411,-.916322,83.225327,9.696606,.237443,-.95309,71.403137,8.949244,.274234,-.977751,60.739277,8.225874,.314566,-1.003135,52.115578,7.547433,.353932,-1.016312,44.341869,6.910326,.393858,-1.024848,37.827263,6.324401,.433805,-1.02895,32.380932,5.790555,.475812,-1.034084,27.955982,5.312826,.513254,-1.026743,23.977417,4.866118,.549965,-1.01674,20.628025,4.468437,.5903,-1.01203,18.036856,4.105483,.62642,-.998919,15.669224,3.780593,.658897,-.979874,13.603898,3.482054,.687252,-.955238,11.788331,3.211213,.718941,-.935663,10.355552,2.962083,.749877,-.915206,9.131123,2.741382,.772094,-.884837,7.973935,2.536501,.799495,-.861214,7.08623,2.347282,.820136,-.830976,6.240769,2.179332,.846715,-.807408,5.604792,2.018005,.865176,-.776657,4.975034,1.877021,.8811,-.744657,4.442767,1.743528,.907637,-.722088,4.035177,1.621563,.922239,-.690432,3.63316,1.506158,.936558,-.65965,3.281798,1.403606,.950047,-.629105,2.974179,1.304276,.961959,-.598277,2.704483,1.213888,.98741,-.576085,2.510453,1.125569,.999996,-.546494,2.304016,1.045567,1.014127,-.518186,2.127867,.970718,1.036275,-.494009,1.985804,.897557,1.049695,-.465659,1.845074,.830584,1.064617,-.438159,1.72513,.766083,1.077131,-.409813,1.613818,.705101,1.101054,-.385632,1.528694,.644828,1.122361,-.360045,1.447086,.587878,1.147359,-.335186,1.377588,.53213,1.169881,-.30904,1.313673,.478843,1.200554,-.28459,1.257256,.426855,1.232047,-.259332,1.208431,.376125,1.275402,-.235215,1.174692,.326614,1.306595,-.207508,1.141042,.281524,1.334304,-.17829,1.111778,.238694,1.364678,-.14853,1.090976,.198549,1.387168,-.117114,1.069308,.158529,1.408657,-.084977,1.050625,.118042,1.426214,-.052052,1.031444,.076541,1.444257,-.018653,1.014298,.034061,1.460618,.015206,.999413,-.008132,1e-4,-.002003,20.052612,20.032721,297e-6,-.005947,59.540512,20.033842,.002022,-.040439,404.848511,20.032743,.004588,-.090999,403.741241,19.910591,.008769,-.169802,441.471558,19.572552,.013708,-.253629,411.667816,19.145721,.020331,-.349396,371.322571,18.591049,.030259,-.468121,385.816498,18.331083,.04519,-.611444,391.924133,15.807686,.058476,-.676875,319.638641,16.947781,.079894,-.781421,278.80426,17.512903,.103871,-.855116,235.999786,16.290295,.131756,-.915747,197.168076,14.956566,.163487,-.966333,163.452347,13.60801,.198693,-1.008386,135.632706,12.299661,.236157,-1.039862,111.919281,11.08879,.274579,-1.059988,92.136581,9.983883,.317164,-1.084069,77.063034,9.008505,.357624,-1.092124,63.963051,8.127298,.399009,-1.09756,53.483341,7.347628,.441182,-1.100981,45.052429,6.658191,.481606,-1.097318,37.93264,6.047333,.524253,-1.09657,32.395638,5.505878,.564351,-1.088739,27.67938,5.018494,.600843,-1.073396,23.611519,4.58077,.635527,-1.055024,20.207081,4.194785,.672045,-1.039775,17.469036,3.847436,.698372,-1.009545,14.928226,3.532546,.729336,-.987168,12.95317,3.248834,.761147,-.966299,11.346271,2.994166,.78227,-.932841,9.813129,2.762244,.811832,-.910431,8.672224,2.549933,.832053,-.878369,7.578633,2.363132,.849383,-.844673,6.648379,2.189266,.86602,-.811703,5.850784,2.031716,.893083,-.789181,5.273372,1.88448,.909212,-.757541,4.700618,1.750298,.923169,-.725157,4.19664,1.62759,.937112,-.693769,3.764841,1.514906,.961901,-.670828,3.444598,1.406839,.975245,-.64024,3.120745,1.307873,.989696,-.611032,2.840732,1.216417,1.002057,-.581144,2.591596,1.132553,1.014022,-.55162,2.37382,1.051695,1.025307,-.522268,2.177992,.9775,1.05219,-.500826,2.042511,.904301,1.064408,-.472355,1.891934,.837557,1.077876,-.444815,1.761054,.773004,1.088939,-.416531,1.638939,.713958,1.118551,-.395057,1.555724,.652485,1.134469,-.368289,1.46549,.59633,1.162778,-.345095,1.390977,.539703,1.185298,-.319527,1.321225,.48625,1.208419,-.29359,1.259318,.434178,1.261013,-.273471,1.219767,.382032,1.297811,-.248226,1.176422,.33419,1.326591,-.220354,1.139881,.289075,1.357918,-.191937,1.111418,.246259,1.38759,-.162282,1.086511,.205129,1.415797,-.131515,1.067072,.165601,1.440194,-.099555,1.047799,.125462,1.4656,-.066957,1.030406,.084082,1.487714,-.033496,1.013889,.041981,1.509947,663e-6,.998773,-485e-6,1e-4,-.004009,40.102047,40.087105,228e-6,-.009141,91.431366,40.074432,.001522,-.060544,605.651733,39.918827,.004919,-.188871,1712.9823,38.873421,.009053,-.320325,1583.453125,39.715633,.015375,-.471415,1486.033691,39.162876,.029306,-.735111,1751.70105,28.0832,.04345,-.859759,1392.47522,24.599945,.079075,-1.220033,1629.972656,18.507019,.09013,-1.091255,940.347351,17.961655,.098008,-.945965,425.901093,24.47801,.138246,-1.084105,416.823944,20.003433,.174489,-1.133148,302.730042,18.550846,.207969,-1.138483,242.853577,15.923334,.249132,-1.168197,191.649445,13.940813,.291391,-1.187038,152.910309,12.263267,.332856,-1.192793,121.905075,10.822873,.377473,-1.202846,99.145561,9.618412,.422601,-1.208871,81.343315,8.591735,.465276,-1.204545,66.742569,7.692911,.50471,-1.190839,54.787876,6.915612,.544909,-1.178827,45.507313,6.242786,.582125,-1.16059,37.819912,5.65169,.620694,-1.145481,31.926588,5.12366,.659127,-1.130178,27.14731,4.669475,.684358,-1.093728,22.650702,4.258717,.719453,-1.074591,19.454103,3.901225,.751695,-1.051678,16.735672,3.57687,.775082,-1.017716,14.281039,3.287471,.796233,-.982759,12.261332,3.023708,.827404,-.961227,10.767912,2.78774,.848149,-.928433,9.37135,2.570737,.864891,-.892838,8.142364,2.379204,.880979,-.858193,7.118954,2.20447,.910434,-.837281,6.389041,2.041554,.925396,-.803638,5.643217,1.893353,.942463,-.772925,5.031223,1.757331,.955217,-.73972,4.486978,1.633572,.96857,-.708048,4.014621,1.520414,.981672,-.677109,3.617768,1.412506,.992829,-.645712,3.258773,1.317079,1.02127,-.625746,3.00664,1.222611,1.031247,-.594628,2.733073,1.137911,1.043581,-.56554,2.498495,1.058439,1.05593,-.536962,2.289843,.984428,1.066727,-.508076,2.108603,.912794,1.081225,-.481297,1.951454,.845536,1.088198,-.451563,1.801891,.782718,1.123316,-.433247,1.704316,.721664,1.133206,-.404812,1.586153,.662761,1.152889,-.379901,1.490958,.606866,1.188158,-.359421,1.41573,.550666,1.217064,-.336049,1.344172,.496748,1.257727,-.314816,1.283196,.443538,1.286647,-.28953,1.225903,.394018,1.308729,-.262053,1.173928,.346255,1.351453,-.237704,1.139992,.300393,1.380284,-.209733,1.105997,.256661,1.414621,-.181613,1.082109,.215429,1.453045,-.152797,1.063853,.177098,1.481066,-.121803,1.043185,.137203,1.514113,-.09025,1.027072,.096998,1.547317,-.057603,1.012551,.055328,1.577983,-.023799,.999267,.013094,108e-6,-.12497,1249.704346,1249.703491,14e-5,-.119585,1195.855469,1195.85437,.003995,-.927433,9274.246094,232.443573,.012013,-1.13158,11315.999023,98.211105,.023892,-1.216018,12162.739258,67.2145,.047506,-1.517865,15186.294922,42.410069,.082523,-1.812564,18145.71875,24.421545,.112452,-1.805072,11112.966797,18.450365,.16446,-2.016784,8086.032715,14.043465,.19587,-1.898199,4245.658203,13.178202,.197797,-1.556158,1315.561768,30.760096,.21954,-1.433455,802.380371,25.037956,.268696,-1.483235,579.715515,20.975695,.265968,-1.261051,386.583649,12.017023,.325369,-1.343349,316.795959,12.612406,.387968,-1.411606,232.491623,13.29694,.435543,-1.411236,181.515228,11.646996,.482729,-1.405722,143.425354,10.265131,.531742,-1.402782,114.920082,9.114828,.559383,-1.346165,88.589005,8.089214,.607851,-1.342407,73.05661,7.249064,.656928,-1.338238,60.826897,6.531094,.681212,-1.285692,48.727219,5.868711,.729238,-1.279951,41.256016,5.324553,.751172,-1.230045,33.72826,4.816513,.773107,-1.184288,27.913816,4.377203,.815726,-1.171653,24.065962,3.999965,.837886,-1.130636,20.25486,3.658493,.857674,-1.089071,17.138168,3.34793,.87612,-1.048303,14.572968,3.072666,.893935,-1.00904,12.496377,2.825165,.927998,-.989064,11.040731,2.60552,.928445,-.935017,9.365102,2.401481,.945279,-.899993,8.177711,2.222282,.959378,-.863854,7.155303,2.059342,.971761,-.827684,6.284632,1.909314,.987812,-.795878,5.583837,1.771094,1.001958,-.76354,4.962345,1.645968,1.014357,-.730897,4.435898,1.527438,1.025946,-.698675,3.973241,1.421337,1.036435,-.666662,3.568025,1.323677,1.046807,-.635466,3.218647,1.232678,1.052974,-.60266,2.902273,1.147675,1.086089,-.585364,2.694939,1.068352,1.09466,-.554784,2.454491,.993445,1.117131,-.5315,2.270746,.923758,1.114009,-.496581,2.063934,.858381,1.137328,-.473914,1.91799,.79498,1.158671,-.450127,1.786523,.735697,1.177878,-.425306,1.662454,.677498,1.20751,-.403797,1.559058,.621762,1.244496,-.383812,1.466801,.56619,1.240412,-.35108,1.366853,.514288,1.321257,-.3412,1.309808,.464621,1.336512,-.31271,1.241822,.413228,1.365047,-.286935,1.186612,.366092,1.418984,-.265184,1.15212,.321528,1.388864,-.22775,1.089937,.271827,1.464383,-.207168,1.077271,.232838,1.473125,-.17577,1.041835,.193289,1.542908,-.150424,1.036794,.156153,1.563005,-.118748,1.013029,.114866,1.637048,-.089604,1.013493,.076804,1.670777,-.056398,.999208,.032691]),64,64,p.RGBAFormat,p.FloatType,p.UVMapping,p.ClampToEdgeWrapping,p.ClampToEdgeWrapping,p.LinearFilter,p.NearestFilter,1),r=new p.DataTexture(new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,.999995,.99999,.999971,.999937,.999853,.99967,.999138,.996746,.979578,.979309,.978836,.977972,.976223,.972205,.962466,.953919,.949829,.942492,.92987,.921319,.911112,.896015,.885105,.869971,.855017,.838328,.821241,.802352,.783873,.763309,.743058,.721929,.699755,.677721,.655456,.632681,.609629,.586831,.564287,.541772,.519428,.497353,.475624,.454606,.434099,.414085,.394605,.375698,.357386,.339871,.323085,.306905,1,1,1,1,1,1,1,1,.999999,.999999,.999998,.999995,.99999,.99998,.999959,.999923,.999842,.99966,.999119,.996613,.981824,.979298,.978826,.977957,.976184,.972091,.962188,.953875,.949746,.942335,.930166,.921211,.910927,.896979,.88494,.869864,.854835,.8382,.821049,.802552,.783659,.763512,.742927,.721715,.699938,.677775,.655246,.632555,.609805,.586996,.564225,.541606,.519346,.497419,.475863,.454738,.434099,.414003,.394547,.375747,.357564,.340012,.323099,.306861,1,1,1,1,1,1,1,1,1,.999999,.999998,.999995,.999991,.999979,.999959,.999917,.999839,.999648,.999074,.996168,.98377,.979279,.9788,.977905,.976058,.971727,.96212,.953901,.949485,.941859,.930911,.920853,.910394,.8976,.884427,.870101,.854522,.838325,.820754,.802707,.783223,.763605,.742872,.721565,.699935,.677726,.655242,.63258,.609766,.586946,.564275,.541759,.519467,.497478,.475886,.454794,.434233,.414207,.394751,.375892,.357683,.340146,.323287,.307095,1,1,1,1,1,1,1,.999999,.999999,.999998,.999996,.999992,.999987,.999975,.999953,.999913,.99983,.99963,.998993,.995279,.985142,.979252,.978754,.977821,.975838,.971088,.962563,.954785,.949048,.941052,.93142,.920812,.90975,.897867,.883856,.870091,.854353,.838166,.820661,.802465,.783308,.763346,.742734,.721608,.699747,.677626,.655245,.632547,.609793,.587044,.56434,.541779,.519529,.497633,.476114,.45503,.43443,.414406,.394974,.376154,.357979,.340443,.323572,.307379,1,1,1,1,1,1,1,1,.999998,.999998,.999996,.999991,.999984,.99997,.999946,.999905,.999815,.999599,.998856,.993704,.986135,.979212,.97869,.977691,.975504,.970133,.962951,.955649,.948405,.940418,.93166,.920881,.909376,.897785,.883844,.869756,.854326,.837732,.820617,.802053,.783195,.763119,.74261,.721344,.699709,.677624,.655114,.632523,.609812,.587052,.564417,.541966,.519751,.497824,.476309,.455271,.434735,.414736,.395317,.376524,.358364,.340852,.323988,.307786,1,1,1,1,1,1,.999999,.999999,.999997,.999996,.999994,.999989,.99998,.999965,.99994,.999895,.999796,.999559,.998638,.992774,.986878,.980297,.978602,.977514,.975026,.969169,.963214,.956267,.947689,.940054,.931637,.920678,.90899,.897349,.883905,.869139,.854177,.837476,.820295,.801977,.782798,.762978,.742418,.721193,.69956,.677402,.655108,.632543,.609804,.587158,.564557,.542096,.519908,.498088,.476632,.455623,.435104,.415161,.395783,.377005,.358843,.341345,.324529,.308355,1,1,1,1,1,.999999,.999999,.999998,.999997,.999992,.999991,.999985,.999977,.999959,.999935,.999878,.999773,.999505,.998284,.992353,.987457,.981665,.978492,.977277,.97436,.968716,.963373,.956629,.947397,.939657,.931339,.920588,.908975,.896712,.883763,.86889,.853731,.837333,.819702,.801738,.782454,.762712,.742024,.721037,.699325,.677359,.65503,.632439,.609869,.587221,.564663,.542328,.52022,.4984,.476997,.456053,.435593,.415658,.3963,.377577,.359473,.342004,.32517,.308997,1,1,1,1,1,.999999,.999998,.999998,.999996,.999993,.999988,.999981,.999971,.999951,.999921,.999863,.999748,.999433,.997681,.99212,.98792,.982864,.978353,.976961,.973451,.968396,.9634,.95668,.947529,.939151,.930747,.920511,.908867,.896142,.883335,.868764,.853025,.837015,.819452,.801249,.782176,.762345,.741843,.720721,.699135,.677194,.654889,.632487,.609902,.587328,.564891,.542567,.520501,.498793,.477442,.456528,.436131,.416273,.39698,.378276,.360176,.342738,.32595,.309803,1,1,1,1,.999999,.999998,.999999,.999997,.999995,.999991,.999985,.999978,.999963,.999942,.999907,.999844,.999715,.999332,.996612,.991974,.988297,.983843,.978349,.97654,.972351,.968109,.96328,.956464,.947779,.938754,.929952,.920253,.90853,.895785,.882679,.868456,.852669,.836406,.819138,.800708,.781803,.761855,.741534,.720405,.698959,.676964,.654827,.632411,.609922,.587477,.565051,.542829,.520889,.499225,.477951,.457148,.436792,.416963,.397723,.379068,.361025,.343608,.326842,.310718,1,1,1,1,1,.999999,.999998,.999995,.999994,.99999,.999983,.999971,.999954,.999932,.999892,.99982,.999675,.99919,.995492,.991911,.98861,.984662,.979221,.975975,.971671,.967788,.963002,.955938,.947965,.938692,.929309,.919781,.908268,.895518,.882022,.867884,.852346,.835746,.818607,.800261,.781335,.761539,.741063,.720116,.698617,.676815,.6547,.632389,.610037,.587591,.565328,.543205,.521293,.499745,.478562,.457776,.437515,.417776,.398586,.379963,.361984,.344616,.327857,.311751,1,1,1,1,1,.999999,.999997,.999996,.999992,.999986,.999977,.999965,.999947,.999916,.999873,.999794,.999628,.998966,.994914,.991849,.988873,.985288,.98017,.975207,.971156,.967476,.962538,.955601,.947978,.938542,.928618,.919056,.90789,.895098,.881352,.867263,.851806,.835168,.818003,.799785,.780633,.76108,.740618,.719795,.698332,.676629,.654544,.632411,.610042,.587805,.565593,.543549,.521793,.500309,.479195,.458546,.438353,.418669,.399557,.381012,.363049,.34571,.329006,.312948,1,1,1,1,1,.999999,.999997,.999993,.99999,.999984,.999972,.99996,.999939,.999906,.999853,.999765,.999567,.998603,.994519,.991794,.989089,.985781,.980956,.974161,.970688,.967064,.96189,.955292,.947848,.938359,.928226,.918214,.907361,.894702,.880834,.8665,.851209,.834627,.817211,.79925,.780131,.760512,.740218,.719264,.698063,.676325,.65445,.632316,.61017,.587988,.565891,.544013,.522305,.500958,.479971,.459376,.439271,.419699,.40062,.382126,.364246,.346967,.330273,.314236,1,1,1,1,.999999,.999998,.999996,.999994,.999988,.999979,.999967,.999952,.999924,.999888,.999833,.999733,.99949,.997946,.994192,.991812,.989274,.986224,.981547,.974,.970269,.966545,.961031,.954921,.947416,.938226,.928003,.91739,.906553,.894191,.880329,.86554,.850476,.834058,.816467,.798509,.779561,.759828,.739738,.718878,.697718,.676138,.654342,.632317,.610292,.588207,.566289,.544443,.522927,.501674,.480765,.460314,.440304,.420782,.401824,.38341,.365538,.348312,.331692,.315688,1,1,1,1,.999999,.999998,.999996,.999993,.999985,.999976,.999961,.999943,.999913,.999872,.999807,.999691,.99939,.996859,.994003,.991808,.989423,.986523,.981783,.974511,.969791,.965933,.960377,.954434,.946803,.938026,.92762,.916545,.905639,.893489,.87982,.864852,.849513,.833311,.815878,.797621,.778938,.759253,.739142,.718479,.697274,.675902,.654135,.632357,.610364,.588497,.566631,.545012,.523579,.502429,.48168,.461304,.441425,.422039,.403135,.384779,.366976,.349796,.333231,.317277,1,1,1,1,.999999,.999998,.999996,.999991,.999983,.999974,.999956,.999932,.999901,.999852,.99978,.999646,.999248,.996193,.993784,.991782,.989539,.986694,.981765,.975135,.969309,.965128,.959788,.953831,.946255,.937664,.927351,.916044,.904715,.892528,.879111,.864256,.848452,.832434,.815129,.796806,.778118,.758668,.738466,.718024,.696958,.675642,.654067,.632325,.610546,.588786,.567123,.545617,.524312,.503348,.482637,.462418,.442657,.423338,.404564,.386277,.368545,.351448,.334906,.318961,1,1,1,.999999,.999999,.999998,.999994,.999989,.999979,.999968,.999949,.999921,.999886,.999833,.999747,.999596,.999029,.995749,.993677,.991724,.98962,.986723,.981515,.975767,.969056,.964124,.959142,.953036,.94565,.937022,.926971,.915515,.903584,.891603,.878212,.863472,.847652,.831398,.814299,.796105,.777231,.757977,.737895,.717415,.696595,.675317,.65398,.632343,.610735,.589076,.56762,.546251,.525165,.504255,.483759,.463666,.443987,.424783,.406042,.387891,.370293,.353221,.336715,.320806,1,1,1,.999999,.999998,.999998,.999993,.999987,.999977,.999964,.999943,.999911,.999867,.999807,.999714,.999531,.998645,.995399,.993512,.991717,.989661,.986652,.981559,.976183,.969411,.963317,.958457,.952091,.944951,.936307,.926454,.915043,.902668,.890462,.877245,.862672,.846823,.830201,.813293,.795306,.776393,.757199,.737324,.716808,.696187,.675094,.653814,.632453,.610885,.589483,.568099,.546975,.525953,.505268,.484936,.464988,.445458,.426314,.40775,.38967,.372098,.355105,.338682,.322825,1,1,1,1,.999999,.999996,.999992,.999983,.999976,.999959,.999933,.999898,.999849,.99978,.999676,.999454,.997884,.995166,.993394,.991723,.989654,.986389,.981632,.976607,.969701,.962555,.957605,.951232,.944099,.935556,.925699,.914492,.902027,.889116,.876093,.861649,.845956,.829238,.81222,.79442,.775657,.756265,.736673,.716372,.695669,.674886,.653728,.632568,.611217,.589929,.568783,.547752,.526931,.506425,.486238,.466425,.446945,.428026,.409536,.391551,.374087,.357155,.340787,.324974,1,1,1,1,.999998,.999996,.99999,.999984,.99997,.999952,.999925,.999886,.999831,.999757,.999633,.999356,.997017,.994868,.993337,.99171,.98958,.985848,.98164,.976711,.969755,.962166,.956609,.950365,.943026,.934693,.92488,.913729,.90135,.887966,.874726,.860474,.844905,.828269,.810905,.793364,.774812,.755478,.735886,.715847,.695231,.674537,.653667,.632527,.611475,.590363,.569462,.548571,.527976,.507634,.487632,.467901,.44868,.429833,.411467,.393568,.376197,.359374,.343034,.327273,1,1,1,.999999,.999998,.999993,.999989,.99998,.999965,.999945,.999913,.999869,.99981,.999723,.999583,.999213,.99654,.99474,.993244,.991671,.989411,.985533,.981616,.976847,.969968,.962315,.955468,.94942,.942016,.933617,.923949,.912899,.900495,.887022,.873283,.859153,.84383,.827325,.809888,.792172,.773832,.754686,.735035,.715297,.694955,.674242,.65366,.632752,.611804,.590993,.570154,.549539,.529087,.508974,.48903,.469599,.450466,.431761,.413508,.395761,.37848,.361679,.345465,.329752,1,1,1,1,.999997,.999994,.999987,.999978,.999961,.999936,.999903,.999855,.999786,.999689,.999527,.998988,.996137,.994527,.993108,.991599,.989084,.985308,.981527,.976677,.970079,.962535,.95449,.948271,.940942,.932422,.922836,.911896,.899632,.886118,.871864,.857719,.842536,.826163,.808849,.79086,.772802,.75386,.734335,.714582,.694543,.674071,.653544,.632922,.612153,.591573,.570951,.55052,.530352,.510311,.490707,.471359,.452396,.433837,.415736,.398052,.380874,.364232,.348023,.332368,1,1,1,.999999,.999998,.999994,.999988,.999976,.999957,.999928,.999891,.999837,.999759,.99965,.999463,.998551,.995879,.994366,.992964,.991479,.988521,.985101,.981482,.976168,.970242,.962585,.95395,.946973,.939686,.931248,.921614,.910765,.898617,.885183,.870772,.856138,.84112,.824962,.807732,.789813,.771638,.753008,.733686,.713927,.694082,.673967,.653549,.633135,.612702,.5922,.571904,.551679,.531678,.511898,.492437,.473239,.454451,.436067,.418054,.400542,.383486,.366848,.350781,.335182,1,1,1,.999999,.999997,.999993,.999985,.999972,.999951,.999919,.999877,.999817,.999733,.999608,.99938,.997685,.995603,.994264,.992911,.991287,.987923,.984871,.981239,.975933,.970149,.962511,.953824,.945699,.938285,.929907,.920343,.909537,.897435,.884056,.869626,.85449,.839459,.823511,.806511,.788752,.77044,.751995,.732962,.713424,.693525,.673798,.653622,.633301,.613224,.592938,.572833,.552904,.53303,.513556,.494215,.475279,.456673,.438411,.420583,.403178,.386178,.369728,.353688,.338147,1,1,1,.999999,.999997,.999991,.999984,.999967,.999944,.999912,.999863,.999796,.999703,.999563,.999279,.997104,.995394,.994111,.992825,.990979,.987529,.984661,.980774,.975758,.969866,.962465,.953678,.944489,.936886,.928356,.91882,.908073,.896092,.882833,.868463,.853212,.837744,.822048,.805333,.787643,.769414,.75083,.732178,.712972,.693227,.673569,.653744,.633739,.613735,.593822,.573916,.554158,.534652,.515248,.496233,.477436,.459009,.440929,.423259,.405951,.389136,.37269,.356789,.341329,1,1,1,.999999,.999996,.999991,.999981,.999966,.999939,.999903,.999847,.999771,.999666,.99951,.999131,.99669,.995147,.993882,.992696,.990474,.987227,.984334,.980153,.975438,.969406,.962238,.953598,.943868,.935356,.926721,.917122,.90643,.89455,.881354,.867131,.851954,.835972,.820331,.803911,.786452,.76842,.749821,.731298,.712393,.692979,.673418,.653859,.634232,.614327,.594732,.575131,.555584,.536346,.517175,.498323,.479744,.461485,.443645,.426061,.408969,.392155,.375921,.36006,.344677,1,1,1,.999999,.999997,.999991,.999979,.99996,.999931,.999891,.999832,.999748,.999629,.999449,.99888,.996305,.995024,.993812,.992508,.989721,.986936,.983936,.979629,.974979,.968928,.96197,.953291,.943458,.933644,.925007,.915388,.904755,.892932,.879831,.865794,.850672,.834591,.818398,.802304,.785151,.76745,.748987,.730325,.711758,.692761,.673417,.653908,.634686,.615168,.595707,.576393,.557198,.538018,.519253,.500555,.48222,.464197,.446414,.429106,.412035,.395508,.379284,.363538,.34822,1,1,1,.999999,.999995,.999989,.999977,.999955,.999924,.999879,.999813,.999722,.99959,.999381,.998335,.996088,.994814,.993709,.99222,.989209,.986575,.983383,.979084,.974272,.968359,.961275,.953025,.943098,.932434,.923101,.913477,.902861,.891059,.878072,.864118,.849188,.833281,.816808,.800596,.783745,.766331,.748123,.729686,.711078,.692527,.673491,.654296,.635113,.616048,.596847,.57772,.558879,.540028,.521371,.502996,.484858,.466997,.449477,.432217,.415426,.398924,.38289,.367206,.351955,1,1,1,.999998,.999996,.999988,.999974,.999953,.999918,.999865,.999791,.99969,.999542,.999293,.997535,.99579,.994609,.993557,.991766,.988767,.986255,.982544,.978541,.973528,.9677,.960596,.952299,.942684,.931653,.921211,.911489,.900818,.889018,.876245,.862406,.847517,.831852,.815367,.798719,.782224,.765167,.747304,.729133,.710485,.692196,.673589,.65477,.635717,.616986,.598119,.579298,.56056,.542163,.523669,.505564,.487642,.469991,.452658,.43562,.418937,.402612,.386633,.371091,.355949,1,1,.999999,.999998,.999995,.999986,.999973,.999948,.999909,.999852,.999769,.999656,.99949,.999186,.997059,.995624,.99451,.993327,.99102,.988379,.985771,.981971,.978051,.972892,.96702,.959965,.951625,.941902,.930951,.91937,.909285,.898562,.886809,.874251,.860597,.845808,.830365,.813972,.79726,.780597,.763854,.746401,.728519,.710203,.691882,.673687,.655275,.636621,.617909,.599473,.581032,.56256,.544295,.526228,.508293,.490652,.473242,.456004,.439212,.422663,.406476,.390647,.375204,.360129,1,1,1,.999999,.999994,.999984,.999969,.99994,.999898,.999837,.999746,.999617,.999438,.999016,.996703,.995302,.994356,.992993,.99039,.988072,.985152,.981447,.977273,.972234,.966113,.959033,.950869,.941217,.930175,.918279,.906941,.896201,.884509,.87192,.85842,.843906,.82873,.812524,.795978,.778979,.76245,.745459,.727966,.710046,.691808,.673739,.655756,.637574,.619153,.600887,.582796,.564748,.546636,.528904,.511252,.493791,.476563,.459695,.442942,.426632,.410558,.394895,.379517,.36456,1,1,1,.999998,.999994,.999984,.999966,.999934,.999887,.999819,.99972,.999578,.999367,.998696,.996353,.995201,.994115,.992665,.989948,.987633,.984331,.980827,.97639,.971327,.965201,.957977,.949712,.940128,.929187,.917237,.904645,.893711,.882112,.869516,.856236,.841929,.826924,.810991,.794686,.777761,.76098,.744384,.727314,.709877,.691988,.674098,.656243,.638603,.620606,.602574,.584694,.567018,.549311,.531673,.514403,.497148,.480177,.463439,.446998,.430743,.414943,.399304,.384121,.369251,1,1,1,.999997,.999992,.999981,.999962,.999927,.999874,.999798,.999691,.999533,.999291,.997909,.996117,.995029,.99388,.992142,.989576,.987185,.983587,.980055,.975487,.970172,.963998,.956738,.948637,.939083,.928169,.916144,.903147,.890916,.879389,.866895,.853826,.839729,.824957,.809472,.793341,.776743,.759808,.743277,.726643,.709685,.692249,.674639,.657008,.639576,.622114,.604471,.586851,.56934,.552135,.534806,.517599,.500765,.484035,.46744,.451212,.43524,.419399,.404083,.388944,.374182,1,1,1,.999998,.999993,.999979,.999958,.999919,.999861,.999774,.999656,.999482,.999195,.997307,.995837,.994722,.993707,.991391,.989169,.986461,.982904,.979062,.974536,.969035,.962653,.955486,.947243,.937747,.926861,.914936,.901835,.888472,.876571,.864223,.851252,.837374,.822985,.807788,.791927,.775702,.758928,.742347,.725914,.709495,.692569,.675363,.658085,.640639,.623698,.606505,.589267,.572008,.554939,.538132,.521211,.504487,.488048,.471807,.455651,.439858,.424332,.408983,.394071,.379402,1,1,1,.999997,.999992,.999978,.999954,.999913,.999844,.999753,.999618,.999424,.999067,.996875,.995659,.994603,.99342,.990874,.988713,.985585,.982193,.978145,.973416,.967801,.961483,.954069,.945704,.936138,.925374,.913395,.900339,.886675,.873512,.861326,.848513,.834956,.82082,.805943,.790574,.774677,.758279,.741807,.725271,.709231,.692874,.676189,.659352,.642296,.62525,.6087,.591823,.575012,.558143,.541491,.525075,.508558,.492277,.47627,.460459,.44474,.4294,.414309,.399421,.384907,1,1,1,.999997,.99999,.999977,.999947,.999902,.999832,.99973,.999577,.999359,.998845,.996554,.995328,.994442,.992919,.990393,.98817,.984855,.981312,.977149,.972137,.966207,.959967,.952454,.943873,.934434,.923813,.911942,.898928,.88512,.871043,.858248,.845666,.832346,.818482,.804029,.788982,.773571,.7577,.741484,.725186,.708915,.693244,.677028,.660656,.644079,.627377,.610804,.594542,.578112,.56165,.545163,.528962,.512926,.496893,.481007,.465397,.450042,.43474,.419831,.405156,.390692,1,1,.999999,.999997,.999989,.999973,.999942,.999891,.999813,.999698,.999532,.999285,.998286,.996295,.995215,.994182,.992032,.989855,.987415,.984047,.98005,.976017,.970845,.964767,.958269,.9506,.942033,.932501,.921807,.910017,.897149,.883414,.869182,.855055,.842687,.829548,.816162,.802072,.787436,.772533,.757043,.741263,.72533,.709262,.693497,.678038,.662128,.646068,.629824,.613437,.597334,.581401,.565372,.549288,.533182,.517405,.501765,.486143,.470675,.455465,.440532,.42563,.411113,.396887,1,1,.999999,.999996,.999989,.99997,.999934,.999879,.999793,.999665,.999481,.999192,.997506,.995926,.995009,.993736,.991298,.989326,.986371,.983199,.979032,.974596,.969364,.963198,.956385,.948509,.939993,.930421,.91959,.90814,.895349,.881699,.867456,.852784,.8395,.826629,.813602,.799983,.785873,.77134,.75648,.74119,.725687,.709997,.694192,.678975,.663673,.648135,.632442,.616477,.600565,.584772,.569202,.553595,.537881,.522193,.506784,.491554,.476349,.461278,.446419,.431913,.417443,.403271,1,1,.999999,.999995,.999986,.999966,.999927,.999867,.999772,.999629,.999423,.999075,.997024,.995773,.994651,.993353,.990822,.988569,.985596,.982182,.977871,.97314,.967584,.961408,.954294,.946398,.937603,.927937,.917305,.905833,.893138,.87977,.86572,.851023,.836801,.823784,.810909,.797886,.784177,.770243,.755925,.741144,.726214,.710971,.695563,.680212,.665304,.650297,.635168,.619796,.604217,.588692,.573254,.557998,.542839,.52747,.512162,.497115,.482296,.467477,.452812,.43831,.424184,.410163,1,1,.999999,.999996,.999984,.999962,.99992,.999852,.999745,.999586,.999354,.998894,.996686,.995485,.994493,.992573,.990323,.987772,.984692,.980887,.976446,.971625,.965717,.959421,.951975,.944086,.935066,.925403,.914814,.903208,.890958,.877817,.863828,.849289,.834872,.820889,.808183,.79566,.782556,.769066,.755386,.741229,.726726,.71217,.697209,.68217,.667203,.652689,.637938,.623262,.60819,.593002,.577817,.562737,.547836,.533036,.518052,.503135,.488422,.473986,.459552,.445282,.431149,.417407,1,1,.999999,.999994,.999983,.999957,.999914,.999835,.999718,.999538,.999275,.998454,.996341,.995246,.994222,.991844,.989829,.986688,.983562,.979638,.974932,.969827,.963621,.957146,.949365,.941398,.932245,.922556,.911949,.900627,.88844,.875544,.862005,.84781,.833372,.819134,.805508,.793339,.780916,.767837,.754858,.741307,.727496,.713386,.699131,.684542,.669878,.655261,.641035,.626685,.612377,.597625,.582805,.56803,.553204,.538684,.524269,.509662,.495119,.480735,.466634,.452593,.438748,.424915,1,1,.999998,.999994,.999982,.999956,.999901,.999818,.999683,.999487,.999185,.997584,.996004,.99505,.993715,.991212,.989057,.985879,.982243,.978206,.973119,.967919,.961343,.954603,.946712,.938378,.929266,.919443,.908911,.897725,.885589,.873254,.859889,.846123,.832094,.817898,.803866,.791061,.779235,.766885,.754292,.741565,.728331,.714861,.701179,.687166,.673012,.658716,.644442,.630472,.616519,.602514,.588172,.573689,.559281,.544768,.530543,.516485,.502303,.4881,.474095,.460245,.446598,.433169,1,1,.999997,.999993,.99998,.999947,.999891,.999794,.999647,.999425,.999062,.997049,.995778,.994652,.992778,.990482,.988004,.984893,.980881,.976605,.971199,.96561,.958925,.951746,.943791,.9352,.926018,.916028,.905724,.894528,.882914,.87074,.857802,.844552,.830857,.816921,.803102,.789625,.77748,.765891,.753908,.741795,.72939,.71644,.703411,.690068,.676438,.662586,.648697,.634732,.620997,.607451,.593765,.579748,.565661,.551594,.537396,.523433,.509708,.495972,.482082,.468427,.45489,.441623,1,1,.999999,.999991,.999977,.99994,.999875,.999769,.999605,.999352,.998882,.996665,.995459,.99438,.992014,.989912,.986796,.983537,.979326,.974792,.96914,.96316,.956222,.948807,.940518,.931755,.922452,.912319,.902227,.891142,.879838,.868047,.855745,.842718,.829827,.816398,.802786,.789396,.776581,.764901,.75371,.742102,.730448,.718337,.705768,.693172,.680153,.666882,.653401,.639837,.626152,.612676,.599435,.586109,.572473,.558715,.544964,.531112,.517416,.503992,.490653,.477162,.463832,.450645,1,1,.999999,.999992,.999973,.999933,.999861,.999741,.999554,.999267,.998411,.996303,.995191,.993945,.991406,.989019,.98572,.982057,.977501,.972605,.966697,.96034,.953031,.945347,.936866,.927917,.918562,.908598,.898486,.887794,.876545,.865379,.853428,.841167,.828649,.815967,.802957,.789865,.777077,.764695,.753544,.742694,.731571,.720304,.70849,.696351,.684134,.67147,.658541,.645376,.632209,.618776,.605511,.592527,.579546,.56631,.55286,.539492,.526005,.512564,.49934,.48636,.473357,.460306,1,1,.999998,.999991,.99997,.999926,.999842,.99971,.999498,.999164,.997464,.99587,.994917,.992911,.990682,.987816,.98441,.980551,.975693,.970263,.963946,.957248,.949765,.941571,.932941,.923873,.914332,.90456,.894394,.884127,.873294,.862503,.851335,.839566,.827776,.815708,.80337,.790821,.778386,.766121,.754193,.74342,.732975,.722326,.711376,.699992,.68818,.676354,.664004,.651449,.6386,.625776,.61266,.599603,.586719,.574078,.561273,.548129,.535155,.522015,.508851,.495837,.48319,.470624,1,1,.999998,.999988,.999965,.999916,.999823,.999669,.999425,.999025,.996874,.99567,.994415,.991991,.989766,.986646,.982812,.978356,.973317,.967612,.96082,.953603,.945969,.937323,.928661,.919507,.909833,.900245,.89039,.880252,.87,.859518,.849163,.838101,.82696,.815688,.804126,.792234,.780356,.768474,.756678,.745159,.734601,.724624,.714339,.703751,.692766,.681267,.669799,.657871,.645577,.633102,.62056,.607737,.59489,.582143,.569779,.55736,.544651,.531942,.519228,.506467,.49371,.481143,1,1,.999998,.999988,.999961,.999902,.999798,.999622,.999341,.998801,.996397,.995225,.993927,.991338,.9885,.985327,.981195,.976383,.970726,.964471,.957386,.949813,.941694,.932681,.923974,.914755,.905026,.895649,.886178,.876277,.866629,.85689,.846934,.836887,.826373,.815885,.805169,.794133,.782812,.771547,.760175,.748896,.737687,.727152,.717601,.70767,.697425,.686788,.675664,.664513,.652962,.640965,.628851,.616551,.604168,.591559,.579009,.566648,.554597,.542382,.529999,.517655,.505254,.492894,1,1,.999997,.999986,.999956,.999889,.999766,.999562,.99924,.997952,.996094,.994979,.992773,.990536,.987214,.983322,.978938,.973714,.967681,.960981,.953144,.945475,.936909,.927734,.918826,.90959,.900085,.890867,.881801,.872565,.863236,.854239,.84506,.835686,.826251,.816284,.806586,.796419,.785914,.77521,.764461,.753599,.742805,.731872,.72137,.711898,.702337,.692383,.682137,.671365,.660479,.649314,.637685,.625899,.613898,.601865,.589582,.577285,.565013,.553106,.54128,.529367,.51732,.505411,1,1,.999997,.999983,.999948,.999869,.999732,.999499,.999111,.997167,.99572,.994349,.991727,.989197,.985883,.981483,.976618,.970597,.964122,.956994,.948639,.9405,.931606,.922385,.913291,.904205,.894938,.88589,.877334,.868754,.860053,.851683,.843447,.834889,.826304,.817441,.808285,.799141,.78957,.7796,.76951,.759155,.748882,.738346,.727629,.717273,.707467,.698283,.688609,.678748,.668371,.657739,.646951,.635765,.624254,.612647,.6009,.589061,.576998,.564991,.553102,.541517,.530027,.518495,1,1,.999997,.999983,.999939,.999851,.999684,.999412,.998925,.996597,.995207,.993603,.990903,.987594,.983814,.979016,.973647,.967048,.960109,.952123,.94356,.9349,.925747,.916566,.907305,.898441,.889629,.881042,.872874,.865064,.857225,.849446,.842063,.834561,.826814,.818875,.810748,.802316,.793699,.784704,.775198,.765643,.755735,.745873,.735526,.725229,.714892,.704807,.695502,.686241,.676633,.666688,.656384,.645871,.635174,.624113,.612788,.601426,.589925,.578399,.566612,.554931,.543383,.532065,1,1,.999996,.999977,.999928,.999824,.999633,.999306,.998429,.996133,.99489,.992316,.989752,.986095,.981564,.976234,.970081,.962779,.955232,.946702,.937716,.928604,.919281,.910167,.901046,.892446,.884183,.876253,.868619,.861545,.854673,.847885,.841074,.83461,.827984,.820945,.813648,.806232,.798444,.790232,.781853,.772897,.763648,.754227,.744542,.734689,.724526,.714204,.704152,.694222,.685143,.67586,.666319,.656415,.646273,.635902,.625399,.614563,.60349,.592413,.581217,.57,.558608,.547242,1,.999999,.999995,.999972,.999915,.99979,.999562,.999168,.997237,.995672,.994074,.99122,.987792,.983822,.978599,.972804,.965718,.958053,.94946,.940503,.931011,.921608,.912409,.903378,.894606,.886369,.878756,.871573,.864862,.858421,.852541,.846802,.841027,.835206,.829628,.82373,.817415,.810655,.803873,.796659,.788887,.78094,.772537,.763507,.754487,.745163,.735572,.725687,.715611,.705398,.695418,.685592,.676518,.667304,.657875,.648182,.638235,.628062,.617813,.607283,.596552,.58577,.575033,.564153,1,1,.999995,.99997,.999898,.999748,.999472,.998969,.996528,.995102,.992701,.989963,.985981,.981194,.975183,.968501,.960502,.952012,.942861,.933376,.923506,.914042,.904921,.896282,.887987,.880341,.873536,.867293,.861556,.856148,.850987,.846352,.841684,.83688,.832036,.827091,.8219,.816206,.810042,.803629,.796918,.789653,.781915,.774014,.76553,.756526,.747669,.738342,.72877,.718942,.708942,.698855,.688933,.679131,.669855,.660811,.651549,.642127,.632454,.622651,.612709,.602606,.592344,.581877,1,.999999,.999993,.999963,.999874,.999691,.99935,.998431,.995873,.994456,.991327,.987798,.983232,.9775,.970828,.962815,.954228,.944752,.935126,.925179,.915102,.905763,.897087,.888933,.881452,.874687,.868716,.863585,.858931,.854662,.850569,.846719,.843151,.839426,.835588,.831443,.827004,.822395,.817254,.81163,.805464,.799124,.792382,.785091,.777315,.76936,.760908,.751957,.743128,.733917,.72434,.714713,.704721,.694835,.684862,.675099,.66557,.656644,.647651,.638581,.629337,.619926,.610358,.600707,1,1,.99999,.999953,.999843,.999613,.999186,.997025,.995317,.99285,.98976,.98527,.979807,.973049,.965228,.956248,.946394,.936324,.926124,.915808,.905942,.89706,.889001,.881755,.875351,.869688,.864736,.860745,.857305,.85419,.851261,.848484,.845642,.842948,.84006,.836901,.833379,.829393,.825103,.820431,.815288,.809575,.803326,.796949,.790174,.782873,.775048,.767139,.758772,.750019,.74112,.732127,.722743,.713225,.703637,.693768,.684016,.674277,.664703,.655328,.64655,.637812,.629036,.620129,1,1,.999988,.999933,.9998,.999508,.998917,.996236,.994617,.991176,.987089,.98188,.974966,.967156,.957914,.947585,.936937,.926318,.915662,.905567,.896223,.888166,.881117,.875079,.869981,.865675,.862091,.859183,.856981,.855065,.853273,.851572,.849782,.847768,.845668,.843345,.840703,.837646,.834094,.83003,.825631,.820873,.815619,.809856,.803578,.797096,.790359,.783152,.775507,.767504,.759411,.750982,.742208,.733383,.724445,.71519,.705827,.69644,.686773,.677242,.667735,.658471,.649236,.640305,1,.999999,.999984,.999918,.999737,.99935,.997576,.995476,.992614,.988817,.983601,.97688,.968694,.959092,.948297,.936831,.925592,.914494,.904159,.894643,.886417,.87962,.874023,.869533,.865967,.863238,.861113,.859527,.858367,.857594,.856882,.856172,.855316,.854197,.852818,.851062,.849046,.846747,.844043,.840842,.837164,.832985,.828344,.823544,.818276,.812543,.806374,.799838,.79317,.786246,.778956,.771297,.763278,.755252,.746984,.738445,.729688,.721045,.712189,.703099,.694045,.68493,.675601,.66648,1,.999999,.999978,.999888,.999639,.999093,.99631,.994405,.990527,.985186,.978518,.969748,.959597,.948104,.935724,.923704,.912023,.901356,.89185,.883847,.87728,.872289,.868583,.865913,.864098,.862993,.862356,.862125,.862107,.862168,.862359,.86249,.86243,.862063,.861431,.860386,.85895,.85709,.854848,.852381,.849503,.846167,.842399,.838194,.833566,.828579,.823464,.817951,.812079,.805873,.79932,.792533,.785715,.778636,.77126,.763618,.755719,.747815,.739825,.731602,.723212,.714845,.706465,.697933,1,.999998,.999969,.999836,.999475,.997943,.995219,.99176,.986663,.979592,.970218,.959155,.946575,.933047,.920022,.907749,.896801,.887506,.880077,.874322,.870126,.867481,.865949,.865293,.865287,.865746,.866502,.867439,.868442,.869382,.870161,.870782,.871303,.871511,.871427,.870978,.870136,.868892,.867248,.865209,.862775,.859944,.857004,.853671,.849984,.845927,.841518,.836774,.83175,.826407,.821001,.815333,.809412,.803238,.796802,.790204,.783457,.776713,.769749,.762596,.755239,.74769,.740127,.732595,1,.999997,.99995,.999744,.999162,.996124,.992844,.987757,.980062,.969642,.957087,.942735,.927747,.913622,.900889,.890115,.881584,.875288,.870926,.868307,.867033,.866972,.867692,.86895,.870549,.87232,.874144,.875947,.877674,.879192,.880478,.881539,.882307,.882739,.882902,.882847,.882461,.881725,.880636,.879197,.877422,.875296,.872849,.870076,.866988,.863637,.860159,.856475,.852525,.848328,.843883,.839198,.834322,.829221,.823907,.818461,.812972,.807316,.801474,.795459,.789276,.783025,.776615,.770223,.999999,.999994,.999909,.999536,.997195,.994123,.988168,.979344,.967003,.951763,.934724,.917948,.902918,.890432,.880902,.874401,.870394,.868503,.868209,.869062,.870725,.873006,.875558,.87823,.880893,.883445,.885832,.888059,.890058,.891782,.893247,.89446,.895397,.896023,.89638,.896433,.896198,.895673,.894865,.893908,.8927,.891224,.889501,.887539,.885336,.882903,.880244,.877373,.874296,.871019,.867549,.863933,.860153,.856355,.852395,.848277,.844006,.839587,.835045,.830378,.825579,.820649,.815592,.810432,.999998,.999988,.999795,.998892,.994635,.98729,.975397,.958508,.938352,.917733,.8998,.885878,.876516,.8712,.869099,.869317,.871112,.87387,.87716,.880682,.884228,.887737,.891076,.894161,.896981,.899543,.901847,.903882,.905672,.907188,.908451,.90948,.910289,.910878,.911259,.91143,.911396,.911154,.910712,.910081,.909266,.908264,.907094,.905752,.904244,.902577,.900799,.898931,.896923,.894782,.892513,.890117,.8876,.884968,.882222,.879369,.876408,.873345,.870183,.866926,.863575,.86016,.856672,.853098,.999991,.999947,.999158,.992842,.980107,.95723,.928231,.901539,.882688,.872588,.869394,.870671,.874458,.879378,.884639,.88977,.894601,.898972,.90293,.906456,.909568,.912329,.91475,.916893,.918774,.920429,.921868,.92311,.924185,.925089,.925842,.926457,.926934,.927285,.927522,.927639,.92765,.927553,.927356,.927061,.926671,.926187,.925617,.924962,.924224,.923409,.922519,.921555,.920521,.919419,.918252,.917021,.915729,.914377,.912967,.911503,.909984,.908414,.906791,.905122,.903401,.901637,.899826,.897972,.987461,.940121,.871507,.898572,.916705,.926425,.931922,.935265,.937431,.938899,.93995,.940717,.941301,.941754,.942111,.942397,.942631,.942823,.942983,.943117,.943231,.943329,.943412,.943484,.943545,.943599,.943644,.943682,.943716,.943744,.943766,.943785,.943799,.943808,.943815,.943818,.943818,.943814,.943807,.943797,.943784,.943769,.943751,.94373,.943707,.943681,.943652,.943623,.943589,.943554,.943518,.943479,.943438,.943396,.943351,.943305,.943257,.943207,.943156,.943104,.943049,.942993,.942936,.942877]),64,64,p.AlphaFormat,p.FloatType,p.UVMapping,p.ClampToEdgeWrapping,p.ClampToEdgeWrapping,p.LinearFilter,p.NearestFilter,1);t.needsUpdate=!0,r.needsUpdate=!0,p.UniformsLib.LTC_MAT_TEXTURE=t,p.UniformsLib.LTC_MAG_TEXTURE=r;var n={ltcMat:{value:null},ltcMag:{value:null}};(0,c.default)(e.phong.uniforms,n),(0,c.default)(e.standard.uniforms,n),(0,c.default)(e.physical.uniforms,n)}(),e.exports=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.virtualPivotId=t.controllerRootId=t.virtualTargetId=t.vrCameraId=t.virtualCameraId=t.deleteNode=t.addNode=t.virtualNodes=void 0;var n,i,a=C(r(30)),o=C(r(13)),s=C(r(33)),l=C(r(2)),u=C(r(51)),c=C(r(6)),f=C(r(18));t.initNode=H,t.addOperator=$,t.get=ee,t.getVRCamera=te,t.setVRCamera=re,t.set=ne,t.merge=ie,t.replace=ae,t.multi=oe,t.touch=se,t.reparent=le,t.findParent=ue,t.findRoot=ce,t.clone=fe,t.oldNodeJSON=he,t.exportJSON=de,t.updateNodeTransform=function(e,t,r){var n=ue(e,t),i=(0,P.getWorldTransform)(e,n),a=new h.Vector3,o=new h.Quaternion,s=new h.Vector3,l=new h.Matrix4;if(l.copy(r),i){var u=new h.Matrix4;u.getInverse(i,!0),l.multiplyMatrices(u,l)}l.decompose(a,o,s);var c=(new h.Euler).setFromQuaternion(o,"ZYX");e.dispatch(ne([t,"Transform",0,"translation"],{x:a.x,y:a.y,z:a.z})),e.dispatch(ne([t,"Transform",0,"rotation"],{x:h.Math.radToDeg(c.x),y:h.Math.radToDeg(c.y),z:h.Math.radToDeg(c.z)}))},t.getEvalSceneGraph=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.get("sceneGraph");if(r._v===r._ev)return r;return(0,w.evaluateSceneGraph)(e,r,t),r},t.setContentStore=pe,t.saveIndex=ve,t.checkout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){return r.dispatch(ve()).then(function(){return me(r,e).then(function(){return r.dispatch(ge({toHEAD:e,options:t}))})})}},t.rebase=ye,t.undo=xe,t.getLastCommit=function(e){var t=e.get("sceneGraph"),r=t.history;return r&&r.length?t.commits[r[r.length-1]]:null},t.getHistory=function(e){var t=e.get("sceneGraph"),r=t.refs,n=r.HEAD,i=r.DETACHED_HEAD,a=n,o=[];for(;a;){var s=we(t,a),l=i?a===i:a===n;s?(o.push([a,s,l]),a=1===s.parents.length&&s.parents[0]):a=null}return o},t.fetchCommits=function(e){return function(t){return t.callApi({url:"/api/scene/"+e+"/commits"}).then(function(e){return t.dispatch(pe(e))})}},t.getCommit=function(e,t){return we(e.get("sceneGraph"),t)},t.redo=be,t.commit=function(){return function(e){var t=e.get("sceneGraph"),r=t.activeSceneId;return e.dispatch(ve()).then(function(n){var i=n.refs,a=n.commit,o=n.objects;if(a){var s=we(t,t.origin.HEAD),l=s?(0,T.default)(t,a,s):o;return l[i.INDEX]=o[i.INDEX],e.dispatch({type:F,payload:{refs:{HEAD:i.INDEX}}}),e.callApi({url:"https://clara.io/threehub/api/scene/"+r+"/commit",method:"POST",body:{objects:l,ref:i.INDEX}}).then(function(e){console.log("saved commit?",e)}).catch(function(e){console.log("handle api error",e)})}})}},t.syncToLatest=function(){return function(e){var t=e.get("sceneGraph"),r=t.activeSceneId;return e.callApi({url:"/api/scene/"+r+"/sync/"+t.refs.HEAD}).then(function(r){var n=r.objects,i=r.HEAD;if(i!==t.refs.HEAD)return e.dispatch(pe({objects:n,origin:{HEAD:i}})),e.dispatch(ye(i))})}},t.traverseHierarchy=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i=arguments[3];if(!i)return void console.error("traverseHierarchy: no callback provided");var a=t.get("sceneGraph");var o=a.activeSceneId;var s=a.nodes;var l=s[o]&&s[o].plugs.Properties;var u=l&&l[0]&&"Enable"===l[0].hierarchyVisibility;var c=r||(0,P.find)(t,"Objects");var f=s[c];if(!f)return;var h=(0,P.isVisible)(t,c);n&&!h||i(c);if(!n||!u||u&&h)for(var d=0;d<f.children.length;++d)e(t,f.children[d],n,i)},t.getCameraController=function(e){return e.get("sceneGraph").cameraController};var h=r(0),d=C(r(64)),p=(r(36),C(r(136))),m=r(120),v=C(r(50)),g=r(23),y=r(67),x=r(111),b=C(x),w=r(436),_=C(r(437)),M=C(r(435)),S=C(r(434)),T=C(r(433)),E=C(r(311)),P=r(4),A=r(19);function C(e){return e&&e.__esModule?e:{default:e}}var R="SET",I="MERGE",O="REPLACE",L="MULTI",D="REPARENT",N="ADD_OPERATOR",V="TOUCH",F="SET_CONTENT_STORE",B="VERIFY",U="cccccccc-cccc-1ccc-accc-cccccccccccc",k="bbbbbbbb-bbbb-0bbb-zbbb-bbbbbbbbbbbb",z="dddddddd-dddd-0ddd-addd-dddddddddddd",G="eeeeeeee-eeee-4eee-feee-eeeeeeeeeeee",j="ffffffff-ffff-3fff-gfff-ffffffffffff";t.virtualNodes=(n={},(0,f.default)(n,U,!0),(0,f.default)(n,k,!0),(0,f.default)(n,z,!0),(0,f.default)(n,j,!0),n);function H(e){var t={},r=e.warnings||[],n=e.id,i=e.children,a=e.name,o=e.type,s=e.parent;return(0,c.default)(e.plugs).forEach(function(n){t[n]=e.plugs[n].map(function(e){var t=e.type;return(0,x.lookupOperator)(n,t,r).init(t,e,e.name)})}),{id:n,children:i,name:a,type:o,parent:s,plugs:t,warnings:r,_v:0}}function W(e){var t=e.id,r=e.name,n=e.type,i=e.children,a=e.parent,o=e.plugs,s=[];return{id:t,name:r,type:n,parent:a,warnings:s,_v:0,children:i||[],plugs:(0,p.default)(function(e,t){return e.map(function(e){return function(e,t,r){var n=void 0,i=void 0,a=void 0;if(Array.isArray(t)){var o=(0,u.default)(t,3);n=o[0],i=o[1],a=o[2]}else n=t.type,a=t.name,i=t;return(0,x.lookupOperator)(e,n,r).init(n,i,a)}(t,e,s)})},o)}}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.nodes[U]&&!t.force||(e.nodes[U]=W({id:U,name:"CAMERA",type:"Camera",plugs:{Camera:[["Camera",{}]],Transform:[["Transform",{}]],Properties:[["CameraProperties",{}]]}})),e.nodes[k]&&!t.force||(e.nodes[k]=W({id:k,name:"VR CAMERA",type:"Camera",plugs:{Camera:[["Camera",{fieldOfView:45}]],Transform:[["Transform",{translation:{x:0,y:1.6,z:1}}]],Properties:[["CameraProperties",{}]]}})),e.nodes[z]&&!t.force||(e.nodes[z]=W({id:z,name:"VIRTUAL TARGET NULL",type:"Null",plugs:{Transform:[["Transform",{}]]}})),e.nodes[G]&&!t.force||(e.nodes[G]=W({id:G,name:"CONTROLER ROOT NULL",type:"Null",plugs:{Transform:[["Transform",{}]]}})),e.nodes[j]&&!t.force||(e.nodes[j]=W({id:j,name:"VIRTUAL PIVOT NULL",type:"Null",plugs:{Transform:[["Transform",{}]]}}))}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(e,{_v:0,nodes:{},fileReferences:{to:{},from:{}},nodeReferences:{to:{},from:{}},cameraReferences:{},worldTransformReferences:{},evaluatedNodes:{},cameraController:new E.default,loaded:!1,activeSceneId:null,objects:{},refs:{},origin:{},commits:{},_ev:0,_sv:0})}function Y(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&(t._changedPlug?t._changedPlug!==r&&(t._changedPlug=!0):t._changedPlug=r,t._v+=1),e._v+=1}function Z(e,t,r){var n=t.path,i=t.value,a=r&&r.ignoreErrors;if(!n.length||n.length<2)throw new Error("SET requires a path with length 2 or 4");var o=(0,u.default)(n,4),s=o[0],l=o[1],c=o[2],f=o[3],h=e.nodes[s];if(2===n.length&&"name"===n[1])h.name=i,Y(e,h);else{var d=h&&h.plugs[l],p=d&&d[c];if(!p){if(a)return;throw new Error("Setting data on unknown operator: "+n.join(","))}b.default[l][p.type].set(p,f,i)&&Y(e,h,l)}return e}var J=(0,v.default)({},(i={},(0,f.default)(i,m.ActionTypes.INIT,function(e){return q()}),(0,f.default)(i,V,function(e,t){return t.forEach(function(t){var r=e.nodes[t];Y(e,r)}),e}),(0,f.default)(i,R,Z),(0,f.default)(i,I,function(e,t){var r=t.path,n=t.attrs;if(!r.length||3!==r.length)throw new Error("MERGE requires a path with length 3");if("object"!==(void 0===n?"undefined":(0,s.default)(n)))throw new Error("MERGE requires an object to merge in");var i=(0,u.default)(r,3),a=i[0],l=i[1],f=i[2],h=e.nodes[a],d=h&&h.plugs[l],p=d&&d[f],m=p&&b.default[l][p.type];if(!m)throw new Error("Setting data on unknown operator: "+r.join(","));var v=!0,g=!1,y=void 0;try{for(var x,w=(0,o.default)((0,c.default)(n));!(v=(x=w.next()).done);v=!0){var _=x.value;m.set(p,_,n[_])}}catch(e){g=!0,y=e}finally{try{!v&&w.return&&w.return()}finally{if(g)throw y}}return Y(e,h,l),e}),(0,f.default)(i,O,function(e,t){var r=t.id,n=t.node,i=e.nodes[r];if(i){var a=i._v;return e.nodes[r]=n,n._v=a,Y(e,n),e}}),(0,f.default)(i,y.ADD_NODE,function(e,t){var r,n=t.id,i=t.parent,a=i&&e.nodes[i];if(i&&!a)throw new Error("Unknown parent: '"+i+"'");if(e.nodes[n])throw new Error("Adding a node that already exists: "+n);return e.nodes[n]=t.node?((r=t.node).hasOwnProperty("_v")||(r._v=0),r):W(t),i&&!a.children&&(a.children=[]),i&&-1===a.children.indexOf(n)&&a.children.push(n),Y(e,a),e}),(0,f.default)(i,y.DELETE_NODE,function(e,t){var r=function t(r){var n=e.nodes[r];if(n){var i=!0,a=!1,s=void 0;try{for(var l,u=(0,o.default)(n.children||[]);!(i=(l=u.next()).done);i=!0)t(l.value)}catch(e){a=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}var f=e.nodeReferences.from[r];(0,c.default)(f||{}).forEach(function(t){var r=JSON.parse(t);Z(e,{path:r,value:null},{ignoreErrors:!0})}),e.cameraReferences[r]&&delete e.cameraReferences[r],e.worldTransformReferences[r]&&delete e.worldTransformReferences[r],delete e.nodes[r]}return n}(t);if(!r)return e;var n=r.parent&&e.nodes[r.parent];if(n){var i=n.children.indexOf(t);-1!==i&&n.children.splice(i,1)}return Y(e,n),e}),(0,f.default)(i,N,function(e,t){var r=t.id,n=t.plug,i=t.op,a=e.nodes[r];if(!a)throw new Error("Unknown node: "+r);var o=a.plugs[n];if(!o)throw new Error("Unknown plug: "+n);if(!Array.isArray(i))throw new Error("Expect op to be an array of 2 or 3");var s=(0,u.default)(i,3),l=s[0],c=s[1],f=s[2],h=(0,x.lookupOperator)(n,l,a.warnings);return o.push(h.init(l,c,f)),Y(e,a,n),e}),(0,f.default)(i,L,function(e,t){var r=e._v;for(var n in t){var i=t[n];i.type===R&&Z(e,i.payload)}return e._v=r+1,e}),(0,f.default)(i,D,function(e,t){var r=t.parentId,n=t.childIds,i=e.nodes[r];return i?(n.slice().forEach(function(t){var n=e.nodes[t];if(n){var a=n&&n.parent,o=a&&e.nodes[a],s=o&&o.children?o.children.indexOf(t):-1;-1!==s&&(o.children.splice(s,1),Y(e,o)),i.children.push(t),n.parent=r,Y(e,n)}}),Y(e,i),e):(console.warn("Unknown parent for reparent: "+r),e)}),(0,f.default)(i,F,function(e,t){var r=t.objects,n=t.refs,i=t.origin;return r&&(0,l.default)(e.objects,r),i&&(0,l.default)(e.origin,i),n&&(0,l.default)(e.refs,n),e}),(0,f.default)(i,y.USE_SCENE,function(e,t){return e.activeSceneId=t,e}),(0,f.default)(i,B,function(e){return initVirtualNodes(e),e}),(0,f.default)(i,y.LOAD_SCENE,function(e,t){var r=t.scene,n=t.nodes;if(r)throw new Error("Loading incompatible scene format");var i=(0,p.default)(H,JSON.parse(n));return(0,l.default)(e.nodes,i),X(e),Y(e),e}),(0,f.default)(i,y.CLEAR_SCENE,function(e,t){return q(e),X(e,{force:!0}),e}),(0,f.default)(i,y.LOADED_FILE,function(e,t){if(e.fileReferences.from[t]){var r=!0,n=!1,i=void 0;try{for(var a,s=(0,o.default)((0,c.default)(e.fileReferences.from[t]));!(r=(a=s.next()).done);r=!0){var l=a.value,f=JSON.parse(l),h=(0,u.default)(f,3),d=h[0],p=h[1];h[2];Y(e,e.nodes[d],p)}}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}}return e}),i));function Q(e){var t=e.id,r=e.name,n=e.type,i=e.plugs,a=e.parent;return t||(t=(0,d.default)()),r=r||t,{type:y.ADD_NODE,payload:{id:t,name:r,type:n,plugs:i,parent:a},resolve:t}}function K(e){return{type:y.DELETE_NODE,payload:e}}function $(e,t,r){return{type:N,payload:{id:e,plug:t,op:r}}}function ee(e,t){if(!Array.isArray(t))throw new Error("Expect path to be an array");var r=e.get("sceneGraph").nodes[t[0]];if(t.length>=2){if("name"===t[1]||"type"===t[1])return r&&r[t[1]];r=r&&r.plugs[t[1]]}(t.length>=3&&(r=r&&r[t[2]]),t.length>=4&&r)&&(r=(0,x.lookupOperator)(t[1],r.type,[]).get(r,t[3]));return r}function te(e){return ee(e,[(0,A.getSceneId)(e),"Player",0,"vrCamera"])}function re(e){return function(t){var r=[(0,A.getSceneId)(t),"Player",0,"vrCamera"];t.dispatch(ne(r,e))}}function ne(e,t){return{type:R,payload:{path:e,value:t},meta:{remote:!0}}}function ie(e,t){return{type:I,payload:{path:e,attrs:t}}}function ae(e,t){return{type:O,payload:{id:e,node:t}}}function oe(e){return{type:L,payload:e}}function se(e){var t=Array.isArray(e)?e:[e];return{type:V,payload:t}}function le(e,t){return{type:D,payload:{parentId:e,childIds:t}}}function ue(e,t){var r=e.get("sceneGraph").nodes[t];return r&&r.parent}function ce(e,t){var r=e.get("sceneGraph").nodes[t],n=r&&r.parent;return n?ce(e,n):t}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).cloneDependencies,n=e.reduce(function(e,t){return e[t]=!0,e},{}),i={};return function(s){var u=s.get("sceneGraph");r&&e.forEach(function e(r){var a=u.nodes[r];a&&a.name;if(a&&a.plugs){var l=!0,f=!1,h=void 0;try{for(var d,p=(0,o.default)((0,c.default)(a.plugs));!(l=(d=p.next()).done);l=!0){var m=d.value,v=a.plugs[m],g=!0,y=!1,x=void 0;try{for(var w,_=(0,o.default)(v);!(g=(w=_.next()).done);g=!0){var M=w.value,S=b.default[m][M.type];if(S){var T=!0,E=!1,P=void 0;try{for(var A,C=(0,o.default)(S.referenceKeys);!(T=(A=C.next()).done);T=!0){var R=M[A.value];!R||n[R]||t[R]||(n[R]=!0,e(R))}}catch(e){E=!0,P=e}finally{try{!T&&C.return&&C.return()}finally{if(E)throw P}}var I=!0,O=!1,L=void 0;try{for(var D,N=(0,o.default)(S.fileReferenceKeys);!(I=(D=N.next()).done);I=!0){var V=M[D.value];V&&s.getIn(["assets","assets",V])&&(i[V]=!0)}}catch(e){O=!0,L=e}finally{try{!I&&N.return&&N.return()}finally{if(O)throw L}}}}}catch(e){y=!0,x=e}finally{try{!g&&_.return&&_.return()}finally{if(y)throw x}}}}catch(e){f=!0,h=e}finally{try{!l&&p.return&&p.return()}finally{if(f)throw h}}}}),(0,c.default)(n).forEach(function(e){return n[e]=(0,d.default)()}),(0,c.default)(i).forEach(function(e){return i[e]=(0,d.default)()}),(0,c.default)(n).forEach(function(e){var r=u.nodes[e],a=function(e){var t={},r=!0,n=!1,i=void 0;try{for(var a,s=(0,o.default)((0,c.default)(e.plugs));!(r=(a=s.next()).done);r=!0){var u=a.value;t[u]=e.plugs[u].map(function(e){return(0,l.default)({},e)})}}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}return{id:(0,d.default)(),name:e.name,type:e.type,parent:e.parent,children:[].concat(e.children),plugs:t,_v:1}}(r);a.id=n[e];var f=r.parent,h=f&&(n[f]||t[f]||f);a.parent=h,a.children=[];var p=!0,m=!1,v=void 0;try{for(var g,x=(0,o.default)(r.children);!(p=(g=x.next()).done);p=!0){var w=g.value;n[w]?a.children.push(n[w]):t[w]&&a.children.push(t[w])}}catch(e){m=!0,v=e}finally{try{!p&&x.return&&x.return()}finally{if(m)throw v}}s.dispatch({type:y.ADD_NODE,payload:{id:n[e],parent:h,node:function(e){var r=e,a=!0,s=!1,l=void 0;try{for(var u,f=function(){var a=u.value;e.plugs[a].forEach(function(e,s){var l=b.default[a][e.type];if(l){var u=!0,c=!1,f=void 0;try{for(var h,d=(0,o.default)(l.referenceKeys);!(u=(h=d.next()).done);u=!0){var p=h.value,m=e[p],v=m&&(n[m]||t[m]);v&&(r.plugs[a][s][p]=v)}}catch(e){c=!0,f=e}finally{try{!u&&d.return&&d.return()}finally{if(c)throw f}}var g=!0,y=!1,x=void 0;try{for(var w,_=(0,o.default)(l.fileReferenceKeys);!(g=(w=_.next()).done);g=!0){var M=w.value,S=e[M];S&&i[S]&&(r.plugs[a][s][M]=i[S])}}catch(e){y=!0,x=e}finally{try{!g&&_.return&&_.return()}finally{if(y)throw x}}}})},h=(0,o.default)((0,c.default)(e.plugs));!(a=(u=h.next()).done);a=!0)f()}catch(e){s=!0,l=e}finally{try{!a&&h.return&&h.return()}finally{if(s)throw l}}return r}(a)}})});var f=ce(s,n[(0,c.default)(n)[0]]);return(0,c.default)(i).forEach(function(e){var t=s.getIn(["assets","assets",e]);t&&s.dispatch((0,g.addFile)(t.set("id",i[e]).set("sceneId",f).toJS()))}),a.default.resolve(n)}}function he(e){var t=(0,c.default)(e.plugs).map(function(t){return{type:t,operators:e.plugs[t].map(function(e){return(0,x.lookupOperator)(t,e.type,[]).export(e)})}});return{_id:e.id,name:e.name,type:e.type,plugs:t,nodes:[]}}function de(e,t){var r=void 0,n={},i=e.get("sceneGraph");return t.forEach(function(e){var t=i.nodes[e];if(t){var a=he(t);n[a._id]=a,r||(r=a),t.parent&&n[t.parent]&&n[t.parent].nodes.push(a)}}),r}function pe(e){return{type:F,payload:e}}function me(e,t){var r=e.get("sceneGraph"),n=we(r,t);return r.objects[n.root]?a.default.resolve(!0):e.callApi({url:"/api/scene/"+r.activeSceneId+"/objects/"+r.refs.HEAD+"/"+t}).then(function(t){return e.dispatch(pe(t))})}function ve(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){var t=e.get("sceneGraph");if(!t.refs.HEAD&&!(0,c.default)(t.nodes).length)return a.default.resolve();var r=(0,_.default)(e),n=r.objects,i=r.commit,o=r.commitHash,s=we(t,t.refs.HEAD);if(s&&i.root===s.root)return e.dispatch(pe({refs:{INDEX:t.refs.HEAD}}));(0,l.default)({},t.objects,n);return e.dispatch(pe({objects:n,refs:{INDEX:o},commit:i}))}}function ge(e){var t=e.toHEAD,r=e.secondHEAD,n=e.fromHEAD,i=e.options;return function(e){var a=e.get("sceneGraph");n||(n=a.refs.INDEX);var o=n&&we(a,n),s=we(a,t),u=r&&we(a,r);(0,M.default)(a,s,o,u,{changeNode:function(t){var r=t.id,n=t.plugs,i=a.nodes[r];i.plugs=(0,l.default)({},i.plugs,n),e.dispatch(ae(r,H(i)))},addNode:function(t){return e.dispatch(Q(t))},deleteNode:function(t){return e.dispatch(K(t))},addFile:function(t){return e.dispatch((0,g.addFile)(t))}}),(0,S.default)(a,s,o,u,function(t,r){e.dispatch(ne(t,r))}),e.dispatch({type:B}),i.detached?e.dispatch({type:F,payload:{refs:{DETACHED_HEAD:t}}}):e.dispatch({type:F,payload:{refs:{HEAD:t,DETACHED_HEAD:null}}}),e.dispatch({type:V})}}function ye(e){return function(t){var r=t.get("sceneGraph"),n=r.refs.HEAD;return t.dispatch(ve()).then(function(){var i=r.refs.INDEX;return me(t,e).then(function(){return n===i?t.dispatch(ge({toHEAD:e,options:{}})):(t.dispatch(ge({toHEAD:n,options:{}})),t.dispatch(ge({toHEAD:e,fromHEAD:n,secondHEAD:i,options:{}})))})})}}function xe(e){return function(t){var r=t.get("sceneGraph").history,n=e||r[1];if(!n)return console.log("Nothing to undo");t.dispatch(loadFromContent(n))}}function be(){return function(e){console.log("redo")}}function we(e,t){if(!e.commits[t]){if(!e.objects[t])return null;e.commits[t]=JSON.parse(e.objects[t]),e.commits[t].createdAt=new Date(e.commits[t].createdAt)}return e.commits[t]}t.addNode=Q,t.deleteNode=K;var _e={reducer:J,actions:{set:ne,merge:ie,multi:oe,addNode:Q,deleteNode:K,reparent:le,clone:fe,addOperator:$,undo:xe,redo:be,saveIndex:ve,touch:se,setVRCamera:re},selectors:{get:ee,exportJSON:de,getVRCamera:te}};t.default=_e,t.virtualCameraId=U,t.vrCameraId=k,t.virtualTargetId=z,t.controllerRootId=G,t.virtualPivotId=j},function(e,t){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(34),i=r(11),a=r(60),o=r(70),s=function(e,t,r){var l,u,c,f=e&s.F,h=e&s.G,d=e&s.S,p=e&s.P,m=e&s.B,v=e&s.W,g=h?i:i[t]||(i[t]={}),y=g.prototype,x=h?n:d?n[t]:(n[t]||{}).prototype;for(l in h&&(r=t),r)(u=!f&&x&&void 0!==x[l])&&l in g||(c=u?x[l]:r[l],g[l]=h&&"function"!=typeof x[l]?r[l]:m&&u?a(c,n):v&&x[l]==c?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):p&&"function"==typeof c?a(Function.call,c):c,p&&((g.virtual||(g.virtual={}))[l]=c,e&s.R&&y&&!y[l]&&o(y,l,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,r){e.exports={default:r(389),__esModule:!0}},function(e,t,r){"use strict";function n(){this.byName={},this.namesByIndex=[]}var i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={constructor:n,get length(){return this.namesByIndex.length},set:function(e,t){var r=this.byName;e in r==!1&&this.namesByIndex.push(e),r[e]=t}},n.Iterator=function(e){this.reset(e||null)},n.Iterator.prototype={constructor:n.Iterator,reset:function(e){return void 0!==e&&(this.container=e),this.name=null,this.index=-1,this.element=null,this},next:function(){var e=this.container;if(null===e)return!1;var t=e.namesByIndex,r=++this.index;return r>=t.length?(this.name=null,!1):(this.element=e.byName[this.name=t[r]],!0)},add:function(e,t){var r=this.namesByIndex;if(-1!==r.indexOf(e))throw Error("ObjectsByName: Name '"+e+"' not unique!");return r.push(e),this.byName[e]=t,this}},n.shallowClone=(i=new n.Iterator,function(e){var t=new n;if(!e)return t;var r=t.byName,a=t.namesByIndex;for(a.length=e.namesByIndex.length,i.reset(e);i.next();){var o=i.name;r[o]=i.element,a[i.index]=o}return i.reset(null),t})},function(e,t,r){var n=r(17);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(121),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e,t,r){return t in e?(0,a.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCENE_PHASES=void 0;var n,i=x(r(2)),a=x(r(38)),o=x(r(30)),s=x(r(18));t.reportError=k,t.useScene=z,t.getSceneId=G,t.loadScene=j,t.errorLoadingScene=function(e){return k("Error Loading Scene")},t.markRenderingScene=function(){return{type:M}},t.markRenderedScene=H,t.prefetch=q,t.getFetchedHash=Y,t.fetch=Z,t.savePublished=J,t.fetchAndUse=Q,t.fetchForEditing=function(e){return function(t){t.get("sceneGraph");return t.dispatch(Q(e,null,{threehub:!0})).then(function(){var r=t.getSocketApi();r&&K(t,r,e)})}},t.loadingProgress=$,t.isAssetLoading=function(e,t){return!!e.getIn(["sceneIO","loadingFiles",t])},t.areAssetsLoaded=ee,t.isSceneLoaded=te,t.isSceneRendered=re,t.markPreloaded=function(){return function(e){(0,v.initStartingCamera)(e),le(e,e.getIn(["sceneIO","preloadCommands"]),T,g.PRELOADED_SCENE,{store:e},function(){return pe(e,null,!0)})}},t.preloadCommand=ne,t.postLoadSceneGraphCommand=ie,t.markLoaded=ae,t.markLoadingFile=oe,t.markLoadedFile=se,t.markPostRendered=function(){return function(e){le(e,e.getIn(["sceneIO","postRenderCommands"]),P,A,{store:e})}},t.convertFromJSON=function(e){return function(t){var r,n;ue(t,e,null)(e),function(e,t){t.forEach(function(t){e.dispatch((0,p.addFile)((0,i.default)({id:t._id},(0,f.default)(["_id","__v"],t))))})}(t,e.files),t.dispatch((r=e._id,n=(0,l.Map)({owner:e.owner,v1version:e.version}),{type:L,payload:{id:r,meta:n}}));var a=(0,d.get)(t,{plug:"Timeline",property:"useBufferClips"});(0,c.default)(function(e,r){a||t.dispatch((0,m.addClip)(e,r)),t.dispatch((0,m.makeReducedClip)(e,r))},e.clips)}},t.writeScene=ce,t.exportJSON=function(e){return{scene:e.get("sceneGraph").toJS(),assets:(0,p.getActiveAssets)(e).toJS()}},t.numErrors=fe,t.getErrors=he,t.getScenePhase=de,t.whenLoaded=pe,t.clearScene=me,t.bumpV1Version=function(e){return{type:N,payload:{id:e}}},t.getV1Version=function(e,t){return e.getIn(["sceneIO","meta",t,"v1version"])},t.markExternalProgress=ve;var l=r(36),u=x(r(50)),c=x(r(136)),f=x(r(638)),h=r(10),d=r(4),p=r(23),m=r(68),v=r(8),g=r(67),y=r(312);function x(e){return e&&e.__esModule?e:{default:e}}var b="LOADING_SCENEGRAPH",w="LOADED_SCENEGRAPH",_="ERROR_LOADING_SCENEGRAPH",M="RENDERING_SCENE",S="RENDERED_SCENE",T="PRELOADING_SCENE",E="LOADED_SCENE",P="POST_RENDERING_SCENE",A="POST_RENDERED_SCENE",C="SCENE_ERROR",R="PRELOAD_COMMAND",I="POSTLOAD_SCENEGRAPH_COMMAND",O="SET_FETCHED_HASH",L="SET_META",D="SET_PROGRESS",N="BUMP_V1_VERSION",V=t.SCENE_PHASES={FAILED:-1,UNKNOWN:0,LOADING_SCENEGRAPH:1,LOADED_SCENEGRAPH:2,RENDERING:3,PRELOADING:4,PRELOADED:5,LOADED:6,RENDERED:7,POSTRENDERING:8,POSTRENDERED:9},F=(0,l.Map)({id:null,errors:(0,l.List)(),phase:V.UNKNOWN,progress:0,loadingFiles:(0,l.Map)(),loadedFiles:(0,l.Map)(),loaded:!1,postLoadSceneGraphCommands:(0,l.List)(),preloadCommands:(0,l.List)([]),postRenderCommands:(0,l.List)([m.initPhysics]),fetchedHashes:(0,l.Map)(),meta:(0,l.Map)(),fetchAssetsStart:null});function B(e,t){if(e.get("phase")!==V.RENDERING)return e;var r=e.get("loadingFiles").size,n=e.get("loadedFiles").size,i=r+n,a=0===i?1:(1+n/i)/2;return a<1?(t("loading",a),e.set("progress",a)):(t("loading",1),e.set("progress",1))}var U="/api/v2";function k(e){return{type:C,payload:e}}function z(e){return function(t){return t.dispatch({type:g.USE_SCENE,payload:e}),le(t,t.getIn(["sceneIO","postLoadSceneGraphCommands"])),o.default.resolve(e)}}function G(e){return e.getIn(["sceneIO","id"])}function j(e,t,r){return function(n){n.trackTiming("playerv2","Fetch Duration",r);var i=n.read(t);n.trackEvent("playerv2","Scene","Fetch Size",t.length);var a=Math.round(t.length/r);n.trackEvent("playerv2","Scene","Download Rate",a),n.logPageView("/player/v2/"+e,r);var o=i.meta&&i.meta.get("owner");return o&&n.trackEvent("playerv2","Scene Owner",o),n.dispatch({type:g.LOAD_SCENE,payload:i}).then(function(){return n.dispatch({type:g.INITIALIZE_SCENE,payload:{id:e,store:n}})}).then(function(){return e})}}function H(e){return function(t){(0,h.touch)(e),t.dispatch({type:S})}}var W=1e4,X=3e4;function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.waitForPublish,i=r.ignoreErrorMessage;return function(a){if(a.getIn(["sceneGraph",e]))return o.default.resolve(!0);if(r.threehub)return a.dispatch(function(e,t){return function(t){return t.callApi({types:[b,w,_],url:U+"/scene/"+e,payload:e}).then(function(r){t.dispatch(z(e));var n=r.HEAD,i=r.objects;return t.dispatch((0,h.setContentStore)({objects:i,origin:{HEAD:n}})),t.dispatch((0,h.checkout)(n))})}}(e));var s=t,l="https://clara.io/api/scenes/"+e+"/published";l+="?wait="+(n?"true":"false"),r.pinned&&(l+="&pinned=true");var u=t?(0,p.fetchText)(t)(a):a.callApi({url:l,contentType:"text",types:["IGN","IGN",_],queryKey:"SCENE"+e,payload:e,onReadyStateChange:function(e){e.readyState>1&&(clearTimeout(c),clearTimeout(f))},ignoreCache:!0,ignoreErrorMessage:i,responseURL:function(e){var t=e.split("/");s=t[t.length-1]}});var c=setTimeout(function(){"undefined"==typeof __SERVER_RENDER?a.error(new Error("Slow Load"),null,{sceneId:e}):console.log("Slow Load")},W),f=setTimeout(function(){a.error(new Error("Load Failure"),null,{sceneId:e})},X);return a.dispatch(oe(e)),a.dispatch({type:b,payload:e}),u.then(function(t){return clearTimeout(c),clearTimeout(f),a.dispatch({type:w,payload:e}),a.dispatch(se(e)),a.dispatch({type:O,payload:{sceneId:e,fetchedHash:s}}),t})}}function Y(e,t){return e.getIn(["sceneIO","fetchedHashes",t||G(e)])}function Z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new Date;return function(i){return i.getIn(["sceneGraph",e])?o.default.resolve(!0):i.dispatch(q(e,t,r)).then(function(t,r){return i.dispatch(j(e,t,new Date-n))})}}function J(){return function(e){var t=ce(e),r=G(e);return e.callApi({contentType:"text",url:"https://clara.io/api/scenes/"+r+"/published",method:"PUT",body:(0,a.default)({content:t})})}}function Q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){return n.dispatch(Z(e,t,r)).then(function(){return n.dispatch(z(e))})}}function K(e,t,r){t.subscribe("notify:"+r).watch(function(t){console.log("notify scene: ",r,t);var n=t.origin;n&&n.HEAD!==sceneGraph.refs.HEAD&&(console.log("sync to latest: ",n.HEAD,"from",sceneGraph.refs.HEAD),e.dispatch((0,h.syncToLatest)()))})}function $(e){var t=e.getIn;e.dispatch;return t(["sceneIO","progress"])}function ee(e){return e.getIn(["sceneIO","phase"])>=V.RENDERING&&0===e.getIn(["sceneIO","loadingFiles"]).size}function te(e){return e.getIn(["sceneIO","loaded"])}function re(e){return e.getIn(["sceneIO","phase"])>=V.RENDERED}function ne(e){return{type:R,payload:e}}function ie(e){return{type:I,payload:e}}function ae(){return{type:E}}function oe(e){return{type:g.LOADING_FILE,payload:e}}function se(e){return{type:g.LOADED_FILE,payload:e}}function le(e,t,r,n,i,a){var s=function(){return n?e.dispatch({type:n,payload:{id:G(e),store:e}}):o.default.resolve(!0)};if(!t.size)return s();r&&e.dispatch({type:r}),o.default.all(t.map(function(e){return o.default.resolve(e(i))}).toArray()).then(function(){if(a)return a(i)}).then(function(){return s()}).catch(function(e){return console.log("Caught plugin error: ",e.message),console.log("Caught plugin error, stack: ",e.stack),s()})}var ue=function e(t,r,n){return function(i){var a=i._id,o=i.name,s=i.type,l=function(e){var t={};return e.forEach(function(e){t[e.type]=e.operators.map(function(e){var t=e.name;return[e.type||t,(0,f.default)(["_id","primitive","name","type"],e),t]})}),t}(i.plugs);t.dispatch((0,h.addNode)({id:a,name:o,type:s,plugs:l,parent:n})),i.nodes.forEach(e(t,r,a))}};function ce(e,t){var r=(0,h.getEvalSceneGraph)(e),n=G(e),o={},s=t&&"function"==typeof t?t:function(){return!0};return function e(t){if(!s(r.nodes[t],r.evaluatedNodes[t]))return!1;o[t]=(0,i.default)({},r.nodes[t]);var n=o[t]&&o[t].children||[];return o[t].children=[].concat(n).filter(e),!0}(n),e.write({id:n,meta:function(e,t){var r=t||G(e);return e.getIn(["sceneIO","meta",r])}(e),nodes:(0,a.default)(o),assets:(0,p.getActiveAssets)(e),clips:e.getIn(["animation","clips"]),bufferClips:e.getIn(["animation","bufferClips"])})}function fe(e){return e.getIn(["sceneIO","errors"]).size}function he(e){return e.getIn(["sceneIO","errors"])}function de(e){return e.getIn(["sceneIO","phase"])}function pe(e,t,r){var n=t||function(){},i=0;return new o.default(function(t,a){e.getEvaluatedTranslator();!function a(){if(!r&&de(e)<V.PRELOADED||!ee(e)){var o=e.getIn(["sceneIO","loadingFiles"]).size;return o!==i&&(n(o),i=o),setTimeout(a,100)}e.getEvaluatedTranslator(),n(0),t()}()})}function me(){return function(e){var t=e.getTranslator();return t&&t.reset(),(0,y.clearCache)(),e.dispatch({type:g.CLEAR_SCENE})}}function ve(e){return{type:D,payload:e}}var ge={reducer:(0,u.default)(F,(n={},(0,s.default)(n,g.USE_SCENE,function(e,t){new Date,e.get("fetchAssetsStart");return e.set("id",t).set("fetchAssetsStart",new Date)}),(0,s.default)(n,b,function(e,t){return e.get("loaded")||e.get("id")&&e.get("id")!==t?e:e.set("phase",V.LOADING_SCENEGRAPH).set("progress",.25).set("fetchSceneStart",new Date)}),(0,s.default)(n,w,function(e,t,r){return(0,r.trackTiming)("playerv2","Request Duration",new Date-e.get("fetchSceneStart")),e.get("loaded")||e.get("id")&&e.get("id")!==t?e:e.set("phase",V.LOADED_SCENEGRAPH).set("progress",.5)}),(0,s.default)(n,_,function(e,t,r){var n=r.action,i=n.error,a=n.ignoreErrorMessage,o="Error Loading Scene: "+i.status+" "+i.err.responseText+" "+i.err.responseURL;return a?e:e.updateIn(["errors"],(0,l.List)(),function(e){return e.push(o)})}),(0,s.default)(n,M,function(e,t,r){var n=r.createEvent;return B(e.set("phase",V.RENDERING),n)}),(0,s.default)(n,g.LOADING_FILE,function(e,t){return e.setIn(["loadingFiles",t],!0)}),(0,s.default)(n,g.LOADED_FILE,function(e,t,r){var n=r.createEvent;return B(e.deleteIn(["loadingFiles",t]).setIn(["loadedFiles",t],!0),n)}),(0,s.default)(n,D,function(e,t,r){return(0,r.createEvent)("loading",t),e.set("progress",t)}),(0,s.default)(n,g.LOADING_FILE_ERROR,function(e,t,r){var n=r.createEvent;return B(e.deleteIn(["loadingFiles",t]),n)}),(0,s.default)(n,T,function(e,t,r){return(0,r.createEvent)("preloading"),e.set("phase",V.PRELOADING)}),(0,s.default)(n,g.PRELOADED_SCENE,function(e,t,r){return(0,r.createEvent)("preloaded"),e.set("phase",V.PRELOADED)}),(0,s.default)(n,R,function(e,t){return e.updateIn(["preloadCommands"],(0,l.List)(),function(e){return e.push(t)})}),(0,s.default)(n,I,function(e,t){return e.updateIn(["postLoadSceneGraphCommands"],(0,l.List)(),function(e){return e.push(t)})}),(0,s.default)(n,E,function(e,t,r){var n=r.createEvent,i=r.trackEvent,a=r.trackTiming;return i("playerv2","Assets","Fetch Count",e.get("loadedFiles").size),a("playerv2","Assets Loaded",new Date-e.get("fetchAssetsStart")),n("loaded"),e.set("loaded",!0).set("phase",V.LOADED)}),(0,s.default)(n,S,function(e,t,r){return(0,r.createEvent)("rendered"),e.set("phase",V.RENDERED)}),(0,s.default)(n,P,function(e,t,r){r.createEvent;return e.set("phase",V.POSTRENDERING)}),(0,s.default)(n,A,function(e,t,r){return(0,r.createEvent)("postRendered"),e.set("phase",V.POSTRENDERED)}),(0,s.default)(n,C,function(e,t){return e.updateIn(["errors"],(0,l.List)(),function(e){return e.push(t)})}),(0,s.default)(n,g.CLEAR_SCENE,function(e){return F}),(0,s.default)(n,O,function(e,t){var r=t.sceneId,n=t.fetchedHash;return e.setIn(["fetchedHashes",r],n)}),(0,s.default)(n,L,function(e,t){var r=t.id,n=t.meta;return e.setIn(["meta",r],n)}),(0,s.default)(n,g.LOAD_SCENE,function(e,t){var r=t.id,n=t.meta;return r&&n?e.setIn(["meta",r],n):e}),(0,s.default)(n,N,function(e,t){var r=t.id,n=e.getIn(["meta",r,"v1version"]);return n?e.setIn(["meta",r,"v1version"],n+1):e}),n)),actions:{fetch:Z,fetchAndUse:Q,loadScene:j,useScene:z,reportError:k,prefetch:q,preloadCommand:ne,postLoadSceneGraphCommand:ie,savePublished:J,clearScene:me,markExternalProgress:ve,markLoaded:ae,markRenderedScene:H},selectors:{getFetchedHash:Y,isSceneLoaded:te,isSceneRendered:re,loadingProgress:$,getErrors:he,numErrors:fe,getSceneId:G,writeScene:ce,whenLoaded:pe}};t.default=ge},function(e,t,r){var n=r(237)("wks"),i=r(86),a=r(16).Symbol,o="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(r(137)),i=h(r(13)),a=h(r(47)),o=h(r(58));t.getFaceUntilWithoutHoles=d,t.getLoopLengths=function(e,t){for(var r=e.loopRangeOffsets,n=0,i=0;i<t.length;i++){var a=t[i],o=r[a+1]-r[a];n+=o}return n};var s=r(0),l=h(r(3)),u=h(r(183)),c=r(115),f=h(r(179));function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){var n=e.holeOffsets[r];return 0===n.length?e.loopRangeOffsets[r+1]:t+n[0]}function p(e,t){var r=e.min-t.min;return 0===r?e.max-t.max:r}function m(e,t){var r=e.max-t.max;return 0===r?e.min-t.min:r}var v=function(){function e(t){(0,a.default)(this,e),t?(this.loopRangeOffsets=t.loopRangeOffsets,this.loopValueIndices=t.loopValueIndices,this.positions=t.positions,this.holeOffsets=t.holeOffsets,this._boundingBox=t._boundingBox):(this.loopRangeOffsets=new Uint32Array(1),this.loopValueIndices=new Uint32Array(0),this.positions=new l.default(s.Vector3,0),this.holeOffsets=[])}return(0,o.default)(e,[{key:"partition",value:function(){var t=[],r=this.loopRangeOffsets.length-1;if(1===r)t.push(this);else for(var n={loopRangeOffsets:null,loopValueIndices:null,positions:null,holeOffsets:null},i=new s.Vector3,a=this.loopRangeOffsets[0],o=0;o<r;++o){var u=this.loopRangeOffsets[o+1];n.loopRangeOffsets=new Uint32Array(2),n.loopRangeOffsets[1]=u-a,n.holeOffsets=[this.holeOffsets[o]];for(var c=0,f={},h=[],d=a;d<u;++d){var p=this.loopValueIndices[d],m=f[p];void 0===m&&(m=c,f[p]=c,++c),h.push(m)}n.loopValueIndices=new Uint32Array(h);var v=new l.default(s.Vector3,c);for(var g in f)this.positions.getAt(g,i),v.setAt(f[g],i);n.positions=v,t.push(new e(n)),a=u}return t}},{key:"createAxisInterval",value:function(e,t,r,n){t=!!t;for(var i=new s.Vector3(-e.y,e.x,0),a=[],o=new s.Vector3,l=new s.Vector3,u=void 0,c=this.loopRangeOffsets.length-1,f=0;f<c;++f){var h=this.loopRangeOffsets[f],v=d(this,h,f),g=void 0;this.positions.getAt(this.loopValueIndices[h],o),o.add(r);for(var y=o.dot(i),x=h+1;x<v;++x){this.positions.getAt(this.loopValueIndices[x],l),l.add(r);var b=l.dot(i);if(b!==y&&b>y!==t){var w=void 0===g?o.clone().setZ(0):g,_=l.clone().setZ(0);t?a.push({min:b,max:y,minVertex:_,maxVertex:w}):a.push({min:y,max:b,minVertex:w,maxVertex:_}),g=_}else g=void 0;u=o,o=l,l=u,y=b}}return a.sort(n?m:p),a}},{key:"getAttachVector",value:function(e,t,r,n){var a=new s.Vector3,o=this.createAxisInterval(r,!1,a,!1),l=e.createAxisInterval(r,!0,t,!0),u=Number.MAX_VALUE,c=0,f=l.length,h=!0,d=!1,p=void 0;try{for(var m,v=(0,i.default)(o);!(h=(m=v.next()).done);h=!0){for(var g=m.value;c<f&&l[c].max<g.min;)++c;for(var y=c;y<f;++y){var x=l[y];if(x.min<=g.max){var b=void 0,w=void 0;g.min<x.min?(a.copy(g.minVertex).lerp(g.maxVertex,(x.min-g.min)/(g.max-g.min)),b=a.distanceToSquared(x.minVertex)):(a.copy(x.minVertex).lerp(x.maxVertex,(g.min-x.min)/(x.max-x.min)),b=a.distanceToSquared(g.minVertex)),g.max<x.max?(a.copy(x.minVertex).lerp(x.maxVertex,(g.max-x.min)/(x.max-x.min)),w=a.distanceToSquared(g.maxVertex)):(a.copy(g.minVertex).lerp(g.maxVertex,(x.max-g.min)/(g.max-g.min)),w=a.distanceToSquared(x.maxVertex)),u=Math.min(u,b,w)}}}}catch(e){d=!0,p=e}finally{try{!h&&v.return&&v.return()}finally{if(d)throw p}}var _=null;return u!==Number.MAX_VALUE&&(_=r.clone().multiplyScalar(Math.sqrt(u)-n).add(t)),_}},{key:"isOpen",value:function(){if(this.loopRangeOffsets.length<2)return!0;var e=this.loopValueIndices[0],t=d(this,0,0)-1;return e!==this.loopValueIndices[t]}},{key:"boundingBox",get:function(){if(!this._boundingBox){for(var e=this.loopRangeOffsets.length-1,t=new s.Box3,r=new s.Vector3,n=0;n<e;++n)for(var i=this.loopRangeOffsets[n],a=d(this,i,n),o=i;o<a;++o)this.positions.getAt(this.loopValueIndices[o],r),t.expandByPoint(r);this._boundingBox=t}return this._boundingBox}},{key:"edgeVertexAdjacency",get:function(){return this._edgeVertexAdjacency||(this._edgeVertexAdjacency=new f.default(this)),this._edgeVertexAdjacency}}],[{key:"fromPath",value:function(t,r,n,i){for(var a,o,u,f,h,d,p,m,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},x=v.reverseIndices,b=void 0!==x&&x,w=v.lineSegments,_=void 0===w?2:w,M=[0],S=[],T=[],E=[],P=0,A=0,C=new s.Box3,R=null,I=0,O={x:0,y:0},L=0;L<t.commands.length;++L){var D=t.commands[L];if("M"===D.type||"m"===D.type){"m"===D.type&&(D.x+=O.x,D.y+=O.y),O.x=D.x,O.y=D.y;var N=new s.Vector3(D.x,n-D.y,0).multiplyScalar(1/72);R&&R.x===N.x&&R.y===N.y||(++P,R=N,S.push(A),C.expandByPoint(N),T.push(N),++A)}else if("Q"===D.type){P+=r;for(var V=t.commands[L-1],F={x:D.x1,y:D.y1},B=D,U=1;U<=r;++U){var k=(o=F,u=B,void 0,void 0,void 0,void 0,p=2*(h=1-(f=U/r))*f,m=f*f,{x:(d=h*h)*(a=V).x+p*o.x+m*u.x,y:d*a.y+p*o.y+m*u.y}),z=new s.Vector3(k.x,n-k.y,0).multiplyScalar(1/72);R&&R.x===z.x&&R.y===z.y?--P:(R=z,S.push(A),C.expandByPoint(z),T.push(z),++A)}}else if("C"===D.type||"c"===D.type){var G="c"===D.type;P+=r;var j=t.commands[L-1],H={x:D.x1,y:D.y1},W={x:D.x2,y:D.y2};G&&(D.x+=j.x,D.y+=j.y,H.x+=j.x,H.y+=j.y,W.x+=j.x,W.y+=j.y);for(var X=D,q=1;q<=r;++q){var Y=g(j,H,W,X,q/r),Z=new s.Vector3(Y.x,n-Y.y,0).multiplyScalar(1/72);R&&R.x===Z.x&&R.y===Z.y?--P:(R=Z,S.push(A),C.expandByPoint(Z),T.push(Z),++A)}}else if("L"===D.type||"l"===D.type){var J="l"===D.type;P+=_;var Q=t.commands[L-1],K=new s.Vector3(Q.x,Q.y,0);J&&(D.x+=Q.x,D.y+=Q.y);for(var $=D,ee=new s.Vector3($.x,$.y,0),te=1;te<=_;te++){var re=K.clone().lerp(ee,te/_),ne=new s.Vector3(re.x,n-re.y,0).multiplyScalar(1/72);R&&R.x===ne.x&&R.y===ne.y?--P:(R=ne,S.push(A),C.expandByPoint(ne),T.push(ne),++A)}}else if("Z"!==D.type&&"z"!==D.type){var ie=new s.Vector3(D.x,n-D.y,0).multiplyScalar(1/72);R&&R.x===ie.x&&R.y===ie.y||(++P,R=ie,S.push(A),C.expandByPoint(ie),T.push(ie),++A)}else--A,T.pop(),S[S.length-1]=I,I=A,M.push(P),E.push(C),C=new s.Box3}b&&(S=function(e,t){for(var r=1;r<e.length;r++)for(var n=e[r-1],i=e[r]-1,a=Math.floor((i-n)/2),o=0;o<a;o++){var s=t[i-o];t[i-o]=t[n+o],t[n+o]=s}return t}(M,S));for(var ae={loopRangeOffsets:new Uint32Array(M),loopValueIndices:new Uint32Array(S),positions:new l.default(s.Vector3,T.length),holeOffsets:[]},oe=0;oe<T.length;++oe)ae.positions.setAt(oe,T[oe]);var se=new Array(M.length-1).fill(-1),le=(0,c.findHoles)(ae);(0,c.putHolesInLoops)(ae,le,se,E);var ue=(0,c.convertLoopsToFaces)(ae,se,E),ce=new e(ae);return void 0!==i&&ae.loopRangeOffsets.length>2&&(ce=y(ce,ue,i)),ce}},{key:"mergeShapeSets",value:function(t,r){var a=1,o=0,u=0,c=!0,f=!1,h=void 0;try{for(var d,p=(0,i.default)(t);!(c=(d=p.next()).done);c=!0){var m=d.value;a+=m.loopRangeOffsets.length-1,o+=m.loopValueIndices.length,u+=m.positions.length}}catch(e){f=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(f)throw h}}for(var v={loopRangeOffsets:new Uint32Array(a),loopValueIndices:new Uint32Array(o),positions:new l.default(s.Vector3,u),holeOffsets:[]},g=0,y=0,x=0,b=0,w=0,_=new s.Vector3,M=0;M<t.length;++M){for(var S,T=t[M],E=T.loopValueIndices.length,P=T.loopRangeOffsets.length-1,A=0;A<P;++A,++b)v.loopRangeOffsets[b]=T.loopRangeOffsets[A]+g;for(var C=0;C<E;++C,++w)v.loopValueIndices[w]=T.loopValueIndices[C]+y;for(var R=T.positions.length,I=0;I<R;++I)T.positions.getAt(I,_),r&&_.add(r[M]),v.positions.setAt(I+x,_);(S=v.holeOffsets).push.apply(S,(0,n.default)(T.holeOffsets)),y+=R,g+=E,x+=R}return v.loopRangeOffsets[b]=o,new e(v)}}]),e}();function g(e,t,r,n,i){var a=1-i,o=a*a*a,s=3*a*a*i,l=3*a*i*i,u=i*i*i;return{x:o*e.x+s*t.x+l*r.x+u*n.x,y:o*e.y+s*t.y+l*r.y+u*n.y}}function y(e,t,r){for(var n=e.partition(),i=n[t],a=(0,u.default)(i.positions),o=new s.Vector3,l=[],c=0;c<n.length;++c)if(c===t)l.push(o);else{var f=n[c],h=(0,u.default)(f.positions).sub(a).normalize().negate();l.push(i.getAttachVector(f,o,h,r))}return v.mergeShapeSets(n,l)}t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var n=a(r(6)),i=a(r(26));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return e.getUint8(t)}function s(e,t){return e.getUint16(t,!1)}function l(e,t){return e.getUint32(t,!1)}function u(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var c={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function f(e,t){this.data=e,this.offset=t,this.relativeOffset=0}f.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},f.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},f.prototype.parseCard8=f.prototype.parseByte,f.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},f.prototype.parseCard16=f.prototype.parseUShort,f.prototype.parseSID=f.prototype.parseUShort,f.prototype.parseOffset16=f.prototype.parseUShort,f.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},f.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},f.prototype.parseULong=function(){var e=l(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},f.prototype.parseFixed=function(){var e=u(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},f.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,n="";this.relativeOffset+=e;for(var i=0;i<e;i++)n+=String.fromCharCode(t.getUint8(r+i));return n},f.prototype.parseTag=function(){return this.parseString(4)},f.prototype.parseLongDateTime=function(){var e=l(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},f.prototype.parseVersion=function(){var e=s(this.data,this.offset+this.relativeOffset),t=s(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,e+t/4096/10},f.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=c[e]*t},f.prototype.parseOffset16List=f.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=r.getUint16(n),n+=2;return this.relativeOffset+=2*e,t},f.prototype.parseShortList=function(e){for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=r.getInt16(n),n+=2;return this.relativeOffset+=2*e,t},f.prototype.parseByteList=function(e){for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=r.getUint8(n++);return this.relativeOffset+=e,t},f.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),n=0;n<e;n++)r[n]=t.call(this);return r},f.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),i=(0,n.default)(t),a=0;a<e;a++){for(var o={},s=0;s<i.length;s++){var l=i[s],u=t[l];o[l]=u.call(this)}r[a]=o}return r},f.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=(0,n.default)(e),r={},i=0;i<t.length;i++){var a=t[i],o=e[a];r[a]=o.call(this)}return r},f.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new f(this.data,this.offset+t).parseStruct(e)},f.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),r=t.length,n=this.relativeOffset,i=new Array(r),a=0;a<r;a++){var o=t[a];if(0!==o)if(this.relativeOffset=o,e){for(var s=this.parseOffset16List(),l=new Array(s.length),u=0;u<s.length;u++)this.relativeOffset=o+s[u],l[u]=e.call(this);i[a]=l}else i[a]=this.parseUShortList();else i[a]=void 0}return this.relativeOffset=n,i},f.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(r)};if(2===t){for(var n=new Array(r),i=0;i<r;i++)n[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:n}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},f.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:f.uShort,end:f.uShort,classId:f.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},f.list=function(e,t){return function(){return this.parseList(e,t)}},f.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},f.pointer=function(e){return function(){return this.parsePointer(e)}},f.tag=f.prototype.parseTag,f.byte=f.prototype.parseByte,f.uShort=f.offset16=f.prototype.parseUShort,f.uShortList=f.prototype.parseUShortList,f.struct=f.prototype.parseStruct,f.coverage=f.prototype.parseCoverage,f.classDef=f.prototype.parseClassDef;var h={reserved:f.uShort,reqFeatureIndex:f.uShort,featureIndexes:f.uShortList};f.prototype.parseScriptList=function(){return this.parsePointer(f.recordList({tag:f.tag,script:f.pointer({defaultLangSys:f.pointer(h),langSysRecords:f.recordList({tag:f.tag,langSys:f.pointer(h)})})}))},f.prototype.parseFeatureList=function(){return this.parsePointer(f.recordList({tag:f.tag,feature:f.pointer({featureParams:f.offset16,lookupListIndexes:f.uShortList})}))},f.prototype.parseLookupList=function(e){return this.parsePointer(f.list(f.pointer(function(){var t=this.parseUShort();i.default.argument(1<=t&&t<=8,"GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),n=16&r;return{lookupType:t,lookupFlag:r,subtables:this.parseList(f.pointer(e[t])),markFilteringSet:n?this.parseUShort():void 0}})))},t.default={getByte:o,getCard8:o,getUShort:s,getCard16:s,getShort:function(e,t){return e.getInt16(t,!1)},getULong:l,getFixed:u,getTag:function(e,t){for(var r="",n=t;n<t+4;n+=1)r+=String.fromCharCode(e.getInt8(n));return r},getOffset:function(e,t,r){for(var n=0,i=0;i<r;i+=1)n<<=8,n+=e.getUint8(t+i);return n},getBytes:function(e,t,r){for(var n=[],i=t;i<r;i+=1)n.push(e.getUint8(i));return n},bytesToString:function(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t},Parser:f},t.Parser=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NULL_SCENE_ID=void 0;var n,i=g(r(38)),a=g(r(30)),o=g(r(2)),s=g(r(137)),l=g(r(18));t.hasFile=function(e,t){return!!e.getIn(["assets","assets",t])},t.getFile=function(e,t){var r=e.getIn(["assets","assets",t]);return r?r.toJS():{}},t.addFile=E,t.removeFile=P,t.urlsFor=C,t.isLoading=function(e){return function(t){var r=t.getIn;return r(["sceneIO","loadingFiles",e])}},t.getImage=function(e){return images[e]},t.getOrFetchImage=I,t.fetchImage=O,t.fetchBinary=L,t.getOrFetchBinary=N,t.getOrFetchFont=function(e){return function(t){var r=t.getIn(["assets","assets",e]);return r?t.callApi({types:[p.LOADING_FILE,p.LOADED_FILE,p.LOADING_FILE_ERROR],url:C(t,r),contentType:"font",payload:e,queryKey:"FILE"+r.get("hash"),fireAndForget:!0}):(t.error(new Error("target file not found"),null,{fileId:e}),null)}},t.getOrFetchText=function(e){return function(t){var r=t.getIn(["assets","assets",e]);return r?t.callApi({types:[p.LOADING_FILE,p.LOADED_FILE,p.LOADING_FILE_ERROR],url:C(t,r),contentType:"text",payload:e,queryKey:"FILE"+r.get("hash"),fireAndForget:!0}):(t.error(new Error("target file not found"),null,{fileId:e}),null)}},t.getHash=V,t.getUrl=F,t.getImageUrl=function(e,t,r){var n=e.getIn(["assets","assets",t]);return n?A(e,n,r)[0]:null},t.fetchText=function(e){return function(t){var r=t.getIn(["assets","fileRoots"]),n=[];return r.length>1&&n.push(r[0]+"/"+e+"z"),r.map(function(t){return n.push(t+"/"+e)}),t.callApi({contentType:"text",url:n})}},t.fetchTransit=function(e){return function(t){return t.callApi({contentType:"text",url:"/api/scenes/"+e})}},t.find=B,t.filter=U,t.exportJSON=k,t.getActiveAssets=z,t.importImage=W,t.importFile=X,t.addRoot=q;var u=r(36),c=g(r(64)),f=g(r(50)),h=r(10),d=r(4),p=r(67),m=r(19),v=r(90);function g(e){return e&&e.__esModule?e:{default:e}}var y="ADD_FILE",x="REMOVE_FILE",b="IMPORTING_FILE",w="IMPORTED_FILE",_="IMPORT_FILE_ERROR",M="ADD_ROOT",S=(0,u.Map)({fileRoots:["https://clara.io/resources"],assets:(0,u.Map)()}),T=(0,f.default)(S,(n={},(0,l.default)(n,y,function(e,t){var r=t.id;return e.setIn(["assets",r],(0,u.Map)(t))}),(0,l.default)(n,x,function(e,t){return e.deleteIn(["assets",t])}),(0,l.default)(n,p.LOAD_SCENE,function(e,t){var r=t.assets;return e.set("assets",e.get("assets").merge(r))}),(0,l.default)(n,p.CLEAR_SCENE,function(e){return e.set("assets",(0,u.Map)())}),(0,l.default)(n,M,function(e,t){var r=e.get("fileRoots").slice();return r.unshift(t),e.set("fileRoots",r)}),n));function E(e){return{type:y,payload:e}}function P(e){return{type:x,payload:e}}function A(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.resizeImage,i=r.resizeWidth,a=r.resizeHeight,o=r.optimizeFormat;if(!n&&!o)return C(e,t);var s=n?i+"x"+a+"/":"",l=o?"filters:format("+o+")/":"";return["https://clara.io/resources"].map(function(e){return e+"/images/"+s+l+t.get("hash")+"?filename="+t.get("name")})}function C(e,t,r){return e.getIn(["assets","fileRoots"]).map(function(e){return e+"/"+t.get("hash")+(r||t.get("suffix"))+"?filename="+t.get("name")})}var R={};function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=n.getIn(["assets","assets",e]);if(i){var a=i.get("localFile");if(a)return function(e,t,r){if(R[t])return R[t];e.dispatch((0,m.markLoadingFile)(t));var n=new Image,i=new FileReader;return i.addEventListener("load",function(){n.src=i.result,n.onload=function(){R[t]=n,e.dispatch((0,m.markLoadedFile)(t))}}),i.readAsDataURL(r),null}(n,e,a);var l=r.optimizeImage?A(n,i,r):[];return l.push.apply(l,(0,s.default)(C(n,i))),n.callApi((0,o.default)({types:[p.LOADING_FILE,p.LOADED_FILE,p.LOADING_FILE_ERROR],url:l,contentType:"img",payload:e,queryKey:"IMAGE"+i.get("hash"),fireAndForget:void 0===t.fireAndForget,successPayload:t.successPayload},t))}}}function O(e,t){return t&&I(t,{fireAndForget:!1,successPayload:!0})(e)}function L(e,t,r){return t&&N(t,(0,o.default)({fireAndForget:!1},r))(e)}var D=1e5;function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=r.getIn(["assets","assets",e]);if(!n)return r.error(new Error("target file not found"),null,{fileId:e}),null;if(n.get("content"))return n.get("content");var i=r.getTranslator(),a=n.get("lzma")&&!(i&&i.externals.isMobile)&&n.get("size")>=D,s=void 0===t.decompress&&a;return r.callApi((0,o.default)({types:[p.LOADING_FILE,p.LOADED_FILE,p.LOADING_FILE_ERROR],url:C(r,n,a&&"lzma1"),contentType:"binary",payload:e,queryKey:"FILE"+n.get("hash")+s,decompress:s,fireAndForget:void 0===t.fireAndForget},t))}}function V(e,t){return e.getIn(["assets","assets",t,"hash"])}function F(e,t){var r=e.getIn(["assets","assets",t]);if(r){var n=C(e,r);return n[n.length-1]}return r}function B(e,t){return e.getIn(["assets","assets"]).find(t)}function U(e,t){return e.getIn(["assets","assets"]).filter(t||function(){return!0})}function k(e){return e.getIn(["assets","assets"]).map(function(e){var t=e.toJS();return t._id=t.id,delete t.id,t}).toArray()}function z(e){var t=(0,h.getEvalSceneGraph)(e);return U(e,function(e,r){return!!t.fileReferences.from[r]})}var G=4096,j=t.NULL_SCENE_ID="00000000-0000-0000-0000-000000000000",H={"image/jpeg":!0,"image/png":!0,"image/gif":!0,"application/pdf":!0,"image/svg+xml":!0};function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n,s,l,u="boolean"!=typeof t.keepAspectRatio||!t.keepAspectRatio;function f(e,n){var i=new FormData;return i.append("file",e),i.append("name",e.name),i.append("sceneId",j),i.append("type",e.type),i.append("targetFormat",t.targetFormat||"png"),i.append("quality",t.quality||60),i.append("maxSize",t.resizeTo),i.append("density",t.dpi),i.append("scale",t.scale),t.backgroundColor&&i.append("backgroundColor",t.backgroundColor),["outputName","backgroundColor","threshold","turnPolicy","turdSize","alphaMax","longCurve","optTolerance","unit"].forEach(function(e){void 0!==t[e]&&i.append(e,t[e])}),n&&i.append("convertToFileId",n),i.append("resize",u),X(r,{body:i,type:e.type})}function m(e){return r.dispatch(E((0,o.default)({id:e._id},e)))}function g(n){var i=n.type.match(/image\/(jpeg|png)/),a={glOption:1,originalBitmapFile:n.id};i&&(a.glBitmapFile=n.id);var o={name:n.name||e.name,type:"Image",parent:(0,d.find)(r,{name:"Material Library"}),plugs:{Image:[["Image",a]],Properties:[["ImageProperties",{}]]}};return t.imageNodeId&&(o.id=t.imageNodeId),r.dispatch((0,h.addNode)(o)).then(function(e){return{id:e,imageNodeId:e,assetId:n.id,imageSize:{width:n.height,height:n.width,originalWidth:n.originalWidth,originalHeight:n.originalHeight},url:n.original}})}if("string"==typeof e)return(0,v.isUuid)(e)?(l=e,r.callApi({types:[p.LOADING_FILE,p.LOADED_FILE,p.LOADING_FILE_ERROR],url:"https://clara.io/api/files/"+l+"/asset",payload:l,successPayload:!0})).then(m).then(g):(n=e,s=(0,i.default)((0,o.default)({url:n,maxSize:t.resizeTo||G,targetFormat:t.targetFormat||"png",sceneId:j,resize:u},t)),r.callApi({types:[b,w,_],method:"POST",url:"https://clara.io/api/files/image",body:s})).then(m).then(g).catch(function(e){var t=void 0;return t=e.status&&e.status<500?"Image not imported, bad url":e.status&&e.status>=500?"Image not imported, internal error":e,a.default.reject(t)});if(!e.type)return a.default.reject("Expect a File");if(!H[e.type])return a.default.reject("File format not supported");var y=!1;if(t.targetFormat){var x=e.type.substring(e.type.lastIndexOf("/")+1),M="jpg"===t.targetFormat?"jpeg":t.targetFormat;y=M&&M!==x}return!y&&e.type.match(/image\/(jpeg|png|svg\+xml)/)&&e.size<5e6?function(e){return r.dispatch(E({id:(0,c.default)(),name:e.name,localFile:e,size:e.size,type:e.type}))}(e).then(g).then(function(t){return f(e,t.assetId).then(function(e){}),t}):f(e).then(m).then(g)}}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="https://clara.io/api/files";return H[t.type]&&(r+="/image"),e.callApi((0,o.default)({types:[b,w,_],method:"POST",url:r},t))}function q(e){return{type:M,payload:e}}var Y={reducer:T,actions:{addFile:E,removeFile:P,importImage:W,addRoot:q},selectors:{_getHash:V,getUrl:F,filter:U,find:B,getActiveAssets:z,exportJSON:k,fetchImage:O,fetchBinary:L}};t.default=Y},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MOUSE_CONTROLS=void 0;var n,i=h(r(13)),a=h(r(79)),o=h(r(6)),s=h(r(18)),l=h(r(2));t.addCommand=w,t.removeCommand=_,t.updateCommand=M,t.undoUpdateCommand=S,t.setCommandOptions=T,t.getTools=E,t.getCommands=P,t.getCommand=function(e,t){return e.getIn(["commands","all"])[t]},t.isCommandActive=function(e,t){var r=e.getIn(["commands","all"])[t];return r&&A(e,r)},t.getActiveCommandsWithWidgets=function(e){var t=P(e),r={};return(0,a.default)(t).forEach(function(t){t.widget&&A(e,t)&&(r[t.name]=t)}),r},t.activateCommand=C,t.deactivateCommand=R,t.runCommand=I,t.updateCommands=O,t.undoUpdateCommands=function(e){return function(t){e.forEach(function(e){t.dispatch(S(e))})}},t.setManipulators=function(e){return{type:y,payload:e}},t.updateManipulatorsTools=function(e){var t=e.getIn(["commands","manipulators"]);if(t){var r=P(e),n=E(e);t.updateTools(n.map(function(e){return r[e]}).toArray())}};var u=r(36),c=h(r(50)),f=(r(8),r(120));h(r(178));function h(e){return e&&e.__esModule?e:{default:e}}t.MOUSE_CONTROLS=["orbit","pan","zoom","home","fullscreen","configurator"];var d="ADD_COMMAND",p="REMOVE_COMMAND",m="UPDATE_COMMAND",v="UNDO_UPDATE_COMMAND",g="UPDATE_COMMAND_OPTIONS;",y="SET_MANIPULATORS",x={enabled:!0,display:{},options:{},isEnabled:function(e,t){return t.enabled},isVisible:function(e,t){return t.display},command:null,widget:null};function b(e,t){var r=(0,l.default)({},x,e,{name:t});return!0===r.display&&(r.display={playerTools:!0}),r}function w(e,t){return{type:d,payload:{command:e,name:t}}}function _(e){return{type:p,payload:e}}function M(e,t){return{type:m,payload:{name:e,opts:t}}}function S(e){return{type:v,payload:{name:e}}}function T(e,t){return{type:g,payload:{name:e,opts:t}}}function E(e){return e.getIn(["commands","tools"])}function P(e,t){var r=e.getIn(["commands","all"]);return t?(0,o.default)(r).reduce(function(e,n){var i=r[n];return i.enabled&&i.display[t]&&(e[n]=i),e},{}):r}function A(e,t){return!!t.active||!!t.isActive&&t.isActive(e)}function C(e){return function(t){var r=E(t),n=P(t),i=n[e];i.activate?A(t,i)||(i.activate.call(i),t.dispatch(M(e,{active:!0}))):r.forEach(function(r){var i=n[r];i.active&&i.name!==e&&t.dispatch(M(i.name,{active:!1})),i.name===e&&t.dispatch(M(i.name,{active:!0}))})}}function R(e){return function(t){var r=P(t)[e];r&&(r.active&&t.dispatch(M(r.name,{active:!1})),r.deactivate&&r.deactivate.call(r))}}function I(e,t){return function(r){var n=r.getIn(["commands","all"])[e];if(n&&n.enabled){if(r.trackEvent("playerv2","Execute Command","Run "+e),n.execute)return n.schema&&(t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!0,a=!1,s=void 0;try{for(var l,u=(0,i.default)((0,o.default)(e.schema));!(n=(l=u.next()).done);n=!0){var c=l.value,f=e.schema[c];r[c]=void 0!==t[c]?t[c]:f.defaultValue}}catch(e){a=!0,s=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw s}}return r}(n,t)),n.execute(r,t);var a=A(r,n);return n.deactivate&&a?r.dispatch(R(e)):r.dispatch(C(e))}n||console.warn("No such command '"+e+"'")}}function O(e,t){return function(r){e.forEach(function(e){r.dispatch(M(e,t))})}}var L={reducer:(0,c.default)({},(n={},(0,s.default)(n,f.ActionTypes.INIT,function(e){return(0,u.Map)({all:{},prev:{},allCommands:(0,u.List)(),tools:(0,u.List)(),activeCommand:null,removedCommands:(0,u.Map)(),manipulators:null})}),(0,s.default)(n,d,function(e,t){var r=t.command,n=t.name;if(e.getIn(["removedCommands",n]))return e;var i=e.get("all");i[n]=(0,l.default)(b(r,n),i[n]||{});var a=e.updateIn(["allCommands"],(0,u.List)(),function(e){return e.push(n)});return i[n].tool&&(a=a.updateIn(["tools"],(0,u.List)(),function(e){return e.push(n)})),a}),(0,s.default)(n,p,function(e,t){delete e.get("all")[t];var r=e.getIn(["tools"]).indexOf(t),n=e.getIn(["allCommands"]).indexOf(t),i=e;return r>=0&&(i=i.deleteIn(["tools",r])),n>=0&&(i=i.deleteIn(["allCommands",n])),i=i.setIn(["removedCommands",t],!0)}),(0,s.default)(n,m,function(e,t){var r=t.name,n=t.opts,i=e.get("all");i[r]||(i[r]=b(n,r));var a=i[r];return e.get("prev")[r]=(0,l.default)({},a),(0,l.default)(a,n),e}),(0,s.default)(n,g,function(e,t){var r=t.name,n=t.opts,i=e.get("all");i[r]||(i[r]={name:r,options:{}});var a=i[r];return e.get("prev")[r]=(0,l.default)({},a),a&&(0,l.default)(a.options,n),e}),(0,s.default)(n,v,function(e,t){var r=t.name,n=e.get("prev")[r];if(n){var i=e.get("all")[r];i&&(0,l.default)(i,n)}return e}),(0,s.default)(n,y,function(e,t){return e.set("manipulators",t)}),n)),actions:{activateCommand:C,addCommand:w,deactivateCommand:R,runCommand:I,setCommandOptions:T,updateCommand:M,undoUpdateCommand:S,updateCommands:O,removeCommand:_},selectors:{getTools:E}};t.default=L},function(e,t,r){"use strict";function n(e){throw new Error(e)}function i(e,t){e||n(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.fail=n,t.argument=i,t.assert=i,t.default={fail:n,argument:i,assert:i}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(217)("wks"),i=r(154),a=r(34).Symbol,o="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=n},function(e,t,r){var n=r(15),i=r(346),a=r(134),o=Object.defineProperty;t.f=r(45)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){e.exports={default:r(676),__esModule:!0}},function(e,t,r){"use strict";var n=r(835)||{name:"unknown",version:"0"};if(n.isIE="ie"===n.name,n.isMobile=!1,n.isIOS=!1,n.isAndroid=!1,n.isAndroidTablet=!1,n.isMac=!1,window.navigator){var i=window.navigator.userAgent;n.isIOS=/iPad|iPhone|iPod/.test(i),n.isAndroid=/Android/i.test(i);var a=/IEMobile|Windows Phone|Lumia/i.test(i),o=/CrOS/i.test(i),s=/Blackberry|webOS/i.test(i);n.isMac=/Mac/i.test(i),n.isMobile=n.isIOS||n.isAndroid||a||o||s,n.isAndroidTablet=n.isAndroid&&/^(?!.*Mobile).*$/.test(i)}e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(56)),i=s(r(6)),a=s(r(26)),o=r(181);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){for(var n=0;n<t.length;n+=1){var a=t[n];this[a.name]=a.value}if(this.tableName=e,this.fields=t,r)for(var o=(0,i.default)(r),s=0;s<o.length;s+=1){var l=o[s],u=r[l];void 0!==this[l]&&(this[l]=u)}}function u(e,t,r){void 0===r&&(r=t.length);var n=new Array(t.length+1);n[0]={name:e+"Count",type:"USHORT",value:r};for(var i=0;i<t.length;i++)n[i+1]={name:e+i,type:"USHORT",value:t[i]};return n}function c(e,t,r){var n=t.length,i=new Array(n+1);i[0]={name:e+"Count",type:"USHORT",value:n};for(var a=0;a<n;a++)i[a+1]={name:e+a,type:"TABLE",value:r(t[a],a)};return i}function f(e,t,r){var n=t.length,i=[];i[0]={name:e+"Count",type:"USHORT",value:n};for(var a=0;a<n;a++)i=i.concat(r(t[a],a));return i}function h(e){1===e.format?l.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(u("glyph",e.glyphs))):a.default.assert(!1,"Can't create coverage table format 2 yet.")}function d(e){l.call(this,"scriptListTable",f("scriptRecord",e,function(e,t){var r=e.script,n=r.defaultLangSys;return a.default.assert(!!n,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new l("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new l("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(u("featureIndex",n.featureIndexes)))}].concat(f("langSys",r.langSysRecords,function(e,t){var r=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new l("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(u("featureIndex",r.featureIndexes)))}]})))}]}))}function p(e){l.call(this,"featureListTable",f("featureRecord",e,function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new l("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(u("lookupListIndex",r.lookupListIndexes)))}]}))}function m(e,t){l.call(this,"lookupListTable",c("lookup",e,function(e){var r=t[e.lookupType];return a.default.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new l("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(c("subtable",e.subtables,r)))}))}l.prototype.encode=function(){return o.encode.TABLE(this)},l.prototype.sizeOf=function(){return o.sizeOf.TABLE(this)},h.prototype=(0,n.default)(l.prototype),h.prototype.constructor=h,d.prototype=(0,n.default)(l.prototype),d.prototype.constructor=d,p.prototype=(0,n.default)(l.prototype),p.prototype.constructor=p,m.prototype=(0,n.default)(l.prototype),m.prototype.constructor=m,t.default={Table:l,Record:l,Coverage:h,ScriptList:d,FeatureList:p,LookupList:m,ushortList:u,tableList:c,recordList:f}},function(e,t,r){"use strict";t.__esModule=!0;var n=o(r(659)),i=o(r(658)),a="function"==typeof i.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===a(n.default)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":a(e)}},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(84),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){var n;n=function(){"use strict";var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function r(e){return o(e)?e:X(e)}function n(e){return s(e)?e:q(e)}function i(e){return l(e)?e:Y(e)}function a(e){return o(e)&&!u(e)?e:Z(e)}function o(e){return!(!e||!e[f])}function s(e){return!(!e||!e[h])}function l(e){return!(!e||!e[d])}function u(e){return s(e)||l(e)}function c(e){return!(!e||!e[p])}t(n,r),t(i,r),t(a,r),r.isIterable=o,r.isKeyed=s,r.isIndexed=l,r.isAssociative=u,r.isOrdered=c,r.Keyed=n,r.Indexed=i,r.Set=a;var f="@@__IMMUTABLE_ITERABLE__@@",h="@@__IMMUTABLE_KEYED__@@",d="@@__IMMUTABLE_INDEXED__@@",p="@@__IMMUTABLE_ORDERED__@@",m=5,v=1<<m,g=v-1,y={},x={value:!1},b={value:!1};function w(e){return e.value=!1,e}function _(e){e&&(e.value=!0)}function M(){}function S(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),i=0;i<r;i++)n[i]=e[i+t];return n}function T(e){return void 0===e.size&&(e.size=e.__iterate(P)),e.size}function E(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?T(e)+t:t}function P(){return!0}function A(e,t,r){return(0===e||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function C(e,t){return I(e,t,0)}function R(e,t){return I(e,t,t)}function I(e,t,r){return void 0===e?r:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}var O=0,L=1,D=2,N="function"==typeof Symbol&&Symbol.iterator,V="@@iterator",F=N||V;function B(e){this.next=e}function U(e,t,r,n){var i=0===e?t:1===e?r:[t,r];return n?n.value=i:n={value:i,done:!1},n}function k(){return{value:void 0,done:!0}}function z(e){return!!H(e)}function G(e){return e&&"function"==typeof e.next}function j(e){var t=H(e);return t&&t.call(e)}function H(e){var t=e&&(N&&e[N]||e[V]);if("function"==typeof t)return t}function W(e){return e&&"number"==typeof e.length}function X(e){return null===e||void 0===e?ae():o(e)?e.toSeq():function(e){var t=le(e)||"object"==typeof e&&new te(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}(e)}function q(e){return null===e||void 0===e?ae().toKeyedSeq():o(e)?s(e)?e.toSeq():e.fromEntrySeq():oe(e)}function Y(e){return null===e||void 0===e?ae():o(e)?s(e)?e.entrySeq():e.toIndexedSeq():se(e)}function Z(e){return(null===e||void 0===e?ae():o(e)?s(e)?e.entrySeq():e:se(e)).toSetSeq()}B.prototype.toString=function(){return"[Iterator]"},B.KEYS=O,B.VALUES=L,B.ENTRIES=D,B.prototype.inspect=B.prototype.toSource=function(){return this.toString()},B.prototype[F]=function(){return this},t(X,r),X.of=function(){return X(arguments)},X.prototype.toSeq=function(){return this},X.prototype.toString=function(){return this.__toString("Seq {","}")},X.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},X.prototype.__iterate=function(e,t){return ue(this,e,t,!0)},X.prototype.__iterator=function(e,t){return ce(this,e,t,!0)},t(q,X),q.prototype.toKeyedSeq=function(){return this},t(Y,X),Y.of=function(){return Y(arguments)},Y.prototype.toIndexedSeq=function(){return this},Y.prototype.toString=function(){return this.__toString("Seq [","]")},Y.prototype.__iterate=function(e,t){return ue(this,e,t,!1)},Y.prototype.__iterator=function(e,t){return ce(this,e,t,!1)},t(Z,X),Z.of=function(){return Z(arguments)},Z.prototype.toSetSeq=function(){return this},X.isSeq=ie,X.Keyed=q,X.Set=Z,X.Indexed=Y;var J,Q,K,$="@@__IMMUTABLE_SEQ__@@";function ee(e){this._array=e,this.size=e.length}function te(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function re(e){this._iterable=e,this.size=e.length||e.size}function ne(e){this._iterator=e,this._iteratorCache=[]}function ie(e){return!(!e||!e[$])}function ae(){return J||(J=new ee([]))}function oe(e){var t=Array.isArray(e)?new ee(e).fromEntrySeq():G(e)?new ne(e).fromEntrySeq():z(e)?new re(e).fromEntrySeq():"object"==typeof e?new te(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function se(e){var t=le(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function le(e){return W(e)?new ee(e):G(e)?new ne(e):z(e)?new re(e):void 0}function ue(e,t,r,n){var i=e._cache;if(i){for(var a=i.length-1,o=0;o<=a;o++){var s=i[r?a-o:o];if(!1===t(s[1],n?s[0]:o,e))return o+1}return o}return e.__iterateUncached(t,r)}function ce(e,t,r,n){var i=e._cache;if(i){var a=i.length-1,o=0;return new B(function(){var e=i[r?a-o:o];return o++>a?{value:void 0,done:!0}:U(t,n?e[0]:o-1,e[1])})}return e.__iteratorUncached(t,r)}function fe(e,t){return t?function e(t,r,n,i){if(Array.isArray(r))return t.call(i,n,Y(r).map(function(n,i){return e(t,n,i,r)}));if(de(r))return t.call(i,n,q(r).map(function(n,i){return e(t,n,i,r)}));return r}(t,e,"",{"":e}):he(e)}function he(e){return Array.isArray(e)?Y(e).map(he).toList():de(e)?q(e).map(he).toMap():e}function de(e){return e&&(e.constructor===Object||void 0===e.constructor)}function pe(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function me(e,t){if(e===t)return!0;if(!o(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||s(e)!==s(t)||l(e)!==l(t)||c(e)!==c(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!u(e);if(c(e)){var n=e.entries();return t.every(function(e,t){var i=n.next().value;return i&&pe(i[1],e)&&(r||pe(i[0],t))})&&n.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var a=e;e=t,t=a}var f=!0,h=t.__iterate(function(t,n){if(r?!e.has(t):i?!pe(t,e.get(n,y)):!pe(e.get(n,y),t))return f=!1,!1});return f&&e.size===h}function ve(e,t){if(!(this instanceof ve))return new ve(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(Q)return Q;Q=this}}function ge(e,t){if(!e)throw new Error(t)}function ye(e,t,r){if(!(this instanceof ye))return new ye(e,t,r);if(ge(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),r=void 0===r?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=Math.max(0,Math.ceil((t-e)/r-1)+1),0===this.size){if(K)return K;K=this}}function xe(){throw TypeError("Abstract")}function be(){}function we(){}function _e(){}X.prototype[$]=!0,t(ee,Y),ee.prototype.get=function(e,t){return this.has(e)?this._array[E(this,e)]:t},ee.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length-1,i=0;i<=n;i++)if(!1===e(r[t?n-i:i],i,this))return i+1;return i},ee.prototype.__iterator=function(e,t){var r=this._array,n=r.length-1,i=0;return new B(function(){return i>n?{value:void 0,done:!0}:U(e,i,r[t?n-i++:i++])})},t(te,q),te.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},te.prototype.has=function(e){return this._object.hasOwnProperty(e)},te.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,i=n.length-1,a=0;a<=i;a++){var o=n[t?i-a:a];if(!1===e(r[o],o,this))return a+1}return a},te.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,i=n.length-1,a=0;return new B(function(){var o=n[t?i-a:a];return a++>i?{value:void 0,done:!0}:U(e,o,r[o])})},te.prototype[p]=!0,t(re,Y),re.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=j(this._iterable),n=0;if(G(r))for(var i;!(i=r.next()).done&&!1!==e(i.value,n++,this););return n},re.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=j(this._iterable);if(!G(r))return new B(k);var n=0;return new B(function(){var t=r.next();return t.done?t:U(e,n++,t.value)})},t(ne,Y),ne.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var r,n=this._iterator,i=this._iteratorCache,a=0;a<i.length;)if(!1===e(i[a],a++,this))return a;for(;!(r=n.next()).done;){var o=r.value;if(i[a]=o,!1===e(o,a++,this))break}return a},ne.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,i=0;return new B(function(){if(i>=n.length){var t=r.next();if(t.done)return t;n[i]=t.value}return U(e,i,n[i++])})},t(ve,Y),ve.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},ve.prototype.get=function(e,t){return this.has(e)?this._value:t},ve.prototype.includes=function(e){return pe(this._value,e)},ve.prototype.slice=function(e,t){var r=this.size;return A(e,t,r)?this:new ve(this._value,R(t,r)-C(e,r))},ve.prototype.reverse=function(){return this},ve.prototype.indexOf=function(e){return pe(this._value,e)?0:-1},ve.prototype.lastIndexOf=function(e){return pe(this._value,e)?this.size:-1},ve.prototype.__iterate=function(e,t){for(var r=0;r<this.size;r++)if(!1===e(this._value,r,this))return r+1;return r},ve.prototype.__iterator=function(e,t){var r=this,n=0;return new B(function(){return n<r.size?U(e,n++,r._value):{value:void 0,done:!0}})},ve.prototype.equals=function(e){return e instanceof ve?pe(this._value,e._value):me(e)},t(ye,Y),ye.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},ye.prototype.get=function(e,t){return this.has(e)?this._start+E(this,e)*this._step:t},ye.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},ye.prototype.slice=function(e,t){return A(e,t,this.size)?this:(e=C(e,this.size),(t=R(t,this.size))<=e?new ye(0,0):new ye(this.get(e,this._end),this.get(t,this._end),this._step))},ye.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},ye.prototype.lastIndexOf=function(e){return this.indexOf(e)},ye.prototype.__iterate=function(e,t){for(var r=this.size-1,n=this._step,i=t?this._start+r*n:this._start,a=0;a<=r;a++){if(!1===e(i,a,this))return a+1;i+=t?-n:n}return a},ye.prototype.__iterator=function(e,t){var r=this.size-1,n=this._step,i=t?this._start+r*n:this._start,a=0;return new B(function(){var o=i;return i+=t?-n:n,a>r?{value:void 0,done:!0}:U(e,a++,o)})},ye.prototype.equals=function(e){return e instanceof ye?this._start===e._start&&this._end===e._end&&this._step===e._step:me(this,e)},t(xe,r),t(be,xe),t(we,xe),t(_e,xe),xe.Keyed=be,xe.Indexed=we,xe.Set=_e;var Me="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function Se(e){return e>>>1&1073741824|3221225471&e}function Te(e){if(!1===e||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null===e||void 0===e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if(e!=e||e===1/0)return 0;var r=0|e;for(r!==e&&(r^=4294967295*e);e>4294967295;)r^=e/=4294967295;return Se(r)}if("string"===t)return e.length>Le?function(e){var t=Ve[e];void 0===t&&(t=Ee(e),Ne===De&&(Ne=0,Ve={}),Ne++,Ve[e]=t);return t}(e):Ee(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return function(e){var t;if(Re&&void 0!==(t=Ce.get(e)))return t;if(void 0!==(t=e[Oe]))return t;if(!Ae){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Oe]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}t=++Ie,1073741824&Ie&&(Ie=0);if(Re)Ce.set(e,t);else{if(void 0!==Pe&&!1===Pe(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Ae)Object.defineProperty(e,Oe,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Oe]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Oe]=t}}return t}(e);if("function"==typeof e.toString)return Ee(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function Ee(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return Se(t)}var Pe=Object.isExtensible,Ae=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();var Ce,Re="function"==typeof WeakMap;Re&&(Ce=new WeakMap);var Ie=0,Oe="__immutablehash__";"function"==typeof Symbol&&(Oe=Symbol(Oe));var Le=16,De=255,Ne=0,Ve={};function Fe(e){ge(e!==1/0,"Cannot perform this action with an infinite size.")}function Be(e){return null===e||void 0===e?Ke():Ue(e)&&!c(e)?e:Ke().withMutations(function(t){var r=n(e);Fe(r.size),r.forEach(function(e,r){return t.set(r,e)})})}function Ue(e){return!(!e||!e[ze])}t(Be,be),Be.of=function(){var t=e.call(arguments,0);return Ke().withMutations(function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}})},Be.prototype.toString=function(){return this.__toString("Map {","}")},Be.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},Be.prototype.set=function(e,t){return $e(this,e,t)},Be.prototype.setIn=function(e,t){return this.updateIn(e,y,function(){return t})},Be.prototype.remove=function(e){return $e(this,e,y)},Be.prototype.deleteIn=function(e){return this.updateIn(e,function(){return y})},Be.prototype.update=function(e,t,r){return 1===arguments.length?e(this):this.updateIn([e],t,r)},Be.prototype.updateIn=function(e,t,r){r||(r=t,t=void 0);var n=function e(t,r,n,i){var a=t===y;var o=r.next();if(o.done){var s=a?n:t,l=i(s);return l===s?t:l}ge(a||t&&t.set,"invalid keyPath");var u=o.value;var c=a?y:t.get(u,y);var f=e(c,r,n,i);return f===c?t:f===y?t.remove(u):(a?Ke():t).set(u,f)}(this,rr(e),t,r);return n===y?void 0:n},Be.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ke()},Be.prototype.merge=function(){return nt(this,void 0,arguments)},Be.prototype.mergeWith=function(t){return nt(this,t,e.call(arguments,1))},Be.prototype.mergeIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,Ke(),function(e){return"function"==typeof e.merge?e.merge.apply(e,r):r[r.length-1]})},Be.prototype.mergeDeep=function(){return nt(this,it,arguments)},Be.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return nt(this,at(t),r)},Be.prototype.mergeDeepIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,Ke(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,r):r[r.length-1]})},Be.prototype.sort=function(e){return Ct(Wt(this,e))},Be.prototype.sortBy=function(e,t){return Ct(Wt(this,t,e))},Be.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},Be.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new M)},Be.prototype.asImmutable=function(){return this.__ensureOwner()},Be.prototype.wasAltered=function(){return this.__altered},Be.prototype.__iterator=function(e,t){return new Ye(this,e,t)},Be.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},Be.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Qe(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Be.isMap=Ue;var ke,ze="@@__IMMUTABLE_MAP__@@",Ge=Be.prototype;function je(e,t){this.ownerID=e,this.entries=t}function He(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r}function We(e,t,r){this.ownerID=e,this.count=t,this.nodes=r}function Xe(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r}function qe(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r}function Ye(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&Je(e._root)}function Ze(e,t){return U(e,t[0],t[1])}function Je(e,t){return{node:e,index:0,__prev:t}}function Qe(e,t,r,n){var i=Object.create(Ge);return i.size=e,i._root=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Ke(){return ke||(ke=Qe(0))}function $e(e,t,r){var n,i;if(e._root){var a=w(x),o=w(b);if(n=et(e._root,e.__ownerID,0,void 0,t,r,a,o),!o.value)return e;i=e.size+(a.value?r===y?-1:1:0)}else{if(r===y)return e;i=1,n=new je(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=i,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?Qe(i,n):Ke()}function et(e,t,r,n,i,a,o,s){return e?e.update(t,r,n,i,a,o,s):a===y?e:(_(s),_(o),new qe(t,n,[i,a]))}function tt(e){return e.constructor===qe||e.constructor===Xe}function rt(e,t,r,n,i){if(e.keyHash===n)return new Xe(t,n,[e.entry,i]);var a,o=(0===r?e.keyHash:e.keyHash>>>r)&g,s=(0===r?n:n>>>r)&g;return new He(t,1<<o|1<<s,o===s?[rt(e,t,r+m,n,i)]:(a=new qe(t,n,i),o<s?[e,a]:[a,e]))}function nt(e,t,r){for(var i=[],a=0;a<r.length;a++){var s=r[a],l=n(s);o(s)||(l=l.map(function(e){return fe(e)})),i.push(l)}return ot(e,t,i)}function it(e,t,r){return e&&e.mergeDeep&&o(t)?e.mergeDeep(t):pe(e,t)?e:t}function at(e){return function(t,r,n){if(t&&t.mergeDeepWith&&o(r))return t.mergeDeepWith(e,r);var i=e(t,r,n);return pe(t,i)?t:i}}function ot(e,t,r){return 0===(r=r.filter(function(e){return 0!==e.size})).length?e:0!==e.size||e.__ownerID||1!==r.length?e.withMutations(function(e){for(var n=t?function(r,n){e.update(n,y,function(e){return e===y?r:t(e,r,n)})}:function(t,r){e.set(r,t)},i=0;i<r.length;i++)r[i].forEach(n)}):e.constructor(r[0])}function st(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function lt(e,t,r,n){var i=n?e:S(e);return i[t]=r,i}Ge[ze]=!0,Ge.delete=Ge.remove,Ge.removeIn=Ge.deleteIn,je.prototype.get=function(e,t,r,n){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(pe(r,i[a][0]))return i[a][1];return n},je.prototype.update=function(e,t,r,n,i,a,o){for(var s=i===y,l=this.entries,u=0,c=l.length;u<c&&!pe(n,l[u][0]);u++);var f=u<c;if(f?l[u][1]===i:s)return this;if(_(o),(s||!f)&&_(a),!s||1!==l.length){if(!f&&!s&&l.length>=ut)return function(e,t,r,n){e||(e=new M);for(var i=new qe(e,Te(r),[r,n]),a=0;a<t.length;a++){var o=t[a];i=i.update(e,0,void 0,o[0],o[1])}return i}(e,l,n,i);var h=e&&e===this.ownerID,d=h?l:S(l);return f?s?u===c-1?d.pop():d[u]=d.pop():d[u]=[n,i]:d.push([n,i]),h?(this.entries=d,this):new je(e,d)}},He.prototype.get=function(e,t,r,n){void 0===t&&(t=Te(r));var i=1<<((0===e?t:t>>>e)&g),a=this.bitmap;return 0==(a&i)?n:this.nodes[st(a&i-1)].get(e+m,t,r,n)},He.prototype.update=function(e,t,r,n,i,a,o){void 0===r&&(r=Te(n));var s=(0===t?r:r>>>t)&g,l=1<<s,u=this.bitmap,c=0!=(u&l);if(!c&&i===y)return this;var f=st(u&l-1),h=this.nodes,d=c?h[f]:void 0,p=et(d,e,t+m,r,n,i,a,o);if(p===d)return this;if(!c&&p&&h.length>=ct)return function(e,t,r,n,i){for(var a=0,o=new Array(v),s=0;0!==r;s++,r>>>=1)o[s]=1&r?t[a++]:void 0;return o[n]=i,new We(e,a+1,o)}(e,h,u,s,p);if(c&&!p&&2===h.length&&tt(h[1^f]))return h[1^f];if(c&&p&&1===h.length&&tt(p))return p;var x=e&&e===this.ownerID,b=c?p?u:u^l:u|l,w=c?p?lt(h,f,p,x):function(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var i=new Array(n),a=0,o=0;o<n;o++)o===t&&(a=1),i[o]=e[o+a];return i}(h,f,x):function(e,t,r,n){var i=e.length+1;if(n&&t+1===i)return e[t]=r,e;for(var a=new Array(i),o=0,s=0;s<i;s++)s===t?(a[s]=r,o=-1):a[s]=e[s+o];return a}(h,f,p,x);return x?(this.bitmap=b,this.nodes=w,this):new He(e,b,w)},We.prototype.get=function(e,t,r,n){void 0===t&&(t=Te(r));var i=(0===e?t:t>>>e)&g,a=this.nodes[i];return a?a.get(e+m,t,r,n):n},We.prototype.update=function(e,t,r,n,i,a,o){void 0===r&&(r=Te(n));var s=(0===t?r:r>>>t)&g,l=i===y,u=this.nodes,c=u[s];if(l&&!c)return this;var f=et(c,e,t+m,r,n,i,a,o);if(f===c)return this;var h=this.count;if(c){if(!f&&--h<ft)return function(e,t,r,n){for(var i=0,a=0,o=new Array(r),s=0,l=1,u=t.length;s<u;s++,l<<=1){var c=t[s];void 0!==c&&s!==n&&(i|=l,o[a++]=c)}return new He(e,i,o)}(e,u,h,s)}else h++;var d=e&&e===this.ownerID,p=lt(u,s,f,d);return d?(this.count=h,this.nodes=p,this):new We(e,h,p)},Xe.prototype.get=function(e,t,r,n){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(pe(r,i[a][0]))return i[a][1];return n},Xe.prototype.update=function(e,t,r,n,i,a,o){void 0===r&&(r=Te(n));var s=i===y;if(r!==this.keyHash)return s?this:(_(o),_(a),rt(this,e,t,r,[n,i]));for(var l=this.entries,u=0,c=l.length;u<c&&!pe(n,l[u][0]);u++);var f=u<c;if(f?l[u][1]===i:s)return this;if(_(o),(s||!f)&&_(a),s&&2===c)return new qe(e,this.keyHash,l[1^u]);var h=e&&e===this.ownerID,d=h?l:S(l);return f?s?u===c-1?d.pop():d[u]=d.pop():d[u]=[n,i]:d.push([n,i]),h?(this.entries=d,this):new Xe(e,this.keyHash,d)},qe.prototype.get=function(e,t,r,n){return pe(r,this.entry[0])?this.entry[1]:n},qe.prototype.update=function(e,t,r,n,i,a,o){var s=i===y,l=pe(n,this.entry[0]);return(l?i===this.entry[1]:s)?this:(_(o),s?void _(a):l?e&&e===this.ownerID?(this.entry[1]=i,this):new qe(e,this.keyHash,[n,i]):(_(a),rt(this,e,t,Te(n),[n,i])))},je.prototype.iterate=Xe.prototype.iterate=function(e,t){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===e(r[t?i-n:n]))return!1},He.prototype.iterate=We.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var a=r[t?i-n:n];if(a&&!1===a.iterate(e,t))return!1}},qe.prototype.iterate=function(e,t){return e(this.entry)},t(Ye,B),Ye.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r,n=t.node,i=t.index++;if(n.entry){if(0===i)return Ze(e,n.entry)}else if(n.entries){if(i<=(r=n.entries.length-1))return Ze(e,n.entries[this._reverse?r-i:i])}else if(i<=(r=n.nodes.length-1)){var a=n.nodes[this._reverse?r-i:i];if(a){if(a.entry)return Ze(e,a.entry);t=this._stack=Je(a,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ut=v/4,ct=v/2,ft=v/4;function ht(e){var t=_t();if(null===e||void 0===e)return t;if(dt(e))return e;var r=i(e),n=r.size;return 0===n?t:(Fe(n),n>0&&n<v?wt(0,n,m,null,new vt(r.toArray())):t.withMutations(function(e){e.setSize(n),r.forEach(function(t,r){return e.set(r,t)})}))}function dt(e){return!(!e||!e[pt])}t(ht,we),ht.of=function(){return this(arguments)},ht.prototype.toString=function(){return this.__toString("List [","]")},ht.prototype.get=function(e,t){if((e=E(this,e))>=0&&e<this.size){var r=Tt(this,e+=this._origin);return r&&r.array[e&g]}return t},ht.prototype.set=function(e,t){return function(e,t,r){if((t=E(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Et(e,t).set(0,r):Et(e,0,t+1).set(t,r)});t+=e._origin;var n=e._tail,i=e._root,a=w(b);t>=At(e._capacity)?n=Mt(n,e.__ownerID,0,t,r,a):i=Mt(i,e.__ownerID,e._level,t,r,a);if(!a.value)return e;if(e.__ownerID)return e._root=i,e._tail=n,e.__hash=void 0,e.__altered=!0,e;return wt(e._origin,e._capacity,e._level,i,n)}(this,e,t)},ht.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},ht.prototype.insert=function(e,t){return this.splice(e,0,t)},ht.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=m,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):_t()},ht.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(r){Et(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])})},ht.prototype.pop=function(){return Et(this,0,-1)},ht.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Et(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])})},ht.prototype.shift=function(){return Et(this,1)},ht.prototype.merge=function(){return Pt(this,void 0,arguments)},ht.prototype.mergeWith=function(t){return Pt(this,t,e.call(arguments,1))},ht.prototype.mergeDeep=function(){return Pt(this,it,arguments)},ht.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return Pt(this,at(t),r)},ht.prototype.setSize=function(e){return Et(this,0,e)},ht.prototype.slice=function(e,t){var r=this.size;return A(e,t,r)?this:Et(this,C(e,r),R(t,r))},ht.prototype.__iterator=function(e,t){var r=0,n=bt(this,t);return new B(function(){var t=n();return t===xt?{value:void 0,done:!0}:U(e,r++,t)})},ht.prototype.__iterate=function(e,t){for(var r,n=0,i=bt(this,t);(r=i())!==xt&&!1!==e(r,n++,this););return n},ht.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?wt(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},ht.isList=dt;var pt="@@__IMMUTABLE_LIST__@@",mt=ht.prototype;function vt(e,t){this.array=e,this.ownerID=t}mt[pt]=!0,mt.delete=mt.remove,mt.setIn=Ge.setIn,mt.deleteIn=mt.removeIn=Ge.removeIn,mt.update=Ge.update,mt.updateIn=Ge.updateIn,mt.mergeIn=Ge.mergeIn,mt.mergeDeepIn=Ge.mergeDeepIn,mt.withMutations=Ge.withMutations,mt.asMutable=Ge.asMutable,mt.asImmutable=Ge.asImmutable,mt.wasAltered=Ge.wasAltered,vt.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&g;if(n>=this.array.length)return new vt([],e);var i,a=0===n;if(t>0){var o=this.array[n];if((i=o&&o.removeBefore(e,t-m,r))===o&&a)return this}if(a&&!i)return this;var s=St(this,e);if(!a)for(var l=0;l<n;l++)s.array[l]=void 0;return i&&(s.array[n]=i),s},vt.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n,i=r-1>>>t&g;if(i>=this.array.length)return this;if(t>0){var a=this.array[i];if((n=a&&a.removeAfter(e,t-m,r))===a&&i===this.array.length-1)return this}var o=St(this,e);return o.array.splice(i+1),n&&(o.array[i]=n),o};var gt,yt,xt={};function bt(e,t){var r=e._origin,n=e._capacity,i=At(n),a=e._tail;return o(e._root,e._level,0);function o(e,s,l){return 0===s?function(e,o){var s=o===i?a&&a.array:e&&e.array,l=o>r?0:r-o,u=n-o;u>v&&(u=v);return function(){if(l===u)return xt;var e=t?--u:l++;return s&&s[e]}}(e,l):function(e,i,a){var s,l=e&&e.array,u=a>r?0:r-a>>i,c=1+(n-a>>i);c>v&&(c=v);return function(){for(;;){if(s){var e=s();if(e!==xt)return e;s=null}if(u===c)return xt;var r=t?--c:u++;s=o(l&&l[r],i-m,a+(r<<i))}}}(e,s,l)}}function wt(e,t,r,n,i,a,o){var s=Object.create(mt);return s.size=t-e,s._origin=e,s._capacity=t,s._level=r,s._root=n,s._tail=i,s.__ownerID=a,s.__hash=o,s.__altered=!1,s}function _t(){return gt||(gt=wt(0,0,m))}function Mt(e,t,r,n,i,a){var o,s=n>>>r&g,l=e&&s<e.array.length;if(!l&&void 0===i)return e;if(r>0){var u=e&&e.array[s],c=Mt(u,t,r-m,n,i,a);return c===u?e:((o=St(e,t)).array[s]=c,o)}return l&&e.array[s]===i?e:(_(a),o=St(e,t),void 0===i&&s===o.array.length-1?o.array.pop():o.array[s]=i,o)}function St(e,t){return t&&e&&t===e.ownerID?e:new vt(e?e.array.slice():[],t)}function Tt(e,t){if(t>=At(e._capacity))return e._tail;if(t<1<<e._level+m){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&g],n-=m;return r}}function Et(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new M,i=e._origin,a=e._capacity,o=i+t,s=void 0===r?a:r<0?a+r:i+r;if(o===i&&s===a)return e;if(o>=s)return e.clear();for(var l=e._level,u=e._root,c=0;o+c<0;)u=new vt(u&&u.array.length?[void 0,u]:[],n),c+=1<<(l+=m);c&&(o+=c,i+=c,s+=c,a+=c);for(var f=At(a),h=At(s);h>=1<<l+m;)u=new vt(u&&u.array.length?[u]:[],n),l+=m;var d=e._tail,p=h<f?Tt(e,s-1):h>f?new vt([],n):d;if(d&&h>f&&o<a&&d.array.length){for(var v=u=St(u,n),y=l;y>m;y-=m){var x=f>>>y&g;v=v.array[x]=St(v.array[x],n)}v.array[f>>>m&g]=d}if(s<a&&(p=p&&p.removeAfter(n,0,s)),o>=h)o-=h,s-=h,l=m,u=null,p=p&&p.removeBefore(n,0,o);else if(o>i||h<f){for(c=0;u;){var b=o>>>l&g;if(b!==h>>>l&g)break;b&&(c+=(1<<l)*b),l-=m,u=u.array[b]}u&&o>i&&(u=u.removeBefore(n,l,o-c)),u&&h<f&&(u=u.removeAfter(n,l,h-c)),c&&(o-=c,s-=c)}return e.__ownerID?(e.size=s-o,e._origin=o,e._capacity=s,e._level=l,e._root=u,e._tail=p,e.__hash=void 0,e.__altered=!0,e):wt(o,s,l,u,p)}function Pt(e,t,r){for(var n=[],a=0,s=0;s<r.length;s++){var l=r[s],u=i(l);u.size>a&&(a=u.size),o(l)||(u=u.map(function(e){return fe(e)})),n.push(u)}return a>e.size&&(e=e.setSize(a)),ot(e,t,n)}function At(e){return e<v?0:e-1>>>m<<m}function Ct(e){return null===e||void 0===e?Ot():Rt(e)?e:Ot().withMutations(function(t){var r=n(e);Fe(r.size),r.forEach(function(e,r){return t.set(r,e)})})}function Rt(e){return Ue(e)&&c(e)}function It(e,t,r,n){var i=Object.create(Ct.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=r,i.__hash=n,i}function Ot(){return yt||(yt=It(Ke(),_t()))}function Lt(e,t,r){var n,i,a=e._map,o=e._list,s=a.get(t),l=void 0!==s;if(r===y){if(!l)return e;o.size>=v&&o.size>=2*a.size?(n=(i=o.filter(function(e,t){return void 0!==e&&s!==t})).toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(n.__ownerID=i.__ownerID=e.__ownerID)):(n=a.remove(t),i=s===o.size-1?o.pop():o.set(s,void 0))}else if(l){if(r===o.get(s)[1])return e;n=a,i=o.set(s,[t,r])}else n=a.set(t,o.size),i=o.set(o.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=i,e.__hash=void 0,e):It(n,i)}function Dt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function Nt(e){this._iter=e,this.size=e.size}function Vt(e){this._iter=e,this.size=e.size}function Ft(e){this._iter=e,this.size=e.size}function Bt(e){var t=$t(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=er,t.__iterateUncached=function(t,r){var n=this;return e.__iterate(function(e,r){return!1!==t(r,e,n)},r)},t.__iteratorUncached=function(t,r){if(t===D){var n=e.__iterator(t,r);return new B(function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===L?O:L,r)},t}function Ut(e,t,r){var n=$t(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,i){var a=e.get(n,y);return a===y?i:t.call(r,a,n,e)},n.__iterateUncached=function(n,i){var a=this;return e.__iterate(function(e,i,o){return!1!==n(t.call(r,e,i,o),i,a)},i)},n.__iteratorUncached=function(n,i){var a=e.__iterator(D,i);return new B(function(){var i=a.next();if(i.done)return i;var o=i.value,s=o[0];return U(n,s,t.call(r,o[1],s,e),i)})},n}function kt(e,t){var r=$t(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=Bt(e);return t.reverse=function(){return e.flip()},t}),r.get=function(r,n){return e.get(t?r:-1-r,n)},r.has=function(r){return e.has(t?r:-1-r)},r.includes=function(t){return e.includes(t)},r.cacheResult=er,r.__iterate=function(t,r){var n=this;return e.__iterate(function(e,r){return t(e,r,n)},!r)},r.__iterator=function(t,r){return e.__iterator(t,!r)},r}function zt(e,t,r,n){var i=$t(e);return n&&(i.has=function(n){var i=e.get(n,y);return i!==y&&!!t.call(r,i,n,e)},i.get=function(n,i){var a=e.get(n,y);return a!==y&&t.call(r,a,n,e)?a:i}),i.__iterateUncached=function(i,a){var o=this,s=0;return e.__iterate(function(e,a,l){if(t.call(r,e,a,l))return s++,i(e,n?a:s-1,o)},a),s},i.__iteratorUncached=function(i,a){var o=e.__iterator(D,a),s=0;return new B(function(){for(;;){var a=o.next();if(a.done)return a;var l=a.value,u=l[0],c=l[1];if(t.call(r,c,u,e))return U(i,n?u:s++,c,a)}})},i}function Gt(e,t,r,n){var i=e.size;if(void 0!==t&&(t|=0),void 0!==r&&(r===1/0?r=i:r|=0),A(t,r,i))return e;var a=C(t,i),o=R(r,i);if(a!=a||o!=o)return Gt(e.toSeq().cacheResult(),t,r,n);var s,l=o-a;l==l&&(s=l<0?0:l);var u=$t(e);return u.size=0===s?s:e.size&&s||void 0,!n&&ie(e)&&s>=0&&(u.get=function(t,r){return(t=E(this,t))>=0&&t<s?e.get(t+a,r):r}),u.__iterateUncached=function(t,r){var i=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(t,r);var o=0,l=!0,u=0;return e.__iterate(function(e,r){if(!l||!(l=o++<a))return u++,!1!==t(e,n?r:u-1,i)&&u!==s}),u},u.__iteratorUncached=function(t,r){if(0!==s&&r)return this.cacheResult().__iterator(t,r);var i=0!==s&&e.__iterator(t,r),o=0,l=0;return new B(function(){for(;o++<a;)i.next();if(++l>s)return{value:void 0,done:!0};var e=i.next();return n||t===L?e:U(t,l-1,t===O?void 0:e.value[1],e)})},u}function jt(e,t,r,n){var i=$t(e);return i.__iterateUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterate(i,a);var s=!0,l=0;return e.__iterate(function(e,a,u){if(!s||!(s=t.call(r,e,a,u)))return l++,i(e,n?a:l-1,o)}),l},i.__iteratorUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterator(i,a);var s=e.__iterator(D,a),l=!0,u=0;return new B(function(){var e,a,c;do{if((e=s.next()).done)return n||i===L?e:U(i,u++,i===O?void 0:e.value[1],e);var f=e.value;a=f[0],c=f[1],l&&(l=t.call(r,c,a,o))}while(l);return i===D?e:U(i,a,c,e)})},i}function Ht(e,t,r){var n=$t(e);return n.__iterateUncached=function(n,i){var a=0,s=!1;return function e(l,u){var c=this;l.__iterate(function(i,l){return(!t||u<t)&&o(i)?e(i,u+1):!1===n(i,r?l:a++,c)&&(s=!0),!s},i)}(e,0),a},n.__iteratorUncached=function(n,i){var a=e.__iterator(n,i),s=[],l=0;return new B(function(){for(;a;){var e=a.next();if(!1===e.done){var u=e.value;if(n===D&&(u=u[1]),t&&!(s.length<t)||!o(u))return r?e:U(n,l++,u,e);s.push(a),a=u.__iterator(n,i)}else a=s.pop()}return{value:void 0,done:!0}})},n}function Wt(e,t,r){t||(t=tr);var n=s(e),i=0,a=e.toSeq().map(function(t,n){return[n,t,i++,r?r(t,n,e):t]}).toArray();return a.sort(function(e,r){return t(e[3],r[3])||e[2]-r[2]}).forEach(n?function(e,t){a[t].length=2}:function(e,t){a[t]=e[1]}),n?q(a):l(e)?Y(a):Z(a)}function Xt(e,t,r){if(t||(t=tr),r){var n=e.toSeq().map(function(t,n){return[t,r(t,n,e)]}).reduce(function(e,r){return qt(t,e[1],r[1])?r:e});return n&&n[0]}return e.reduce(function(e,r){return qt(t,e,r)?r:e})}function qt(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(void 0===r||null===r||r!=r)||n>0}function Yt(e,t,n){var i=$t(e);return i.size=new ee(n).map(function(e){return e.size}).min(),i.__iterate=function(e,t){for(var r,n=this.__iterator(L,t),i=0;!(r=n.next()).done&&!1!==e(r.value,i++,this););return i},i.__iteratorUncached=function(e,i){var a=n.map(function(e){return e=r(e),j(i?e.reverse():e)}),o=0,s=!1;return new B(function(){var r;return s||(r=a.map(function(e){return e.next()}),s=r.some(function(e){return e.done})),s?{value:void 0,done:!0}:U(e,o++,t.apply(null,r.map(function(e){return e.value})))})},i}function Zt(e,t){return ie(e)?t:e.constructor(t)}function Jt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Qt(e){return Fe(e.size),T(e)}function Kt(e){return s(e)?n:l(e)?i:a}function $t(e){return Object.create((s(e)?q:l(e)?Y:Z).prototype)}function er(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):X.prototype.cacheResult.call(this)}function tr(e,t){return e>t?1:e<t?-1:0}function rr(e){var t=j(e);if(!t){if(!W(e))throw new TypeError("Expected iterable or array-like: "+e);t=j(r(e))}return t}function nr(e,t){var r,n=function(a){if(a instanceof n)return a;if(!(this instanceof n))return new n(a);if(!r){r=!0;var o=Object.keys(e);!function(e,t){try{t.forEach(function(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){ge(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}.bind(void 0,e))}catch(e){}}(i,o),i.size=o.length,i._name=t,i._keys=o,i._defaultValues=e}this._map=Be(a)},i=n.prototype=Object.create(ir);return i.constructor=n,n}t(Ct,Be),Ct.of=function(){return this(arguments)},Ct.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ct.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},Ct.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ot()},Ct.prototype.set=function(e,t){return Lt(this,e,t)},Ct.prototype.remove=function(e){return Lt(this,e,y)},Ct.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ct.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},Ct.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Ct.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?It(t,r,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=r,this)},Ct.isOrderedMap=Rt,Ct.prototype[p]=!0,Ct.prototype.delete=Ct.prototype.remove,t(Dt,q),Dt.prototype.get=function(e,t){return this._iter.get(e,t)},Dt.prototype.has=function(e){return this._iter.has(e)},Dt.prototype.valueSeq=function(){return this._iter.valueSeq()},Dt.prototype.reverse=function(){var e=this,t=kt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},Dt.prototype.map=function(e,t){var r=this,n=Ut(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},Dt.prototype.__iterate=function(e,t){var r,n=this;return this._iter.__iterate(this._useKeys?function(t,r){return e(t,r,n)}:(r=t?Qt(this):0,function(i){return e(i,t?--r:r++,n)}),t)},Dt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var r=this._iter.__iterator(L,t),n=t?Qt(this):0;return new B(function(){var i=r.next();return i.done?i:U(e,t?--n:n++,i.value,i)})},Dt.prototype[p]=!0,t(Nt,Y),Nt.prototype.includes=function(e){return this._iter.includes(e)},Nt.prototype.__iterate=function(e,t){var r=this,n=0;return this._iter.__iterate(function(t){return e(t,n++,r)},t)},Nt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(L,t),n=0;return new B(function(){var t=r.next();return t.done?t:U(e,n++,t.value,t)})},t(Vt,Z),Vt.prototype.has=function(e){return this._iter.includes(e)},Vt.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},Vt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(L,t);return new B(function(){var t=r.next();return t.done?t:U(e,t.value,t.value,t)})},t(Ft,q),Ft.prototype.entrySeq=function(){return this._iter.toSeq()},Ft.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){if(t){Jt(t);var n=o(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}},t)},Ft.prototype.__iterator=function(e,t){var r=this._iter.__iterator(L,t);return new B(function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){Jt(n);var i=o(n);return U(e,i?n.get(0):n[0],i?n.get(1):n[1],t)}}})},Nt.prototype.cacheResult=Dt.prototype.cacheResult=Vt.prototype.cacheResult=Ft.prototype.cacheResult=er,t(nr,be),nr.prototype.toString=function(){return this.__toString(or(this)+" {","}")},nr.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},nr.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._defaultValues[e];return this._map?this._map.get(e,r):r},nr.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=ar(this,Ke()))},nr.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+or(this));if(this._map&&!this._map.has(e)&&t===this._defaultValues[e])return this;var r=this._map&&this._map.set(e,t);return this.__ownerID||r===this._map?this:ar(this,r)},nr.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:ar(this,t)},nr.prototype.wasAltered=function(){return this._map.wasAltered()},nr.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterator(e,t)},nr.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterate(e,t)},nr.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?ar(this,t,e):(this.__ownerID=e,this._map=t,this)};var ir=nr.prototype;function ar(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._map=t,n.__ownerID=r,n}function or(e){return e._name||e.constructor.name||"Record"}function sr(e){return null===e||void 0===e?pr():lr(e)&&!c(e)?e:pr().withMutations(function(t){var r=a(e);Fe(r.size),r.forEach(function(e){return t.add(e)})})}function lr(e){return!(!e||!e[cr])}ir.delete=ir.remove,ir.deleteIn=ir.removeIn=Ge.removeIn,ir.merge=Ge.merge,ir.mergeWith=Ge.mergeWith,ir.mergeIn=Ge.mergeIn,ir.mergeDeep=Ge.mergeDeep,ir.mergeDeepWith=Ge.mergeDeepWith,ir.mergeDeepIn=Ge.mergeDeepIn,ir.setIn=Ge.setIn,ir.update=Ge.update,ir.updateIn=Ge.updateIn,ir.withMutations=Ge.withMutations,ir.asMutable=Ge.asMutable,ir.asImmutable=Ge.asImmutable,t(sr,_e),sr.of=function(){return this(arguments)},sr.fromKeys=function(e){return this(n(e).keySeq())},sr.prototype.toString=function(){return this.__toString("Set {","}")},sr.prototype.has=function(e){return this._map.has(e)},sr.prototype.add=function(e){return hr(this,this._map.set(e,!0))},sr.prototype.remove=function(e){return hr(this,this._map.remove(e))},sr.prototype.clear=function(){return hr(this,this._map.clear())},sr.prototype.union=function(){var t=e.call(arguments,0);return 0===(t=t.filter(function(e){return 0!==e.size})).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var r=0;r<t.length;r++)a(t[r]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},sr.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map(function(e){return a(e)});var r=this;return this.withMutations(function(e){r.forEach(function(r){t.every(function(e){return e.includes(r)})||e.remove(r)})})},sr.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map(function(e){return a(e)});var r=this;return this.withMutations(function(e){r.forEach(function(r){t.some(function(e){return e.includes(r)})&&e.remove(r)})})},sr.prototype.merge=function(){return this.union.apply(this,arguments)},sr.prototype.mergeWith=function(t){var r=e.call(arguments,1);return this.union.apply(this,r)},sr.prototype.sort=function(e){return mr(Wt(this,e))},sr.prototype.sortBy=function(e,t){return mr(Wt(this,t,e))},sr.prototype.wasAltered=function(){return this._map.wasAltered()},sr.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate(function(t,n){return e(n,n,r)},t)},sr.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},sr.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},sr.isSet=lr;var ur,cr="@@__IMMUTABLE_SET__@@",fr=sr.prototype;function hr(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function dr(e,t){var r=Object.create(fr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function pr(){return ur||(ur=dr(Ke()))}function mr(e){return null===e||void 0===e?br():vr(e)?e:br().withMutations(function(t){var r=a(e);Fe(r.size),r.forEach(function(e){return t.add(e)})})}function vr(e){return lr(e)&&c(e)}fr[cr]=!0,fr.delete=fr.remove,fr.mergeDeep=fr.merge,fr.mergeDeepWith=fr.mergeWith,fr.withMutations=Ge.withMutations,fr.asMutable=Ge.asMutable,fr.asImmutable=Ge.asImmutable,fr.__empty=pr,fr.__make=dr,t(mr,sr),mr.of=function(){return this(arguments)},mr.fromKeys=function(e){return this(n(e).keySeq())},mr.prototype.toString=function(){return this.__toString("OrderedSet {","}")},mr.isOrderedSet=vr;var gr,yr=mr.prototype;function xr(e,t){var r=Object.create(yr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function br(){return gr||(gr=xr(Ot()))}function wr(e){return null===e||void 0===e?Pr():_r(e)?e:Pr().unshiftAll(e)}function _r(e){return!(!e||!e[Sr])}yr[p]=!0,yr.__empty=br,yr.__make=xr,t(wr,we),wr.of=function(){return this(arguments)},wr.prototype.toString=function(){return this.__toString("Stack [","]")},wr.prototype.get=function(e,t){var r=this._head;for(e=E(this,e);r&&e--;)r=r.next;return r?r.value:t},wr.prototype.peek=function(){return this._head&&this._head.value},wr.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,r=arguments.length-1;r>=0;r--)t={value:arguments[r],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Er(e,t)},wr.prototype.pushAll=function(e){if(0===(e=i(e)).size)return this;Fe(e.size);var t=this.size,r=this._head;return e.reverse().forEach(function(e){t++,r={value:e,next:r}}),this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):Er(t,r)},wr.prototype.pop=function(){return this.slice(1)},wr.prototype.unshift=function(){return this.push.apply(this,arguments)},wr.prototype.unshiftAll=function(e){return this.pushAll(e)},wr.prototype.shift=function(){return this.pop.apply(this,arguments)},wr.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Pr()},wr.prototype.slice=function(e,t){if(A(e,t,this.size))return this;var r=C(e,this.size);if(R(t,this.size)!==this.size)return we.prototype.slice.call(this,e,t);for(var n=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=n,this._head=i,this.__hash=void 0,this.__altered=!0,this):Er(n,i)},wr.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Er(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},wr.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var r=0,n=this._head;n&&!1!==e(n.value,r++,this);)n=n.next;return r},wr.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var r=0,n=this._head;return new B(function(){if(n){var t=n.value;return n=n.next,U(e,r++,t)}return{value:void 0,done:!0}})},wr.isStack=_r;var Mr,Sr="@@__IMMUTABLE_STACK__@@",Tr=wr.prototype;function Er(e,t,r,n){var i=Object.create(Tr);return i.size=e,i._head=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Pr(){return Mr||(Mr=Er(0))}function Ar(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}Tr[Sr]=!0,Tr.withMutations=Ge.withMutations,Tr.asMutable=Ge.asMutable,Tr.asImmutable=Ge.asImmutable,Tr.wasAltered=Ge.wasAltered,r.Iterator=B,Ar(r,{toArray:function(){Fe(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,r){e[r]=t}),e},toIndexedSeq:function(){return new Nt(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new Dt(this,!0)},toMap:function(){return Be(this.toKeyedSeq())},toObject:function(){Fe(this.size);var e={};return this.__iterate(function(t,r){e[r]=t}),e},toOrderedMap:function(){return Ct(this.toKeyedSeq())},toOrderedSet:function(){return mr(s(this)?this.valueSeq():this)},toSet:function(){return sr(s(this)?this.valueSeq():this)},toSetSeq:function(){return new Vt(this)},toSeq:function(){return l(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return wr(s(this)?this.valueSeq():this)},toList:function(){return ht(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return Zt(this,function(e,t){var r=s(e),i=[e].concat(t).map(function(e){return o(e)?r&&(e=n(e)):e=r?oe(e):se(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===i.length)return e;if(1===i.length){var a=i[0];if(a===e||r&&s(a)||l(e)&&l(a))return a}var u=new ee(i);return r?u=u.toKeyedSeq():l(e)||(u=u.toSetSeq()),(u=u.flatten(!0)).size=i.reduce(function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}},0),u}(this,e.call(arguments,0)))},includes:function(e){return this.some(function(t){return pe(t,e)})},entries:function(){return this.__iterator(D)},every:function(e,t){Fe(this.size);var r=!0;return this.__iterate(function(n,i,a){if(!e.call(t,n,i,a))return r=!1,!1}),r},filter:function(e,t){return Zt(this,zt(this,e,t,!0))},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function(e,t){return Fe(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){Fe(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate(function(n){r?r=!1:t+=e,t+=null!==n&&void 0!==n?n.toString():""}),t},keys:function(){return this.__iterator(O)},map:function(e,t){return Zt(this,Ut(this,e,t))},reduce:function(e,t,r){var n,i;return Fe(this.size),arguments.length<2?i=!0:n=t,this.__iterate(function(t,a,o){i?(i=!1,n=t):n=e.call(r,n,t,a,o)}),n},reduceRight:function(e,t,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return Zt(this,kt(this,!0))},slice:function(e,t){return Zt(this,Gt(this,e,t,!0))},some:function(e,t){return!this.every(Lr(e),t)},sort:function(e){return Zt(this,Wt(this,e))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return T(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,r){var n=Be().asMutable();return e.__iterate(function(i,a){n.update(t.call(r,i,a,e),0,function(e){return e+1})}),n.asImmutable()}(this,e,t)},equals:function(e){return me(this,e)},entrySeq:function(){var e=this;if(e._cache)return new ee(e._cache);var t=e.toSeq().map(Or).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Lr(e),t)},findEntry:function(e,t,r){var n=r;return this.__iterate(function(r,i,a){if(e.call(t,r,i,a))return n=[i,r],!1}),n},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(P)},flatMap:function(e,t){return Zt(this,function(e,t,r){var n=Kt(e);return e.toSeq().map(function(i,a){return n(t.call(r,i,a,e))}).flatten(!0)}(this,e,t))},flatten:function(e){return Zt(this,Ht(this,e,!0))},fromEntrySeq:function(){return new Ft(this)},get:function(e,t){return this.find(function(t,r){return pe(r,e)},void 0,t)},getIn:function(e,t){for(var r,n=this,i=rr(e);!(r=i.next()).done;){var a=r.value;if((n=n&&n.get?n.get(a,y):y)===y)return t}return n},groupBy:function(e,t){return function(e,t,r){var n=s(e),i=(c(e)?Ct():Be()).asMutable();e.__iterate(function(a,o){i.update(t.call(r,a,o,e),function(e){return(e=e||[]).push(n?[o,a]:a),e})});var a=Kt(e);return i.map(function(t){return Zt(e,a(t))})}(this,e,t)},has:function(e){return this.get(e,y)!==y},hasIn:function(e){return this.getIn(e,y)!==y},isSubset:function(e){return e="function"==typeof e.includes?e:r(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:r(e)).isSubset(this)},keyOf:function(e){return this.findKey(function(t){return pe(t,e)})},keySeq:function(){return this.toSeq().map(Ir).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Xt(this,e)},maxBy:function(e,t){return Xt(this,t,e)},min:function(e){return Xt(this,e?Dr(e):Fr)},minBy:function(e,t){return Xt(this,t?Dr(t):Fr,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return Zt(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return Zt(this,jt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Lr(e),t)},sortBy:function(e,t){return Zt(this,Wt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return Zt(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return Zt(this,function(e,t,r){var n=$t(e);return n.__iterateUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterate(n,i);var o=0;return e.__iterate(function(e,i,s){return t.call(r,e,i,s)&&++o&&n(e,i,a)}),o},n.__iteratorUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterator(n,i);var o=e.__iterator(D,i),s=!0;return new B(function(){if(!s)return{value:void 0,done:!0};var e=o.next();if(e.done)return e;var i=e.value,l=i[0],u=i[1];return t.call(r,u,l,a)?n===D?e:U(n,l,u,e):(s=!1,{value:void 0,done:!0})})},n}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Lr(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=c(e),r=s(e),n=t?1:0;return function(e,t){return t=Me(t,3432918353),t=Me(t<<15|t>>>-15,461845907),t=Me(t<<13|t>>>-13,5),t=Me((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=Se((t=Me(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(r?t?function(e,t){n=31*n+Br(Te(e),Te(t))|0}:function(e,t){n=n+Br(Te(e),Te(t))|0}:t?function(e){n=31*n+Te(e)|0}:function(e){n=n+Te(e)|0}),n)}(this))}});var Cr=r.prototype;Cr[f]=!0,Cr[F]=Cr.values,Cr.__toJS=Cr.toArray,Cr.__toStringMapper=Nr,Cr.inspect=Cr.toSource=function(){return this.toString()},Cr.chain=Cr.flatMap,Cr.contains=Cr.includes,Ar(n,{flip:function(){return Zt(this,Bt(this))},mapEntries:function(e,t){var r=this,n=0;return Zt(this,this.toSeq().map(function(i,a){return e.call(t,[a,i],n++,r)}).fromEntrySeq())},mapKeys:function(e,t){var r=this;return Zt(this,this.toSeq().flip().map(function(n,i){return e.call(t,n,i,r)}).flip())}});var Rr=n.prototype;function Ir(e,t){return t}function Or(e,t){return[t,e]}function Lr(e){return function(){return!e.apply(this,arguments)}}function Dr(e){return function(){return-e.apply(this,arguments)}}function Nr(e){return"string"==typeof e?JSON.stringify(e):String(e)}function Vr(){return S(arguments)}function Fr(e,t){return e<t?1:e>t?-1:0}function Br(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}return Rr[h]=!0,Rr[F]=Cr.entries,Rr.__toJS=Cr.toObject,Rr.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+Nr(e)},Ar(i,{toKeyedSeq:function(){return new Dt(this,!1)},filter:function(e,t){return Zt(this,zt(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Zt(this,kt(this,!1))},slice:function(e,t){return Zt(this,Gt(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(0|t,0),0===r||2===r&&!t)return this;e=C(e,e<0?this.count():this.size);var n=this.slice(0,e);return Zt(this,1===r?n:n.concat(S(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(e){return Zt(this,Ht(this,e,!1))},get:function(e,t){return(e=E(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,r){return r===e},void 0,t)},has:function(e){return(e=E(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Zt(this,function(e,t){var r=$t(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var i=this,a=0;return e.__iterate(function(e,n){return(!a||!1!==r(t,a++,i))&&!1!==r(e,a++,i)},n),a},r.__iteratorUncached=function(r,n){var i,a=e.__iterator(L,n),o=0;return new B(function(){return(!i||o%2)&&(i=a.next()).done?i:o%2?U(r,o++,t):U(r,o++,i.value,i)})},r}(this,e))},interleave:function(){var e=[this].concat(S(arguments)),t=Yt(this.toSeq(),Y.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),Zt(this,r)},keySeq:function(){return ye(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return Zt(this,jt(this,e,t,!1))},zip:function(){return Zt(this,Yt(this,Vr,[this].concat(S(arguments))))},zipWith:function(e){var t=S(arguments);return t[0]=this,Zt(this,Yt(this,e,t))}}),i.prototype[d]=!0,i.prototype[p]=!0,Ar(a,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),a.prototype.has=Cr.includes,a.prototype.contains=a.prototype.includes,Ar(q,n.prototype),Ar(Y,i.prototype),Ar(Z,a.prototype),Ar(be,n.prototype),Ar(we,i.prototype),Ar(_e,a.prototype),{Iterable:r,Seq:X,Collection:xe,Map:Be,OrderedMap:Ct,List:ht,Stack:wr,Set:sr,OrderedSet:mr,Record:nr,Range:ye,Repeat:ve,is:pe,fromJS:fe}},e.exports=n()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(853),i=r(852);function a(e,t,r){var a,o,s,l={};if(void 0!==r?(l=t,i.array(r)?a=r:i.primitive(r)?o=r:r&&r.sel&&(a=[r])):void 0!==t&&(i.array(t)?a=t:i.primitive(t)?o=t:t&&t.sel?a=[t]:l=t),void 0!==a)for(s=0;s<a.length;++s)i.primitive(a[s])&&(a[s]=n.vnode(void 0,void 0,void 0,a[s],void 0));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||function e(t,r,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==r)for(var i=0;i<r.length;++i){var a=r[i].data;void 0!==a&&e(a,r[i].children,r[i].sel)}}(l,a,e),n.vnode(e,l,a,o,void 0)}t.h=a,t.default=a},function(e,t,r){e.exports={default:r(662),__esModule:!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGhosters=t.getSubObjectHighlighters=void 0;var n,i=h(r(2)),a=h(r(18));t.createSelectionSet=S,t.removeSelectionSet=function(e){return{type:v,payload:e}},t.setActiveSelectionSet=T,t.touchSelectionSet=function(e){return{type:g,payload:e}},t.getActiveSelectionSet=E,t.getSelectionSets=P,t.selectNode=A,t.isSelected=C,t.lastSelectedNode=R,t.getSelectedNodes=function(e){var t=E(e);return t?t.ids:[]},t.deselectAll=I,t.getHighlighters=O,t.touchSelectionUI=function(e){return{type:"TOUCH_SELECTION_UI",payload:e}},t.setHighlighting=L,t.setHighlightColor=D,t.getHighlightColor=N,t.setHighlightThickness=V,t.getHighlightThickness=F,t.addGhoster=U,t.addSubObjectHighlighter=k,t.removeGhoster=z,t.removeSubObjectHighlighter=G;var o=r(36),s=h(r(50)),l=r(67),u=h(r(429)),c=r(430),f=h(r(431));r(4);function h(e){return e&&e.__esModule?e:{default:e}}var d="SET_HIGHLIGHT_COLOR",p="SET_HIGHLIGHT_THICKNESS",m="ADD_SELECTION_SET",v="REMOVE_SELECTION_SET",g="TOUCH_SELECTION_SET",y="MARK_ACTIVE_SELECTION_SET",x="ADD_SELECTION_UI",b="REMOVE_SELECTION_UI",w={GHOSTER:"GHOSTER",HIGHLIGHTER:"HIGHLIGHTER",SUBOBJECT_HIGHLIGHTER:"SUBOBJECT_HIGHLIGHTER"},_=(0,o.Map)({highlightColor:"#00ff00",highlightThickness:1,selectionUIs:(0,o.Map)(),selectionSets:(0,o.Map)(),activeSelectionSetId:null}),M=(0,s.default)(_,(n={},(0,a.default)(n,l.DELETE_NODE,function(e,t){var r=e.get("selectionSets").map(function(e){var r=e.get("set"),n=e;return r.includes(t)&&(r._remove(t),n=e.set("v",e.get("v")+1)),n});return e.set("selectionSets",r)}),(0,a.default)(n,l.CLEAR_SCENE,function(e){return e.set("activeSelectionSetId",null)}),(0,a.default)(n,d,function(e,t){return e.set("highlightColor",t)}),(0,a.default)(n,p,function(e,t){return e.set("highlightThickness",t)}),(0,a.default)(n,m,function(e,t){return e.setIn(["selectionSets",t.id],(0,o.Map)({set:t,v:0}))}),(0,a.default)(n,y,function(e,t){return e.set("activeSelectionSetId",t)}),(0,a.default)(n,v,function(e,t){var r=e.deleteIn(["selectionSets",t]);return t===e.get("activeSelectionSetId")&&(r=r.delete("activeSelectionSetId")),r}),(0,a.default)(n,g,function(e,t){var r=e.getIn(["selectionSets",t.id,"v"]);return e.setIn(["selectionSets",t.id,"v"],r+1)}),(0,a.default)(n,x,function(e,t){var r=t.ui,n=t.type;return e.setIn(["selectionUIs",r.id],(0,o.Map)({ui:r,type:n,v:0}))}),(0,a.default)(n,b,function(e,t){return e.deleteIn(["selectionUIs",t])}),(0,a.default)(n,"TOUCH_SELECTION_UI",function(e,t){var r=e.getIn(["selectionUIs",t.id,"v"]);return e.setIn(["selectionUIs",t.id,"v"],r+1)}),n));function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=new u.default(r,e,t);return r.dispatch({type:m,payload:n}),t.setActive&&r.dispatch({type:y,payload:n.id}),n}}function T(e){var t=e instanceof u.default?e.id:e;return{type:y,payload:t}}function E(e,t){var r=t||e.getIn(["selection","activeSelectionSetId"]);return e.getIn(["selection","selectionSets",r,"set"])}function P(e){return e.getIn(["selection","selectionSets"]).toArray().map(function(e){return e.get("set")})}function A(e){return function(t){var r=E(t);return r?r.set(e):t.dispatch(S(e,{setActive:!0}))}}function C(e,t){var r=E(e);return!!r&&r.includes(t)}function R(e){var t=E(e);return t?t.ids[t.ids.length-1]:void 0}function I(){return function(e){var t=E(e);t&&t.clear()}}function O(e){return e.getIn(["selection","selectionUIs"]).toList().filter(function(e){return e.get("type")===w.HIGHLIGHTER}).map(function(e){return e.get("ui")})}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=O(r).first();if(e)return n||(t.thickness||(t.thickness=F(r)),t.color||(t.color=N(r)),n=new c.Highlighter(r,t),r.dispatch({type:x,payload:{ui:n,type:w.HIGHLIGHTER}})),n;n&&r.dispatch({type:b,payload:n.id})}}function D(e){return function(t){var r=O(t).first();return r&&r.setColor(e),t.dispatch({type:d,payload:e})}}function N(e){return e.getIn(["selection","highlightColor"])}function V(e){return function(t){e>5&&(e=5),e<=0&&(e=.1);var r=O(t).first();return r&&r.setThickness(e),{type:p,payload:e}}}function F(e){return e.getIn(["selection","highlightThickness"])}function B(e){return function(t){return t.getIn(["selection","selectionUIs"]).toList().filter(function(t){return t.get("type")===w[e]}).map(function(e){return e.get("ui")})}}t.getSubObjectHighlighters=B(w.SUBOBJECT_HIGHLIGHTER),t.getGhosters=B(w.GHOSTER);function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var r=new c.Ghoster(t,e);return t.dispatch({type:x,payload:{ui:r,type:w.GHOSTER}}),r}}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var r=t.dispatch(S(e.selection)),n=new f.default(t,(0,i.default)({},e,{selection:r}));return t.dispatch({type:x,payload:{ui:n,type:w.SUBOBJECT_HIGHLIGHTER}}),n}}function z(e){return{type:b,payload:e}}function G(e){return{type:b,payload:e}}var j={reducer:M,actions:{selectNode:A,deselectAll:I,setHighlighting:L,setHighlightColor:D,setHighlightThickness:V,createSelectionSet:S,setActiveSelectionSet:T,addGhoster:U,removeGhoster:z,addSubObjectHighlighter:k,removeSubObjectHighlighter:G},selectors:{isSelected:C,lastSelectedNode:R,getHighlightColor:N,getHighlightThickness:F,getSelectionSets:P,getActiveSelectionSet:E}};t.default=j},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(2));t.uniformNormalMap=function(e,t){for(var r=e.positions.faceRangeOffsets,n=e.positions.faceValueIndices,u=new Uint32Array(n.length),c=new s.default(i.Vector3,n.length),f=0;f<r.length;f++)for(var h=r[f];h<r[f+1];h++)c.setAt(h,t),u[h]=h;var d=new o.default({faceRangeOffsets:e.positions.faceRangeOffsets,faceValueIndices:u,values:c}),p=new a.default(e);return p.normalMap=d,(0,l.default)(p)},t.flatNormalMap=g,t.areaWeightedNormalMap=y,t.autoSmooth=x,t.recalculateNormalsFromConnectivity=w;var i=r(0),a=u(r(5)),o=u(r(7)),s=u(r(3)),l=u(r(193));function u(e){return e&&e.__esModule?e:{default:e}}var c=-1,f=0,h=1,d=2,p=3,m=4,v={schema:{normalTypes:{label:"Normal Type",type:"Number",defaultValue:c},smoothingAngle:{label:"Smooth Angle",type:"Number",defaultValue:30,step:1,minValue:0,maxValue:180},flipfaces:{label:"Flip Faces",type:"Boolean",defaultValue:!1}},update:function(e,t){var r=e.normalTypes,i=(e.flipfaces,e.smoothingAngle),o=t.mesh;if(!o)return t;switch(r){case p:(o=(0,n.default)({},o)).normalMap=null,o=new a.default(o);break;case h:o=g(o);break;case f:o=y(o);break;case d:o=x(o,i);break;case m:o=w(o);break;case c:default:return t}return t.mesh=o,t}};function g(e){for(var t=e.positions.faceRangeOffsets,r=e.positions.faceValueIndices,n=e.positions.values,u=e.positions.valueAdjacency,c=new Uint32Array(r.length),f=new s.default(i.Vector3,r.length),h=new i.Vector3,d=new i.Vector3,p=new i.Vector3,m=0;m<t.length;m++)for(var v=t[m];v<t[m+1];v++){var g=u.getAdjacentFaceValuesIndicesOnFace(v,m);n.getAt(r[v],p),h.multiplyScalar(0),d.multiplyScalar(0),2===g.length&&(n.getAt(r[g[0]],h),n.getAt(r[g[1]],d),h.subVectors(p,h),d.subVectors(p,d),p.copy(d.cross(h))),p.normalize(),c[v]=v,f.setAt(v,p)}var y=new o.default({faceRangeOffsets:e.positions.faceRangeOffsets,faceValueIndices:c,values:f}),x=new a.default(e);return x.normalMap=y,(0,l.default)(x)}function y(e){for(var t=e.positions.faceValueIndices,r=e.positions.values,n=e.positions.valueAdjacency,l=new i.Vector3,u=new i.Vector3,c=new i.Vector3,f=new i.Vector3,h=new s.default(i.Vector3,r.length),d=0;d<r.length;d++){for(var p=n.getNumFacesForVertex(d),m=[],v=0;v<p;v++)m.push(n.getFaceForVertexId(d,v));r.getAt(d,f),c.multiplyScalar(0),l.multiplyScalar(0),u.multiplyScalar(0);for(var g=0;g<m.length;g++){var y=n.getAdjacentFaceValuesIndicesOnFace(b(e,d,m[g]),m[g]);2===y.length&&(r.getAt(t[y[0]],l),r.getAt(t[y[1]],u),l.subVectors(f,l),u.subVectors(f,u),c.add(u.cross(l)))}c.normalize(),h.setAt(d,c)}var x=new o.default({faceRangeOffsets:e.positions.faceRangeOffsets,faceValueIndices:e.positions.faceValueIndices,values:h}),w=new a.default(e);return w.normalMap=x,w}function x(e,t){var r=e,n=(t=t||30)*i.Math.DEG2RAD,l=r.faceRangeOffsets,u=r.positions.faceValueIndices,c=r.positions.values,f=new Uint32Array(r.positions.faceValueIndices.length),h=[],d=new i.Vector3,p=new i.Vector3,m=new i.Vector3,v=r.positions.valueAdjacency,g=r.positions.faceFaceAdjacency,y=0;function x(e,t,r){for(var n=[],i=l[t];i<l[t+1];i++)if(n.push(u[i]),u[i]===e)return void(f[i]=r);console.error("index "+e+" is not on face "+t,n)}for(var w=0;w<c.length;w++){var _=v.getNumFacesForVertex(w),M=[],S=[];c.getAt(w,m);for(var T=0;T<_;T++)M.push(v.getFaceForVertexId(w,T)),S.push(-1);for(var E=0;E<M.length;E++)if(!(S[E]>-1)){var P=M[E],A=g.adjacentFacesOnVertex(M[E],w),C=[];C.push(P);for(var R=P,I=A[0],O=-1,L=0;L<A.length;L++){for(var D=0;D<M.length;D++){var N=v.getAdjacentFaceValuesIndicesOnFace(b(r,w,R),R);c.getAt(u[N[0]],d),c.getAt(u[N[1]],p),d.subVectors(m,d),p.subVectors(m,p);var V=(new i.Vector3).copy(p.cross(d));V.normalize();var F=v.getAdjacentFaceValuesIndicesOnFace(b(r,w,I),I);c.getAt(u[F[0]],d),c.getAt(u[F[1]],p),d.subVectors(m,d),p.subVectors(m,p);var B=(new i.Vector3).copy(p.cross(d));B.normalize();var U=V.dot(B);if(I===P||S[M.indexOf(I)]>-1||Math.acos(U)>n)break;C.push(I);var k=g.adjacentFacesOnVertex(I,w);if(k.length<2)break;O=k[0]===R?k[1]:k[0],R=I,I=O}R=P,I=A[1],O=-1}for(var z=new i.Vector3,G=0;G<C.length;G++){x(w,C[G],y),S[M.indexOf(C[G])]=y;var j=v.getAdjacentFaceValuesIndicesOnFace(b(r,w,C[G]),C[G]);2===j.length&&(c.getAt(u[j[0]],d),c.getAt(u[j[1]],p),d.subVectors(m,d),p.subVectors(m,p),z.add(p.cross(d)))}z.normalize(),h.push(z),C.length>0&&y++}}for(var H=new s.default(i.Vector3,h.length),W=0;W<h.length;W++)H.setAt(W,h[W]);var X=new o.default({faceRangeOffsets:r.faceRangeOffsets,faceValueIndices:f,values:H}),q=new a.default(r);return q.normalMap=X,q}function b(e,t,r){for(var n=e.faceRangeOffsets,i=e.positions.faceValueIndices,a=n[r];a<n[r+1];a++)if(i[a]===t)return a;return-1}function w(e){if(!e||!e.normalMap||!e.normalMap.faceValueIndices)return e;for(var t=e.faceRangeOffsets,r=e.positions.faceValueIndices,n=e.normalMap.faceValueIndices,o=e.positions.values,l=new s.default(i.Vector3,e.normalMap.values.length),u=new i.Vector3,c=new i.Vector3,f=new i.Vector3,h=0;h<t.length-1;h++){o.getAt(r[t[h]],c),o.getAt(r[t[h]+1],u),o.getAt(r[t[h]+2],f),c.subVectors(u,c),f.subVectors(u,f),u.copy(f.cross(c));for(var d=t[h];d<t[h+1];d++)l.getAt(n[d],c),l.setAt(n[d],c.add(u))}for(var p=0;p<l.length;p++)l.getAt(p,u),u.normalize(),l.setAt(p,u);var m=new a.default(e);return m.normalMap.values=l,m}t.default=v},function(e,t,r){(function(){var t,n,i,a,o,s,l,u,c,f,h,d,p={}.hasOwnProperty;d=r(73),h=d.isObject,f=d.isFunction,c=d.isEmpty,o=null,t=null,n=null,i=null,a=null,l=null,u=null,s=null,e.exports=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],o||(o=r(173),t=r(165),n=r(166),i=r(171),a=r(172),l=r(175),u=r(176),s=r(174))}return e.prototype.element=function(e,t,r){var n,i,a,o,s,l,u,d,m,v;if(l=null,null==t&&(t={}),t=t.valueOf(),h(t)||(r=(m=[t,r])[0],t=m[1]),null!=e&&(e=e.valueOf()),Array.isArray(e))for(a=0,u=e.length;a<u;a++)i=e[a],l=this.element(i);else if(f(e))l=this.element(e.apply());else if(h(e)){for(s in e)if(p.call(e,s))if(v=e[s],f(v)&&(v=v.apply()),h(v)&&c(v)&&(v=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))l=this.attribute(s.substr(this.stringify.convertAttKey.length),v);else if(!this.options.separateArrayItems&&Array.isArray(v))for(o=0,d=v.length;o<d;o++)i=v[o],(n={})[s]=i,l=this.element(n);else h(v)?(l=this.element(s)).element(v):l=this.element(s,v)}else l=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),r):this.node(e,t,r);if(null==l)throw new Error("Could not create any elements with: "+e);return l},e.prototype.insertBefore=function(e,t,r){var n,i,a;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),a=this.parent.children.splice(i),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,a),n},e.prototype.insertAfter=function(e,t,r){var n,i,a;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),a=this.parent.children.splice(i+1),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,a),n},e.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element");return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},e.prototype.node=function(e,t,r){var n,i;return null!=e&&(e=e.valueOf()),t||(t={}),t=t.valueOf(),h(t)||(r=(i=[t,r])[0],t=i[1]),n=new o(this,e,t),null!=r&&n.text(r),this.children.push(n),n},e.prototype.text=function(e){var t;return t=new u(this,e),this.children.push(t),this},e.prototype.cdata=function(e){var r;return r=new t(this,e),this.children.push(r),this},e.prototype.comment=function(e){var t;return t=new n(this,e),this.children.push(t),this},e.prototype.commentBefore=function(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.commentAfter=function(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.raw=function(e){var t;return t=new l(this,e),this.children.push(t),this},e.prototype.instruction=function(e,t){var r,n,i,a,o;if(null!=e&&(e=e.valueOf()),null!=t&&(t=t.valueOf()),Array.isArray(e))for(a=0,o=e.length;a<o;a++)r=e[a],this.instruction(r);else if(h(e))for(r in e)p.call(e,r)&&(n=e[r],this.instruction(r,n));else f(t)&&(t=t.apply()),i=new s(this,e,t),this.children.push(i);return this},e.prototype.instructionBefore=function(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.instructionAfter=function(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.declaration=function(e,t,r){var n,a;return n=this.document(),a=new i(n,e,t,r),n.children[0]instanceof i?n.children[0]=a:n.children.unshift(a),n.root()||n},e.prototype.doctype=function(e,t){var r,n,i,o,s,l,u,c,f;for(r=this.document(),n=new a(r,e,t),i=o=0,l=(c=r.children).length;o<l;i=++o)if(c[i]instanceof a)return r.children[i]=n,n;for(i=s=0,u=(f=r.children).length;s<u;i=++s)if(f[i].isRoot)return r.children.splice(i,0,n),n;return r.children.push(n),n},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var e;for(e=this;e;){if(e.isDocument)return e.rootObject;if(e.isRoot)return e;e=e.parent}},e.prototype.document=function(){var e;for(e=this;e;){if(e.isDocument)return e;e=e.parent}},e.prototype.end=function(e){return this.document().end(e)},e.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node");return this.parent.children[e-1]},e.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[e+1]},e.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},e.prototype.ele=function(e,t,r){return this.element(e,t,r)},e.prototype.nod=function(e,t,r){return this.node(e,t,r)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(e,t,r){return this.declaration(e,t,r)},e.prototype.dtd=function(e,t){return this.doctype(e,t)},e.prototype.e=function(e,t,r){return this.element(e,t,r)},e.prototype.n=function(e,t,r){return this.node(e,t,r)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(e){return this.importDocument(e)},e}()}).call(this)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new n.Vector3,i=new n.Quaternion,a=new n.Vector3;e.decompose(r,i,a);var o=(new n.Vector3).copy((new n.Euler).setFromQuaternion(i,"ZYX"));o.multiplyScalar(180/Math.PI);var s={translation:r,rotation:o};t||(s.scale=a);return s};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(206)),i=a(r(284));function a(e){return e&&e.__esModule?e:{default:e}}var o={Empty:(0,n.default)({Array:(0,n.default)(new Array(0)),Float64Array:new Float64Array(0),Float32Array:new Float32Array(0),Uint32Array:new Uint32Array(0),Int32Array:new Int32Array(0)}),rangeCopy:function(e,t,r,n,i){for(var a=0;a!==i;++a)r[n+a]=e[t+a];return r},rangeEquals:function(e,t,r,n,i){for(var a=0;a!==i;++a)if(e[t+a]!==r[n+a])return!1;return!0},stridedCopy:function(e,t,r,n,i,a,o,s){for(var l=0;l!==s;++l)for(var u=0;u!==o;++u)n[i+l*a+u]=e[t+l*r+u];return n},accumulate:function(e){for(var t=1,r=e.length;t<r;++t)e[t]+=e[t-1];return e},slice:function(e,t,r){return void 0!==e.slice?e.slice(t,r):new e.constructor(e.subarray(t,r))},clone:function(e){return null!==e?void 0!==e.slice?e.slice(0):new e.constructor(e):null},binarySearch:function(e,t,r,n){for(var i=void 0===r?0:r,a=void 0===n?e.length-i:n,o=a;i<a;){var s=i+a>>>1;e[s]<t?i=s+1:a=s}return i<o&&e[i]===t?i:~i},sort:function(e,t){return void 0!==e.sort?e.sort(t||i.default.Numeric):Array.prototype.sort.call(e,t||i.default.Numeric)},unique:function(e,t){var r=e.length;if(r<=1)return e.length;var n=0,i=e[0];if(void 0===t)for(var a=1;a!==r;++a){var o=e[a];o!==i&&(i=o,++n!==a&&(e[n]=o))}else{var s=t;if(!optionallyBuiltMap)for(var l=1;l!==r;++l){var u=e[l];0!==s(u,i)&&(i=u,++n!==l&&(e[n]=u))}}return n+1},maybeCreate:function(e,t){if(!e)throw Error("Missing array!");var r=null!==t&&!isNaN(t);if("function"==typeof e||e instanceof Function){if(!r)throw Error("Missing or invalid length!");return new e(t)}if(r&&e.length<t)throw Error("Array too short: "+e.length+" < "+t);return e},copyObjects:function(e,t,r){if(!e)return null;var n=e.length;if(0===n)return t;var i=e[0].constructor.InstanceScalarSize||r;if(void 0===i)throw Error("Arrays.fromObjects: Cannot determine stride!");o.maybeCreate(arrayOrType,n*i);for(var a=0,s=0;a!==n;++a,s+=i){var l=e[a];void 0!==l?l.toArray(t,s):(console.warn("Arrays.fromObjects: Undefined object."),t.fill(0,s,s+i))}return t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(2)),i=s(r(56));t.default=l;var a=s(r(14)),o=r(0);function s(e){return e&&e.__esModule?e:{default:e}}function l(){a.default.call(this)}l.prototype=(0,i.default)(a.default.prototype),l.prototype.constructor=l,(0,n.default)(l,{TypePosition:1,TypeNormal:2,TypeTangent:4,TypeUV:8,TypeColor:16,id:function(e,t){var r=l.TypeInfo[e].AnchorName;return null!=t?r+"."+t:r},checkId:function(e){var t=l.getAnchorName(e),r=l.getMapName(e,t);if(null===l.getTypeInfo(t)||""===r)throw Error("Invalid PolyMap ID '"+e+"'!");return e},getAnchorName:function(e){var t=e.indexOf(".");return-1===t?e:e.slice(0,t)},getMapName:function(e,t){return e===t?null:e.slice(t.length+1)},getTypeInfo:function(e){for(var t=l.TypeInfo,r=0,n=t.length;r!==n;++r){var i=t[r];if(null!==i&&i.AnchorName===e)return t[r]}return null},resolveMap:function(e,t){var r=l.getAnchorName(t);if(t===r)return e[r];var n=e[r];return n&&n.byName[t.slice(r.length+1)]},assignMap:function(e,t,r){var n=l.getAnchorName(t),i=l.getMapName(t,n);if(null===i)e[n]=r;else{var a=e[n];a||(a=new l,e[n]=a),a.set(i,r)}},Iterator:function(e){a.default.Iterator.call(this),this.reset(e||null)}}),l.TypeInfo=[null,{Type:l.TypePosition,AnchorName:"positions",ElementType:o.Vector3},{Type:l.TypeNormal,AnchorName:"normalMap",ElementType:o.Vector3},null,{Type:l.TypeTangent,AnchorName:"tangentMap",ElementType:o.Vector4},null,null,null,{Type:l.TypeUV,AnchorName:"uvMaps",ElementType:o.Vector2},null,null,null,null,null,null,null,{Type:l.TypeColor,AnchorName:"colorMaps",ElementType:o.Color}],(0,n.default)(l,{IdPositions:l.id(l.TypePosition),IdNormals:l.id(l.TypeNormal),IdTangents:l.id(l.TypeTangent)}),l.Iterator.prototype=(0,n.default)((0,i.default)(a.default.Iterator.prototype),{constructor:l.Iterator,_super:a.default.Iterator.prototype,reset:function(e){this._super.reset.call(this,null);var t=e||null;this.mesh=t,this.byName=t,this.typeId=0},getId:function(){return l.id(this.typeId,this.name)},next:function(){if(this._super.next.call(this))return!0;var e=this.mesh,t=this.typeId,r=null,n=null;switch(t<<=1){case 0:t=1;case l.TypePosition:r=e.positions;break;case l.TypeNormal:r=e.normalMap;break;case l.TypeTangent:r=e.tangentMap;break;case l.TypeUV:n=e.uvMaps;break;case l.TypeColor:n=e.colorMaps;break;default:return this.reset(null),!1}return this.typeId=t,null!==n&&void 0!==n?(this.byName=n.byName,this._super.reset.call(this,n).next()):null!==r&&void 0!==r?(this.element=r,this.index=t,this.name=null,!0):this.next()}})},function(e,t,r){e.exports=!r(24)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){var n=r(27);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(r,n,i,a,o,s){return n&&t.hasOwnProperty(n.type)?t[n.type](r,n.payload,{action:n,createEvent:a,trackEvent:o,trackTiming:s,state:i}):r||e}}},function(e,t,r){"use strict";t.__esModule=!0;var n=a(r(653)),i=a(r(13));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var s,l=(0,i.default)(e);!(n=(s=l.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,r){e.exports=!r(69)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(48),i=r(326),a=r(220),o=Object.defineProperty;t.f=r(52)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(29),i=r(83);e.exports=r(45)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(51));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e.length)return[];for(var t=e.split(","),r=void 0,a=void 0,o=void 0,s=new i.default,l=0;l<t.length;l++){if(-1!==(o=t[l]).indexOf("-")){var u=o.split("-"),c=(0,n.default)(u,2);r=c[0],a=c[1],r=Number(r),a=Number(a)}else r=Number(o),a=r;s.add(r,a)}return s.expanded()};var i=a(r(538));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){e.exports={default:r(392),__esModule:!0}},function(e,t,r){"use strict";(function(e){var n=r(661),i=r(837),a=r(365);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),i=(e=s(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r=0|d(t.length);return 0===(e=s(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(c(t),e=s(e,t<0?0:0|d(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|d(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(n)return k(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var a,o=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=r;a<s;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(r+l>s&&(r=s-l),a=r;a>=0;a--){for(var f=!0,h=0;h<l;h++)if(u(e,a+h)!==u(t,h)){f=!1;break}if(f)return a}return-1}function y(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function x(e,t,r,n){return G(k(t,e.length-r),e,r,n)}function b(e,t,r,n){return G(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return b(e,t,r,n)}function _(e,t,r,n){return G(z(t),e,r,n)}function M(e,t,r,n){return G(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,l,u=e[i],c=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=r)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[i+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=E));return r}(n)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return u(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return function(e,t,r,n){return c(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},l.allocUnsafe=function(e){return f(null,e)},l.allocUnsafeSlow=function(e){return f(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,n,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,o=r-t,s=Math.min(a,o),u=this.slice(n,i),c=e.slice(t,r),f=0;f<s;++f)if(u[f]!==c[f]){a=u[f],o=c[f];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=U(e[a]);return i}function R(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,n,i,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function D(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function N(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function V(e,t,r,n,a){return a||N(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,a){return a||N(e,0,r,8),i.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;r=new l(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||O(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);O(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);O(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return V(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return V(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=l.isBuffer(e)?e:k(new l(e,n).toString()),s=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function k(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function z(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(t,r(49))},function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(121),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,a.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUB_OBJECT_TYPES=void 0;var n,i,a=h(r(47)),o=h(r(58)),s=h(r(18)),l=h(r(64)),u=r(10),c=h(r(55)),f=r(145);function h(e){return e&&e.__esModule?e:{default:e}}var d={Vertex:"Vertex",Edge:"Edge",Face:"Face"},p=(n={},(0,s.default)(n,d.Vertex,0),(0,s.default)(n,d.Edge,1),(0,s.default)(n,d.Face,2),n),m=(i={},(0,s.default)(i,d.Vertex,1),(0,s.default)(i,d.Edge,2),(0,s.default)(i,d.Face,0),i);t.SUB_OBJECT_TYPES=d;var v=function(){function e(t,r){var n=r.nodeId,i=r.type,o=r.indices;arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,a.default)(this,e),this.id=(0,l.default)(),this._store=t,this._type=d[i]||d.Vertex,this._nodeId=n,this._setIndices(o),this._touchNode()}return(0,o.default)(e,[{key:"getIndices",value:function(e){if(!e||e===this.type)return this._indices.slice();if(p[e]>p[this.type])return console.error("Can only convert indices to a smaller subobject type"),null;var t=this._store.get("sceneGraph").nodes[this.nodeId].type;if("PolyMesh"===t){var r=this._store.get("sceneGraph").evaluatedNodes[this.nodeId].PolyMesh.mesh;return r?new f.Selection(this._indices,m[this.type]).getIndices(r,m[e]):(console.error("Attempting to convert subobject indices for PolyMesh that does not exist"),null)}if("Shape"===t){var n=this._store.get("sceneGraph").evaluatedNodes[this.nodeId].Shape.shape;if(!n)return console.error("Attempting to convert subobject indices for Shape that does not exist"),null;var i=[],a={};if(this.type===d.Edge)for(var o=n.edgeVertexAdjacency,s=0;s<this._indices.length;++s){var l=o.getVerticesForEdge(this._indices[s]),u=l.v,c=l.vNext;a[u]||(a[u]=!0,i.push(u)),a[c]||(a[c]=!0,i.push(c))}else this.type===d.Face&&console.warn("Face to Edge/Vertex indices conversion not currently available for Shape nodes");return i}return console.warn("Subobject indices conversion not supported for node type:",t),null}},{key:"_setIndices",value:function(e){this._indices="string"==typeof e?(0,c.default)(e):Array.isArray(e)?e:[]}},{key:"setIndices",value:function(e){this._setIndices(e),this._touchNode()}},{key:"setType",value:function(e){e!==this._type&&(this._type=d[e]||d.Vertex,this._touchNode())}},{key:"_setNodeId",value:function(e){e!==this._nodeId&&(this._touchNode(),this._nodeId=e,this._indices=[],this._touchNode())}},{key:"clear",value:function(){this._indices=[],this._touchNode(),this._nodeId=null}},{key:"_clear",value:function(){this._indices=[],this._nodeId=null}},{key:"_touchNode",value:function(){this._store.dispatch((0,u.touch)(this._nodeId))}},{key:"nodeId",get:function(){return this._nodeId}},{key:"type",get:function(){return this._type}}]),e}();t.default=v},function(e,t,r){var n=r(122);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(81);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(231),i=r(82);e.exports=function(e){return n(i(e))}},function(e,t,r){"use strict";if(r(45)){var n=r(101),i=r(16),a=r(24),o=r(1),s=r(241),l=r(363),u=r(61),c=r(98),f=r(83),h=r(54),d=r(103),p=r(84),m=r(35),v=r(362),g=r(105),y=r(134),x=r(46),b=r(226),w=r(17),_=r(85),M=r(232),S=r(130),T=r(132),E=r(131).f,P=r(242),A=r(86),C=r(20),R=r(127),I=r(225),O=r(238),L=r(243),D=r(100),N=r(160),V=r(162),F=r(224),B=r(342),U=r(29),k=r(71),z=U.f,G=k.f,j=i.RangeError,H=i.TypeError,W=i.Uint8Array,X=Array.prototype,q=l.ArrayBuffer,Y=l.DataView,Z=R(0),J=R(2),Q=R(3),K=R(4),$=R(5),ee=R(6),te=I(!0),re=I(!1),ne=L.values,ie=L.keys,ae=L.entries,oe=X.lastIndexOf,se=X.reduce,le=X.reduceRight,ue=X.join,ce=X.sort,fe=X.slice,he=X.toString,de=X.toLocaleString,pe=C("iterator"),me=C("toStringTag"),ve=A("typed_constructor"),ge=A("def_constructor"),ye=s.CONSTR,xe=s.TYPED,be=s.VIEW,we=R(1,function(e,t){return Ee(O(e,e[ge]),t)}),_e=a(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),Me=!!W&&!!W.prototype.set&&a(function(){new W(1).set({})}),Se=function(e,t){var r=p(e);if(r<0||r%t)throw j("Wrong offset!");return r},Te=function(e){if(w(e)&&xe in e)return e;throw H(e+" is not a typed array!")},Ee=function(e,t){if(!(w(e)&&ve in e))throw H("It is not a typed array constructor!");return new e(t)},Pe=function(e,t){return Ae(O(e,e[ge]),t)},Ae=function(e,t){for(var r=0,n=t.length,i=Ee(e,n);n>r;)i[r]=t[r++];return i},Ce=function(e,t,r){z(e,t,{get:function(){return this._d[r]}})},Re=function(e){var t,r,n,i,a,o,s=_(e),l=arguments.length,c=l>1?arguments[1]:void 0,f=void 0!==c,h=P(s);if(void 0!=h&&!M(h)){for(o=h.call(s),n=[],t=0;!(a=o.next()).done;t++)n.push(a.value);s=n}for(f&&l>2&&(c=u(c,arguments[2],2)),t=0,r=m(s.length),i=Ee(this,r);r>t;t++)i[t]=f?c(s[t],t):s[t];return i},Ie=function(){for(var e=0,t=arguments.length,r=Ee(this,t);t>e;)r[e]=arguments[e++];return r},Oe=!!W&&a(function(){de.call(new W(1))}),Le=function(){return de.apply(Oe?fe.call(Te(this)):Te(this),arguments)},De={copyWithin:function(e,t){return B.call(Te(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return K(Te(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return F.apply(Te(this),arguments)},filter:function(e){return Pe(this,J(Te(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return $(Te(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Te(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Z(Te(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(Te(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Te(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ue.apply(Te(this),arguments)},lastIndexOf:function(e){return oe.apply(Te(this),arguments)},map:function(e){return we(Te(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Te(this),arguments)},reduceRight:function(e){return le.apply(Te(this),arguments)},reverse:function(){for(var e,t=Te(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return Q(Te(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ce.call(Te(this),e)},subarray:function(e,t){var r=Te(this),n=r.length,i=g(e,n);return new(O(r,r[ge]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,m((void 0===t?n:g(t,n))-i))}},Ne=function(e,t){return Pe(this,fe.call(Te(this),e,t))},Ve=function(e){Te(this);var t=Se(arguments[1],1),r=this.length,n=_(e),i=m(n.length),a=0;if(i+t>r)throw j("Wrong length!");for(;a<i;)this[t+a]=n[a++]},Fe={entries:function(){return ae.call(Te(this))},keys:function(){return ie.call(Te(this))},values:function(){return ne.call(Te(this))}},Be=function(e,t){return w(e)&&e[xe]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ue=function(e,t){return Be(e,t=y(t,!0))?f(2,e[t]):G(e,t)},ke=function(e,t,r){return!(Be(e,t=y(t,!0))&&w(r)&&x(r,"value"))||x(r,"get")||x(r,"set")||r.configurable||x(r,"writable")&&!r.writable||x(r,"enumerable")&&!r.enumerable?z(e,t,r):(e[t]=r.value,e)};ye||(k.f=Ue,U.f=ke),o(o.S+o.F*!ye,"Object",{getOwnPropertyDescriptor:Ue,defineProperty:ke}),a(function(){he.call({})})&&(he=de=function(){return ue.call(this)});var ze=d({},De);d(ze,Fe),h(ze,pe,Fe.values),d(ze,{slice:Ne,set:Ve,constructor:function(){},toString:he,toLocaleString:Le}),Ce(ze,"buffer","b"),Ce(ze,"byteOffset","o"),Ce(ze,"byteLength","l"),Ce(ze,"length","e"),z(ze,me,{get:function(){return this[xe]}}),e.exports=function(e,t,r,l){var u=e+((l=!!l)?"Clamped":"")+"Array",f="get"+e,d="set"+e,p=i[u],g=p||{},y=p&&T(p),x=!p||!s.ABV,_={},M=p&&p.prototype,P=function(e,r){z(e,r,{get:function(){return function(e,r){var n=e._d;return n.v[f](r*t+n.o,_e)}(this,r)},set:function(e){return function(e,r,n){var i=e._d;l&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[d](r*t+i.o,n,_e)}(this,r,e)},enumerable:!0})};x?(p=r(function(e,r,n,i){c(e,p,u,"_d");var a,o,s,l,f=0,d=0;if(w(r)){if(!(r instanceof q||"ArrayBuffer"==(l=b(r))||"SharedArrayBuffer"==l))return xe in r?Ae(p,r):Re.call(p,r);a=r,d=Se(n,t);var g=r.byteLength;if(void 0===i){if(g%t)throw j("Wrong length!");if((o=g-d)<0)throw j("Wrong length!")}else if((o=m(i)*t)+d>g)throw j("Wrong length!");s=o/t}else s=v(r),a=new q(o=s*t);for(h(e,"_d",{b:a,o:d,l:o,e:s,v:new Y(a)});f<s;)P(e,f++)}),M=p.prototype=S(ze),h(M,"constructor",p)):a(function(){p(1)})&&a(function(){new p(-1)})&&N(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=r(function(e,r,n,i){var a;return c(e,p,u),w(r)?r instanceof q||"ArrayBuffer"==(a=b(r))||"SharedArrayBuffer"==a?void 0!==i?new g(r,Se(n,t),i):void 0!==n?new g(r,Se(n,t)):new g(r):xe in r?Ae(p,r):Re.call(p,r):new g(v(r))}),Z(y!==Function.prototype?E(g).concat(E(y)):E(g),function(e){e in p||h(p,e,g[e])}),p.prototype=M,n||(M.constructor=p));var A=M[pe],C=!!A&&("values"==A.name||void 0==A.name),R=Fe.values;h(p,ve,!0),h(M,xe,u),h(M,be,!0),h(M,ge,p),(l?new p(1)[me]==u:me in M)||z(M,me,{get:function(){return u}}),_[u]=p,o(o.G+o.W+o.F*(p!=g),_),o(o.S,u,{BYTES_PER_ELEMENT:t}),o(o.S+o.F*a(function(){g.of.call(p,1)}),u,{from:Re,of:Ie}),"BYTES_PER_ELEMENT"in M||h(M,"BYTES_PER_ELEMENT",t),o(o.P,u,De),V(u),o(o.P+o.F*Me,u,{set:Ve}),o(o.P+o.F*!C,u,Fe),n||M.toString==he||(M.toString=he),o(o.P+o.F*a(function(){new p(1).slice()}),u,{slice:Ne}),o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!a(function(){M.toLocaleString.call([1,2])})),u,{toLocaleString:Le}),D[u]=C?A:R,n||C||h(M,pe,R)}}else e.exports=function(){}},function(e,t,r){var n=r(862),i=r(861);e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||i(o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var a=r||(0,n.get)(e,{id:t,evalPlug:"Transform"}),o=(0,i.getCameraController)(e).id;if(a&&a.target){var s=(0,n.getWorldTransform)(e,a.target.nodeId);return s}if(t===o)return(0,n.getWorldTransform)(e,i.virtualTargetId);var l=(0,n.get)(e,{scene:!0,evalPlug:"Player"}),u=(0,n.get)(e,{id:t,evalPlug:"Properties"})||{orbitTarget:i.virtualTargetId},c=l.overrideNavigation?l.orbitTarget:u.orbitTarget;return(0,n.getWorldTransform)(e,c||i.virtualTargetId)};var n=r(4),i=r(10)},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LOAD_SCENE="LOAD_SCENE",t.ADD_NODE="ADDNODE",t.ADD_VR_CAMERA="ADD_VR_CAMERA",t.DELETE_NODE="DELETE_NODE",t.LOADING_FILE="LOADING_FILE",t.LOADED_FILE="LOADED_FILE",t.LOADING_FILE_ERROR="LOADING_FILE_ERROR",t.USE_SCENE="USE_SCENE",t.INITIALIZE_SCENE="INITIALIZE_SCENE",t.CLEAR_SCENE="CLEAR_SCENE",t.PRELOADED_SCENE="PRELOADED_SCENE"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=b(r(33)),a=b(r(79)),o=b(r(30)),s=b(r(6)),l=b(r(18)),u=b(r(2));t.setFrameTime=function(e){return{type:M,payload:e}},t.getTime=V,t.setTime=F,t.isPlaying=k,t.startPlaying=z,t.incrementTime=function(){return function(e){if(e.getIn(["animation","playing"])){var t=e.getIn(["animation","startTime"]),r=e.getIn(["animation","time"]),n=t?new Date-t:0;e.dispatch(F(r+n))}}},t.stopPlaying=G,t.queueClip=H,t.findClip=W,t.queueAnimation=X,t.updateAnimationAttrs=q,t.findAnimation=Y,t.findAnimationIndex=Z,t.removeAnimation=J,t.addClip=Q,t.makeReducedClip=function(e,t){return function(r){var n=e.tracks.map(function(e){var t={};if(e.keyframes){var r=e.keyframes;if(r.ts){var n=Float32Array.from(r.ts),i=Float32Array.from(r.vs);t={ts:n,vs:i}}else t=(0,s.default)(r).reduce(function(e,t){var n=Float32Array.from(r[t].ts),i=Float32Array.from(r[t].vs);return e[t]={ts:n,vs:i},e},{});return(0,u.default)({},e,{keyframes:t})}return e}),i=(0,u.default)({},e,{tracks:n});return r.dispatch({type:O,payload:{clip:i,id:t}})}},t.getClips=K,t.getTimelineAnimation=ee,t.initPhysics=te,t.initializeAutoRotate=re,t.startAutoRotate=ne,t.stopAutoRotate=ie;var c=b(r(64)),f=r(36),h=b(r(50)),d=r(10),p=b(r(438)),m=r(67),v=r(120),g=r(4),y=r(90),x=r(25);function b(e){return e&&e.__esModule?e:{default:e}}var w=null,_="SET_TIME",M="SET_FRAME_TIME",S="START_PLAYING",T="STOP_PLAYING",E="UPDATE_TRACK",P="UPDATE_ANIMATION",A="REMOVE_ANIMATION",C="QUEUE_ANIMATION",R="QUEUE_TIMELINE_ANIMATION",I="ADD_CLIP",O="ADD_BUFFER_CLIP",L="INIT_PHYSICS";function D(e){return function(t){return t.id===e||t.name===e}}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,f.Map)();return(0,f.Map)({time:0,startTime:null,playing:!1,autoplay:!1,frameTime:0,animations:(0,f.List)(),clips:e,timelineAnimationIndex:-1,dynamicsWorld:null,dynamicBodies:{},kinematicBodies:{},bufferClips:(0,f.Map)()})}function V(e){return e.getIn(["animation","time"])}function F(e){return function(t){var r=new Date,n=e-t.getIn(["animation","time"]);if(t.getIn(["animation","animations"]).size){var i=0;t.getIn(["animation","animations"]).forEach(function(r,a){(function(e,t,r,n,i){var a=n.tracks,o=n.first,s=n.iterations,l=n.duration,u=n.easingFn,c=n.easingDuration,f=n.playSpeed,h=n.easingTime,p=n.start,m=(n.set,r);null!=n.animationTime&&(m=r+n.animationTime);var v=o&&r<p+c&&r>p;v?(h+=t*u(r-p,0,1,c),m=p+h):h&&(m=r-c+h);var g=f<0;1!==f&&(m=(m-p)*f+p,g&&(m+=l));for(var y=!1,x=[],b=(new Date,void 0),w=0;w<a.length;w++){var _=(b=a[w]).start+p,M=b.end+p;if(g?m>M:m<_)y=!0;else{var S=b.value,T=b,C=T.tween,R=T.path,I=T.keyframes,O=T.duration,L=T.currentValue,D=T.trackSet,N=b.startValue;null!=N||I||(N=(0,d.get)(e,R),e.dispatch({type:E,payload:{path:[i,w],attrs:{startValue:N}}}));var V=I?U(m-_,I,C,L):m>M?S:C(m-_,N,S,O),F=D(R,V);F&&x.push(F),(g?m>=_:m<=M)&&(y=!0)}}x.length&&e.dispatch((0,d.multi)(x));if(y)v&&e.dispatch({type:P,payload:{index:i,attrs:{easingTime:h}}});else if(s>1)e.dispatch({type:P,payload:{index:i,attrs:{first:!1,easingTime:0,start:r,iterations:s-1}}});else{if(n.onEnd&&n.onEnd(),i!==e.getIn(["animation","timelineAnimationIndex"]))return null==n.animationTime&&e.dispatch({type:A,payload:i}),!1;e.dispatch({type:P,payload:{index:i,attrs:{start:r}}}),e.dispatch(G())}return!0})(t,n,e,r,a-i)||i++})}else t.getIn(["animation","autoplay"])&&t.dispatch(G());var a=t.getIn(["animation","dynamicsWorld"]);a&&w.updatePhysics(t,n,e,a,t.getIn(["animation","dynamicBodies"]),t.getIn(["animation","kinematicBodies"])),t.dispatch({type:_,payload:{time:e,startTime:r}})}}function B(e,t,r,n){var i=t.vs,a=t.ts;if(!a.length)return n;var o=a.findIndex(function(t){return e<=t});return-1===o?i[i.length-1]:0===o?i[0]:r(e-a[o-1],i[o-1],i[o],a[o]-a[o-1])}function U(e,t,r,n){if(t.ts)return B(e,t,r,n);for(var i={},a=(0,s.default)(t),o=0;o<a.length;o++)i[a[o]]=B(e,t[a[o]],r,n[a[o]]);return i}function k(e){return e.getIn(["animation","playing"])}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){t.dispatch({type:S,payload:e.autoplay}),te({store:t}).then(function(){t.dispatch(F(t.getIn(["animation","time"])))})}}function G(){return{type:T}}function j(e,t,r){var n=Array.isArray(r.path)?r.path:r.path&&(0,g.find)(e,r.path);if(!n&&r.path&&r.path.id&&(delete r.path.id,n=(0,g.find)(e,r.path)),!n&&!r.set)return console.log("path is not defined for track",r),null;var i=r.start||0,a=r.value,o=r.tween||$(a,r.easing||"linear"),l=r.set||d.set,u=r.keyframes,c=u?function(e){if(e.ts)return e.ts.length?e.ts[e.ts.length-1]:0;for(var t=0,r=void 0,n=(0,s.default)(e),i=0;i<n.length;i++)t=(r=e[n[i]].ts).length?Math.max(r[r.length-1],t):t;return t}(u):r.duration||0;return{path:n,start:i,end:c+i,value:a,duration:c,tween:o,startValue:0===c?a:r.startValue,keyframes:u,currentValue:n&&(0,d.get)(e,n),trackSet:l}}function H(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=W(n,e,{immutable:!0});if(i)return n.dispatch(X((0,u.default)({},i.toJS(),t))).then(function(e){return r.useTimeline&&n.dispatch({type:R}),e})}}function W(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.getIn(["animation","bufferClips"]),i=e.getIn(["animation","clips"]),a=function(e){return e.get("name")===t},o=(0,y.isUuid)(t)?n.get(t)||i.get(t):n.find(a)||i.find(a);return o&&(r.immutable?o:o.toJS())}function X(e){return function(t){var r=t.getIn(["animation","time"]),n=(0,c.default)(),i=e.name||"Animation",a=e.iterations||1,s=e.start||r,l=e.easing||"linear",u=$(1,l),f=e.easingDuration||0,h=void 0!==e.playSpeed?e.playSpeed:1,d=e.tracks.map(function(e){return j(t,0,e)}).filter(function(e){return!!e}),p=d.reduce(function(e,t){return Math.max(e,t.end)},0),m=e.onEnd||null;return t.dispatch({type:C,payload:{id:n,name:i,start:s,easingTime:0,first:!0,easing:l,easingFn:u,easingDuration:f,iterations:a,tracks:d,onEnd:m,playSpeed:h,duration:p,animationTime:e.animationTime||null}}),e.autoplay&&!k(t)?t.dispatch(z({autoplay:!0})):t.dispatch(F(r)),o.default.resolve(n)}}function q(e,t){return function(r){var n=Z(r,e);-1!==n&&(r.dispatch({type:P,payload:{index:n,attrs:t}}),r.dispatch(F(V(r))))}}function Y(e,t){return e.getIn(["animation","animations"]).find(D(t))}function Z(e,t){return e.getIn(["animation","animations"]).findIndex(D(t))}function J(e){return function(t){var r=Z(t,e);if(-1!==r){var n=t.getIn(["animation","animations",r]);return n.onEnd&&n.onEnd(!0),t.dispatch({type:A,payload:r})}}}function Q(e,t){return{type:I,payload:{clip:e,id:t}}}function K(e){return(0,a.default)(e.getIn(["animation","clips"]).toJS())}function $(e,t){var r=p.default[t];if(!r)throw new Error("Unknown easing function: "+t);if("object"!==(void 0===e?"undefined":(0,i.default)(e)))return r;var n=(0,s.default)(e);return function(e,t,i,a){for(var o={},s=0;s<n.length;s++){var l=n[s];o[l]=r(e,t[l],i[l],a)}return o}}function ee(e){var t=e.getIn(["animation","timelineAnimationIndex"]);return t<0?null:e.getIn(["animation","animations",t])}function te(e){var t=e.store,n=(0,g.getAll)(t,{plug:"Properties",properties:{name:"RigidBodyProperties"}});return!w&&(0,s.default)(n).length>0&&!t.getIn(["animation","dynamicsWorld"])?new o.default(function(e){r.e(3).then(function(i){w=r(877),t.dispatch({type:L,payload:w.initPhysics(t,n)}),e()}.bind(null,r)).catch(r.oe)}):o.default.resolve()}function re(){return function(e){var t=function(e){var t=void 0,r={start:function(r){if(!t){var n=(0,g.get)(e,{scene:!0,evalPlug:"Player"}),i=n?1e3*n.autoRotateResumeTime:5e3;n&&n.autoRotate&&(t=setTimeout(function(){e.dispatch(ne(n))},r||i))}},stop:function(){e.dispatch(ie()),clearTimeout(t),t=null},mousedown:function(){return r.stop()},mouseup:function(){return r.start()}};return{enabled:!0,tool:r}}(e);e.dispatch((0,x.addCommand)(t,"autoRotate")),e.api.on("rendered",function(){t.tool.start(1e3)})}}function ne(e){return function(t){var r=e||(0,g.get)(t,{scene:!0,evalPlug:"Player"}),n=r&&r.autoRotateNode;if(!r||!n)return!1;var i="+"===r.autoRotateDirection?360:-360,a=(0,g.find)(t,{id:n,plug:"Transform",property:"rotation"}),o=(0,g.get)(t,{id:n,plug:"Transform",property:"rotation"}),s=-1!==Z(t,"autoRotate");a&&o&&!s&&t.dispatch(X({name:"autoRotate",autoplay:!0,iterations:1/0,easingDuration:3e3,tracks:[{path:a,start:0,duration:1e3*r.autoRotateSpeed,value:{x:o.x,y:o.y+i,z:o.z}}]}))}}function ie(){return J("autoRotate")}var ae={reducer:(0,h.default)(N(),(n={},(0,l.default)(n,v.ActionTypes.INIT,function(e){return N()}),(0,l.default)(n,_,function(e,t){var r=t.time,n=t.startTime;return e.set("time",r).set("startTime",n)}),(0,l.default)(n,M,function(e,t){var r=e.get("frameTime");return e.set("frameTime",r+.1*(t-r))}),(0,l.default)(n,S,function(e,t){return e.merge({playing:!0,autoplay:!!t})}),(0,l.default)(n,T,function(e){return e.set("playing",!1)}),(0,l.default)(n,E,function(e,t){var r=t.path,n=t.attrs,i=e.getIn(["animations",r[0]]),a=i&&i.tracks[r[1]];return a&&(0,u.default)(a,n),e}),(0,l.default)(n,P,function(e,t){var r=t.index,n=t.attrs,i=e.getIn(["animations",r]);return i&&(0,u.default)(i,n),e}),(0,l.default)(n,A,function(e,t){var r=e;return t===e.get("timelineAnimationIndex")&&(r=r.set("timelineAnimationIndex",-1)),r.deleteIn(["animations",t])}),(0,l.default)(n,C,function(e,t){return e.updateIn(["animations"],(0,f.List)(),function(e){return e.push(t)})}),(0,l.default)(n,R,function(e,t){return e.set("timelineAnimationIndex",e.get("animations").size-1)}),(0,l.default)(n,I,function(e,t){var r=t.clip,n=t.id;return e.setIn(["clips",n],(0,f.Map)(r).set("id",n))}),(0,l.default)(n,O,function(e,t){var r=t.clip,n=t.id;return e.setIn(["bufferClips",n],(0,f.Map)(r).set("id",n))}),(0,l.default)(n,m.LOAD_SCENE,function(e,t){var r=t.clips,n=t.bufferClips;return r?e.mergeIn(["clips"],r).mergeIn(["bufferClips"],n):e}),(0,l.default)(n,m.CLEAR_SCENE,function(e){return N()}),(0,l.default)(n,L,function(e,t){var r=t.dynamicsWorld,n=t.dynamicBodies,i=t.kinematicBodies;return e.set("dynamicsWorld",r).set("dynamicBodies",n).set("kinematicBodies",i)}),n)),actions:{setTime:F,startPlaying:z,stopPlaying:G,removeAnimation:J,queueAnimation:X,addClip:Q,queueClip:H,updateAnimationAttrs:q,initializeAutoRotate:re,startAutoRotate:ne,stopAutoRotate:ie},selectors:{findAnimation:Y,findClip:W,getTime:V,getClips:K,getTimelineAnimation:ee,isPlaying:k}};t.default=ae},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(53),i=r(125);e.exports=r(52)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(133),i=r(83),a=r(62),o=r(134),s=r(46),l=r(346),u=Object.getOwnPropertyDescriptor;t.f=r(45)?u:function(e,t){if(e=a(e),t=o(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(16),i=r(54),a=r(46),o=r(86)("src"),s=Function.toString,l=(""+s).split("toString");r(128).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,s){var u="function"==typeof r;u&&(a(r,"name")||i(r,"name",t)),e[t]!==r&&(u&&(a(r,o)||i(r,o,e[t]?""+e[t]:l.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||s.call(this)})},function(e,t){(function(){var t,r,n,i,a,o,s=[].slice,l={}.hasOwnProperty;t=function(){var e,t,r,n,a,o;if(o=arguments[0],a=2<=arguments.length?s.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(e=0,r=a.length;e<r;e++)if(null!=(n=a[e]))for(t in n)l.call(n,t)&&(o[t]=n[t]);return o},i=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},a=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},r=function(e){return i(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},n=function(e){var t;if(r(e))return!e.length;for(t in e)if(l.call(e,t))return!1;return!0},o=function(e){var t,r;return a(e)&&(r=Object.getPrototypeOf(e))&&(t=r.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},e.exports.assign=t,e.exports.isFunction=i,e.exports.isObject=a,e.exports.isArray=r,e.exports.isEmpty=n,e.exports.isPlainObject=o}).call(this)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errors=void 0;var n,i=A(r(387)),a=A(r(386)),o=A(r(38)),s=A(r(79)),l=A(r(51)),u=A(r(6)),c=A(r(30)),f=A(r(33)),h=A(r(18)),d=A(r(2));t.initConfigurator=te,t.initializeConfigCommand=re,t.triggerEvent=ne,t.initConfiguration=ie,t.setAttributeVisibility=oe,t.applyPreset=ue,t.setConfiguration=ce,t.removeConfigurator=he,t.getConfigurationState=de,t.executeAttribute=pe,t.executeVariant=me,t.convertCSV=xe,t.initializeAttribute=be,t.initializePreset=Me,t.initializeConfiguration=function(e){var t=e.id,r=e.config,n=e.sceneId;return function(e){return e.dispatch({type:q,payload:{id:t,config:r,sceneId:n}})}},t.initializeConfig=Te,t.getConfigs=function(e){return e.getIn(["configuration","configs"])},t.getAttributes=Ee,t.getAttribute=Pe,t.getAttributesByType=Ae,t.getForms=Ce,t.getEvents=Ie,t.getEvent=Oe,t.getFormState=Le,t.getForm=De,t.getConfigurator=Ne,t.getConfigurators=Ve,t.getPresets=Fe,t.getPreset=Be,t.getScript=Ue,t.getTableData=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).id||(0,_.getSceneId)(e);return e.getIn(["configuration","configs",t,"data"])||[]},t.getScriptError=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).id||(0,_.getSceneId)(e);return e.getIn(["configuration","configsState",t,"scriptError"])},t.setScript=Ge,t.applyDataToAttributes=je,t.applyDataToMetadata=function(e,t,r){var n=t.map(function(t){return!(!t.templated||!t.templated.enabled)&&e.header[t.templated.name]}).filter(function(e){return!1!==e});return(0,u.default)(r).reduce(function(t,i){t[i]={};var a=e.header[r[i].name];return e.table.forEach(function(e){var r=n.map(function(t){return e[t]}).join(":");t[i][r]=e[a]}),t},{})},t.setTableData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=xe(e),i=t.id||(0,_.getSceneId)(r),a=Ee(r,{id:i}),o=je(n,a);return c.default.all(o.map(function(e){return r.dispatch({type:N,payload:{attrId:e.id,id:i,attrs:e,key:"attributes"}})}))}},t.publishToImage=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).id||(0,_.getSceneId)(store);return{type:N,payload:{id:t,image:e,key:"image"}}},t.getImageOptions=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).id||(0,_.getSceneId)(e);return e.getIn(["configuration","configs",t,"image"])||{}},t.getProductTour=He,t.getProducts=We,t.getProduct=Xe,t.getExternalEl=qe,t.getConfiguration=Ye,t.getConfigurations=Ze,t.setSavingSceneId=function(e){return{type:F,payload:e}},t.canUndo=function(e){return e.getIn(["configuration","history"]).size>0},t.undo=function(){return{type:B}},t.addAttribute=Je,t.setAttribute=Qe,t.swapAttributes=Ke,t.deleteAttribute=$e,t.addForm=et,t.deleteForm=tt,t.setForm=rt,t.addEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r),i=_e(e);return r.dispatch({type:L,payload:{id:n,attrs:i,key:"events"}}).then(function(){return r.dispatch(re({id:n})),i.id})}},t.deleteEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r);return r.dispatch({type:D,payload:{id:n,attrId:e,key:"events"}}).then(function(e){return r.dispatch(re({id:n})),!0})}},t.setEvent=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=r.id||(0,_.getSceneId)(n);return n.dispatch({type:N,payload:{id:i,attrId:e,attrs:t,key:"events"}}).then(function(e){var t=e.attrId;return n.dispatch(re({id:i})),t})}},t.addPreset=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r),i=Me(e);return r.dispatch({type:L,payload:{id:n,attrs:i,key:"presets"}}),c.default.resolve(i.id)}},t.deletePreset=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r);return r.dispatch({type:D,payload:{id:n,attrId:e,key:"presets"}})}},t.setPreset=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=r.id||(0,_.getSceneId)(n);return n.dispatch({type:N,payload:{id:i,attrId:e,attrs:t,key:"presets"}})}},t.setFormState=nt,t.addProduct=it,t.setProduct=at,t.deleteProduct=ot,t.isSaved=st,t.isSaving=lt,t.shouldSave=ut,t.hasSaveError=ct,t.save=function(){var e=this;return function(t){var r=ut(t);if(r){var n=t.getIn(["configuration","configs",r]),s=function(e){var t=e.toJS();return delete t.scriptInitialized,delete t.scriptError,t.attributes=t.attributes.map(function(e){var t=(0,d.default)({},e);return delete t.prop,t}),t.forms=t.forms.map(function(e){return e.fields=e.fields.map(function(e){return e.attribute=void 0,e}),e}),(0,o.default)(t)}(n),l=t.getIn(["configuration","savedConfig","configStr"]);if(s!==l){var u=JSON.parse(s),c=t.getIn(["configuration","numSaveErrors"]);t.dispatch({type:U}),setTimeout((0,a.default)(i.default.mark(function a(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.callApi({types:[U,k,z],url:"https://clara.io/api/scenes/"+r+"/configuration",method:"POST",payload:(0,m.Map)({config:n,configStr:s}),successPayload:!0,body:{configuration:u,version:(0,_.getV1Version)(t,r)}});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error("SAVE ERROR",e.t0),e.abrupt("return");case 9:t.dispatch((0,_.bumpV1Version)(r));case 10:case"end":return e.stop()}},a,e,[[0,5]])})),1e3*c*c)}}}},t.getBOM=dt,t.loadConfigurations=pt,t.onChange=mt,t.modifyBOM=vt;var p=A(r(64)),m=r(36),v=A(r(50)),g=r(4),y=r(23),x=r(140),b=r(8),w=r(68),_=r(19),M=r(25),S=r(90),T=r(67),E=A(r(178)),P=r(111);function A(e){return e&&e.__esModule?e:{default:e}}function C(e){return function(t){return t.id===e||t.name===e}}var R=t.errors={VERSION_CONFLICT:"VERSION_CONFLICT",UNAUTHORIZED:"UNAUTHORIZED"},I=(0,m.Map)({configuration:(0,m.Map)(),configs:(0,m.Map)(),configsState:(0,m.Map)(),savingSceneId:null,history:(0,m.List)(),savedConfig:(0,m.Map)(),configurators:(0,m.Map)(),formState:(0,m.Map)(),productTour:null,products:(0,m.Map)(),saving:!1,numSaveErrors:0,saveError:!1,changeListeners:(0,m.List)(),bomChangeHandlers:(0,m.List)()}),O=function(){return(0,m.Map)({hidden:{},optionsVisible:{}})},L="ADD_CONFIG",D="DEL_CONFIG",N="SET_CONFIG",V="SET_CONFIGURATION",F="SET_SAVING_SCENE_ID",B="CONFIG_UNDO",U="CONFIG_SAVING",k="CONFIG_SAVED",z="CONFIG_SAVE_ERROR",G="REMOVE_CONFIGURATOR",j="SET_CONFIGURATOR_FORM_STATE",H="ADD_PRODUCT",W="DEL_PRODUCT",X="SET_PRODUCT",q="INITIALIZE_CONFIGURATION",Y="SET_SCRIPT_ERROR",Z="SET_SCRIPT_ACTIVATED",J="ADD_CHANGE_LISTENER",Q="RESET_CHANGE_LISTENERS",K="ADD_BOM_CHANGE_HANDLER",$="SET_ATTRIBUTES",ee=(0,m.Map)({scriptError:"",scriptActivated:!1});function te(e){return function(t){if(e.async)return t.dispatch(function(e){return function(t){var r=e.skipModels,n=e.form,i=e.preset,a=e.el,o=e.panel,s=e.productTour,l=e.configuration,u=e.configurations,h=e.id||(0,_.getSceneId)(t),d=void 0===r||r,p=n&&("object"===(void 0===n?"undefined":(0,f.default)(n))?we(n,{attributes:Ee(t,{id:h}),events:Ie(t,{id:h})}):De(t,n,{id:h}));t.dispatch({type:"INIT_CONFIGURATOR",payload:{id:h,skipModels:d,form:"object"===(void 0===n?"undefined":(0,f.default)(n))?p:n,el:a,panel:o,productTour:s}});var m=Ee(t,{id:h}).length>0,v=c.default.resolve();return i&&(v=v.then(function(){return t.dispatch(ue(i,{id:h}))})),u&&(v=v.then(function(){return t.dispatch(pt(u,{id:h}))})),p&&(v=v.then(function(){return t.dispatch(ie({id:h,form:p,async:!0}))})),v.then(function(){return t.dispatch(ke({id:h}))}).then(function(){return t.dispatch(re({id:h,skipModels:r}))}).then(function(){if(l)return t.dispatch(ce(l,{id:h}))}).then(function(){return m})}}(e));var r=e.skipModels,n=e.form,i=e.preset,a=e.el,o=e.panel,s=e.productTour,l=e.configuration,u=e.configurations,h=e.id||(0,_.getSceneId)(t),d=void 0===r||r,p=n&&("object"===(void 0===n?"undefined":(0,f.default)(n))?we(n,{attributes:Ee(t,{id:h}),events:Ie(t,{id:h})}):De(t,n,{id:h,fieldType:"all"}));return t.dispatch({type:"INIT_CONFIGURATOR",payload:{id:h,skipModels:d,form:"object"===(void 0===n?"undefined":(0,f.default)(n))?p:n,el:a,panel:o,productTour:s}}),i&&t.dispatch(ue(i,{id:h})),u&&t.dispatch(pt(u,{id:h})),p&&t.dispatch(ie({id:h,form:p})),l&&t.dispatch(ce(l,{id:h})),t.dispatch(re({id:h,skipModels:r})),t.dispatch(ke({id:h}))}}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var r=e.id||(0,_.getSceneId)(t),n=void 0!==e.skipModels?e.skipModels:t.getIn(["configuration","configurators",r,"skipModels"]),i=Ie(t,{id:r}),a=function(e,t){var r={nodeenter:{},nodeleave:{},nodeclick:{}};return t.forEach(function(t){var n=t.node,i=(t.actions,t.id),a=t.type;"customevent"!==a&&(0,g.filter)(e,n).forEach(function(t){e.dispatch((0,g.set)({id:t,plug:"Properties",property:"interactive"},!0));var n=r[a][t]||[];r[a][t]=n.concat(i)})}),r}(t,i),o="configTool-"+r;if((0,M.getCommands)(t)[o])t.dispatch((0,M.updateCommand)(o,{options:{events:a}}));else{if(!i.length)return;t.dispatch((0,M.addCommand)({options:{events:a},tool:{nodeenter:function(e){var i=this.options.events.nodeenter[e];i&&i.forEach(function(e){return t.dispatch(ne(e,{id:r,skipModels:n}))})},nodeleave:function(e){var i=this.options.events.nodeleave[e];i&&i.forEach(function(e){return t.dispatch(ne(e,{id:r,skipModels:n}))})},click:function(e){var i=(0,b.filterNodesFromPosition)(t,e),a=this.options.events.nodeclick[i[0]];a&&a.forEach(function(e){return t.dispatch(ne(e,{id:r,skipModels:n}))})}}},o))}}}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r),i=void 0!==t.skipModels?t.skipModels:r.getIn(["configuration","configurators",n,"skipModels"]),a=Oe(r,e,t);if(!a)throw new Error("Event with name or id "+e+" not found!");r.createEvent(a.name),a.actions.length&&r.dispatch(fe(a.actions,{},{id:n,skipModels:i}))}}function ie(e){return function(t){if(e.async)return t.dispatch(function e(t){return function(r){var n=t.id||(0,_.getSceneId)(r),i=Ye(r,{id:n,all:!0}),a=t.form&&("object"===(0,f.default)(t.form)?we(t.form,{attributes:Ee(r,{id:n}),events:Ie(r,{id:n})}):De(r,t.form,{id:n}));if(!a)return c.default.resolve(!1);var o=c.default.resolve();return a.meta&&"all"!==a.meta.displayAs&&(a.steps||[]).forEach(function(t){var i=t.formId;i&&(o=o.then(function(){return r.dispatch(e({id:n,form:i}))}))}),o.then(function(){var e=a.fields.reduce(function(e,t){return void 0===i[t.attribute.name]&&void 0!==t.attribute.defaultValue&&(e[t.attribute.name]=t.attribute.defaultValue),e},{});return r.dispatch(ke({id:n})).then(function(){return r.dispatch(ce(e,{id:n}))})})}}(e));var r=e.id||(0,_.getSceneId)(t),n=Ye(t,{id:r,all:!0}),i=e.form&&("object"===(0,f.default)(e.form)?we(e.form,{attributes:Ee(t,{id:r}),events:Ie(t,{id:r})}):De(t,e.form,{id:r}));if(!i)return c.default.resolve(!1);i.meta&&"all"!==i.meta.displayAs&&(i.steps||[]).forEach(function(e){var n=e.formId;n&&t.dispatch(ie({id:r,form:n}))});var a=i.fields.reduce(function(e,t){return t.attribute?(void 0===n[t.attribute.name]&&void 0!==t.attribute.defaultValue&&(e[t.attribute.name]=t.attribute.defaultValue),e):e},{});return t.dispatch(ce(a,{id:r})),t.dispatch(ke({id:r}))}}function ae(e,t,r,n){var i=[];if("string"==typeof t)i=(0,g.filter)(e,(0,S.buildQueryObject)(t,{from:r,skipModels:n}));else if(Array.isArray(t)){t.map(function(t){return""===t?[]:(0,S.isUuid)(t)?[(0,g.find)(e,{id:t})]:(0,g.filter)(e,(0,S.buildQueryObject)(t,{from:r,skipModels:n}))}).forEach(function(e){return i=i.concat(e)})}return i=i.filter(function(e){return!!e})}function oe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=Pe(n,e,r);return i?n.dispatch(nt({hidden:(0,h.default)({},i.id,!t)},r)):c.default.resolve(!1)}}var se={"set-visibility":function(e,t){var r=e.tags,n=e.value,i=t.id,a=t.skipModels;return function(e){var t=ae(e,r,i,a);return c.default.all(t.map(function(t){return e.dispatch((0,g.set)({id:t,plug:"Properties",property:"visible",skipModels:a},Boolean(n)))}))}},"annotation-visibility":function(e,t){var r=e.tags,n=e.value,i=t.id;return function(e){var t=(0,S.isUuid)(r)?(0,g.find)(e,{id:r}):(0,g.find)(e,{from:i,name:r,type:"Annotation"});return t?e.dispatch(n?(0,x.openAnnotation)(t):(0,x.closeAnnotation)(t)):c.default.resolve(!0)}},"set-property":function(e,t){var r=e.tags,n=e.value,i=t.id,a=t.skipModels;return function(e){if(r&&3===r.split("[").length){var t=(0,S.buildQueryObject)(r,{from:i,skipModels:a});e.dispatch((0,g.setAll)(t,n))}}},"assign-material":function(e,t){var r=e.tags,n=e.value,i=t.id,a=t.skipModels;return function(e){var t=(0,S.isUuid)(n)?n:(0,g.find)(e,{from:i,type:"Material",name:n});if(!t)return c.default.resolve(!0);var o=ae(e,r,i,a);return c.default.all(o.map(function(r){return e.dispatch((0,g.set)({id:r,plug:"Material",property:"reference"},t))}))}},"move-camera":function(e,t){var r=e.tags,n=e.value,i=void 0===n?500:n,a=t.id;return function(e){var t=(0,S.isUuid)(r)?(0,g.find)(e,{id:r}):(0,g.find)(e,{from:a,name:r,type:"Camera"});return t?e.dispatch((0,b.animateCameraTo)(t,Number(i))):c.default.resolve(!0)}},"play-clip":function(e,t){var r=e.tags;return t.id,function(e){var t=(0,w.getClips)(e),n=(Array.isArray(r)?r:[r]).map(function(e){return t.find(function(t){return t.name===e})}).filter(function(e){return!!e});return c.default.all(n.map(function(t){return e.dispatch((0,w.queueClip)(t.id,{autoplay:!0}))}))}},"set-variable":function(e,t){var r=e.tags,n=e.value;return ce((0,h.default)({},r,n),t)},"set-form-field-visibility":function(e,t){var r=e.tags,n=e.value;return nt({hidden:(0,h.default)({},r,!n)},t)},"set-attribute-options-visibility":function(e,t){var r=e.tags,n=e.value;return function(e){var i=Pe(e,r,t);if("object"!==(void 0===n?"undefined":(0,f.default)(n))||!i)return c.default.resolve(!0);var a=Ye(e,{all:!0})[i.name],o=c.default.resolve();if(a&&!n[a]){var s=i.values.find(function(e){return n[e]});s&&(o=e.dispatch(ce((0,h.default)({},r,s))))}return o.then(function(){return e.dispatch(nt({optionsVisible:(0,h.default)({},r,n)}))})}},"toggle-attribute":function(e,t){var r=e.tags,n=(e.value,t.id);return t.skipModels,function(e){var t=Pe(e,r,{id:n});if(t&&("Options"===t.type||"Boolean"===t.type)){var i=Ye(e,{id:n,all:!0})[t.name];if("Boolean"===t.type)return e.dispatch(ce((0,h.default)({},t.name,!i)));var a=(t.values.indexOf(i)+1)%t.values.length;return e.dispatch(ce((0,h.default)({},t.name,t.values[a])))}}},"attach-model":function(e,t){var r=e.tags,n=e.value;return function(e){if(r[0]&&r[1]&&n){var t=(0,S.isUuid)(n)?n:(0,g.find)(e,{name:n}),i=(0,S.isUuid)(r[0])?r[0]:(0,g.find)(e,{name:r[0]}),a=(0,S.isUuid)(r[1])?r[1]:(0,g.find)(e,{name:r[1]});return e.dispatch((0,g.attachModel)(t,i,a,!!r[2]))}}}};function le(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,d.default)({},n,{all:!0}),a=void 0==r?Ye(e,i)[t.name]:r;if("Image"===t.type){if(!a||!a.id)return a;var o=(0,y.hasFile)(e,a.assetId);return o||(0,_.isAssetLoading)(e,a.assetId)||e.dispatch((0,y.importImage)(a.assetId,{imageNodeId:a.id})).then(function(n){e.dispatch(ce((0,h.default)({},t.name,r)))}),o?a.id:null}return t.prop.set(a)}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=Be(r,e,t);Ee(r,t);if(!n)return c.default.resolve(!1);var i=n.fields.reduce(function(e,n){var i=Pe(r,n.attributeId,t);return i&&(e[i.name]=n.value),e},{});return r.dispatch(ce(i,t))}}function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r),i=Ee(r,{id:n}),a=Ne(r),o=!a||a.skipModels,s=t.form,l=r.getIn(["configuration","changeListeners"]);return c.default.all((0,u.default)(e).map(function(t){var a=i.find(C(t));if(!a)return c.default.reject(new Error("Attribute: "+t+" does not exist"));var l=le(r,a,e[t],{id:n}),u=s&&s.fields.find(function(e){return e.attributeId===a.id});r.dispatch({type:V,payload:{id:n,attribute:a,value:"Image"===a.type?e[t]:l}}),r.createEvent("configurationChange",a,l,{field:u,id:n});var f=(a.actions||[]).concat(a.valueActions&&a.valueActions[l]||[]);return r.dispatch(fe(f,a,{id:n,skipModels:o})).then(function(){return{attribute:a,value:l,field:u}})})).then(function(e){return e.reduce(function(e,t){var r=t.attribute,i=t.value,a=t.field;return e.then(function(){return c.default.all(l.map(function(e){return e(r,i,{field:a,id:n})}))})},c.default.resolve())})}}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=r.id||(0,_.getSceneId)(n),a=r.skipModels;return c.default.all(e.map(function(e){var r=e.action,o=e.tags,s=e.value,l=e.variable,u=l&&(t.id===t?t:Pe(n,l,{id:i})),c=u?le(n,u,null,{id:i}):s,f=se[r];return f&&""!==o&&n.dispatch(f({tags:o,value:c},{id:i,skipModels:a}))}))}}function he(e){return{type:G,payload:e}}function de(e){return e.getIn(["configuration","configsState"]).toJS()}function pe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ce((0,h.default)({},e,t),r)}function me(e,t){return console.log("DEPRECATED, use `executeAttribute`"),ce((0,h.default)({},e,t))}function ve(e){return{Number:0,Boolean:!1,Color:{a:1,b:0,g:0,r:0}}[e]}function ge(e){var t=("Option"===e.type?"Options":e.type)||"Options",r={id:e.id||(0,p.default)(),name:e.name,type:t},n="";"Options"===t?(r.values=(e.values||[]).map(function(e){return e.name}),n=r.values[0],r.valueActions={},(e.values||[]).forEach(function(e){r.valueActions[e.name]=e.actions||[]})):"Boolean"===t&&(r.values=[!0,!1],r.valueActions=e.valueActions||{true:[],false:[]}),n=n||ve(t),r.defaultValue=void 0===e.value?n:e.value,r.actions=e.actions||[];var i=E.default[t];if(!i)throw new Error("Invalid attribute type for configuration: "+t);return r.prop=i(r),r}var ye=/\$([\$\*])([^\$]*)[\$\*]\$/;function xe(e){var t=e[0].reduce(function(e,t,r){return e[t]=r,e},{});return{table:e.slice(1),header:t}}function be(e,t){var r=e.type,n={id:e.id||(0,p.default)(),name:e.name,type:r,metadata:e.metadata||{},templated:e.templated},i="";"Options"===r?(n.values=e.values||[],i=n.values[0],n.valueActions=e.valueActions||{},(e.values||[]).forEach(function(e){n.valueActions[e.name]=e.actions||[]})):"Boolean"===r?(n.values=[!0,!1],n.valueActions=e.valueActions||{true:[],false:[]}):"Number"===r?(n.minValue=e.minValue||0,n.maxValue=e.maxValue||100,n.step=e.step||1):"String"===r&&(n.maxLength=e.maxLength||""),i=i||ve(r),n.defaultValue=void 0===e.defaultValue?i:e.defaultValue,n.actions=e.actions||[];var a=E.default[r];if(!a)throw new Error("Invalid attribute type for configuration: "+r);return n.prop=a(n),n}function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.meta||{},n={id:e.id||(0,p.default)(),name:e.name||"Form1",type:"Form",meta:{displayAs:r.displayAs||"all"}},i={title:"Step",description:"",formId:""};return n.steps=(e.steps||[]).map(function(t){return t.formId===e.id?i:{title:t.title||i.title,description:t.description||i.description,formId:t.formId||i.formId}}),n.fields=(e.fields||e.values||[]).map(function(e){var r=e.bom,n=e.displayAs,i=e.optionId,a=e.attributeId,o=e.metadata,s=e.eventId,l={bom:r,displayAs:n,attributeId:a,metadata:o,eventId:s};return i&&(l.attributeId=i),l.attributeId&&t.attributes&&(l.attribute=t.attributes.find(C(l.attributeId))),s&&t.events&&(l.event=t.events.find(C(s))),l}),n}function _e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||(0,p.default)(),name:e.name,type:e.type,node:e.node,actions:e.actions||[]}}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.fields;return{id:e.id||(0,p.default)(),name:t||"",fields:r||[]}}function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=e.handle,n=e.price,i=e.options,a=e.variants;return{title:t||r,handle:r,price:n||0,options:i||[],variants:a&&a.length?a:[{}]}}function Te(e){e&&Array.isArray(e)&&(e={options:e}),e.options||e.attributes||(e={attributes:[],forms:[],presets:[],script:""});var t=e.attributes?e.attributes.map(be):e.options.filter(function(e){return"Display"!==e.type&&"Preset"!==e.type&&"ProductTour"!==e.type}).map(ge),r=(e.forms||e.options.filter(function(e){return"Display"===e.type})).map(we),n=e.presets||[],i=e.script||"",a=e.image||{},o=(e.events||[]).map(_e);return(0,m.Map)({attributes:t,events:o,forms:r,presets:n,script:i,image:a})}function Ee(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).id||(0,_.getSceneId)(e);return e.getIn(["configuration","configs",t,"attributes"])||[]}function Pe(e,t){return Ee(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).find(C(t))}function Ae(e,t){return Ee(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).filter(function(e){return e.type===t})}function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id||(0,_.getSceneId)(e),n=e.getIn(["configuration","configs",r,"forms"])||[];if(t.all)return n.map(function(e){return Re(e,t)});var i={};return n.forEach(function(e){"all"!==(e.meta||{}).displayAs&&e.steps&&e.steps.forEach(function(e){return i[e.formId]=!0})}),n.filter(function(e){return!i[e.id]}).map(function(e){return Re(e,t)})}function Re(e,t){switch(t.fieldType){case"all":return e;case"event":var r=e.fields.filter(function(e){return!!e.eventId});return(0,d.default)({},e,{fields:r});default:var n=e.fields.filter(function(e){return!!e.attributeId});return(0,d.default)({},e,{fields:n})}}function Ie(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).id||(0,_.getSceneId)(e);return e.getIn(["configuration","configs",t,"events"])||[]}function Oe(e,t){return Ie(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).find(C(t))}function Le(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).id||(0,_.getSceneId)(e),r=e.getIn(["configuration","formState",t]);return r?r.toJS():{}}function De(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.id||(0,_.getSceneId)(e),i=t&&Ce(e,{fieldType:r.fieldType,id:n,all:!0}).find(C(t)),a=Ee(e,{id:n}),o=Ie(e,{id:n});return(i?i.fields:[]).forEach(function(e){e.attribute=e.attributeId&&a.find(C(e.attributeId)),e.event=e.eventId&&o.find(C(e.eventId))}),i||!0!==t||(i={id:(0,p.default)(),name:"All",type:"Form",fields:a.map(function(e){return{name:e.name,attributeId:e.id,attribute:e}}),steps:[],meta:{displayAs:"all"}}),i&&(i.nodeId=n),i}function Ne(e,t){var r=t||(0,_.getSceneId)(e),n=e.getIn(["configuration","configurators",r]);return n&&n.toJS()}function Ve(e){return(0,s.default)(e.getIn(["configuration","configurators"]).toJS())}function Fe(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).id||(0,_.getSceneId)(e);return e.getIn(["configuration","configs",t,"presets"])||[]}function Be(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).id||(0,_.getSceneId)(e);return t&&Fe(e,{id:r}).find(C(t))}function Ue(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).id||(0,_.getSceneId)(e);return e.getIn(["configuration","configs",t,"script"])||""}function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var r=e.id||(0,_.getSceneId)(t),n=Ue(t,{id:r});return n?t.dispatch(ze(n,{id:r})):c.default.resolve(!0)}}function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r),i=t.reinitialize;if(function(e,t){return e.getIn(["configuration","configsState",t,"scriptActivated"])}(r,n)&&!i)return c.default.resolve(!0);r.dispatch(function(e){return{type:Z,payload:e}}(n)),i&&(r.api.off("configurationChange"),r.dispatch({type:Q}));try{var a=new Function("api",e||"");return c.default.resolve(a(r.api)).then(function(){return r.dispatch({type:Y,payload:{id:n,scriptError:!1}})})}catch(e){return r.dispatch({type:Y,payload:{id:n,scriptError:e}})}}}function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r);return r.dispatch({type:N,payload:{id:n,script:e,key:"script"}}),r.dispatch(ze(e,{id:n,reinitialize:!0})),c.default.resolve(e)}}function je(e,t){var r=t.reduce(function(e,t){return t.templated&&t.templated.enabled?(e[t.name]=t.templated.name,e):e},{});return t.map(function(n){if(!n.templated||!n.templated.enabled)return!1;var i=(0,d.default)({},n);i.metadata=n.metadata||{};var a,o,s,c,f=(a=e,o=n.templated.name,s=a.header[o],c={},a.table.map(function(e,t){return[e[s],t]}).filter(function(e){return""!==e[0]&&!c[e[0]]&&(c[e[0]]=!0,!0)}));if(i.values=f.map(function(e){return e[0]}),i.valueActions=function(e,t,r){var n={},i=e.actions||[];return t.forEach(function(e){var t=(0,l.default)(e,2),a=t[0],o=t[1];n[a]=i.map(function(e){var t=(0,d.default)({},e),n=ye.exec(t.value);if(!n)return t;var i=r.header[n[2]];return void 0!==i&&(t.value=r.table[o][i]),t})}),n}(n.templated,f,e),i.defaultValue=i.values[0],n.templated.dependents){var h=i.metadata.dependents={};n.templated.dependents.forEach(function(a){h[a]=function(e,t,r){if(!e)throw new Error("Invalid dependent attribute: "+e);var n=r.header[e],i=r.header[t];return r.table.reduce(function(e,t,r){return e[t[i]]||(e[t[i]]={}),e[t[i]][t[n]]=!0,e},{})}(r[a],n.templated.name,e),function(e,t,r,n){r.forEach(function(r){var i=(0,l.default)(r,2),a=i[0];i[1],(0,u.default)(n).forEach(function(r){t[a].push({action:"set-attribute-options-visibility",tags:e,value:n[r][a]})})})}(t.find(function(e){return e.name===a}).id,i.valueActions,f,h)})}return n.templated.metadata&&function(e,t,r,n,i){var a=t.metadata,o=i.header[t.name];(0,u.default)(a).forEach(function(n){e[n]||(e[n]={});var s=i.header[a[n]],l=[o];t.dependents&&(l=l.concat(t.dependents.map(function(e){return i.header[r[e]]}))),t.dependentOn&&(l=l.concat(t.dependentOn.map(function(e){return i.header[r[e]]}))),i.table.forEach(function(t){var r=l.map(function(e){return t[e]}).join(":");e[n][r]||(e[n][r]=t[s])})})}(i.metadata,n.templated,r,0,e),i}).filter(function(e){return!!e})}function He(e){var t=e.getIn(["configuration","productTour"]);if(!1===t)return!1;var r=t&&Pe(e,t);return r&&"Options"===r.type?r:null}function We(e){return e.getIn(["configuration","products"]).toList().toArray()}function Xe(e,t){return e.getIn(["configuration","products",t])}function qe(e){return e.getIn(["configuration","externalEl"])}function Ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id||(0,_.getSceneId)(e),n=e.getIn(["configuration","configuration",r]);if(t.all||!n)return n?n.toJS():{};var i=e.getIn(["configuration","formState",r,"hidden"])||{},a=(0,u.default)(i).reduce(function(r,n){var a=Pe(e,n,t);return i[n]&&a&&(r[a.name]=!0),r},{});return n.filter(function(e,t){return!a[t]}).toJS()}function Ze(e){var t=(0,_.getSceneId)(e),r=e.getIn(["configuration","configsState"]).toJS(),n=e.getIn(["configuration","configuration"]).toJS(),i={sceneId:t,publishedHash:(0,_.getFetchedHash)(e,t),configuration:n[t],models:[]};return(0,u.default)(n).forEach(function(a){if(a!==t){var o=r[a].sceneId,s=(0,g.get)(e,{id:a,plug:"Transform",operatorIndex:0}),l=(0,P.lookupOperator)("Transform","Transform");i.models.push({sceneId:o,publishedHash:(0,_.getFetchedHash)(e,o),transform:l.export(s,{onlyChanged:!0}),configuration:n[a],models:[]})}}),i}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r),i=be(e);return r.dispatch({type:L,payload:{id:n,attrs:i,key:"attributes"}}),c.default.resolve(i.id)}}function Qe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=Pe(n,e,r),a=E.default[i.type];t.prop=a(t);var o=r.id||(0,_.getSceneId)(n);return n.dispatch({type:N,payload:{attrId:e,id:o,attrs:t,key:"attributes"}})}}function Ke(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=Ee(n,r).slice(0);i.splice(t,0,i.splice(e,1)[0]);var a=r.id||(0,_.getSceneId)(n);return n.dispatch({type:$,payload:{id:a,attributes:i}})}}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r);return r.dispatch({type:D,payload:{id:n,attrId:e,key:"attributes"}})}}function et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r),i=we(e,{});return r.dispatch({type:L,payload:{id:n,attrs:i,key:"forms"}}),c.default.resolve(i.id)}}function tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r);return r.dispatch({type:D,payload:{id:n,attrId:e,key:"forms"}})}}function rt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=r.id||(0,_.getSceneId)(n);return n.dispatch({type:N,payload:{id:i,attrId:e,attrs:t,key:"forms"}})}}function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r);return r.dispatch({type:j,payload:{attrs:e,id:n}})}}function it(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.handle?{type:H,payload:Se(e)}:c.default.reject("Required product handle")}function at(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:X,payload:Se(e)}}function ot(e){return{type:W,payload:e}}function st(e){var t=e.getIn(["configuration","savingSceneId"]);if(!t)return!0;var r=e.getIn(["configuration","configs",t]),n=e.getIn(["configuration","savedConfig","config"]);return(0,m.is)(r,n)}function lt(e){return e.getIn(["configuration","saving"])}function ut(e){return!(lt(e)||st(e)||ct(e))&&e.getIn(["configuration","savingSceneId"])}function ct(e){return e.getIn(["configuration","saveError"])}function ft(e,t){var r=e.find(function(e){return e.handle===t});return r||e.push(Se({handle:t})),r||e[e.length-1]}function ht(e,t){function r(e,r){var n=function(e,r){var n=t[t.length-1];if(n&&n.handle===e.handle)return n;if(r)for(var i=t.length-1;i>=0;i--)if(t[i].handle===e.handle)return t[i];return t.push({handle:e.handle,quantity:1,options:[],product:e}),t[t.length-1]}(e,r.findItem);return n.properties||(n.properties={}),n.variant||(n.variant=e.variants[0]),n.options||(n.options=[]),n}return{"set-product":function(r){var n=r.tags;if(n){var i=r.value,a=ft(e,n);t.push({handle:n,quantity:i,variant:a.variants[0],product:a,properties:{}})}},"select-variant":function(t,n,i){var a=t.tags;if(a){var o=!1;"object"===(0,f.default)(t.value)&&(o=t.value.findItem);var s=ft(e,a),l=r(s,{findItem:o}),u=s.options.findIndex(function(e){return e.name===n.name});u>=0&&(l.options[u]=i);var c=s.variants.find(function(e){for(var t=!0,r=0;r<s.options.length;r++)t=t&&e.options[r]===l.options[r];return t});l.variant=c}},"select-quantity":function(t,n,i){var a=t.tags;if(a){var o=!1;"object"===(0,f.default)(t.value)&&(o=t.value.findItem);var s=r(ft(e,a),{findItem:o});"Boolean"===n.type?s.quantity=i?1:0:"Number"===n.type?s.quantity=Number(i):s.quantity="number"==typeof t.value?t.value:"object"===(0,f.default)(t.value)?Number(t.value.quantity):0}},"cart-display":function(e,r){var n=e.tags;if(n){var i=t.find(function(e){return e.handle===n});if(i){var a=i.properties;e.value||(a[r.name]="skip-display")}}}}}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t.id||(0,_.getSceneId)(e),Ve(e)),n=We(e),i=r.reduce(function(t,r){var n=r.id;return t[n]=function(e,t){var r=t.id,n=Ne(e,r),i=n&&De(e,n.form,{id:r}),a=[];return i&&(a=i.fields,"all"!==i.meta.displayAs&&i.steps.forEach(function(t){var n=De(e,t.formId,{id:r});n&&(a=a.concat(n.fields))})),a}(e,{id:n}),t},{}),a={products:n,items:[]},o=ht(n,a.items);r.forEach(function(r){var n=r.id,s=Ye(e,{id:n,all:void 0===t.all||t.all}),l=Le(e,{id:n});i[n].forEach(function(e){var t=e.attribute;if(t){var r=t.name,n=s[r];(t.actions||[]).concat(t.valueActions&&t.valueActions[n]||[]).forEach(function(e){o[e.action]&&o[e.action](e,t,n)});var i=a.items[a.items.length-1];if(i)if("skip-display"===i.properties[r])delete i.properties[r];else{var u=t.id,c=l.hidden;if(c&&c[u])return!0;i.properties[r]=n}}})}),a.price=function(e){return e.items.reduce(function(e,t){var r=t.variant,n=t.quantity,i=t.product,a=t.price,o=void 0;return"number"==typeof(o=void 0!==a?a:r&&void 0!==r.price?r.price:i.price)?e+o*n:e},0)}(a);var s=e.getIn(["configuration","bomChangeHandlers"]);return s.size&&r.forEach(function(r){var n=r.id,i=Ye(e,{id:n,all:void 0===t.all||t.all});s.forEach(function(e){return e(a,i)})}),a.items.forEach(function(e){e.handle!==e.product.handle&&(e.product=ft(a.products,e.handle),e.variant=e.product.variants[0])}),a}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,_.getSceneId)(r),i=e.sceneId,a=e.publishedHash,o=e.models,s=e.configuration;if(n&&n!==i)throw new Error("Invalid base scene for configurations: "+i+", is "+n);return(n?c.default.resolve(!0):r.dispatch((0,_.fetchAndUse)(i,a))).then(function(){var e=o.reduce(function(e,t){var r=t.sceneId,n=t.publishedHash;return e[r]||(e[r]=n),e},{});return c.default.all((0,u.default)(e).map(function(t){return r.dispatch((0,_.fetch)(t,e[t]))})).then(function(){return r.dispatch(te({async:!0,configuration:s}))}).then(function(){return c.default.all(o.map(function(e){var t=e.sceneId,n=e.transform,i=e.configuration;return r.dispatch((0,g.cloneModel)({sceneId:t})).then(function(e){var t={id:e,plug:"Transform",operatorIndex:0};return r.dispatch((0,g.set)(t,n)),r.dispatch(te({async:!0,id:e,configuration:i}))})}))})})}}function mt(e){return{type:J,payload:e}}function vt(e){return{type:K,payload:e}}var gt={reducer:(0,v.default)(I,(n={},(0,h.default)(n,T.INITIALIZE_SCENE,function(e,t){var r=t.id,n=t.store,i=(0,g.get)(n,{id:r,plug:"Player",property:"configurator"}),a=void 0;try{a=JSON.parse(i)}catch(e){a={attributes:[],forms:[],presets:[],script:""}}a=Te(a);var o=e.setIn(["configs",r],a).setIn(["configsState",r],ee.set("sceneId",r));return r!==e.get("savingSceneId")&&e.get("savingSceneId")||(o=o.set("savedConfig",(0,m.Map)({config:a,configStr:i}))),o}),(0,h.default)(n,q,function(e,t){var r=t.id,n=t.config,i=t.sceneId,a=n;try{"string"==typeof n&&(a=JSON.parse(n))}catch(e){a={}}var o=Te(a);return e.setIn(["configs",r],o).setIn(["configsState",r],ee.set("sceneId",i))}),(0,h.default)(n,Y,function(e,t){var r=t.id,n=t.scriptError;return e.setIn(["configsState",r,"scriptError"],n)}),(0,h.default)(n,V,function(e,t){var r=t.id,n=t.attribute,i=t.value,a=e.getIn(["configuration",r])||(0,m.Map)();return e.setIn(["configuration",r],a.set(n.name,i))}),(0,h.default)(n,$,function(e,t){var r=t.id,n=t.attributes,i=e.getIn(["configs",r]);return(e.get("savingSceneId")!==r?e:e.set("history",e.get("history").push(i))).setIn(["configs",r,"attributes"],n)}),(0,h.default)(n,T.CLEAR_SCENE,function(e){return I}),(0,h.default)(n,L,function(e,t){var r=t.id,n=t.key,i=t.attrs,a=e.getIn(["configs",r]),o=e.get("savingSceneId")!==r?e:e.set("history",e.get("history").push(a)),s=[].concat(a.get(n));return s.push(i),o.setIn(["configs",r],a.set(n,s))}),(0,h.default)(n,N,function(e,t){var r=t.attrId,n=t.key,i=t.id,a=t.attrs,o=t.script,s=t.data,l=t.image,u=t.scriptError,c=e.getIn(["configs",i]),f=e.get("savingSceneId")!==i?e:e.set("history",e.get("history").push(c));if("script"===n)return f.setIn(["configs",i],c.set(n,o)).setIn(["configsState",i,"scriptError"],u||"");if("data"===n)return f.setIn(["configs",i],c.set(n,s));if("image"===n)return f.setIn(["configs",i],c.set(n,l));var h=[].concat(c.get(n)),p=h.findIndex(C(r));return h[p]=(0,d.default)({},h[p],a),f.setIn(["configs",i],c.set(n,h))}),(0,h.default)(n,D,function(e,t){var r=t.id,n=t.attrId,i=t.key,a=e.getIn(["configs",r]),o=e.get("savingSceneId")!==r?e:e.set("history",e.get("history").push(a)),s=[].concat(a.get(i)),l=s.findIndex(C(n));if(-1===l)return e;s.splice(l,1);var u=a.set(i,s);if("attributes"===i){u=u.set("forms",a.get("forms").map(function(e){var t=(0,d.default)({},e);return t.fields=[].concat((e.fields||[]).filter(function(e){return e.attributeId!==n})),t}));var c=e.getIn(["formState",r]),f=(0,d.default)({},c.get("hidden"));delete f[n];var h=c.set("hidden",f);o=o.setIn(["formState",r],h)}return o.setIn(["configs",r],u)}),(0,h.default)(n,F,function(e,t){return e.set("savingSceneId",t).set("history",(0,m.List)([]))}),(0,h.default)(n,B,function(e){var t=e.get("savingSceneId"),r=e.get("history");return t&&0!==r.size?e.setIn(["configs",t],r.last()).set("history",r.butLast()):e}),(0,h.default)(n,U,function(e){return e.set("saving",!0)}),(0,h.default)(n,z,function(e,t,r){var n=r.action;return 400===n.error.status&&"VersionError"===n.error.body.error?e.set("saving",!1).set("saveError",R.VERSION_CONFLICT):403===n.error.status?e.set("saving",!1).set("saveError",R.UNAUTHORIZED):e.set("saving",!1).set("numSaveErrors",e.get("numSaveErrors")+1)}),(0,h.default)(n,k,function(e,t){return e.set("saving",!1).set("savedConfig",t).set("numSaveErrors",0)}),(0,h.default)(n,"INIT_CONFIGURATOR",function(e,t){var r=t.id,n=t.productTour,i=e.getIn(["configurators",r])||(0,m.Map)({id:r});["form","el","panel","skipModels"].forEach(function(e){void 0!==t[e]&&(i=i.set(e,t[e]))});var a=e.getIn(["formState",r])||O();return e.setIn(["configurators",r],i).set("productTour",n).setIn(["formState",r],a)}),(0,h.default)(n,G,function(e,t){var r=e.getIn(["configurators",t,"el"]);return r&&(r.innerHTML=""),e.deleteIn(["configurators",t]).deleteIn(["configuration",t])}),(0,h.default)(n,j,function(e,t){var r=t.attrs,n=t.id,i=e.getIn(["formState",n])||O(),a=r.hidden,o=r.optionsVisible;return e.setIn(["formState",n],(0,m.Map)({hidden:(0,d.default)({},i.get("hidden"),a),optionsVisible:(0,d.default)({},i.get("optionsVisible"),o)}))}),(0,h.default)(n,H,function(e,t){return e.setIn(["products",t.handle],t)}),(0,h.default)(n,X,function(e,t){var r=e.getIn(["products",t.handle]);return e.setIn(["products",t.handle],(0,d.default)({},r,t))}),(0,h.default)(n,W,function(e,t){return e.deleteIn(["products",t])}),(0,h.default)(n,Z,function(e,t){return e.setIn(["configsState",t,"scriptActivated"],!0)}),(0,h.default)(n,J,function(e,t){return e.updateIn(["changeListeners"],(0,m.List)(),function(e){return e.push(t)})}),(0,h.default)(n,Q,function(e){return e.set("changeListeners",(0,m.List)()).set("bomChangeHandlers",(0,m.List)())}),(0,h.default)(n,K,function(e,t){return e.updateIn(["bomChangeHandlers"],(0,m.List)(),function(e){return e.push(t)})}),n)),actions:{applyPreset:ue,executeAttribute:pe,executeVariant:me,initConfiguration:ie,initConfigurator:te,addProduct:it,setAttribute:Qe,swapAttributes:Ke,setProduct:at,deleteProduct:ot,setConfiguration:ce,setAttributeVisibility:oe,loadConfigurations:pt,removeConfigurator:he,onChange:mt,modifyBOM:vt,triggerEvent:ne},selectors:{getConfigurationState:de,getAttribute:Pe,getAttributes:Ee,getAttributesByType:Ae,getForm:De,getForms:Ce,getConfiguration:Ye,getBOM:dt,getExternalEl:qe,getPresets:Fe,getProduct:Xe,getProducts:We,getProductTour:He,getFormState:Le,getConfigurations:Ze},private:{actions:{addAttribute:Je,addForm:et,deleteAttribute:$e,deleteForm:tt,setForm:rt,setScript:Ge}}};t.default=gt},function(e,t,r){var n=r(211),i=r(208);e.exports=function(e){return n(i(e))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(56)),i=s(r(2));t.default=l;var a=s(r(281)),o=s(r(3));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){a.default.call(this,t||Float32Array),this.elementSize=r||e.InstanceScalarSize,this.type=e}l.prototype=(0,i.default)((0,n.default)(a.default.prototype),{constructor:l,toObjectArrayViewAndClear:function(){return new o.default(this.type,null,this.toArrayAndClear())},getAt:function(e,t){var r=t||new this.type,n=e>>this.intraBlockIndexBits,i=e&this.intraBlockIndexMask;return r.fromArray(this.blocks[n],i*this.elementSize)},setAt:function(e,t){var r=e>>this.intraBlockIndexBits,n=e&this.intraBlockIndexMask;t.toArray(this.blocks[r],n*this.elementSize)},push:function(e){var t=this.length++,r=this.lastBlock,n=t&this.intraBlockIndexMask;if(0===n){var i=this.intraBlockIndexMask+1;r=new this.arrayType(i*this.elementSize),this.lastBlock=r,this.blocks.push(r)}return e.toArray(r,n*this.elementSize),t+1}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var n=l(r(43)),i=l(r(44)),a=l(r(283)),o=l(r(189)),s=l(r(141));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){this.indices=e,this.meaning=t,this.mapId=r||i.default.IdPositions}u.Faces=0,u.Vertices=1,u.Edges=2,u.prototype={constructor:u,getIndices:function(e,t,r){var n=this.indices,a=u.ConversionTable[this.meaning][t];return null!==a&&(n=a.call(null,e,n,this.mapId,r||i.default.IdPositions)),n}},u.newRandomSelection=function(e,t,r,n,i){for(var a=u.getNumElements(r,n,i),s=t*a|0,l=new o.default(a).fill(0,s),c=e,f=0,h=a-1;f<h;++f)c=22695477*c+1>>>0,l.swap(f,f+(1073741823&c)%(a-f));return new u(l.toIndexArray(),n,i)},u.getIndices=function(e,t,r,n){var a=i.default.IdPositions,o=n;return"string"==typeof r?a=r:o=r,o?o.getIndices(e,t,a):s.default.identityForReading(u.getNumElements(e,t,a))},u.getNumElements=function(e,t,r){switch(t){case u.Faces:return e.getNumFaces();case u.Vertices:return i.default.resolveMap(e,r||i.default.IdPositions).values.length;case u.Edges:return i.default.resolveMap(e,r||i.default.IdPositions).edgeVertexAdjacency.getNumEdges();default:throw Error("Bad meaning argument!")}},u.convFacesToVertices=function(e,t,r,n){for(var a=i.default.resolveMap(e,n),s=new o.default(a.values.length),l=e.faceRangeOffsets,u=a.faceValueIndices,c=0,f=t.length;c!==f;++c){var h=t[c],d=l[h],p=l[h+1];s.includeFromArray(u,d,p)}return s.toIndexArray()},u.convFacesToEdges=function(e,t,r,n){for(var a=i.default.resolveMap(e,n),s=new o.default(a.edgeVertexAdjacency.getNumEdges()),l=e.faceRangeOffsets,u=a.faceValueIndices,c=0,f=t.length;c!==f;++c){var h=t[c],d=l[h],p=l[h+1];if(d!==p)for(var m=u[p-1],v=d;v!==p;++v){var g=u[v];s.include(a.edgeVertexAdjacency.findEdgeId(m,g)),m=g}}return s.toIndexArray()},u.convVerticesToFaces=function(e,t,r,o){for(var s=new a.default(Uint32Array),l=e.faceRangeOffsets,u=i.default.resolveMap(e,r).faceValueIndices,c=e.getNumFaces(),f=0;f!==c;++f){for(var h=l[f],d=l[f+1],p=!0,m=h;m!==d&&p;++m)p=-1<n.default.binarySearch(t,u[m]);p&&s.push(f)}return s.toArrayAndClear()},u.convVerticesToVertices=function(e,t,r,n){if(r===n)return t;for(var a=i.default.resolveMap(e,n),s=new o.default(a.values.length),l=a.faceValueIndices,u=i.default.resolveMap(e,r).updateInverseIndex(),c=u.valueFaceIndexOffsets,f=u.valueFaceIndices,h=0,d=t.length;h!==d;++h)for(var p=t[h],m=c[p],v=c[p+1],g=m;g!==v;++g){var y=u.findValueIndexOffset(f[g],p);s.include(l[y])}return s.toIndexArray()},u.convVerticesToEdges=function(e,t,r,a){for(var s=i.default.resolveMap(e,a),l=new o.default(s.edgeVertexAdjacency.getNumEdges()),u=e.faceRangeOffsets,c=i.default.resolveMap(e,r).faceValueIndices,f=e.getNumFaces(),h=0;h!==f;++h){var d=u[h],p=u[h+1];if(d!==p){for(var m=c[--p],v=-1<n.default.binarySearch(t,m),g=m,y=v,x=d;x!==p;++x){var b=c[x],w=-1<n.default.binarySearch(t,b);y&&w&&l.include(s.findEdgeId(g,b)),g=b,y=w}y&&v&&l.include(s.findEdgeId(g,m))}}return l.toIndexArray()},u.convEdgesToFaces=function(e,t,r,n){var i=u.convEdgesToVertices(e,t,r,r);return u.convVerticesToFaces(e,i,r,"")},u.convEdgesToVertices=function(e,t,r,n){var i=u.convEdgesToVerticesOfSameMap(e,t,r);return u.convVerticesToVertices(e,i,r,n)},u.convEdgesToEdges=function(e,t,r,n){if(r===n)return t;u.convEdgesToVerticesOfSameMap(e,t,r);return u.convVerticesToEdges(e,t,r,n)},u.convEdgesToVerticesOfSameMap=function(e,t,r){for(var a=i.default.resolveMap(e,r),s=a.edgeVertexAdjacency,l=s.edgePivotRangeOffsets,u=s.edgeHighVertexIndices,c=new o.default(a.values.length),f=0,h=t.length;f!==h;++f){var d=t[f],p=u[d],m=n.default.binarySearch(l,d+1);m<0&&(m=~m);var v=m-1;c.include(p),c.include(v)}return c.toIndexArray()},u.ConversionTable=[[null,u.convFacesToVertices,u.convFacesToEdges],[u.convVerticesToFaces,u.convVerticesToVertices,u.convVerticesToEdges],[u.convEdgesToFaces,u.convEdgesToVertices,u.convEdgesToEdges]]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(r(13)),i=p(r(6)),a=p(r(2));t.fetchHDRSourceData=m,t.checkTextureCache=g,t.getCubeMapTexture=x,t.getTextureImage=function(e,t){if(!t)return;var r=t.nodeId;g(e,r,t)||(t.maps?t.maps.forEach(function(t){return(0,c.fetchTextureImage)(e,t)}):(0,c.fetchTextureImage)(e,t))},t.assignTexture=b,t.primitiveToMaterial=function e(t,r,s,c,d){var p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};var m=c&&c instanceof o.MeshPhysicalMaterial?c:new o.MeshPhysicalMaterial;var v=null;if(!s)return m;m.alphaTest=s.alphaTest?s.alphaTestMinimum+.5/256:0;if("Line"===s.type)return m.color=s.color,m.linewidth=s.thickness,m;if("MultiID"===s.type){for(var x=[],w=0;w<30;w++){var _=!!s["material"+w];if(_&&s["material"+w].isMultiMaterial&&(_=!1,console.warn("MultiMaterial submaterial #"+w+" is another MultiMaterial.")),_)x.push(e(t,r,s["material"+w],null,d));else{var M={defaultColor:s.defaultColor};x.push(e(t,r,M,null,d))}}return m=new o.MultiMaterial(x)}if("GemMaterial"===s.type){var S=(0,l.getEvalSceneGraph)(t).evaluatedNodes[p.id],T=(v=s.environment&&s.environment.environmentMap)&&b(t,r,v.specularCubeMap,new o.MaterialMap,"envMap");if(!S||!T)return m;var E,P=!1,A=g(t,p.id,S.PolyMesh);if(!A){var C=p.nodeInfo.geometry;C.computeBoundingSphere();var R=new o.NormalCubeMapBaker(r,C,!0).texture;A={texture:R,geometry:C,dispose:function(){}},y(t,p.id,{_v:S.PolyMesh._v},A),P=!0}if(!A)return m;if(s.mode==h.GemMaterialModes.LEGACY)(E=new o.ShaderMaterial(o.GeometricRefractionShader)).uniforms=o.UniformsUtils.clone(o.GeometricRefractionShader.uniforms),E.defines=(0,a.default)({},o.GeometricRefractionShader.defines),E.side=o.FrontSide,E.uniforms.boundingSphere.value.set(A.geometry.boundingSphere.center.x,A.geometry.boundingSphere.center.y,A.geometry.boundingSphere.center.z,A.geometry.boundingSphere.radius),E.defines.NUM_BOUNCES!==s.bounces&&(E.defines.NUM_BOUNCES=10),E.uniforms.normalCubeMap.value=A.texture,E.uniforms.sphereSquish.value.copy(s.squishFactor),E.needsUpdate=!0;else{(E=new o.GemMaterial).uniforms=o.UniformsUtils.clone(E.uniforms);for(var I=t.getTranslator().getAllPasses().refractiveGlassPass,O=I.depthNormalPeeler,L=0;L<4;L++)E.uniforms["depthPeelDepth"+(L+1)].value=O.renderTargetsDepth[L].texture,E.uniforms["depthPeelNormal"+(L+1)].value=O.renderTargetsNormal[L].texture;E.uniforms.absorptionFactor.value=s.absorptionFactor;var D=Math.min(2,s.bounces);E.defines.NUM_BOUNCES===D&&E.defines.MODE===(Number(s.mode)||2)||(E.defines.NUM_BOUNCES=D,E.defines.MODE=Number(s.mode)||2,E.needsUpdate=!0);var N=p&&p.sparklePass;if(N){var V=s.enableSparkles?s.sparkleCount:0;p.nodeInfo.visible&&"Mesh"==p.nodeInfo.type&&(P||E.sparkleCount!==V)&&(N.removeGemstone(p.nodeInfo),V&&N.addGemstone(A.geometry,p.nodeInfo,V),E.sparkleCount=V)}}if(E.uniforms.absorptionColor.value.set(10*(1-s.transmissive.r),10*(1-s.transmissive.g),10*(1-s.transmissive.b)),E.uniforms.envMap.value=T,E.envMap=T,v){var F=void 0!==v.intensity?v.intensity:1;E.uniforms.envMapIntensity.value=F,E.envMapIntensity=F,E.uniforms.crystalIOR.value=s.ior,E.uniforms.boostFactor.value=s.boostFactor,E.uniforms.abbeNumber.value=s.abbeNumber}else console.warn("Gem Material relies expects environment map");return E}if("vray/VRmat"===s.type||"vray/VisMat"===s.type)return new o.MeshPhysicalMaterial({color:s.viewColor,side:d?o.DoubleSide:o.FrontSide});m.side=d?o.DoubleSide:o.FrontSide;if(s.defaultColor)return m.color=s.defaultColor,m;if(!s.baseColor)return s.diffuseColor&&(m.color=s.diffuseColor),m;var B={color:"baseColor",aoMapIntensity:"aoMapIntensity",bumpScale:"bumpScale",displacementScale:"displacementScale",displacementBias:"displacementBias",emissive:"emissiveColor",falloff:"baseFalloff",falloffColor:"baseFalloffColor",metalness:"metallic",roughness:"roughness",clearCoat:"clearCoat",clearCoatRoughness:"clearCoatRoughness",clearCoatBumpScale:"clearCoatBumpScale",opacity:"opacityFactor",falloffOpacity:"opacityFalloffFactor",transparent:"baseMapTransparent",anisotropy:"anisotropy",anisotropyRotation:"anisotropyRotation",triplanarEnabledMap:"triplanarEnabledMap",triplanarEnabledNormalMap:"triplanarEnabledNormalMap",triplanarEnabledBumpMap:"triplanarEnabledBumpMap",triplanarEnabledRoughnessMap:"triplanarEnabledRoughnessMap"};var U={map:"base",bumpMap:"bump",aoMap:"ao",emissiveMap:"emissive",lightMap:"light",metalnessMap:"metallic",normalMap:"normal",displacementMap:"displacement",alphaMap:"opacity",roughnessMap:"roughness",clearCoatBumpMap:"clearCoatBump",reflectivityMap:"specular",falloffMap:"baseFalloff",falloffAlphaMap:"opacityFalloff",anisotropyMap:"anisotropy",anisotropyRotationMap:"anisotropyRotation"};var k=(0,u.get)(t,{id:p.id,evalPlug:"PolyMesh"});var z=(0,u.get)(t,{scene:!0,evalPlug:"Player"});var G=[];var j={};k&&k.mesh&&k.mesh.uvMaps&&(G=k.mesh.uvMaps.namesByIndex,(0,i.default)(U).forEach(function(e){var t=U[e]+"Map";j[t]=G.indexOf(s[U[e]+"UVChannel"])}));function H(e,n,i){var a=b(t,r,e,m[n]||new o.MaterialMap,n,i);a&&!m[n]&&(m[n]=a)}function W(e,t){if(!t)return null;var r=e.createCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),r}var X=(0,u.get)(t,{id:s.nodeId,plug:"Properties",property:"combineTextures"});if(X)!function(e,t,r,a){var s=[];(function(e,t,r,n,i){var a=b(e,n,t.baseMap,new o.MaterialMap,j.baseMap),s=b(e,n,t.opacityMap,new o.MaterialMap,j.alphaMap);if(a&&s){var l=(0,f.combineChannels)(e,{rgb:W(e,a.texture.image),alpha:W(e,s.texture.image)});a.texture.image=l,a.texture.transparent=!0,a.texture.needsUpdate=!0,r.mapSlot=a,i.push("map"),i.push("alphaMap")}})(e,t,r,a,s),function(e,t,r,n,i){var a=1===t.roughness&&!!t.roughnessMap,s=1===t.metallic&&!!t.metallicMap,l=1===t.aoMapIntensity&&!!t.aoMap;if(a===s?a:l){a&&i.push("roughnessMap"),s&&i.push("metallicMap"),l&&i.push("aoMap");var u=b(e,n,t.roughnessMap,new o.MaterialMap,j.roughnessMap),c=b(e,n,t.metallicMap,new o.MaterialMap,j.metallicMap),h=b(e,n,t.aoMap,new o.MaterialMap,j.aoMap),d=h&&h.texture&&h.texture.image||null,p=u&&u.texture&&u.texture.image||null,m=c&&c.texture&&c.texture.image||null,v=(0,f.combineChannels)(e,{red:W(e,d),green:W(e,p),blue:W(e,m)});a&&u?(u.texture.image=v,u.texture.transparent=!0,u.texture.needsUpdate=!0,r.roughnessMapSlot=u):s&&c&&(c.texture.image=v,c.texture.transparent=!0,c.texture.needsUpdate=!0,r.metalnessMap=c)}}(e,t,r,a,s);var l=!0,u=!1,c=void 0;try{for(var h,d=(0,n.default)((0,i.default)(U));!(l=(h=d.next()).done);l=!0){var p=h.value;if(-1===s.indexOf(p)){var m=U[p]+"Map";H(t[m],p+"Slot",j[m])}}}catch(e){u=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}}(t,s,m,r);else{var q=!0,Y=!1,Z=void 0;try{for(var J,Q=(0,n.default)((0,i.default)(U));!(q=(J=Q.next()).done);q=!0){var K=J.value,$=U[K]+"Map";H(s[$],K+"Slot",j[$])}}catch(e){Y=!0,Z=e}finally{try{!q&&Q.return&&Q.return()}finally{if(Y)throw Z}}}var ee=!0;var te=!1;var re=void 0;try{for(var ne,ie=(0,n.default)((0,i.default)(B));!(ee=(ne=ie.next()).done);ee=!0){var ae=ne.value;m[ae]=s[B[ae]]}}catch(e){te=!0,re=e}finally{try{!ee&&ie.return&&ie.return()}finally{if(te)throw re}}var oe=!0;var se=!1;var le=void 0;try{for(var ue,ce=(0,n.default)(["depthTest","depthWrite"]);!(oe=(ue=ce.next()).done);oe=!0){var fe=ue.value;m[fe]=s[fe]}}catch(e){se=!0,le=e}finally{try{!oe&&ce.return&&ce.return()}finally{if(se)throw le}}s.emissiveScale&&(m.emissive=m.emissive.clone(),m.emissive.multiplyScalar(s.emissiveScale));var he=s.renderCategory;he===h.RenderCategories.OPAQUE?m.transparent=!1:he===h.RenderCategories.TRANSPARENT?m.transparent=!0:s.alphaTest?m.transparent=!1:m.transparent=m.opacity<1||!!s.opacityMap||s.baseMapTransparent||s.opacityFalloffFactor<1||!!s.opacityFalloffMap;var de=s.specularColor;m.reflectivity=.33333*(de.r+de.g+de.b);m.clearCoat*=.25;m.normalScale.x=(s.normalRedFlip?-1:1)*s.normalFactor;m.normalScale.y=(s.normalGreenFlip?-1:1)*s.normalFactor;m.blending=o.NormalBlending;m.premultipliedAlpha=!0;v=s.environment&&s.environment.environmentMap;v&&(H(v.specularCubeMap,"envMap"),m.envMapIntensity=void 0!==v.intensity?v.intensity:1);void 0!==s.triplanarRepeat&&void 0!==m.triplanarScale&&(m.triplanarScale.set(s.triplanarRepeat,s.triplanarRepeat,s.triplanarRepeat),m.triplanarExponent=Math.exp(o.Math.lerp(5,0,s.triplanarBlend)));m.ssrEnabled=!m.transparent&&z.ssrQuality>0;m.needsUpdate=!0;return m};r(31);var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),s=r(23),l=r(10),u=r(4),c=r(198),f=r(637),h=(p(r(197)),r(188)),d=r(203);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var r=t.hdrSource;if(!r)return null;var n=(0,s.getOrFetchBinary)(r)(e);if(!n)return null;var i=new Uint8Array(n);return(new o.RGBELoader)._parser(i)}var v=!0;function g(e,t,r){var n=e.getTranslator().textureCache,i=n[t]&&n[t].image;return!i||r&&i._v!==r._v?null:n[t].value}function y(e,t,r,n){var i=e.getTranslator().textureCache;return i[t]&&i[t].value.dispose(),i[t]={image:r,value:n},n}function x(e,t,r,n,i){var a,s=r.cubeSource,l=r.maps,u=r.latLongMap,f=r.nodeId,h=g(e,f,r);if(h)return h;var d=!1;if(s){if(!l)return null;for(var p=0;p<l.length;p++)if(!l[p])return null;var x=!1;i&&l[0].preferHDR&&(x=!0),x&&v&&l[0].hdrSource&&(d=!0);var w=l.map(function(t){var r=g(e,t.nodeId,t);if(r)return r;if((r=(d?m:c.fetchTextureImage)(e,t,!0))&&d){var n=new o.DataTexture(r.data,r.width,r.height);n.encoding=o.RGBEEncoding,n.generateMipmaps=!1,n.type=o.UnsignedByteType,n.minFilter=o.NearestFilter,n.magFilter=o.NearestFilter,n.format=o.RGBEFormat,r=n,y(e,t.nodeId,t,r)}return r});if(w.filter(function(e){return!!e}).length!==w.length)return null;(a=new o.CubeTexture).images=w,x&&(a.encoding=d?o.RGBEEncoding:l[0].hdrEncoding)}else{var _=b(e,t,u,void 0,"envMap");if(!_)return null;_.anisotropy=1,_.minFilter=o.LinearFilter,_.magFilter=o.LinearFilter;var M=t.extensions.get("OES_texture_half_float_linear");a=new o.EquirectangularToCubeGenerator(_,{resolution:512,type:M?o.HalfFloatType:o.UnsignedByteType}).update(t),d=!0}if(!a)return null;if(a.flipY=!1,a.needsUpdate=!0,n)return y(e,f,r,a);var S=d?o.NearestFilter:o.LinearFilter,T=new o.PMREMGenerator(a,20);T.update(t),T.cubeLods[0].texture.magFilter=S,T.cubeLods[0].texture.minFilter=S;var E=new o.PMREMCubeUVPacker(T.cubeLods);return E.update(t),E.CubeUVRenderTarget.texture.magFilter=S,E.CubeUVRenderTarget.texture.minFilter=S,y(e,f,r,E.CubeUVRenderTarget.texture)}function b(e,t,r,n,i,s){if(!r)return n&&(n.texture=null),null;var l="envMap"===i||"emissiveMap"===i;if(r.maps)return x(e,t,r,!1,l);var u=!1,f=!1;l&&r.preferHDR&&(u=!0),u&&v&&r.hdrSource&&(f=!0);var h=(0,a.default)({},r),p=r.nodeId,b=g(e,p,r);if(!b){if((b=f?new o.DataTexture:new o.Texture).meta={nodeId:p},r.canvasOperations){b.meta.source="canvas operator";var w=g(e,r.nodeId),_=w&&w.image,M=(0,d.collapseCanvas)(e,r,_);M&&(b.image=M)}else{b.meta.source="image fetch";var S=f?m:c.fetchTextureImage;b.image=S(e,r)}if(!b.image)return n&&(n.texture=null),null;b.transparent=!0;var T={0:o.ClampToEdgeWrapping,1:o.RepeatWrapping,2:o.MirroredRepeatWrapping};b.wrapS=T[h.wrapU],b.wrapT=T[h.wrapV],b.generateMipmaps=!u&&h.generateMipMaps,b.anisotropy=b.generateMipmaps?16:1,b.magFilter=f?o.NearestFilter:h.magFilter,b.minFilter=f?o.NearestFilter:h.minFilter,b.encoding=u?f?o.RGBEEncoding:h.hdrEncoding:o.sRGBEncoding,o.Math.nearestPowerOfTwo(b.image.width)===b.image.width&&o.Math.nearestPowerOfTwo(b.image.height)===b.image.height||(b.wrapS=o.ClampToEdgeWrapping,b.wrapT=o.ClampToEdgeWrapping,b.generateMipmaps=!1,b.anisotropy=1,b.anisotropy=1,b.magFilter=f?o.NearestFilter:o.LinearFilter,b.minFilter=f?o.NearestFilter:o.LinearFilter),b.needsUpdate=!0,n&&n.texture&&n.texture.dispose(),y(e,p,r,b)}if(!n)return b;n.texture=b,n.uvTransform=!0,n.uvOffset=new o.Vector2(h.uOffset,h.vOffset),n.uvRotation=h.rotation*o.Math.DEG2RAD,n.uvRepeat=new o.Vector2(h.uTile,h.vTile),n.texelTransform=!0,n.texelInvert=h.invert;var E=h.brightness-h.gain*h.gainPivot;return n.texelScale=h.gain,n.texelOffset=E,s>=0&&(n.uvChannel=s),n}},function(e,t,r){e.exports={default:r(675),__esModule:!0}},function(e,t,r){var n=r(154)("meta"),i=r(27),a=r(66),o=r(53).f,s=0,l=Object.isExtensible||function(){return!0},u=!r(69)(function(){return l(Object.preventExtensions({}))}),c=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[n].i},getWeak:function(e,t){if(!a(e,n)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[n].w},onFreeze:function(e){return u&&f.NEED&&l(e)&&!a(e,n)&&c(e),e}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(82);e.exports=function(e){return Object(n(e))}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){"use strict";var n=r(164),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=f;var a=r(135);a.inherits=r(107);var o=r(366),s=r(246);a.inherits(f,o);for(var l=i(s.prototype),u=0;u<l.length;u++){var c=l[u];f.prototype[c]||(f.prototype[c]=s.prototype[c])}function f(e){if(!(this instanceof f))return new f(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n(d,this)}function d(e){e.end()}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),n(t,e)}},function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var l,u=[],c=!1,f=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&d())}function d(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){e.exports={default:r(666),__esModule:!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(6)),i=o(r(33)),a=o(r(2));function o(e){return e&&e.__esModule?e:{default:e}}t.isUuid=l,t.buildQueryObject=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e)return function(e,t){var r="~"===e[0],n=!r&&'"'===e[0]&&e.slice(1).indexOf('"'),i=n&&-1!==n,o=i||r?v.exec(e.slice(r?1:n+2)):m.exec(e),s=i?e.slice(1,n+1):!r&&o[1],c=o[2],f=o[3],h=o[4],d=o[5],p=o[6],y=l(s)?s:void 0,x=(0,a.default)({scene:r,id:y,name:y||!s?void 0:u(s),type:c,filter:f,evalPlug:h,plug:d},function(e){var t,r,n=void 0,i=void 0;for(;null!==(r=g.exec(e));)2===(t=r[1].split("=")).length?(i||(i={}),i[t[0]]=t[1]):n=t[0];return{property:n,properties:i}}(p),{includeParent:!0});x.name&&(x._name=s);return(0,a.default)(x,t),x}(e,t);if("object"===(void 0===e?"undefined":(0,i.default)(e)))return(0,a.default)({},e,{name:e.name?u(e.name):void 0,names:e.names&&Array.isArray(e.names)?e.names.map(u):void 0,includeParent:void 0===e.includeParent?!e.from:e.includeParent},t);return{}},t.getMatch=y,t.matchChildren=function e(t,r,n,i,a){var o=[];var s=t.get("sceneGraph");var l=i&&y(i,n,a);l&&o.push(l);(r.children||[]).forEach(function(i){var l=s.nodes[i];if(!l)throw new Error("Invalid child for '"+r.name+"' - "+i);var u=y(l,n,a);u&&o.push(u),n.shallow||n.skipModels&&"Model"===l.type||(o=o.concat(e(t,l,n,null,a)))});return o},t.findChild=function e(t,r,n,i,o){var s=void 0;if(i&&(s=y(i,n,o)))return s;var l=t.get("sceneGraph");var u=(0,a.default)({},n);u.names&&(u.name=u.names[0],u.names=u.names.slice(1));var c=(r.children||[]).find(function(r){var n=l.nodes[r];if(s=y(n,u,o||u.names&&u.names.length),u.names){if(!s||!u.names.length)return!!s;if(s=e(t,n,u,null,o))return!0}else{if(s)return!0;if(s=!u.shallow&&e(t,n,u,null,o))return!0}});return c?s:null};var s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function l(e){return s.test(e)}function u(e){return e instanceof RegExp?e:(e=e.replace(/\(/,"\\(").replace(/\)/,"\\)").replace(/\*/g,"(.*)").replace(/^\"|\"$/g,""),new RegExp("^"+e+"$","i"))}var c="(?:%([^#!:]*))*",f="(?::([^#:]*))*",h="(?:!([^#[]*))*",d="(?:#([^[]*))*",p="(.*)",m=new RegExp("^([^!%[#:]*)*"+c+f+h+d+p),v=new RegExp("()"+c+f+h+d+p),g=/(?:\[([^\]]*)\])/g;function y(e,t,r){var i=function(e,t){if(void 0!==t.id&&t.id!==e.id)return null;if(void 0!==t.name&&!t.name.test(e.name))return null;if(void 0!==t.type)if("string"==typeof t.type){if(t.type!==e.type)return null}else if(Array.isArray(t.type)&&-1===t.type.indexOf(e.type))return null;return void 0===t.hasPlug||e.plugs[t.hasPlug]?e:null}(e,t);return i?r?i.id:function(e,t){var r=t.properties,i=t.property,a=t.operator,o=t.operatorIndex;if(t.evalPlug)return i?[e.id,"eval",t.evalPlug,i]:[e.id,"eval",t.evalPlug];if(!t.plug)return"name"===i||"type"===i?[e.id,i]:e.id;var s=e.plugs[t.plug];if(!s)return null;if(!r&&!i&&!a&&void 0===o)return e.id;var l=void 0!==t.operatorIndex?t.operatorIndex:s.findIndex(function(e){return(!i||"active"===i||e.hasOwnProperty(i))&&(!r||function(e,t){for(var r=(0,n.default)(e),i=0;i<r.length;i++)if(t[r[i]]!==e[r[i]])return!1;return!0}(r,e))});return-1===l?null:i?[e.id,t.plug,l,i]:[e.id,t.plug,l]}(e,t):null}},function(e,t,r){var n=r(60),i=r(329),a=r(327),o=r(48),s=r(153),l=r(223),u={},c={};(t=e.exports=function(e,t,r,f,h){var d,p,m,v,g=h?function(){return e}:l(e),y=n(r,f,t?2:1),x=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(a(g)){for(d=s(e.length);d>x;x++)if((v=t?y(o(p=e[x])[0],p[1]):y(e[x]))===u||v===c)return v}else for(m=g.call(e);!(p=m.next()).done;)if((v=i(m,y,p.value,t))===u||v===c)return v}).BREAK=u,t.RETURN=c},function(e,t){e.exports={}},function(e,t,r){var n=r(335),i=r(210);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(208);e.exports=function(e){return Object(n(e))}},function(e,t,r){"use strict";var n=r(697)(!0);r(212)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){r(702);for(var n=r(34),i=r(70),a=r(92),o=r(28)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=n[u],f=c&&c.prototype;f&&!f[o]&&i(f,o,u),a[u]=a.Array}},function(e,t,r){var n=r(20)("unscopables"),i=Array.prototype;void 0==i[n]&&r(54)(i,n,{}),e.exports=function(e){i[n][e]=!0}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports={}},function(e,t){e.exports=!1},function(e,t,r){var n=r(357),i=r(229);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(72);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},function(e,t,r){var n=r(29).f,i=r(46),a=r(20)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){var n=r(84),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):a(e,t)}},function(e,t,r){var n=r(17);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(2),a=(n=i)&&n.__esModule?n:{default:n};t.default=a.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(261),a=(n=i)&&n.__esModule?n:{default:n};function o(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}o.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},o.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},o.prototype.curveTo=o.prototype.bezierCurveTo=function(e,t,r,n,i,a){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:n,x:i,y:a})},o.prototype.quadTo=o.prototype.quadraticCurveTo=function(e,t,r,n){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:n})},o.prototype.close=o.prototype.closePath=function(){this.commands.push({type:"Z"})},o.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof a.default){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},o.prototype.getBoundingBox=function(){for(var e=new a.default,t=0,r=0,n=0,i=0,o=0;o<this.commands.length;o++){var s=this.commands[o];switch(s.type){case"M":e.addPoint(s.x,s.y),t=n=s.x,r=i=s.y;break;case"L":e.addPoint(s.x,s.y),n=s.x,i=s.y;break;case"Q":e.addQuad(n,i,s.x1,s.y1,s.x,s.y),n=s.x,i=s.y;break;case"C":e.addBezier(n,i,s.x1,s.y1,s.x2,s.y2,s.x,s.y),n=s.x,i=s.y;break;case"Z":n=t,i=r;break;default:throw new Error("Unexpected path command "+s.type)}}return e.isEmpty()&&e.addPoint(0,0),e},o.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},o.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function r(){for(var e="",r=0;r<arguments.length;r+=1){var n=arguments[r];n>=0&&r>0&&(e+=" "),e+=t(n)}return e}e=void 0!==e?e:2;for(var n="",i=0;i<this.commands.length;i+=1){var a=this.commands[i];"M"===a.type?n+="M"+r(a.x,a.y):"L"===a.type?n+="L"+r(a.x,a.y):"C"===a.type?n+="C"+r(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?n+="Q"+r(a.x1,a.y1,a.x,a.y):"Z"===a.type&&(n+="Z")}return n},o.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},o.prototype.toDOMElement=function(e){var t=this.toPathData(e),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r},t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(108));t.glowFilter=function(){return(0,i.default)("svg",{attrs:{width:0,height:0}},[(0,i.default)("filter",{attrs:{id:"glowfilter"}},[(0,i.default)("feGaussianBlur",{attrs:{in:"SourceAlpha",stdDeviation:50,result:"blur"}}),(0,i.default)("feOffset",{attrs:{in:"blur",dx:0,dy:0,result:"offsetBlur"}}),(0,i.default)("feFlood",{attrs:{"flood-color":s,"flood-opacity":1,result:"offsetColor"}}),(0,i.default)("feComposite",{attrs:{in:"offsetColor",in2:"offsetBlur",operator:"in",result:"offsetBlurComposed"}}),(0,i.default)("feMerge",[(0,i.default)("feMergeNode",{attrs:{in:"offsetBlurComposed"}}),(0,i.default)("feMergeNode",{attrs:{in:"SourceGraphic"}})])])])},t.help=function(e,t){return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:u,boxSizing:c}},[(0,i.default)("path",{attrs:{fill:l,filter:o,d:"M744.25 70.953c-64.735-46.677-146.050-70.016-243.947-70.016-74.445 0-137.306 16.411-188.355 49.29-81.031 51.447-124.075 138.839-129.298 262.062h187.787c0-35.945 10.505-70.413 31.402-103.803 20.954-33.276 56.501-49.914 106.642-49.914 50.993 0 86.142 13.515 105.279 40.488 19.25 27.086 28.847 57.012 28.847 89.833 0 28.62-14.309 54.797-31.629 78.534-9.483 13.856-21.975 26.632-37.535 38.273 0 0-101.816 65.302-146.505 117.772-25.894 30.38-28.222 75.978-30.551 141.281-0.113 4.656 1.647 14.309 17.887 14.309 16.297 0 131.513 0 145.993 0 14.537 0 17.547-10.733 17.716-15.559 1.023-23.736 3.634-35.945 8.006-49.687 8.177-25.95 30.551-48.551 55.592-68.085l51.674-35.604c46.677-36.399 83.871-66.211 100.338-89.607 28.052-38.386 47.812-85.745 47.812-141.962-0.057-91.707-32.424-160.814-97.158-207.605zM497.293 791.608c-64.678-1.987-118.056 42.816-120.1 113.002-1.987 70.073 48.722 116.465 113.456 118.34 67.517 1.987 119.475-41.282 121.576-111.469 1.931-70.186-47.359-117.885-114.933-119.872z"}})])},t.threekit=function(e){return(0,i.default)("svg",{style:e,attrs:{viewBox:"0 0 4223 1024"}},[(0,i.default)("text",{attrs:{x:"0",y:"640","font-family":"arial","font-size":"300px","font-weight":"bold",fill:"#42494C"}},"Powered by"),(0,i.default)("g",{attrs:{width:"4223",height:"1024",fill:"none",d:"M0,0h24v24H0V0z",transform:"translate(1800, 240) scale(0.55)"}},[(0,i.default)("path",{attrs:{style:"fill",fill:"#29826b",d:"M661.721 756.58l-253.146-126.551c-37.986-19.309-63.559-58.1-63.562-102.864v0-268.806l-115.005-59.383v385.702c0 0.002 0 0.004 0 0.007 0 44.763 25.574 83.553 62.909 102.556l0.653 0.302 359.068 179.534z"}}),(0,i.default)("path",{attrs:{fillRule:"evenodd",fill:"#29826b",d:"M178.566 745.055c-37.979-19.306-63.55-58.087-63.562-102.841v-446.648l-31.781-15.901c-7.491-3.825-16.339-6.067-25.711-6.067-31.755 0-57.499 25.735-57.513 57.486v468.597c0 0.002 0 0.004 0 0.007 0 44.763 25.574 83.553 62.909 102.556l0.653 0.302 428.237 214.13c7.491 3.825 16.339 6.067 25.711 6.067 31.762 0 57.511-25.748 57.513-57.51v0-21.994z"}}),(0,i.default)("path",{attrs:{fill:"#78c4a2",d:"M856.475 221.278l-428.237-214.108c-7.362-3.767-16.059-5.975-25.272-5.975-9.333 0-18.137 2.266-25.892 6.277l0.315-0.148v-0.462l-116.346 58.173 0.374 0.242c7.678-4.153 16.807-6.594 26.506-6.594 9.227 0 17.937 2.209 25.632 6.127l-0.321-0.148 428.237 214.108c37.952 19.328 63.496 58.107 63.496 102.852 0 0.012 0 0.024 0 0.036v-0.002 468.574c-0.004 22.714-13.358 42.308-32.643 51.363l-0.347 0.146v0.462l116.566-58.195-0.396-0.242c19.023-9.437 31.869-28.725 31.869-51.014 0-0.011 0-0.023 0-0.034v0.002-468.464c0-0.042 0-0.092 0-0.141 0-44.751-25.565-83.531-62.887-102.531l-0.653-0.302z"}}),(0,i.default)("path",{attrs:{fill:"#78c4a2",d:"M626.466 336.282l-428.237-214.108c-7.365-3.771-16.066-5.98-25.283-5.98-9.337 0-18.145 2.268-25.903 6.282l0.315-0.148v-0.462l-116.324 58.173 0.374 0.242c7.678-4.153 16.807-6.594 26.506-6.594 9.227 0 17.937 2.209 25.632 6.127l-0.321-0.148 428.237 214.020c37.988 19.316 63.562 58.114 63.562 102.885 0 0 0 0.001 0 0.001v0 468.662c-0.004 22.714-13.358 42.308-32.643 51.363l-0.347 0.146v0.484l116.522-58.305-0.396-0.242c19.023-9.437 31.869-28.725 31.869-51.014 0-0.011 0-0.023 0-0.034v0.002-468.486c0-0.006 0-0.013 0-0.020 0-44.759-25.575-83.545-62.908-102.542l-0.653-0.302z"}}),(0,i.default)("path",{attrs:{fill:"#021b15",d:"M1283.722 447.152h-79.177v-84.587h79.177v-127.233h97.058v127.321h109.506v84.587h-109.506v237.641q0 26.722 10.667 38.291t36.509 11.547h72.117v83.708h-92.483q-64.111 0-93.935-30.263t-29.823-93.495z"}}),(0,i.default)("path",{attrs:{fill:"#021b15",d:"M1916.324 407.080q51.201 49.881 51.201 160.267v251.079h-96.156v-245.734q0-64.991-28.042-98.839t-81.376-33.826q-56.985 0-89.492 39.588t-32.485 108.187v230.625h-96.266v-623.255h96.156v234.166q51.641-72.117 143.354-72.117 81.838 0 133.105 49.859z"}}),(0,i.default)("path",{attrs:{fill:"#021b15",d:"M2297.825 362.564v89.932h-42.734q-59.647 0-86.369 38.731t-26.7 99.279v227.92h-96.178v-455.861h85.489l10.689 69.456c12.452-21.283 29.596-38.575 50.093-50.843l0.646-0.358q31.187-18.233 83.576-18.255z"}}),(0,i.default)("path",{attrs:{fill:"#021b15",d:"M2340.119 468.090c18.092-34.558 44.834-62.444 77.408-81.413l0.955-0.514q50.277-28.922 115.312-28.944 65.849 0 116.17 26.722c33.242 17.69 60.133 43.46 78.673 74.76l0.504 0.92q28.9 48.958 29.823 114.851c-0.030 12.899-1.004 25.544-2.858 37.902l0.174-1.415h-343.584v5.366q3.541 59.647 37.389 94.375t90.812 34.728q43.613 0 74.338-20.938t40.534-59.207h96.134c-8.605 46.442-33.226 86.027-67.805 113.681l-0.375 0.29q-54.764 44.537-136.69 44.515-71.215 0-124.198-28.922c-34.825-18.94-62.758-46.703-81.378-80.339l-0.527-1.037q-28.966-52.521-28.944-121.977 0.088-70.402 28.13-123.406zM2661.094 541.526q-6.246-50.739-39.588-78.803t-84.148-28.020q-47.176 0-81.376 29.361t-39.588 77.461z"}}),(0,i.default)("path",{attrs:{fill:"#021b15",d:"M2838.714 468.090c18.085-34.557 44.82-62.443 77.387-81.413l0.954-0.513q50.321-28.922 115.312-28.944 65.981 0 116.192 26.722c33.24 17.694 60.13 43.463 78.672 74.76l0.505 0.92q28.9 48.958 29.823 114.851c-0.033 12.901-1 25.548-2.835 37.911l0.174-1.423h-343.628v5.366q3.563 59.647 37.389 94.375t90.834 34.728q43.591 0 74.338-20.938t40.512-59.207h96.156c-8.607 46.441-33.228 86.025-67.805 113.681l-0.375 0.29q-54.764 44.537-136.668 44.515-71.215 0-124.198-28.922c-34.825-18.949-62.762-46.71-81.399-80.339l-0.527-1.037q-28.922-52.521-28.922-121.977 0.176-70.402 28.108-123.406zM3159.688 541.526q-6.268-50.739-39.588-78.803t-84.126-28.020q-47.198 0-81.376 29.361t-39.588 77.461z"}}),(0,i.default)("path",{attrs:{fill:"#021b15",d:"M3422.336 195.171v389.969l208.345-222.575h111.31l-170.077 183.427 180.743 272.435h-113.949l-135.349-202.099-81.024 85.467v116.566h-96.156v-623.189z"}}),(0,i.default)("path",{attrs:{fill:"#021b15",d:"M3885.323 196.953q16.891 16.033 16.913 40.952c0.013 0.452 0.021 0.983 0.021 1.516 0 15.656-6.486 29.797-16.918 39.882l-0.016 0.015c-10.929 10.165-25.63 16.404-41.788 16.404s-30.859-6.239-41.826-16.439l0.038 0.035c-10.448-10.090-16.935-24.223-16.935-39.87 0-0.543 0.008-1.084 0.023-1.623l-0.002 0.079q0-24.919 16.913-40.952c11.038-9.905 25.706-15.962 41.788-15.962s30.75 6.057 41.846 16.013l-0.059-0.052zM3891.569 362.564v455.861h-96.178v-455.861z"}}),(0,i.default)("path",{attrs:{fill:"#021b15",d:"M4006.42 447.152h-79.177v-84.587h79.177v-127.233h97.036v127.321h109.528v84.587h-109.528v237.641q0 26.722 10.689 38.291t36.509 11.547h72.117v83.708h-92.593q-64.089 0-93.935-30.263t-29.823-93.495z"}})])])},t.snapshot=function(e,t){return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:u,boxSizing:c}},[(0,i.default)("path",{attrs:{fill:l,filter:o,d:"M896 256h-190.016c0 0-1.984-3.808-1.984-48s-35.808-80-80-80h-256c-44.192 0-80 35.808-80 80s1.984 48 1.984 48h-193.984c-35.328 0-64 28.672-64 64v512c0 35.328 28.672 64 64 64h800c35.328 0 64-28.672 64-64v-512c0-35.328-28.672-64-64-64zM497.44 767.136c-106.048 0-192-85.952-192-192 0-106.016 85.952-192 192-192 106.016 0 192 85.952 192 192s-85.984 192-192 192z"}})])},t.home=function(e,t){return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:u,boxSizing:c}},[(0,i.default)("path",{attrs:{fill:l,filter:o,d:"M1024 608l-192-192v-288h-128v160l-192-192-512 512v32h128v320h320v-192h128v192h320v-320h128z"}})])},t.configurator=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:u,boxSizing:c}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M286.547 465.016c16.843 16.812 81.716 85.279 81.716 85.279l35.968-37.093-56.373-58.248 108.214-114.934c0 0-48.842-47.623-27.468-28.655 20.438-75.903 1.812-160.589-55.842-220.243-57.154-59.186-138.37-78.592-211.337-58.218l123.653 127.715-32.53 125.309-121.060 33.438-123.59-127.748c-19.718 75.436-0.969 159.339 56.311 218.556 60.093 62.123 146.621 80.373 222.338 54.842zM698.815 589.231l-149.121 147.308 245.932 254.805c20.062 20.812 46.498 31.188 72.872 31.188 26.25 0 52.624-10.375 72.811-31.188 40.249-41.624 40.249-108.997 0-150.62l-242.494-251.493zM1023.681 161.838l-156.621-161.839-461.673 477.298 56.373 58.248-276.335 285.616-63.154 33.749-89.217 145.559 22.719 23.562 140.839-92.247 32.655-65.312 276.336-285.554 56.404 58.248 461.674-477.328z"}})])},t.orbit=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:u,boxSizing:c}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z"}})])},t.pan=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:h},e),style:{padding:u,boxSizing:c}},[(0,i.default)("g",{attrs:{transform:"matrix(0.49680763,0.49680763,-0.49680763,0.49680763,255.01217,2.6223229)"}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M -0.49680099,-1.4900844 -0.49680795,206.9137 79.659562,126.75733 207.90699,255.00476 79.657586,383.25416 -0.49680795,303.09977 l 4.41e-6,208.40379 208.40379354,0 -80.15637,-80.15637 128.2494,-128.2494 c 43.4197,43.41971 90.25956,90.25956 128.2494,128.2494 l -80.15637,80.15637 208.4038,0 0,-208.40379 -80.1544,80.15439 -128.2494,-128.2494 c 42.74914,-42.74914 85.49828,-85.49828 128.24743,-128.24743 l 80.15637,80.15637 -10e-6,-208.4037813 -208.40379,-1e-5 80.1544,80.1543943 C 341.4983,121.41344 298.74916,164.16259 256.00002,206.91173 L 127.75259,78.664303 207.90699,-1.4900913 Z"}})])])},t.vrHeadSet=function(e,t){return(0,i.default)("svg",{style:t,attrs:(0,n.default)({viewBox:"0 0 800.000000 800.000000",preserveAspectRatio:"xMidYMid meet"},e)},[(0,i.default)("g",{attrs:{transform:"translate(0.000000,800.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"}},[(0,i.default)("path",{attrs:{d:"M4450 7334 c-651 -47 -1223 -245 -1740 -602 -177 -122 -473 -355 -655 -516 -113 -100 -433 -415 -487 -479 l-40 -47 337 2 336 3 33 100 c81 249 197 406 443 602 460 366 982 588 1578 669 184 25 610 26 785 1 180 -25 352 -62 482 -103 232 -74 538 -233 746 -388 147 -110 332 -297 410 -416 171 -259 278 -575 313 -924 21 -209 1 -665 -37 -848 l-6 -28 -504 0 -503 0 -42 83 c-158 316 -444 517 -794 557 -49 5 -96 10 -102 10 -10 0 -13 25 -13 93 0 213 -90 375 -249 451 l-66 31 -1640 0 -1640 0 -57 -27 c-106 -49 -192 -151 -229 -269 -34 -109 -65 -99 304 -99 287 0 326 -2 356 -18 100 -50 106 -186 12 -249 -34 -23 -37 -23 -368 -23 l-334 0 3 -387 c4 -362 5 -392 25 -450 42 -126 135 -232 241 -275 l57 -23 1310 -3 1310 -2 30 -86 c112 -331 400 -579 760 -655 77 -17 293 -17 370 0 328 69 600 284 729 574 l25 57 411 0 411 0 -7 -22 c-16 -54 -80 -167 -174 -307 -166 -248 -223 -394 -250 -640 -37 -331 42 -762 226 -1240 25 -63 43 -115 42 -116 -9 -7 -453 -121 -618 -159 -600 -137 -1072 -188 -1317 -141 -164 31 -240 99 -349 310 -110 213 -183 304 -279 346 -40 18 -74 24 -173 27 -149 5 -240 -5 -587 -70 -395 -74 -471 -72 -702 24 -65 27 -73 33 -78 61 -3 18 -16 169 -30 337 -62 758 -105 990 -198 1088 -37 39 -96 71 -221 119 -50 19 -106 44 -125 55 -32 20 -33 23 -27 69 4 27 20 93 36 148 17 55 30 105 30 111 0 6 -36 10 -94 10 l-93 0 -29 -102 c-39 -141 -40 -258 -4 -311 33 -49 108 -100 195 -132 39 -15 100 -40 137 -57 64 -29 69 -34 87 -82 45 -122 76 -352 126 -946 19 -234 39 -435 44 -446 10 -24 196 -107 317 -143 190 -55 273 -53 638 14 322 59 432 75 536 75 163 0 200 -27 301 -225 149 -289 255 -395 446 -447 98 -26 409 -36 589 -19 289 28 646 94 1039 191 237 58 616 164 640 178 10 5 -2 42 -47 146 -208 487 -315 980 -279 1296 25 217 78 358 208 547 102 150 169 266 209 369 28 69 42 94 58 98 46 11 74 57 104 171 65 241 113 484 144 735 20 163 17 645 -5 795 -38 254 -103 475 -203 683 -255 534 -713 915 -1369 1139 -184 62 -389 106 -625 133 -101 11 -487 21 -580 14z"}})])])},t.zoom=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:u,boxSizing:c}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M992.262 871.396l-242.552-206.294c-25.074-22.566-51.89-32.926-73.552-31.926 57.256-67.068 91.842-154.078 91.842-249.176 0-212.078-171.922-384-384-384-212.076 0-384 171.922-384 384s171.922 384 384 384c95.098 0 182.108-34.586 249.176-91.844-1 21.662 9.36 48.478 31.926 73.552l206.294 242.552c35.322 39.246 93.022 42.554 128.22 7.356s31.892-92.898-7.354-128.22zM384 640c-141.384 0-256-114.616-256-256s114.616-256 256-256 256 114.616 256 256-114.614 256-256 256z"}})])},t.fullscreen=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:c}},[t.active?(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M448 576v416l-160-160-192 192-96-96 192-192-160-160zM1024 96l-192 192 160 160h-416v-416l160 160 192-192z"}}):(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M1024 0v416l-160-160-192 192-96-96 192-192-160-160zM448 672l-192 192 160 160h-416v-416l160 160 192-192z"}})])},t.vrSettings=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:c}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M884.907 256h-748.373c-27.733 0-51.2 24.32-51.2 54.187v446.293c0 29.867 23.467 54.187 52.48 54.187h203.52c23.040 0 42.667-13.653 49.493-33.707l59.307-148.053c10.24-24.747 34.133-42.24 61.867-42.24s51.627 17.493 61.867 42.24l59.307 148.053c8.107 20.053 26.453 33.707 47.36 33.707h204.373c30.293 0 53.76-24.32 53.76-54.187v-446.293c0-29.867-23.467-54.187-53.76-54.187zM308.053 622.080c-52.053 0-94.72-43.947-94.72-97.707 0-55.040 42.667-97.707 94.72-97.707s94.293 42.667 94.293 97.707c0 53.76-42.24 97.707-94.293 97.707zM715.947 622.080c-52.053 0-94.293-43.947-94.293-97.707s42.24-97.707 94.293-97.707c52.053 0 94.72 43.947 94.72 97.707s-42.667 97.707-94.72 97.707z"}})])},t.lenticularMode=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:c}},[t.active?(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M317.143 762.857l44.571-80.571q-49.714-36-77.714-90.857t-28-116q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 95.429 147.429 244 214.286zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM746.857 220q0 4-0.571 5.143-60 107.429-180 323.429t-180.571 324l-28 50.857q-5.714 9.143-16 9.143-6.857 0-76.571-40-9.143-5.714-9.143-16 0-6.857 25.143-49.714-81.714-37.143-150.571-98.857t-119.143-140q-11.429-17.714-11.429-39.429t11.429-39.429q87.429-134.286 217.143-212t283.429-77.714q50.857 0 102.857 9.714l30.857-55.429q5.714-9.143 16-9.143 2.857 0 10.286 3.429t17.714 8.857 18.857 10.571 18 10.571 11.143 6.571q9.143 5.714 9.143 15.429zM768 475.429q0 79.429-45.143 144.857t-119.429 94l160-286.857q4.571 25.714 4.571 48zM1024 548.571q0 20-11.429 39.429-22.286 36.571-62.286 82.857-85.714 98.286-198.571 152.571t-239.714 54.286l42.286-75.429q121.143-10.286 224.286-78.286t172.286-175.429q-65.714-102.286-161.143-168l36-64q54.286 36.571 104.286 87.429t82.571 105.143q11.429 19.429 11.429 39.429z"}}):(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M950.857 548.571q-86.857-134.857-217.714-201.714 34.857 59.429 34.857 128.571 0 105.714-75.143 180.857t-180.857 75.143-180.857-75.143-75.143-180.857q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 76 117.143 190.571 186.571t248.286 69.429 248.286-69.429 190.571-186.571zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM1024 548.571q0 19.429-11.429 39.429-80 131.429-215.143 210.571t-285.429 79.143-285.429-79.429-215.143-210.286q-11.429-20-11.429-39.429t11.429-39.429q80-130.857 215.143-210.286t285.429-79.429 285.429 79.429 215.143 210.286q11.429 20 11.429 39.429z"}})])},t.deviceTracking=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:c}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M395 37.2c-24.2 1.4-50.2 3.6-57.8 4.8-28.2 4.4-60.2 22.8-77.4 44.4-7.8 9.8-23.4 39-21.6 40.4 1.2 1 26.4 9.2 26.6 8.6 0.2-0.2 3.2-6.4 7-13.8 11.6-23.6 38.8-44 65.4-49.6 9.2-1.8 59.8-6 74.4-6h6.4v85.6l-16.4 1.2c-9.2 0.6-38.2 2-64.6 3.2-52.8 2.4-92.6 6.4-108 11-13 3.8-24.6 11.4-31.4 20.8-5 7-15.6 38.6-21.6 64l-2.6 10.6-8.2-1.2c-4.4-0.8-11.4-1.8-15.2-2.4l-7-1.2-17.6 88.4c-12.8 63.6-17 89-15.4 90 1.2 0.8 8.4 2.4 15.8 3.8l13.4 2.4-1.8 13.4c-1 7.4-1.8 31-2 52.4-0.2 34.6 0.2 40.4 4 51.4 15.2 45.6 59.8 72 133 78.6 24 2.2 25.2 2.2 42.6-3 62.8-18.2 121.4-24.2 219-22.4 79 1.6 130.2 8 175.6 22.4 15 4.8 17 5 38.6 3.2 73.4-6.2 118.6-32.2 134.8-77.2 4.6-13.2 6.4-64.6 3.2-95.2-1.4-12.2-2-22.6-1.6-23s6.8-2 14.2-3.6c7.4-1.4 13.8-3.2 14.4-3.6 0.4-0.6-7-40.4-16.8-88.8l-17.6-87.8-5.8 0.2c-3.4 0-10.2 0.8-15.2 1.6l-9.2 1.6-6.2-25c-9-35.4-13.2-45.8-22.2-54-8.8-8-30-18.4-43.6-21.6-15.4-3.4-63.8-7.4-120-10.2l-52.6-2.4v-85.6l5.6 1.2c3 0.6 18 1.6 33.4 2.2 15.4 0.8 34 2.6 41.6 4 28.2 5.8 54.4 26 67 51.6 3.8 7.6 7.8 13.2 9 12.8 1.4-0.4 7.2-2.4 13-4.2 5.6-2 10.4-4.6 10.4-6 0-1.6-3.4-9.4-7.4-17.4-10.6-21.4-32.6-43-54.4-53.6-9.2-4.4-23-9.4-31-11-38.2-8.2-203.8-11.6-296.2-6zM592 186c68.4 3.2 106 9 132.2 20.2 12 5.2 16.8 11.8 34.2 46.8 37.6 75 76.8 210.6 72.6 250.6-0.8 7.4-2.6 15.6-4 18.6-3.6 6.8-18.4 20.2-32.4 29.2-12.4 7.8-61.8 32-76.6 37.4-8.6 3-8.8 3-4-0.4 49.6-35 63.4-45.6 76.6-58.4 17.8-17.6 17.4-16 12.4-56-4.8-39-20-94.8-40.4-149-11-29.4-36.4-82.4-42.4-88.4-7.4-7.8-43.2-16.4-86.2-20.6-34.4-3.4-158.2-4.8-206.8-2.2-60.4 3.2-89.4 7.4-112.2 16.4-12 4.6-16.8 11.6-33.6 49.8-38 86.6-61.4 172.2-61.4 224.4v15.4l13.2 13.2c12.8 12.6 43.4 35.6 67.4 50.4 6.2 4 11.2 7.6 10.6 8-1.2 1.4-40.4-15-62.8-26.2-24.8-12.4-45-26.6-49-34.6-1.6-3-4-15.6-5.4-27.6-2.2-20-2-24.2 1.8-46.4 8-46.4 22.4-94.6 45.6-153.6 13.4-34 32-73 40.2-84.2 7.8-10.6 21.2-17 46.4-22.4 19.2-4.2 70.6-10 98-11 38.6-1.6 127.2-1.2 166 0.6zM194 656.8c0 6.4 6 33 10 45.2 21.6 63.6 98.4 169.8 171 236.8 28 25.8 44 37.4 60.8 44.2 25.2 10.4 69 15 103.6 11.2 52.2-6 69.8-16 125.6-71 90-89.2 156-193 163.8-257.8l1.4-11.4h-30.2v7.6c0 19.8-18 63.4-41.8 101.4-38 60.2-102 134.8-150 174.8-25.4 21-49.8 28.2-96.2 28.2-41.2 0-63.6-5.4-85.6-20.4-15.8-10.8-56-49.2-79-75.6-73.4-83.8-117.8-157.2-124.4-205.6l-1.4-10.4h-13.8c-10.6 0-13.8 0.6-13.8 2.8zM407.2 770.6c-1.8 7.4-3.2 13.6-3.2 14.2 0 1.6 28 7.4 55 11.4 43.2 6.4 79.6 4.6 136-6.2 12.2-2.4 22.2-4.6 22.6-5 0.4-0.2-1-6.6-2.8-14l-3.4-13.4-7.2 1c-4 0.6-17.6 3.2-30.2 5.6-33.6 6.6-93.2 6.6-126 0.2-12.6-2.6-26.2-5.2-30.2-5.8l-7.2-1-3.4 13z"}})])},t.nodeRotate=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:c}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z"}}),(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M512 250l262 262-262 262-262-262z"}})])},t.nodeMove=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:h},e),style:{padding:u,boxSizing:c}},[(0,i.default)("g",{attrs:{transform:"matrix(0.49680763,0.49680763,-0.49680763,0.49680763,255.01217,2.6223229)"}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M -0.49680099,-1.4900844 -0.49680795,206.9137 79.659562,126.75733 207.90699,255.00476 79.657586,383.25416 -0.49680795,303.09977 l 4.41e-6,208.40379 208.40379354,0 -80.15637,-80.15637 128.2494,-128.2494 c 43.4197,43.41971 90.25956,90.25956 128.2494,128.2494 l -80.15637,80.15637 208.4038,0 0,-208.40379 -80.1544,80.15439 -128.2494,-128.2494 c 42.74914,-42.74914 85.49828,-85.49828 128.24743,-128.24743 l 80.15637,80.15637 -10e-6,-208.4037813 -208.40379,-1e-5 80.1544,80.1543943 C 341.4983,121.41344 298.74916,164.16259 256.00002,206.91173 L 127.75259,78.664303 207.90699,-1.4900913 Z"}}),(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M256 0l256 256-256 256-256-256z"}})])])},t.nodeScale=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:u,boxSizing:c}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M992.262 871.396l-242.552-206.294c-25.074-22.566-51.89-32.926-73.552-31.926 57.256-67.068 91.842-154.078 91.842-249.176 0-212.078-171.922-384-384-384-212.076 0-384 171.922-384 384s171.922 384 384 384c95.098 0 182.108-34.586 249.176-91.844-1 21.662 9.36 48.478 31.926 73.552l206.294 242.552c35.322 39.246 93.022 42.554 128.22 7.356s31.892-92.898-7.354-128.22zM384 640c-141.384 0-256-114.616-256-256s114.616-256 256-256 256 114.616 256 256-114.614 256-256 256z"}}),(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M375 181l200 200-200 200-200-200z"}})])},t.pause=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:u,boxSizing:c}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M64 0h384v1024h-384z"}}),(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M576 0h384v1024h-384z"}})])},t.play=function(e,t){var r=t.active?t.activeColor:l;return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:f},e),style:{padding:u,boxSizing:c}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M138 0L1024 512L138 1024z"}})])},t.select=function(e,t){var r=t.active?t.activeColor:"#000";return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:"0 0 32 32"},e),style:{padding:u,boxSizing:c}},[(0,i.default)("path",{attrs:{fill:r,filter:o,d:"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 28c-6.627 0-12-5.373-12-12s5.373-12 12-12c6.627 0 12 5.373 12 12s-5.373 12-12 12zM10 16c0-3.314 2.686-6 6-6s6 2.686 6 6c0 3.314-2.686 6-6 6s-6-2.686-6-6z"}})])},t.exit=function(e,t){t.active&&t.activeColor;return(0,i.default)("svg",{attrs:{}},[(0,i.default)("g",[(0,i.default)("line",{attrs:{x1:2,y1:2,x2:30,y2:30},style:{stroke:"black",strokeWidth:3}}),(0,i.default)("line",{attrs:{x1:30,y1:2,x2:2,y2:30},style:{stroke:"black",strokeWidth:3}})]),(0,i.default)("g",[(0,i.default)("line",{attrs:{x1:2.4,y1:2.4,x2:29.6,y2:29.6},style:{stroke:"white",strokeWidth:2}}),(0,i.default)("line",{attrs:{x1:29.6,y1:2.4,x2:2.4,y2:29.6},style:{stroke:"white",strokeWidth:2}})])])},t.box=function(e,t){var r=t.active?t.activeColor:"#000";return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:"0 0 32 32"},e),style:{padding:u,boxSizing:c}},[(0,i.default)("rect",{attrs:{fill:r,filter:o,x:2,y:2,width:28,height:28}})])},t.sphere=function(e,t){var r=t.active?t.activeColor:"#000";return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:"0 0 32 32"},e),style:{padding:u,boxSizing:c}},[(0,i.default)("circle",{attrs:{fill:r,filter:o,r:14,cx:16,cy:16}})])},t.cone=function(e,t){var r=t.active?t.activeColor:"#000";return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:"0 0 32 32"},e),style:{padding:u,boxSizing:c}},[(0,i.default)("polygon",{attrs:{fill:r,filter:o,points:"16,2 28,28 2,28"}})])},t.cross=function(e,t){return(0,i.default)("svg",{attrs:(0,n.default)({viewBox:"0 0 32 32"},e),style:{padding:u,boxSizing:c}},[(0,i.default)("path",{attrs:{fill:l,d:"M31.708 25.708c-0-0-0-0-0-0l-9.708-9.708 9.708-9.708c0-0 0-0 0-0 0.105-0.105 0.18-0.227 0.229-0.357 0.133-0.356 0.057-0.771-0.229-1.057l-4.586-4.586c-0.286-0.286-0.702-0.361-1.057-0.229-0.13 0.048-0.252 0.124-0.357 0.228 0 0-0 0-0 0l-9.708 9.708-9.708-9.708c-0-0-0-0-0-0-0.105-0.104-0.227-0.18-0.357-0.228-0.356-0.133-0.771-0.057-1.057 0.229l-4.586 4.586c-0.286 0.286-0.361 0.702-0.229 1.057 0.049 0.13 0.124 0.252 0.229 0.357 0 0 0 0 0 0l9.708 9.708-9.708 9.708c-0 0-0 0-0 0-0.104 0.105-0.18 0.227-0.229 0.357-0.133 0.355-0.057 0.771 0.229 1.057l4.586 4.586c0.286 0.286 0.702 0.361 1.057 0.229 0.13-0.049 0.252-0.124 0.357-0.229 0-0 0-0 0-0l9.708-9.708 9.708 9.708c0 0 0 0 0 0 0.105 0.105 0.227 0.18 0.357 0.229 0.356 0.133 0.771 0.057 1.057-0.229l4.586-4.586c0.286-0.286 0.362-0.702 0.229-1.057-0.049-0.13-0.124-0.252-0.229-0.357z"}})])};var i=a(r(37));function a(e){return e&&e.__esModule?e:{default:e}}var o="url(#glowfilter)",s="#000",l="#fff",u="0",c="border-box",f="-300 -300 1624 1624",h="-150 -150 812 812"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lookupOperator=function(e,t,r){var n=R[e];if(!n)return r.push("Unknown plug: "+e),R.None.NoOp;var i=n[t];if(!i)return r.push("Unknown Operator: "+e+", "+t),R.None.NoOp;return i};var n=M(r(533)),i=M(r(440)),a=M(r(441)),o=M(r(442)),s=M(r(444)),l=M(r(451)),u=M(r(452)),c=M(r(445)),f=M(r(453)),h=M(r(454)),d=M(r(455)),p=M(r(498)),m=M(r(509)),v=M(r(510)),g=M(r(529)),y=M(r(531)),x=M(r(443)),b=M(r(446)),w=M(r(530)),_=M(r(532));function M(e){return e&&e.__esModule?e:{default:e}}var S={schema:{}},T={Bone:S},E={Null:S},P={Action:S,Mixer:S};v.default["vray/create"]=S;var A={Viewport:S},C={Clip:S},R=(0,n.default)({Annotation:i.default,Bone:T,Camera:a.default,Environment:o.default,GeneralRenderer:s.default,Light:u.default,Material:f.default,Mixer:P,Null:E,Helper:c.default,Pass:h.default,Player:d.default,PolyMesh:p.default,Properties:m.default,Renderer:v.default,Shape:g.default,Timeline:w.default,Transform:y.default,Image:l.default,Viewport:A,Font:x.default,IESProfile:b.default,Clip:C,Vrscene:_.default},{withNone:!0});t.default=R},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)((0,i.default)((0,n.default)(e)))};var n=o(r(194)),i=o(r(560)),a=o(r(561));o(r(193));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(!Array.isArray(e))return e;if(1===e.length)return e[0];var i=r||!1,o=function(t){for(var r=0;r<e.length;++r)if(void 0!==e[r][t])return!0;return!1},u=function(t){for(var r=[],n=0;n<e.length;++n)r.push(e[n][t]);return r},f=function(e,t){if(o(e))return i&&console.log("Merging "+e+"s..."),c(u(e),t)},h={},d={transforms:t,applyTransform:n.Vector3.prototype.applyMatrix4};if(h.positions=f("positions",d),h.faceRangeOffsets=h.positions.faceRangeOffsets,t)for(var p=0;p<t.length;++p)t[p]=(new n.Matrix3).getNormalMatrix(t[p]);d.faceRangeOffsets=h.faceRangeOffsets,d.applyTransform=n.Vector3.prototype.applyMatrix3,d.defaultValue=new n.Vector3(1,0,0),d.respectivePositions=u("positions"),h.normalMap=f("normalMap",d),d.defaultValue=new n.Vector4(1,0,0,1),h.tangentMap=f("tangentMap",d);var m=function(e,t){var r=new s.default;i&&console.log("Merging "+e);var n=function(e){for(var t={},r=void 0,n=0;n<e.length;++n){var i=e[n];if(i)for(var a=0;a<i.namesByIndex.length;++a)r=i.namesByIndex[a],t[r]=!0}var o={};for(var s in t)if(t.hasOwnProperty(s))for(var l=0;l<e.length;++l){var u=e[l];o[s]||(o[s]=[]),o[s].push(u.byName[s])}return o}(u(e));for(var a in n)n.hasOwnProperty(a)&&r.set(a,c(n[a],t));return r};if(d.transforms=null,d.defaultValue=new n.Vector2(0,0),h.uvMaps=m("uvMaps",d),d.defaultValue=new n.Color(0,0,0),h.colorMaps=m("colorMaps",d),o("materialIds")){i&&console.log("Merging Material Ids......");var v=u("materialIds"),g=0,y=void 0;h.materialIds=new Float32Array(h.faceRangeOffsets.length-1);for(var x=0;x<v.length;++x)(y=v[x])&&h.materialIds.set(y,g),g+=e[x].faceRangeOffsets.length-1}var b=new a.default(h);return(0,l.default)(b,!0)};var n=r(0),i=u(r(3)),a=(u(r(76)),u(r(5))),o=u(r(7)),s=u(r(14)),l=u(r(194));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e.length<=0)){for(var r=t.faceRangeOffsets,n=t.transforms,a=t.applyTransform,s=t.defaultValue,l=t.respectivePositions,u=0,c=0,f=0,h=!1,d=s&&s.constructor,p=0;p<e.length;++p){if((h=null==e[p])&&(!s||!l))throw new Error("If any polymap does not exist, the defaultValue and respectivePositions must be passed");h?(c+=l[p].faceRangeOffsets.length-1,f+=l[p].faceValueIndices.length,u+=l[p].faceValueIndices.length):(d||(d=e[p].values.type),c+=e[p].faceRangeOffsets.length-1,f+=e[p].faceValueIndices.length,u+=e[p].values.length)}c++;for(var m=new i.default(d,u),v=new Uint32Array(f),g=r||new Uint32Array(c),y=new d,x=0,b=0,w=0,_=0;_<e.length;++_){h=null==e[_];var M=e[_]?e[_].faceRangeOffsets:l[_].faceRangeOffsets;if(!r)for(var S=1;S<M.length;++S)g[S+x]=M[S]+g[x];x+=M.length-1;for(var T=e[_]?e[_].faceValueIndices:l[_].faceValueIndices,E=0;E<T.length;++E)v[E+b]=h?E+w:T[E]+w;b+=T.length;for(var P=h?l[_].faceValueIndices:e[_].values,A=void 0,C=0;C<P.length;++C)if(h)m.setAt(C+w,s);else{if(e[_].values.getAt(C,y),n){if(!(A=n[_]).isMatrix4&&!A.isMatrix3&&!a)throw new Error("Requires Matrix3 or Matrix4 with a applyTransform function to perform transform.");a.call(y,A)}m.setAt(C+w,y)}w+=P.length}var R=new o.default({faceRangeOffsets:g,faceValueIndices:v,values:m});if(u!==m.length)throw new Error("mismatch between number of input and output values");return R}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UVAxisType=t.UVMapType=t.applyUVMap=void 0;var n=u(r(137)),i=r(0),a=u(r(5)),o=u(r(7)),s=u(r(3)),l=u(r(14));function u(e){return e&&e.__esModule?e:{default:e}}var c=1e-6,f=Math.PI/180,h={Planar:0,Box:1,Cylindrical:2,Spherical:3},d={X:0,Y:1,Z:2,AverageNormals:4};function p(e,t,r){var n=void 0;return Math.abs(e)<c&&Math.abs(r)<c?n=0:(n=Math.atan2(e,r))<0&&(n+=2*Math.PI),n}function m(e,t,r){var n=void 0,i=void 0;if(Math.abs(e)<c&&Math.abs(r)<c)n=0,i=Math.abs(t)<c?0:t<0?-Math.PI/2:Math.PI/2;else{(n=Math.atan2(e,r))<0&&(n+=2*Math.PI);var a=Math.sqrt(e*e+r*r);i=Math.atan2(t,a)}return{lon:n,lat:i}}t.applyUVMap=function(e,t){var r=(t=t||{}).selectedFaces;r&&r.length||(r=[].concat((0,n.default)(Array(e.faceRangeOffsets.length-1).keys()))),t.alignmentAxis===d.AverageNormals&&(t.alignmentAxis=d.Z);var u=new i.Vector3;t.rotation&&u.set(t.rotation.x,t.rotation.y,t.rotation.z).multiplyScalar(f);var v=t.scale||new i.Vector3(1,1,1),g=t.center||new i.Vector3,y=void 0!==t.uvProjectionMode?t.uvProjectionMode:0;if(t.autoFit)switch(y){case h.Box:case h.Planar:e.boundingBox.getSize(v),e.boundingBox.getCenter(g);break;case h.Spherical:case h.Cylindrical:}var x=void 0!==t.alignmentAxis?t.alignmentAxis:d.Y,b=void 0!==t.mapChannel?t.mapChannel:"default",w=void 0!==t.uTile?t.uTile:1,_=void 0!==t.vTile?t.vTile:1,M=(new i.Quaternion).setFromEuler((new i.Euler).setFromVector3(u,"ZYX"));if(t.worldSpace){var S=new i.Vector3,T=new i.Quaternion,E=new i.Vector3;(new i.Matrix4).getInverse(t.nodeTransform).decompose(E,T,S),v.multiply(S),M.premultiply(T)}var P=(new i.Matrix4).makeRotationFromQuaternion(M);P.getInverse(P);for(var A=e.faceRangeOffsets,C=e.positions.faceValueIndices,R=e.positions.values,I=e.uvMaps.byName[e.uvMaps.namesByIndex[0]],O=new s.default(i.Vector2,C.length),L=new i.Vector2(0,0),D=0;D<C.length;D++)O.setAt(D,L);if(I)for(var N=I.faceValueIndices,V=0;V<N.length;V++)O.setAt(V,I.values.getAt(N[V]));var F=new i.Vector3,B=new i.Vector3,U=new i.Vector3,k=new i.Vector3,z=null;switch(y){case h.Planar:z=function(){return function(e,t,r,n,i,a,o){var s=["x","y","z"][t];o.set(0,0,0),o[s]=1;var l=0===t?-e.z:e.x,u=1===t?-e.z:e.y;return a?(o[s]=a,i.dot(o)>0?(l=l/r.x+.5,u=u/r.y+.5):(l=0,u=0)):(l=l/r.x+.5,u=u/r.y+.5),n.set(l,u),n}(F,x,v,L,U,t.direction,k)};break;case h.Box:z=function(){return function(e,t,r,n){var i=0,a=0,o=e.x,s=e.y,l=e.z,u=Math.abs(t.x),c=Math.abs(t.y),f=Math.abs(t.z);return u>=c&&u>=f&&(i=-l/r.z+.5,a=s/r.y+.5),c>=u&&c>=f&&(i=o/r.x+.5,a=-l/r.z+.5),f>=u&&f>=c&&(i=o/r.x+.5,a=s/r.y+.5),t.x<0&&(i=1-i),t.y<0&&(i=1-i),t.z<0&&(i=1-i),n.set(i,a),n}(F,U,v,L)};break;case h.Cylindrical:z=function(){return function(e,t,r,n){var i=void 0,a=void 0;switch(t){case 0:i=p(e.z/r.z,(e.x,r.x),-e.y/r.y),a=-e.x/r.x+.5;break;case 1:i=p(e.x/r.x,(e.y,r.y),e.z/r.z),a=e.y/r.y+.5;break;case 2:i=p(-e.x/r.x,(e.z,r.z),-e.y/r.y),a=-e.z/r.z+.5}return i/=2*Math.PI,n.set(i,a),n}(F,x,v,L)};break;case h.Spherical:z=function(){return function(e,t,r,n){var i=void 0,a=void 0,o=void 0;switch(t){case 0:i=m(e.z/r.z,e.x/r.x,-e.y/r.y);break;case 1:i=m(e.x/r.x,-e.y/r.y,e.z/r.z);break;case 2:i=m(-e.x/r.x,e.z/r.z,-e.y/r.y)}return o=i.lon/(2*Math.PI),a=.5-i.lat/Math.PI,n.set(o,a),n}(F,x,v,L)};break;default:z=function(){return L.set(0,0)}}for(var G=[],j=0;j<e.positions.faceValueIndices.length;j++)G[j]=j;for(var H=0;H<r.length;++H){var W=A[r[H]],X=A[r[H]+1];U.multiplyScalar(0);for(var q=W;q<X;++q){var Y=1+q;Y>=X&&(Y=W),R.getAt(C[q],F),R.getAt(C[Y],B),U.x+=(F.y-B.y)*(F.z+B.z),U.y+=(F.z-B.z)*(F.x+B.x),U.z+=(F.x-B.x)*(F.y+B.y)}U.normalize();for(var Z=W;Z<X;++Z)L=new i.Vector2,R.getAt(C[Z],F),F.sub(g),F.applyMatrix4(P),z(),L.x*=w,L.y*=_,O.setAt(Z,L)}var J=new a.default(e),Q=new o.default({faceRangeOffsets:A,faceValueIndices:new Uint32Array(G),values:O});return y!==h.Cylindrical&&y!==h.Spherical||function(e,t,r,n,a){for(var o=void 0,s=.4*n,l=void 0,u=void 0,f=new i.Vector2,h=new i.Vector2,d=void 0,p=void 0,m=0,v=t.length;m<v;m++){d=e.faceRangeOffsets[t[m]],p=e.faceRangeOffsets[t[m]+1],l=!1;for(var g=d;g<p;g++){u=g+1<p?g+1:d,e.values.getAt(e.faceValueIndices[g],f),e.values.getAt(e.faceValueIndices[u],h),o=Math.abs(f.x-h.x);var y=3===r&&(f.y<c||f.y>a-c);if(o>s&&!y)if(f.x<h.x)f.x+=n,e.values.setAt(e.faceValueIndices[g],f),0===m&&(l=!0);else{if(l)continue;h.x+=n,e.values.setAt(e.faceValueIndices[u],h)}}}}(Q,r,y,w,_),J.uvMaps||(J.uvMaps=new l.default),J.uvMaps.set(b,Q),J},t.UVMapType=h,t.UVAxisType=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findHoles=function(e){for(var t=e.loopRangeOffsets.length-1,r=new Array(t),a=new n.Vector3,o=new n.Vector3,s=new n.Vector3,l=new n.Vector3,u=new n.Vector3,c=e.loopRangeOffsets[0],f=0;f<t;++f){var h=e.loopRangeOffsets[f+1];(0,i.computeFaceNormal)(e.positions,e.loopValueIndices,c,h,!0,u,a,o,s,l),r[f]=u.z>0,c=h}return r},t.putHolesInLoops=function(e,t,r,i){for(var a=new n.Vector3,o=t.length,s=0;s<o;++s)if(t[s]){for(var l=i[s],u=-1,c=-1,f=0;f<o;++f)if(!t[f]){var h=i[f];if(h.containsBox(l)){h.getSize(a);var d=a.x*a.y;(-1===u||d<c)&&(u=f,c=d)}}r[s]=u}},t.convertLoopsToFaces=function(e,t,r){var i=0,a=t.length;if(a>0){new n.Vector3;var o=[0],s=[],l=[];e.holeOffsets=[];for(var u=r[0].min.y,c=0;c<a;++c)if(-1===t[c]){for(var f=e.loopRangeOffsets[c],h=e.loopRangeOffsets[c+1],d=s.length,p=f;p<h;++p)s.push(e.loopValueIndices[p]);for(var m=[],v=0;v<a;++v)if(t[v]===c){m.push(s.length-d);for(var g=e.loopRangeOffsets[v],y=e.loopRangeOffsets[v+1],x=g;x<y;++x)s.push(e.loopValueIndices[x])}e.holeOffsets.push(m);var b=r[c];l.push(b);var w=b.min.y;w<u&&(u=w,i=o.length-1),o.push(s.length)}e.loopRangeOffsets=new Uint32Array(o),e.loopValueIndices=new Uint32Array(s);for(var _=0;_<l.length;++_)r[_]=l[_]}return i},t.extractVertices=function(e,t,r){for(var n=new Float32Array(3*(r-t)),i=0,o=t;o<r;++o)e.positions.getAt(e.loopValueIndices[o],a),n[i]=a.x,n[i+1]=a.y,n[i+2]=a.z||0,i+=3;return n};var n=r(0),i=r(142);var a=new n.Vector3},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(2));t.default=function(e,t,r){var o=e.positions,s=o.clone(),l=new(o.type||i.Vector3);function u(e){s.getAt(e,l),l.applyMatrix4(t),s.setAt(e,l)}if(r)for(var c=0;c<r.length;++c){var f=r[c];u(f)}else for(var h=0;h<s.length;++h)u(h);return new a.default((0,n.default)({},e,{positions:s,_boundingBox:null}))};var i=r(0),a=o(r(21));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrbitMode=function(e,t){var r=(0,n.get)(e,{scene:!0,evalPlug:"Player"}),i=(0,n.get)(e,{id:t,evalPlug:"Properties"});return r.overrideNavigation?r.orbitMode:i.orbitMode},t.getConstrainCameraY=function(e,t){var r=(0,n.get)(e,{scene:!0,evalPlug:"Player"}),i=(0,n.get)(e,{id:t,evalPlug:"Properties"});return r.overrideNavigation?r.constraintCameraY:i.constraintCameraY},t.setOrbitMode=function(e,t,r){var i={id:t,plug:"Properties"},a=(0,n.get)(e,{scene:!0,plug:"Player",property:"overrideNavigation"})?{scene:!0,plug:"Player"}:i;return(0,n.set)(a,r)},t.getOrbitTarget=function(e,t){var r=(0,n.get)(e,{scene:!0,evalPlug:"Player"}),i=(0,n.get)(e,{id:t,evalPlug:"Properties"});return r.overrideNavigation?r.orbitTarget:i.orbitTarget},t.getNodeRotateProperties=function(e,t){var r=(0,n.get)(e,{scene:!0,evalPlug:"Player"}),i=null;if(r.overrideNavigation)i={targetId:r.orbitTarget,axis:r.nodeRotateAxis,fixedAzimuth:r.fixedAzimuth,gyroscope:!1};else{var a=(0,n.get)(e,{id:t,evalPlug:"Properties"});i={targetId:a.orbitTarget,axis:a.nodeRotateAxis,fixedAzimuth:a.fixedAzimuth,gyroscope:!1}}"y"!==i.axis&&(i.gyroscope="g"===i.axis,i.axis=null);return i};var n=r(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new n.Matrix4;if(!e)return t;if("Orthographic"!==e.projection){var r=e.nearClip*Math.tan(n.Math.DEG2RAD*e.fieldOfView*.5),i=-r,a=i*e.aspectRatio,o=r*e.aspectRatio;return t.makePerspective(a,o,r,i,e.nearClip,e.farClip)}var s=function(e,t){if(!(t&&t.fieldOfView&&t.orthoZoom&&t.aspectRatio))return!1;var r=void 0;if("Orthographic"===t.projection)r=t.orthoHeight/2*t.orthoZoom;else{var i=t.tan(n.Math.degToRad(t.fieldOfView/2));r=i*t.orthoZoom}var a=r*t.aspectRatio;return!0===e?{width:a,height:r}:{width:2*a,height:2*r}}(!0,e)||{width:1,height:1};t.makeOrthographic(-s.width,s.width,s.height,-s.height,e.nearClip,e.farClip);return t};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){a.setFromMatrixPosition(e),i.setFromMatrixPosition(t),s.makeTranslation(a.x,a.y,a.z),s.lookAt(a,i,r||o),s.decompose(l,c,u),e.decompose(a,h,f),e.compose(a,c,f)};var n=r(0),i=new n.Vector3,a=new n.Vector3,o=new n.Vector3(0,1,1),s=new n.Matrix4,l=new n.Vector3,u=new n.Vector3,c=new n.Quaternion,f=new n.Vector3,h=new n.Quaternion},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0;var n=s(r(79));s(r(657));t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e,h=t,d=[],p={},m=[],v=[],g=!1,y=!1,x=null,b=null,w=null,_=16,M=_;function S(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];v.push({type:e,args:r})}function T(e,t,r,n){window&&window.ga&&ga(e+".send","timing",e,t,r,n)}function E(e,t,r,n){window&&window.ga&&ga(e+".send","event",e,t,r,n)}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&console.error(t),y?(y.error(e,n),e.message?(console.error(e.message),e.stack&&console.log(e.stack)):console.error(e)):console.error(e),r.makeErrorsFatal)throw e}function A(e){var t=p[e];t&&(t.end&&t.end(!0),delete p[e],m=(0,n.default)(p))}o.default.on("error",P);var C=function(){var e=!1,t=!1,r=new Date;function n(i){t=t||i,e||(e=!0,l.call(u,function(){var i=t;t=!1,function(i){try{if(i&&(M=_),i||v.length){var a=v.splice(0,v.length);d.slice().forEach(function(e){return e(a,t)})}var o=new Date;M=M>-1?M-1:-1,x&&M>=0&&x.update();var s=o-r;r=o,m.forEach(function(e){return e(s)})}catch(e){P(e)}e=!1,n()}(i)}))}return n}();function R(e){if(!(0,i.default)(e))throw console.log("Invalid action",e),new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw console.error("Invalid action: ",e),new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(g)throw new Error("Reducers may not dispatch actions.");try{g=!0,h=s(h,e,S,E,T)}catch(e){P(e)}finally{g=!1}return C(!0),o.default.Promise.resolve(e.resolve?e.resolve:e.payload)}return R({type:f.INIT}),{dispatch:R,subscribe:function(e){d.push(e);var t=!0;return function(){if(t){t=!1;var r=d.indexOf(e);d.splice(r,1)}}},getState:function(){return h},getIn:function(e){return h.getIn(e)},get:function(e){return h.get(e)},replaceReducer:function(e){s=e,R({type:f.INIT})},setTranslator:function(e,t){x="function"==typeof e?e(t):e},getTranslator:function(){return x},getEvaluatedTranslator:function(){return x&&x.update(),x},read:function(e){return(0,a.fromJSON)(e)},write:function(e){return(0,a.toJSON)(e)},useRollbar:function(e){y=e},error:P,setApi:function(e){b=e},hasApi:function(){return!!b},callApi:function(){if(!b)throw new Error("No api function defined");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return b.apply(void 0,[this].concat(t))},createEvent:S,setRequestAnimationFrame:c,logPageView:function(e,t){window&&window.ga&&ga("playerv2.send","pageview",""+encodeURI(e))},setSocketApi:function(e){w=e},getSocketApi:function(){return w},createCanvas:function(e,t){var r=document.createElement("Canvas");return r.width=e,r.height=t,r},setCreateCanvas:function(e){this.createCanvas=e},trackEvent:E,trackTiming:T,setTotalRenders:function(e){_=e,M=e},numRendersRemaining:function(){return M},renderAll:function(){if(x)for(M=_;M>=0;M--)x.update()},addTimer:function(e,t){A(e),p[e]=t,m=(0,n.default)(p)},killTimer:A,options:r}};var i=s(r(315)),a=r(650),o=s(r(248));function s(e){return e&&e.__esModule?e:{default:e}}var l=void 0,u=void 0;function c(e,t){e?(l=e,u=t):(l=requestAnimationFrame,u=window)}c();var f=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,r){e.exports={default:r(393),__esModule:!0}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(53).f,i=r(66),a=r(28)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){var n=r(61),i=r(231),a=r(85),o=r(35),s=r(735);e.exports=function(e,t){var r=1==e,l=2==e,u=3==e,c=4==e,f=6==e,h=5==e||f,d=t||s;return function(t,s,p){for(var m,v,g=a(t),y=i(g),x=n(s,p,3),b=o(y.length),w=0,_=r?d(t,b):l?d(t,0):void 0;b>w;w++)if((h||w in y)&&(v=x(m=y[w],w,g),e))if(r)_[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:_.push(m)}else if(c)return!1;return f?-1:u||c?c:_}}},function(e,t){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(86)("meta"),i=r(17),a=r(46),o=r(29).f,s=0,l=Object.isExtensible||function(){return!0},u=!r(24)(function(){return l(Object.preventExtensions({}))}),c=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[n].i},getWeak:function(e,t){if(!a(e,n)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[n].w},onFreeze:function(e){return u&&f.NEED&&l(e)&&!a(e,n)&&c(e),e}}},function(e,t,r){var n=r(15),i=r(743),a=r(229),o=r(236)("IE_PROTO"),s=function(){},l=function(){var e,t=r(228)("iframe"),n=a.length;for(t.style.display="none",r(345).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l.prototype[a[n]];return l()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[o]=e):r=l(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(357),i=r(229).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(46),i=r(85),a=r(236)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(17);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(t,r(57).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(6),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e,t){var r={};return(0,a.default)(t).forEach(function(n,i){r[n]=e(t[n],n,i)}),r}},function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(652),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,a.default)(e)}},function(e,t,r){var n=r(12),i=r(11),a=r(69);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*a(function(){r(1)}),"Object",o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addGlyphNames=t.GlyphNames=t.CffEncoding=t.CmapEncoding=t.DefaultEncoding=t.standardNames=t.cffExpertEncoding=t.cffStandardEncoding=t.cffStandardStrings=void 0;var n,i=r(6),a=(n=i)&&n.__esModule?n:{default:n};var o=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function s(e){this.font=e}function l(e){this.cmap=e}function u(e,t){this.encoding=e,this.charset=t}function c(e){switch(e.version){case 1:this.names=o.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<o.length?this.names[t]=o[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-o.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var r=0;r<e.numberOfGlyphs;r++)this.names[r]=o[r+e.glyphNameIndex[r]];break;case 3:default:this.names=[]}}s.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),r=this.font.glyphs;if(r)for(var n=0;n<r.length;n+=1)for(var i=r.get(n),a=0;a<i.unicodes.length;a+=1)if(i.unicodes[a]===t)return n;return null},l.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.charCodeAt(0)]||0},u.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),r=this.encoding[t];return this.charset.indexOf(r)},c.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},c.prototype.glyphIndexToName=function(e){return this.names[e]},t.cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],t.cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],t.cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],t.standardNames=o,t.DefaultEncoding=s,t.CmapEncoding=l,t.CffEncoding=u,t.GlyphNames=c,t.addGlyphNames=function(e){for(var t=void 0,r=e.tables.cmap.glyphIndexMap,n=(0,a.default)(r),i=0;i<n.length;i+=1){var o=n[i],s=r[o];(t=e.glyphs.get(s)).addUnicode(parseInt(o))}for(var l=0;l<e.glyphs.length;l+=1)t=e.glyphs.get(l),e.cffEncoding?e.isCIDFont?t.name="gid"+l:t.name=e.cffEncoding.charset[l]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(l))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=l(r(18));t.setAnnotationProperties=d,t.getAnnotationProperties=function(e,t,r){return e.getIn(["annotations","annotations",t])||(0,a.Map)({open:r,pinned:r})},t.openAnnotation=p,t.closeAnnotation=m,t.useCustomAnnotationFunction=v,t.useCustomOverlayFunction=g,t.getCustomAnnotationFunction=y,t.getCustomOverlayFunction=function(e){return e.getIn(["annotations","customOverlayFn"])};var a=r(36),o=l(r(50)),s=(r(67),r(4));function l(e){return e&&e.__esModule?e:{default:e}}var u="SET_ANNOTATION_PROPERTIES",c="USE_CUSTOM_ANNOTATION_FUNCTION",f="USE_CUSTOM_OVERLAY_FUNCTION",h=(0,a.Map)({annotations:(0,a.Map)(),customAnnotationFn:null,customOverlayFn:null});function d(e,t){return function(r){var n=(0,s.get)(r,{plug:"Player",property:"singleAnnotationOpen"});return r.dispatch({type:u,payload:{id:e,attrs:t,singleAnnotationOpen:n}})}}function p(e){return{type:u,payload:{id:e,attrs:{pinned:!0,open:!0}}}}function m(e){return{type:u,payload:{id:e,attrs:{pinned:!1,open:!1}}}}function v(e){return{type:c,payload:e}}function g(e){return{type:f,payload:e}}function y(e){return e.getIn(["annotations","customAnnotationFn"])}var x={reducer:(0,o.default)(h,(n={},(0,i.default)(n,u,function(e,t){var r=t.id,n=t.attrs,i=t.singleAnnotationOpen,o=e.get("annotations");n.open&&i&&(o=o.map(function(e){return e.merge({open:!1,pinned:!1})}));var s=o.get(r)||(0,a.Map)();return e.set("annotations",o.set(r,s.merge(n)))}),(0,i.default)(n,c,function(e,t){return e.set("customAnnotationFn",t)}),(0,i.default)(n,f,function(e,t){return e.set("customOverlayFn",t)}),n)),actions:{setAnnotationProperties:d,openAnnotation:p,closeAnnotation:m,useCustomAnnotationFunction:v,useCustomOverlayFunction:g},selectors:{getCustomAnnotationFunction:y}};t.default=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(43),a=(n=i)&&n.__esModule?n:{default:n};var o={identity:function(e,t){for(var r=a.default.maybeCreate(t||Uint32Array,e),n=0;n!==e;++n)r[n]=n;return r},identityForReading:function(e){var t=o._identityProto;return e>t.length&&(t=o.identity(5*e/4|0),o._identityProto=t),t.subarray(0,e)},_identityProto:a.default.Empty.Uint32Array,inverse:function(e,t,r){for(var n=a.default.maybeCreate(r||Uint32Array,t),i=0,o=e.length;i!==o;++i)n[e[i]]=i;return n},apply:function(e,t,r){for(var n=r||e,i=0,a=e.length;i!==a;++i)n[i]=t[e[i]];return e},histogram:function(e,t,r){for(var n=a.default.maybeCreate(r||Uint32Array,t),i=0,o=e.length;i!==o;++i)++n[e[i]];return n}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeFaceNormal=s,t.default=l;var n,i=r(0),a=r(3),o=(n=a)&&n.__esModule?n:{default:n};function s(e,t,r,n,a,o,s,l,u,c){var f=s||new i.Vector3,h=l||new i.Vector3,d=u||new i.Vector3,p=c||new i.Vector3,m=o||new i.Vector3;o&&m.set(0,0,0);var v=void 0,g=void 0;g=t[r],e.getAt(g,f),g=t[r+1],e.getAt(g,h),h.sub(f);for(var y=r+2;y<n;++y)g=t[y],e.getAt(g,d),d.sub(f),p.crossVectors(h,d),m.add(p),v=h,h=d,d=v;return a||m.normalize(),m}function l(e){this.polyMap=e,this._compute()}l.prototype={constructor:l,getNormalForFaceId:function(e,t){var r=t||new i.Vector3;return this.faceNormalValues.getAt(e,r),r},_compute:function(){for(var e=this.polyMap,t=e.faceRangeOffsets,r=e.faceValueIndices,n=e.values,a=t.length-1,l=new o.default(i.Vector3,a),u=new i.Vector3,c=new i.Vector3,f=new i.Vector3,h=new i.Vector3,d=new i.Vector3,p=0;p<a;++p){s(n,r,t[p],t[p+1],!1,d,u,c,f,h),l.setAt(p,d)}this.faceNormalValues=l}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bendVertices=u,t.default=c;var n=r(0),i=l(r(7)),a=l(r(5)),o=l(r(44)),s=r(40);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,i,a,o){var s=Math.PI/180,l=(new n.Matrix4).makeTranslation(a.x,a.y,a.z);i.multiplyScalar(s);for(var u=(new n.Matrix4).makeRotationFromEuler((new n.Euler).setFromVector3(i)).multiply(function(e){var t=new n.Matrix4;switch(e){case c.AxisTypes.X:t.makeRotationY(-Math.PI/2);break;case c.AxisTypes.Y:t.makeRotationX(Math.PI/2)}return t}(t)),f=(new n.Matrix4).multiplyMatrices(u,l),h=(new n.Matrix4).getInverse(f),d=new n.Vector3,p=0;p<e.length;++p)e.getAt(p,d),d.applyMatrix4(f),e.setAt(p,d);var m=-r*s,v=function(e){for(var t=e[1],r=e[1],n=4;n<e.length;n+=3)e[n]<t&&(t=e[n]),e[n]>r&&(r=e[n]);return r-t}(e.data);if(v<1e-6)return!1;var g=v/m,y=0;o&&(g=.5*v/Math.sin(m/2),y=Math.tan(m/4)*v*.5);for(var x=void 0,b=void 0,w=void 0,_=0;_<e.length;++_)e.getAt(_,d),x=d.y*m/v,b=Math.sin(x),w=Math.cos(x),d.y=d.x*b+b*g,d.x=d.x*w+w*g-g,d.x+=y,d.applyMatrix4(h),e.setAt(_,d);return!0}function c(e,t,r,n,l,c){if(0===r)return e;Math.PI;e=new a.default(e);var f=o.default.IdPositions,h=new i.default(o.default.resolveMap(e,f)),d=h.values.clone();return h.values=d,o.default.assignMap(e,f,h),f=o.default.IdNormals,d=(h=new i.default(o.default.resolveMap(e,f))).values.clone(),h.values=d,o.default.assignMap(e,f,h),u(e.positions.values,t,r,n,l,c)&&(e=(0,s.recalculateNormalsFromConnectivity)(e)),e}c.AxisTypes={X:1,Y:2,Z:3}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,u,c){r=r||12,u=u||0,c=c||2*Math.PI;var f=new i.default(n.Vector3,(r+1)*e.length),h=new i.default(n.Vector3,(r+1)*t.length),d=new i.default(n.Vector2,(r+1)*e.length),p=new Uint32Array(r*(e.length-1)*4),m=new Uint32Array(r*(e.length-1)+1),v=1/(e.length-1),g=1/r;m[0]=0;for(var y=1,x=new n.Vector2,b=new n.Vector3,w=new n.Vector3,_=new n.Matrix4,M=new n.Matrix3,S=0,T=0,E=r;T<=E;T++){var P=u+T*g*c;_.makeRotationY(P),M.getNormalMatrix(_);for(var A=T*g,C=0,R=e.length;C<R;C++){e.getAt(C,b),t.getAt(C,w),b.applyMatrix4(_),w.applyMatrix3(M),f.setAt(S,b),h.setAt(S,w);var I=C*v;x.set(A,I),d.setAt(S++,x)}}for(var O=e.length,L=0,D=0,N=r;D<N;D++)for(var V=0,F=e.length-1;V<F;V++){var B=V+O*D,U=B,k=B+O,z=B+1+O,G=B+1;p[L++]=U,p[L++]=k,p[L++]=z,p[L++]=G,m[y++]=L}var j=new s.default({faceRangeOffsets:m,faceValueIndices:p,values:f}),H=new s.default({faceRangeOffsets:m,faceValueIndices:p,values:h}),W=new s.default({faceRangeOffsets:m,faceValueIndices:p,values:d}),X=new a.default;X.set("default",W);var q=new o.default;return q.faceRangeOffsets=j.faceRangeOffsets,q.positions=j,q.normalMap=H,q.uvMaps=X,(0,l.default)(new o.default(q))};var n=r(0),i=u(r(3)),a=u(r(14)),o=u(r(5)),s=u(r(7)),l=u(r(112));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=t.PolyMesh=t.PolyMaps=t.PolyMap=t.Importer=void 0,r(539);var n=l(r(583)),i=l(r(5)),a=l(r(7)),o=l(r(44)),s=l(r(77));function l(e){return e&&e.__esModule?e:{default:e}}t.Importer=n.default,t.PolyMap=a.default,t.PolyMaps=o.default,t.PolyMesh=i.default,t.Selection=s.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var a=new n.Matrix4,o=(0,i.find)(e,{id:t,parent:!0}),s=o&&(0,i.getWorldTransform)(e,o);s&&(a.getInverse(s,!0),r.premultiply(a))};var n=r(0),i=r(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return Math.max(Math.min(e,r),t)}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(123),i=r(28)("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:a?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t){e.exports=!0},function(e,t,r){var n=r(48),i=r(333),a=r(210),o=r(216)("IE_PROTO"),s=function(){},l=function(){var e,t=r(209)("iframe"),n=a.length;for(t.style.display="none",r(325).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l.prototype[a[n]];return l()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[o]=e):r=l(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(70);e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},function(e,t,r){var n=r(219),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(27);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t){},function(e,t,r){"use strict";var n=r(16),i=r(1),a=r(72),o=r(103),s=r(129),l=r(159),u=r(98),c=r(17),f=r(24),h=r(160),d=r(104),p=r(739);e.exports=function(e,t,r,m,v,g){var y=n[e],x=y,b=v?"set":"add",w=x&&x.prototype,_={},M=function(e){var t=w[e];a(w,e,"delete"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof x&&(g||w.forEach&&!f(function(){(new x).entries().next()}))){var S=new x,T=S[b](g?{}:-0,1)!=S,E=f(function(){S.has(1)}),P=h(function(e){new x(e)}),A=!g&&f(function(){for(var e=new x,t=5;t--;)e[b](t,t);return!e.has(-0)});P||((x=t(function(t,r){u(t,x,e);var n=p(new y,t,x);return void 0!=r&&l(r,v,n[b],n),n})).prototype=w,w.constructor=x),(E||A)&&(M("delete"),M("has"),v&&M("get")),(A||T)&&M(b),g&&w.clear&&delete w.clear}else x=m.getConstructor(t,e,v,b),o(x.prototype,r),s.NEED=!0;return d(x,e),_[e]=x,i(i.G+i.W+i.F*(x!=y),_),g||m.setStrong(x,e,v),x}},function(e,t,r){"use strict";var n=r(54),i=r(72),a=r(24),o=r(82),s=r(20);e.exports=function(e,t,r){var l=s(e),u=r(o,l,""[e]),c=u[0],f=u[1];a(function(){var t={};return t[l]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,c),n(RegExp.prototype,l,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},function(e,t,r){var n=r(61),i=r(351),a=r(232),o=r(15),s=r(35),l=r(242),u={},c={};(t=e.exports=function(e,t,r,f,h){var d,p,m,v,g=h?function(){return e}:l(e),y=n(r,f,t?2:1),x=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(a(g)){for(d=s(e.length);d>x;x++)if((v=t?y(o(p=e[x])[0],p[1]):y(e[x]))===u||v===c)return v}else for(m=g.call(e);!(p=m.next()).done;)if((v=i(m,y,p.value,t))===u||v===c)return v}).BREAK=u,t.RETURN=c},function(e,t,r){var n=r(20)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:r=!0}},a[n]=function(){return o},e(a)}catch(e){}return r}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){"use strict";var n=r(16),i=r(29),a=r(45),o=r(20)("species");e.exports=function(e){var t=n[e];a&&t&&!t[o]&&i.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(a(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),o=(u=r.slice()).length,l=0;l<o;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){var r,a,o,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,a=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){a=s;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=function(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,i)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick(function(){e.apply(null,a)})}}:e.exports=t.nextTick}).call(t,r(88))},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(41),e.exports=function(e){function r(e,t){if(r.__super__.constructor.call(this,e),null==t)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(t)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.set(e).cdata(this)},r}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(41),e.exports=function(e){function r(e,t){if(r.__super__.constructor.call(this,e),null==t)throw new Error("Missing comment text");this.text=this.stringify.comment(t)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.set(e).comment(this)},r}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(41),e.exports=function(e){function r(e,t,n,i,a,o){if(r.__super__.constructor.call(this,e),null==t)throw new Error("Missing DTD element name");if(null==n)throw new Error("Missing DTD attribute name");if(!i)throw new Error("Missing DTD attribute type");if(!a)throw new Error("Missing DTD attribute default");if(0!==a.indexOf("#")&&(a="#"+a),!a.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(o&&!a.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(t),this.attributeName=this.stringify.attName(n),this.attributeType=this.stringify.dtdAttType(i),this.defaultValue=this.stringify.dtdAttDefault(o),this.defaultValueType=a}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.toString=function(e){return this.options.writer.set(e).dtdAttList(this)},r}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(41),e.exports=function(e){function r(e,t,n){if(r.__super__.constructor.call(this,e),null==t)throw new Error("Missing DTD element name");n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.eleName(t),this.value=this.stringify.dtdElementValue(n)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.toString=function(e){return this.options.writer.set(e).dtdElement(this)},r}()}).call(this)},function(e,t,r){(function(){var t,n,i={}.hasOwnProperty;n=r(73).isObject,t=r(41),e.exports=function(e){function r(e,t,i,a){if(r.__super__.constructor.call(this,e),null==i)throw new Error("Missing entity name");if(null==a)throw new Error("Missing entity value");if(this.pe=!!t,this.name=this.stringify.eleName(i),n(a)){if(!a.pubID&&!a.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(a.pubID&&!a.sysID)throw new Error("System identifier is required for a public external entity");if(null!=a.pubID&&(this.pubID=this.stringify.dtdPubID(a.pubID)),null!=a.sysID&&(this.sysID=this.stringify.dtdSysID(a.sysID)),null!=a.nData&&(this.nData=this.stringify.dtdNData(a.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(a)}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,t),r.prototype.toString=function(e){return this.options.writer.set(e).dtdEntity(this)},r}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(41),e.exports=function(e){function r(e,t,n){if(r.__super__.constructor.call(this,e),null==t)throw new Error("Missing notation name");if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(t),null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.toString=function(e){return this.options.writer.set(e).dtdNotation(this)},r}()}).call(this)},function(e,t,r){(function(){var t,n,i={}.hasOwnProperty;n=r(73).isObject,t=r(41),e.exports=function(e){function r(e,t,i,a){var o;r.__super__.constructor.call(this,e),n(t)&&(t=(o=t).version,i=o.encoding,a=o.standalone),t||(t="1.0"),this.version=this.stringify.xmlVersion(t),null!=i&&(this.encoding=this.stringify.xmlEncoding(i)),null!=a&&(this.standalone=this.stringify.xmlStandalone(a))}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,t),r.prototype.toString=function(e){return this.options.writer.set(e).declaration(this)},r}()}).call(this)},function(e,t,r){(function(){var t,n,i,a,o,s,l={}.hasOwnProperty;s=r(73).isObject,o=r(41),t=r(167),i=r(169),n=r(168),a=r(170),e.exports=function(e){function r(e,t,n){var i,a;r.__super__.constructor.call(this,e),this.documentObject=e,s(t)&&(t=(i=t).pubID,n=i.sysID),null==n&&(n=(a=[t,n])[0],t=a[1]),null!=t&&(this.pubID=this.stringify.dtdPubID(t)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,o),r.prototype.element=function(e,t){var r;return r=new n(this,e,t),this.children.push(r),this},r.prototype.attList=function(e,r,n,i,a){var o;return o=new t(this,e,r,n,i,a),this.children.push(o),this},r.prototype.entity=function(e,t){var r;return r=new i(this,!1,e,t),this.children.push(r),this},r.prototype.pEntity=function(e,t){var r;return r=new i(this,!0,e,t),this.children.push(r),this},r.prototype.notation=function(e,t){var r;return r=new a(this,e,t),this.children.push(r),this},r.prototype.toString=function(e){return this.options.writer.set(e).docType(this)},r.prototype.ele=function(e,t){return this.element(e,t)},r.prototype.att=function(e,t,r,n,i){return this.attList(e,t,r,n,i)},r.prototype.ent=function(e,t){return this.entity(e,t)},r.prototype.pent=function(e,t){return this.pEntity(e,t)},r.prototype.not=function(e,t){return this.notation(e,t)},r.prototype.up=function(){return this.root()||this.documentObject},r}()}).call(this)},function(e,t,r){(function(){var t,n,i,a,o,s={}.hasOwnProperty;o=r(73),a=o.isObject,i=o.isFunction,n=r(41),t=r(381),e.exports=function(e){function r(e,t,n){if(r.__super__.constructor.call(this,e),null==t)throw new Error("Missing element name");this.name=this.stringify.eleName(t),this.attributes={},null!=n&&this.attribute(n),e.isDocument&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,n),r.prototype.clone=function(){var e,t,r,n;for(t in(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attributes={},n=this.attributes)s.call(n,t)&&(e=n[t],r.attributes[t]=e.clone());return r.children=[],this.children.forEach(function(e){var t;return(t=e.clone()).parent=r,r.children.push(t)}),r},r.prototype.attribute=function(e,r){var n,o;if(null!=e&&(e=e.valueOf()),a(e))for(n in e)s.call(e,n)&&(o=e[n],this.attribute(n,o));else i(r)&&(r=r.apply()),this.options.skipNullAttributes&&null==r||(this.attributes[e]=new t(this,e,r));return this},r.prototype.removeAttribute=function(e){var t,r,n;if(null==e)throw new Error("Missing attribute name");if(e=e.valueOf(),Array.isArray(e))for(r=0,n=e.length;r<n;r++)t=e[r],delete this.attributes[t];else delete this.attributes[e];return this},r.prototype.toString=function(e){return this.options.writer.set(e).element(this)},r.prototype.att=function(e,t){return this.attribute(e,t)},r.prototype.a=function(e,t){return this.attribute(e,t)},r}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(41),e.exports=function(e){function r(e,t,n){if(r.__super__.constructor.call(this,e),null==t)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(t),n&&(this.value=this.stringify.insValue(n))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.set(e).processingInstruction(this)},r}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(41),e.exports=function(e){function r(e,t){if(r.__super__.constructor.call(this,e),null==t)throw new Error("Missing raw text");this.value=this.stringify.raw(t)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.set(e).raw(this)},r}()}).call(this)},function(e,t,r){(function(){var t,n={}.hasOwnProperty;t=r(41),e.exports=function(e){function r(e,t){if(r.__super__.constructor.call(this,e),null==t)throw new Error("Missing element text");this.value=this.stringify.eleText(t)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.set(e).text(this)},r}()}).call(this)},function(e,t,r){e.exports={default:r(394),__esModule:!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(33)),i=l(r(319)),a=l(r(38)),o=l(r(318)),s=r(0);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return e?e.isVector3?e:e.hasOwnProperty("x")?new s.Vector3(e.x,e.y,e.z):Array.isArray(e)?new s.Vector3(e[0],e[1],e[2]):new s.Vector3:new s.Vector3}function c(e){return e?e.isVector2?e:e.hasOwnProperty("x")?new s.Vector2(e.x,e.y):Array.isArray(e)?new s.Vector2(e[0],e[1]):new s.Vector2:new s.Vector2}function f(e){if((0,o.default)(e))return new s.Color(e);if(!e)return new s.Color;if("string"==typeof e){var t=new s.Color;return t.setHex(parseInt("0x"+e.replace("#",""))),t}return Array.isArray(e)?new s.Color(e[0],e[1],e[2]):e.hasOwnProperty("r")?new s.Color(e.r,e.g,e.b):new s.Color}function h(e,t){return void 0!==e&&void 0!==t?function(r){return Math.min(Math.max(e,r),t)}:void 0!==e?function(t){return Math.max(t,e)}:void 0!==t?function(e){return Math.min(e,t)}:function(e){return e}}var d={Boolean:function(e){var t=e.defaultValue||!1;return{defaultValue:t,set:function(e){return null==e?t:!!e}}},Label:function(e){return{set:function(e){return"string"==typeof e?e:""}}},Number:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=e.minValue,r=e.maxValue,n=e.defaultValue||0,i=h(t,r);return{defaultValue:n,set:function(e){var t=Number(e);return isNaN(t)?n:Math.round(1e4*i(t))/1e4}}}),Integer:function(e){var t=e.minValue,r=e.maxValue,n=e.defaultValue||0,i=h(t,r);return{defaultValue:n,set:function(e){var t=Number(e);return isNaN(t)?n:Math.round(i(t))}}},Plug:function(e){if(!e.plug)throw new Error("plug property expects a `plug` property");return{isPlugReference:e.plug,set:function(e){return e&&e.id?e.id:e}}},Options:function(e){var t=e.defaultValue;return{defaultValue:t,set:function(e){return null==e?t:e}}},Image:function(e){return{isFileReference:!0,set:function(e){return e&&e.id?e.id:e}}},Binary:function(e){return{isFileReference:!0,set:function(e){return e&&e.id?e.id:e}}},File:function(e){return{isFileReference:!0,set:function(e){return e&&e.id?e.id:e}}},Object:function(e){var t=e.defaultValue||{};return{set:function(e){return e||t},equals:function(e,t){return(0,a.default)(e)===(0,a.default)(t)}}},String:function(e){var t=e.defaultValue||"",r=e.maxLength||"";return{defaultValue:t,set:function(e){if(e="string"==typeof e?e:t,r){var n=Number(r);(0,i.default)(n)||(e=e.substr(0,n))}return e}}},TextArea:function(e){var t=e.defaultValue||"";return{defaultValue:t,set:function(e){return"string"==typeof e?e:t}}},Node:function(e){return{isNodeReference:!0,set:function(e){return e&&e.id?e.id:e}}},NodeList:function(e){return{isReferenceList:!0,set:function(e){return Array.isArray(e)?e.map(function(e){return e&&e.id?e.id:e}):[]},equals:function(e,t){return(0,a.default)(e)===(0,a.default)(t)}}},Vec2:function(e){var t=e.minValue,r=e.maxValue,i=c(e.defaultValue);t="object"===(void 0===t?"undefined":(0,n.default)(t))?c(t):(new s.Vector2).setScalar(t),r="object"===(void 0===r?"undefined":(0,n.default)(r))?c(r):(new s.Vector2).setScalar(r);var a=h(t.x,r.x),o=h(t.y,r.y);return{defaultValue:i,set:function(e){var t=c(e||i);return t.set(a(t.x),o(t.y)),t},get:function(e){return e.clone()},equals:function(e,t){return e&&t&&e.equals(t)}}},Color:function(e){var t=f(e.defaultValue);return{defaultValue:t,set:function(e){return f(void 0!==e?e:t)},get:function(e){return e.clone()},equals:function(e,t){return e&&t&&e.equals(t)}}},Vec3:function(e){var t=e.minValue,r=e.maxValue,i=u(e.defaultValue);t="object"===(void 0===t?"undefined":(0,n.default)(t))?u(t):(new s.Vector3).setScalar(t),r="object"===(void 0===r?"undefined":(0,n.default)(r))?u(r):(new s.Vector3).setScalar(r);var a=h(t.x,r.x),o=h(t.y,r.y),l=h(t.z,r.z);return{defaultValue:i,set:function(e){var t=u(e||i);return t.set(a(t.x),o(t.y),l(t.z)),t},get:function(e){return e.clone()},equals:function(e,t){return e&&t&&e.equals(t)}}}};t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(47)),i=a(r(58));function a(e){return e&&e.__esModule?e:{default:e}}t.getNumLineSegments=s;var o=function(){function e(t){(0,n.default)(this,e),this.shape=t,this.edgeVertices=null,this._generateEdgeVerticesMap()}return(0,i.default)(e,[{key:"_generateEdgeVerticesMap",value:function(){var e=s(this.shape);this.edgeVertices&&this.edgeVertices.length===e||(this.edgeVertices=new Uint32Array(e));var t=this.edgeVertices,r=0;function n(e,n){for(var i=e;i<n-1;i++)t[r++]=i}for(var i=0;i<this.shape.loopRangeOffsets.length-1;i++){var a=this.shape.holeOffsets[i],o=this.shape.loopRangeOffsets[i];n(o,a.length?o+a[0]:this.shape.loopRangeOffsets[i+1]);for(var l=0;l<a.length;l++){n(o+a[l],l===a.length-1?this.shape.loopRangeOffsets[i+1]:o+a[l+1])}}}},{key:"getVerticesForEdge",value:function(e){return{v:this.shape.loopValueIndices[this.edgeVertices[e]],vNext:this.shape.loopValueIndices[this.edgeVertices[e]+1]}}},{key:"getNumEdges",value:function(){return this.edgeVertices.length}}]),e}();function s(e){var t=0;t+=e.loopRangeOffsets.length-1;for(var r=0;r<e.loopRangeOffsets.length-1;++r)t+=e.holeOffsets[r].length;return e.loopValueIndices.length-t}t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(121)),i=a(r(262));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){(0,n.default)(e,t,{get:function(){return e.path,e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})}function s(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++)this.glyphs[r]=t[r];this.length=t&&t.length||0}s.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},s.prototype.push=function(e,t){this.glyphs[e]=t,this.length++},t.default={GlyphSet:s,glyphLoader:function(e,t){return new i.default({index:t,font:e})},ttfGlyphLoader:function(e,t,r,n,a,s){return function(){var l=new i.default({index:t,font:e});return l.path=function(){r(l,n,a);var t=s(e.glyphs,l);return t.unitsPerEm=e.unitsPerEm,t},o(l,"xMin","_xMin"),o(l,"xMax","_xMax"),o(l,"yMin","_yMin"),o(l,"yMax","_yMax"),l}},cffGlyphLoader:function(e,t,r,n){return function(){var a=new i.default({index:t,font:e});return a.path=function(){var t=r(e,a,n);return t.unitsPerEm=e.unitsPerEm,t},a}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sizeOf=t.encode=t.decode=void 0;var n=o(r(6)),i=o(r(660)),a=o(r(26));function o(e){return e&&e.__esModule?e:{default:e}}var s={},l={},u={};function c(e){return function(){return e}}l.BYTE=function(e){return a.default.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},u.BYTE=c(1),l.CHAR=function(e){return[e.charCodeAt(0)]},u.CHAR=c(1),l.CHARARRAY=function(e){for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},u.CHARARRAY=function(e){return e.length},l.USHORT=function(e){return[e>>8&255,255&e]},u.USHORT=c(2),l.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},u.SHORT=c(2),l.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},u.UINT24=c(3),l.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},u.ULONG=c(4),l.LONG=function(e){return e>=2147483648&&(e=-(4294967296-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},u.LONG=c(4),l.FIXED=l.ULONG,u.FIXED=u.ULONG,l.FWORD=l.SHORT,u.FWORD=u.SHORT,l.UFWORD=l.USHORT,u.UFWORD=u.USHORT,l.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},u.LONGDATETIME=c(8),l.TAG=function(e){return a.default.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},u.TAG=c(4),l.Card8=l.BYTE,u.Card8=u.BYTE,l.Card16=l.USHORT,u.Card16=u.USHORT,l.OffSize=l.BYTE,u.OffSize=u.BYTE,l.SID=l.USHORT,u.SID=u.USHORT,l.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?l.NUMBER16(e):l.NUMBER32(e)},u.NUMBER=function(e){return l.NUMBER(e).length},l.NUMBER16=function(e){return[28,e>>8&255,255&e]},u.NUMBER16=c(3),l.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},u.NUMBER32=c(5),l.REAL=function(e){var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var n=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*n)/n).toString()}for(var i="",a=0,o=t.length;a<o;a+=1){var s=t[a];i+="e"===s?"-"===t[++a]?"c":"b":"."===s?"a":"-"===s?"e":s}for(var l=[30],u=0,c=(i+=1&i.length?"f":"ff").length;u<c;u+=2)l.push(parseInt(i.substr(u,2),16));return l},u.REAL=function(e){return l.REAL(e).length},l.NAME=l.CHARARRAY,u.NAME=u.CHARARRAY,l.STRING=l.CHARARRAY,u.STRING=u.CHARARRAY,s.UTF8=function(e,t,r){for(var n=[],i=r,a=0;a<i;a++,t+=1)n[a]=e.getUint8(t);return String.fromCharCode.apply(null,n)},s.UTF16=function(e,t,r){for(var n=[],i=r/2,a=0;a<i;a++,t+=2)n[a]=e.getUint16(t);return String.fromCharCode.apply(null,n)},l.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e.charCodeAt(r);t[t.length]=n>>8&255,t[t.length]=255&n}return t},u.UTF16=function(e){return 2*e.length};var f={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};s.MACSTRING=function(e,t,r,n){var i=f[n];if(void 0!==i){for(var a="",o=0;o<r;o++){var s=e.getUint8(t+o);a+=s<=127?String.fromCharCode(s):i[127&s]}return a}};var h="function"==typeof i.default&&new i.default,d=void 0;function p(e){return e>=-128&&e<=127}function m(e,t,r){for(var n=0,i=e.length;t<i&&n<64&&0===e[t];)++t,++n;return r.push(128|n-1),t}function v(e,t,r){for(var n=0,i=e.length,a=t;a<i&&n<64;){var o=e[a];if(!p(o))break;if(0===o&&a+1<i&&0===e[a+1])break;++a,++n}r.push(n-1);for(var s=t;s<a;++s)r.push(e[s]+256&255);return a}function g(e,t,r){for(var n=0,i=e.length,a=t;a<i&&n<64;){var o=e[a];if(0===o)break;if(p(o)&&a+1<i&&p(e[a+1]))break;++a,++n}r.push(64|n-1);for(var s=t;s<a;++s){var l=e[s];r.push(l+65536>>8&255,l+256&255)}return a}l.MACSTRING=function(e,t){var r=function(e){if(!d)for(var t in d={},f)d[t]=new String(t);var r=d[e];if(void 0!==r){if(h){var n=h.get(r);if(void 0!==n)return n}var i=f[e];if(void 0!==i){for(var a={},o=0;o<i.length;o++)a[i.charCodeAt(o)]=o+128;return h&&h.set(r,a),a}}}(t);if(void 0!==r){for(var n=[],i=0;i<e.length;i++){var a=e.charCodeAt(i);if(a>=128&&void 0===(a=r[a]))return;n[i]=a}return n}},u.MACSTRING=function(e,t){var r=l.MACSTRING(e,t);return void 0!==r?r.length:0},l.VARDELTAS=function(e){for(var t=0,r=[];t<e.length;){var n=e[t];t=0===n?m(e,t,r):n>=-128&&n<=127?v(e,t,r):g(e,t,r)}return r},l.INDEX=function(e){for(var t=1,r=[t],n=[],i=0;i<e.length;i+=1){var a=l.OBJECT(e[i]);Array.prototype.push.apply(n,a),t+=a.length,r.push(t)}if(0===n.length)return[0,0];for(var o=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,u=[void 0,l.BYTE,l.USHORT,l.UINT24,l.ULONG][s],c=0;c<r.length;c+=1){var f=u(r[c]);Array.prototype.push.apply(o,f)}return Array.prototype.concat(l.Card16(e.length),l.OffSize(s),o,n)},u.INDEX=function(e){return l.INDEX(e).length},l.DICT=function(e){for(var t=[],r=(0,n.default)(e),i=r.length,a=0;a<i;a+=1){var o=parseInt(r[a],0),s=e[o];t=(t=t.concat(l.OPERAND(s.value,s.type))).concat(l.OPERATOR(o))}return t},u.DICT=function(e){return l.DICT(e).length},l.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},l.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var n=0;n<t.length;n+=1)a.default.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(l.OPERAND(e[n],t[n]));else if("SID"===t)r=r.concat(l.NUMBER(e));else if("offset"===t)r=r.concat(l.NUMBER32(e));else if("number"===t)r=r.concat(l.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(l.REAL(e))}return r},l.OP=l.BYTE,u.OP=u.BYTE;var y="function"==typeof i.default&&new i.default;l.CHARSTRING=function(e){if(y){var t=y.get(e);if(void 0!==t)return t}for(var r=[],n=e.length,i=0;i<n;i+=1){var a=e[i];r=r.concat(l[a.type](a.value))}return y&&y.set(e,r),r},u.CHARSTRING=function(e){return l.CHARSTRING(e).length},l.OBJECT=function(e){var t=l[e.type];return a.default.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},u.OBJECT=function(e){var t=u[e.type];return a.default.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},l.TABLE=function(e){for(var t=[],r=e.fields.length,n=[],i=[],o=0;o<r;o+=1){var s=e.fields[o],u=l[s.type];a.default.argument(void 0!==u,"No encoding function for field type "+s.type+" ("+s.name+")");var c=e[s.name];void 0===c&&(c=s.value);var f=u(c);"TABLE"===s.type?(i.push(t.length),t=t.concat([0,0]),n.push(f)):t=t.concat(f)}for(var h=0;h<n.length;h+=1){var d=i[h],p=t.length;a.default.argument(p<65536,"Table "+e.tableName+" too big."),t[d]=p>>8,t[d+1]=255&p,t=t.concat(n[h])}return t},u.TABLE=function(e){for(var t=0,r=e.fields.length,n=0;n<r;n+=1){var i=e.fields[n],o=u[i.type];a.default.argument(void 0!==o,"No sizeOf function for field type "+i.type+" ("+i.name+")");var s=e[i.name];void 0===s&&(s=i.value),t+=o(s),"TABLE"===i.type&&(t+=2)}return t},l.RECORD=l.TABLE,u.RECORD=u.TABLE,l.LITERAL=function(e){return e},u.LITERAL=function(e){return e.length},t.decode=s,t.encode=l,t.sizeOf=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="#999",i="#eee",a="#ccc",o="#fff";t.default={root:{height:"100%",fontSize:"14px",fontFamily:"'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Verdana, Tahoma, sans-serif",position:"absolute",top:"0",left:"0",right:"0",bottom:"0"},absoluteMaxCentered:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",display:"flex",alignItems:"center",justifyContent:"center"},header:{display:"flex",flex:"0 0 auto",justifyContent:"center",margin:"0",backgroundColor:i,fontFamily:'-apple-system,".SFNSDisplay-Bold","Helvetica Neue","Roboto","Segoe UI",sans-serif'},mainRow:{display:"flex",flex:"1 1 100px",justifyContent:"center"},statsRow:{flex:"0 0 auto",backgroundColor:n,color:i,padding:"5px"},player:{position:"relative",top:"0",left:"0",right:"0",bottom:"0",height:"100%",width:"100%"},maxRow:{flex:"1 1 auto"},leftCol:{flex:"1 1 200px",maxWidth:"300px",overflow:"scroll"},centerCol:{flex:"2 2 500px",border:"1px solid "+a},rightCol:{flex:"1 1 200px",maxWidth:"300px",overflow:"scroll"},footer:{flex:"0 0 auto",padding:"5px",backgroundColor:i,margin:"0"},explorerSelected:{backgroundColor:n},explorerNotSelected:{backgroundColor:o,cursor:"pointer"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var i=new n.Vector3;if(!e||e.length<1)return e||console.error("No positions passed to getCentroidByVertices"),r&&i.setFromMatrixPosition(r),i;var a=new n.Vector3;if(t&&t.length>0){for(var o=0,s=t.length;o<s;o++){var l=t[o];l<e.length&&l>=0&&(e.getAt(l,a),i.add(a))}i.divideScalar(t.length)}else{for(var u=0,c=e.length;u<c;u++)e.getAt(u,a),i.add(a);i.divideScalar(e.length)}r&&i.applyMatrix4(r);return i};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.whenLoaded=void 0;var n,i=u(r(30)),a=u(r(18)),o=u(r(2));t.define=m,t.isLoaded=v,t.shouldLoad=g,t.load=y,t.checkLoad=x,t.disable=b;var s=r(36),l=u(r(50));r(120);function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,s.Map)({modules:(0,s.Map)({}),loading:(0,s.Map)({}),loaded:(0,s.Map)({})}),f="SET_MODULE",h="LOADING_MODULE",d="LOADED_MODOULE",p=(0,l.default)(c,(n={},(0,a.default)(n,f,function(e,t){var r=t.name,n=t.mod,i=e.getIn(["modules",r])||{},a=e.getIn(["loading",r])||(0,s.List)();return e.setIn(["modules",r],(0,o.default)({},i,n)).setIn(["loading",r],a)}),(0,a.default)(n,h,function(e,t){var r=t.name,n=t.resolve;return e.updateIn(["loading",r],function(e){return e.push(n)})}),(0,a.default)(n,d,function(e,t){var r=t.name,n=t.result;return e.setIn(["loaded",r],n).deleteIn(["loading",r])}),n));function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.load)throw new Error("`load` must be defined");return t.shouldLoad||(t.shouldLoad=function(){return!1}),function(r){r.dispatch({type:f,payload:{name:e,mod:t}}),setTimeout(function(){r.dispatch(x(e))},0),i.default.resolve(t)}}function v(e,t){return e.getIn(["dynamicModules","loaded",t])}function g(e,t){var r=e.getIn(["dynamicModules","modules",t]);return r&&!r.disabled&&r.shouldLoad()}function y(e){return function(t){var r=t.getIn(["dynamicModules","modules",e]);if(!r)return i.default.resolve(!1);var n=t.getIn(["dynamicModules","loaded",e]);return n?i.default.resolve(n):new i.default(function(n,i){t.dispatch({type:h,payload:{name:e,resolve:n}}),1===t.getIn(["dynamicModules","loading",e]).size&&r.load().then(function(r){t.dispatch(function(e,t){return function(r){var n=r.getIn(["dynamicModules","loading",e])||(0,s.List)();r.dispatch({type:d,payload:{name:e,result:t}}),n.forEach(function(e){return e(t)})}}(e,r))})})}}function x(e){return function(t){return t.getIn(["dynamicModules","modules",e])&&g(t,e)?t.dispatch(y(e)):i.default.resolve(!1)}}function b(e){return{type:f,payload:{name:e,mod:{disabled:!0}}}}t.whenLoaded=y;var w={reducer:p,actions:{checkLoad:x,define:m,disable:b,load:y,whenLoaded:y},selectors:{isLoaded:v}};t.default=w},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){var r=e[t];if(!r)throw new Error("Unknown content hash: "+t);try{return JSON.parse(r)}catch(e){throw console.log("Error parsing hash: "+t),new Error(e)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCompatibleBlendMode=void 0;var n,i=r(2),a=(n=i)&&n.__esModule?n:{default:n},o=r(198),s=r(31),l=r(187),u=r(78),c=r(203);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(r(9));var f=t.getCompatibleBlendMode=function(e){return s.isIE&&["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor"].indexOf(e)<0?"source-over":e},h=void 0;function d(e,t,r,n){var i=t.getContext("2d"),a=function(e,t,r,n){function i(e,t,n,i,a){var o=0,s=e,l=0,u=n;if(r.cropImage){if(u=t,i&&t>i){var c=i/t;s*=c,u*=c}}else{var f=n/t;f<=1?(o=(1-f)*e*a,s=f*e):(l=(f-1)/f*n*a,u=n/f)}return{srcC:o,srcD:s,tarC:l,tarD:u}}var a=i(e.width,r.width,t.width,n&&n.width,r.horizontalAlignFactor),o=i(e.height,r.height,t.height,n&&n.height,r.verticalAlignFactor);return{srcX:a.srcC,srcW:a.srcD,tarX:a.tarC,tarW:a.tarD,srcY:o.srcC,srcH:o.srcD,tarY:o.tarC,tarH:o.tarD}}(e,t,r,n);i.save(),r.cropImage&&(i.translate(r.xOffset,r.yOffset),a.tarX-=r.width*r.horizontalAlignFactor,a.tarY-=r.height*r.verticalAlignFactor,i.rotate(r.rotation)),i.drawImage(e,a.srcX,a.srcY,a.srcW,a.srcH,a.tarX,a.tarY,a.tarW,a.tarH),i.restore()}var p={schema:{sourceImage:{type:"Plug",plug:"Image"},opacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.01,animatable:!0},xOffset:{type:"Number",defaultValue:0,minValue:-25e3,maxValue:25e3,step:1,label:"X Pixel",animatable:!0},yOffset:{type:"Number",defaultValue:0,minValue:-25e3,maxValue:25e3,step:1,label:"Y Pixel",animatable:!0},windowed:{type:"Boolean",label:"Windowed",defaultValue:!1,animatable:!0},windowBorder:{type:"Boolean",label:"Window Border",defaultValue:!0,animatable:!0},windowWidth:{type:"Number",defaultValue:512,minValue:0,step:1,label:"Window Width",animatable:!0},windowHeight:{type:"Number",defaultValue:512,minValue:0,step:1,label:"Window Height",animatable:!0},windowRelativeWidth:{type:"Number",defaultValue:.5,minValue:0,step:.01,label:"Relative Widnow Width",animatable:!0},windowRelativeHeight:{type:"Number",defaultValue:.5,minValue:0,step:.01,label:"Relative Window Height",animatable:!0},windowFitMode:{type:"Options",values:["none","fit width","fit height","inside","full"],defaultValue:"none",label:"Window Fit Mode"},xRelativeOffset:{type:"Number",defaultValue:0,minValue:-10,maxValue:10,step:.01,label:"X Relative",animatable:!0},yRelativeOffset:{type:"Number",defaultValue:0,minValue:-10,maxValue:10,step:.01,label:"Y Relative",animatable:!0},offsetUnit:{label:"Unit",type:"Options",values:["pixel","relative"],initialValue:"absolute"},overrideSize:{type:"Boolean",label:"Override Default Size",defaultValue:!1,animatable:!0},overrideWidth:{type:"Number",defaultValue:0,minValue:0,step:1,label:"Override Width",animatable:!0},overrideHeight:{type:"Number",defaultValue:0,minValue:0,step:1,label:"Override Height",animatable:!0},overrideWidthRelative:{type:"Number",defaultValue:1,minValue:0,step:.01,label:"Relative Width",animatable:!0},overrideHeightRelative:{type:"Number",defaultValue:1,minValue:0,step:.01,label:"Relative Height",animatable:!0},overrideSizeUnit:{label:"Unit",type:"Options",values:["pixel","relative"],initialValue:"absolute"},rotation:{type:"Number",defaultValue:0,minValue:-3600,maxValue:3600,step:1,label:"Rotation",animatable:!0},horizontalAlign:{type:"Options",defaultValue:"left",values:["left","center","right"],label:"Horizontal Align"},verticalAlign:{type:"Options",defaultValue:"top",values:["top","middle","bottom"],label:"Vertical Align"},composition:{label:"Composition",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"source-over"},tint:{label:"Enabled",type:"Boolean",defaultValue:!1,animatable:!0},tintColor:{label:"Tint Color",type:"Color",defaultValue:16777215,animatable:!0},tintOpacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.01,animatable:!0},tintComposition:{label:"Tint Mode",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"multiply"}},update:function(e,t,r){r.node,r.store;var n=e.xOffset,i=e.yOffset,s=e.tintComposition,p=f(e.composition),m=e.sourceImage,v=e.opacity,g=e.xRelativeOffset,y=e.yRelativeOffset,x=e.offsetUnit,b=e.windowed,w=e.windowBorder,_=e.windowWidth,M=e.windowHeight,S=e.windowRelativeWidth,T=e.windowRelativeHeight,E=e.windowFitMode,P=e.overrideSize,A=e.overrideWidth,C=e.overrideHeight,R=e.overrideWidthRelative,I=e.overrideHeightRelative,O=e.overrideSizeUnit,L=e.tint,D=e.tintColor,N=e.tintOpacity,V=e.horizontalAlign,F=e.verticalAlign,B=e.rotation*Math.PI/180,U=function(e,t,r){if(!m)return!0;var f=null;if(l.svgRegex.exec(m.extension)){var U=(0,a.default)(m,{asset:m.originalAsset});f=(0,o.fetchTextureImage)(t,U)}else if(m.canvasOperations){var k=(0,u.checkTextureCache)(t,m.nodeId),z=k&&k.image,G=(0,c.collapseCanvas)(t,m,z);G&&(f=G)}else f=(0,o.fetchTextureImage)(t,m);if(!f)return!0;var j=void 0,H=void 0;"relative"===x?(n=g*r.width,i=y*r.height,j=S*r.width,H=T*r.height):(j=_,H=M);var W=f.width,X=f.height;if(P&&("relative"===O?(W=R*r.width,X=I*r.height):(W=A,X=C)),b&&"none"!==E){var q=j*X/W/H;"width"===E||"inside"===E&&q<=1||"full"===E&&q>1?(X*=j/W,W=j):(W*=H/X,X=H)}var Y=(b?j:W)||1,Z=(b?H:X)||1,J=Y>r.width||Z>r.height;J&&(Y=r.width,Z=r.height),h?(h.getContext("2d").clearRect(0,0,h.width,h.height),h.width=Y,h.height=Z):h=t.createCanvas(Y,Z);var Q={width:W,height:X,rotation:B,xOffset:n,yOffset:i,verticalAlignFactor:"top"===F?0:"middle"===F?.5:1,horizontalAlignFactor:"left"===V?0:"center"===V?.5:1,tintColor:"rgba("+parseInt(255*D.r)+","+parseInt(255*D.g)+","+parseInt(255*D.b)+","+N+")",opacity:v,composition:p,tintComposition:s,cropImage:J},K=b&&{width:j,height:H,fitMode:E,windowBorder:w};return L&&function(e,t,r,n){var i=t.getContext("2d");i.fillStyle=r.tintColor,i.globalCompositeOperation="source-over",i.fillRect(0,0,t.width,t.height),i.globalCompositeOperation="destination-in",d(e,t,r,n),i.globalCompositeOperation=r.tintComposition}(f,h,Q,K),d(f,h,Q,K),function(e,t,r,n){n&&n.windowBorder&&function(e,t,r){e.save(),e.translate(t.xOffset,t.yOffset),e.rotate(t.rotation);var n=-r.width*t.horizontalAlignFactor,i=-r.height*t.verticalAlignFactor;e.beginPath(),e.moveTo(n,i),e.lineTo(n,i+r.height),e.lineTo(n+r.width,i+r.height),e.lineTo(n+r.width,i),e.lineTo(n,i),e.stroke(),e.restore()}(t,r,n);var i=0,a=0;t.save(),t.globalCompositeOperation=r.composition,t.globalAlpha=r.opacity,r.cropImage||(t.translate(r.xOffset,r.yOffset),i=-e.width*r.horizontalAlignFactor,a=-e.height*r.verticalAlignFactor,t.rotate(r.rotation)),t.drawImage(e,i,a),t.restore()}(h,e,Q,K),!0};return t.canvasOperations?t.canvasOperations.push(U):t.canvasOperations=[U],t}};t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleMode=t.wrapType=t.sampleFilter=t.encodingType=t.svgRegex=void 0;var n,i=r(0),a=r(23),o=r(401),s=(n=o)&&n.__esModule?n:{default:n},l=r(31),u=r(23);var c=t.svgRegex=/\.svg/i,f=t.encodingType={values:[3e3,3001,3002,3003,3004,3005],labels:["Linear","sRGB","RGBE/Radiance","Log LUV","RGBM 7","RGBM 16"]},h=t.sampleFilter={values:[i.NearestFilter,i.NearestMipMapNearestFilter,i.NearestMipMapLinearFilter,i.LinearFilter,i.LinearMipMapNearestFilter,i.LinearMipMapLinearFilter],labels:["Nearest","Nearest MipMap Nearest","Nearest MipMap Linear","Linear","Linear MipMap Nearest","Linear MipMap Linear"]},d=0,p=1,m={values:[0,1,2],labels:["Original","WebGL","Renderer"]},v=t.wrapType={values:[0,1,2],labels:["None","Wrap","Mirror"]},g=t.ScaleMode={Scale:0,Tiling:1},y={schema:{originalBitmapFile:{type:"Image",hidden:!0},glBitmapFile:{type:"Image",hidden:!0},rendererBitmapFile:{type:"Image",hidden:!0},hdrBitmapFile:{type:"Image",hidden:!0},renderOption:{label:"Server Image",type:"Options",defaultValue:0,values:m.values,labels:m.labels},glOption:{label:"WebGL Image",type:"Options",defaultValue:1,values:m.values,labels:m.labels},uOffset:{type:"Number",label:"U Offset",defaultValue:0,step:.1,animatable:!0},vOffset:{type:"Number",label:"V Offset",defaultValue:0,step:.1,animatable:!0},scaleMode:{label:"Scale Mode",type:"Options",defaultValue:g.Tiling,values:[g.Scale,g.Tiling],labels:["Scale","Tiling"]},uScale:{type:"Number",label:"U Scale",defaultValue:1,step:.1,animatable:!0},vScale:{type:"Number",label:"V Scale",defaultValue:1,step:.1,animatable:!0},uTile:{type:"Number",label:"U Tile",defaultValue:1,step:.1,animatable:!0},vTile:{type:"Number",label:"V Tile",defaultValue:1,step:.1,animatable:!0},rotation:{type:"Number",label:"Rotation",defaultValue:0,step:.1,animatable:!0},wrapU:{type:"Options",defaultValue:1,values:v.values,labels:v.labels,label:"U Wrap Style"},wrapV:{type:"Options",defaultValue:1,values:v.values,labels:v.labels,label:"V Wrap Style"},invert:{type:"Boolean",label:"Invert",defaultValue:!1,animatable:!0},gainPivot:{type:"Number",label:"Gain Pivot",defaultValue:0,step:.1,animatable:!0},gain:{type:"Number",label:"Gain",defaultValue:1,step:.1,animatable:!0},brightness:{type:"Number",label:"Brightness",defaultValue:0,step:.1,animatable:!0},magFilter:{type:"Options",defaultValue:i.LinearFilter,values:h.values,labels:h.labels,label:"Magnify Filter"},minFilter:{type:"Options",defaultValue:i.LinearMipMapLinearFilter,values:h.values,labels:h.labels,label:"Minify Filter"},generateMipMaps:{label:"Use MipMaps",type:"Boolean",defaultValue:!0},hdrEncoding:{type:"Options",defaultValue:3005,values:f.values,labels:f.labels,label:"HDR Encoding"},optimizeImage:{label:"Optimize Image",type:"Boolean",defaultValue:!0},resizeImage:{label:"Resize Image",type:"Boolean",defaultValue:!1},resizeWidth:{label:"Width",type:"Options",defaultValue:512,values:[32,64,128,256,512,1024,2048,4096],labels:["32","64","128","256","512","1024","2048","4096"]},resizeHeight:{label:"Height",type:"Options",defaultValue:512,values:[32,64,128,256,512,1024,2048,4096],labels:["32","64","128","256","512","1024","2048","4096"]},optimizeFormat:{label:"Format",type:"Options",defaultValue:"",values:["","png","jpeg"],labels:["Default","PNG","JPEG"]}},update:function(e,t,r){r.node;var n=r.store,i=null,o=(0,a.getUrl)(n,e.originalBitmapFile),f=o&&s.default.extname(o),h=e.glOption;return i=h===p||c.exec(f)&&l.isIE?e.glBitmapFile||e.originalBitmapFile:h==d?e.originalBitmapFile:e.rendererBitmapFile||e.originalBitmapFile,c.exec(f)&&(t.getSVG=function(){return n.hasApi()&&n.dispatch((0,u.getOrFetchText)(e.originalBitmapFile))}),t.asset=i,t.originalAsset=e.originalBitmapFile,t.extension=f,t.hdr=e.hdrBitmapFile,e.hdrBitmapFile&&".hdr"===f&&(t.hdrSource=e.originalBitmapFile),["uOffset","vOffset","uTile","vTile","rotation","wrapU","wrapV","gain","gainPivot","brightness","magFilter","minFilter","generateMipMaps","hdrEncoding","invert","optimizeImage","resizeImage","resizeWidth","resizeHeight","optimizeFormat"].forEach(function(r){t[r]=e[r]}),e.scaleMode===g.Scale&&(t.uTile=1/e.uScale,t.vTile=1/e.vScale),t.preferHDR=3e3!==e.hdrEncoding&&!!e.hdrBitmapFile,t}};t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GemMaterialModes={FULL:2,SIMPLE:0,SIMPLE_TWO_LAYER:1,LEGACY:3},t.RenderCategories={AUTO:0,OPAQUE:1,TRANSPARENT:2},t.CubeMapSourceTypes={CUBE:0,LATLONG:1}},function(e,t,r){"use strict";function n(e){this.data=new Uint32Array(e+31>>>5),this.length=e,this.byteView=null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={constructor:n,clear:function(){return this.data.fill(0),this},fill:function(e,t){var r=this.data,n=void 0!==e?e:0,i=void 0!==t?n+t:this.length,a=n>>>5,o=i>>>5,s=-2147483648>>~n,l=(1<<i)-1;return a===o?r[a]|=s&l:(r[a]|=s,++a!==o&&r.fill(-1,a,o),r[o]|=l),this},include:function(e){this.data[e>>>5]|=1<<e},exclude:function(e){this.data[e>>>5]&=~(1<<e)},contains:function(e){return 0!=(this.data[e>>>5]&1<<e)},swap:function(e,t){var r=this.data,n=e>>>5,i=1<<e,a=t>>>5,o=1<<t,s=0!=(r[n]&i);s!==(0!=(r[a]&o))&&(s?(r[n]&=~i,r[a]|=o):(r[n]|=i,r[a]&=~o))},testAndInclude:function(e){var t=this.data,r=e>>>5,n=1<<e,i=t[r];return t[r]=i|n,0!=(i&n)},includeFromArray:function(e,t,r){for(var n=this.data,i=t||0,a=r||e.length;i<a;++i){var o=e[i];n[o>>>5]|=1<<o}return this},containsAnyIn:function(e,t,r){for(var n=!1,i=this.data,a=t||0,o=r||e.length;a<o&&!n;++a){var s=e[a];n=0!=(i[s>>>5]&1<<s)}return n},countSetBits:function(e,t){var r=0,i=void 0!==e?e:0,a=void 0!==t?t:this.length;if(0==(a-i&-16384))r=this.countSetBitsInShortRange(i,a);else if(i<a){var o=this.byteView,s=n._ByteBitCount;null===o&&(o=new Uint8Array(this.data.buffer),this.byteView=o);var l=i>>>3,u=a>>>3,c=-2147483648>>31-(7&i),f=(1<<(7&a))-1;r=s[o[l]&c];for(var h=l+1;h!==u;++h)r+=s[o[h]];r+=s[o[u]&f]}return r},countSetBitsInShortRange:function(e,t){var r=0,n=this.data,i=e,a=i>>>5,o=n[a]>>i;for(r=1&o;++i!==t;)0!=(31&i)?o>>=1:o=0|n[++a],r+=1&o;return r},toIndexArray:function(e){for(var t=new Uint32Array(void 0===e?this.countSetBits():e),r=0,n=0,i=this.data,a=0,o=i.length;a!==o;++a){for(var s=i[a],l=r;0!==s;s>>>=1,++l)0!=(1&s)&&(t[n++]=l);r+=32}return t}},n._ByteBitCount=function(){for(var e=new Uint8Array(256),t=0;256!==t;++t){for(var r=0,n=t;0!==n;n>>>=1)0!=(1&n)&&++r;e[t]=r}return e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(56)),i=l(r(2));t.default=u;var a=l(r(43)),o=l(r(282)),s=l(r(283));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,n){var i=void 0===r?0:r,s=void 0===n?1:n,l=null!==e?(((i+s-1)/s|0)+e)*s:null,u=a.default.maybeCreate(t||Uint32Array,l);o.default.call(this,u,null!==e?e:(u.length-i+s-1)/s|0),this.offset=i,this.stride=s}u.prototype=(0,i.default)((0,n.default)(o.default.prototype),{constructor:u,getAt:function(e){return this.array[this.offset+e*this.stride]},setAt:function(e,t){this.array[this.offset+e*this.stride]=t},newCompatibleView:function(e,t){return new u(t||null,e,0)},newCompatibleBuffer:function(){return new s.default(this.data.constructor)}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(13));t.default=function(e,t,r){var n=(0,i.default)(e,t,r),a=function(e){for(var t=function(e){for(var t={},r=e.length,n=0,i=0;n<r;n+=3,++i){var a=e[n],s=e[n+1],l=e[n+2];o(t,a,s,{triangleId:i,edge:0}),o(t,s,l,{triangleId:i,edge:1}),o(t,l,a,{triangleId:i,edge:2})}return t}(e),r=e.length,n=new Array(r/3),i=0,a=0;i<r;i+=3,++a){var l=e[i],u=e[i+1],c=e[i+2],f=n[a]=new Array(3),h=s(t,l,u);h.length>1&&(f[0]=h[0].triangleId===a?h[1]:h[0]),(h=s(t,u,c)).length>1&&(f[1]=h[0].triangleId===a?h[1]:h[0]),(h=s(t,c,l)).length>1&&(f[2]=h[0].triangleId===a?h[1]:h[0])}return n}(n),l=n.length/3,u=new Uint8Array(l),c=0,h=!0;for(;h&&c<l;){h=!1;for(var d=0;d<l;++d)!u[d]&&f(n,e,a,d,u,r)&&(h=!0);h&&(u.fill(0),++c)}return n};var i=a(r(244));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n){if(t>r){var i=r;r=t,t=i}var a=e[t];a||(a={},e[t]=a);var o=a[r];o?o.push(n):a[r]=[n]}function s(e,t,r){if(t>r){var n=r;r=t,t=n}var i=e[t];return i&&(i=i[r]),i||null}var l=new(r(0).Matrix3);function u(e,t,r,n,i,a){t*=a,r*=a,n*=a;var o=e[i*=a],s=e[i+1],u=e[t]-o,c=e[r]-o,f=e[n]-o,h=e[t+1]-s,d=e[r+1]-s,p=e[n+1]-s;return l.set(u,h,u*u+h*h,c,d,c*c+d*d,f,p,f*f+p*p),l.determinant()>1e-5}function c(e,t,r){for(var n=3*e.flip,i=3*e.with,a=t[n+(e.edges[0]+2)%3],o=t[i+(e.edges[1]+2)%3],s=[a,t[n+e.edges[0]],o],l=[o,t[i+e.edges[1]],a],u=0;u<3;++u)t[n+u]=s[u],t[i+u]=l[u];for(var c=[r[e.flip][(e.edges[0]+2)%3],r[e.with][(e.edges[1]+1)%3],{triangleId:e.with,edge:2}],f=[r[e.with][(e.edges[1]+2)%3],r[e.flip][(e.edges[0]+1)%3],{triangleId:e.flip,edge:2}],h=0;h<2;++h)c[h]&&(r[c[h].triangleId][c[h].edge]={triangleId:e.flip,edge:h}),f[h]&&(r[f[h].triangleId][f[h].edge]={triangleId:e.with,edge:h});r[e.flip]=c,r[e.with]=f}function f(e,t,r,i,a,o){var s=3*i,l=e[s],f=e[s+1],h=e[s+2],d=!1,p=0,m=!0,v=!1,g=void 0;try{for(var y,x=(0,n.default)(r[i]);!(m=(y=x.next()).done);m=!0){var b=y.value;if(void 0!==b&&!a[b])if(u(t,l,f,h,e[3*b.triangleId+(b.edge+2)%3],o)){d=!0,a[i]=!0,a[b.triangleId]=!0,c({flip:i,with:b.triangleId,edges:[p,b.edge]},e,r);break}++p}}catch(e){v=!0,g=e}finally{try{!m&&x.return&&x.return()}finally{if(v)throw g}}return d}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var a=r||{},o=new n.default(e);o.positions=t(o.positions,"positions",a),o.normalMap&&(o.normalMap=t(o.normalMap,"normalMap",a));for(var s=new i.default,l=0;l<e.uvMaps.length;l++){var u=e.uvMaps.namesByIndex[l],c=t(e.uvMaps.byName[u],u,a);s.set(u,c)}return o.uvMaps=s,o.faceRangeOffsets=o.positions.faceRangeOffsets,new n.default(o)};var n=a(r(5)),i=a(r(14));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(!e.normalMap)return e;for(var l=t||!0,u=r||!1,c=e.positions.faceValueIndices,f=e.positions.values,h=new Uint32Array(e.normalMap.faceValueIndices),d=e.normalMap.values,p=0,m=void 0,v=void 0,g=[],y=0;y<f.length;y++)g[y]=[];for(var x=0;x<c.length;x++)g[c[x]].push(x);for(var b=0;b<g.length;b++)for(var w=0;w<g[b].length;w++){m=h[g[b][w]];for(var _=0;_<g[b].length;_++)v=h[g[b][w+_]],m!==v&&d.getAt(m).dot(d.getAt(v))>.99&&(h[g[b][w+_]]=m,p++)}u&&console.log("Normal Duplicates Found: "+p);var M=d;if(l&&p){var S=new a.default(n.Vector3),T=new Int32Array(d.length);T.fill(-1);for(var E=0,P=0;P<h.length;P++)-1===T[h[P]]&&(S.push(d.getAt(h[P])),T[h[P]]=E++),h[P]=T[h[P]];var A=new i.default(n.Vector3,E);A.fromArray(S.toArray()),M=A,u&&console.log(d.length+" normal values reduced to "+A.length+", duplicates removed: "+(d.length-A.length))}var C=new s.default({faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:h,values:M}),R=new o.default(e);return R.normalMap=C,R};var n=r(0),i=l(r(3)),a=l(r(76)),o=l(r(5)),s=l(r(7));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(r(2)),i=f(r(205)),a=f(r(316));t.default=function(e,t){var r=t||!1,f=new Uint32Array(e.positions.faceValueIndices),h=e.positions.values,d=new l.default(o.Vector3),p=new a.default,m=0,v=0,g=0,y=new o.Vector3,x=new o.Vector3,b=new o.Box3;b.setFromArray(new Float32Array(h.data));for(var w=Math.pow(2,16)/b.getSize().length(),_=0;_<f.length;_++)h.getAt(f[_],y),x.subVectors(y,b.min).multiplyScalar(w),x.x=(0,i.default)(x.x)*Math.pow(2,32),x.y=(0,i.default)(x.y)*Math.pow(2,16),x.z=(0,i.default)(x.z),v=x.x+x.y+x.z,p.has(v)?g=p.get(v):(p.set(v,m),g=m,d.push(y),m++),f[_]=g;r&&console.log(h.length+" values reduced to "+m+", duplicates removed: "+(h.length-m));if(h.length===m)return e;var M=new s.default(o.Vector3,m);M.fromArray(d.toArray());var S=new c.default({faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:f,values:M}),T=(0,n.default)({},e,{positions:S}),E=new u.default(T);return E.topologyChanged(!0),E};var o=r(0),s=f(r(3)),l=f(r(76)),u=f(r(5)),c=f(r(7));function f(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,l,u){var c=new o.default(e),f=l||i.default.IdPositions,h=new a.default(i.default.resolveMap(e,f)),d=h.values.clone();h.values=d,i.default.assignMap(c,f,h);var p=n.default.getIndices(e,n.default.Vertices,f,r),m=d.type,v=new m,g=new m,y=!!r;function x(e){d.getAt(e,g).lerp(v,u[e]),v.copy(g)}if(t.constructor===m)for(var b=t,w=0,_=p.length;w!==_;++w){var M=p[w];d.getAt(M,v),v.add(b),u&&x(M),d.setAt(M,v)}else if("function"==typeof t){var S=t;y=!0;for(var w=0,_=p.length;w!==_;++w){var M=p[w];d.getAt(M,v),S(v,h,M),u&&x(M),d.setAt(M,v)}}else if(t.isMatrix4){var T=t;y=!0;for(var w=0,_=p.length;w!==_;++w){var M=p[w];d.getAt(M,v),v.applyMatrix4(T),u&&x(M),d.setAt(M,v)}}else{if(!t.isMatrix3)throw Error("Invalid argument!");var E=t;y=!0;for(var w=0,_=p.length;w!==_;++w){var M=p[w];d.getAt(M,v),v.applyMatrix3(E),u&&x(M),d.setAt(M,v)}}if(y&&f===i.default.IdPositions&&null!==c.normalMap){var P=new s.default(c);r?P.markPositionsDirty(p):P.dirtyFaces.fill(),P.updateMesh()}return new o.default(c)};var n=l(r(77)),i=l(r(44)),a=l(r(7)),o=l(r(5)),s=l(r(584));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var r=e.loopRangeOffsets.length-1,c=[0],h=[],d=0,p=e.loopRangeOffsets[0],m=0;m<r;++m){for(var v=e.loopRangeOffsets[m+1],g=(0,s.extractVertices)(e,p,v),y=(0,u.default)(g,e.holeOffsets[m],3),x=y.length,b=0;b<x;b+=3){var w=e.loopValueIndices[y[b]+p],_=e.loopValueIndices[y[b+1]+p],M=e.loopValueIndices[y[b+2]+p];d+=3,c.push(d),h.push(w),h.push(_),h.push(M),t&&(d+=3,c.push(d),h.push(w),h.push(M),h.push(_))}p=v}var S=new Uint32Array(c),T=new Uint32Array(h),E=a.default.fromData(S,T,e.positions),P={faceRangeOffsets:S,positions:E,uvMaps:new n.default,colorMaps:new n.default};return(0,l.applyUVMap)((0,o.uniformNormalMap)(new i.default(P),f),{uvProjectionMode:l.UVMapType.Planar,alignmentAxis:l.UVAxisType.Z,autoFit:!0})};var n=c(r(14)),i=c(r(5)),a=c(r(7)),o=r(40),s=r(115),l=r(114),u=c(r(191));function c(e){return e&&e.__esModule?e:{default:e}}var f=new(r(0).Vector3)(0,0,1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(44)),i=o(r(582)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9));function o(e){return e&&e.__esModule?e:{default:e}}var s={NoIndices:0,SimpleIndices:1,CompactIndices:2,polyMeshToMeshBufferGeometry:function(e,t,r,i,o,l,u,c){var f=new a.BufferGeometry,h=[],d=s._prepare(e,h,t,r,i,o,l,u),p=d.exporter,m=d.triangulationChanged,v=n.default.IdPositions,g={};if(t!==s.NoIndices){var y=t===s.SimpleIndices?p.getTriangulatingIndices():p.getMapIndices(v);f.setIndex(new a.BufferAttribute(y,1,!1))}if(r){for(var x=0,b=0;b!==h.length;++b)x+=h[b].itemSize;var w=0;switch(t){case s.NoIndices:w=p.getNumFaceVertices();break;case s.SimpleIndices:w=p.mesh.getNumFaceVertices();break;case s.CompactIndices:w=p.getNumMapValues(n.default.IdPositions)}for(var _=new Float32Array(x*w),M=new a.InterleavedBuffer(_,x),S=0,T=0;T!==h.length;++T){var E=h[T],P=E.itemSize,A=E.mapId;t!==s.CompactIndices?p.getUnindexedMapValues(A,t===s.NoIndices,_,S,x):p.getMapValues(A,_,S,x),f.addAttribute(E.threeName,new a.InterleavedBufferAttribute(M,P,S)),S+=P}}else{for(var C=0;C!==h.length;++C){var R=h[C],I=n.default.resolveMap(e,R.mapId),O=o&&n.default.resolveMap(o,R.mapId);if(O&&I!==O&&I.values.length!==O.values.length){c=null;break}}for(var L=0;L!==h.length;++L){var D=h[L],N=t===s.NoIndices,V=void 0,F=n.default.resolveMap(e,D.mapId);V=(o&&n.default.resolveMap(o,D.mapId))===F&&c?c[D.mapId]:t!==s.CompactIndices?p.getUnindexedMapValues(D.mapId,N):p.getMapValues(D.mapId),g[D.mapId]=V;var B=new a.BufferAttribute(V,D.itemSize,D.normalized);f.addAttribute(D.threeName,B)}}var U=p.getGroups();if(e.materialIds&&U)for(var k=0;k<U.groupCounts.length;k++)U.groupCounts[k]>0&&f.addGroup(U.groupStarts[k],U.groupCounts[k],k);else f.addGroup(0,3*p.triangulation.numTriangles,0);return{geometry:f,triangulation:p.triangulation,renderIndexing:p.renderIndexing,triangulationChanged:m,valueMap:g}},polyMeshToLineSegmentsBufferGeometry:function(e,t,r,n,o,s){var l=new i.default(e).getEdgeIndicesMapValues(),u=new a.BufferGeometry,c=new a.BufferAttribute(l.data,l.elementSize,l.length);u.addAttribute("position",c);for(var f=new Float32Array(l.data.length),h=0;h<f.length;h+=3)f[h]=n.r,f[h+1]=n.g,f[h+2]=n.b;for(var d=0;d<t.length;d++){var p=2*t[d];f[3*p]=o.r,f[3*p+1]=o.g,f[3*p+2]=o.b,f[3*p+3]=o.r,f[3*p+4]=o.b,f[3*p+5]=o.g}if(r>=0&&s){var m=2*r;f[3*m]=s.r,f[3*m+1]=s.g,f[3*m+2]=s.b,f[3*m+3]=s.r,f[3*m+4]=s.g,f[3*m+5]=s.b}var v=new a.BufferAttribute(f,3);return u.addAttribute("color",v),u.addGroup(0,l.length,0),u},_prepare:function(e,t,r,a,o,l,u,c){for(var f=new i.default(e),h=[],d=!l||!u||l.positions.faceValueIndices!==e.positions.faceValueIndices,p=!l||!c,m=new n.default.Iterator(e);m.next();){var v="",g=3,y=!1;switch(m.typeId){case n.default.TypePosition:v="position";break;case n.default.TypeTangent:if(!o)break;g=4,v="tangent";break;case n.default.TypeNormal:v="normal";break;case n.default.TypeUV:v="uv"+(0!==m.index?m.index+1:""),g=2;break;case n.default.TypeColor:if(m.index>=1)break;v="color",y=!0}if(!(!v||a&&y)){var x=m.getId();h.push(x),t.push({mapId:x,threeName:v,itemSize:g,normalized:y}),0}}for(var b=0;b<t.length&&!p;b++){var w=n.default.resolveMap(l,t[b].mapId),_=n.default.resolveMap(e,t[b].mapId);w.faceValueIndices!==_.faceValueIndices&&(p=!0)}r!==s.CompactIndices||p?r===s.CompactIndices&&p&&f.reindexForRendering(h):(c.mesh=e,f.renderIndexing=c);var M=!1;return d?(f.triangulate(),M=!0):f.triangulation=u,{exporter:f,triangulationChanged:M}}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAssetIdFromImage=i,t.fetchTextureImage=function(e,t,r){var a=i(e,t,r),o=["optimizeImage","resizeImage","resizeWidth","resizeHeight","optimizeFormat"].reduce(function(e,r){return e[r]=t[r],e},{});return a&&(0,n.getOrFetchImage)(a,{},o)(e)};var n=r(23);r(67);function i(e,t,r){var n=t.asset,i=t.hdr;return r&&t.preferHDR&&i?i:n}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(6)),i=s(r(38)),a=s(r(33));t.validatePolymeshData=u,t.checkGeometryCache=function(e){return d[e]},t.clearGeometryCache=function(){d={},p={}},t.cacheGeometry=function(e,t){return d[e]=t,t},t.convertToBingeom=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={blendShapes:{},colorMaps:{}},n=0,a=[],o=[];function s(e,t,r,i){var s=i?new i(t):t,u=new Uint8Array(s.buffer,s.byteOffset,t.byteLength),c=u.byteLength%4,f=0;if(c){f=4-c;var h=new Uint8Array(u.byteLength+f);h.set(u),u=h}for(var d=null,p=0;p<a.length;p++)if(l(u,a[p])){d=o[p];break}if(null!==d)r[e]=d;else{var m=i?i.BYTES_PER_ELEMENT:t.BYTES_PER_ELEMENT;r[e]={b:m,l:u.byteLength-f,o:n},n+=u.byteLength,a.push(u),o.push(r[e])}}function l(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}s("faces",e.positions.faceValueIndices,r),s("faceCount",function(e){for(var t=new Uint32Array(e.length-1),r=0;r<e.length-1;r++)t[r]=e[r+1]-e[r];return t}(e.faceRangeOffsets),r),s("positions",e.positions.values.data,r,Float32Array),e.normalMap&&(r.normalMap={},s("faces",e.normalMap.faceValueIndices,r.normalMap),s("values",e.normalMap.values.data,r.normalMap,Float32Array));e.tangentMap&&e.tangentMap.length&&(r.tangentMap={},s("faces",e.tangentMap.faceValueIndices,r.tangentMap),s("values",e.tangentMap.values.data,r.tangentMap,Float32Array));e.uvMaps&&e.uvMaps.length&&(r.uvMaps={},e.uvMaps.namesByIndex.forEach(function(t){var n=e.uvMaps.byName[t];r.uvMaps[t]={},s("faces",n.faceValueIndices,r.uvMaps[t]),s("values",n.values.data,r.uvMaps[t],Float32Array)}));e.edgeCreaseWeights&&e.edgeCreaseWeights.length&&s("edgeCreaseWeights",e.edgeCreaseWeights,r,Float32Array);e.skinning&&(r.skinning={},s("positionSkinRange",e.skinning.positionSkinRange,r.skinning),s("skinWeights",e.skinning.skinWeights,r.skinning),s("poseSkinToPoseBoneTransform",e.skinning.poseSkinToPoseBoneTransform.data,r.skinning,Float32Array),s("skinBoneIndices",e.skinning.skinBoneIndices,r.skinning));e.materialIds&&s("materialIds",e.materialIds,r,Uint32Array);if(e.blendShapes)for(var u in e.blendShapes)r.blendShapes[u]={},s("positions",e.blendShapes[u].positions.data,r.blendShapes[u],Float32Array),e.blendShapes[u].normals&&s("normals",e.blendShapes[u].normals.data,r.blendShapes[u],Float32Array),e.blendShapes[u].weights&&s("weights",e.blendShapes[u].weights.data,r.blendShapes[u],Float32Array);var c=(0,i.default)(r);c+={0:"",1:"   ",2:"  ",3:" "}[c.length%4];for(var f=0,h=new Uint8Array(n+c.length+8),d=0;d<a.length;d++)h.set(a[d],f),f+=a[d].byteLength;for(var p=0;p<c.length;p++)h[f++]=c.charCodeAt(p);var v=f>>2,g=new Uint32Array(h.buffer);return g[v]=c.length,g[v+1]=m,t.fbx?new Uint8Array(h.buffer):new Uint32Array(h.buffer)},t.convertToCNSPolyMesh=function(t,r){if(r&&p[r])return p[r];var i=function(t){if(t instanceof Uint32Array)return t;if(t.byteLength&&0!=(3&t.byteLength))return console.warn("Invalid bingeom, the byte length of the buffer must be a multiple of 4"),null;return t instanceof ArrayBuffer?new Uint32Array(t):void 0!==e&&t instanceof e?new Uint32Array(new Uint8Array(t).buffer):(console.warn("Invalid bingeom type: "+(void 0===t?"undefined":(0,a.default)(t))),null)}(t);if(!i)return new o.PolyMesh;var s=function(e){var t=e[e.length-2];if(!t)throw new Error("No footer in bingeom");var r=new Uint8Array(e.buffer),n=r.byteLength-8;return r=r.subarray(n-t,n),JSON.parse(String.fromCharCode.apply(null,r))}(i),l=i.buffer,c=Object.prototype.hasOwnProperty;if(s&&!s.faceCount&&!s.faces&&!s.positions)return console.warn("Warning: PolyMesh is empty."),new o.PolyMesh;!function(e,t){if(!e)throw new Error(t)}(u(s),"Invalid Polymesh Data?");var f=h(l,s.faceCount),d=new o.Importer;1===f.length?d.defaultFaceArity=f[0]:d.setFaceArities(f);d.collapsePositions=!1,d.collapseMapValues=!1;var m=h(l,s.faces),v=h(l,s.positions,"RawFloat32"),g=o.PolyMaps.id(o.PolyMaps.TypePosition);if(d.setMapIndices(g,m),d.setMapValues(g,v),s.normalMap){var y=h(l,s.normalMap.faces),x=h(l,s.normalMap.values,"RawFloat32"),b=o.PolyMaps.id(o.PolyMaps.TypeNormal);d.setMapIndices(b,y),d.setMapValues(b,x)}if(s.uvMaps&&(0,n.default)(s.uvMaps).length)for(var w in s.uvMaps)if(c.call(s.uvMaps,w)){var _=s.uvMaps[w],M=h(l,_.faces),S=h(l,_.values,"RawFloat32"),T=o.PolyMaps.id(o.PolyMaps.TypeUV,w);d.setMapIndices(T,M),d.setMapValues(T,S)}if(s.tangentMap){var E=h(l,s.tangentMap.faces),P=h(l,s.tangentMap.values,"RawFloat32"),A=o.PolyMaps.id(o.PolyMaps.TypeTangent);d.setMapIndices(A,E),d.setMapValues(A,P)}if(s.blendShapes)for(var C in d.initializeBlendShape(),s.blendShapes)if(c.call(s.blendShapes,C)){var R=s.blendShapes[C],I=h(l,R.positions,"RawFloat32"),O=R.normals?h(l,R.normals,"RawFloat32"):null,L=R.weights?h(l,R.weights,"RawFloat32"):null;d.setBlendShapes(C,I,O,L)}s.skinning&&d.setSkinning(h(l,s.skinning.positionSkinRange,"RawUint32"),h(l,s.skinning.skinWeights,"RawFloat32"),h(l,s.skinning.skinBoneIndices,"RawUint16"),h(l,s.skinning.poseSkinToPoseBoneTransform,"RawFloat32"));if(s.edgeCreaseWeights)d.setCreases(h(l,s.edgeCreaseWeights,"RawFloat32"));else if(s.creases){var D=h(l,s.creases.weights,"RawFloat32"),N=h(l,s.creases.edgeVertexIndices,"RawUint32");d.setCreases(D,N)}s.materialIds&&d.setMaterialIds(h(l,s.materialIds,"RawUint32"));var V=d.toMeshAndClear();r&&(p[r]=V);return V};var o=r(145);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return void 0!==e&&"number"==typeof e.o&&"number"==typeof e.l}function u(e){return e&&l(e.faceCount)&&l(e.faces)&&l(e.positions)}var c={1:"RawUint8",2:"RawUint16",4:"RawUint32"},f={RawUint8:{shift:0,arr:Uint8Array},RawUint16:{shift:1,arr:Uint16Array},RawUint32:{shift:2,arr:Uint32Array},RawFloat32:{shift:2,arr:Float32Array}};function h(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return r?new f[r].arr(0):[];var n=f[r||c[t.b||4]];return new n.arr(e,t.o,t.l>>n.shift)}var d={},p={};var m=1e3}).call(t,r(57).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewScale=function(e){var t=(0,i.getRect)(e),r=(new n.Vector3).copy(t.height<t.width?{x:0,y:.4,z:0}:{x:.4,y:0,z:0}),s=(0,a.getSelectedNodes)(e)[0];if(!s)return 1;var l=(new n.Vector3).setFromMatrixPosition((0,o.getWorldTransform)(e,s)),u=(0,i.getThreeCamera)(e),c=(new n.Matrix4).getInverse(u.projectionMatrix,!0),f=(new n.Vector3).copy(l).applyMatrix4(u.matrixWorldInverse).applyMatrix4(u.projectionMatrix);return f.add(r).applyMatrix4(c).applyMatrix4(u.matrix),f.sub(l).length()},t.drawMoveGizmo=function(){f();var e=new n.ConeGeometry(.08,.25,25),t=new n.CylinderGeometry(u,u,2,32),r=e.clone();e.translate(0,1,0),r.rotateX(Math.PI),r.translate(0,-1,0),t.merge(e),t.merge(r);var i=t.clone(),a=t.clone(),o=new n.Mesh(t,l.y);o.axis="y",i.rotateX(Math.PI/2);var s=new n.Mesh(i,l.z);s.axis="z",a.rotateZ(Math.PI/2);var c=new n.Mesh(a,l.x);c.axis="x";var h=new n.Object3D;return h.add(c),h.add(o),h.add(s),h},t.drawRotateGizmo=function(){f();var e=new n.TorusGeometry(1,u,16,100),t=e.clone(),r=e.clone();e.rotateY(Math.PI/2),t.rotateX(Math.PI/2);var i=new n.Object3D,a=new n.Mesh(e,l.x);a.axis="x";var o=new n.Mesh(t,l.y);o.axis="y";var s=new n.Mesh(r,l.z);return s.axis="z",i.add(a),i.add(o),i.add(s),i},t.drawScaleGizmo=function(){f();var e=new n.BoxGeometry(.2,.2,.2),t=new n.CylinderGeometry(u,u,1,32);t.translate(0,.5,0),e.translate(0,1,0),t.merge(e);var r=t.clone(),i=t.clone(),a=new n.Mesh(t,l.y);a.axis="y",r.rotateX(Math.PI/2);var o=new n.Mesh(r,l.z);o.axis="z",i.rotateZ(-Math.PI/2);var s=new n.Mesh(i,l.x);s.axis="x";var c=new n.Object3D;return c.add(s),c.add(a),c.add(o),c},t.highlightAxis=function(e,t,r){var i=null,a=t.eventRay,o=e.raycastSelect({x:0,y:0},"Widgets",a);o&&o[0]&&o[0].node&&o[0].node.axis?(r&&c(r),i=o[0].node.axis,l[i].color=new n.Color(1,1,0),l[i].needsUpdate=!0,e.postTranslate("normal",!0)):r&&(c(r),e.postTranslate("normal",!0));return i};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),i=r(8),a=r(39),o=r(4);var s={x:16711680,y:65280,z:255},l={x:new n.MeshStandardMaterial({color:s.x,depthTest:!1}),y:new n.MeshStandardMaterial({color:s.y,depthTest:!1}),z:new n.MeshStandardMaterial({color:s.z,depthTest:!1})},u=.02;function c(e){l[e].color=new n.Color(s[e]),l[e].needsUpdate=!0}function f(){["x","y","z"].forEach(c)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r={activeAxis:!1,cursorTransform:null};return{enabled:!0,display:{playerTools:!1},options:{displayGizmo:!0,mode:"free",plane:{normal:{x:0,y:1,z:0},constant:0}},tool:{mousedown:function(t){"controller"===t.name&&(this.firstInter=u(e,t),this.originTransform=c(e))},mouseup:function(e){"controller"===e.name&&(this.firstInter=null)},drag:function(t){if(!this.active)return!1;if(1==t.which){var n=(0,s.getSelectedNodes)(e)[0];if(r.nodeId=n,!(0,i.dragOnSelectedNode)(e,t,n))return!1;var a=this;return{momentum:!1,handle:function(t){"plane"===a.options.mode?(0,i.moveNodeOnPlane)(e,t,r,a.options):"surface"===a.options.mode?(0,i.moveNodeOnObjects)(e,t,r,a.options):"controller"===t.name?((0,i.moveNodeFree)(e,t,!1,a.firstInter,a.options),(0,o.rotateNode)(e,t,!1,a.firstInter)):(0,i.moveNodeFree)(e,t,r.activeAxis,a.firstInter,a.options)},end:function(){"controller"===t.name&&function(e,t){var r=(0,s.getSelectedNodes)(e);if(!r.length||!t)return;var n=t.translation,i=t.rotation,a=r[0];e.dispatch((0,l.set)({id:a,plug:"Transform",property:"rotation"},i)),e.dispatch((0,l.set)({id:a,plug:"Transform",property:"translation"},n))}(e,a.originTransform)}}}return 3==t.which?{momentum:!r.activeAxis,handle:function(t){(0,o.rotateNode)(e,t,r.activeAxis)}}:void 0},scroll:function(t){if(this.active)return!!(0,s.getSelectedNodes)(e)[0]&&((0,a.scaleNode)(e,t,r.activeAxis),!0)}}}},t.getOffsetFromFirstIntersect=u,t.getOriginTransform=c;var n=r(0),i=r(302),a=r(303),o=r(202),s=r(39),l=r(4);function u(e,t){var r=t.eventRay,i=(0,s.getSelectedNodes)(e);if(!i.length)return null;var a=i[0],o=(0,l.getWorldTransform)(e,a),u=(new n.Vector3).setFromMatrixPosition(o),c=(new n.Matrix4).extractRotation(o),f=(new n.Quaternion).setFromRotationMatrix(c),h=t.quaternion;h.inverse();for(var d=(new n.Quaternion).multiplyQuaternions(h,f),p=e.getTranslator().getThreeNode(a),m=r.intersectObject(p.children[0].children[0]),v=m[0],g=1;g<m.length;g++)m[g].distance<v.distance&&(v=m[g]);return{inter:v,offset:v?(new n.Vector3).subVectors(u,v.point):null,startQuaternion:d}}function c(e){var t=(0,s.getSelectedNodes)(e);if(!t.length)return null;var r=t[0],n=(0,l.get)(e,{id:r,plug:"Transform",property:"rotation"});return{translation:(0,l.get)(e,{id:r,plug:"Transform",property:"translation"}),rotation:n}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=!1;return{label:"Rotate Node",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{onChange:void 0,onEnd:void 0,restrictAxis:void 0,shouldRotate:void 0},tool:{hover:function(e){this.active&&(r=(0,s.highlightAxis)(t,e,r))},mousedown:function(t){"controller"===t.name&&(this.firstInter=(0,u.getOffsetFromFirstIntersect)(e,t))},mouseup:function(e){"controller"===e.name&&(this.firstInter=null)},drag:function(t){if(1!==t.which||!this.active||t.metaKey)return!1;var n=this;return{momentum:!1,handle:function(t){S(e,t,r,n.firstInter,null,n.options),"function"==typeof n.options.onChange&&n.options.onChange(t)},end:function(){"function"==typeof n.options.onEnd&&n.options.onEnd(t)}}}},widget:{draw:function(t){t.add((0,s.drawRotateGizmo)());var r=(0,s.getViewScale)(e);t.scale.set(r,r,r)},position:function(t){var r=(0,o.getSelectedNodes)(e);if(r.length){t.visible=!0;var i=r[0],l=(0,a.getWorldTransform)(e,i),u=new n.Vector3;u.setFromMatrixPosition(l),t.position.set(u.x,u.y,u.z);var c=(0,s.getViewScale)(e);t.scale.set(c,c,c)}else t.visible=!1}}}},t.rotateNode=S;var n=r(0),i=r(8),a=r(4),o=(r(10),r(39)),s=r(200),l=f(r(305)),u=r(201),c=f(r(147));function f(e){return e&&e.__esModule?e:{default:e}}Math.min;var h=Math.PI,d=Math.sqrt,p=new n.Matrix4,m=new n.Quaternion,v=new n.Quaternion,g=new n.Vector3,y=new n.Vector3,x=new n.Euler,b=new n.Vector3,w=new n.Vector3;var _=-.5*Math.PI+1e-4,M=.5*Math.PI-1e-4;function S(e,t,r,s,u){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},S=(0,i.getRect)(e),T=(0,o.getSelectedNodes)(e);if(T.length||u){var E=u||T[0],P=(0,a.getWorldTransform)(e,E);if(P){if(P.decompose(g,m,y),t.quaternion&&s){var A=s.startQuaternion,C=(new n.Quaternion).multiplyQuaternions(t.quaternion,A);m.copy(C)}else{var R=(0,l.default)(e,E),I=(new n.Vector3).set(2*t.deltaX/S.x/R,-2*t.deltaY/S.y/R,0);if(f.gyroscope){var O=(0,i.getCameraWorldTransform)(e),L=p;L.getInverse(O),L.multiply(P),x.setFromRotationMatrix(L,"XZY"),x.y+=5*I.x,x.x=(0,c.default)(x.x-5*I.y,_,M),L.makeRotationFromEuler(x),L.multiplyMatrices(O,L),m.setFromRotationMatrix(L)}else{var D=I.length();if(D>1)I.normalize(),D=1;else if(0===D)return;var N=(0,i.getCameraWorldTransform)(e);b.setFromMatrixPosition(N),I.transformDirection(N).multiplyScalar(D),w.subVectors(b,g).normalize();var V=r||f.restrictAxis;if(V){(I=Math.abs(t.deltaX)>Math.abs(t.deltaY)?(new n.Vector3).set(2*t.deltaX/S.x/R,-2*t.deltaX/S.x/R,0):(new n.Vector3).set(2*t.deltaY/S.y/R,-2*t.deltaY/S.y/R,0)).length()>1&&I.normalize();var F=new n.Vector3(0,0,0);F[V]=1,I.projectOnPlane(F),w.projectOnPlane(F),w.z=Math.abs(w.z)}var B=d(1-I.lengthSq());I.addScaledVector(w,B).normalize(),v.setFromUnitVectors(w,I),m.premultiply(v)}}P.compose(g,m,y);var U=(0,a.getWorldTransform)(e,(0,a.find)(e,{id:E,parent:!0}));U&&(p.getInverse(U,!0),P.premultiply(p)),P.decompose(g,m,y),f.shouldRotate&&"function"==typeof f.shouldRotate&&!f.shouldRotate(t,P)||(x.setFromQuaternion(m,"ZYX"),e.dispatch((0,a.set)({id:E,plug:"Transform",property:"rotation"},x.toVector3().multiplyScalar(180/h))))}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collapseCanvas=function(e,t,r){var n=r||e.createCanvas(t.width,t.height),i=n.getContext("2d");return i.clearRect(0,0,n.width,n.height),t.canvasOperations.reduce(function(r,a,o){var s=r;return r&&(i.save(),s=a(i,e,n,t.nodeId,o),i.restore()),s},!0)?n:null}},function(e,t,r){e.exports={default:r(665),__esModule:!0}},function(e,t,r){e.exports={default:r(667),__esModule:!0}},function(e,t,r){e.exports={default:r(673),__esModule:!0}},function(e,t,r){var n=r(60),i=r(211),a=r(94),o=r(153),s=r(683);e.exports=function(e,t){var r=1==e,l=2==e,u=3==e,c=4==e,f=6==e,h=5==e||f,d=t||s;return function(t,s,p){for(var m,v,g=a(t),y=i(g),x=n(s,p,3),b=o(y.length),w=0,_=r?d(t,b):l?d(t,0):void 0;b>w;w++)if((h||w in y)&&(v=x(m=y[w],w,g),e))if(r)_[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:_.push(m)}else if(c)return!1;return f?-1:u||c?c:_}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(27),i=r(34).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(123);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){"use strict";var n=r(150),i=r(12),a=r(215),o=r(70),s=r(66),l=r(92),u=r(691),c=r(126),f=r(259),h=r(28)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,m,v,g,y){u(r,t,m);var x,b,w,_=function(e){if(!d&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},M=t+" Iterator",S="values"==v,T=!1,E=e.prototype,P=E[h]||E["@@iterator"]||v&&E[v],A=P||_(v),C=v?S?_("entries"):A:void 0,R="Array"==t&&E.entries||P;if(R&&(w=f(R.call(new e)))!==Object.prototype&&w.next&&(c(w,M,!0),n||s(w,h)||o(w,h,p)),S&&P&&"values"!==P.name&&(T=!0,A=function(){return P.call(this)}),n&&!y||!d&&!T&&E[h]||o(E,h,A),l[t]=A,l[M]=p,v)if(x={values:S?A:_("values"),keys:g?A:_("keys"),entries:C},y)for(b in x)b in E||a(E,b,x[b]);else i(i.P+i.F*(d||T),t,x);return x}},function(e,t,r){"use strict";var n=r(122);e.exports.f=function(e){return new function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)}(e)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){e.exports=r(70)},function(e,t,r){var n=r(217)("keys"),i=r(154);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(34),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,r){var n,i,a,o=r(60),s=r(689),l=r(325),u=r(209),c=r(34),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,m=c.Dispatch,v=0,g={},y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},x=function(e){y.call(e.data)};h&&d||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},n(v),v},d=function(e){delete g[e]},"process"==r(123)(f)?n=function(e){f.nextTick(o(y,e,1))}:m&&m.now?n=function(e){m.now(o(y,e,1))}:p?(a=(i=new p).port2,i.port1.onmessage=x,n=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",x,!1)):n="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(o(y,e,1),0)}),e.exports={set:h,clear:d}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(27);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(34),i=r(11),a=r(150),o=r(222),s=r(53).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,r){t.f=r(28)},function(e,t,r){var n=r(149),i=r(28)("iterator"),a=r(92);e.exports=r(11).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}},function(e,t,r){"use strict";var n=r(85),i=r(105),a=r(35);e.exports=function(e){for(var t=n(this),r=a(t.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,r),l=o>2?arguments[2]:void 0,u=void 0===l?r:i(l,r);u>s;)t[s++]=e;return t}},function(e,t,r){var n=r(62),i=r(35),a=r(105);e.exports=function(e){return function(t,r,o){var s,l=n(t),u=i(l.length),c=a(o,u);if(e&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}}},function(e,t,r){var n=r(99),i=r(20)("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:a?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,r){"use strict";var n=r(29),i=r(83);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){var n=r(17),i=r(16).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(20)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){var n=r(99);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(100),i=r(20)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,r){var n=r(17),i=r(15),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(61)(Function.call,r(71).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},function(e,t,r){var n=r(237)("keys"),i=r(86);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(16),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,r){var n=r(15),i=r(81),a=r(20)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||void 0==(r=n(o)[a])?t:i(r)}},function(e,t,r){var n=r(350),i=r(82);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},function(e,t,r){var n,i,a,o=r(61),s=r(347),l=r(345),u=r(228),c=r(16),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,m=c.Dispatch,v=0,g={},y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},x=function(e){y.call(e.data)};h&&d||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},n(v),v},d=function(e){delete g[e]},"process"==r(99)(f)?n=function(e){f.nextTick(o(y,e,1))}:m&&m.now?n=function(e){m.now(o(y,e,1))}:p?(a=(i=new p).port2,i.port1.onmessage=x,n=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",x,!1)):n="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(o(y,e,1),0)}),e.exports={set:h,clear:d}},function(e,t,r){for(var n,i=r(16),a=r(54),o=r(86),s=o("typed_array"),l=o("view"),u=!(!i.ArrayBuffer||!i.DataView),c=u,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(n=i[h[f++]])?(a(n.prototype,s,!0),a(n.prototype,l,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:l}},function(e,t,r){var n=r(226),i=r(20)("iterator"),a=r(100);e.exports=r(128).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}},function(e,t,r){"use strict";var n=r(97),i=r(353),a=r(100),o=r(62);e.exports=r(352)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t,r){"use strict";function n(e,t,r){r=r||2;var n,s,l,u,c,d,m,v=t&&t.length,g=v?t[0]*r:e.length,y=i(e,0,g,r,!0),x=[];if(!y)return x;if(v&&(y=function(e,t,r,n){var o,s,l,u,c,d=[];for(o=0,s=t.length;o<s;o++)l=t[o]*n,u=o<s-1?t[o+1]*n:e.length,(c=i(e,l,u,n,!1))===c.next&&(c.steiner=!0),d.push(p(c));for(d.sort(f),o=0;o<d.length;o++)h(d[o],r),r=a(r,r.next);return r}(e,t,y,r)),e.length>80*r){n=l=e[0],s=u=e[1];for(var b=r;b<g;b+=r)c=e[b],d=e[b+1],c<n&&(n=c),d<s&&(s=d),c>l&&(l=c),d>u&&(u=d);m=Math.max(l-n,u-s)}return o(y,x,r,n,s,m),x}function i(e,t,r,n,i){var a,o;if(i===T(e,t,r,n)>0)for(a=t;a<r;a+=n)o=_(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=_(a,e[a],e[a+1],o);return o&&y(o,o.next)&&(M(o),o=o.next),o}function a(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!y(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{if(M(n),(n=t=n.prev)===n.next)return null;r=!0}}while(r||n!==t);return t}function o(e,t,r,n,i,f,h){if(e){!h&&f&&function(e,t,r,n){var i=e;do{null===i.z&&(i.z=d(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,a,o,s,l,u=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ);t++);for(l=u;s>0||l>0&&n;)0===s?(i=n,n=n.nextZ,l--):0!==l&&n?r.z<=n.z?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--):(i=r,r=r.nextZ,s--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,u*=2}while(o>1)}(i)}(e,n,i,f);for(var p,m,v=e;e.prev!==e.next;)if(p=e.prev,m=e.next,f?l(e,n,i,f):s(e))t.push(p.i/r),t.push(e.i/r),t.push(m.i/r),M(e),e=m.next,v=m.next;else if((e=m)===v){h?1===h?o(e=u(e,t,r),t,r,n,i,f,2):2===h&&c(e,t,r,n,i,f):o(a(e),t,r,n,i,f,1);break}}}function s(e){var t=e.prev,r=e,n=e.next;if(g(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(m(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&g(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function l(e,t,r,n){var i=e.prev,a=e,o=e.next;if(g(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,f=d(s,l,t,r,n),h=d(u,c,t,r,n),p=e.nextZ;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&m(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&m(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function u(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!y(i,a)&&x(i,n,n.next,a)&&b(i,a)&&b(a,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(a.i/r),M(n),M(n.next),n=e=a),n=n.next}while(n!==e);return n}function c(e,t,r,n,i,s){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&v(l,u)){var c=w(l,u);return l=a(l,l.next),c=a(c,c.next),o(l,t,r,n,i,s),void o(c,t,r,n,i,s)}u=u.next}l=l.next}while(l!==e)}function f(e,t){return e.x-t.x}function h(e,t){if(t=function(e,t){var r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r.prev;var l,u=r,c=r.x,f=r.y,h=1/0;n=r.next;for(;n!==u;)i>=n.x&&n.x>=c&&m(a<f?i:o,a,c,f,a<f?o:i,a,n.x,n.y)&&((l=Math.abs(a-n.y)/(i-n.x))<h||l===h&&n.x>r.x)&&b(n,e)&&(r=n,h=l),n=n.next;return r}(e,t)){var r=w(t,e);a(r,r.next)}}function d(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function m(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function v(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&x(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&b(e,t)&&b(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function x(e,t,r,n){return!!(y(e,t)&&y(r,n)||y(e,n)&&y(r,t))||g(e,t,r)>0!=g(e,t,n)>0&&g(r,n,e)>0!=g(r,n,t)>0}function b(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function w(e,t){var r=new S(e.i,e.x,e.y),n=new S(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function _(e,t,r,n){var i=new S(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function M(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function S(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}e.exports=n,n.deviation=function(e,t,r,n){var i=t&&t.length,a=i?t[0]*r:e.length,o=Math.abs(T(e,0,a,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;o-=Math.abs(T(e,u,c,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},n.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[i][a][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}},function(e,t,r){"use strict";var n=r(855);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""))?e.split("&").reduce(function(e,t){var r=t.replace(/\+/g," ").split("="),n=r.shift(),i=r.length>0?r.join("="):void 0;return n=decodeURIComponent(n),i=void 0===i?null:decodeURIComponent(i),e.hasOwnProperty(n)?Array.isArray(e[n])?e[n].push(i):e[n]=[e[n],i]:e[n]=i,e},{}):{}},t.stringify=function(e){return e?Object.keys(e).sort().map(function(t){var r=e[t];return void 0===r?"":null===r?t:Array.isArray(r)?r.slice().sort().map(function(e){return n(t)+"="+n(e)}).join("&"):n(t)+"="+n(r)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,r){"use strict";(function(t,n,i){var a=r(164);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var s,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:a;y.WritableState=g;var u=r(135);u.inherits=r(107);var c={deprecate:r(860)},f=r(369),h=r(249).Buffer,d=i.Uint8Array||function(){};var p,m=r(368);function v(){}function g(e,t){s=s||r(87),e=e||{},this.objectMode=!!e.objectMode,t instanceof s&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(a(i,n),a(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),S(e,t))}(e,r,n,t,i);else{var o=_(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),n?l(b,e,r,o,i):b(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(e){if(s=s||r(87),!(p.call(y,this)||this instanceof s))return new y(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function x(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function b(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),S(e,t)}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,l=!0;r;)i[s]=r,r.isBuf||(l=!1),r=r.next,s+=1;i.allBuffers=l,x(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t)}else{for(;r;){var u=r.chunk,c=r.encoding,f=r.callback;if(x(e,t,!1,t.objectMode?1:u.length,u,c,f),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function M(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),S(e,t)})}function S(e,t){var r=_(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a(M,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(y,f),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||e&&e._writableState instanceof g}})):p=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,s=(n=e,(h.isBuffer(n)||n instanceof d)&&!i.objectMode);return s&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=v),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),a(t,r)}(this,r):(s||function(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),a(n,o),i=!1),i}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,a){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else x(e,t,!1,s,n,i,a);return l}(this,i,s,e,t,r)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},y.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,S(e,t),r&&(t.finished?a(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,r(88),r(251).setImmediate,r(49))},function(e,t,r){(t=e.exports=r(366)).Stream=t,t.Readable=t,t.Writable=r(246),t.Duplex=r(87),t.Transform=r(367),t.PassThrough=r(840)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,n,i){function a(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function o(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t}r.d(t,"asap",function(){return ce}),r.d(t,"cast",function(){return Ae}),r.d(t,"Promise",function(){return B}),r.d(t,"EventTarget",function(){return s}),r.d(t,"all",function(){return X}),r.d(t,"allSettled",function(){return Y}),r.d(t,"race",function(){return Z}),r.d(t,"hash",function(){return K}),r.d(t,"hashSettled",function(){return ee}),r.d(t,"rethrow",function(){return te}),r.d(t,"defer",function(){return re}),r.d(t,"denodeify",function(){return H}),r.d(t,"configure",function(){return u}),r.d(t,"on",function(){return Re}),r.d(t,"off",function(){return Ie}),r.d(t,"resolve",function(){return ie}),r.d(t,"reject",function(){return ae}),r.d(t,"map",function(){return ne}),r.d(t,"async",function(){return Ce}),r.d(t,"filter",function(){return se});var s={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=void 0,e},on:function(e,t){if("function"!=typeof t)throw new TypeError("Callback must be a function");var r=o(this),n=void 0;(n=r[e])||(n=r[e]=[]),-1===a(n,t)&&n.push(t)},off:function(e,t){var r,n=o(this),i=void 0;t?-1!==(r=a(i=n[e],t))&&i.splice(r,1):n[e]=[]},trigger:function(e,t,r){var n;if(n=o(this)[e])for(var i=0;i<n.length;i++)(0,n[i])(t,r)}},l={instrument:!1};function u(e,t){if(2!==arguments.length)return l[e];l[e]=t}function c(e){return"function"==typeof e}function f(e){return null!==e&&"object"==typeof e}s.mixin(l);var h=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},d=Date.now||function(){return(new Date).getTime()},p=[];function m(e,t,r){1===p.push({name:e,payload:{key:t._guidKey,id:t._id,eventName:e,detail:t._result,childId:r&&r._id,label:t._label,timeStamp:d(),error:l["instrument-with-stack"]?new Error(t._label):null}})&&setTimeout(function(){for(var e=0;e<p.length;e++){var t=p[e],r=t.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),l.trigger(t.name,t.payload)}p.length=0},50)}function v(e,t){if(e&&"object"==typeof e&&e.constructor===this)return e;var r=new this(g,t);return S(r,e),r}function g(){}var y=void 0,x=1,b=2,w=new R;function _(e){try{return e.then}catch(e){return w.error=e,w}}function M(e,t,r){t.constructor===e.constructor&&r===L&&e.constructor.resolve===v?function(e,t){t._state===x?E(e,t._result):t._state===b?(t._onError=null,P(e,t._result)):A(t,void 0,function(r){t!==r?S(e,r):E(e,r)},function(t){return P(e,t)})}(e,t):r===w?(P(e,w.error),w.error=null):c(r)?function(e,t,r){l.async(function(e){var n=!1,i=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,function(r){n||(n=!0,t!==r?S(e,r):E(e,r))},function(t){n||(n=!0,P(e,t))},e._label);!n&&i&&(n=!0,P(e,i))},e)}(e,t,r):E(e,t)}function S(e,t){var r,n;e===t?E(e,t):(n=typeof(r=t),null===r||"object"!==n&&"function"!==n?E(e,t):M(e,t,_(t)))}function T(e){e._onError&&e._onError(e._result),C(e)}function E(e,t){e._state===y&&(e._result=t,e._state=x,0===e._subscribers.length?l.instrument&&m("fulfilled",e):l.async(C,e))}function P(e,t){e._state===y&&(e._state=b,e._result=t,l.async(T,e))}function A(e,t,r,n){var i=e._subscribers,a=i.length;e._onError=null,i[a]=t,i[a+x]=r,i[a+b]=n,0===a&&e._state&&l.async(C,e)}function C(e){var t=e._subscribers,r=e._state;if(l.instrument&&m(r===x?"fulfilled":"rejected",e),0!==t.length){for(var n=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?O(r,n,i,a):i(a);e._subscribers.length=0}}function R(){this.error=null}var I=new R;function O(e,t,r,n){var i=c(r),a=void 0,o=void 0;if(i){if((a=function(e,t){try{return e(t)}catch(e){return I.error=e,I}}(r,n))===I)o=a.error,a.error=null;else if(a===t)return void P(t,new TypeError("A promises callback cannot return that same promise."))}else a=n;t._state!==y||(i&&void 0===o?S(t,a):void 0!==o?P(t,o):e===x?E(t,a):e===b&&P(t,a))}function L(e,t,r){var n=this._state;if(n===x&&!e||n===b&&!t)return l.instrument&&m("chained",this,this),this;this._onError=null;var i=new this.constructor(g,r),a=this._result;if(l.instrument&&m("chained",this,i),n===y)A(this,i,e,t);else{var o=n===x?e:t;l.async(function(){return O(n,i,o,a)})}return i}var D=function(){function e(e,t,r,n){this._instanceConstructor=e,this.promise=new e(g,n),this._abortOnReject=r,this._init.apply(this,arguments)}return e.prototype._init=function(e,t){var r=t.length||0;this.length=r,this._remaining=r,this._result=new Array(r),this._enumerate(t),0===this._remaining&&E(this.promise,this._result)},e.prototype._enumerate=function(e){for(var t=this.length,r=this.promise,n=0;r._state===y&&n<t;n++)this._eachEntry(e[n],n)},e.prototype._settleMaybeThenable=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===v){var i=_(e);if(i===L&&e._state!==y)e._onError=null,this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=this._makeResult(x,t,e);else if(r===B){var a=new r(g);M(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},e.prototype._eachEntry=function(e,t){var r;null!==(r=e)&&"object"==typeof r?this._settleMaybeThenable(e,t):(this._remaining--,this._result[t]=this._makeResult(x,t,e))},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===y&&(this._abortOnReject&&e===b?P(n,r):(this._remaining--,this._result[t]=this._makeResult(e,t,r),0===this._remaining&&E(n,this._result)))},e.prototype._makeResult=function(e,t,r){return r},e.prototype._willSettleAt=function(e,t){var r=this;A(e,void 0,function(e){return r._settledAt(x,t,e)},function(e){return r._settledAt(b,t,e)})},e}();function N(e,t,r){return e===x?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}var V="rsvp_"+d()+"-",F=0;var B=function(){function e(t,r){this._id=F++,this._label=r,this._state=void 0,this._result=void 0,this._subscribers=[],l.instrument&&m("created",this),g!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){var r=!1;try{t(function(t){r||(r=!0,S(e,t))},function(t){r||(r=!0,P(e,t))})}catch(t){P(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype._onError=function(e){var t=this;l.after(function(){t._onError&&l.trigger("error",e,t._label)})},e.prototype.catch=function(e,t){return this.then(void 0,e,t)},e.prototype.finally=function(e,t){var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})},t)},e}();function U(){this.value=void 0}B.cast=v,B.all=function(e,t){return h(e)?new D(this,e,!0,t).promise:this.reject(new TypeError("Promise.all must be called with an array"),t)},B.race=function(e,t){var r=new this(g,t);if(!h(e))return P(r,new TypeError("Promise.race must be called with an array")),r;for(var n=0;r._state===y&&n<e.length;n++)A(this.resolve(e[n]),void 0,function(e){return S(r,e)},function(e){return P(r,e)});return r},B.resolve=v,B.reject=function(e,t){var r=new this(g,t);return P(r,e),r},B.prototype._guidKey=V,B.prototype.then=L;var k=new U,z=new U;function G(e,t,r){try{e.apply(t,r)}catch(e){return k.value=e,k}}function j(e,t){return{then:function(r,n){return e.call(t,r,n)}}}function H(e,t){var r=function(){for(var r=arguments.length,n=new Array(r+1),i=!1,a=0;a<r;++a){var o=arguments[a];if(!i){if((i=W(o))===z){var s=new B(g);return P(s,z.value),s}i&&!0!==i&&(o=j(i,o))}n[a]=o}var l=new B(g);return n[r]=function(e,r){e?P(l,e):void 0===t?S(l,r):!0===t?S(l,function(e){for(var t=e.length,r=new Array(t-1),n=1;n<t;n++)r[n-1]=e[n];return r}(arguments)):h(t)?S(l,function(e,t){for(var r={},n=e.length,i=new Array(n),a=0;a<n;a++)i[a]=e[a];for(var o=0;o<t.length;o++)r[t[o]]=i[o+1];return r}(arguments,t)):S(l,r)},i?function(e,t,r,n){return B.all(t).then(function(t){var i=G(r,n,t);return i===k&&P(e,i.value),e})}(l,n,e,this):function(e,t,r,n){var i=G(r,n,t);i===k&&P(e,i.value);return e}(l,n,e,this)};return r.__proto__=e,r}function W(e){return!(!e||"object"!=typeof e)&&(e.constructor===B||function(e){try{return e.then}catch(e){return k.value=e,k}}(e))}function X(e,t){return B.all(e,t)}var q=function(e){function t(t,r,n){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!1,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(D);function Y(e,t){return h(e)?new q(B,e,t).promise:B.reject(new TypeError("Promise.allSettled must be called with an array"),t)}function Z(e,t){return B.race(e,t)}q.prototype._makeResult=N;var J=Object.prototype.hasOwnProperty,Q=function(e){function t(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,n,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t){this._result={},this._enumerate(t),0===this._remaining&&E(this.promise,this._result)},t.prototype._enumerate=function(e){var t=this.promise,r=[];for(var n in e)J.call(e,n)&&r.push({position:n,entry:e[n]});var i=r.length;this._remaining=i;for(var a=void 0,o=0;t._state===y&&o<i;o++)a=r[o],this._eachEntry(a.entry,a.position)},t}(D);function K(e,t){return f(e)?new Q(B,e,t).promise:B.reject(new TypeError("Promise.hash must be called with an object"),t)}var $=function(e){function t(t,r,n){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!1,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Q);function ee(e,t){return f(e)?new $(B,e,!1,t).promise:B.reject(new TypeError("RSVP.hashSettled must be called with an object"),t)}function te(e){throw setTimeout(function(){throw e}),e}function re(e){var t={resolve:void 0,reject:void 0};return t.promise=new B(function(e,r){t.resolve=e,t.reject=r},e),t}function ne(e,t,r){return h(e)?c(t)?B.all(e,r).then(function(e){for(var n=e.length,i=new Array(n),a=0;a<n;a++)i[a]=t(e[a]);return B.all(i,r)}):B.reject(new TypeError("RSVP.map expects a function as a second argument"),r):B.reject(new TypeError("RSVP.map must be called with an array"),r)}function ie(e,t){return B.resolve(e,t)}function ae(e,t){return B.reject(e,t)}function oe(e,t){return B.all(e,t)}function se(e,t,r){return h(e)||f(e)&&void 0!==e.then?c(t)?(h(e)?oe(e,r):function(e,t){return B.resolve(e,t).then(function(e){return oe(e,t)})}(e,r)).then(function(e){for(var n=e.length,i=new Array(n),a=0;a<n;a++)i[a]=t(e[a]);return oe(i,r).then(function(t){for(var r=new Array(n),i=0,a=0;a<n;a++)t[a]&&(r[i]=e[a],i++);return r.length=i,r})}):B.reject(new TypeError("RSVP.filter expects function as a second argument"),r):B.reject(new TypeError("RSVP.filter must be called with an array or promise"),r)}$.prototype._makeResult=N;var le=0,ue=void 0;function ce(e,t){ge[le]=e,ge[le+1]=t,2===(le+=2)&&Te()}var fe="undefined"!=typeof window?window:void 0,he=fe||{},de=he.MutationObserver||he.WebKitMutationObserver,pe="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),me="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function ve(){return function(){return setTimeout(ye,1)}}var ge=new Array(1e3);function ye(){for(var e=0;e<le;e+=2){(0,ge[e])(ge[e+1]),ge[e]=void 0,ge[e+1]=void 0}le=0}var xe,be,we,_e,Me,Se,Te=void 0;pe?(Me=e.nextTick,Se=e.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(Se)&&"0"===Se[1]&&"10"===Se[2]&&(Me=n),Te=function(){return Me(ye)}):de?(be=0,we=new de(ye),_e=document.createTextNode(""),we.observe(_e,{characterData:!0}),Te=function(){return _e.data=be=++be%2}):me?((xe=new MessageChannel).port1.onmessage=ye,Te=function(){return xe.port2.postMessage(0)}):Te=void 0===fe?function(){try{var e=r(872);return void 0!==(ue=e.runOnLoop||e.runOnContext)?function(){ue(ye)}:ve()}catch(e){return ve()}}():ve();var Ee;if("object"==typeof self)self;else{if("object"!=typeof i)throw new Error("no global: `self` or `global` found");i}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}l.async=ce,l.after=function(e){return setTimeout(e,0)};var Ae=ie,Ce=function(e,t){return l.async(e,t)};function Re(){l.on.apply(l,arguments)}function Ie(){l.off.apply(l,arguments)}if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var Oe=window.__PROMISE_INSTRUMENTATION__;for(var Le in u("instrument",!0),Oe)Oe.hasOwnProperty(Le)&&Re(Le,Oe[Le])}var De=(Pe(Ee={asap:ce,cast:Ae,Promise:B,EventTarget:s,all:X,allSettled:Y,race:Z,hash:K,hashSettled:ee,rethrow:te,defer:re,denodeify:H,configure:u,on:Re,off:Ie,resolve:ie,reject:ae,map:ne},"async",Ce),Pe(Ee,"filter",se),Ee);t.default=De}.call(t,r(88),r(251).setImmediate,r(49))},function(e,t,r){var n=r(57),i=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=o),a(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){var n=r(57).Buffer,i=n.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var a=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!i(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=l;break;default:return void(this.write=o)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};function o(e){return e.toString(this.encoding)}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function l(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}a.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var i;n=(t+=e.toString(this.encoding,0,n)).length-1;if((i=t.charCodeAt(n))>=55296&&i<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,n)}return t},a.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},a.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},function(e,t,r){var n=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(n.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(n.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(849),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t){(function(){t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},function(e,t,r){(function(){var t,n,i,a,o,s,l,u,c,f,h,d,p,m={}.hasOwnProperty;l=r(171),u=r(172),t=r(165),n=r(166),c=r(173),h=r(175),d=r(176),f=r(174),i=r(167),a=r(168),o=r(169),s=r(170),p=r(383),e.exports=function(e){function r(e){r.__super__.constructor.call(this,e)}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,p),r.prototype.document=function(e){var t,r,i,a,o;for(this.textispresent=!1,a="",r=0,i=(o=e.children).length;r<i;r++)t=o[r],a+=function(){switch(!1){case!(t instanceof l):return this.declaration(t);case!(t instanceof u):return this.docType(t);case!(t instanceof n):return this.comment(t);case!(t instanceof f):return this.processingInstruction(t);default:return this.element(t,0)}}.call(this);return this.pretty&&a.slice(-this.newline.length)===this.newline&&(a=a.slice(0,-this.newline.length)),a},r.prototype.attribute=function(e){return" "+e.name+'="'+e.value+'"'},r.prototype.cdata=function(e,t){return this.space(t)+"<![CDATA["+e.text+"]]>"+this.newline},r.prototype.comment=function(e,t){return this.space(t)+"\x3c!-- "+e.text+" --\x3e"+this.newline},r.prototype.declaration=function(e,t){var r;return r=this.space(t),r+='<?xml version="'+e.version+'"',null!=e.encoding&&(r+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(r+=' standalone="'+e.standalone+'"'),r+=this.spacebeforeslash+"?>",r+=this.newline},r.prototype.docType=function(e,r){var l,u,c,h,d;if(r||(r=0),h=this.space(r),h+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?h+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(h+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(h+=" [",h+=this.newline,u=0,c=(d=e.children).length;u<c;u++)l=d[u],h+=function(){switch(!1){case!(l instanceof i):return this.dtdAttList(l,r+1);case!(l instanceof a):return this.dtdElement(l,r+1);case!(l instanceof o):return this.dtdEntity(l,r+1);case!(l instanceof s):return this.dtdNotation(l,r+1);case!(l instanceof t):return this.cdata(l,r+1);case!(l instanceof n):return this.comment(l,r+1);case!(l instanceof f):return this.processingInstruction(l,r+1);default:throw new Error("Unknown DTD node type: "+l.constructor.name)}}.call(this);h+="]"}return h+=this.spacebeforeslash+">",h+=this.newline},r.prototype.element=function(e,r){var i,a,o,s,l,u,p,v,g,y,x,b,w;for(p in r||(r=0),w=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),v="",v+=(b=this.space(r))+"<"+e.name,g=e.attributes)m.call(g,p)&&(i=g[p],v+=this.attribute(i));if(0===e.children.length||e.children.every(function(e){return""===e.value}))this.allowEmpty?v+="></"+e.name+">"+this.newline:v+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&1===e.children.length&&null!=e.children[0].value)v+=">",v+=e.children[0].value,v+="</"+e.name+">"+this.newline;else{if(this.dontprettytextnodes)for(o=0,l=(y=e.children).length;o<l;o++)if(null!=(a=y[o]).value){this.textispresent++,w=!0;break}for(this.textispresent&&(this.newline="",this.pretty=!1,b=this.space(r)),v+=">"+this.newline,s=0,u=(x=e.children).length;s<u;s++)a=x[s],v+=function(){switch(!1){case!(a instanceof t):return this.cdata(a,r+1);case!(a instanceof n):return this.comment(a,r+1);case!(a instanceof c):return this.element(a,r+1);case!(a instanceof h):return this.raw(a,r+1);case!(a instanceof d):return this.text(a,r+1);case!(a instanceof f):return this.processingInstruction(a,r+1);default:throw new Error("Unknown XML node type: "+a.constructor.name)}}.call(this);w&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),v+=b+"</"+e.name+">"+this.newline}return v},r.prototype.processingInstruction=function(e,t){var r;return r=this.space(t)+"<?"+e.target,e.value&&(r+=" "+e.value),r+=this.spacebeforeslash+"?>"+this.newline},r.prototype.raw=function(e,t){return this.space(t)+e.value+this.newline},r.prototype.text=function(e,t){return this.space(t)+e.value+this.newline},r.prototype.dtdAttList=function(e,t){var r;return r=this.space(t)+"<!ATTLIST "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(r+=" "+e.defaultValueType),e.defaultValue&&(r+=' "'+e.defaultValue+'"'),r+=this.spacebeforeslash+">"+this.newline},r.prototype.dtdElement=function(e,t){return this.space(t)+"<!ELEMENT "+e.name+" "+e.value+this.spacebeforeslash+">"+this.newline},r.prototype.dtdEntity=function(e,t){var r;return r=this.space(t)+"<!ENTITY",e.pe&&(r+=" %"),r+=" "+e.name,e.value?r+=' "'+e.value+'"':(e.pubID&&e.sysID?r+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(r+=' SYSTEM "'+e.sysID+'"'),e.nData&&(r+=" NDATA "+e.nData)),r+=this.spacebeforeslash+">"+this.newline},r.prototype.dtdNotation=function(e,t){var r;return r=this.space(t)+"<!NOTATION "+e.name,e.pubID&&e.sysID?r+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?r+=' PUBLIC "'+e.pubID+'"':e.sysID&&(r+=' SYSTEM "'+e.sysID+'"'),r+=this.spacebeforeslash+">"+this.newline},r.prototype.openNode=function(e,t){var r,n,i,a;if(t||(t=0),e instanceof c){for(n in i=this.space(t)+"<"+e.name,a=e.attributes)m.call(a,n)&&(r=a[n],i+=this.attribute(r));return i+=(e.children?">":"/>")+this.newline}return i=this.space(t)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),i+=(e.children?" [":">")+this.newline},r.prototype.closeNode=function(e,t){switch(t||(t=0),!1){case!(e instanceof c):return this.space(t)+"</"+e.name+">"+this.newline;case!(e instanceof u):return this.space(t)+"]>"+this.newline}},r}()}).call(this)},function(e,t){},function(e,t,r){"use strict";t.__esModule=!0;var n=o(r(656)),i=o(r(56)),a=o(r(33));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,a.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}},function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(33),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,a.default)(t))&&"function"!=typeof t?e:t}},function(e,t,r){var n=r(124),i=r(125),a=r(75),o=r(220),s=r(66),l=r(326),u=Object.getOwnPropertyDescriptor;t.f=r(52)?u:function(e,t){if(e=a(e),t=o(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=new a.default(e),r=new Uint32Array(t.numTriangles+1),s=1;s<r.length;s++)r[s]=r[s-1]+3;var l={newFaceRangeOffsets:r,triangulation:t};return(0,o.default)(e,function(e,t,r){var a=r.newFaceRangeOffsets,o=r.triangulation,s=new i.default(3*o.numTriangles);o.translateIndices(e.faceValueIndices,s);var l=s.data;return new n.default({faceRangeOffsets:a,faceValueIndices:l,values:e.values})},l).topologyChanged()};var n=s(r(7)),i=s(r(190)),a=s(r(285)),o=s(r(192));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){var n=r(66),i=r(94),a=r(216)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t){!function(){"use strict";var t,r={version:"6.4.2.2",use_lines:!0,use_xyz:!1},n=!1;if(void 0!==e&&e.exports?(e.exports=r,n=!0):"undefined"!=typeof document?window.ClipperLib=r:self.ClipperLib=r,n){i="chrome";t="Netscape"}else{var i=navigator.userAgent.toString().toLowerCase();t=navigator.appName}var a,o={};-1!=i.indexOf("chrome")&&-1==i.indexOf("chromium")?o.chrome=1:o.chrome=0,-1!=i.indexOf("chromium")?o.chromium=1:o.chromium=0,-1!=i.indexOf("safari")&&-1==i.indexOf("chrome")&&-1==i.indexOf("chromium")?o.safari=1:o.safari=0,-1!=i.indexOf("firefox")?o.firefox=1:o.firefox=0,-1!=i.indexOf("firefox/17")?o.firefox17=1:o.firefox17=0,-1!=i.indexOf("firefox/15")?o.firefox15=1:o.firefox15=0,-1!=i.indexOf("firefox/3")?o.firefox3=1:o.firefox3=0,-1!=i.indexOf("opera")?o.opera=1:o.opera=0,-1!=i.indexOf("msie 10")?o.msie10=1:o.msie10=0,-1!=i.indexOf("msie 9")?o.msie9=1:o.msie9=0,-1!=i.indexOf("msie 8")?o.msie8=1:o.msie8=0,-1!=i.indexOf("msie 7")?o.msie7=1:o.msie7=0,-1!=i.indexOf("msie ")?o.msie=1:o.msie=0,r.biginteger_used=null;function s(e,t,n){r.biginteger_used=1,null!=e&&("number"==typeof e&&void 0===t?this.fromInt(e):"number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function l(){return new s(null,void 0,void 0)}"Microsoft Internet Explorer"==t?(s.prototype.am=function(e,t,r,n,i,a){for(var o=32767&t,s=t>>15;--a>=0;){var l=32767&this[e],u=this[e++]>>15,c=s*l+u*o;i=((l=o*l+((32767&c)<<15)+r[n]+(1073741823&i))>>>30)+(c>>>15)+s*u+(i>>>30),r[n++]=1073741823&l}return i},a=30):"Netscape"!=t?(s.prototype.am=function(e,t,r,n,i,a){for(;--a>=0;){var o=t*this[e++]+r[n]+i;i=Math.floor(o/67108864),r[n++]=67108863&o}return i},a=26):(s.prototype.am=function(e,t,r,n,i,a){for(var o=16383&t,s=t>>14;--a>=0;){var l=16383&this[e],u=this[e++]>>14,c=s*l+u*o;i=((l=o*l+((16383&c)<<14)+r[n]+i)>>28)+(c>>14)+s*u,r[n++]=268435455&l}return i},a=28),s.prototype.DB=a,s.prototype.DM=(1<<a)-1,s.prototype.DV=1<<a;s.prototype.FV=Math.pow(2,52),s.prototype.F1=52-a,s.prototype.F2=2*a-52;var u,c,f="0123456789abcdefghijklmnopqrstuvwxyz",h=new Array;for(u="0".charCodeAt(0),c=0;c<=9;++c)h[u++]=c;for(u="a".charCodeAt(0),c=10;c<36;++c)h[u++]=c;for(u="A".charCodeAt(0),c=10;c<36;++c)h[u++]=c;function d(e){return f.charAt(e)}function p(e,t){var r=h[e.charCodeAt(t)];return null==r?-1:r}function m(e){var t=l();return t.fromInt(e),t}function v(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function g(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function x(e,t){return e&t}function b(e,t){return e|t}function w(e,t){return e^t}function _(e,t){return e&~t}function M(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function S(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function T(){}function E(e){return e}function P(e){this.r2=l(),this.q3=l(),s.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}g.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},g.prototype.revert=function(e){return e},g.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},g.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},g.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=l();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(s.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=l();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},s.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},s.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},s.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var o=8==r?255&e[n]:p(e,n);o<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==a?this[this.t++]=o:a+r>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},s.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},s.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},s.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,a=(1<<i)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+o+1]=this[r]>>i|s,s=(this[r]&a)<<n;for(r=o-1;r>=0;--r)t[r]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},s.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t[0]=this[r]>>n;for(var o=r+1;o<this.t;++o)t[o-r-1]|=(this[o]&a)<<i,t[o-r]=this[o]>>n;n>0&&(t[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}},s.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},s.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+r.t]=r.am(0,n[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&s.ZERO.subTo(t,t)},s.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},s.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=l());var a=l(),o=this.s,u=e.s,c=this.DB-v(n[n.t-1]);c>0?(n.lShiftTo(c,a),i.lShiftTo(c,r)):(n.copyTo(a),i.copyTo(r));var f=a.t,h=a[f-1];if(0!=h){var d=h*(1<<this.F1)+(f>1?a[f-2]>>this.F2:0),p=this.FV/d,m=(1<<this.F1)/d,g=1<<this.F2,y=r.t,x=y-f,b=null==t?l():t;for(a.dlShiftTo(x,b),r.compareTo(b)>=0&&(r[r.t++]=1,r.subTo(b,r)),s.ONE.dlShiftTo(f,b),b.subTo(a,a);a.t<f;)a[a.t++]=0;for(;--x>=0;){var w=r[--y]==h?this.DM:Math.floor(r[y]*p+(r[y-1]+g)*m);if((r[y]+=a.am(0,w,r,x,0,f))<w)for(a.dlShiftTo(x,b),r.subTo(b,r);r[y]<--w;)r.subTo(b,r)}null!=t&&(r.drShiftTo(f,t),o!=u&&s.ZERO.subTo(t,t)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&s.ZERO.subTo(r,r)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},s.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},s.prototype.exp=function(e,t){if(e>4294967295||e<1)return s.ONE;var r=l(),n=l(),i=t.convert(this),a=v(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)},s.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,a="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(r=this[o]>>s)>0&&(i=!0,a=d(r));o>=0;)s<t?(r=(this[o]&(1<<s)-1)<<t-s,r|=this[--o]>>(s+=this.DB-t)):(r=this[o]>>(s-=t)&n,s<=0&&(s+=this.DB,--o)),r>0&&(i=!0),i&&(a+=d(r));return i?a:"0"},s.prototype.negate=function(){var e=l();return s.ZERO.subTo(this,e),e},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+v(this[this.t-1]^this.s&this.DM)},s.prototype.mod=function(e){var t=l();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(s.ZERO)>0&&e.subTo(t,t),t},s.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new g(t):new y(t),this.exp(e,r)},s.ZERO=m(0),s.ONE=m(1),T.prototype.convert=E,T.prototype.revert=E,T.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},T.prototype.sqrTo=function(e,t){e.squareTo(t)},P.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=l();return e.copyTo(t),this.reduce(t),t},P.prototype.revert=function(e){return e},P.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},P.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},P.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var A=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],C=(1<<26)/A[A.length-1];s.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},s.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=m(r),i=l(),a=l(),o="";for(this.divRemTo(n,i,a);i.signum()>0;)o=(r+a.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,a);return a.intValue().toString(e)+o},s.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,o=0,l=0;l<e.length;++l){var u=p(e,l);u<0?"-"==e.charAt(l)&&0==this.signum()&&(i=!0):(o=t*o+u,++a>=r&&(this.dMultiply(n),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),i&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(s.ONE.shiftLeft(e-1),b,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(s.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},s.prototype.bitwiseTo=function(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},s.prototype.changeBit=function(e,t){var r=s.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},s.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},s.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},s.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()},s.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},s.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},s.prototype.millerRabin=function(e){var t=this.subtract(s.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);(e=e+1>>1)>A.length&&(e=A.length);for(var i=l(),a=0;a<e;++a){i.fromInt(A[Math.floor(Math.random()*A.length)]);var o=i.modPow(n,this);if(0!=o.compareTo(s.ONE)&&0!=o.compareTo(t)){for(var u=1;u++<r&&0!=o.compareTo(t);)if(0==(o=o.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=o.compareTo(t))return!1}}return!0},s.prototype.clone=function(){var e=l();return this.copyTo(e),e},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},s.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},s.prototype.equals=function(e){return 0==this.compareTo(e)},s.prototype.min=function(e){return this.compareTo(e)<0?this:e},s.prototype.max=function(e){return this.compareTo(e)>0?this:e},s.prototype.and=function(e){var t=l();return this.bitwiseTo(e,x,t),t},s.prototype.or=function(e){var t=l();return this.bitwiseTo(e,b,t),t},s.prototype.xor=function(e){var t=l();return this.bitwiseTo(e,w,t),t},s.prototype.andNot=function(e){var t=l();return this.bitwiseTo(e,_,t),t},s.prototype.not=function(){for(var e=l(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},s.prototype.shiftLeft=function(e){var t=l();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},s.prototype.shiftRight=function(e){var t=l();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},s.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+M(this[e]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=S(this[r]^t);return e},s.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},s.prototype.setBit=function(e){return this.changeBit(e,b)},s.prototype.clearBit=function(e){return this.changeBit(e,_)},s.prototype.flipBit=function(e){return this.changeBit(e,w)},s.prototype.add=function(e){var t=l();return this.addTo(e,t),t},s.prototype.subtract=function(e){var t=l();return this.subTo(e,t),t},s.prototype.multiply=function(e){var t=l();return this.multiplyTo(e,t),t},s.prototype.divide=function(e){var t=l();return this.divRemTo(e,t,null),t},s.prototype.remainder=function(e){var t=l();return this.divRemTo(e,null,t),t},s.prototype.divideAndRemainder=function(e){var t=l(),r=l();return this.divRemTo(e,t,r),new Array(t,r)},s.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),a=m(1);if(i<=0)return a;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new g(t):t.isEven()?new P(t):new y(t);var o=new Array,s=3,u=r-1,c=(1<<r)-1;if(o[1]=n.convert(this),r>1){var f=l();for(n.sqrTo(o[1],f);s<=c;)o[s]=l(),n.mulTo(f,o[s-2],o[s]),s+=2}var h,d,p=e.t-1,x=!0,b=l();for(i=v(e[p])-1;p>=0;){for(i>=u?h=e[p]>>i-u&c:(h=(e[p]&(1<<i+1)-1)<<u-i,p>0&&(h|=e[p-1]>>this.DB+i-u)),s=r;0==(1&h);)h>>=1,--s;if((i-=s)<0&&(i+=this.DB,--p),x)o[h].copyTo(a),x=!1;else{for(;s>1;)n.sqrTo(a,b),n.sqrTo(b,a),s-=2;s>0?n.sqrTo(a,b):(d=a,a=b,b=d),n.mulTo(b,o[h],a)}for(;p>=0&&0==(e[p]&1<<i);)n.sqrTo(a,b),d=a,a=b,b=d,--i<0&&(i=this.DB-1,--p)}return n.revert(a)},s.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return s.ZERO;for(var r=e.clone(),n=this.clone(),i=m(1),a=m(0),o=m(0),l=m(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&l.isEven()||(o.addTo(this,o),l.subTo(e,l)),o.rShiftTo(1,o)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),a.subTo(l,a)):(n.subTo(r,n),t&&o.subTo(i,o),l.subTo(a,l))}return 0!=n.compareTo(s.ONE)?s.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l},s.prototype.pow=function(e){return this.exp(e,new T)},s.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r},s.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=A[A.length-1]){for(t=0;t<A.length;++t)if(r[0]==A[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<A.length;){for(var n=A[t],i=t+1;i<A.length&&n<C;)n*=A[i++];for(n=r.modInt(n);t<i;)if(n%A[t++]==0)return!1}return r.millerRabin(e)},s.prototype.square=function(){var e=l();return this.squareTo(e),e};var R=s;R.prototype.IsNegative=function(){return-1==this.compareTo(R.ZERO)},R.op_Equality=function(e,t){return 0==e.compareTo(t)},R.op_Inequality=function(e,t){return 0!=e.compareTo(t)},R.op_GreaterThan=function(e,t){return e.compareTo(t)>0},R.op_LessThan=function(e,t){return e.compareTo(t)<0},R.op_Addition=function(e,t){return new R(e,void 0,void 0).add(new R(t,void 0,void 0))},R.op_Subtraction=function(e,t){return new R(e,void 0,void 0).subtract(new R(t,void 0,void 0))},R.Int128Mul=function(e,t){return new R(e,void 0,void 0).multiply(new R(t,void 0,void 0))},R.op_Division=function(e,t){return e.divide(t)},R.prototype.ToDouble=function(){return parseFloat(this.toString())};var I=function(e,t){var r;if(void 0===Object.getOwnPropertyNames){for(r in t.prototype)void 0!==e.prototype[r]&&e.prototype[r]!==Object.prototype[r]||(e.prototype[r]=t.prototype[r]);for(r in t)void 0===e[r]&&(e[r]=t[r]);e.$baseCtor=t}else{for(var n=Object.getOwnPropertyNames(t.prototype),i=0;i<n.length;i++)void 0===Object.getOwnPropertyDescriptor(e.prototype,n[i])&&Object.defineProperty(e.prototype,n[i],Object.getOwnPropertyDescriptor(t.prototype,n[i]));for(r in t)void 0===e[r]&&(e[r]=t[r]);e.$baseCtor=t}};r.Path=function(){return[]},r.Path.prototype.push=Array.prototype.push,r.Paths=function(){return[]},r.Paths.prototype.push=Array.prototype.push,r.DoublePoint=function(){var e=arguments;this.X=0,this.Y=0,1===e.length?(this.X=e[0].X,this.Y=e[0].Y):2===e.length&&(this.X=e[0],this.Y=e[1])},r.DoublePoint0=function(){this.X=0,this.Y=0},r.DoublePoint0.prototype=r.DoublePoint.prototype,r.DoublePoint1=function(e){this.X=e.X,this.Y=e.Y},r.DoublePoint1.prototype=r.DoublePoint.prototype,r.DoublePoint2=function(e,t){this.X=e,this.Y=t},r.DoublePoint2.prototype=r.DoublePoint.prototype,r.PolyNode=function(){this.m_Parent=null,this.m_polygon=new r.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},r.PolyNode.prototype.IsHoleNode=function(){for(var e=!0,t=this.m_Parent;null!==t;)e=!e,t=t.m_Parent;return e},r.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},r.PolyNode.prototype.Contour=function(){return this.m_polygon},r.PolyNode.prototype.AddChild=function(e){var t=this.m_Childs.length;this.m_Childs.push(e),e.m_Parent=this,e.m_Index=t},r.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},r.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},r.PolyNode.prototype.Childs=function(){return this.m_Childs},r.PolyNode.prototype.Parent=function(){return this.m_Parent},r.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},r.PolyTree=function(){this.m_AllPolys=[],r.PolyNode.call(this)},r.PolyTree.prototype.Clear=function(){for(var e=0,t=this.m_AllPolys.length;e<t;e++)this.m_AllPolys[e]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},r.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},r.PolyTree.prototype.Total=function(){var e=this.m_AllPolys.length;return e>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&e--,e},I(r.PolyTree,r.PolyNode),r.Math_Abs_Int64=r.Math_Abs_Int32=r.Math_Abs_Double=function(e){return Math.abs(e)},r.Math_Max_Int32_Int32=function(e,t){return Math.max(e,t)},o.msie||o.opera||o.safari?r.Cast_Int32=function(e){return 0|e}:r.Cast_Int32=function(e){return~~e},void 0===Number.toInteger&&(Number.toInteger=null),o.chrome?r.Cast_Int64=function(e){return e<-2147483648||e>2147483647?e<0?Math.ceil(e):Math.floor(e):~~e}:o.firefox&&"function"==typeof Number.toInteger?r.Cast_Int64=function(e){return Number.toInteger(e)}:o.msie7||o.msie8?r.Cast_Int64=function(e){return parseInt(e,10)}:o.msie?r.Cast_Int64=function(e){return e<-2147483648||e>2147483647?e<0?Math.ceil(e):Math.floor(e):0|e}:r.Cast_Int64=function(e){return e<0?Math.ceil(e):Math.floor(e)},r.Clear=function(e){e.length=0},r.PI=3.141592653589793,r.PI2=6.283185307179586,r.IntPoint=function(){var e=arguments,t=e.length;if(this.X=0,this.Y=0,r.use_xyz)if(this.Z=0,3===t)this.X=e[0],this.Y=e[1],this.Z=e[2];else if(2===t)this.X=e[0],this.Y=e[1],this.Z=0;else if(1===t)if(e[0]instanceof r.DoublePoint){var n=e[0];this.X=r.Clipper.Round(n.X),this.Y=r.Clipper.Round(n.Y),this.Z=0}else{void 0===(i=e[0]).Z&&(i.Z=0),this.X=i.X,this.Y=i.Y,this.Z=i.Z}else this.X=0,this.Y=0,this.Z=0;else if(2===t)this.X=e[0],this.Y=e[1];else if(1===t)if(e[0]instanceof r.DoublePoint){n=e[0];this.X=r.Clipper.Round(n.X),this.Y=r.Clipper.Round(n.Y)}else{var i=e[0];this.X=i.X,this.Y=i.Y}else this.X=0,this.Y=0},r.IntPoint.op_Equality=function(e,t){return e.X===t.X&&e.Y===t.Y},r.IntPoint.op_Inequality=function(e,t){return e.X!==t.X||e.Y!==t.Y},r.IntPoint0=function(){this.X=0,this.Y=0,r.use_xyz&&(this.Z=0)},r.IntPoint0.prototype=r.IntPoint.prototype,r.IntPoint1=function(e){this.X=e.X,this.Y=e.Y,r.use_xyz&&(void 0===e.Z?this.Z=0:this.Z=e.Z)},r.IntPoint1.prototype=r.IntPoint.prototype,r.IntPoint1dp=function(e){this.X=r.Clipper.Round(e.X),this.Y=r.Clipper.Round(e.Y),r.use_xyz&&(this.Z=0)},r.IntPoint1dp.prototype=r.IntPoint.prototype,r.IntPoint2=function(e,t,n){this.X=e,this.Y=t,r.use_xyz&&(this.Z=void 0===n?0:n)},r.IntPoint2.prototype=r.IntPoint.prototype,r.IntRect=function(){var e=arguments,t=e.length;if(4===t)this.left=e[0],this.top=e[1],this.right=e[2],this.bottom=e[3];else if(1===t){var r=e[0];this.left=r.left,this.top=r.top,this.right=r.right,this.bottom=r.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},r.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},r.IntRect0.prototype=r.IntRect.prototype,r.IntRect1=function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom},r.IntRect1.prototype=r.IntRect.prototype,r.IntRect4=function(e,t,r,n){this.left=e,this.top=t,this.right=r,this.bottom=n},r.IntRect4.prototype=r.IntRect.prototype,r.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},r.PolyType={ptSubject:0,ptClip:1},r.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},r.JoinType={jtSquare:0,jtRound:1,jtMiter:2},r.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},r.EdgeSide={esLeft:0,esRight:1},r.Direction={dRightToLeft:0,dLeftToRight:1},r.TEdge=function(){this.Bot=new r.IntPoint0,this.Curr=new r.IntPoint0,this.Top=new r.IntPoint0,this.Delta=new r.IntPoint0,this.Dx=0,this.PolyTyp=r.PolyType.ptSubject,this.Side=r.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},r.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new r.IntPoint0},r.MyIntersectNodeSort=function(){},r.MyIntersectNodeSort.Compare=function(e,t){var r=t.Pt.Y-e.Pt.Y;return r>0?1:r<0?-1:0},r.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},r.Scanbeam=function(){this.Y=0,this.Next=null},r.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},r.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},r.OutPt=function(){this.Idx=0,this.Pt=new r.IntPoint0,this.Next=null,this.Prev=null},r.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new r.IntPoint0},r.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},r.ClipperBase.horizontal=-9007199254740992,r.ClipperBase.Skip=-2,r.ClipperBase.Unassigned=-1,r.ClipperBase.tolerance=1e-20,r.ClipperBase.loRange=47453132,r.ClipperBase.hiRange=0xfffffffffffff,r.ClipperBase.near_zero=function(e){return e>-r.ClipperBase.tolerance&&e<r.ClipperBase.tolerance},r.ClipperBase.IsHorizontal=function(e){return 0===e.Delta.Y},r.ClipperBase.prototype.PointIsVertex=function(e,t){var n=t;do{if(r.IntPoint.op_Equality(n.Pt,e))return!0;n=n.Next}while(n!==t);return!1},r.ClipperBase.prototype.PointOnLineSegment=function(e,t,r,n){return n?e.X===t.X&&e.Y===t.Y||e.X===r.X&&e.Y===r.Y||e.X>t.X==e.X<r.X&&e.Y>t.Y==e.Y<r.Y&&R.op_Equality(R.Int128Mul(e.X-t.X,r.Y-t.Y),R.Int128Mul(r.X-t.X,e.Y-t.Y)):e.X===t.X&&e.Y===t.Y||e.X===r.X&&e.Y===r.Y||e.X>t.X==e.X<r.X&&e.Y>t.Y==e.Y<r.Y&&(e.X-t.X)*(r.Y-t.Y)==(r.X-t.X)*(e.Y-t.Y)},r.ClipperBase.prototype.PointOnPolygon=function(e,t,r){for(var n=t;;){if(this.PointOnLineSegment(e,n.Pt,n.Next.Pt,r))return!0;if((n=n.Next)===t)break}return!1},r.ClipperBase.prototype.SlopesEqual=r.ClipperBase.SlopesEqual=function(){var e,t,n,i,a,o,s=arguments,l=s.length;return 3===l?(e=s[0],t=s[1],s[2]?R.op_Equality(R.Int128Mul(e.Delta.Y,t.Delta.X),R.Int128Mul(e.Delta.X,t.Delta.Y)):r.Cast_Int64(e.Delta.Y*t.Delta.X)===r.Cast_Int64(e.Delta.X*t.Delta.Y)):4===l?(n=s[0],i=s[1],a=s[2],s[3]?R.op_Equality(R.Int128Mul(n.Y-i.Y,i.X-a.X),R.Int128Mul(n.X-i.X,i.Y-a.Y)):r.Cast_Int64((n.Y-i.Y)*(i.X-a.X))-r.Cast_Int64((n.X-i.X)*(i.Y-a.Y))==0):(n=s[0],i=s[1],a=s[2],o=s[3],s[4]?R.op_Equality(R.Int128Mul(n.Y-i.Y,a.X-o.X),R.Int128Mul(n.X-i.X,a.Y-o.Y)):r.Cast_Int64((n.Y-i.Y)*(a.X-o.X))-r.Cast_Int64((n.X-i.X)*(a.Y-o.Y))==0)},r.ClipperBase.SlopesEqual3=function(e,t,n){return n?R.op_Equality(R.Int128Mul(e.Delta.Y,t.Delta.X),R.Int128Mul(e.Delta.X,t.Delta.Y)):r.Cast_Int64(e.Delta.Y*t.Delta.X)===r.Cast_Int64(e.Delta.X*t.Delta.Y)},r.ClipperBase.SlopesEqual4=function(e,t,n,i){return i?R.op_Equality(R.Int128Mul(e.Y-t.Y,t.X-n.X),R.Int128Mul(e.X-t.X,t.Y-n.Y)):r.Cast_Int64((e.Y-t.Y)*(t.X-n.X))-r.Cast_Int64((e.X-t.X)*(t.Y-n.Y))==0},r.ClipperBase.SlopesEqual5=function(e,t,n,i,a){return a?R.op_Equality(R.Int128Mul(e.Y-t.Y,n.X-i.X),R.Int128Mul(e.X-t.X,n.Y-i.Y)):r.Cast_Int64((e.Y-t.Y)*(n.X-i.X))-r.Cast_Int64((e.X-t.X)*(n.Y-i.Y))==0},r.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var e=0,t=this.m_edges.length;e<t;++e){for(var n=0,i=this.m_edges[e].length;n<i;++n)this.m_edges[e][n]=null;r.Clear(this.m_edges[e])}r.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},r.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var e=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=e}this.m_CurrentLM=null},r.ClipperBase.prototype.RangeTest=function(e,t){t.Value?(e.X>r.ClipperBase.hiRange||e.Y>r.ClipperBase.hiRange||-e.X>r.ClipperBase.hiRange||-e.Y>r.ClipperBase.hiRange)&&r.Error("Coordinate outside allowed range in RangeTest()."):(e.X>r.ClipperBase.loRange||e.Y>r.ClipperBase.loRange||-e.X>r.ClipperBase.loRange||-e.Y>r.ClipperBase.loRange)&&(t.Value=!0,this.RangeTest(e,t))},r.ClipperBase.prototype.InitEdge=function(e,t,n,i){e.Next=t,e.Prev=n,e.Curr.X=i.X,e.Curr.Y=i.Y,r.use_xyz&&(e.Curr.Z=i.Z),e.OutIdx=-1},r.ClipperBase.prototype.InitEdge2=function(e,t){e.Curr.Y>=e.Next.Curr.Y?(e.Bot.X=e.Curr.X,e.Bot.Y=e.Curr.Y,r.use_xyz&&(e.Bot.Z=e.Curr.Z),e.Top.X=e.Next.Curr.X,e.Top.Y=e.Next.Curr.Y,r.use_xyz&&(e.Top.Z=e.Next.Curr.Z)):(e.Top.X=e.Curr.X,e.Top.Y=e.Curr.Y,r.use_xyz&&(e.Top.Z=e.Curr.Z),e.Bot.X=e.Next.Curr.X,e.Bot.Y=e.Next.Curr.Y,r.use_xyz&&(e.Bot.Z=e.Next.Curr.Z)),this.SetDx(e),e.PolyTyp=t},r.ClipperBase.prototype.FindNextLocMin=function(e){for(var t;;){for(;r.IntPoint.op_Inequality(e.Bot,e.Prev.Bot)||r.IntPoint.op_Equality(e.Curr,e.Top);)e=e.Next;if(e.Dx!==r.ClipperBase.horizontal&&e.Prev.Dx!==r.ClipperBase.horizontal)break;for(;e.Prev.Dx===r.ClipperBase.horizontal;)e=e.Prev;for(t=e;e.Dx===r.ClipperBase.horizontal;)e=e.Next;if(e.Top.Y!==e.Prev.Bot.Y){t.Prev.Bot.X<e.Bot.X&&(e=t);break}}return e},r.ClipperBase.prototype.ProcessBound=function(e,t){var n,i,a=e;if(a.OutIdx===r.ClipperBase.Skip){if(e=a,t){for(;e.Top.Y===e.Next.Bot.Y;)e=e.Next;for(;e!==a&&e.Dx===r.ClipperBase.horizontal;)e=e.Prev}else{for(;e.Top.Y===e.Prev.Bot.Y;)e=e.Prev;for(;e!==a&&e.Dx===r.ClipperBase.horizontal;)e=e.Next}if(e===a)a=t?e.Next:e.Prev;else{e=t?a.Next:a.Prev;var o=new r.LocalMinima;o.Next=null,o.Y=e.Bot.Y,o.LeftBound=null,o.RightBound=e,e.WindDelta=0,a=this.ProcessBound(e,t),this.InsertLocalMinima(o)}return a}if(e.Dx===r.ClipperBase.horizontal&&((n=t?e.Prev:e.Next).Dx===r.ClipperBase.horizontal?n.Bot.X!==e.Bot.X&&n.Top.X!==e.Bot.X&&this.ReverseHorizontal(e):n.Bot.X!==e.Bot.X&&this.ReverseHorizontal(e)),n=e,t){for(;a.Top.Y===a.Next.Bot.Y&&a.Next.OutIdx!==r.ClipperBase.Skip;)a=a.Next;if(a.Dx===r.ClipperBase.horizontal&&a.Next.OutIdx!==r.ClipperBase.Skip){for(i=a;i.Prev.Dx===r.ClipperBase.horizontal;)i=i.Prev;i.Prev.Top.X>a.Next.Top.X&&(a=i.Prev)}for(;e!==a;)e.NextInLML=e.Next,e.Dx===r.ClipperBase.horizontal&&e!==n&&e.Bot.X!==e.Prev.Top.X&&this.ReverseHorizontal(e),e=e.Next;e.Dx===r.ClipperBase.horizontal&&e!==n&&e.Bot.X!==e.Prev.Top.X&&this.ReverseHorizontal(e),a=a.Next}else{for(;a.Top.Y===a.Prev.Bot.Y&&a.Prev.OutIdx!==r.ClipperBase.Skip;)a=a.Prev;if(a.Dx===r.ClipperBase.horizontal&&a.Prev.OutIdx!==r.ClipperBase.Skip){for(i=a;i.Next.Dx===r.ClipperBase.horizontal;)i=i.Next;(i.Next.Top.X===a.Prev.Top.X||i.Next.Top.X>a.Prev.Top.X)&&(a=i.Next)}for(;e!==a;)e.NextInLML=e.Prev,e.Dx===r.ClipperBase.horizontal&&e!==n&&e.Bot.X!==e.Next.Top.X&&this.ReverseHorizontal(e),e=e.Prev;e.Dx===r.ClipperBase.horizontal&&e!==n&&e.Bot.X!==e.Next.Top.X&&this.ReverseHorizontal(e),a=a.Prev}return a},r.ClipperBase.prototype.AddPath=function(e,t,n){r.use_lines?n||t!==r.PolyType.ptClip||r.Error("AddPath: Open paths must be subject."):n||r.Error("AddPath: Open paths have been disabled.");var i=e.length-1;if(n)for(;i>0&&r.IntPoint.op_Equality(e[i],e[0]);)--i;for(;i>0&&r.IntPoint.op_Equality(e[i],e[i-1]);)--i;if(n&&i<2||!n&&i<1)return!1;for(var a=new Array,o=0;o<=i;o++)a.push(new r.TEdge);var s=!0;a[1].Curr.X=e[1].X,a[1].Curr.Y=e[1].Y,r.use_xyz&&(a[1].Curr.Z=e[1].Z);var l={Value:this.m_UseFullRange};this.RangeTest(e[0],l),this.m_UseFullRange=l.Value,l.Value=this.m_UseFullRange,this.RangeTest(e[i],l),this.m_UseFullRange=l.Value,this.InitEdge(a[0],a[1],a[i],e[0]),this.InitEdge(a[i],a[0],a[i-1],e[i]);for(o=i-1;o>=1;--o)l.Value=this.m_UseFullRange,this.RangeTest(e[o],l),this.m_UseFullRange=l.Value,this.InitEdge(a[o],a[o+1],a[o-1],e[o]);for(var u,c=a[0],f=c,h=c;;)if(f.Curr!==f.Next.Curr||!n&&f.Next===c){if(f.Prev===f.Next)break;if(!n||!r.ClipperBase.SlopesEqual4(f.Prev.Curr,f.Curr,f.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(f.Prev.Curr,f.Curr,f.Next.Curr)){if((f=f.Next)===h||!n&&f.Next===c)break}else f===c&&(c=f.Next),h=f=(f=this.RemoveEdge(f)).Prev}else{if(f===f.Next)break;f===c&&(c=f.Next),h=f=this.RemoveEdge(f)}if(!n&&f===f.Next||n&&f.Prev===f.Next)return!1;n||(this.m_HasOpenPaths=!0,c.Prev.OutIdx=r.ClipperBase.Skip),f=c;do{this.InitEdge2(f,t),f=f.Next,s&&f.Curr.Y!==c.Curr.Y&&(s=!1)}while(f!==c);if(s){if(n)return!1;for(f.Prev.OutIdx=r.ClipperBase.Skip,(p=new r.LocalMinima).Next=null,p.Y=f.Bot.Y,p.LeftBound=null,p.RightBound=f,p.RightBound.Side=r.EdgeSide.esRight,p.RightBound.WindDelta=0;f.Bot.X!==f.Prev.Top.X&&this.ReverseHorizontal(f),f.Next.OutIdx!==r.ClipperBase.Skip;)f.NextInLML=f.Next,f=f.Next;return this.InsertLocalMinima(p),this.m_edges.push(a),!0}this.m_edges.push(a);var d=null;for(r.IntPoint.op_Equality(f.Prev.Bot,f.Prev.Top)&&(f=f.Next);(f=this.FindNextLocMin(f))!==d;){var p;null===d&&(d=f),(p=new r.LocalMinima).Next=null,p.Y=f.Bot.Y,f.Dx<f.Prev.Dx?(p.LeftBound=f.Prev,p.RightBound=f,u=!1):(p.LeftBound=f,p.RightBound=f.Prev,u=!0),p.LeftBound.Side=r.EdgeSide.esLeft,p.RightBound.Side=r.EdgeSide.esRight,n?p.LeftBound.Next===p.RightBound?p.LeftBound.WindDelta=-1:p.LeftBound.WindDelta=1:p.LeftBound.WindDelta=0,p.RightBound.WindDelta=-p.LeftBound.WindDelta,(f=this.ProcessBound(p.LeftBound,u)).OutIdx===r.ClipperBase.Skip&&(f=this.ProcessBound(f,u));var m=this.ProcessBound(p.RightBound,!u);m.OutIdx===r.ClipperBase.Skip&&(m=this.ProcessBound(m,!u)),p.LeftBound.OutIdx===r.ClipperBase.Skip?p.LeftBound=null:p.RightBound.OutIdx===r.ClipperBase.Skip&&(p.RightBound=null),this.InsertLocalMinima(p),u||(f=m)}return!0},r.ClipperBase.prototype.AddPaths=function(e,t,r){for(var n=!1,i=0,a=e.length;i<a;++i)this.AddPath(e[i],t,r)&&(n=!0);return n},r.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(e,t,n){return!(r.IntPoint.op_Equality(e,n)||r.IntPoint.op_Equality(e,t)||r.IntPoint.op_Equality(n,t))&&(e.X!==n.X?t.X>e.X==t.X<n.X:t.Y>e.Y==t.Y<n.Y)},r.ClipperBase.prototype.RemoveEdge=function(e){e.Prev.Next=e.Next,e.Next.Prev=e.Prev;var t=e.Next;return e.Prev=null,t},r.ClipperBase.prototype.SetDx=function(e){e.Delta.X=e.Top.X-e.Bot.X,e.Delta.Y=e.Top.Y-e.Bot.Y,0===e.Delta.Y?e.Dx=r.ClipperBase.horizontal:e.Dx=e.Delta.X/e.Delta.Y},r.ClipperBase.prototype.InsertLocalMinima=function(e){if(null===this.m_MinimaList)this.m_MinimaList=e;else if(e.Y>=this.m_MinimaList.Y)e.Next=this.m_MinimaList,this.m_MinimaList=e;else{for(var t=this.m_MinimaList;null!==t.Next&&e.Y<t.Next.Y;)t=t.Next;e.Next=t.Next,t.Next=e}},r.ClipperBase.prototype.PopLocalMinima=function(e,t){return t.v=this.m_CurrentLM,null!==this.m_CurrentLM&&this.m_CurrentLM.Y===e&&(this.m_CurrentLM=this.m_CurrentLM.Next,!0)},r.ClipperBase.prototype.ReverseHorizontal=function(e){var t=e.Top.X;e.Top.X=e.Bot.X,e.Bot.X=t,r.use_xyz&&(t=e.Top.Z,e.Top.Z=e.Bot.Z,e.Bot.Z=t)},r.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!==this.m_CurrentLM){this.m_Scanbeam=null;for(var e=this.m_MinimaList;null!==e;){this.InsertScanbeam(e.Y);var t=e.LeftBound;null!==t&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,r.use_xyz&&(t.Curr.Z=t.Bot.Z),t.OutIdx=r.ClipperBase.Unassigned),null!==(t=e.RightBound)&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,r.use_xyz&&(t.Curr.Z=t.Bot.Z),t.OutIdx=r.ClipperBase.Unassigned),e=e.Next}this.m_ActiveEdges=null}},r.ClipperBase.prototype.InsertScanbeam=function(e){if(null===this.m_Scanbeam)this.m_Scanbeam=new r.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=e;else if(e>this.m_Scanbeam.Y){var t=new r.Scanbeam;t.Y=e,t.Next=this.m_Scanbeam,this.m_Scanbeam=t}else{for(var n=this.m_Scanbeam;null!==n.Next&&e<=n.Next.Y;)n=n.Next;if(e===n.Y)return;var i=new r.Scanbeam;i.Y=e,i.Next=n.Next,n.Next=i}},r.ClipperBase.prototype.PopScanbeam=function(e){return null===this.m_Scanbeam?(e.v=0,!1):(e.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},r.ClipperBase.prototype.LocalMinimaPending=function(){return null!==this.m_CurrentLM},r.ClipperBase.prototype.CreateOutRec=function(){var e=new r.OutRec;return e.Idx=r.ClipperBase.Unassigned,e.IsHole=!1,e.IsOpen=!1,e.FirstLeft=null,e.Pts=null,e.BottomPt=null,e.PolyNode=null,this.m_PolyOuts.push(e),e.Idx=this.m_PolyOuts.length-1,e},r.ClipperBase.prototype.DisposeOutRec=function(e){var t=this.m_PolyOuts[e];t.Pts=null,t=null,this.m_PolyOuts[e]=null},r.ClipperBase.prototype.UpdateEdgeIntoAEL=function(e){null===e.NextInLML&&r.Error("UpdateEdgeIntoAEL: invalid call");var t=e.PrevInAEL,n=e.NextInAEL;return e.NextInLML.OutIdx=e.OutIdx,null!==t?t.NextInAEL=e.NextInLML:this.m_ActiveEdges=e.NextInLML,null!==n&&(n.PrevInAEL=e.NextInLML),e.NextInLML.Side=e.Side,e.NextInLML.WindDelta=e.WindDelta,e.NextInLML.WindCnt=e.WindCnt,e.NextInLML.WindCnt2=e.WindCnt2,(e=e.NextInLML).Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.PrevInAEL=t,e.NextInAEL=n,r.ClipperBase.IsHorizontal(e)||this.InsertScanbeam(e.Top.Y),e},r.ClipperBase.prototype.SwapPositionsInAEL=function(e,t){if(e.NextInAEL!==e.PrevInAEL&&t.NextInAEL!==t.PrevInAEL){if(e.NextInAEL===t){var r=t.NextInAEL;null!==r&&(r.PrevInAEL=e);var n=e.PrevInAEL;null!==n&&(n.NextInAEL=t),t.PrevInAEL=n,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=r}else if(t.NextInAEL===e){var i=e.NextInAEL;null!==i&&(i.PrevInAEL=t);var a=t.PrevInAEL;null!==a&&(a.NextInAEL=e),e.PrevInAEL=a,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i}else{var o=e.NextInAEL,s=e.PrevInAEL;e.NextInAEL=t.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=t.PrevInAEL,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e),t.NextInAEL=o,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=s,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t)}null===e.PrevInAEL?this.m_ActiveEdges=e:null===t.PrevInAEL&&(this.m_ActiveEdges=t)}},r.ClipperBase.prototype.DeleteFromAEL=function(e){var t=e.PrevInAEL,r=e.NextInAEL;null===t&&null===r&&e!==this.m_ActiveEdges||(null!==t?t.NextInAEL=r:this.m_ActiveEdges=r,null!==r&&(r.PrevInAEL=t),e.NextInAEL=null,e.PrevInAEL=null)},r.Clipper=function(e){void 0===e&&(e=0),this.m_PolyOuts=null,this.m_ClipType=r.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=r.PolyFillType.pftEvenOdd,this.m_SubjFillType=r.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,r.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=r.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&e),this.StrictlySimple=0!=(2&e),this.PreserveCollinear=0!=(4&e),r.use_xyz&&(this.ZFillFunction=null)},r.Clipper.ioReverseSolution=1,r.Clipper.ioStrictlySimple=2,r.Clipper.ioPreserveCollinear=4,r.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),r.ClipperBase.prototype.Clear.call(this))},r.Clipper.prototype.InsertMaxima=function(e){var t=new r.Maxima;if(t.X=e,null===this.m_Maxima)this.m_Maxima=t,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(e<this.m_Maxima.X)t.Next=this.m_Maxima,t.Prev=null,this.m_Maxima=t;else{for(var n=this.m_Maxima;null!==n.Next&&e>=n.Next.X;)n=n.Next;if(e===n.X)return;t.Next=n.Next,t.Prev=n,null!==n.Next&&(n.Next.Prev=t),n.Next=t}},r.Clipper.prototype.Execute=function(){var e=arguments,t=e.length,n=e[1]instanceof r.PolyTree;if(4===t&&!n){var i=e[0],a=e[1],o=e[2],s=e[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&r.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,r.Clear(a),this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=i,this.m_UsingPolyTree=!1;try{(u=this.ExecuteInternal())&&this.BuildResult(a)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return u}if(4===t&&n){i=e[0];var l=e[1];o=e[2],s=e[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=i,this.m_UsingPolyTree=!0;try{var u;(u=this.ExecuteInternal())&&this.BuildResult2(l)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return u}if(2===t&&!n){i=e[0],a=e[1];return this.Execute(i,a,r.PolyFillType.pftEvenOdd,r.PolyFillType.pftEvenOdd)}if(2===t&&n){i=e[0],l=e[1];return this.Execute(i,l,r.PolyFillType.pftEvenOdd,r.PolyFillType.pftEvenOdd)}},r.Clipper.prototype.FixHoleLinkage=function(e){if(null!==e.FirstLeft&&(e.IsHole===e.FirstLeft.IsHole||null===e.FirstLeft.Pts)){for(var t=e.FirstLeft;null!==t&&(t.IsHole===e.IsHole||null===t.Pts);)t=t.FirstLeft;e.FirstLeft=t}},r.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var e,t,r,n={},i={};if(!this.PopScanbeam(n))return!1;for(this.InsertLocalMinimaIntoAEL(n.v);this.PopScanbeam(i)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(i.v))return!1;this.ProcessEdgesAtTopOfScanbeam(i.v),n.v=i.v,this.InsertLocalMinimaIntoAEL(n.v)}for(t=0,r=this.m_PolyOuts.length;t<r;t++)null===(e=this.m_PolyOuts[t]).Pts||e.IsOpen||(e.IsHole^this.ReverseSolution)==this.Area$1(e)>0&&this.ReversePolyPtLinks(e.Pts);for(this.JoinCommonEdges(),t=0,r=this.m_PolyOuts.length;t<r;t++)null!==(e=this.m_PolyOuts[t]).Pts&&(e.IsOpen?this.FixupOutPolyline(e):this.FixupOutPolygon(e));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},r.Clipper.prototype.DisposeAllPolyPts=function(){for(var e=0,t=this.m_PolyOuts.length;e<t;++e)this.DisposeOutRec(e);r.Clear(this.m_PolyOuts)},r.Clipper.prototype.AddJoin=function(e,t,n){var i=new r.Join;i.OutPt1=e,i.OutPt2=t,i.OffPt.X=n.X,i.OffPt.Y=n.Y,r.use_xyz&&(i.OffPt.Z=n.Z),this.m_Joins.push(i)},r.Clipper.prototype.AddGhostJoin=function(e,t){var n=new r.Join;n.OutPt1=e,n.OffPt.X=t.X,n.OffPt.Y=t.Y,r.use_xyz&&(n.OffPt.Z=t.Z),this.m_GhostJoins.push(n)},r.Clipper.prototype.SetZ=function(e,t,n){if(null!==this.ZFillFunction){if(0!==e.Z||null===this.ZFillFunction)return;r.IntPoint.op_Equality(e,t.Bot)?e.Z=t.Bot.Z:r.IntPoint.op_Equality(e,t.Top)?e.Z=t.Top.Z:r.IntPoint.op_Equality(e,n.Bot)?e.Z=n.Bot.Z:r.IntPoint.op_Equality(e,n.Top)?e.Z=n.Top.Z:this.ZFillFunction(t.Bot,t.Top,n.Bot,n.Top,e)}},r.Clipper.prototype.InsertLocalMinimaIntoAEL=function(e){for(var t,n,i={};this.PopLocalMinima(e,i);){t=i.v.LeftBound,n=i.v.RightBound;var a=null;if(null===t?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(a=this.AddOutPt(n,n.Bot))):null===n?(this.InsertEdgeIntoAEL(t,null),this.SetWindingCount(t),this.IsContributing(t)&&(a=this.AddOutPt(t,t.Bot)),this.InsertScanbeam(t.Top.Y)):(this.InsertEdgeIntoAEL(t,null),this.InsertEdgeIntoAEL(n,t),this.SetWindingCount(t),n.WindCnt=t.WindCnt,n.WindCnt2=t.WindCnt2,this.IsContributing(t)&&(a=this.AddLocalMinPoly(t,n,t.Bot)),this.InsertScanbeam(t.Top.Y)),null!==n&&(r.ClipperBase.IsHorizontal(n)?(null!==n.NextInLML&&this.InsertScanbeam(n.NextInLML.Top.Y),this.AddEdgeToSEL(n)):this.InsertScanbeam(n.Top.Y)),null!==t&&null!==n){if(null!==a&&r.ClipperBase.IsHorizontal(n)&&this.m_GhostJoins.length>0&&0!==n.WindDelta)for(var o=0,s=this.m_GhostJoins.length;o<s;o++){var l=this.m_GhostJoins[o];this.HorzSegmentsOverlap(l.OutPt1.Pt.X,l.OffPt.X,n.Bot.X,n.Top.X)&&this.AddJoin(l.OutPt1,a,l.OffPt)}if(t.OutIdx>=0&&null!==t.PrevInAEL&&t.PrevInAEL.Curr.X===t.Bot.X&&t.PrevInAEL.OutIdx>=0&&r.ClipperBase.SlopesEqual5(t.PrevInAEL.Curr,t.PrevInAEL.Top,t.Curr,t.Top,this.m_UseFullRange)&&0!==t.WindDelta&&0!==t.PrevInAEL.WindDelta){var u=this.AddOutPt(t.PrevInAEL,t.Bot);this.AddJoin(a,u,t.Top)}if(t.NextInAEL!==n){if(n.OutIdx>=0&&n.PrevInAEL.OutIdx>=0&&r.ClipperBase.SlopesEqual5(n.PrevInAEL.Curr,n.PrevInAEL.Top,n.Curr,n.Top,this.m_UseFullRange)&&0!==n.WindDelta&&0!==n.PrevInAEL.WindDelta){u=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(a,u,n.Top)}var c=t.NextInAEL;if(null!==c)for(;c!==n;)this.IntersectEdges(n,c,t.Curr),c=c.NextInAEL}}}},r.Clipper.prototype.InsertEdgeIntoAEL=function(e,t){if(null===this.m_ActiveEdges)e.PrevInAEL=null,e.NextInAEL=null,this.m_ActiveEdges=e;else if(null===t&&this.E2InsertsBeforeE1(this.m_ActiveEdges,e))e.PrevInAEL=null,e.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=e,this.m_ActiveEdges=e;else{for(null===t&&(t=this.m_ActiveEdges);null!==t.NextInAEL&&!this.E2InsertsBeforeE1(t.NextInAEL,e);)t=t.NextInAEL;e.NextInAEL=t.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=e),e.PrevInAEL=t,t.NextInAEL=e}},r.Clipper.prototype.E2InsertsBeforeE1=function(e,t){return t.Curr.X===e.Curr.X?t.Top.Y>e.Top.Y?t.Top.X<r.Clipper.TopX(e,t.Top.Y):e.Top.X>r.Clipper.TopX(t,e.Top.Y):t.Curr.X<e.Curr.X},r.Clipper.prototype.IsEvenOddFillType=function(e){return e.PolyTyp===r.PolyType.ptSubject?this.m_SubjFillType===r.PolyFillType.pftEvenOdd:this.m_ClipFillType===r.PolyFillType.pftEvenOdd},r.Clipper.prototype.IsEvenOddAltFillType=function(e){return e.PolyTyp===r.PolyType.ptSubject?this.m_ClipFillType===r.PolyFillType.pftEvenOdd:this.m_SubjFillType===r.PolyFillType.pftEvenOdd},r.Clipper.prototype.IsContributing=function(e){var t,n;switch(e.PolyTyp===r.PolyType.ptSubject?(t=this.m_SubjFillType,n=this.m_ClipFillType):(t=this.m_ClipFillType,n=this.m_SubjFillType),t){case r.PolyFillType.pftEvenOdd:if(0===e.WindDelta&&1!==e.WindCnt)return!1;break;case r.PolyFillType.pftNonZero:if(1!==Math.abs(e.WindCnt))return!1;break;case r.PolyFillType.pftPositive:if(1!==e.WindCnt)return!1;break;default:if(-1!==e.WindCnt)return!1}switch(this.m_ClipType){case r.ClipType.ctIntersection:switch(n){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return 0!==e.WindCnt2;case r.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case r.ClipType.ctUnion:switch(n){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return 0===e.WindCnt2;case r.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}case r.ClipType.ctDifference:if(e.PolyTyp===r.PolyType.ptSubject)switch(n){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return 0===e.WindCnt2;case r.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else switch(n){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return 0!==e.WindCnt2;case r.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case r.ClipType.ctXor:if(0!==e.WindDelta)return!0;switch(n){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return 0===e.WindCnt2;case r.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}}return!0},r.Clipper.prototype.SetWindingCount=function(e){for(var t=e.PrevInAEL;null!==t&&(t.PolyTyp!==e.PolyTyp||0===t.WindDelta);)t=t.PrevInAEL;if(null===t){var n=e.PolyTyp===r.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;0===e.WindDelta?e.WindCnt=n===r.PolyFillType.pftNegative?-1:1:e.WindCnt=e.WindDelta,e.WindCnt2=0,t=this.m_ActiveEdges}else if(0===e.WindDelta&&this.m_ClipType!==r.ClipType.ctUnion)e.WindCnt=1,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;else if(this.IsEvenOddFillType(e)){if(0===e.WindDelta){for(var i=!0,a=t.PrevInAEL;null!==a;)a.PolyTyp===t.PolyTyp&&0!==a.WindDelta&&(i=!i),a=a.PrevInAEL;e.WindCnt=i?0:1}else e.WindCnt=e.WindDelta;e.WindCnt2=t.WindCnt2,t=t.NextInAEL}else t.WindCnt*t.WindDelta<0?Math.abs(t.WindCnt)>1?t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta:e.WindCnt=0===e.WindDelta?1:e.WindDelta:0===e.WindDelta?e.WindCnt=t.WindCnt<0?t.WindCnt-1:t.WindCnt+1:t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;if(this.IsEvenOddAltFillType(e))for(;t!==e;)0!==t.WindDelta&&(e.WindCnt2=0===e.WindCnt2?1:0),t=t.NextInAEL;else for(;t!==e;)e.WindCnt2+=t.WindDelta,t=t.NextInAEL},r.Clipper.prototype.AddEdgeToSEL=function(e){null===this.m_SortedEdges?(this.m_SortedEdges=e,e.PrevInSEL=null,e.NextInSEL=null):(e.NextInSEL=this.m_SortedEdges,e.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=e,this.m_SortedEdges=e)},r.Clipper.prototype.PopEdgeFromSEL=function(e){if(e.v=this.m_SortedEdges,null===e.v)return!1;var t=e.v;return this.m_SortedEdges=e.v.NextInSEL,null!==this.m_SortedEdges&&(this.m_SortedEdges.PrevInSEL=null),t.NextInSEL=null,t.PrevInSEL=null,!0},r.Clipper.prototype.CopyAELToSEL=function(){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;null!==e;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e=e.NextInAEL},r.Clipper.prototype.SwapPositionsInSEL=function(e,t){if(!(null===e.NextInSEL&&null===e.PrevInSEL||null===t.NextInSEL&&null===t.PrevInSEL)){if(e.NextInSEL===t)null!==(r=t.NextInSEL)&&(r.PrevInSEL=e),null!==(n=e.PrevInSEL)&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=r;else if(t.NextInSEL===e){null!==(r=e.NextInSEL)&&(r.PrevInSEL=t),null!==(n=t.PrevInSEL)&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=r}else{var r=e.NextInSEL,n=e.PrevInSEL;e.NextInSEL=t.NextInSEL,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=t.PrevInSEL,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e),t.NextInSEL=r,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=n,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t)}null===e.PrevInSEL?this.m_SortedEdges=e:null===t.PrevInSEL&&(this.m_SortedEdges=t)}},r.Clipper.prototype.AddLocalMaxPoly=function(e,t,r){this.AddOutPt(e,r),0===t.WindDelta&&this.AddOutPt(t,r),e.OutIdx===t.OutIdx?(e.OutIdx=-1,t.OutIdx=-1):e.OutIdx<t.OutIdx?this.AppendPolygon(e,t):this.AppendPolygon(t,e)},r.Clipper.prototype.AddLocalMinPoly=function(e,t,n){var i,a,o;if(r.ClipperBase.IsHorizontal(t)||e.Dx>t.Dx?(i=this.AddOutPt(e,n),t.OutIdx=e.OutIdx,e.Side=r.EdgeSide.esLeft,t.Side=r.EdgeSide.esRight,o=(a=e).PrevInAEL===t?t.PrevInAEL:a.PrevInAEL):(i=this.AddOutPt(t,n),e.OutIdx=t.OutIdx,e.Side=r.EdgeSide.esRight,t.Side=r.EdgeSide.esLeft,o=(a=t).PrevInAEL===e?e.PrevInAEL:a.PrevInAEL),null!==o&&o.OutIdx>=0&&o.Top.Y<n.Y&&a.Top.Y<n.Y){var s=r.Clipper.TopX(o,n.Y),l=r.Clipper.TopX(a,n.Y);if(s===l&&0!==a.WindDelta&&0!==o.WindDelta&&r.ClipperBase.SlopesEqual5(new r.IntPoint2(s,n.Y),o.Top,new r.IntPoint2(l,n.Y),a.Top,this.m_UseFullRange)){var u=this.AddOutPt(o,n);this.AddJoin(i,u,a.Top)}}return i},r.Clipper.prototype.AddOutPt=function(e,t){if(e.OutIdx<0){(i=this.CreateOutRec()).IsOpen=0===e.WindDelta;var n=new r.OutPt;return i.Pts=n,n.Idx=i.Idx,n.Pt.X=t.X,n.Pt.Y=t.Y,r.use_xyz&&(n.Pt.Z=t.Z),n.Next=n,n.Prev=n,i.IsOpen||this.SetHoleState(e,i),e.OutIdx=i.Idx,n}var i,a=(i=this.m_PolyOuts[e.OutIdx]).Pts,o=e.Side===r.EdgeSide.esLeft;return o&&r.IntPoint.op_Equality(t,a.Pt)?a:!o&&r.IntPoint.op_Equality(t,a.Prev.Pt)?a.Prev:((n=new r.OutPt).Idx=i.Idx,n.Pt.X=t.X,n.Pt.Y=t.Y,r.use_xyz&&(n.Pt.Z=t.Z),n.Next=a,n.Prev=a.Prev,n.Prev.Next=n,a.Prev=n,o&&(i.Pts=n),n)},r.Clipper.prototype.GetLastOutPt=function(e){var t=this.m_PolyOuts[e.OutIdx];return e.Side===r.EdgeSide.esLeft?t.Pts:t.Pts.Prev},r.Clipper.prototype.SwapPoints=function(e,t){var n=new r.IntPoint1(e.Value);e.Value.X=t.Value.X,e.Value.Y=t.Value.Y,r.use_xyz&&(e.Value.Z=t.Value.Z),t.Value.X=n.X,t.Value.Y=n.Y,r.use_xyz&&(t.Value.Z=n.Z)},r.Clipper.prototype.HorzSegmentsOverlap=function(e,t,r,n){var i;return e>t&&(i=e,e=t,t=i),r>n&&(i=r,r=n,n=i),e<n&&r<t},r.Clipper.prototype.SetHoleState=function(e,t){for(var r=e.PrevInAEL,n=null;null!==r;)r.OutIdx>=0&&0!==r.WindDelta&&(null===n?n=r:n.OutIdx===r.OutIdx&&(n=null)),r=r.PrevInAEL;null===n?(t.FirstLeft=null,t.IsHole=!1):(t.FirstLeft=this.m_PolyOuts[n.OutIdx],t.IsHole=!t.FirstLeft.IsHole)},r.Clipper.prototype.GetDx=function(e,t){return e.Y===t.Y?r.ClipperBase.horizontal:(t.X-e.X)/(t.Y-e.Y)},r.Clipper.prototype.FirstIsBottomPt=function(e,t){for(var n=e.Prev;r.IntPoint.op_Equality(n.Pt,e.Pt)&&n!==e;)n=n.Prev;var i=Math.abs(this.GetDx(e.Pt,n.Pt));for(n=e.Next;r.IntPoint.op_Equality(n.Pt,e.Pt)&&n!==e;)n=n.Next;var a=Math.abs(this.GetDx(e.Pt,n.Pt));for(n=t.Prev;r.IntPoint.op_Equality(n.Pt,t.Pt)&&n!==t;)n=n.Prev;var o=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=t.Next;r.IntPoint.op_Equality(n.Pt,t.Pt)&&n!==t;)n=n.Next;var s=Math.abs(this.GetDx(t.Pt,n.Pt));return Math.max(i,a)===Math.max(o,s)&&Math.min(i,a)===Math.min(o,s)?this.Area(e)>0:i>=o&&i>=s||a>=o&&a>=s},r.Clipper.prototype.GetBottomPt=function(e){for(var t=null,n=e.Next;n!==e;)n.Pt.Y>e.Pt.Y?(e=n,t=null):n.Pt.Y===e.Pt.Y&&n.Pt.X<=e.Pt.X&&(n.Pt.X<e.Pt.X?(t=null,e=n):n.Next!==e&&n.Prev!==e&&(t=n)),n=n.Next;if(null!==t)for(;t!==n;)for(this.FirstIsBottomPt(n,t)||(e=t),t=t.Next;r.IntPoint.op_Inequality(t.Pt,e.Pt);)t=t.Next;return e},r.Clipper.prototype.GetLowermostRec=function(e,t){null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts)),null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts));var r=e.BottomPt,n=t.BottomPt;return r.Pt.Y>n.Pt.Y?e:r.Pt.Y<n.Pt.Y?t:r.Pt.X<n.Pt.X?e:r.Pt.X>n.Pt.X?t:r.Next===r?t:n.Next===n?e:this.FirstIsBottomPt(r,n)?e:t},r.Clipper.prototype.OutRec1RightOfOutRec2=function(e,t){do{if((e=e.FirstLeft)===t)return!0}while(null!==e);return!1},r.Clipper.prototype.GetOutRec=function(e){for(var t=this.m_PolyOuts[e];t!==this.m_PolyOuts[t.Idx];)t=this.m_PolyOuts[t.Idx];return t},r.Clipper.prototype.AppendPolygon=function(e,t){var n,i=this.m_PolyOuts[e.OutIdx],a=this.m_PolyOuts[t.OutIdx];n=this.OutRec1RightOfOutRec2(i,a)?a:this.OutRec1RightOfOutRec2(a,i)?i:this.GetLowermostRec(i,a);var o=i.Pts,s=o.Prev,l=a.Pts,u=l.Prev;e.Side===r.EdgeSide.esLeft?t.Side===r.EdgeSide.esLeft?(this.ReversePolyPtLinks(l),l.Next=o,o.Prev=l,s.Next=u,u.Prev=s,i.Pts=u):(u.Next=o,o.Prev=u,l.Prev=s,s.Next=l,i.Pts=l):t.Side===r.EdgeSide.esRight?(this.ReversePolyPtLinks(l),s.Next=u,u.Prev=s,l.Next=o,o.Prev=l):(s.Next=l,l.Prev=s,o.Prev=u,u.Next=o),i.BottomPt=null,n===a&&(a.FirstLeft!==i&&(i.FirstLeft=a.FirstLeft),i.IsHole=a.IsHole),a.Pts=null,a.BottomPt=null,a.FirstLeft=i;var c=e.OutIdx,f=t.OutIdx;e.OutIdx=-1,t.OutIdx=-1;for(var h=this.m_ActiveEdges;null!==h;){if(h.OutIdx===f){h.OutIdx=c,h.Side=e.Side;break}h=h.NextInAEL}a.Idx=i.Idx},r.Clipper.prototype.ReversePolyPtLinks=function(e){if(null!==e){var t,r;t=e;do{r=t.Next,t.Next=t.Prev,t.Prev=r,t=r}while(t!==e)}},r.Clipper.SwapSides=function(e,t){var r=e.Side;e.Side=t.Side,t.Side=r},r.Clipper.SwapPolyIndexes=function(e,t){var r=e.OutIdx;e.OutIdx=t.OutIdx,t.OutIdx=r},r.Clipper.prototype.IntersectEdges=function(e,t,n){var i=e.OutIdx>=0,a=t.OutIdx>=0;if(r.use_xyz&&this.SetZ(n,e,t),!r.use_lines||0!==e.WindDelta&&0!==t.WindDelta){if(e.PolyTyp===t.PolyTyp)if(this.IsEvenOddFillType(e)){var o=e.WindCnt;e.WindCnt=t.WindCnt,t.WindCnt=o}else e.WindCnt+t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt+=t.WindDelta,t.WindCnt-e.WindDelta==0?t.WindCnt=-t.WindCnt:t.WindCnt-=e.WindDelta;else this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2+=t.WindDelta,this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2-=e.WindDelta;var s,l,u,c,f,h;switch(e.PolyTyp===r.PolyType.ptSubject?(s=this.m_SubjFillType,u=this.m_ClipFillType):(s=this.m_ClipFillType,u=this.m_SubjFillType),t.PolyTyp===r.PolyType.ptSubject?(l=this.m_SubjFillType,c=this.m_ClipFillType):(l=this.m_ClipFillType,c=this.m_SubjFillType),s){case r.PolyFillType.pftPositive:f=e.WindCnt;break;case r.PolyFillType.pftNegative:f=-e.WindCnt;break;default:f=Math.abs(e.WindCnt)}switch(l){case r.PolyFillType.pftPositive:h=t.WindCnt;break;case r.PolyFillType.pftNegative:h=-t.WindCnt;break;default:h=Math.abs(t.WindCnt)}if(i&&a)0!==f&&1!==f||0!==h&&1!==h||e.PolyTyp!==t.PolyTyp&&this.m_ClipType!==r.ClipType.ctXor?this.AddLocalMaxPoly(e,t,n):(this.AddOutPt(e,n),this.AddOutPt(t,n),r.Clipper.SwapSides(e,t),r.Clipper.SwapPolyIndexes(e,t));else if(i)0!==h&&1!==h||(this.AddOutPt(e,n),r.Clipper.SwapSides(e,t),r.Clipper.SwapPolyIndexes(e,t));else if(a)0!==f&&1!==f||(this.AddOutPt(t,n),r.Clipper.SwapSides(e,t),r.Clipper.SwapPolyIndexes(e,t));else if(!(0!==f&&1!==f||0!==h&&1!==h)){var d,p;switch(u){case r.PolyFillType.pftPositive:d=e.WindCnt2;break;case r.PolyFillType.pftNegative:d=-e.WindCnt2;break;default:d=Math.abs(e.WindCnt2)}switch(c){case r.PolyFillType.pftPositive:p=t.WindCnt2;break;case r.PolyFillType.pftNegative:p=-t.WindCnt2;break;default:p=Math.abs(t.WindCnt2)}if(e.PolyTyp!==t.PolyTyp)this.AddLocalMinPoly(e,t,n);else if(1===f&&1===h)switch(this.m_ClipType){case r.ClipType.ctIntersection:d>0&&p>0&&this.AddLocalMinPoly(e,t,n);break;case r.ClipType.ctUnion:d<=0&&p<=0&&this.AddLocalMinPoly(e,t,n);break;case r.ClipType.ctDifference:(e.PolyTyp===r.PolyType.ptClip&&d>0&&p>0||e.PolyTyp===r.PolyType.ptSubject&&d<=0&&p<=0)&&this.AddLocalMinPoly(e,t,n);break;case r.ClipType.ctXor:this.AddLocalMinPoly(e,t,n)}else r.Clipper.SwapSides(e,t)}}else{if(0===e.WindDelta&&0===t.WindDelta)return;e.PolyTyp===t.PolyTyp&&e.WindDelta!==t.WindDelta&&this.m_ClipType===r.ClipType.ctUnion?0===e.WindDelta?a&&(this.AddOutPt(e,n),i&&(e.OutIdx=-1)):i&&(this.AddOutPt(t,n),a&&(t.OutIdx=-1)):e.PolyTyp!==t.PolyTyp&&(0!==e.WindDelta||1!==Math.abs(t.WindCnt)||this.m_ClipType===r.ClipType.ctUnion&&0!==t.WindCnt2?0!==t.WindDelta||1!==Math.abs(e.WindCnt)||this.m_ClipType===r.ClipType.ctUnion&&0!==e.WindCnt2||(this.AddOutPt(t,n),a&&(t.OutIdx=-1)):(this.AddOutPt(e,n),i&&(e.OutIdx=-1)))}},r.Clipper.prototype.DeleteFromSEL=function(e){var t=e.PrevInSEL,r=e.NextInSEL;null===t&&null===r&&e!==this.m_SortedEdges||(null!==t?t.NextInSEL=r:this.m_SortedEdges=r,null!==r&&(r.PrevInSEL=t),e.NextInSEL=null,e.PrevInSEL=null)},r.Clipper.prototype.ProcessHorizontals=function(){for(var e={};this.PopEdgeFromSEL(e);)this.ProcessHorizontal(e.v)},r.Clipper.prototype.GetHorzDirection=function(e,t){e.Bot.X<e.Top.X?(t.Left=e.Bot.X,t.Right=e.Top.X,t.Dir=r.Direction.dLeftToRight):(t.Left=e.Top.X,t.Right=e.Bot.X,t.Dir=r.Direction.dRightToLeft)},r.Clipper.prototype.ProcessHorizontal=function(e){var t={Dir:null,Left:null,Right:null};this.GetHorzDirection(e,t);for(var n=t.Dir,i=t.Left,a=t.Right,o=0===e.WindDelta,s=e,l=null;null!==s.NextInLML&&r.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;null===s.NextInLML&&(l=this.GetMaximaPair(s));var u=this.m_Maxima;if(null!==u)if(n===r.Direction.dLeftToRight){for(;null!==u&&u.X<=e.Bot.X;)u=u.Next;null!==u&&u.X>=s.Top.X&&(u=null)}else{for(;null!==u.Next&&u.Next.X<e.Bot.X;)u=u.Next;u.X<=s.Top.X&&(u=null)}for(var c=null;;){for(var f=e===s,h=this.GetNextInAEL(e,n);null!==h;){if(null!==u)if(n===r.Direction.dLeftToRight)for(;null!==u&&u.X<h.Curr.X;)e.OutIdx>=0&&!o&&this.AddOutPt(e,new r.IntPoint2(u.X,e.Bot.Y)),u=u.Next;else for(;null!==u&&u.X>h.Curr.X;)e.OutIdx>=0&&!o&&this.AddOutPt(e,new r.IntPoint2(u.X,e.Bot.Y)),u=u.Prev;if(n===r.Direction.dLeftToRight&&h.Curr.X>a||n===r.Direction.dRightToLeft&&h.Curr.X<i)break;if(h.Curr.X===e.Top.X&&null!==e.NextInLML&&h.Dx<e.NextInLML.Dx)break;if(e.OutIdx>=0&&!o){r.use_xyz&&(n===r.Direction.dLeftToRight?this.SetZ(h.Curr,e,h):this.SetZ(h.Curr,h,e)),c=this.AddOutPt(e,h.Curr);for(var d=this.m_SortedEdges;null!==d;){if(d.OutIdx>=0&&this.HorzSegmentsOverlap(e.Bot.X,e.Top.X,d.Bot.X,d.Top.X)){var p=this.GetLastOutPt(d);this.AddJoin(p,c,d.Top)}d=d.NextInSEL}this.AddGhostJoin(c,e.Bot)}if(h===l&&f)return e.OutIdx>=0&&this.AddLocalMaxPoly(e,l,e.Top),this.DeleteFromAEL(e),void this.DeleteFromAEL(l);if(n===r.Direction.dLeftToRight){var m=new r.IntPoint2(h.Curr.X,e.Curr.Y);this.IntersectEdges(e,h,m)}else{m=new r.IntPoint2(h.Curr.X,e.Curr.Y);this.IntersectEdges(h,e,m)}var v=this.GetNextInAEL(h,n);this.SwapPositionsInAEL(e,h),h=v}if(null===e.NextInLML||!r.ClipperBase.IsHorizontal(e.NextInLML))break;(e=this.UpdateEdgeIntoAEL(e)).OutIdx>=0&&this.AddOutPt(e,e.Bot),t={Dir:n,Left:i,Right:a},this.GetHorzDirection(e,t),n=t.Dir,i=t.Left,a=t.Right}if(e.OutIdx>=0&&null===c){c=this.GetLastOutPt(e);for(d=this.m_SortedEdges;null!==d;){if(d.OutIdx>=0&&this.HorzSegmentsOverlap(e.Bot.X,e.Top.X,d.Bot.X,d.Top.X)){p=this.GetLastOutPt(d);this.AddJoin(p,c,d.Top)}d=d.NextInSEL}this.AddGhostJoin(c,e.Top)}if(null!==e.NextInLML)if(e.OutIdx>=0){if(c=this.AddOutPt(e,e.Top),0===(e=this.UpdateEdgeIntoAEL(e)).WindDelta)return;var g=e.PrevInAEL;v=e.NextInAEL;if(null!==g&&g.Curr.X===e.Bot.X&&g.Curr.Y===e.Bot.Y&&0===g.WindDelta&&g.OutIdx>=0&&g.Curr.Y>g.Top.Y&&r.ClipperBase.SlopesEqual3(e,g,this.m_UseFullRange)){p=this.AddOutPt(g,e.Bot);this.AddJoin(c,p,e.Top)}else if(null!==v&&v.Curr.X===e.Bot.X&&v.Curr.Y===e.Bot.Y&&0!==v.WindDelta&&v.OutIdx>=0&&v.Curr.Y>v.Top.Y&&r.ClipperBase.SlopesEqual3(e,v,this.m_UseFullRange)){p=this.AddOutPt(v,e.Bot);this.AddJoin(c,p,e.Top)}}else e=this.UpdateEdgeIntoAEL(e);else e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e)},r.Clipper.prototype.GetNextInAEL=function(e,t){return t===r.Direction.dLeftToRight?e.NextInAEL:e.PrevInAEL},r.Clipper.prototype.IsMinima=function(e){return null!==e&&e.Prev.NextInLML!==e&&e.Next.NextInLML!==e},r.Clipper.prototype.IsMaxima=function(e,t){return null!==e&&e.Top.Y===t&&null===e.NextInLML},r.Clipper.prototype.IsIntermediate=function(e,t){return e.Top.Y===t&&null!==e.NextInLML},r.Clipper.prototype.GetMaximaPair=function(e){return r.IntPoint.op_Equality(e.Next.Top,e.Top)&&null===e.Next.NextInLML?e.Next:r.IntPoint.op_Equality(e.Prev.Top,e.Top)&&null===e.Prev.NextInLML?e.Prev:null},r.Clipper.prototype.GetMaximaPairEx=function(e){var t=this.GetMaximaPair(e);return null===t||t.OutIdx===r.ClipperBase.Skip||t.NextInAEL===t.PrevInAEL&&!r.ClipperBase.IsHorizontal(t)?null:t},r.Clipper.prototype.ProcessIntersections=function(e){if(null===this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(e),0===this.m_IntersectList.length)return!0;if(1!==this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(e){this.m_SortedEdges=null,this.m_IntersectList.length=0,r.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},r.Clipper.prototype.BuildIntersectList=function(e){if(null!==this.m_ActiveEdges){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t.Curr.X=r.Clipper.TopX(t,e),t=t.NextInAEL;for(var n=!0;n&&null!==this.m_SortedEdges;){for(n=!1,t=this.m_SortedEdges;null!==t.NextInSEL;){var i=t.NextInSEL,a=new r.IntPoint0;if(t.Curr.X>i.Curr.X){this.IntersectPoint(t,i,a),a.Y<e&&(a=new r.IntPoint2(r.Clipper.TopX(t,e),e));var o=new r.IntersectNode;o.Edge1=t,o.Edge2=i,o.Pt.X=a.X,o.Pt.Y=a.Y,r.use_xyz&&(o.Pt.Z=a.Z),this.m_IntersectList.push(o),this.SwapPositionsInSEL(t,i),n=!0}else t=i}if(null===t.PrevInSEL)break;t.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},r.Clipper.prototype.EdgesAdjacent=function(e){return e.Edge1.NextInSEL===e.Edge2||e.Edge1.PrevInSEL===e.Edge2},r.Clipper.IntersectNodeSort=function(e,t){return t.Pt.Y-e.Pt.Y},r.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var e=this.m_IntersectList.length,t=0;t<e;t++){if(!this.EdgesAdjacent(this.m_IntersectList[t])){for(var r=t+1;r<e&&!this.EdgesAdjacent(this.m_IntersectList[r]);)r++;if(r===e)return!1;var n=this.m_IntersectList[t];this.m_IntersectList[t]=this.m_IntersectList[r],this.m_IntersectList[r]=n}this.SwapPositionsInSEL(this.m_IntersectList[t].Edge1,this.m_IntersectList[t].Edge2)}return!0},r.Clipper.prototype.ProcessIntersectList=function(){for(var e=0,t=this.m_IntersectList.length;e<t;e++){var r=this.m_IntersectList[e];this.IntersectEdges(r.Edge1,r.Edge2,r.Pt),this.SwapPositionsInAEL(r.Edge1,r.Edge2)}this.m_IntersectList.length=0};o.msie?r.Clipper.Round=function(e){return e<0?Math.ceil(e-.5):Math.round(e)}:o.chromium?r.Clipper.Round=function(e){return e<0?-Math.round(Math.abs(e)):Math.round(e)}:o.safari?r.Clipper.Round=function(e){return e<0?(e-=.5)<-2147483648?Math.ceil(e):0|e:(e+=.5)>2147483647?Math.floor(e):0|e}:r.Clipper.Round=function(e){return e<0?Math.ceil(e-.5):Math.floor(e+.5)},r.Clipper.TopX=function(e,t){return t===e.Top.Y?e.Top.X:e.Bot.X+r.Clipper.Round(e.Dx*(t-e.Bot.Y))},r.Clipper.prototype.IntersectPoint=function(e,t,n){var i,a;if(n.X=0,n.Y=0,e.Dx===t.Dx)return n.Y=e.Curr.Y,void(n.X=r.Clipper.TopX(e,n.Y));if(0===e.Delta.X)n.X=e.Bot.X,r.ClipperBase.IsHorizontal(t)?n.Y=t.Bot.Y:(a=t.Bot.Y-t.Bot.X/t.Dx,n.Y=r.Clipper.Round(n.X/t.Dx+a));else if(0===t.Delta.X)n.X=t.Bot.X,r.ClipperBase.IsHorizontal(e)?n.Y=e.Bot.Y:(i=e.Bot.Y-e.Bot.X/e.Dx,n.Y=r.Clipper.Round(n.X/e.Dx+i));else{i=e.Bot.X-e.Bot.Y*e.Dx;var o=((a=t.Bot.X-t.Bot.Y*t.Dx)-i)/(e.Dx-t.Dx);n.Y=r.Clipper.Round(o),Math.abs(e.Dx)<Math.abs(t.Dx)?n.X=r.Clipper.Round(e.Dx*o+i):n.X=r.Clipper.Round(t.Dx*o+a)}if(n.Y<e.Top.Y||n.Y<t.Top.Y){if(e.Top.Y>t.Top.Y)return n.Y=e.Top.Y,n.X=r.Clipper.TopX(t,e.Top.Y),n.X<e.Top.X;n.Y=t.Top.Y,Math.abs(e.Dx)<Math.abs(t.Dx)?n.X=r.Clipper.TopX(e,n.Y):n.X=r.Clipper.TopX(t,n.Y)}n.Y>e.Curr.Y&&(n.Y=e.Curr.Y,Math.abs(e.Dx)>Math.abs(t.Dx)?n.X=r.Clipper.TopX(t,n.Y):n.X=r.Clipper.TopX(e,n.Y))},r.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(e){for(var t=this.m_ActiveEdges;null!==t;){var n=this.IsMaxima(t,e);if(n){var i=this.GetMaximaPairEx(t);n=null===i||!r.ClipperBase.IsHorizontal(i)}if(n){this.StrictlySimple&&this.InsertMaxima(t.Top.X);var a=t.PrevInAEL;this.DoMaxima(t),t=null===a?this.m_ActiveEdges:a.NextInAEL}else{if(this.IsIntermediate(t,e)&&r.ClipperBase.IsHorizontal(t.NextInLML)?((t=this.UpdateEdgeIntoAEL(t)).OutIdx>=0&&this.AddOutPt(t,t.Bot),this.AddEdgeToSEL(t)):(t.Curr.X=r.Clipper.TopX(t,e),t.Curr.Y=e),r.use_xyz&&(t.Top.Y===e?t.Curr.Z=t.Top.Z:t.Bot.Y===e?t.Curr.Z=t.Bot.Z:t.Curr.Z=0),this.StrictlySimple){a=t.PrevInAEL;if(t.OutIdx>=0&&0!==t.WindDelta&&null!==a&&a.OutIdx>=0&&a.Curr.X===t.Curr.X&&0!==a.WindDelta){var o=new r.IntPoint1(t.Curr);r.use_xyz&&this.SetZ(o,a,t);var s=this.AddOutPt(a,o),l=this.AddOutPt(t,o);this.AddJoin(s,l,o)}}t=t.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,t=this.m_ActiveEdges;null!==t;){if(this.IsIntermediate(t,e)){s=null;t.OutIdx>=0&&(s=this.AddOutPt(t,t.Top));a=(t=this.UpdateEdgeIntoAEL(t)).PrevInAEL;var u=t.NextInAEL;if(null!==a&&a.Curr.X===t.Bot.X&&a.Curr.Y===t.Bot.Y&&null!==s&&a.OutIdx>=0&&a.Curr.Y===a.Top.Y&&r.ClipperBase.SlopesEqual5(t.Curr,t.Top,a.Curr,a.Top,this.m_UseFullRange)&&0!==t.WindDelta&&0!==a.WindDelta){l=this.AddOutPt(ePrev2,t.Bot);this.AddJoin(s,l,t.Top)}else if(null!==u&&u.Curr.X===t.Bot.X&&u.Curr.Y===t.Bot.Y&&null!==s&&u.OutIdx>=0&&u.Curr.Y===u.Top.Y&&r.ClipperBase.SlopesEqual5(t.Curr,t.Top,u.Curr,u.Top,this.m_UseFullRange)&&0!==t.WindDelta&&0!==u.WindDelta){l=this.AddOutPt(u,t.Bot);this.AddJoin(s,l,t.Top)}}t=t.NextInAEL}},r.Clipper.prototype.DoMaxima=function(e){var t=this.GetMaximaPairEx(e);if(null===t)return e.OutIdx>=0&&this.AddOutPt(e,e.Top),void this.DeleteFromAEL(e);for(var n=e.NextInAEL;null!==n&&n!==t;)this.IntersectEdges(e,n,e.Top),this.SwapPositionsInAEL(e,n),n=e.NextInAEL;-1===e.OutIdx&&-1===t.OutIdx?(this.DeleteFromAEL(e),this.DeleteFromAEL(t)):e.OutIdx>=0&&t.OutIdx>=0?(e.OutIdx>=0&&this.AddLocalMaxPoly(e,t,e.Top),this.DeleteFromAEL(e),this.DeleteFromAEL(t)):r.use_lines&&0===e.WindDelta?(e.OutIdx>=0&&(this.AddOutPt(e,e.Top),e.OutIdx=r.ClipperBase.Unassigned),this.DeleteFromAEL(e),t.OutIdx>=0&&(this.AddOutPt(t,e.Top),t.OutIdx=r.ClipperBase.Unassigned),this.DeleteFromAEL(t)):r.Error("DoMaxima error")},r.Clipper.ReversePaths=function(e){for(var t=0,r=e.length;t<r;t++)e[t].reverse()},r.Clipper.Orientation=function(e){return r.Clipper.Area(e)>=0},r.Clipper.prototype.PointCount=function(e){if(null===e)return 0;var t=0,r=e;do{t++,r=r.Next}while(r!==e);return t},r.Clipper.prototype.BuildResult=function(e){r.Clear(e);for(var t=0,n=this.m_PolyOuts.length;t<n;t++){var i=this.m_PolyOuts[t];if(null!==i.Pts){var a=i.Pts.Prev,o=this.PointCount(a);if(!(o<2)){for(var s=new Array(o),l=0;l<o;l++)s[l]=a.Pt,a=a.Prev;e.push(s)}}}},r.Clipper.prototype.BuildResult2=function(e){e.Clear();for(var t=0,n=this.m_PolyOuts.length;t<n;t++){var i=this.m_PolyOuts[t],a=this.PointCount(i.Pts);if(!(i.IsOpen&&a<2||!i.IsOpen&&a<3)){this.FixHoleLinkage(i);var o=new r.PolyNode;e.m_AllPolys.push(o),i.PolyNode=o,o.m_polygon.length=a;for(var s=i.Pts.Prev,l=0;l<a;l++)o.m_polygon[l]=s.Pt,s=s.Prev}}for(t=0,n=this.m_PolyOuts.length;t<n;t++){null!==(i=this.m_PolyOuts[t]).PolyNode&&(i.IsOpen?(i.PolyNode.IsOpen=!0,e.AddChild(i.PolyNode)):null!==i.FirstLeft&&null!==i.FirstLeft.PolyNode?i.FirstLeft.PolyNode.AddChild(i.PolyNode):e.AddChild(i.PolyNode))}},r.Clipper.prototype.FixupOutPolyline=function(e){for(var t=e.Pts,n=t.Prev;t!==n;)if(t=t.Next,r.IntPoint.op_Equality(t.Pt,t.Prev.Pt)){t===n&&(n=t.Prev);var i=t.Prev;i.Next=t.Next,t.Next.Prev=i,t=i}t===t.Prev&&(e.Pts=null)},r.Clipper.prototype.FixupOutPolygon=function(e){var t=null;e.BottomPt=null;for(var n=e.Pts,i=this.PreserveCollinear||this.StrictlySimple;;){if(n.Prev===n||n.Prev===n.Next)return void(e.Pts=null);if(r.IntPoint.op_Equality(n.Pt,n.Next.Pt)||r.IntPoint.op_Equality(n.Pt,n.Prev.Pt)||r.ClipperBase.SlopesEqual4(n.Prev.Pt,n.Pt,n.Next.Pt,this.m_UseFullRange)&&(!i||!this.Pt2IsBetweenPt1AndPt3(n.Prev.Pt,n.Pt,n.Next.Pt)))t=null,n.Prev.Next=n.Next,n.Next.Prev=n.Prev,n=n.Prev;else{if(n===t)break;null===t&&(t=n),n=n.Next}}e.Pts=n},r.Clipper.prototype.DupOutPt=function(e,t){var n=new r.OutPt;return n.Pt.X=e.Pt.X,n.Pt.Y=e.Pt.Y,r.use_xyz&&(n.Pt.Z=e.Pt.Z),n.Idx=e.Idx,t?(n.Next=e.Next,n.Prev=e,e.Next.Prev=n,e.Next=n):(n.Prev=e.Prev,n.Next=e,e.Prev.Next=n,e.Prev=n),n},r.Clipper.prototype.GetOverlap=function(e,t,r,n,i){return e<t?r<n?(i.Left=Math.max(e,r),i.Right=Math.min(t,n)):(i.Left=Math.max(e,n),i.Right=Math.min(t,r)):r<n?(i.Left=Math.max(t,r),i.Right=Math.min(e,n)):(i.Left=Math.max(t,n),i.Right=Math.min(e,r)),i.Left<i.Right},r.Clipper.prototype.JoinHorz=function(e,t,n,i,a,o){var s=e.Pt.X>t.Pt.X?r.Direction.dRightToLeft:r.Direction.dLeftToRight,l=n.Pt.X>i.Pt.X?r.Direction.dRightToLeft:r.Direction.dLeftToRight;if(s===l)return!1;if(s===r.Direction.dLeftToRight){for(;e.Next.Pt.X<=a.X&&e.Next.Pt.X>=e.Pt.X&&e.Next.Pt.Y===a.Y;)e=e.Next;o&&e.Pt.X!==a.X&&(e=e.Next),t=this.DupOutPt(e,!o),r.IntPoint.op_Inequality(t.Pt,a)&&((e=t).Pt.X=a.X,e.Pt.Y=a.Y,r.use_xyz&&(e.Pt.Z=a.Z),t=this.DupOutPt(e,!o))}else{for(;e.Next.Pt.X>=a.X&&e.Next.Pt.X<=e.Pt.X&&e.Next.Pt.Y===a.Y;)e=e.Next;o||e.Pt.X===a.X||(e=e.Next),t=this.DupOutPt(e,o),r.IntPoint.op_Inequality(t.Pt,a)&&((e=t).Pt.X=a.X,e.Pt.Y=a.Y,r.use_xyz&&(e.Pt.Z=a.Z),t=this.DupOutPt(e,o))}if(l===r.Direction.dLeftToRight){for(;n.Next.Pt.X<=a.X&&n.Next.Pt.X>=n.Pt.X&&n.Next.Pt.Y===a.Y;)n=n.Next;o&&n.Pt.X!==a.X&&(n=n.Next),i=this.DupOutPt(n,!o),r.IntPoint.op_Inequality(i.Pt,a)&&((n=i).Pt.X=a.X,n.Pt.Y=a.Y,r.use_xyz&&(n.Pt.Z=a.Z),i=this.DupOutPt(n,!o))}else{for(;n.Next.Pt.X>=a.X&&n.Next.Pt.X<=n.Pt.X&&n.Next.Pt.Y===a.Y;)n=n.Next;o||n.Pt.X===a.X||(n=n.Next),i=this.DupOutPt(n,o),r.IntPoint.op_Inequality(i.Pt,a)&&((n=i).Pt.X=a.X,n.Pt.Y=a.Y,r.use_xyz&&(n.Pt.Z=a.Z),i=this.DupOutPt(n,o))}return s===r.Direction.dLeftToRight===o?(e.Prev=n,n.Next=e,t.Next=i,i.Prev=t):(e.Next=n,n.Prev=e,t.Prev=i,i.Next=t),!0},r.Clipper.prototype.JoinPoints=function(e,t,n){var i=e.OutPt1,a=new r.OutPt,o=e.OutPt2,s=new r.OutPt,l=e.OutPt1.Pt.Y===e.OffPt.Y;if(l&&r.IntPoint.op_Equality(e.OffPt,e.OutPt1.Pt)&&r.IntPoint.op_Equality(e.OffPt,e.OutPt2.Pt)){if(t!==n)return!1;for(a=e.OutPt1.Next;a!==i&&r.IntPoint.op_Equality(a.Pt,e.OffPt);)a=a.Next;var u=a.Pt.Y>e.OffPt.Y;for(s=e.OutPt2.Next;s!==o&&r.IntPoint.op_Equality(s.Pt,e.OffPt);)s=s.Next;return u!==s.Pt.Y>e.OffPt.Y&&(u?(a=this.DupOutPt(i,!1),s=this.DupOutPt(o,!0),i.Prev=o,o.Next=i,a.Next=s,s.Prev=a,e.OutPt1=i,e.OutPt2=a,!0):(a=this.DupOutPt(i,!0),s=this.DupOutPt(o,!1),i.Next=o,o.Prev=i,a.Prev=s,s.Next=a,e.OutPt1=i,e.OutPt2=a,!0))}if(l){for(a=i;i.Prev.Pt.Y===i.Pt.Y&&i.Prev!==a&&i.Prev!==o;)i=i.Prev;for(;a.Next.Pt.Y===a.Pt.Y&&a.Next!==i&&a.Next!==o;)a=a.Next;if(a.Next===i||a.Next===o)return!1;for(s=o;o.Prev.Pt.Y===o.Pt.Y&&o.Prev!==s&&o.Prev!==a;)o=o.Prev;for(;s.Next.Pt.Y===s.Pt.Y&&s.Next!==o&&s.Next!==i;)s=s.Next;if(s.Next===o||s.Next===i)return!1;var c={Left:null,Right:null};if(!this.GetOverlap(i.Pt.X,a.Pt.X,o.Pt.X,s.Pt.X,c))return!1;var f,h=c.Left,d=c.Right,p=new r.IntPoint0;return i.Pt.X>=h&&i.Pt.X<=d?(p.X=i.Pt.X,p.Y=i.Pt.Y,r.use_xyz&&(p.Z=i.Pt.Z),f=i.Pt.X>a.Pt.X):o.Pt.X>=h&&o.Pt.X<=d?(p.X=o.Pt.X,p.Y=o.Pt.Y,r.use_xyz&&(p.Z=o.Pt.Z),f=o.Pt.X>s.Pt.X):a.Pt.X>=h&&a.Pt.X<=d?(p.X=a.Pt.X,p.Y=a.Pt.Y,r.use_xyz&&(p.Z=a.Pt.Z),f=a.Pt.X>i.Pt.X):(p.X=s.Pt.X,p.Y=s.Pt.Y,r.use_xyz&&(p.Z=s.Pt.Z),f=s.Pt.X>o.Pt.X),e.OutPt1=i,e.OutPt2=o,this.JoinHorz(i,a,o,s,p,f)}for(a=i.Next;r.IntPoint.op_Equality(a.Pt,i.Pt)&&a!==i;)a=a.Next;var m=a.Pt.Y>i.Pt.Y||!r.ClipperBase.SlopesEqual4(i.Pt,a.Pt,e.OffPt,this.m_UseFullRange);if(m){for(a=i.Prev;r.IntPoint.op_Equality(a.Pt,i.Pt)&&a!==i;)a=a.Prev;if(a.Pt.Y>i.Pt.Y||!r.ClipperBase.SlopesEqual4(i.Pt,a.Pt,e.OffPt,this.m_UseFullRange))return!1}for(s=o.Next;r.IntPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Next;var v=s.Pt.Y>o.Pt.Y||!r.ClipperBase.SlopesEqual4(o.Pt,s.Pt,e.OffPt,this.m_UseFullRange);if(v){for(s=o.Prev;r.IntPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Prev;if(s.Pt.Y>o.Pt.Y||!r.ClipperBase.SlopesEqual4(o.Pt,s.Pt,e.OffPt,this.m_UseFullRange))return!1}return a!==i&&s!==o&&a!==s&&(t!==n||m!==v)&&(m?(a=this.DupOutPt(i,!1),s=this.DupOutPt(o,!0),i.Prev=o,o.Next=i,a.Next=s,s.Prev=a,e.OutPt1=i,e.OutPt2=a,!0):(a=this.DupOutPt(i,!0),s=this.DupOutPt(o,!1),i.Next=o,o.Prev=i,a.Prev=s,s.Next=a,e.OutPt1=i,e.OutPt2=a,!0))},r.Clipper.GetBounds=function(e){for(var t=0,n=e.length;t<n&&0===e[t].length;)t++;if(t===n)return new r.IntRect(0,0,0,0);var i=new r.IntRect;for(i.left=e[t][0].X,i.right=i.left,i.top=e[t][0].Y,i.bottom=i.top;t<n;t++)for(var a=0,o=e[t].length;a<o;a++)e[t][a].X<i.left?i.left=e[t][a].X:e[t][a].X>i.right&&(i.right=e[t][a].X),e[t][a].Y<i.top?i.top=e[t][a].Y:e[t][a].Y>i.bottom&&(i.bottom=e[t][a].Y);return i},r.Clipper.prototype.GetBounds2=function(e){var t=e,n=new r.IntRect;for(n.left=e.Pt.X,n.right=e.Pt.X,n.top=e.Pt.Y,n.bottom=e.Pt.Y,e=e.Next;e!==t;)e.Pt.X<n.left&&(n.left=e.Pt.X),e.Pt.X>n.right&&(n.right=e.Pt.X),e.Pt.Y<n.top&&(n.top=e.Pt.Y),e.Pt.Y>n.bottom&&(n.bottom=e.Pt.Y),e=e.Next;return n},r.Clipper.PointInPolygon=function(e,t){var r=0,n=t.length;if(n<3)return 0;for(var i=t[0],a=1;a<=n;++a){var o=a===n?t[0]:t[a];if(o.Y===e.Y&&(o.X===e.X||i.Y===e.Y&&o.X>e.X==i.X<e.X))return-1;if(i.Y<e.Y!=o.Y<e.Y)if(i.X>=e.X)if(o.X>e.X)r=1-r;else{if(0===(s=(i.X-e.X)*(o.Y-e.Y)-(o.X-e.X)*(i.Y-e.Y)))return-1;s>0==o.Y>i.Y&&(r=1-r)}else if(o.X>e.X){var s;if(0===(s=(i.X-e.X)*(o.Y-e.Y)-(o.X-e.X)*(i.Y-e.Y)))return-1;s>0==o.Y>i.Y&&(r=1-r)}i=o}return r},r.Clipper.prototype.PointInPolygon=function(e,t){var r=0,n=t,i=e.X,a=e.Y,o=t.Pt.X,s=t.Pt.Y;do{var l=(t=t.Next).Pt.X,u=t.Pt.Y;if(u===a&&(l===i||s===a&&l>i==o<i))return-1;if(s<a!=u<a)if(o>=i)if(l>i)r=1-r;else{if(0===(c=(o-i)*(u-a)-(l-i)*(s-a)))return-1;c>0==u>s&&(r=1-r)}else if(l>i){var c;if(0===(c=(o-i)*(u-a)-(l-i)*(s-a)))return-1;c>0==u>s&&(r=1-r)}o=l,s=u}while(n!==t);return r},r.Clipper.prototype.Poly2ContainsPoly1=function(e,t){var r=e;do{var n=this.PointInPolygon(r.Pt,t);if(n>=0)return n>0;r=r.Next}while(r!==e);return!0},r.Clipper.prototype.FixupFirstLefts1=function(e,t){for(var n,i,a=0,o=this.m_PolyOuts.length;a<o;a++)n=this.m_PolyOuts[a],i=r.Clipper.ParseFirstLeft(n.FirstLeft),null!==n.Pts&&i===e&&this.Poly2ContainsPoly1(n.Pts,t.Pts)&&(n.FirstLeft=t)},r.Clipper.prototype.FixupFirstLefts2=function(e,t){for(var n,i,a=t.FirstLeft,o=0,s=this.m_PolyOuts.length;o<s;o++)null!==(n=this.m_PolyOuts[o]).Pts&&n!==t&&n!==e&&((i=r.Clipper.ParseFirstLeft(n.FirstLeft))!==a&&i!==e&&i!==t||(this.Poly2ContainsPoly1(n.Pts,e.Pts)?n.FirstLeft=e:this.Poly2ContainsPoly1(n.Pts,t.Pts)?n.FirstLeft=t:n.FirstLeft!==e&&n.FirstLeft!==t||(n.FirstLeft=a)))},r.Clipper.prototype.FixupFirstLefts3=function(e,t){for(var n,i,a=0,o=this.m_PolyOuts.length;a<o;a++)n=this.m_PolyOuts[a],i=r.Clipper.ParseFirstLeft(n.FirstLeft),null!==n.Pts&&i===e&&(n.FirstLeft=t)},r.Clipper.ParseFirstLeft=function(e){for(;null!==e&&null===e.Pts;)e=e.FirstLeft;return e},r.Clipper.prototype.JoinCommonEdges=function(){for(var e=0,t=this.m_Joins.length;e<t;e++){var r,n=this.m_Joins[e],i=this.GetOutRec(n.OutPt1.Idx),a=this.GetOutRec(n.OutPt2.Idx);if(null!==i.Pts&&null!==a.Pts)if(!i.IsOpen&&!a.IsOpen)r=i===a?i:this.OutRec1RightOfOutRec2(i,a)?a:this.OutRec1RightOfOutRec2(a,i)?i:this.GetLowermostRec(i,a),this.JoinPoints(n,i,a)&&(i===a?(i.Pts=n.OutPt1,i.BottomPt=null,(a=this.CreateOutRec()).Pts=n.OutPt2,this.UpdateOutPtIdxs(a),this.Poly2ContainsPoly1(a.Pts,i.Pts)?(a.IsHole=!i.IsHole,a.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,i),(a.IsHole^this.ReverseSolution)==this.Area$1(a)>0&&this.ReversePolyPtLinks(a.Pts)):this.Poly2ContainsPoly1(i.Pts,a.Pts)?(a.IsHole=i.IsHole,i.IsHole=!a.IsHole,a.FirstLeft=i.FirstLeft,i.FirstLeft=a,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,a),(i.IsHole^this.ReverseSolution)==this.Area$1(i)>0&&this.ReversePolyPtLinks(i.Pts)):(a.IsHole=i.IsHole,a.FirstLeft=i.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(i,a))):(a.Pts=null,a.BottomPt=null,a.Idx=i.Idx,i.IsHole=r.IsHole,r===a&&(i.FirstLeft=a.FirstLeft),a.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts3(a,i)))}},r.Clipper.prototype.UpdateOutPtIdxs=function(e){var t=e.Pts;do{t.Idx=e.Idx,t=t.Prev}while(t!==e.Pts)},r.Clipper.prototype.DoSimplePolygons=function(){for(var e=0;e<this.m_PolyOuts.length;){var t=this.m_PolyOuts[e++],n=t.Pts;if(null!==n&&!t.IsOpen)do{for(var i=n.Next;i!==t.Pts;){if(r.IntPoint.op_Equality(n.Pt,i.Pt)&&i.Next!==n&&i.Prev!==n){var a=n.Prev,o=i.Prev;n.Prev=o,o.Next=n,i.Prev=a,a.Next=i,t.Pts=n;var s=this.CreateOutRec();s.Pts=i,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,t.Pts)?(s.IsHole=!t.IsHole,s.FirstLeft=t,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,t)):this.Poly2ContainsPoly1(t.Pts,s.Pts)?(s.IsHole=t.IsHole,t.IsHole=!s.IsHole,s.FirstLeft=t.FirstLeft,t.FirstLeft=s,this.m_UsingPolyTree&&this.FixupFirstLefts2(t,s)):(s.IsHole=t.IsHole,s.FirstLeft=t.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(t,s)),i=n}i=i.Next}n=n.Next}while(n!==t.Pts)}},r.Clipper.Area=function(e){if(!Array.isArray(e))return 0;var t=e.length;if(t<3)return 0;for(var r=0,n=0,i=t-1;n<t;++n)r+=(e[i].X+e[n].X)*(e[i].Y-e[n].Y),i=n;return.5*-r},r.Clipper.prototype.Area=function(e){var t=e;if(null===e)return 0;var r=0;do{r+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next}while(e!==t);return.5*r},r.Clipper.prototype.Area$1=function(e){return this.Area(e.Pts)},r.Clipper.SimplifyPolygon=function(e,t){var n=new Array,i=new r.Clipper(0);return i.StrictlySimple=!0,i.AddPath(e,r.PolyType.ptSubject,!0),i.Execute(r.ClipType.ctUnion,n,t,t),n},r.Clipper.SimplifyPolygons=function(e,t){void 0===t&&(t=r.PolyFillType.pftEvenOdd);var n=new Array,i=new r.Clipper(0);return i.StrictlySimple=!0,i.AddPaths(e,r.PolyType.ptSubject,!0),i.Execute(r.ClipType.ctUnion,n,t,t),n},r.Clipper.DistanceSqrd=function(e,t){var r=e.X-t.X,n=e.Y-t.Y;return r*r+n*n},r.Clipper.DistanceFromLineSqrd=function(e,t,r){var n=t.Y-r.Y,i=r.X-t.X,a=n*t.X+i*t.Y;return(a=n*e.X+i*e.Y-a)*a/(n*n+i*i)},r.Clipper.SlopesNearCollinear=function(e,t,n,i){return Math.abs(e.X-t.X)>Math.abs(e.Y-t.Y)?e.X>t.X==e.X<n.X?r.Clipper.DistanceFromLineSqrd(e,t,n)<i:t.X>e.X==t.X<n.X?r.Clipper.DistanceFromLineSqrd(t,e,n)<i:r.Clipper.DistanceFromLineSqrd(n,e,t)<i:e.Y>t.Y==e.Y<n.Y?r.Clipper.DistanceFromLineSqrd(e,t,n)<i:t.Y>e.Y==t.Y<n.Y?r.Clipper.DistanceFromLineSqrd(t,e,n)<i:r.Clipper.DistanceFromLineSqrd(n,e,t)<i},r.Clipper.PointsAreClose=function(e,t,r){var n=e.X-t.X,i=e.Y-t.Y;return n*n+i*i<=r},r.Clipper.ExcludeOp=function(e){var t=e.Prev;return t.Next=e.Next,e.Next.Prev=t,t.Idx=0,t},r.Clipper.CleanPolygon=function(e,t){void 0===t&&(t=1.415);var n=e.length;if(0===n)return new Array;for(var i=new Array(n),a=0;a<n;++a)i[a]=new r.OutPt;for(a=0;a<n;++a)i[a].Pt=e[a],i[a].Next=i[(a+1)%n],i[a].Next.Prev=i[a],i[a].Idx=0;for(var o=t*t,s=i[0];0===s.Idx&&s.Next!==s.Prev;)r.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,o)?(s=r.Clipper.ExcludeOp(s),n--):r.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,o)?(r.Clipper.ExcludeOp(s.Next),s=r.Clipper.ExcludeOp(s),n-=2):r.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,o)?(s=r.Clipper.ExcludeOp(s),n--):(s.Idx=1,s=s.Next);n<3&&(n=0);var l=new Array(n);for(a=0;a<n;++a)l[a]=new r.IntPoint1(s.Pt),s=s.Next;return i=null,l},r.Clipper.CleanPolygons=function(e,t){for(var n=new Array(e.length),i=0,a=e.length;i<a;i++)n[i]=r.Clipper.CleanPolygon(e[i],t);return n},r.Clipper.Minkowski=function(e,t,n,i){var a=i?1:0,o=e.length,s=t.length,l=new Array;if(n)for(var u=0;u<s;u++){for(var c=new Array(o),f=0,h=e.length,d=e[f];f<h;d=e[++f])c[f]=new r.IntPoint2(t[u].X+d.X,t[u].Y+d.Y);l.push(c)}else for(u=0;u<s;u++){for(c=new Array(o),f=0,h=e.length,d=e[f];f<h;d=e[++f])c[f]=new r.IntPoint2(t[u].X-d.X,t[u].Y-d.Y);l.push(c)}var p=new Array;for(u=0;u<s-1+a;u++)for(f=0;f<o;f++){var m=new Array;m.push(l[u%s][f%o]),m.push(l[(u+1)%s][f%o]),m.push(l[(u+1)%s][(f+1)%o]),m.push(l[u%s][(f+1)%o]),r.Clipper.Orientation(m)||m.reverse(),p.push(m)}return p},r.Clipper.MinkowskiSum=function(e,t,n){if(t[0]instanceof Array){u=t;for(var i=new r.Paths,a=(s=new r.Clipper,0);a<u.length;++a){var o=r.Clipper.Minkowski(e,u[a],!0,n);if(s.AddPaths(o,r.PolyType.ptSubject,!0),n){l=r.Clipper.TranslatePath(u[a],e[0]);s.AddPath(l,r.PolyType.ptClip,!0)}}return s.Execute(r.ClipType.ctUnion,i,r.PolyFillType.pftNonZero,r.PolyFillType.pftNonZero),i}var s,l=t,u=r.Clipper.Minkowski(e,l,!0,n);return(s=new r.Clipper).AddPaths(u,r.PolyType.ptSubject,!0),s.Execute(r.ClipType.ctUnion,u,r.PolyFillType.pftNonZero,r.PolyFillType.pftNonZero),u},r.Clipper.TranslatePath=function(e,t){for(var n=new r.Path,i=0;i<e.length;i++)n.push(new r.IntPoint2(e[i].X+t.X,e[i].Y+t.Y));return n},r.Clipper.MinkowskiDiff=function(e,t){var n=r.Clipper.Minkowski(e,t,!1,!0),i=new r.Clipper;return i.AddPaths(n,r.PolyType.ptSubject,!0),i.Execute(r.ClipType.ctUnion,n,r.PolyFillType.pftNonZero,r.PolyFillType.pftNonZero),n},r.Clipper.PolyTreeToPaths=function(e){var t=new Array;return r.Clipper.AddPolyNodeToPaths(e,r.Clipper.NodeType.ntAny,t),t},r.Clipper.AddPolyNodeToPaths=function(e,t,n){var i=!0;switch(t){case r.Clipper.NodeType.ntOpen:return;case r.Clipper.NodeType.ntClosed:i=!e.IsOpen}e.m_polygon.length>0&&i&&n.push(e.m_polygon);for(var a=0,o=e.Childs(),s=o.length,l=o[a];a<s;l=o[++a])r.Clipper.AddPolyNodeToPaths(l,t,n)},r.Clipper.OpenPathsFromPolyTree=function(e){for(var t=new r.Paths,n=0,i=e.ChildCount();n<i;n++)e.Childs()[n].IsOpen&&t.push(e.Childs()[n].m_polygon);return t},r.Clipper.ClosedPathsFromPolyTree=function(e){var t=new r.Paths;return r.Clipper.AddPolyNodeToPaths(e,r.Clipper.NodeType.ntClosed,t),t},I(r.Clipper,r.ClipperBase),r.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},r.ClipperOffset=function(e,t){void 0===e&&(e=2),void 0===t&&(t=r.ClipperOffset.def_arc_tolerance),this.m_destPolys=new r.Paths,this.m_srcPoly=new r.Path,this.m_destPoly=new r.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new r.IntPoint0,this.m_polyNodes=new r.PolyNode,this.MiterLimit=e,this.ArcTolerance=t,this.m_lowest.X=-1},r.ClipperOffset.two_pi=6.28318530717959,r.ClipperOffset.def_arc_tolerance=.25,r.ClipperOffset.prototype.Clear=function(){r.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},r.ClipperOffset.Round=r.Clipper.Round,r.ClipperOffset.prototype.AddPath=function(e,t,n){var i=e.length-1;if(!(i<0)){var a=new r.PolyNode;if(a.m_jointype=t,a.m_endtype=n,n===r.EndType.etClosedLine||n===r.EndType.etClosedPolygon)for(;i>0&&r.IntPoint.op_Equality(e[0],e[i]);)i--;a.m_polygon.push(e[0]);for(var o=0,s=0,l=1;l<=i;l++)r.IntPoint.op_Inequality(a.m_polygon[o],e[l])&&(o++,a.m_polygon.push(e[l]),(e[l].Y>a.m_polygon[s].Y||e[l].Y===a.m_polygon[s].Y&&e[l].X<a.m_polygon[s].X)&&(s=o));if(!(n===r.EndType.etClosedPolygon&&o<2)&&(this.m_polyNodes.AddChild(a),n===r.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new r.IntPoint2(this.m_polyNodes.ChildCount()-1,s);else{var u=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(a.m_polygon[s].Y>u.Y||a.m_polygon[s].Y===u.Y&&a.m_polygon[s].X<u.X)&&(this.m_lowest=new r.IntPoint2(this.m_polyNodes.ChildCount()-1,s))}}},r.ClipperOffset.prototype.AddPaths=function(e,t,r){for(var n=0,i=e.length;n<i;n++)this.AddPath(e[n],t,r)},r.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!r.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var e=0;e<this.m_polyNodes.ChildCount();e++){((t=this.m_polyNodes.Childs()[e]).m_endtype===r.EndType.etClosedPolygon||t.m_endtype===r.EndType.etClosedLine&&r.Clipper.Orientation(t.m_polygon))&&t.m_polygon.reverse()}else for(e=0;e<this.m_polyNodes.ChildCount();e++){var t;(t=this.m_polyNodes.Childs()[e]).m_endtype!==r.EndType.etClosedLine||r.Clipper.Orientation(t.m_polygon)||t.m_polygon.reverse()}},r.ClipperOffset.GetUnitNormal=function(e,t){var n=t.X-e.X,i=t.Y-e.Y;if(0===n&&0===i)return new r.DoublePoint2(0,0);var a=1/Math.sqrt(n*n+i*i);return n*=a,i*=a,new r.DoublePoint2(i,-n)},r.ClipperOffset.prototype.DoOffset=function(e){if(this.m_destPolys=new Array,this.m_delta=e,r.ClipperBase.near_zero(e))for(var t=0;t<this.m_polyNodes.ChildCount();t++){(a=this.m_polyNodes.Childs()[t]).m_endtype===r.EndType.etClosedPolygon&&this.m_destPolys.push(a.m_polygon)}else{var n;this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,n=this.ArcTolerance<=0?r.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(e)*r.ClipperOffset.def_arc_tolerance?Math.abs(e)*r.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var i=3.14159265358979/Math.acos(1-n/Math.abs(e));this.m_sin=Math.sin(r.ClipperOffset.two_pi/i),this.m_cos=Math.cos(r.ClipperOffset.two_pi/i),this.m_StepsPerRad=i/r.ClipperOffset.two_pi,e<0&&(this.m_sin=-this.m_sin);for(t=0;t<this.m_polyNodes.ChildCount();t++){var a=this.m_polyNodes.Childs()[t];this.m_srcPoly=a.m_polygon;var o=this.m_srcPoly.length;if(!(0===o||e<=0&&(o<3||a.m_endtype!==r.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!==o){this.m_normals.length=0;for(h=0;h<o-1;h++)this.m_normals.push(r.ClipperOffset.GetUnitNormal(this.m_srcPoly[h],this.m_srcPoly[h+1]));if(a.m_endtype===r.EndType.etClosedLine||a.m_endtype===r.EndType.etClosedPolygon?this.m_normals.push(r.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new r.DoublePoint1(this.m_normals[o-2])),a.m_endtype===r.EndType.etClosedPolygon){var s=o-1;for(h=0;h<o;h++)s=this.OffsetPoint(h,s,a.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(a.m_endtype===r.EndType.etClosedLine){for(s=o-1,h=0;h<o;h++)s=this.OffsetPoint(h,s,a.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var l=this.m_normals[o-1];for(h=o-1;h>0;h--)this.m_normals[h]=new r.DoublePoint2(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new r.DoublePoint2(-l.X,-l.Y),s=0;for(h=o-1;h>=0;h--)s=this.OffsetPoint(h,s,a.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{var u;for(s=0,h=1;h<o-1;++h)s=this.OffsetPoint(h,s,a.m_jointype);if(a.m_endtype===r.EndType.etOpenButt){h=o-1;u=new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[h].X+this.m_normals[h].X*e),r.ClipperOffset.Round(this.m_srcPoly[h].Y+this.m_normals[h].Y*e)),this.m_destPoly.push(u),u=new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[h].X-this.m_normals[h].X*e),r.ClipperOffset.Round(this.m_srcPoly[h].Y-this.m_normals[h].Y*e)),this.m_destPoly.push(u)}else{h=o-1;s=o-2,this.m_sinA=0,this.m_normals[h]=new r.DoublePoint2(-this.m_normals[h].X,-this.m_normals[h].Y),a.m_endtype===r.EndType.etOpenSquare?this.DoSquare(h,s):this.DoRound(h,s)}for(h=o-1;h>0;h--)this.m_normals[h]=new r.DoublePoint2(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new r.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y);for(h=(s=o-1)-1;h>0;--h)s=this.OffsetPoint(h,s,a.m_jointype);a.m_endtype===r.EndType.etOpenButt?(u=new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*e),r.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*e)),this.m_destPoly.push(u),u=new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*e),r.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*e)),this.m_destPoly.push(u)):(s=1,this.m_sinA=0,a.m_endtype===r.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(a.m_jointype===r.JoinType.jtRound)for(var c=1,f=0,h=1;h<=i;h++){this.m_destPoly.push(new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[0].X+c*e),r.ClipperOffset.Round(this.m_srcPoly[0].Y+f*e)));var d=c;c=c*this.m_cos-this.m_sin*f,f=d*this.m_sin+f*this.m_cos}else{c=-1,f=-1;for(var h=0;h<4;++h)this.m_destPoly.push(new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[0].X+c*e),r.ClipperOffset.Round(this.m_srcPoly[0].Y+f*e))),c<0?c=1:f<0?f=1:c=-1}this.m_destPolys.push(this.m_destPoly)}}}},r.ClipperOffset.prototype.Execute=function(){var e=arguments;if(e[0]instanceof r.PolyTree){a=e[0],o=e[1];if(a.Clear(),this.FixOrientations(),this.DoOffset(o),(i=new r.Clipper(0)).AddPaths(this.m_destPolys,r.PolyType.ptSubject,!0),o>0)i.Execute(r.ClipType.ctUnion,a,r.PolyFillType.pftPositive,r.PolyFillType.pftPositive);else{l=r.Clipper.GetBounds(this.m_destPolys);if((s=new r.Path).push(new r.IntPoint2(l.left-10,l.bottom+10)),s.push(new r.IntPoint2(l.right+10,l.bottom+10)),s.push(new r.IntPoint2(l.right+10,l.top-10)),s.push(new r.IntPoint2(l.left-10,l.top-10)),i.AddPath(s,r.PolyType.ptSubject,!0),i.ReverseSolution=!0,i.Execute(r.ClipType.ctUnion,a,r.PolyFillType.pftNegative,r.PolyFillType.pftNegative),1===a.ChildCount()&&a.Childs()[0].ChildCount()>0){var t=a.Childs()[0];a.Childs()[0]=t.Childs()[0],a.Childs()[0].m_Parent=a;for(var n=1;n<t.ChildCount();n++)a.AddChild(t.Childs()[n])}else a.Clear()}}else{var i,a=e[0],o=e[1];if(r.Clear(a),this.FixOrientations(),this.DoOffset(o),(i=new r.Clipper(0)).AddPaths(this.m_destPolys,r.PolyType.ptSubject,!0),o>0)i.Execute(r.ClipType.ctUnion,a,r.PolyFillType.pftPositive,r.PolyFillType.pftPositive);else{var s,l=r.Clipper.GetBounds(this.m_destPolys);(s=new r.Path).push(new r.IntPoint2(l.left-10,l.bottom+10)),s.push(new r.IntPoint2(l.right+10,l.bottom+10)),s.push(new r.IntPoint2(l.right+10,l.top-10)),s.push(new r.IntPoint2(l.left-10,l.top-10)),i.AddPath(s,r.PolyType.ptSubject,!0),i.ReverseSolution=!0,i.Execute(r.ClipType.ctUnion,a,r.PolyFillType.pftNegative,r.PolyFillType.pftNegative),a.length>0&&a.splice(0,1)}}},r.ClipperOffset.prototype.OffsetPoint=function(e,t,n){if(this.m_sinA=this.m_normals[t].X*this.m_normals[e].Y-this.m_normals[e].X*this.m_normals[t].Y,Math.abs(this.m_sinA*this.m_delta)<1){if(this.m_normals[t].X*this.m_normals[e].X+this.m_normals[e].Y*this.m_normals[t].Y>0)return this.m_destPoly.push(new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[t].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[t].Y*this.m_delta))),t}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[t].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[t].Y*this.m_delta))),this.m_destPoly.push(new r.IntPoint1(this.m_srcPoly[e])),this.m_destPoly.push(new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta)));else switch(n){case r.JoinType.jtMiter:var i=this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y+1;i>=this.m_miterLim?this.DoMiter(e,t,i):this.DoSquare(e,t);break;case r.JoinType.jtSquare:this.DoSquare(e,t);break;case r.JoinType.jtRound:this.DoRound(e,t)}return t=e},r.ClipperOffset.prototype.DoSquare=function(e,t){var n=Math.tan(Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y)/4);this.m_destPoly.push(new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[t].X-this.m_normals[t].Y*n)),r.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[t].Y+this.m_normals[t].X*n)))),this.m_destPoly.push(new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[e].X+this.m_normals[e].Y*n)),r.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[e].Y-this.m_normals[e].X*n))))},r.ClipperOffset.prototype.DoMiter=function(e,t,n){var i=this.m_delta/n;this.m_destPoly.push(new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[e].X+(this.m_normals[t].X+this.m_normals[e].X)*i),r.ClipperOffset.Round(this.m_srcPoly[e].Y+(this.m_normals[t].Y+this.m_normals[e].Y)*i)))},r.ClipperOffset.prototype.DoRound=function(e,t){for(var n,i=Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y),a=Math.max(r.Cast_Int32(r.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(i))),1),o=this.m_normals[t].X,s=this.m_normals[t].Y,l=0;l<a;++l)this.m_destPoly.push(new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[e].X+o*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[e].Y+s*this.m_delta))),n=o,o=o*this.m_cos-this.m_sin*s,s=n*this.m_sin+s*this.m_cos;this.m_destPoly.push(new r.IntPoint2(r.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta)))},r.Error=function(e){try{throw new Error(e)}catch(e){alert(e.message)}},r.JS={},r.JS.AreaOfPolygon=function(e,t){return t||(t=1),r.Clipper.Area(e)/(t*t)},r.JS.AreaOfPolygons=function(e,t){t||(t=1);for(var n=0,i=0;i<e.length;i++)n+=r.Clipper.Area(e[i]);return n/(t*t)},r.JS.BoundsOfPath=function(e,t){return r.JS.BoundsOfPaths([e],t)},r.JS.BoundsOfPaths=function(e,t){t||(t=1);var n=r.Clipper.GetBounds(e);return n.left/=t,n.bottom/=t,n.right/=t,n.top/=t,n},r.JS.Clean=function(e,t){if(!(e instanceof Array))return[];var n=e[0]instanceof Array;e=r.JS.Clone(e);if("number"!=typeof t||null===t)return r.Error("Delta is not a number in Clean()."),e;if(0===e.length||1===e.length&&0===e[0].length||t<0)return e;n||(e=[e]);for(var i,a,o,s,l,u,c,f=e.length,h=[],d=0;d<f;d++)if(0!==(i=(a=e[d]).length))if(i<3)o=a,h.push(o);else{for(o=a,s=t*t,l=a[0],u=1,c=1;c<i;c++)(a[c].X-l.X)*(a[c].X-l.X)+(a[c].Y-l.Y)*(a[c].Y-l.Y)<=s||(o[u]=a[c],l=a[c],u++);l=a[u-1],(a[0].X-l.X)*(a[0].X-l.X)+(a[0].Y-l.Y)*(a[0].Y-l.Y)<=s&&u--,u<i&&o.splice(u,i-u),o.length&&h.push(o)}return!n&&h.length?h=h[0]:n||0!==h.length?n&&0===h.length&&(h=[[]]):h=[],h},r.JS.Clone=function(e){if(!(e instanceof Array))return[];if(0===e.length)return[];if(1===e.length&&0===e[0].length)return[[]];var t=e[0]instanceof Array;t||(e=[e]);var r,n,i,a,o=e.length,s=new Array(o);for(n=0;n<o;n++){for(r=e[n].length,a=new Array(r),i=0;i<r;i++)a[i]={X:e[n][i].X,Y:e[n][i].Y};s[n]=a}return t||(s=s[0]),s},r.JS.Lighten=function(e,t){if(!(e instanceof Array))return[];if("number"!=typeof t||null===t)return r.Error("Tolerance is not a number in Lighten()."),r.JS.Clone(e);if(0===e.length||1===e.length&&0===e[0].length||t<0)return r.JS.Clone(e);var n,i,a,o,s,l,u,c,f,h,d,p,m,v,g,y,x=e[0]instanceof Array;x||(e=[e]);var b=e.length,w=t*t,_=[];for(n=0;n<b;n++)if(0!==(l=(a=e[n]).length)){for(o=0;o<1e6;o++){for(s=[],a[(l=a.length)-1].X!==a[0].X||a[l-1].Y!==a[0].Y?(d=1,a.push({X:a[0].X,Y:a[0].Y}),l=a.length):d=0,h=[],i=0;i<l-2;i++)u=a[i],f=a[i+1],c=a[i+2],g=u.X,y=u.Y,p=c.X-g,m=c.Y-y,0===p&&0===m||((v=((f.X-g)*p+(f.Y-y)*m)/(p*p+m*m))>1?(g=c.X,y=c.Y):v>0&&(g+=p*v,y+=m*v)),(p=f.X-g)*p+(m=f.Y-y)*m<=w&&(h[i+1]=1,i++);for(s.push({X:a[0].X,Y:a[0].Y}),i=1;i<l-1;i++)h[i]||s.push({X:a[i].X,Y:a[i].Y});if(s.push({X:a[l-1].X,Y:a[l-1].Y}),d&&a.pop(),!h.length)break;a=s}s[(l=s.length)-1].X===s[0].X&&s[l-1].Y===s[0].Y&&s.pop(),s.length>2&&_.push(s)}return x||(_=_[0]),void 0===_&&(_=[]),_},r.JS.PerimeterOfPath=function(e,t,r){if(void 0===e)return 0;var n,i,a=Math.sqrt,o=0,s=0,l=0,u=0,c=0,f=e.length;if(f<2)return 0;for(t&&(e[f]=e[0],f++);--f;)s=(n=e[f]).X,l=n.Y,o+=a((s-(u=(i=e[f-1]).X))*(s-u)+(l-(c=i.Y))*(l-c));return t&&e.pop(),o/r},r.JS.PerimeterOfPaths=function(e,t,n){n||(n=1);for(var i=0,a=0;a<e.length;a++)i+=r.JS.PerimeterOfPath(e[a],t,n);return i},r.JS.ScaleDownPath=function(e,t){var r,n;for(t||(t=1),r=e.length;r--;)(n=e[r]).X=n.X/t,n.Y=n.Y/t},r.JS.ScaleDownPaths=function(e,t){var r,n,i;for(t||(t=1),r=e.length;r--;)for(n=e[r].length;n--;)(i=e[r][n]).X=i.X/t,i.Y=i.Y/t},r.JS.ScaleUpPath=function(e,t){var r,n,i=Math.round;for(t||(t=1),r=e.length;r--;)(n=e[r]).X=i(n.X*t),n.Y=i(n.Y*t)},r.JS.ScaleUpPaths=function(e,t){var r,n,i,a=Math.round;for(t||(t=1),r=e.length;r--;)for(n=e[r].length;n--;)(i=e[r][n]).X=a(i.X*t),i.Y=a(i.Y*t)},r.ExPolygons=function(){return[]},r.ExPolygon=function(){this.outer=null,this.holes=null},r.JS.AddOuterPolyNodeToExPolygons=function(e,t){var n=new r.ExPolygon;n.outer=e.Contour();var i,a,o,s,l,u,c=e.Childs(),f=c.length;for(n.holes=new Array(f),o=0;o<f;o++)for(i=c[o],n.holes[o]=i.Contour(),s=0,u=(l=i.Childs()).length;s<u;s++)a=l[s],r.JS.AddOuterPolyNodeToExPolygons(a,t);t.push(n)},r.JS.ExPolygonsToPaths=function(e){var t,n,i,a,o=new r.Paths;for(t=0,i=e.length;t<i;t++)for(o.push(e[t].outer),n=0,a=e[t].holes.length;n<a;n++)o.push(e[t].holes[n]);return o},r.JS.PolyTreeToExPolygons=function(e){var t,n,i,a,o=new r.ExPolygons;for(n=0,a=(i=e.Childs()).length;n<a;n++)t=i[n],r.JS.AddOuterPolyNodeToExPolygons(t,o);return o}}()},function(e,t,r){"use strict";function n(e,t,r,n,i){return Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*t+3*(1-i)*Math.pow(i,2)*r+Math.pow(i,3)*n}function i(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},i.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},i.prototype.addX=function(e){this.addPoint(e,null)},i.prototype.addY=function(e){this.addPoint(null,e)},i.prototype.addBezier=function(e,t,r,i,a,o,s,l){var u=[e,t],c=[r,i],f=[a,o],h=[s,l];this.addPoint(e,t),this.addPoint(s,l);for(var d=0;d<=1;d++){var p=6*u[d]-12*c[d]+6*f[d],m=-3*u[d]+9*c[d]-9*f[d]+3*h[d],v=3*c[d]-3*u[d];if(0!==m){var g=Math.pow(p,2)-4*v*m;if(!(g<0)){var y=(-p+Math.sqrt(g))/(2*m);0<y&&y<1&&(0===d&&this.addX(n(u[d],c[d],f[d],h[d],y)),1===d&&this.addY(n(u[d],c[d],f[d],h[d],y)));var x=(-p-Math.sqrt(g))/(2*m);0<x&&x<1&&(0===d&&this.addX(n(u[d],c[d],f[d],h[d],x)),1===d&&this.addY(n(u[d],c[d],f[d],h[d],x)))}}else{if(0===p)continue;var b=-v/p;0<b&&b<1&&(0===d&&this.addX(n(u[d],c[d],f[d],h[d],b)),1===d&&this.addY(n(u[d],c[d],f[d],h[d],b)))}}},i.prototype.addQuad=function(e,t,r,n,i,a){var o=e+2/3*(r-e),s=t+2/3*(n-t),l=o+1/3*(i-e),u=s+1/3*(a-t);this.addBezier(e,t,o,s,l,u,i,a)},t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(26)),i=s(r(405)),a=s(r(109)),o=s(r(266));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){this.bindConstructorValues(e)}l.prototype.bindConstructorValues=function(e){var t,r;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,r=t||{commands:[]},{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(e){r=e}}))},l.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},l.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},l.prototype.getPath=function(e,t,r,n,i){e=void 0!==e?e:0,t=void 0!==t?t:0,r=void 0!==r?r:72;var s=void 0,l=void 0;n||(n={});var u=n.xScale,c=n.yScale;if(n.hinting&&i&&i.hinting&&(l=this.path&&i.hinting.exec(this,r)),l)s=o.default.getPath(l).commands,e=Math.round(e),t=Math.round(t),u=c=1;else{s=this.path.commands;var f=1/this.path.unitsPerEm*r;void 0===u&&(u=f),void 0===c&&(c=f)}for(var h=new a.default,d=0;d<s.length;d+=1){var p=s[d];"M"===p.type?h.moveTo(e+p.x*u,t+-p.y*c):"L"===p.type?h.lineTo(e+p.x*u,t+-p.y*c):"Q"===p.type?h.quadraticCurveTo(e+p.x1*u,t+-p.y1*c,e+p.x*u,t+-p.y*c):"C"===p.type?h.curveTo(e+p.x1*u,t+-p.y1*c,e+p.x2*u,t+-p.y2*c,e+p.x*u,t+-p.y*c):"Z"===p.type&&h.closePath()}return h},l.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var i=this.points[r];t.push(i),i.lastPointOfContour&&(e.push(t),t=[])}return n.default.argument(0===t.length,"There are still points left in the current contour."),e},l.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],n=0;n<e.length;n+=1){var i=e[n];"Z"!==i.type&&(t.push(i.x),r.push(i.y)),"Q"!==i.type&&"C"!==i.type||(t.push(i.x1),r.push(i.y1)),"C"===i.type&&(t.push(i.x2),r.push(i.y2))}var a={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(a.xMin)||(a.xMin=0),isFinite(a.xMax)||(a.xMax=this.advanceWidth),isFinite(a.yMin)||(a.yMin=0),isFinite(a.yMax)||(a.yMax=0),a.rightSideBearing=this.advanceWidth-a.leftSideBearing-(a.xMax-a.xMin),a},l.prototype.draw=function(e,t,r,n,i){this.getPath(t,r,n,i).draw(e)},l.prototype.drawPoints=function(e,t,r,n){function i(t,r,n,i){var a=2*Math.PI;e.beginPath();for(var o=0;o<t.length;o+=1)e.moveTo(r+t[o].x*i,n+t[o].y*i),e.arc(r+t[o].x*i,n+t[o].y*i,2,0,a,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24;for(var a=1/this.path.unitsPerEm*n,o=[],s=[],l=this.path,u=0;u<l.commands.length;u+=1){var c=l.commands[u];void 0!==c.x&&o.push({x:c.x,y:-c.y}),void 0!==c.x1&&s.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&s.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",i(o,t,r,a),e.fillStyle="red",i(s,t,r,a)},l.prototype.drawMetrics=function(e,t,r,n){var a;t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24,a=1/this.path.unitsPerEm*n,e.lineWidth=1,e.strokeStyle="black",i.default.line(e,t,-1e4,t,1e4),i.default.line(e,-1e4,r,1e4,r);var o=this.xMin||0,s=this.yMin||0,l=this.xMax||0,u=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",i.default.line(e,t+o*a,-1e4,t+o*a,1e4),i.default.line(e,t+l*a,-1e4,t+l*a,1e4),i.default.line(e,-1e4,r+-s*a,1e4,r+-s*a),i.default.line(e,-1e4,r+-u*a,1e4,r+-u*a),e.strokeStyle="green",i.default.line(e,t+c*a,-1e4,t+c*a,1e4)},t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadSync=t.load=t.parse=t._parse=t.BoundingBox=t.Path=t.Glyph=t.Font=void 0;var n=A(r(858)),i=A(r(406)),a=A(r(262)),o=r(139),s=A(r(22)),l=A(r(261)),u=A(r(109)),c=r(277),f=A(r(265)),h=A(r(264)),d=A(r(410)),p=A(r(266)),m=A(r(411)),v=A(r(267)),g=A(r(268)),y=A(r(269)),x=A(r(270)),b=A(r(412)),w=A(r(271)),_=A(r(413)),M=A(r(272)),S=A(r(274)),T=A(r(275)),E=A(r(276)),P=A(r(273));function A(e){return e&&e.__esModule?e:{default:e}}function C(e,t){r(254).readFile(e,function(e,r){if(e)return t(e.message);t(null,(0,c.nodeBufferToArrayBuffer)(r))})}function R(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return 200!==r.status?t("Font could not be loaded: "+r.statusText):t(null,r.response)},r.onerror=function(){t("Font could not be loaded")},r.send()}function I(e,t){for(var r=[],n=12,i=0;i<t;i+=1){var a=s.default.getTag(e,n),o=s.default.getULong(e,n+4),l=s.default.getULong(e,n+8),u=s.default.getULong(e,n+12);r.push({tag:a,checksum:o,offset:l,length:u,compression:!1}),n+=16}return r}function O(e,t){if("WOFF"===t.compression){var r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),i=new Uint8Array(t.length);if((0,n.default)(r,i),i.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(i.buffer,0),offset:0}}return{data:e,offset:t.offset}}function L(e){var t=void 0,r=void 0,n=new i.default({empty:!0}),a=new DataView(e,0),l=void 0,u=[],c=s.default.getTag(a,0);if(c===String.fromCharCode(0,1,0,0)||"true"===c||"typ1"===c)n.outlinesFormat="truetype",u=I(a,l=s.default.getUShort(a,4));else if("OTTO"===c)n.outlinesFormat="cff",u=I(a,l=s.default.getUShort(a,4));else{if("wOFF"!==c)throw new Error("Unsupported OpenType signature "+c);var A=s.default.getTag(a,4);if(A===String.fromCharCode(0,1,0,0))n.outlinesFormat="truetype";else{if("OTTO"!==A)throw new Error("Unsupported OpenType flavor "+c);n.outlinesFormat="cff"}u=function(e,t){for(var r=[],n=44,i=0;i<t;i+=1){var a=s.default.getTag(e,n),o=s.default.getULong(e,n+4),l=s.default.getULong(e,n+8),u=s.default.getULong(e,n+12),c=void 0;c=l<u&&"WOFF",r.push({tag:a,offset:o,compression:c,compressedLength:l,length:u}),n+=20}return r}(a,l=s.default.getUShort(a,12))}for(var C=void 0,R=void 0,L=void 0,D=void 0,N=void 0,V=void 0,F=void 0,B=void 0,U=void 0,k=void 0,z=void 0,G=0;G<l;G+=1){var j=u[G],H=void 0;switch(j.tag){case"cmap":H=O(a,j),n.tables.cmap=f.default.parse(H.data,H.offset),n.encoding=new o.CmapEncoding(n.tables.cmap);break;case"cvt ":H=O(a,j),z=new s.default.Parser(H.data,H.offset),n.tables.cvt=z.parseShortList(j.length/2);break;case"fvar":R=j;break;case"fpgm":H=O(a,j),z=new s.default.Parser(H.data,H.offset),n.tables.fpgm=z.parseByteList(j.length);break;case"head":H=O(a,j),n.tables.head=g.default.parse(H.data,H.offset),n.unitsPerEm=n.tables.head.unitsPerEm,t=n.tables.head.indexToLocFormat;break;case"hhea":H=O(a,j),n.tables.hhea=y.default.parse(H.data,H.offset),n.ascender=n.tables.hhea.ascender,n.descender=n.tables.hhea.descender,n.numberOfHMetrics=n.tables.hhea.numberOfHMetrics;break;case"hmtx":V=j;break;case"ltag":H=O(a,j),r=w.default.parse(H.data,H.offset);break;case"maxp":H=O(a,j),n.tables.maxp=M.default.parse(H.data,H.offset),n.numGlyphs=n.tables.maxp.numGlyphs;break;case"name":U=j;break;case"OS/2":H=O(a,j),n.tables.os2=T.default.parse(H.data,H.offset);break;case"post":H=O(a,j),n.tables.post=E.default.parse(H.data,H.offset),n.glyphNames=new o.GlyphNames(n.tables.post);break;case"prep":H=O(a,j),z=new s.default.Parser(H.data,H.offset),n.tables.prep=z.parseByteList(j.length);break;case"glyf":L=j;break;case"loca":B=j;break;case"CFF ":C=j;break;case"kern":F=j;break;case"GPOS":D=j;break;case"GSUB":N=j;break;case"meta":k=j}}var W=O(a,U);if(n.tables.name=S.default.parse(W.data,W.offset,r),n.names=n.tables.name,L&&B){var X=0===t,q=O(a,B),Y=_.default.parse(q.data,q.offset,n.numGlyphs,X),Z=O(a,L);n.glyphs=p.default.parse(Z.data,Z.offset,Y,n)}else{if(!C)throw new Error("Font doesn't contain TrueType or CFF outlines.");var J=O(a,C);h.default.parse(J.data,J.offset,n)}var Q=O(a,V);if(x.default.parse(Q.data,Q.offset,n.numberOfHMetrics,n.numGlyphs,n.glyphs),(0,o.addGlyphNames)(n),F){var K=O(a,F);n.kerningPairs=b.default.parse(K.data,K.offset)}else n.kerningPairs={};if(D){var $=O(a,D);m.default.parse($.data,$.offset,n)}if(N){var ee=O(a,N);n.tables.gsub=v.default.parse(ee.data,ee.offset)}if(R){var te=O(a,R);n.tables.fvar=d.default.parse(te.data,te.offset,n.names)}if(k){var re=O(a,k);n.tables.meta=P.default.parse(re.data,re.offset),n.metas=n.tables.meta}return n}t.Font=i.default,t.Glyph=a.default,t.Path=u.default,t.BoundingBox=l.default,t._parse=s.default,t.parse=L,t.load=function(e,t){("undefined"==typeof window?C:R)(e,function(e,r){if(e)return t(e);var n=void 0;try{n=L(r)}catch(e){return t(e,null)}return t(null,n)})},t.loadSync=function(e){var t=r(254).readFileSync(e);return L((0,c.nodeBufferToArrayBuffer)(t))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(139),i=l(r(180)),a=l(r(22)),o=l(r(109)),s=l(r(32));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!u(e[r],t[r]))return!1;return!0}return!1}function c(e){return e.length<1240?107:e.length<33900?1131:32768}function f(e,t,r){var n=[],i=[],o=a.default.getCard16(e,t),s=void 0,l=void 0;if(0!==o){var u=a.default.getByte(e,t+2);s=t+(o+1)*u+2;for(var c=t+3,f=0;f<o+1;f+=1)n.push(a.default.getOffset(e,c,u)),c+=u;l=s+n[o]}else l=t+2;for(var h=0;h<n.length-1;h+=1){var d=a.default.getBytes(e,s+n[h],s+n[h+1]);r&&(d=r(d)),i.push(d)}return{objects:i,startOffset:t,endOffset:l}}function h(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var n=e.parseByte(),i=n>>4,a=15&n;if(15===i)break;if(t+=r[i],15===a)break;t+=r[a]}return parseFloat(t)}(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return 256*(t-247)+e.parseByte()+108;if(t>=251&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function d(e,t,r){t=void 0!==t?t:0;var n=new a.default.Parser(e,t),i=[],o=[];for(r=void 0!==r?r:e.length;n.relativeOffset<r;){var s=n.parseByte();s<=21?(12===s&&(s=1200+n.parseByte()),i.push([s,o]),o=[]):o.push(h(n,s))}return function(e){for(var t={},r=0;r<e.length;r+=1){var n=e[r][0],i=e[r][1],a=void 0;if(a=1===i.length?i[0]:i,t.hasOwnProperty(n)&&!isNaN(t[n]))throw new Error("Object "+t+" already has key "+n);t[n]=a}return t}(i)}function p(e,t){return t=t<=390?n.cffStandardStrings[t]:e[t-391]}function m(e,t,r){for(var n={},i=void 0,a=0;a<t.length;a+=1){var o=t[a];if(Array.isArray(o.type)){var s=[];s.length=o.type.length;for(var l=0;l<o.type.length;l++)void 0===(i=void 0!==e[o.op]?e[o.op][l]:void 0)&&(i=void 0!==o.value&&void 0!==o.value[l]?o.value[l]:null),"SID"===o.type[l]&&(i=p(r,i)),s[l]=i;n[o.name]=s}else void 0===(i=e[o.op])&&(i=void 0!==o.value?o.value:null),"SID"===o.type&&(i=p(r,i)),n[o.name]=i}return n}var v=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],g=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function y(e,t){return m(d(e,0,e.byteLength),v,t)}function x(e,t,r,n){return m(d(e,t,r),g,n)}function b(e,t,r,n){for(var i=[],a=0;a<r.length;a+=1){var o=y(new DataView(new Uint8Array(r[a]).buffer),n);o._subrs=[],o._subrsBias=0;var s=o.private[0],l=o.private[1];if(0!==s&&0!==l){var u=x(e,l+t,s,n);if(o._defaultWidthX=u.defaultWidthX,o._nominalWidthX=u.nominalWidthX,0!==u.subrs){var h=f(e,l+u.subrs+t);o._subrs=h.objects,o._subrsBias=c(o._subrs)}o._privateDict=u}i.push(o)}return i}function w(e,t,r){var n=void 0,i=void 0,a=void 0,s=void 0,l=new o.default,u=[],c=0,f=!1,h=!1,d=0,p=0,m=void 0,v=void 0,g=void 0,y=void 0;if(e.isCIDFont){var x=e.tables.cff.topDict._fdSelect[t.index],b=e.tables.cff.topDict._fdArray[x];m=b._subrs,v=b._subrsBias,g=b._defaultWidthX,y=b._nominalWidthX}else m=e.tables.cff.topDict._subrs,v=e.tables.cff.topDict._subrsBias,g=e.tables.cff.topDict._defaultWidthX,y=e.tables.cff.topDict._nominalWidthX;var w=g;function _(e,t){h&&l.closePath(),l.moveTo(e,t),h=!0}function M(){u.length%2!=0&&!f&&(w=u.shift()+y),c+=u.length>>1,u.length=0,f=!0}return function r(o){for(var g=void 0,x=void 0,b=void 0,S=void 0,T=void 0,E=void 0,P=void 0,A=void 0,C=void 0,R=void 0,I=void 0,O=void 0,L=0;L<o.length;){var D=o[L];switch(L+=1,D){case 1:case 3:M();break;case 4:u.length>1&&!f&&(w=u.shift()+y,f=!0),p+=u.pop(),_(d,p);break;case 5:for(;u.length>0;)d+=u.shift(),p+=u.shift(),l.lineTo(d,p);break;case 6:for(;u.length>0&&(d+=u.shift(),l.lineTo(d,p),0!==u.length);)p+=u.shift(),l.lineTo(d,p);break;case 7:for(;u.length>0&&(p+=u.shift(),l.lineTo(d,p),0!==u.length);)d+=u.shift(),l.lineTo(d,p);break;case 8:for(;u.length>0;)n=d+u.shift(),i=p+u.shift(),a=n+u.shift(),s=i+u.shift(),d=a+u.shift(),p=s+u.shift(),l.curveTo(n,i,a,s,d,p);break;case 10:T=u.pop()+v,(E=m[T])&&r(E);break;case 11:return;case 12:switch(D=o[L],L+=1,D){case 35:n=d+u.shift(),i=p+u.shift(),a=n+u.shift(),s=i+u.shift(),P=a+u.shift(),A=s+u.shift(),C=P+u.shift(),R=A+u.shift(),I=C+u.shift(),O=R+u.shift(),d=I+u.shift(),p=O+u.shift(),u.shift(),l.curveTo(n,i,a,s,P,A),l.curveTo(C,R,I,O,d,p);break;case 34:n=d+u.shift(),i=p,a=n+u.shift(),s=i+u.shift(),P=a+u.shift(),A=s,C=P+u.shift(),R=s,I=C+u.shift(),O=p,d=I+u.shift(),l.curveTo(n,i,a,s,P,A),l.curveTo(C,R,I,O,d,p);break;case 36:n=d+u.shift(),i=p+u.shift(),a=n+u.shift(),s=i+u.shift(),P=a+u.shift(),A=s,C=P+u.shift(),R=s,I=C+u.shift(),O=R+u.shift(),d=I+u.shift(),l.curveTo(n,i,a,s,P,A),l.curveTo(C,R,I,O,d,p);break;case 37:n=d+u.shift(),i=p+u.shift(),a=n+u.shift(),s=i+u.shift(),P=a+u.shift(),A=s+u.shift(),C=P+u.shift(),R=A+u.shift(),I=C+u.shift(),O=R+u.shift(),Math.abs(I-d)>Math.abs(O-p)?d=I+u.shift():p=O+u.shift(),l.curveTo(n,i,a,s,P,A),l.curveTo(C,R,I,O,d,p);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+D),u.length=0}break;case 14:u.length>0&&!f&&(w=u.shift()+y,f=!0),h&&(l.closePath(),h=!1);break;case 18:M();break;case 19:case 20:M(),L+=c+7>>3;break;case 21:u.length>2&&!f&&(w=u.shift()+y,f=!0),p+=u.pop(),_(d+=u.pop(),p);break;case 22:u.length>1&&!f&&(w=u.shift()+y,f=!0),_(d+=u.pop(),p);break;case 23:M();break;case 24:for(;u.length>2;)n=d+u.shift(),i=p+u.shift(),a=n+u.shift(),s=i+u.shift(),d=a+u.shift(),p=s+u.shift(),l.curveTo(n,i,a,s,d,p);d+=u.shift(),p+=u.shift(),l.lineTo(d,p);break;case 25:for(;u.length>6;)d+=u.shift(),p+=u.shift(),l.lineTo(d,p);n=d+u.shift(),i=p+u.shift(),a=n+u.shift(),s=i+u.shift(),d=a+u.shift(),p=s+u.shift(),l.curveTo(n,i,a,s,d,p);break;case 26:for(u.length%2&&(d+=u.shift());u.length>0;)n=d,i=p+u.shift(),a=n+u.shift(),s=i+u.shift(),d=a,p=s+u.shift(),l.curveTo(n,i,a,s,d,p);break;case 27:for(u.length%2&&(p+=u.shift());u.length>0;)n=d+u.shift(),i=p,a=n+u.shift(),s=i+u.shift(),d=a+u.shift(),p=s,l.curveTo(n,i,a,s,d,p);break;case 28:g=o[L],x=o[L+1],u.push((g<<24|x<<16)>>16),L+=2;break;case 29:T=u.pop()+e.gsubrsBias,(E=e.gsubrs[T])&&r(E);break;case 30:for(;u.length>0&&(n=d,i=p+u.shift(),a=n+u.shift(),s=i+u.shift(),d=a+u.shift(),p=s+(1===u.length?u.shift():0),l.curveTo(n,i,a,s,d,p),0!==u.length);)n=d+u.shift(),i=p,a=n+u.shift(),s=i+u.shift(),p=s+u.shift(),d=a+(1===u.length?u.shift():0),l.curveTo(n,i,a,s,d,p);break;case 31:for(;u.length>0&&(n=d+u.shift(),i=p,a=n+u.shift(),s=i+u.shift(),p=s+u.shift(),d=a+(1===u.length?u.shift():0),l.curveTo(n,i,a,s,d,p),0!==u.length);)n=d,i=p+u.shift(),a=n+u.shift(),s=i+u.shift(),d=a+u.shift(),p=s+(1===u.length?u.shift():0),l.curveTo(n,i,a,s,d,p);break;default:D<32?console.log("Glyph "+t.index+": unknown operator "+D):D<247?u.push(D-139):D<251?(g=o[L],L+=1,u.push(256*(D-247)+g+108)):D<255?(g=o[L],L+=1,u.push(256*-(D-251)-g-108)):(g=o[L],x=o[L+1],b=o[L+2],S=o[L+3],L+=4,u.push((g<<24|x<<16|b<<8|S)/65536))}}}(r),t.advanceWidth=w,l}function _(e,t){var r=void 0,i=n.cffStandardStrings.indexOf(e);return i>=0&&(r=i),(i=t.indexOf(e))>=0?r=i+n.cffStandardStrings.length:(r=n.cffStandardStrings.length+t.length,t.push(e)),r}function M(e,t,r){for(var n={},i=0;i<e.length;i+=1){var a=e[i],o=t[a.name];void 0===o||u(o,a.value)||("SID"===a.type&&(o=_(o,r)),n[a.op]={name:a.name,type:a.type,value:o})}return n}function S(e,t){var r=new s.default.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=M(v,e,t),r}function T(e){var t=new s.default.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function E(e){var t=[],r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var n=0,i=0,a=0;a<r.commands.length;a+=1){var o=void 0,s=void 0,l=r.commands[a];if("Q"===l.type){l={type:"C",x:l.x,y:l.y,x1:1/3*n+2/3*l.x1,y1:1/3*i+2/3*l.y1,x2:1/3*l.x+2/3*l.x1,y2:1/3*l.y+2/3*l.y1}}if("M"===l.type)o=Math.round(l.x-n),s=Math.round(l.y-i),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(l.x),i=Math.round(l.y);else if("L"===l.type)o=Math.round(l.x-n),s=Math.round(l.y-i),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),n=Math.round(l.x),i=Math.round(l.y);else if("C"===l.type){var u=Math.round(l.x1-n),c=Math.round(l.y1-i),f=Math.round(l.x2-l.x1),h=Math.round(l.y2-l.y1);o=Math.round(l.x-l.x2),s=Math.round(l.y-l.y2),t.push({name:"dx1",type:"NUMBER",value:u}),t.push({name:"dy1",type:"NUMBER",value:c}),t.push({name:"dx2",type:"NUMBER",value:f}),t.push({name:"dy2",type:"NUMBER",value:h}),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(l.x),i=Math.round(l.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}t.default={parse:function(e,t,r){r.tables.cff={};var o=f(e,f(e,function(e,t){var r={};return r.formatMajor=a.default.getCard8(e,t),r.formatMinor=a.default.getCard8(e,t+1),r.size=a.default.getCard8(e,t+2),r.offsetSize=a.default.getCard8(e,t+3),r.startOffset=t,r.endOffset=t+4,r}(e,t).endOffset,a.default.bytesToString).endOffset),s=f(e,o.endOffset,a.default.bytesToString),l=f(e,s.endOffset);r.gsubrs=l.objects,r.gsubrsBias=c(r.gsubrs);var u=b(e,t,o.objects,s.objects);if(1!==u.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+u.length);var h=u[0];if(r.tables.cff.topDict=h,h._privateDict&&(r.defaultWidthX=h._privateDict.defaultWidthX,r.nominalWidthX=h._privateDict.nominalWidthX),void 0!==h.ros[0]&&void 0!==h.ros[1]&&(r.isCIDFont=!0),r.isCIDFont){var d=h.fdArray,m=h.fdSelect;if(0===d||0===m)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var v=b(e,t,f(e,d+=t).objects,s.objects);h._fdArray=v,m+=t,h._fdSelect=function(e,t,r,n){var i=[],o=void 0,s=new a.default.Parser(e,t),l=s.parseCard8();if(0===l)for(var u=0;u<r;u++){if((o=s.parseCard8())>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+n+")");i.push(o)}else{if(3!==l)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+l);var c=s.parseCard16(),f=s.parseCard16();if(0!==f)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+f);for(var h=void 0,d=0;d<c;d++){if(o=s.parseCard8(),h=s.parseCard16(),o>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+n+")");if(h>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+h);for(;f<h;f++)i.push(o);f=h}if(h!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+h)}return i}(e,m,r.numGlyphs,v.length)}var g=t+h.private[1],y=x(e,g,h.private[0],s.objects);if(r.defaultWidthX=y.defaultWidthX,r.nominalWidthX=y.nominalWidthX,0!==y.subrs){var _=f(e,g+y.subrs);r.subrs=_.objects,r.subrsBias=c(r.subrs)}else r.subrs=[],r.subrsBias=0;var M=f(e,t+h.charStrings);r.nGlyphs=M.objects.length;var S=function(e,t,r,n){var i=void 0,o=void 0,s=new a.default.Parser(e,t);r-=1;var l=[".notdef"],u=s.parseCard8();if(0===u)for(var c=0;c<r;c+=1)i=s.parseSID(),l.push(p(n,i));else if(1===u)for(;l.length<=r;){i=s.parseSID(),o=s.parseCard8();for(var f=0;f<=o;f+=1)l.push(p(n,i)),i+=1}else{if(2!==u)throw new Error("Unknown charset format "+u);for(;l.length<=r;){i=s.parseSID(),o=s.parseCard16();for(var h=0;h<=o;h+=1)l.push(p(n,i)),i+=1}}return l}(e,t+h.charset,r.nGlyphs,s.objects);0===h.encoding?r.cffEncoding=new n.CffEncoding(n.cffStandardEncoding,S):1===h.encoding?r.cffEncoding=new n.CffEncoding(n.cffExpertEncoding,S):r.cffEncoding=function(e,t,r){var i=void 0,o={},s=new a.default.Parser(e,t),l=s.parseCard8();if(0===l)for(var u=s.parseCard8(),c=0;c<u;c+=1)o[i=s.parseCard8()]=c;else{if(1!==l)throw new Error("Unknown encoding format "+l);var f=s.parseCard8();i=1;for(var h=0;h<f;h+=1)for(var d=s.parseCard8(),p=s.parseCard8(),m=d;m<=d+p;m+=1)o[m]=i,i+=1}return new n.CffEncoding(o,r)}(e,t+h.encoding,S),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new i.default.GlyphSet(r);for(var T=0;T<r.nGlyphs;T+=1){var E=M.objects[T];r.glyphs.push(T,i.default.cffGlyphLoader(r,T,w,E))}},make:function(e,t){for(var r=new s.default.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),n=1/t.unitsPerEm,i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[n,0,0,n,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},a=[],o=void 0,l=1;l<e.length;l+=1)o=e.get(l),a.push(o.name);var u=[];r.header=new s.default.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),r.nameIndex=function(e){var t=new s.default.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}([t.postScriptName]);var c=S(i,u);r.topDictIndex=T(c),r.globalSubrIndex=new s.default.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),r.charsets=function(e,t){for(var r=new s.default.Record("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n<e.length;n+=1){var i=_(e[n],t);r.fields.push({name:"glyph_"+n,type:"SID",value:i})}return r}(a,u),r.charStringsIndex=function(e){for(var t=new s.default.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var n=e.get(r),i=E(n);t.charStrings.push({name:n.name,type:"CHARSTRING",value:i})}return t}(e),r.privateDict=function(e,t){var r=new s.default.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=M(g,e,t),r}({},u),r.stringIndex=function(e){var t=new s.default.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}(u);var f=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return i.charset=f,i.encoding=0,i.charStrings=i.charset+r.charsets.sizeOf(),i.private[1]=i.charStrings+r.charStringsIndex.sizeOf(),c=S(i,u),r.topDictIndex=T(c),r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(26)),i=o(r(22)),a=o(r(32));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0})}t.default={parse:function(e,t){var r={};r.version=i.default.getUShort(e,t),n.default.argument(0===r.version,"cmap table version should be 0."),r.numTables=i.default.getUShort(e,t+2);for(var a=-1,o=r.numTables-1;o>=0;o-=1){var s=i.default.getUShort(e,t+4+8*o),l=i.default.getUShort(e,t+4+8*o+2);if(3===s&&(0===l||1===l||10===l)){a=i.default.getULong(e,t+4+8*o+4);break}}if(-1===a)throw new Error("No valid cmap sub-tables found.");var u=new i.default.Parser(e,t+a);if(r.format=u.parseUShort(),12===r.format)!function(e,t){var r;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=r=t.parseULong(),e.glyphIndexMap={};for(var n=0;n<r;n+=1)for(var i=t.parseULong(),a=t.parseULong(),o=t.parseULong(),s=i;s<=a;s+=1)e.glyphIndexMap[s]=o,o++}(r,u);else{if(4!==r.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");!function(e,t,r,n,a){var o;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=o=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var s=new i.default.Parser(r,n+a+14),l=new i.default.Parser(r,n+a+16+2*o),u=new i.default.Parser(r,n+a+16+4*o),c=new i.default.Parser(r,n+a+16+6*o),f=n+a+16+8*o,h=0;h<o-1;h+=1)for(var d=void 0,p=s.parseUShort(),m=l.parseUShort(),v=u.parseShort(),g=c.parseUShort(),y=m;y<=p;y+=1)0!==g?(f=c.offset+c.relativeOffset-2,f+=g,f+=2*(y-m),0!==(d=i.default.getUShort(r,f))&&(d=d+v&65535)):d=y+v&65535,e.glyphIndexMap[y]=d}(r,u,e,t,a)}return r},make:function(e){var t,r=new a.default.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);r.segments=[];for(var n=0;n<e.length;n+=1){for(var i=e.get(n),o=0;o<i.unicodes.length;o+=1)s(r,i.unicodes[o],n);r.segments=r.segments.sort(function(e,t){return e.start-t.start})}!function(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}(r),t=r.segments.length,r.segCountX2=2*t,r.searchRange=2*Math.pow(2,Math.floor(Math.log(t)/Math.log(2))),r.entrySelector=Math.log(r.searchRange/2)/Math.log(2),r.rangeShift=r.segCountX2-r.searchRange;for(var l=[],u=[],c=[],f=[],h=[],d=0;d<t;d+=1){var p=r.segments[d];l=l.concat({name:"end_"+d,type:"USHORT",value:p.end}),u=u.concat({name:"start_"+d,type:"USHORT",value:p.start}),c=c.concat({name:"idDelta_"+d,type:"SHORT",value:p.delta}),f=f.concat({name:"idRangeOffset_"+d,type:"USHORT",value:p.offset}),void 0!==p.glyphId&&(h=h.concat({name:"glyph_"+d,type:"USHORT",value:p.glyphId}))}return r.fields=r.fields.concat(l),r.fields.push({name:"reservedPad",type:"USHORT",value:0}),r.fields=r.fields.concat(u),r.fields=r.fields.concat(c),r.fields=r.fields.concat(f),r.fields=r.fields.concat(h),r.length=14+2*l.length+2+2*u.length+2*c.length+2*f.length+2*h.length,r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(26)),i=s(r(180)),a=s(r(22)),o=s(r(109));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r,n,i){var a=void 0;return(t&n)>0?(a=e.parseByte(),0==(t&i)&&(a=-a),a=r+a):a=(t&i)>0?r:r+e.parseShort(),a}function u(e,t,r){var i=new a.default.Parser(t,r);e.numberOfContours=i.parseShort(),e._xMin=i.parseShort(),e._yMin=i.parseShort(),e._xMax=i.parseShort(),e._yMax=i.parseShort();var o=void 0,s=void 0;if(e.numberOfContours>0){for(var u=e.endPointIndices=[],c=0;c<e.numberOfContours;c+=1)u.push(i.parseUShort());e.instructionLength=i.parseUShort(),e.instructions=[];for(var f=0;f<e.instructionLength;f+=1)e.instructions.push(i.parseByte());var h=u[u.length-1]+1;o=[];for(var d=0;d<h;d+=1)if(s=i.parseByte(),o.push(s),(8&s)>0)for(var p=i.parseByte(),m=0;m<p;m+=1)o.push(s),d+=1;if(n.default.argument(o.length===h,"Bad flags."),u.length>0){var v=[],g=void 0;if(h>0){for(var y=0;y<h;y+=1)s=o[y],(g={}).onCurve=!!(1&s),g.lastPointOfContour=u.indexOf(y)>=0,v.push(g);for(var x=0,b=0;b<h;b+=1)s=o[b],(g=v[b]).x=l(i,s,x,2,16),x=g.x;for(var w=0,_=0;_<h;_+=1)s=o[_],(g=v[_]).y=l(i,s,w,4,32),w=g.y}e.points=v}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var M=!0;M;){o=i.parseUShort();var S={glyphIndex:i.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&o)>0?(2&o)>0?(S.dx=i.parseShort(),S.dy=i.parseShort()):S.matchedPoints=[i.parseUShort(),i.parseUShort()]:(2&o)>0?(S.dx=i.parseChar(),S.dy=i.parseChar()):S.matchedPoints=[i.parseByte(),i.parseByte()],(8&o)>0?S.xScale=S.yScale=i.parseF2Dot14():(64&o)>0?(S.xScale=i.parseF2Dot14(),S.yScale=i.parseF2Dot14()):(128&o)>0&&(S.xScale=i.parseF2Dot14(),S.scale01=i.parseF2Dot14(),S.scale10=i.parseF2Dot14(),S.yScale=i.parseF2Dot14()),e.components.push(S),M=!!(32&o)}if(256&o){e.instructionLength=i.parseUShort(),e.instructions=[];for(var T=0;T<e.instructionLength;T+=1)e.instructions.push(i.parseByte())}}}function c(e,t){for(var r=[],n=0;n<e.length;n+=1){var i=e[n],a={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};r.push(a)}return r}function f(e){var t=new o.default;if(!e)return t;for(var r=function(e){for(var t=[],r=[],i=0;i<e.length;i+=1){var a=e[i];r.push(a),a.lastPointOfContour&&(t.push(r),r=[])}return n.default.argument(0===r.length,"There are still points left in the current contour."),t}(e),i=0;i<r.length;++i){var a=r[i],s=null,l=a[a.length-1],u=a[0];if(l.onCurve)t.moveTo(l.x,l.y);else if(u.onCurve)t.moveTo(u.x,u.y);else{var c={x:.5*(l.x+u.x),y:.5*(l.y+u.y)};t.moveTo(c.x,c.y)}for(var f=0;f<a.length;++f)if(s=l,l=u,u=a[(f+1)%a.length],l.onCurve)t.lineTo(l.x,l.y);else{var h=s,d=u;s.onCurve||(h={x:.5*(l.x+s.x),y:.5*(l.y+s.y)},t.lineTo(h.x,h.y)),u.onCurve||(d={x:.5*(l.x+u.x),y:.5*(l.y+u.y)}),t.lineTo(h.x,h.y),t.quadraticCurveTo(l.x,l.y,d.x,d.y)}t.closePath()}return t}function h(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var n=t.components[r],i=e.get(n.glyphIndex);if(i.getPath(),i.points){var a=void 0;if(void 0===n.matchedPoints)a=c(i.points,n);else{if(n.matchedPoints[0]>t.points.length-1||n.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+t.name);var o=t.points[n.matchedPoints[0]],s=i.points[n.matchedPoints[1]],l={xScale:n.xScale,scale01:n.scale01,scale10:n.scale10,yScale:n.yScale,dx:0,dy:0};s=c([s],l)[0],l.dx=o.x-s.x,l.dy=o.y-s.y,a=c(i.points,l)}t.points=t.points.concat(a)}}return f(t.points)}t.default={getPath:f,parse:function(e,t,r,n){for(var a=new i.default.GlyphSet(n),o=0;o<r.length-1;o+=1){var s=r[o];s!==r[o+1]?a.push(o,i.default.ttfGlyphLoader(n,o,u,e,t+s,h)):a.push(o,i.default.glyphLoader(n,o))}return a}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(26)),i=r(22),a=o(r(32));function o(e){return e&&e.__esModule?e:{default:e}}var s=new Array(9);s[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(i.Parser.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(i.Parser.coverage),substitute:this.parseOffset16List()}:void n.default.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},s[2]=function(){var e=this.parseUShort();return n.default.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(i.Parser.coverage),sequences:this.parseListOfLists()}},s[3]=function(){var e=this.parseUShort();return n.default.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(i.Parser.coverage),alternateSets:this.parseListOfLists()}},s[4]=function(){var e=this.parseUShort();return n.default.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(i.Parser.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var l={sequenceIndex:i.Parser.uShort,lookupListIndex:i.Parser.uShort};s[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(i.Parser.coverage),ruleSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,l)}})};if(2===t)return{substFormat:t,coverage:this.parsePointer(i.Parser.coverage),classDef:this.parsePointer(i.Parser.classDef),classSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,l)}})};if(3===t){var r=this.parseUShort(),a=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,i.Parser.pointer(i.Parser.coverage)),lookupRecords:this.parseRecordList(a,l)}}n.default.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},s[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(i.Parser.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(l)}})}:2===t?{substFormat:2,coverage:this.parsePointer(i.Parser.coverage),backtrackClassDef:this.parsePointer(i.Parser.classDef),inputClassDef:this.parsePointer(i.Parser.classDef),lookaheadClassDef:this.parsePointer(i.Parser.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(l)}})}:3===t?{substFormat:3,backtrackCoverage:this.parseList(i.Parser.pointer(i.Parser.coverage)),inputCoverage:this.parseList(i.Parser.pointer(i.Parser.coverage)),lookaheadCoverage:this.parseList(i.Parser.pointer(i.Parser.coverage)),lookupRecords:this.parseRecordList(l)}:void n.default.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},s[7]=function(){var e=this.parseUShort();n.default.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new i.Parser(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:s[t].call(r)}},s[8]=function(){var e=this.parseUShort();return n.default.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(i.Parser.coverage),backtrackCoverage:this.parseList(i.Parser.pointer(i.Parser.coverage)),lookaheadCoverage:this.parseList(i.Parser.pointer(i.Parser.coverage)),substitutes:this.parseUShortList()}};var u=new Array(9);u[1]=function(e){return 1===e.substFormat?new a.default.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new a.default.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new a.default.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new a.default.Coverage(e.coverage)}].concat(a.default.ushortList("substitute",e.substitute)))},u[3]=function(e){return n.default.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new a.default.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new a.default.Coverage(e.coverage)}].concat(a.default.tableList("altSet",e.alternateSets,function(e){return new a.default.Table("alternateSetTable",a.default.ushortList("alternate",e))})))},u[4]=function(e){return n.default.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new a.default.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new a.default.Coverage(e.coverage)}].concat(a.default.tableList("ligSet",e.ligatureSets,function(e){return new a.default.Table("ligatureSetTable",a.default.tableList("ligature",e,function(e){return new a.default.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(a.default.ushortList("component",e.components,e.components.length+1)))}))})))},t.default={parse:function(e,t){t=t||0;var r=new i.Parser(e,t),a=r.parseVersion();return n.default.argument(1===a,"Unsupported GSUB table version."),{version:a,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(s)}},make:function(e){return new a.default.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new a.default.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new a.default.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new a.default.LookupList(e.lookups,u)}])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(26)),i=o(r(22)),a=o(r(32));function o(e){return e&&e.__esModule?e:{default:e}}t.default={parse:function(e,t){var r={},a=new i.default.Parser(e,t);return r.version=a.parseVersion(),r.fontRevision=Math.round(1e3*a.parseFixed())/1e3,r.checkSumAdjustment=a.parseULong(),r.magicNumber=a.parseULong(),n.default.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=a.parseUShort(),r.unitsPerEm=a.parseUShort(),r.created=a.parseLongDateTime(),r.modified=a.parseLongDateTime(),r.xMin=a.parseShort(),r.yMin=a.parseShort(),r.xMax=a.parseShort(),r.yMax=a.parseShort(),r.macStyle=a.parseUShort(),r.lowestRecPPEM=a.parseUShort(),r.fontDirectionHint=a.parseShort(),r.indexToLocFormat=a.parseShort(),r.glyphDataFormat=a.parseShort(),r},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new a.default.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(22)),i=a(r(32));function a(e){return e&&e.__esModule?e:{default:e}}t.default={parse:function(e,t){var r={},i=new n.default.Parser(e,t);return r.version=i.parseVersion(),r.ascender=i.parseShort(),r.descender=i.parseShort(),r.lineGap=i.parseShort(),r.advanceWidthMax=i.parseUShort(),r.minLeftSideBearing=i.parseShort(),r.minRightSideBearing=i.parseShort(),r.xMaxExtent=i.parseShort(),r.caretSlopeRise=i.parseShort(),r.caretSlopeRun=i.parseShort(),r.caretOffset=i.parseShort(),i.relativeOffset+=8,r.metricDataFormat=i.parseShort(),r.numberOfHMetrics=i.parseUShort(),r},make:function(e){return new i.default.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(22)),i=a(r(32));function a(e){return e&&e.__esModule?e:{default:e}}t.default={parse:function(e,t,r,i,a){for(var o=void 0,s=void 0,l=new n.default.Parser(e,t),u=0;u<i;u+=1){u<r&&(o=l.parseUShort(),s=l.parseShort());var c=a.get(u);c.advanceWidth=o,c.leftSideBearing=s}},make:function(e){for(var t=new i.default.Table("hmtx",[]),r=0;r<e.length;r+=1){var n=e.get(r),a=n.advanceWidth||0,o=n.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:a}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:o})}return t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(26)),i=o(r(22)),a=o(r(32));function o(e){return e&&e.__esModule?e:{default:e}}t.default={make:function(e){for(var t=new a.default.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),r="",n=12+4*e.length,i=0;i<e.length;++i){var o=r.indexOf(e[i]);o<0&&(o=r.length,r+=e[i]),t.fields.push({name:"offset "+i,type:"USHORT",value:n+o}),t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t},parse:function(e,t){var r=new i.default.Parser(e,t),a=r.parseULong();n.default.argument(1===a,"Unsupported ltag table version."),r.skip("uLong",1);for(var o=r.parseULong(),s=[],l=0;l<o;l++){for(var u="",c=t+r.parseUShort(),f=r.parseUShort(),h=c;h<c+f;++h)u+=String.fromCharCode(e.getInt8(h));s.push(u)}return s}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(22)),i=a(r(32));function a(e){return e&&e.__esModule?e:{default:e}}t.default={parse:function(e,t){var r={},i=new n.default.Parser(e,t);return r.version=i.parseVersion(),r.numGlyphs=i.parseUShort(),1===r.version&&(r.maxPoints=i.parseUShort(),r.maxContours=i.parseUShort(),r.maxCompositePoints=i.parseUShort(),r.maxCompositeContours=i.parseUShort(),r.maxZones=i.parseUShort(),r.maxTwilightPoints=i.parseUShort(),r.maxStorage=i.parseUShort(),r.maxFunctionDefs=i.parseUShort(),r.maxInstructionDefs=i.parseUShort(),r.maxStackElements=i.parseUShort(),r.maxSizeOfInstructions=i.parseUShort(),r.maxComponentElements=i.parseUShort(),r.maxComponentDepth=i.parseUShort()),r},make:function(e){return new i.default.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(6)),i=l(r(26)),a=r(181),o=l(r(22)),s=l(r(32));function l(e){return e&&e.__esModule?e:{default:e}}t.default={parse:function(e,t){var r=new o.default.Parser(e,t),n=r.parseULong();i.default.argument(1===n,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var s=r.parseULong(),l={},u=0;u<s;u++){var c=r.parseTag(),f=r.parseULong(),h=r.parseULong(),d=a.decode.UTF8(e,t+f,h);l[c]=d}return l},make:function(e){var t=(0,n.default)(e).length,r="",i=16+12*t,a=new s.default.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:i},{name:"numTags",type:"ULONG",value:t}]);for(var o in e){var l=r.length;r+=e[o],a.fields.push({name:"tag "+o,type:"TAG",value:o}),a.fields.push({name:"offset "+o,type:"ULONG",value:i+l}),a.fields.push({name:"length "+o,type:"ULONG",value:e[o].length})}return a.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),a}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(181),i=o(r(22)),a=o(r(32));function o(e){return e&&e.__esModule?e:{default:e}}var s=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],l={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},u={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},c={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function f(e,t,r){switch(e){case 0:if(65535===t)return"und";if(r)return r[t];break;case 1:return l[t];case 3:return c[t]}}var h="utf-16",d={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},p={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function m(e,t,r){switch(e){case 0:return h;case 1:return p[r]||d[t];case 3:if(1===t||10===t)return h}}function v(e){var t={};for(var r in e)t[e[r]]=parseInt(r);return t}function g(e,t,r,n,i,o){return new a.default.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:o}])}function y(e,t){var r=function(e,t){var r=e.length,n=t.length-r+1;e:for(var i=0;i<n;i++)for(;i<n;i++){for(var a=0;a<r;a++)if(t[i+a]!==e[a])continue e;return i}return-1}(e,t);if(r<0){r=t.length;for(var n=0,i=e.length;n<i;++n)t.push(e[n])}return r}t.default={parse:function(e,t,r){for(var a={},o=new i.default.Parser(e,t),l=o.parseUShort(),u=o.parseUShort(),c=o.offset+o.parseUShort(),d=0;d<u;d++){var p=o.parseUShort(),v=o.parseUShort(),g=o.parseUShort(),y=o.parseUShort(),x=s[y]||y,b=o.parseUShort(),w=o.parseUShort(),_=f(p,g,r),M=m(p,v,g);if(void 0!==M&&void 0!==_){var S=void 0;if(S=M===h?n.decode.UTF16(e,c+w,b):n.decode.MACSTRING(e,c+w,b,M)){var T=a[x];void 0===T&&(T=a[x]={}),T[_]=S}}}return 1===l&&o.parseUShort(),a},make:function(e,t){var r=void 0,i=[],o={},f=v(s);for(var h in e){var d=f[h];if(void 0===d&&(d=h),r=parseInt(d),isNaN(r))throw new Error('Name table entry "'+h+'" does not exist, see nameTableNames for complete list.');o[r]=e[h],i.push(r)}for(var p=v(l),x=v(c),b=[],w=[],_=0;_<i.length;_++){var M=o[r=i[_]];for(var S in M){var T=M[S],E=1,P=p[S],A=u[P],C=m(E,A,P),R=n.encode.MACSTRING(T,C);void 0===R&&(E=0,(P=t.indexOf(S))<0&&(P=t.length,t.push(S)),A=4,R=n.encode.UTF16(T));var I=y(R,w);b.push(g(E,A,P,r,R.length,I));var O=x[S];if(void 0!==O){var L=n.encode.UTF16(T),D=y(L,w);b.push(g(3,1,O,r,L.length,D))}}}b.sort(function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID});for(var N=new a.default.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:b.length},{name:"stringOffset",type:"USHORT",value:6+12*b.length}]),V=0;V<b.length;V++)N.fields.push({name:"record_"+V,type:"RECORD",value:b[V]});return N.fields.push({name:"strings",type:"LITERAL",value:w}),N}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(22)),i=a(r(32));function a(e){return e&&e.__esModule?e:{default:e}}var o=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];t.default={parse:function(e,t){var r={},i=new n.default.Parser(e,t);r.version=i.parseUShort(),r.xAvgCharWidth=i.parseShort(),r.usWeightClass=i.parseUShort(),r.usWidthClass=i.parseUShort(),r.fsType=i.parseUShort(),r.ySubscriptXSize=i.parseShort(),r.ySubscriptYSize=i.parseShort(),r.ySubscriptXOffset=i.parseShort(),r.ySubscriptYOffset=i.parseShort(),r.ySuperscriptXSize=i.parseShort(),r.ySuperscriptYSize=i.parseShort(),r.ySuperscriptXOffset=i.parseShort(),r.ySuperscriptYOffset=i.parseShort(),r.yStrikeoutSize=i.parseShort(),r.yStrikeoutPosition=i.parseShort(),r.sFamilyClass=i.parseShort(),r.panose=[];for(var a=0;a<10;a++)r.panose[a]=i.parseByte();return r.ulUnicodeRange1=i.parseULong(),r.ulUnicodeRange2=i.parseULong(),r.ulUnicodeRange3=i.parseULong(),r.ulUnicodeRange4=i.parseULong(),r.achVendID=String.fromCharCode(i.parseByte(),i.parseByte(),i.parseByte(),i.parseByte()),r.fsSelection=i.parseUShort(),r.usFirstCharIndex=i.parseUShort(),r.usLastCharIndex=i.parseUShort(),r.sTypoAscender=i.parseShort(),r.sTypoDescender=i.parseShort(),r.sTypoLineGap=i.parseShort(),r.usWinAscent=i.parseUShort(),r.usWinDescent=i.parseUShort(),r.version>=1&&(r.ulCodePageRange1=i.parseULong(),r.ulCodePageRange2=i.parseULong()),r.version>=2&&(r.sxHeight=i.parseShort(),r.sCapHeight=i.parseShort(),r.usDefaultChar=i.parseUShort(),r.usBreakChar=i.parseUShort(),r.usMaxContent=i.parseUShort()),r},make:function(e){return new i.default.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:o,getUnicodeRange:function(e){for(var t=0;t<o.length;t+=1){var r=o[t];if(e>=r.begin&&e<r.end)return t}return-1}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(139),i=o(r(22)),a=o(r(32));function o(e){return e&&e.__esModule?e:{default:e}}t.default={parse:function(e,t){var r={},a=new i.default.Parser(e,t);switch(r.version=a.parseVersion(),r.italicAngle=a.parseFixed(),r.underlinePosition=a.parseShort(),r.underlineThickness=a.parseShort(),r.isFixedPitch=a.parseULong(),r.minMemType42=a.parseULong(),r.maxMemType42=a.parseULong(),r.minMemType1=a.parseULong(),r.maxMemType1=a.parseULong(),r.version){case 1:r.names=n.standardNames.slice();break;case 2:r.numberOfGlyphs=a.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var o=0;o<r.numberOfGlyphs;o++)r.glyphNameIndex[o]=a.parseUShort();r.names=[];for(var s=0;s<r.numberOfGlyphs;s++)if(r.glyphNameIndex[s]>=n.standardNames.length){var l=a.parseChar();r.names.push(a.parseString(l))}break;case 2.5:r.numberOfGlyphs=a.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var u=0;u<r.numberOfGlyphs;u++)r.offset[u]=a.parseChar()}return r},make:function(){return new a.default.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=function(){return"undefined"!=typeof window},t.isNode=function(){return"undefined"==typeof window},t.nodeBufferToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;++n)r[n]=e[n];return t},t.arrayBufferToNodeBuffer=function(t){for(var r=new e(t.byteLength),n=new Uint8Array(t),i=0;i<r.length;++i)r[i]=n[i];return r},t.checkArgument=function(e,t){if(!e)throw t}}).call(t,r(57).Buffer)},function(e,t,r){"use strict";var n,i,a,o,s=y(r(318)),l=y(r(206)),u=y(r(6)),c=y(r(38)),f=y(r(321)),h=y(r(121)),d=y(r(56)),p=y(r(2)),m=y(r(89)),v=y(r(317)),g=y(r(33));function y(e){return e&&e.__esModule?e:{default:e}}o=function(e){function t(){}void 0===v.default&&(Number.EPSILON=Math.pow(2,-52)),void 0===m.default&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===p.default&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}),t.prototype={addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners[e];if(void 0!==r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;var r=[],n=0,i=t.length;for(n=0;n<i;n++)r[n]=t[n];for(n=0;n<i;n++)r[n].call(this,e)}}}};var r,n,i,a,o,y,x="84-threekit",b=0,w=1,_=2,M=0,S=1,T=2,E=3,P=0,A=1,C=2,R=1,I=2,O=0,L=1,D=2,N=0,V=1,F=2,B=3,U=4,k=5,z=100,G=101,j=102,H=103,W=104,X=200,q=201,Y=202,Z=203,J=204,Q=205,K=206,$=207,ee=208,te=209,re=210,ne=0,ie=1,ae=2,oe=3,se=4,le=5,ue=6,ce=7,fe=0,he=1,de=2,pe=0,me=1,ve=2,ge=3,ye=4,xe=301,be=302,we=303,_e=304,Me=305,Se=306,Te=307,Ee=1e3,Pe=1001,Ae=1002,Ce=1003,Re=1004,Ie=1005,Oe=1006,Le=1007,De=1008,Ne=1009,Ve=1010,Fe=1011,Be=1012,Ue=1013,ke=1014,ze=1015,Ge=1016,je=1017,He=1018,We=1019,Xe=1020,qe=1021,Ye=1022,Ze=1023,Je=1024,Qe=1025,Ke=Ze,$e=1026,et=1027,tt=2001,rt=2002,nt=2003,it=2004,at=2100,ot=2101,st=2102,lt=2103,ut=2151,ct=2201,ft=2400,ht=0,dt=1,pt=2,mt=3e3,vt=3001,gt=3007,yt=3002,xt=3004,bt=3005,wt=3006,_t=3200,Mt=3201,St=3300,Tt=3301,Et={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),a=0,function(){for(var e=0;e<36;e++)8===e||13===e||18===e||23===e?i[e]="-":14===e?i[e]="4":(a<=2&&(a=33554432+16777216*Math.random()|0),r=15&a,a>>=4,i[e]=n[19===e?3&r|8:r]);return i.join("")}),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Et.DEG2RAD},radToDeg:function(e){return e*Et.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};function Pt(e,t){this.x=e||0,this.y=t||0}Pt.prototype={constructor:Pt,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return void 0===o&&(o=new Pt,y=new Pt),o.set(e,e),y.set(t,t),this.clamp(o,y)},clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*r-a*n+e.x,this.y=i*n+a*r+e.y,this}};var At,Ct,Rt,It,Ot,Lt=0;function Dt(e,t,r,n,i,a,o,s,l,u){Object.defineProperty(this,"id",{value:Lt++}),this.uuid=Et.generateUUID(),this.name="",this.image=void 0!==e?e:Dt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Dt.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:Pe,this.wrapT=void 0!==n?n:Pe,this.magFilter=void 0!==i?i:Oe,this.minFilter=void 0!==a?a:De,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:Ze,this.type=void 0!==s?s:Ne,this.offset=new Pt(0,0),this.repeat=new Pt(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:mt,this.version=0,this.onUpdate=null}function Nt(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1}function Vt(e,t,r){this.uuid=Et.generateUUID(),this.width=e,this.height=t,this.scissor=new Nt(0,0,e,t),this.scissorTest=!1,this.viewport=new Nt(0,0,e,t),void 0===(r=r||{}).minFilter&&(r.minFilter=Oe),this.texture=new Dt(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.texture.name=void 0!==r.name?r.name:""}function Ft(e,t,r){Vt.call(this,e,t,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function Bt(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1}function Ut(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function kt(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function zt(e,t,r,n,i,a,o,s,l,u){e=void 0!==e?e:[],t=void 0!==t?t:xe,Dt.call(this,e,t,r,n,i,a,o,s,l,u),this.flipY=!1}Dt.DEFAULT_IMAGE=void 0,Dt.DEFAULT_MAPPING=300,Dt.prototype={constructor:Dt,isTexture:!0,set needsUpdate(e){!0===e&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name+" (Copy)",this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=Et.generateUUID()),void 0===e.images[r.uuid]&&(e.images[r.uuid]={uuid:r.uuid,url:function(e){var t;return void 0!==e.toDataURL?t=e:((t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(r)}),t.image=r.uuid}return e.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case Ee:e.x=e.x-Math.floor(e.x);break;case Pe:e.x=e.x<0?0:1;break;case Ae:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ee:e.y=e.y-Math.floor(e.y);break;case Pe:e.y=e.y<0?0:1;break;case Ae:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},(0,p.default)(Dt.prototype,t.prototype),Nt.prototype={constructor:Nt,isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*n+a[12]*i,this.y=a[1]*t+a[5]*r+a[9]*n+a[13]*i,this.z=a[2]*t+a[6]*r+a[10]*n+a[14]*i,this.w=a[3]*t+a[7]*r+a[11]*n+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],f=a[9],h=a[2],d=a[6],p=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-h)<.01&&Math.abs(f-d)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+h)<.1&&Math.abs(f+d)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,v=(c+1)/2,g=(p+1)/2,y=(s+u)/4,x=(l+h)/4,b=(f+d)/4;return m>v&&m>g?m<.01?(r=0,n=.707106781,i=.707106781):(n=y/(r=Math.sqrt(m)),i=x/r):v>g?v<.01?(r=.707106781,n=0,i=.707106781):(r=y/(n=Math.sqrt(v)),i=b/n):g<.01?(r=.707106781,n=.707106781,i=0):(r=x/(i=Math.sqrt(g)),n=b/i),this.set(r,n,i,t),this}var w=Math.sqrt((d-f)*(d-f)+(l-h)*(l-h)+(u-s)*(u-s));return Math.abs(w)<.001&&(w=1),this.x=(d-f)/w,this.y=(l-h)/w,this.z=(u-s)/w,this.w=Math.acos((o+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new Nt,t=new Nt),e.set(r,r,r,r),t.set(n,n,n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},Vt.prototype={constructor:Vt,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},(0,p.default)(Vt.prototype,t.prototype),Ft.prototype=(0,d.default)(Vt.prototype),Ft.prototype.constructor=Ft,Ft.prototype.isWebGLRenderTargetCube=!0,Bt.prototype={constructor:Bt,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=Math.cos(e._x/2),n=Math.cos(e._y/2),i=Math.cos(e._z/2),a=Math.sin(e._x/2),o=Math.sin(e._y/2),s=Math.sin(e._z/2),l=e.order;return"XYZ"===l?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"YXZ"===l?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"ZXY"===l?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"ZYX"===l?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"YZX"===l?(this._x=a*n*i+r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i-a*o*s):"XZY"===l&&(this._x=a*n*i-r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i+a*o*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],a=r[8],o=r[1],s=r[5],l=r[9],u=r[2],c=r[6],f=r[10],h=n+s+f;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(c-l)*t,this._y=(a-u)*t,this._z=(o-i)*t):n>s&&n>f?(t=2*Math.sqrt(1+n-s-f),this._w=(c-l)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(a+u)/t):s>f?(t=2*Math.sqrt(1+s-n-f),this._w=(a-u)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+f-n-s),this._w=(o-i)/t,this._x=(a+u)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(r,n){return void 0===e&&(e=new Ut),(t=r.dot(n)+1)<1e-6?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=r*u+a*o+n*l-i*s,this._y=n*u+a*s+i*o-r*l,this._z=i*u+a*l+r*s-n*o,this._w=a*u-r*o-n*s-i*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,a=this._w,o=a*e._w+r*e._x+n*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=n,this._z=i,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var l=Math.atan2(s,o),u=Math.sin((1-t)*l)/s,c=Math.sin(t*l)/s;return this._w=a*u+this._w*c,this._x=r*u+this._x*c,this._y=n*u+this._y*c,this._z=i*u+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},(0,p.default)(Bt,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,a,o){var s=r[n+0],l=r[n+1],u=r[n+2],c=r[n+3],f=i[a+0],h=i[a+1],d=i[a+2],p=i[a+3];if(c!==p||s!==f||l!==h||u!==d){var m=1-o,g=s*f+l*h+u*d+c*p,y=g>=0?1:-1,x=1-g*g;if(x>v.default){var b=Math.sqrt(x),w=Math.atan2(b,g*y);m=Math.sin(m*w)/b,o=Math.sin(o*w)/b}var _=o*y;if(s=s*m+f*_,l=l*m+h*_,u=u*m+d*_,c=c*m+p*_,m===1-o){var M=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=M,l*=M,u*=M,c*=M}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Ut.prototype={constructor:Ut,isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return!1===(e&&e.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===Ct&&(Ct=new Bt),this.applyQuaternion(Ct.setFromEuler(e))},applyAxisAngle:function(){var e;return function(t,r){return void 0===e&&(e=new Bt),this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;this.x=i[0]*t+i[4]*r+i[8]*n+i[12],this.y=i[1]*t+i[5]*r+i[9]*n+i[13],this.z=i[2]*t+i[6]*r+i[10]*n+i[14];var a=i[3]*t+i[7]*r+i[11]*n+i[15];return this.divideScalar(a)},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*n-o*r,u=s*r+o*t-i*n,c=s*n+i*r-a*t,f=-i*t-a*r-o*n;return this.x=l*s+f*-i+u*-o-c*-a,this.y=u*s+f*-a+c*-i-l*-o,this.z=c*s+f*-o+l*-a-u*-i,this},project:function(){var e;return function(t){return void 0===e&&(e=new kt),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new kt),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new Ut,t=new Ut),e.set(r,r,r),t.set(n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var r=this.x,n=this.y,i=this.z;return this.x=n*e.z-i*e.y,this.y=i*e.x-r*e.z,this.z=r*e.y-n*e.x,this},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return void 0===At&&(At=new Ut),At.copy(this).projectOnVector(e),this.sub(At)},reflect:function(){var e;return function(t){return void 0===e&&(e=new Ut),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Et.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var r=e;e=t,t=r}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},kt.prototype={constructor:kt,isMatrix4:!0,set:function(e,t,r,n,i,a,o,s,l,u,c,f,h,d,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=n,v[1]=i,v[5]=a,v[9]=o,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=f,v[3]=h,v[7]=d,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new kt).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new Ut);var r=this.elements,n=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),o=1/e.setFromMatrixColumn(t,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[8]=n[8]*o,r[9]=n[9]*o,r[10]=n[10]*o,this}}(),makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(n),l=Math.sin(n),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var f=a*u,h=a*c,d=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=h+d*l,t[5]=f-p*l,t[9]=-o*s,t[2]=p-f*l,t[6]=d+h*l,t[10]=a*s}else if("YXZ"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m+y*o,t[4]=g*o-v,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m-y*o,t[4]=-a*c,t[8]=g+v*o,t[1]=v+g*o,t[5]=a*u,t[9]=y-m*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){f=a*u,h=a*c,d=o*u,p=o*c;t[0]=s*u,t[4]=d*l-h,t[8]=f*l+p,t[1]=s*c,t[5]=p*l+f,t[9]=h*l-d,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var x=a*s,b=a*l,w=o*s,_=o*l;t[0]=s*u,t[4]=_-x*c,t[8]=w*c+b,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=b*c+w,t[10]=x-_*c}else if("XZY"===e.order){x=a*s,b=a*l,w=o*s,_=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=x*c+_,t[5]=a*u,t[9]=b*c-w,t[2]=w*c-b,t[6]=o*u,t[10]=_*c+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z,a=e.w,o=r+r,s=n+n,l=i+i,u=r*o,c=r*s,f=r*l,h=n*s,d=n*l,p=i*l,m=a*o,v=a*s,g=a*l;return t[0]=1-(h+p),t[4]=c-g,t[8]=f+v,t[1]=c+g,t[5]=1-(u+p),t[9]=d-m,t[2]=f-v,t[6]=d+m,t[10]=1-(u+h),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(e,t,r){void 0===Rt&&(Rt=new Ut,It=new Ut,Ot=new Ut);var n=this.elements;return Ot.subVectors(e,t).normalize(),0===Ot.lengthSq()&&(Ot.z=1),Rt.crossVectors(r,Ot).normalize(),0===Rt.lengthSq()&&(Ot.z+=1e-4,Rt.crossVectors(r,Ot).normalize()),It.crossVectors(Ot,Rt),n[0]=Rt.x,n[4]=It.x,n[8]=Ot.x,n[1]=Rt.y,n[5]=It.y,n[9]=Ot.y,n[2]=Rt.z,n[6]=It.z,n[10]=Ot.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,a=r[0],o=r[4],s=r[8],l=r[12],u=r[1],c=r[5],f=r[9],h=r[13],d=r[2],p=r[6],m=r[10],v=r[14],g=r[3],y=r[7],x=r[11],b=r[15],w=n[0],_=n[4],M=n[8],S=n[12],T=n[1],E=n[5],P=n[9],A=n[13],C=n[2],R=n[6],I=n[10],O=n[14],L=n[3],D=n[7],N=n[11],V=n[15];return i[0]=a*w+o*T+s*C+l*L,i[4]=a*_+o*E+s*R+l*D,i[8]=a*M+o*P+s*I+l*N,i[12]=a*S+o*A+s*O+l*V,i[1]=u*w+c*T+f*C+h*L,i[5]=u*_+c*E+f*R+h*D,i[9]=u*M+c*P+f*I+h*N,i[13]=u*S+c*A+f*O+h*V,i[2]=d*w+p*T+m*C+v*L,i[6]=d*_+p*E+m*R+v*D,i[10]=d*M+p*P+m*I+v*N,i[14]=d*S+p*A+m*O+v*V,i[3]=g*w+y*T+x*C+b*L,i[7]=g*_+y*E+x*R+b*D,i[11]=g*M+y*P+x*I+b*N,i[15]=g*S+y*A+x*O+b*V,this},multiplyToArray:function(e,t,r){var n=this.elements;return this.multiplyMatrices(e,t),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new Ut);for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],f=e[10],h=e[14];return e[3]*(+i*s*c-n*l*c-i*o*f+r*l*f+n*o*h-r*s*h)+e[7]*(+t*s*h-t*l*f+i*a*f-n*a*h+n*l*u-i*s*u)+e[11]*(+t*l*c-t*o*h-i*a*c+r*a*h+i*o*u-r*l*u)+e[15]*(-n*o*u-t*s*c+t*o*f+n*a*c-r*a*f+r*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],f=n[7],h=n[8],d=n[9],p=n[10],m=n[11],v=n[12],g=n[13],y=n[14],x=n[15],b=d*y*f-g*p*f+g*c*m-u*y*m-d*c*x+u*p*x,w=v*p*f-h*y*f-v*c*m+l*y*m+h*c*x-l*p*x,_=h*g*f-v*d*f+v*u*m-l*g*m-h*u*x+l*d*x,M=v*d*c-h*g*c-v*u*p+l*g*p+h*u*y-l*d*y,S=i*b+a*w+o*_+s*M;if(0===S){var T="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(),this.identity()}var E=1/S;return r[0]=b*E,r[1]=(g*p*s-d*y*s-g*o*m+a*y*m+d*o*x-a*p*x)*E,r[2]=(u*y*s-g*c*s+g*o*f-a*y*f-u*o*x+a*c*x)*E,r[3]=(d*c*s-u*p*s-d*o*f+a*p*f+u*o*m-a*c*m)*E,r[4]=w*E,r[5]=(h*y*s-v*p*s+v*o*m-i*y*m-h*o*x+i*p*x)*E,r[6]=(v*c*s-l*y*s-v*o*f+i*y*f+l*o*x-i*c*x)*E,r[7]=(l*p*s-h*c*s+h*o*f-i*p*f-l*o*m+i*c*m)*E,r[8]=_*E,r[9]=(v*d*s-h*g*s-v*a*m+i*g*m+h*a*x-i*d*x)*E,r[10]=(l*g*s-v*u*s+v*a*f-i*g*f-l*a*x+i*u*x)*E,r[11]=(h*u*s-l*d*s-h*a*f+i*d*f+l*a*m-i*u*m)*E,r[12]=M*E,r[13]=(h*g*o-v*d*o+v*a*p-i*g*p-h*a*y+i*d*y)*E,r[14]=(v*u*o-l*g*o-v*a*c+i*g*c+l*a*y-i*u*y)*E,r[15]=(l*d*o-h*u*o+h*a*c-i*d*c-l*a*p+i*u*p)*E,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+r,l*o-n*s,l*s+n*o,0,l*o+n*s,u*o+r,u*s-n*a,0,l*s-n*o,u*s+n*a,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r,n){return this.set(1,e,t,0,0,1,r,0,0,0,1,0,0,0,0,1),n&&this.transpose(),this},compose:function(e,t,r,n){return this.makeRotationFromQuaternion(t),n&&this.multiply((new kt).makeShear(n.x,n.y,n.z)),this.scale(r),this.setPosition(e),this},decompose:function(){var e,t;return function(r,n,i,a){if(a)return this.decompose2(r,n,i,a);void 0===e&&(e=new Ut,t=new kt);var o=this.elements,s=e.set(o[0],o[1],o[2]).length(),l=e.set(o[4],o[5],o[6]).length(),u=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(s=-s),r.x=o[12],r.y=o[13],r.z=o[14],t.elements.set(this.elements);var c=1/s,f=1/l,h=1/u;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=f,t.elements[5]*=f,t.elements[6]*=f,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,n.setFromRotationMatrix(t),i.x=s,i.y=l,i.z=u,this}}(),decompose2:function(e,t,r,n){var i=this.clone();if(i[3]=0,i[7]=0,i[11]=0,i[15]=1,0===i.determinant())return console.error("THREE.Matrix4.decompose2(): Cannot apply decompose2 on singular matrix"),this;var a=(new kt).copy(this),o=a.elements;e.set(o[12],o[13],o[14]),o[12]=o[13]=o[14]=0;var s=new Ut(o[0],o[1],o[2]),l=new Ut(o[4],o[5],o[6]),u=new Ut(o[8],o[9],o[10]);return r.setX(s.length()),s.divideScalar(r.x),n.setX(s.dot(l)),l.sub(s.clone().multiplyScalar(n.x)),r.setY(l.length()),l.divideScalar(r.y),n.setX(n.x/r.y),n.setY(s.dot(u)),u.sub(s.clone().multiplyScalar(n.y)),n.setZ(l.dot(u)),u.sub(l.clone().multiplyScalar(n.z)),r.setZ(u.length()),u.divideScalar(r.z),n.setY(n.y/r.z),n.setZ(n.z/r.z),o[0]=s.x,o[4]=l.x,o[8]=u.x,o[1]=s.y,o[5]=l.y,o[9]=u.y,o[2]=s.z,o[6]=l.z,o[10]=u.z,s.dot((new Ut).crossVectors(l,u))<0&&(r.multiplyScalar(-1),a.multiplyScalar(-1)),t.setFromRotationMatrix(a),this},makePerspective:function(e,t,r,n,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),l=2*i/(r-n),u=(t+e)/(t-e),c=(r+n)/(r-n),f=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,r,n,i,a){var o=this.elements,s=1/(t-e),l=1/(r-n),u=1/(a-i),c=(t+e)*s,f=(r+n)*l,h=(a+i)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},zt.prototype=(0,d.default)(Dt.prototype),zt.prototype.constructor=zt,zt.prototype.isCubeTexture=!0,Object.defineProperty(zt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Gt=new Dt,jt=new zt;function Ht(){this.seq=[],this.map={}}var Wt=[],Xt=[];function qt(e,t,r){var n=e[0];if(n<=0||n>0)return e;var i=t*r,a=Wt[i];if(void 0===a&&(a=new Float32Array(i),Wt[i]=a),0!==t){n.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=r,e[o].toArray(a,s)}return a}function Yt(e,t){var r=Xt[t];void 0===r&&(r=new Int32Array(t),Xt[t]=r);for(var n=0;n!==t;++n)r[n]=e.allocTextureUnit();return r}function Zt(e,t){e.uniform1f(this.addr,t)}function Jt(e,t){e.uniform1i(this.addr,t)}function Qt(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function Kt(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function $t(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function er(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function tr(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)}function rr(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)}function nr(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n),r.setTexture2D(t||Gt,n)}function ir(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n),r.setTextureCube(t||jt,n)}function ar(e,t){e.uniform2iv(this.addr,t)}function or(e,t){e.uniform3iv(this.addr,t)}function sr(e,t){e.uniform4iv(this.addr,t)}function lr(e,t){e.uniform1fv(this.addr,t)}function ur(e,t){e.uniform1iv(this.addr,t)}function cr(e,t){e.uniform2fv(this.addr,qt(t,this.size,2))}function fr(e,t){e.uniform3fv(this.addr,qt(t,this.size,3))}function hr(e,t){e.uniform4fv(this.addr,qt(t,this.size,4))}function dr(e,t){e.uniformMatrix2fv(this.addr,!1,qt(t,this.size,4))}function pr(e,t){e.uniformMatrix3fv(this.addr,!1,qt(t,this.size,9))}function mr(e,t){e.uniformMatrix4fv(this.addr,!1,qt(t,this.size,16))}function vr(e,t,r){var n=t.length,i=Yt(r,n);e.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTexture2D(t[a]||Gt,i[a])}function gr(e,t,r){var n=t.length,i=Yt(r,n);e.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTextureCube(t[a]||jt,i[a])}function yr(e,t,r){this.id=e,this.addr=r,this.setValue=function(e){switch(e){case 5126:return Zt;case 35664:return Qt;case 35665:return Kt;case 35666:return $t;case 35674:return er;case 35675:return tr;case 35676:return rr;case 35678:return nr;case 35680:return ir;case 5124:case 35670:return Jt;case 35667:case 35671:return ar;case 35668:case 35672:return or;case 35669:case 35673:return sr}}(t.type)}function xr(e,t,r){this.id=e,this.addr=r,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return lr;case 35664:return cr;case 35665:return fr;case 35666:return hr;case 35674:return dr;case 35675:return pr;case 35676:return mr;case 35678:return vr;case 35680:return gr;case 5124:case 35670:return ur;case 35667:case 35671:return ar;case 35668:case 35672:return or;case 35669:case 35673:return sr}}(t.type)}function br(e){this.id=e,Ht.call(this)}br.prototype.setValue=function(e,t){for(var r=this.seq,n=0,i=r.length;n!==i;++n){var a=r[n];a.setValue(e,t[a.id])}};var wr=/([\w\d_]+)(\])?(\[|\.)?/g;function _r(e,t){e.seq.push(t),e.map[t.id]=t}function Mr(e,t,r){var n=e.name,i=n.length;for(wr.lastIndex=0;;){var a=wr.exec(n),o=wr.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){_r(r,void 0===u?new yr(s,e,t):new xr(s,e,t));break}var c=r.map[s];void 0===c&&_r(r,c=new br(s)),r=c}}function Sr(e,t,r){Ht.call(this),this.renderer=r;for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i!==n;++i){var a=e.getActiveUniform(t,i),o=a.name;Mr(a,e.getUniformLocation(t,o),this)}}Sr.prototype.setValue=function(e,t,r){var n=this.map[t];void 0!==n&&n.setValue(e,r,this.renderer)},Sr.prototype.set=function(e,t,r){var n=this.map[r];void 0!==n&&n.setValue(e,t[r],this.renderer)},Sr.prototype.setOptional=function(e,t,r){var n=t[r];void 0!==n&&this.setValue(e,r,n)},Sr.upload=function(e,t,r,n){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=r[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,n)}},Sr.seqWithValue=function(e,t){for(var r=[],n=0,i=e.length;n!==i;++n){var a=e[n];a.id in t&&r.push(a)}return r};var Tr={merge:function(e){for(var t={},r=0;r<e.length;r++){var n=this.clone(e[r]);for(var i in n)t[i]=n[i]}return t},clone:function(e){var t={};for(var r in e)t[r]=Tr.cloneParameters(e[r]);return t},cloneParameters:function(e){var t={};for(var r in e)t[r]=Tr.cloneParameter(e[r]);return t},cloneParameter:function(e){return e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?e.clone():Array.isArray(e)?e.slice():e}},Er={alphamap_fragment:"#ifdef USE_ALPHAMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 alphaUv = alphaMapUV();\n#else\n\tvec2 alphaUv = vUv;\n#endif\n\tif(!skip_alphaMap) {\n\t\tdiffuseColor.a *= alphaMapTexelTransform( texture2D( alphaMap, alphaUv ) ).g;\n\t}\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\t\n\tuniform bool skip_alphaMap;\n\t#if ! defined( TEXTURE_SLOTS )\n\t\tuniform sampler2D alphaMap;\n\t#endif\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n\telse if ( alphaTest > 0.0) diffuseColor.a = 1.0;\n\t\n#endif\n",alphatest_pars_fragment:"#ifdef ALPHATEST\n\tuniform float alphaTest;\n#endif\n",aomap_fragment:"#if ( defined( USE_AOMAP ) || defined( USE_SSAOMAP ) ) && !defined( TRANSPARENT )\n\tfloat combinedAoMapIntensity = 1.0;\n\t#if defined( USE_AOMAP )\n\t\t#if defined( TEXTURE_SLOTS )\n\t\t\tvec2 aoUv = aoMapUV();\n\t\t#else\n\t\t\tvec2 aoUv = vUv2;\n\t\t#endif\n\t\tfloat aoValue = aoMapTexelTransform( texture2D( aoMap, aoUv ) ).r;\n\t\tcombinedAoMapIntensity = min( combinedAoMapIntensity, aoMapIntensity );\n\t#else\n\t\tfloat aoValue = texture2D( ssaoMap, uvSS ).r;\n\t\tcombinedAoMapIntensity = min( combinedAoMapIntensity, ssaoMapIntensity );\n\t#endif\n\tfloat ambientOcclusion = ( aoValue - 1.0 ) * combinedAoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#if defined( USE_AOMAP ) || defined( USE_SSAOMAP )\n\t#if ! defined( TEXTURE_SLOTS )\n\t\t#if defined( USE_AOMAP )\n\t\t\tuniform sampler2D aoMap;\n\t\t#endif\n\t#endif\n\t#if defined( USE_SSAOMAP )\n\t\tuniform sampler2D ssaoMap;\n\t\tuniform float ssaoMapIntensity;\n\t#endif\n\tuniform float aoMapIntensity;\n#endif\n",anisotropy_fragment:"#ifdef ANISOTROPY\n  float anisotropyFactor = anisotropy;\n  float anisotropyRotationFactor = anisotropyRotation;\n  #ifdef USE_ANISOTROPYMAP\n    anisotropyFactor *= texture2D (anisotropyMap, vUv ).r;\n  #endif\n  #ifdef USE_ANISOTROPYROTATIONMAP\n    anisotropyRotationFactor += anisotropyRotationMapTexelTransform( texture2D( anisotropyRotationMap, anisotropyRotationMapUV() ) ).r;\n  #endif\n#endif\n",anisotropy_pars_fragment:"#ifdef ANISOTROPY\n  vec2 calcAnisotropyUV( float anisotropyLocal ) {\n    float oneMinusAbsAnisotropy = 1.0 - 0.9 * abs( anisotropyLocal );\n    vec2 anisotropyUV = vec2 ( 1.0 / oneMinusAbsAnisotropy, oneMinusAbsAnisotropy );\n    if( anisotropyLocal < 0.0 ) {\n      anisotropyUV.xy = anisotropyUV.yx;    }\n    return anisotropyUV;\n  }\n  vec3 getBentNormal(const GeometricContext geometry, const float anisotropyLocal, const float roughnessFactor) {\n    vec3  anisotropyDirection = anisotropyLocal >= 0.0 ? geometry.anisotropicT : geometry.anisotropicS;\n    vec3  anisotropicTangent  = cross(anisotropyDirection, geometry.viewDir);\n    vec3  anisotropicNormal   = cross(anisotropicTangent, anisotropyDirection);\n    float bendFactor          = abs(anisotropyLocal) * saturate(5.0 * roughnessFactor);\n    vec3  bentNormal          = normalize(mix(geometry.normal, anisotropicNormal, bendFactor));\n    return vec3(bentNormal);\n  }\n#endif\n",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n    vec3 objectTangent = vec3( tangent.xyz );\n#endif\n",bsdfs:"\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif ( decayExponent > 0.0 && cutoffDistance > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\telse if ( decayExponent < 0.0 ) {\n\t\tfloat maxDistanceCutoffFactor = 0.0;\n\t\tif ( lightDistance > 0.0 ) {\n\t\t\tmaxDistanceCutoffFactor = 1.0;\n\t\t\tif( cutoffDistance > 0.0 ) {\n\t\t\t\tmaxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\t}\n\t\t\tfloat distanceFalloff = 1.0 / ( pow2( lightDistance ) );\n\t\t\tmaxDistanceCutoffFactor * distanceFalloff;\n\t\t}\n\t\treturn maxDistanceCutoffFactor;\n\t}\n\telse {\n\t\treturn 1.0;\n\t}\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nfloat F_Schlick( const in float specular, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specular ) * fresnel + specular;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat D_GGXAniso( const in vec2 anisotropicM, const in vec2 xyDotH, const in float dotNH ) {\n\tfloat a2 = anisotropicM.s * anisotropicM.t;\n\thighp vec3 v = vec3( anisotropicM.t * xyDotH.x, anisotropicM.s * xyDotH.y, a2 * dotNH );\n\thighp float v2 = dot( v, v );\n\tfloat w2 = a2 / v2;\n\treturn a2 * w2 * w2 * RECIPROCAL_PI;\n}\nfloat G_GGX_SmithCorrelated_Anisotropic(\n\tvec2 anisotropicM,\n\tfloat ToV, float BoV,\n\tfloat ToL, float BoL,\n\tfloat NoV, float NoL\n) {\n\tfloat lambdaV = NoL * length( vec3( anisotropicM.s * ToV, anisotropicM.t * BoV, NoV ) );\n\tfloat lambdaL = NoV * length( vec3( anisotropicM.s * ToL, anisotropicM.t * BoL, NoL ) );\n\tfloat v = 0.5 / ( lambdaV + lambdaL );\n\treturn saturate( v );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * pow2( alpha / denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = clamp( dot( geometry.normal, incidentLight.direction ), EPSILON, 1.0 );\tfloat dotNV = clamp( dot( geometry.normal, geometry.viewDir ), EPSILON, 1.0 );\tfloat dotNH = clamp( dot( geometry.normal, halfDir ), EPSILON, 1.0 );\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\t#ifdef ANISOTROPY\n\t\tvec2 xyDotH = vec2( dot( geometry.anisotropicS, halfDir ), dot( geometry.anisotropicT, halfDir ) );\n\t\tfloat D = D_GGXAniso( geometry.anisotropicM, xyDotH, dotNH );\n\t\tfloat G = G_GGX_SmithCorrelated_Anisotropic(\n\t\t\tgeometry.anisotropicM,\n\t\t\tdot( geometry.anisotropicS, geometry.viewDir ),\n\t\t\tdot( geometry.anisotropicT, geometry.viewDir ),\n\t\t\tdot( geometry.anisotropicS, incidentLight.direction ),\n\t\t\tdot( geometry.anisotropicT, incidentLight.direction ),\n\t\t\tdotNV,\n\t\t\tdotNL\n\t\t);\n\t#else\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t#endif\n\treturn F * ( G * D );\n}\n#ifdef PHYSICAL\nfloat BRDF_ClearCoat_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in float specular, const in float roughness, out float layerAttenuation ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = clamp( dot( geometry.clearCoatNormal, incidentLight.direction ), EPSILON, 1.0 );\tfloat dotNV = clamp( dot( geometry.clearCoatNormal, geometry.viewDir ), EPSILON, 1.0 );\tfloat dotNH = clamp( dot( geometry.clearCoatNormal, halfDir ), EPSILON, 1.0 );\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tfloat F = F_Schlick( specular, dotLH );\n\tlayerAttenuation = F;\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\n#endif\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\n#ifdef PHYSICAL\nfloat BRDF_ClearCoat_GGX_Environment( const in GeometricContext geometry, const in float specular, const in float roughness, out float layerAttention ) {\n\tvec3 incidentLightDirection = reflect( geometry.viewDir, geometry.clearCoatNormal );\n\tvec3 halfDir = normalize( incidentLightDirection + geometry.viewDir );\n\tfloat dotNV = saturate( dot( geometry.clearCoatNormal, geometry.viewDir ) );\n\tfloat dotLH = saturate( dot( incidentLightDirection, halfDir ) );\n\tlayerAttention = F_Schlick( specular, dotLH );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specular * AB.x + AB.y;\n}\n#endif\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform bool skip_bumpMap;\n\t#if ! defined( TEXTURE_SLOTS )\n\t\tuniform sampler2D bumpMap;\n\t\tuniform float bumpScale;\n\t#endif\n\tvec2 bump_dHdxy_fwd() {\n\t\t#if defined( TEXTURE_SLOTS )\n\t\t\t\tvec2 bumpUv = bumpMapUV();\n\t\t#else\n\t\t\t\tvec2 bumpUv = vUv;\n\t\t#endif\n\t\t#ifdef TRIPLANAR_MAPPING\n\t\t\tif(triplanarEnabledBumpMap)\n\t\t\t\treturn triplanarSampleBump( bumpMap );\n\t\t#endif\n\t\tvec2 dSTdx = dFdx( bumpUv );\n\t\tvec2 dSTdy = dFdy( bumpUv );\n\t\tfloat Hll = bumpMapTexelTransform( texture2D( bumpMap, bumpUv ) ).x;\n\t\tfloat dBx = bumpMapTexelTransform( texture2D( bumpMap, bumpUv + dSTdx ) ).x - Hll;\n\t\tfloat dBy = bumpMapTexelTransform( texture2D( bumpMap, bumpUv + dSTdy ) ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n#endif\n",bump_functions:"#if defined( USE_BUMPMAP ) || defined( USE_CLEARCOATBUMPMAP )\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n  \n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( VARYING_VVIEWPOSITION )\n\t\tvarying vec3 vViewPosition;\n\t\t#define VARYING_VVIEWPOSITION 1\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\t#if ! defined( VARYING_VVIEWPOSITION )\n    \tvarying vec3 vViewPosition;\n    \t#define VARYING_VVIEWPOSITION 1\n    #endif\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",clearcoatbumpmap_pars_fragment:"#if defined( USE_CLEARCOATBUMPMAP )\n\tvec2 clearCoatBump_dHdxy_fwd() {\n\t\t#if defined( TEXTURE_SLOTS )\n\t\t\t\tvec2 clearCoatBumpUv = clearCoatBumpMapUV();\n\t\t#else\n\t\t\t\tvec2 clearCoatBumpUv = vUv;\n\t\t#endif\n\t\tvec2 dSTdx = dFdx( clearCoatBumpUv );\n\t\tvec2 dSTdy = dFdy( clearCoatBumpUv );\n\t\tfloat Hll = clearCoatBumpMapTexelTransform( texture2D( clearCoatBumpMap, clearCoatBumpUv ) ).x;\n\t\tfloat dBx = clearCoatBumpMapTexelTransform( texture2D( clearCoatBumpMap, clearCoatBumpUv + dSTdx ) ).x - Hll;\n\t\tfloat dBy = clearCoatBumpMapTexelTransform( texture2D( clearCoatBumpMap, clearCoatBumpUv + dSTdy ) ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n#endif\n",clearcoatbumpmap_fragment:"\n#ifdef USE_CLEARCOATBUMPMAP\n\tvec3 clearCoatNormal = normalize( vNormal ) * flipNormal;\n\tclearCoatNormal = perturbNormalArb( -vViewPosition, clearCoatNormal, clearCoatBump_dHdxy_fwd() );\n\t\n#else\n\tvec3 clearCoatNormal = normal;\n\t\t\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif\n",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif\n",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand_OLD( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nhighp float rand_NEW( const in vec2 p ) {\n\tvec2 p2  = fract(p * vec2(5.3987, 5.4421));\n\tp2 += dot(p2.yx, p2.xy + vec2(21.5351, 14.3137));\n\tfloat pxy = p2.x * p2.y;\n\treturn ( fract(pxy * 95.4307) + fract(pxy * 75.04961) ) * 0.5;\n}\n#define rand rand_NEW\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n\t#ifdef ANISOTROPY\n\t\tvec2 anisotropicM;\n\t\tvec3 anisotropicS;\n\t\tvec3 anisotropicT;\n\t#endif\n\t#ifdef PHYSICAL\n\t\tvec3 clearCoatNormal;\n\t#endif\n};\nvec3 transformPosition( in vec3 pos, in mat4 matrix ) {\n\treturn ( matrix * vec4( pos, 1.0 ) ).xyz;\n}\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nmat3 rotationMatrix3(vec3 axis, float angle) {\n\taxis = normalize(axis);\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\tfloat oc = 1.0 - c;\n\treturn mat3(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,\n\t\t\t\t\t\t\toc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,\n\t\t\t\t\t\t\toc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c);\n}",matrix:"\t\t\nfloat inverse(float m) {\n    return 1.0 / m;\n}\nmat2 inverse(mat2 m) {\n    return mat2(m[1][1],-m[0][1],\n        -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\nmat3 inverse(mat3 m) {\n    float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n    float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n    float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n    float b01 = a22 * a11 - a12 * a21;\n    float b11 = -a22 * a10 + a12 * a20;\n    float b21 = a21 * a10 - a11 * a20;\n    float det = a00 * b01 + a01 * b11 + a02 * b21;\n    return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n        b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n        b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\nmat4 inverse(mat4 m) {\n    float\n    a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n    a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n    a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n    a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n    b00 = a00 * a11 - a01 * a10,\n    b01 = a00 * a12 - a02 * a10,\n    b02 = a00 * a13 - a03 * a10,\n    b03 = a01 * a12 - a02 * a11,\n    b04 = a01 * a13 - a03 * a11,\n    b05 = a02 * a13 - a03 * a12,\n    b06 = a20 * a31 - a21 * a30,\n    b07 = a20 * a32 - a22 * a30,\n    b08 = a20 * a33 - a23 * a30,\n    b09 = a21 * a32 - a22 * a31,\n    b10 = a21 * a33 - a23 * a31,\n    b11 = a22 * a33 - a23 * a32,\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    return mat4(\n        a11 * b11 - a12 * b10 + a13 * b09,\n        a02 * b10 - a01 * b11 - a03 * b09,\n        a31 * b05 - a32 * b04 + a33 * b03,\n        a22 * b04 - a21 * b05 - a23 * b03,\n        a12 * b08 - a10 * b11 - a13 * b07,\n        a00 * b11 - a02 * b08 + a03 * b07,\n        a32 * b02 - a30 * b05 - a33 * b01,\n        a20 * b05 - a22 * b02 + a23 * b01,\n        a10 * b10 - a11 * b08 + a13 * b06,\n        a01 * b08 - a00 * b10 - a03 * b06,\n        a30 * b04 - a31 * b02 + a33 * b00,\n        a21 * b02 - a20 * b04 - a23 * b00,\n        a11 * b07 - a10 * b09 - a12 * b06,\n        a00 * b09 - a01 * b07 + a02 * b06,\n        a31 * b01 - a30 * b03 - a32 * b00,\n        a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nfloat MipLevelInfo_standard( vec3 vec, vec3 normal, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn mipLevel;\n}\nfloat MipLevelInfo_aa( vec3 vec, vec3 normal, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tvec3 dx = dFdx( vec ) * 128.0;\n\tvec3 dy = dFdy( vec ) * 128.0;\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = pow( d, 0.5);\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn mipLevel;\n}\n#define MipLevelInfo MipLevelInfo_standard\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 1.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, vec3 normal, float roughness ) {\n\troughness *= 0.88;\n\tfloat roughnessVal = roughness * cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tfloat mipLevel = MipLevelInfo(reflectedDirection, normal, r1, roughness);\n\tfloat s = fract( mipLevel );\n\tfloat level0 = floor( mipLevel );\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\t\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform bool skip_displacementMap;\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tif(!skip_displacementMap) {\n\t\ttransformed += objectNormal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\t}\n#endif",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb += ditherScale * ditherOffset( gl_FragCoord.xy + gl_FragColor.rg + gl_FragColor.ba + normal.xy );\n  \n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\t#if defined( DITHERING_SCALE )\n\t\tuniform float ditherScale;\n\t#endif\n\tvec3 ditherOffset( vec2 uv ) {\n\t\tfloat grid_position = rand( uv );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB *= 2.0 * ( 2.0 * grid_position - 1.0 );\n\t\treturn dither_shift_RGB;\n\t}\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 emissiveUv = emissiveMapUV();\n#else\n\tvec2 emissiveUv = vUv;\n#endif\n\tvec4 emissiveColor = texture2D( emissiveMap, emissiveUv );\n\temissiveColor.rgb = emissiveMapTexelTransform( emissiveMapTexelToLinear( emissiveColor ) ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_EMISSIVEMAP\n\t\tuniform sampler2D emissiveMap;\n\t#endif\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\t#define ENVMAP_DEFINED_vWorldPosition\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENVMAP_DEFINED_vWorldPosition\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",falloff_fragment:"#ifdef FALLOFF\nfloat falloffModulator = abs( dot( normal, normalize( vViewPosition ) ) );\nfalloffModulator = ( falloffModulator * falloffModulator * ( 3.0 - 2.0 * falloffModulator ) );\ndiffuseColor = mix( falloffDiffuseColor, diffuseColor, falloffModulator );\n#endif",falloffalphamap_fragment:"#ifdef USE_FALLOFFALPHAMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 falloffAlphaUv = falloffAlphaMapUV();\n#else\n\tvec2 falloffAlphaUv = vUv;\n#endif\n\tfalloffDiffuseColor.a *= falloffAlphaMapTexelTransform( texture2D( falloffAlphaMap, falloffAlphaUv ) ).g;\n#endif\n",falloffmap_fragment:"#ifdef USE_FALLOFFMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 falloffMapUv = falloffMapUV();\n#else\n\tvec2 falloffMapUv = vUv;\n#endif\n\tvec4 falloffTexelColor = texture2D( falloffMap, falloffMapUv );\n\tfalloffTexelColor = falloffMapTexelTransform( falloffMapTexelToLinear( falloffTexelColor ) );\n\tfalloffDiffuseColor *= falloffTexelColor;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",iestexturemap_pars_fragment:"#ifdef USE_IESPROFILE\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotIesTextureMap[ NUM_SPOT_LIGHTS ];\n\t\tuniform bool spotIesTextureMapFlag[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointIesTextureMap[ NUM_POINT_LIGHTS ];\n\t\tuniform bool pointIesTextureMapFlag[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 lightUv = lightMapUV();\n#else\n\tvec2 lightUv = vUv2;\n#endif\n\treflectedLight.indirectDiffuse += PI * emissiveMapTexelTransform( texture2D( lightMap, lightUv ) ).xyz;\n#endif\n",lightmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_LIGHTMAP\n\t\tuniform sampler2D lightMap;\n\t\tuniform float lightMapIntensity;\n\t#endif\n#endif\n",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\nvec3 inverseTransform(vec3 pointTransformed, mat4 matrix) {\n\treturn (vec4(pointTransformed, 1.) * matrix).xyz;\n}\nfloat unmix(float a, float b, float x) {\n\treturn (x - a) / (b - a);\n}\nfloat getIESProfileAttenuation(const in vec3 lightPosition, const in vec3 lightDirection, const in GeometricContext geometry, sampler2D iesTexture, float coneCos) {\n\tvec3 geometryPosW = inverseTransform(geometry.position, viewMatrix);\n\tvec3 lightPosW = inverseTransform(lightPosition, viewMatrix);\n  vec3 iesSampleDiffW = geometryPosW - lightPosW;\n\tvec3 iesSampleDirectionW = normalize(iesSampleDiffW);\n\tvec3 lightDirectionW = inverseTransformDirection(lightDirection, viewMatrix);\n\tfloat cosTheta = unmix(coneCos, 1., dot(lightDirectionW, iesSampleDirectionW));\n\tfloat theta = acos(cosTheta) / PI;\n\tfloat phiCoord;\n\tif(abs(dot(lightDirectionW, vec3(0,1,0))) >= 1. - EPSILON)\n\t\tphiCoord = (atan(iesSampleDirectionW.z, iesSampleDirectionW.x) + PI) /(2.0*PI);\n\telse {\n\t\tphiCoord = dot(\n\t\t\tnormalize(cross(lightDirectionW, iesSampleDirectionW)),\n\t\t\tnormalize(cross(lightDirectionW, vec3(0,1,0)))\n\t\t);\n\t\tphiCoord = acos(phiCoord) * (1. / PI / 2.);\n\t\tif(sign(\n\t\t\t\tnormalize(cross(lightDirectionW, iesSampleDirectionW)).y) < 0.)\n\t\t\t\tphiCoord = 1. - phiCoord;\n\t}\n\t\n\tvec2 texCoord = (vec2( phiCoord, theta ));\n  float iesProfileScale = texture2D( iesTexture, texCoord).r;\n\tfloat a = step(.05, mod((phiCoord), .1));\n\tfloat b = step(.05, mod((theta), .1));\n  return iesProfileScale;\n}\nfloat getIESProfileAttenuation(const in vec3 lightPosition, const in vec3 lightDirection, const in GeometricContext geometry, sampler2D iesTexture) {\n\treturn getIESProfileAttenuation(lightPosition, lightDirection, geometry, iesTexture, 0.);\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat spreadAngle;\n\t\tvec2 shadowMapSize;\n\t\tvec3 shadowCameraParams;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.direction = lVector / lightDistance;\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tvec3 shadowCameraParams;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.direction = lVector / lightDistance;\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, worldNormal, 5.0 );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in vec3 normal, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tspecularMIPLevel = BlinnExponentToGGXRoughness( blinnShininessExponent ) * 0.88 * 5.0;\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, reflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, worldNormal, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"#if ! defined( VARYING_VVIEWPOSITION )\n    varying vec3 vViewPosition;\n    #define VARYING_VVIEWPOSITION 1\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n    }\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n  material.specularColor = mix( vec3(MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivityStrength * reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\n\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = material.specularRoughness;\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n    }\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\tvec3 specularRadiance = irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\tvec3 diffuseRadiance = irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\tfloat layerAttention;\n\t\tvec3 clearCoatSpecularRadiance = irradiance * BRDF_ClearCoat_GGX( directLight, geometry, material.clearCoat, material.clearCoatRoughness, layerAttention );\n\t\tspecularRadiance = mix( specularRadiance, clearCoatSpecularRadiance, material.clearCoat );\n\t\tdiffuseRadiance = mix( diffuseRadiance, vec3( 0.0 ), material.clearCoat );\n\t#endif\n\treflectedLight.directSpecular += specularRadiance;\n\treflectedLight.directDiffuse += diffuseRadiance;\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 diffuseRadiance = irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\tdiffuseRadiance = mix( diffuseRadiance, vec3( 0.0 ), material.clearCoat );\n\t#endif\n\treflectedLight.indirectDiffuse += diffuseRadiance;\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 specularRadiance = radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\tfloat layerAttention;\n\t\tvec3 clearCoatSpecularRadiance = clearCoatRadiance * BRDF_ClearCoat_GGX_Environment( geometry, material.clearCoat, material.clearCoatRoughness, layerAttention );\n\t\tspecularRadiance = mix( specularRadiance, clearCoatSpecularRadiance, material.clearCoat );\n\t#endif\n\treflectedLight.indirectSpecular += specularRadiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n#ifdef PHYSICAL\n\tgeometry.clearCoatNormal = clearCoatNormal;\n#endif\n#ifdef ANISOTROPY\n\tgeometry.anisotropicM = calcAnisotropyUV( anisotropyFactor ) * pow2( clamp( roughnessFactor, 0.02, 1.0 ) );\n\t#ifdef USE_TANGENT\n\t\tgeometry.anisotropicS = normalize( vTangent.xyz  );\n\t\tgeometry.anisotropicT = normalize( vBitangent.xyz );\n\t#else\n\t\tvec3 q0 = normalize( dFdx( geometry.position ) );\n\t\tvec3 q1 = normalize( dFdy( geometry.position ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tgeometry.anisotropicS = normalize( + q0 * st1.t - q1 * st0.t );\n\t\tgeometry.anisotropicT = normalize( - q0 * st1.s + q1 * st0.s );\n\t#endif\n\tif( abs( anisotropyRotationFactor ) > EPSILON ) {\n\t\tfloat anisotropyRotationAngle = -anisotropyRotationFactor * 2.0 * PI;\t\tmat3 anisotropyRotationMatrix = rotationMatrix3(geometry.normal, anisotropyRotationAngle);\n\t\tgeometry.anisotropicS *= anisotropyRotationMatrix;\n\t\tgeometry.anisotropicT *= anisotropyRotationMatrix;\n\t}\n#endif\nIncidentLight directLight;\n#ifdef USE_SHADOWMAP\n\tinitShadows();\n#endif\nvec3 referenceDir;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\t#ifdef USE_IESPROFILE\n\t\treferenceDir = vec3(0., -1., 0.);\t\treferenceDir = transformDirection( referenceDir, viewMatrix );\n\t\tif ( pointIesTextureMapFlag [ i ] ) pointLight.color *= getIESProfileAttenuation(pointLight.position, referenceDir, geometry, pointIesTextureMap [ i ]);\n\t\t#endif\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, pointShadowMatrix[ i ] * vec4(vWorldPosition, 1) ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\t#ifdef USE_IESPROFILE\n\t\treferenceDir = spotLight.direction;\n\t\treferenceDir = inverseTransformDirection( referenceDir, viewMatrix );\n\t\treferenceDir.xyz *= -1.;\n\t\treferenceDir = transformDirection( referenceDir, viewMatrix );\n\t\tif ( spotIesTextureMapFlag [ i ] ) spotLight.color *= getIESProfileAttenuation(spotLight.position, referenceDir, geometry, spotIesTextureMap [ i ], spotLight.coneCos);\n\t\t#endif\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, 0.0, spotLight.shadowCameraParams, spotShadowMatrix[ i ] * vec4(vWorldPosition, 1), 1 ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, 0.0, directionalLight.spreadAngle, directionalLight.shadowCameraParams, directionalShadowMatrix[ i ] * vec4(vWorldPosition, 1), 0 ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\t#if defined( TEXTURE_SLOTS )\n\t\t\tvec2 lightUv = lightMapUV();\n\t\t\tvec3 lightMapIrradiance = lightMapTexelTransform( texture2D( lightMap, lightUv ) ).xyz;\n\t\t#else\n\t\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#endif\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && ( defined( ENVMAP_TYPE_CUBE_UV ) || defined( ENVMAP_TYPE_CUBE ) )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef ANISOTROPY\n \t\tvec3 bentNormal = getBentNormal(geometry, anisotropyFactor, roughnessFactor);\n \t#else\n \t\tvec3 bentNormal = geometry.normal;\n \t#endif\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, bentNormal, Material_BlinnShininessExponent( material ), 8 );\n\t#ifdef USE_SSR\n\t\tradiance = occludeWithSSR(radiance);\n\t#endif\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, bentNormal, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t\t#ifdef USE_SSR\n\t\t\tclearCoatRadiance = occludeWithSSR(radiance);\n\t\t#endif\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif\n",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif\n",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",math:"int mod(int a, int b) {\n\treturn a - (b * (a/b));\n}\nfloat lerp(float a, float b, float t) {\n\treturn b*t + a*(1.-t);\n}\nfloat unlerp(float x, float a, float b) {\n\tfloat t = (x-a)/(b-a);\n\treturn t;\n}\nfloat modFast(const float x, float m, float mInv) {\n  float quotient = x * mInv;\n  return x - floor(quotient) * m;\n}\n",map_fragment:"#ifdef USE_MAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 mapUv = mapUV();\n#else\n\tvec2 mapUv = vUv;\n#endif\n\tvec4 texelColor;\n\tif(!skip_map) {\n\t\t#ifdef TRIPLANAR_MAPPING\n\t\t\tvec4 _mapTransform = vec4(1, 1, 0, 0);\n\t\t\t#ifdef USE_map_UV_TRANSFORM_PARAMS\n\t\t\t\t_mapTransform = mapUVTransformParams;\n\t\t\t#endif\n\t\t\ttexelColor = triplanarEnabledMap ? triplanarSample( map, _mapTransform ) : texture2D( map, mapUv );\n\t\t#else\n\t\t\ttexelColor = texture2D( map, mapUv );\n\t\t#endif\n\t\ttexelColor = mapTexelTransform( mapTexelToLinear( texelColor ) );\n\t\tdiffuseColor *= texelColor;\n\t}\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform bool skip_map;\n\t#if ! defined( TEXTURE_SLOTS )\n\t\tuniform sampler2D map;\n\t#endif\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\t#if defined( TEXTURE_SLOTS )\n\t\tvec2 metalnessUv = metalnessMapUV();\n\t#else\n\t\tvec2 metalnessUv = vUv;\n\t#endif\n\tvec4 texelMetalness = metalnessMapTexelTransform( texture2D( metalnessMap, metalnessUv ) );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_METALNESSMAP\n\t\tuniform sampler2D metalnessMap;\n\t#endif\n#endif\n",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif\n",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tif(!skip_normalMap) {\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t}\n#endif\n#ifdef USE_BUMPMAP\n\tif(!skip_bumpMap) {\n\t\tnormal = perturbNormalArb( -vViewPosition, normal, bump_dHdxy_fwd() );\n\t}\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform bool skip_normalMap;\n\t#if ! defined( TEXTURE_SLOTS )\n\t\tuniform sampler2D normalMap;\n\t#endif\n\t\tuniform vec2 normalScale;\n\tvec3 _perturbNormal2ArbHelper(const vec4 texelNormal, const vec2 normalUv, const vec3 q0, const vec3 q1, const vec3 surf_norm) {\n\t\tvec2 st0 = dFdx( normalUv.st );\n\t\tvec2 st1 = dFdy( normalUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 NfromST = cross( S, T );\n\t\tif( dot( NfromST, N ) < 0.0 ) {\n\t\t\tS *= -1.0;\n\t\t\tT *= -1.0;\n\t\t}\n\t\tvec3 mapN = texelNormal.xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn tsn * mapN;\n\t}\n\t#ifdef TRIPLANAR_MAPPING\n\t\tvec3 triplanarSampleNormal( vec3 q0, vec3 q1, vec3 surf_norm ) {\n\t\t\tvec4 _normalMapTransform = vec4(1, 1, 0, 0);\n\t\t\t#ifdef USE_normalMap_UV_TRANSFORM_PARAMS\n\t\t\t\t_normalMapTransform = normalMapUVTransformParams;\n\t\t\t#endif\n\t\t\tvec4 texelX = triplanarSampleDirectX(normalMap, _normalMapTransform);\n\t\t\tvec4 texelY = triplanarSampleDirectY(normalMap, _normalMapTransform);\n\t\t\tvec4 texelZ = triplanarSampleDirectZ(normalMap, _normalMapTransform);\n\t\t\tvec3 normalX = _perturbNormal2ArbHelper(texelX, TRIPLANAR_UV_X, q0, q1, surf_norm);\n\t\t\tvec3 normalY = _perturbNormal2ArbHelper(texelY, TRIPLANAR_UV_Y, q0, q1, surf_norm);\n\t\t\tvec3 normalZ = _perturbNormal2ArbHelper(texelZ, TRIPLANAR_UV_Z, q0, q1, surf_norm);\n\t\t\treturn normalize(triplanarCombine(normalX, normalY, normalZ));\n\t\t}\n\t#endif\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\t#ifdef TRIPLANAR_MAPPING\n\t\t\tif(triplanarEnabledNormalMap)\n\t\t\t\treturn triplanarSampleNormal(q0, q1, surf_norm);\n\t\t#endif\n\t\t#if defined( TEXTURE_SLOTS )\n\t\t\tvec2 normalUv = normalMapUV();\n\t\t#else\n\t\t\tvec2 normalUv = vUv;\n\t\t#endif\n\t\tvec4 texel = texture2D( normalMap, normalUv );\n\t\treturn normalize(_perturbNormal2ArbHelper(texel, normalUv, q0, q1, surf_norm));\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst highp float EDGE_DISTANCE = .005;vec4 packDepthToRGBA( in highp float v ) {\n  v = v * (1. - EDGE_DISTANCE * 2.) + EDGE_DISTANCE;\n  v += 0.5 / ( 255.0*255.0*255.0 );\n  const highp vec4 packFactor = vec4( 1.0, 255.0, 65025.0, 16581375.0 );\n  highp vec4 res = fract( v * packFactor );\n  res.xyz -= res.yzw * (1.0/255.0);\n  return res.wzyx;\n}\nvec3 packDepthToRGB(in highp float v) {\n  v = v * (1. - EDGE_DISTANCE * 2.) + EDGE_DISTANCE;\n  v += 0.5 / ( 255.0*255.0 );\n  const highp vec4 packFactor = vec4( 1.0, 255.0, 65025.0, 16581375.0 );\n  highp vec4 res = fract( v * packFactor );\n  res.xyz -= res.yzw * (1.0/255.0);\n  return res.zyx;\n}\nvec2 packDepthToRG( in highp float v ) {\n  v = v * (1. - EDGE_DISTANCE * 2.) + EDGE_DISTANCE;\n  v += 0.5 / ( 255.0 );\n  const highp vec4 packFactor = vec4( 1.0, 255.0, 65025.0, 16581375.0 );\n  highp vec4 res = fract( v * packFactor );\n  res.xy -= res.yz * (1.0/255.0);\n  res.zw = vec2( 0.0 );\n  return res.yx;\n}\nfloat unpackRGBAToDepth( const in highp vec4 v ) {\n  const highp vec4 unpackFactor = 1.0 / vec4( 1.0, 255.0, 65025.0, 16581375.0 );\n \thighp float depth = dot( v.wzyx, unpackFactor );\n  depth -= 0.5 / ( 255.0*255.0*255.0 );\n  depth = (depth - EDGE_DISTANCE) * (1. / (1. - EDGE_DISTANCE * 2.));\n  return depth;\n}\nfloat unpackRGBToDepth( const in highp vec3 v ) {\n  const highp vec3 unpackFactor = 1.0 / vec3( 1.0, 255.0, 65025.0 );\n \thighp float depth = dot( v.zyx, unpackFactor );\n  depth -= 0.5 / ( 255.0*255.0 );\n  depth = (depth - EDGE_DISTANCE) * (1. / (1. - EDGE_DISTANCE * 2.));\n  return depth;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n  const highp vec2 unpackFactor = 1.0 / vec2( 1.0, 255.0 );\n \thighp float depth = dot( v.yx, unpackFactor );\n  depth -= 0.5 / ( 255.0 );\n  depth = (depth - EDGE_DISTANCE) * (1. / (1. - EDGE_DISTANCE * 2.));\n  return depth;\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\nvec4 packNormalToRGBA( vec3 normal ) {\n  normal.x = saturate(normal.x * .5 + .5);\n  normal.y = saturate(normal.y * .5 + .5);\n  float zSign = sign( normal.z );\n\tif( zSign == 0. ) zSign = 1.;\n\tnormal.x *= zSign;\n  normal.x = normal.x * .5 + .5;\n  return vec4(\n    packDepthToRG(normal.x),\n    packDepthToRG(normal.y)\n  );\n}\nvec3 unpackRGBAToNormal( const vec4 packedNormals ) {\n  vec3 normal = vec3(\n    unpackRGToDepth(packedNormals.xy) * 2. - 1.,\n    unpackRGToDepth(packedNormals.zw) * 2. - 1.,\n    0.\n  );\n  normal.z = sign(normal.x);\n  normal.x = abs(normal.x);\n  normal.x = normal.x * 2. - 1.;\n  normal.z *= sqrt(max(0., 1. - normal.x*normal.x - normal.y*normal.y));\n  return normal;\n}\nfloat floatToLogUnit(const float f, const float log2Base) {\n  float s = sign(f);\n  float logged = log2(abs(f)) / log2Base;\n  logged = max(-1., logged);  logged = logged * 0.5 + 0.5;\n  if (s >= 0.) logged = 0.5 + logged * 0.5;\n  else logged = 0.5 - logged * 0.5;  return clamp(logged, 0., 1.);\n}\nfloat logUnitToFloat(float logged, const float maxExp) {\n  float s = logged >= 0.5 ? 1. : -1.;\n  if (s > 0.) logged = (logged - 0.5) * 2.;\n  else logged = 1. - logged * 2.;  logged = logged * 2. - 1.;  return s * exp2(logged * maxExp);\n}\nconst float halfBits = 16.;\nvec2 halfToByte2(const float f) {\n  vec2 vec;\n  float logged = floatToLogUnit(f, halfBits);\n  logged *= 255.;\n  vec.x = floor(logged);\n  logged = (logged - vec.x) * 255.;\n  vec.y = floor(logged);\n  return vec * (1. / 255.);\n}\nfloat byte2ToHalf(const vec2 vec) {\n  if (vec.x == 127. && vec.y == 127.) return 0.;\n  float logged = vec.x + vec.y * (1. / 255.);\n  return logUnitToFloat(logged, halfBits);\n}\nconst float floatBits = 128.;\nvec4 floatToByte4(const float f) {\n  vec4 vec;\n  float logged = floatToLogUnit(f, floatBits);\n  logged *= 255.;\n  vec.x = floor(logged);\n  logged = (logged - vec.x) * 255.;\n  vec.y = floor(logged);\n  logged = (logged - vec.y) * 255.;\n  vec.z = floor(logged);\n  logged = (logged - vec.z) * 255.;\n  vec.w = floor(logged);\n  return vec * (1. / 255.);\n}\nfloat byte4ToFloat(const vec4 vec) {\n  if (vec.x == 127. && vec.y == 127. && vec.z == 127. && vec.w == 127.) return 0.;\n  float logged =\n    vec.x +\n    vec.y * (1. / 255.) +\n    vec.z * (1. / 255. / 255.) +\n    vec.w * (1. / 255. / 255. / 255.);\n  return logUnitToFloat(logged, floatBits);\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",unpremultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tif(abs(gl_FragColor.a) > EPSILON)\n\t\tgl_FragColor.rgb /= gl_FragColor.a;\n\telse\n\t\tgl_FragColor.rgb = vec3(0);\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;",raytracing:"struct Ray3 {\n    vec3 origin;\n    vec3 direction;\n};\nvoid setRay( out Ray3 resultRay, in vec3 origin, in vec3 direction ) {\n\tresultRay.origin = origin;\n\tresultRay.direction = normalize( direction );\n}\nfloat fresnelReflectance( float n0, float n1, vec3 incident, vec3 refracted, vec3 normal ) {\n\tfloat cosI = dot( incident, normal );\n\tfloat cosT = dot( refracted, normal );\n\tfloat Rs = pow2( ( n0 * cosI - n1 * cosT ) / ( abs( n0 * cosI + n1 * cosT ) + 0.000001 ) );\n\tfloat Rp = pow2( ( n0 * cosT - n1 * cosI ) / ( abs( n0 * cosT + n1 * cosI ) + 0.000001 ) );\n\treturn 0.5 * ( Rs + Rp );\n}",reflectivitymap_fragment:"float reflectivityStrength;\n#ifdef USE_REFLECTIVITYMAP\n\t#if defined( TEXTURE_SLOTS )\n\t\tvec2 reflectivityUv = reflectivityMapUV();\n\t#else\n\t\tvec2 reflectivityUv = vUv;\n\t#endif\n\tvec4 texelReflectivity = reflectivityMapTexelTransform( texture2D( reflectivityMap, reflectivityUv ) );\n\treflectivityStrength = texelReflectivity.r;\n#else\n\treflectivityStrength = 1.0;\n#endif\n",reflectivitymap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_REFLECTIVITYMAP\n\t\tuniform sampler2D reflectivityMap;\n\t#endif\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\t#if defined( TEXTURE_SLOTS )\n\t\tvec2 roughnessUv = roughnessMapUV();\n\t#else\n\t\tvec2 roughnessUv = vUv;\n\t#endif\n\tvec4 texelRoughness;\n\t#ifdef TRIPLANAR_MAPPING\n\t\tvec4 _roughnessMapTransform = vec4(1, 1, 0, 0);\n\t\t#ifdef USE_roughnessMap_UV_TRANSFORM_PARAMS\n\t\t\t_roughnessMapTransform = roughnessMapUVTransformParams;\n\t\t#endif\n\t\ttexelRoughness = triplanarEnabledRoughnessMap ? triplanarSample( roughnessMap, _roughnessMapTransform ) : texture2D( roughnessMap, roughnessUv );\n\t#else\n\t\ttexelRoughness = texture2D( roughnessMap, roughnessUv );\n\t#endif\n\ttexelRoughness = roughnessMapTexelTransform( texelRoughness );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_ROUGHNESSMAP\n\t\tuniform sampler2D roughnessMap;\n\t#endif\n#endif\n",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#ifndef ENVMAP_DEFINED_vWorldPosition\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t#endif\n\t#if defined( SHADOWMAP_TYPE_PCSS )\n\t\t#define PCSS_QUALITY_LEVEL 5\n\t\t#define PCSS_NUM_POISSON_SAMPLES 16\n\t\t#define PCSS_ROTATE_POISSON_SAMPLES 1\n\t\tvec2 poissonDisk[PCSS_NUM_POISSON_SAMPLES];\n\t\tvoid initPercentCloserSoftShadow( const in vec2 randomSeed )\t{\n\t\t\tpoissonDisk[0] = vec2(-0.94201624, -0.39906216 );\n\t\t\tpoissonDisk[1] = vec2( 0.94558609, -0.76890725 );\n\t\t\tpoissonDisk[2] = vec2( -0.094184101, -0.92938870 );\n\t\t\tpoissonDisk[3] = vec2( 0.34495938, 0.29387760 );\n\t\t\tpoissonDisk[4] = vec2( -0.91588581, 0.45771432 );\n\t\t\tpoissonDisk[5] = vec2( -0.81544232, -0.87912464 );\n\t\t\tpoissonDisk[6] = vec2( -0.38277543, 0.27676845 );\n\t\t\tpoissonDisk[7] = vec2( 0.97484398, 0.75648379 );\n\t\t\tpoissonDisk[8] = vec2( 0.44323325, -0.97511554 );\n\t\t\tpoissonDisk[9] = vec2( 0.53742981, -0.47373420 );\n\t\t\tpoissonDisk[10] = vec2( -0.26496911, -0.41893023 );\n\t\t\tpoissonDisk[11] = vec2( 0.79197514, 0.19090188 );\n\t\t\tpoissonDisk[12] = vec2( -0.24188840, 0.99706507 );\n\t\t\tpoissonDisk[13] = vec2( -0.81409955, 0.91437590 );\n\t\t\tpoissonDisk[14] = vec2( 0.19984126, 0.78641367 );\n\t\t\tpoissonDisk[15] = vec2( 0.14383161, -0.14100790 );\n\t\t}\n\t\tmat2 createRotationMatrix( const in vec2 randomSeed ) {\n\t\t\tfloat angle = rand( randomSeed + cameraPosition.x + cameraPosition.y + cameraPosition.z ) * PI2;\n\t\t\tfloat c = cos( angle ), s = sin( angle );\n\t\t\treturn mat2( c, s, -s, c );\n\t\t}\n\t\tfloat penumbraSize( const in float zReceiverLightSpace, const in float zBlockerLightSpace ) {\t\t\treturn (zReceiverLightSpace - zBlockerLightSpace) / zBlockerLightSpace;\n\t\t}\n\t\tfloat findBlockerLightZ( sampler2D shadowMap, const in vec2 uv, const in float zReceiverClipSpace, const in float zReceiverLightSpace, const in float shadowRadius, const in float spreadAngle, const in vec3 shadowCameraParams, const in vec2 randomSeed, const int lightType ) {\n\t\t\tfloat lightFrustrumWidth = 2.0 * shadowCameraParams.y * tan(shadowCameraParams.x * 0.5);\n\t\t\tfloat searchRadius = 0.0;\n\t\t\tsearchRadius = ( lightType == 0) ? zReceiverLightSpace * spreadAngle/shadowCameraParams.x : ( shadowRadius / lightFrustrumWidth ) * ( zReceiverLightSpace - shadowCameraParams.y ) / zReceiverLightSpace;\n\t\t\tfloat blockerLightZSum = 0.0;\n\t\t\tint numBlockers = 0;\n\t\t\tfloat angle = rand( randomSeed ) * PI2;\n\t\t\tfloat s = sin(angle);\n\t\t\tfloat c = cos(angle);\n\t\t\tfor( int i = 0; i < PCSS_NUM_POISSON_SAMPLES; i++ ) {\n\t\t\t#if PCSS_ROTATE_POISSON_SAMPLES == 1\n\t\t\t\tvec2 poissonSample = vec2(poissonDisk[i].y * c + poissonDisk[i].x * s, poissonDisk[i].y * -s + poissonDisk[i].x * c);\n\t\t\t#else\n\t\t\t\tvec2 poissonSample = poissonDisk[i];\n\t\t\t#endif\n\t\t\t\tfloat shadowMapDepth = unpackRGBAToDepth( texture2D( shadowMap, uv + poissonSample * searchRadius ) );\n\t\t\t\tif ( shadowMapDepth < zReceiverClipSpace ) {\n\t\t\t\t\tblockerLightZSum += shadowMapDepth;\n\t\t\t\t\tnumBlockers ++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( numBlockers == 0 ) return -1.0;\n\t\t\treturn blockerLightZSum / float( numBlockers );\n\t\t}\n\t\tfloat percentCloserFilter( sampler2D shadowMap, vec2 uv, float receiverClipZ, float filterRadius, const in vec2 randomSeed ) {\n\t\t\tint numBlockers = 0;\n\t\t\tfloat angle = rand( randomSeed ) * PI2;\n\t\t\tfloat s = sin(angle);\n\t\t\tfloat c = cos(angle);\n\t\t\tfor( int i = 0; i < PCSS_NUM_POISSON_SAMPLES; i ++ ) {\n\t\t\t#if PCSS_ROTATE_POISSON_SAMPLES == 1\n\t\t\t\tvec2 poissonSample = vec2(poissonDisk[i].y * c + poissonDisk[i].x * s, poissonDisk[i].y * -s + poissonDisk[i].x * c);\n\t\t\t#else\n\t\t\t\tvec2 poissonSample = poissonDisk[i];\n\t\t\t#endif\n\t\t\t\tvec2 uvOffset = poissonSample * filterRadius;\n\t\t\t\tfloat blockerClipZ = unpackRGBAToDepth( texture2D( shadowMap, uv + uvOffset ) );\n\t\t\t\tif( receiverClipZ <= blockerClipZ ) numBlockers ++;\n\t\t\t\tblockerClipZ = unpackRGBAToDepth( texture2D( shadowMap, uv - uvOffset ) );\n\t\t\t\tif( receiverClipZ <= blockerClipZ ) numBlockers ++;\n\t\t\t}\n\t\t\treturn float( numBlockers ) / ( 2.0 * float( PCSS_NUM_POISSON_SAMPLES ) );\n\t\t}\n\t\tfloat percentCloserSoftShadow( sampler2D shadowMap, const in float shadowRadius, const in float spreadAngle, const in vec3 shadowCameraParams, const in vec4 coords, const int lightType ) {\n\t\t\tvec2 uv = coords.xy;\n\t\t\tfloat receiverLightZ = coords.z;\n\t\t\tfloat cameraNear = shadowCameraParams.y, cameraFar = shadowCameraParams.z;\n\t\t\tfloat zReceiverLightSpace;\n\t\t\tif(lightType == 0)\n\t\t\t\tzReceiverLightSpace = -orthographicDepthToViewZ( receiverLightZ, cameraNear, cameraFar );\n\t\t\telse\n\t\t\t\tzReceiverLightSpace = -perspectiveDepthToViewZ( receiverLightZ, cameraNear, cameraFar );\n\t\t\tfloat blockerLightZ = findBlockerLightZ( shadowMap, uv, receiverLightZ, zReceiverLightSpace, shadowRadius, spreadAngle, shadowCameraParams, uv, lightType );\n\t\t\tif( blockerLightZ == -1.0 ) return 1.0;\n\t\t\tfloat avgBlockerDepthLightSpace;\n\t\t\tfloat filterRadius = 0.0;\n\t\t\tif(lightType == 0) {\n\t\t\t\tavgBlockerDepthLightSpace = -orthographicDepthToViewZ( blockerLightZ, cameraNear, cameraFar );\n\t\t\t\tfilterRadius = (zReceiverLightSpace - avgBlockerDepthLightSpace) * spreadAngle/shadowCameraParams.x;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tavgBlockerDepthLightSpace = -perspectiveDepthToViewZ( blockerLightZ, cameraNear, cameraFar );\n\t\t\t\tfloat penumbraRatio = penumbraSize( zReceiverLightSpace, avgBlockerDepthLightSpace );\n\t\t\t\tfloat lightFrustrumWidth = 2.0 * cameraNear * tan(shadowCameraParams.x * 0.5);\n\t\t\t\tfilterRadius = penumbraRatio * ( shadowRadius/lightFrustrumWidth ) * cameraNear / zReceiverLightSpace;\n\t\t\t}\n\t\t\t\n\t\t\treturn  percentCloserFilter( shadowMap, uv, receiverLightZ, filterRadius, uv );\n\t\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tvoid initShadows() {\n\t\t#if defined( SHADOWMAP_TYPE_PCSS )\n\t\t  initPercentCloserSoftShadow( vViewPosition.xy );\n\t\t#endif\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, float spreadAngle, vec3 shadowCameraParams, vec4 shadowCoord, const int lightType ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCSS )\n\t\t  return percentCloserSoftShadow( shadowMap, shadowRadius, spreadAngle, shadowCameraParams, shadowCoord, lightType );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#ifndef ENVMAP_DEFINED_vWorldPosition\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHTS > 0\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#ifndef ENVMAP_DEFINED_vWorldPosition\n\t\tvWorldPosition = worldPosition.xyz;\n\t#endif\n\t#if NUM_DIR_LIGHTS > 0\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, 0.0, directionalLight.spreadAngle, directionalLight.shadowCameraParams, directionalShadowMatrix[ i ] * vec4(vWorldPosition, 1), 0 ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, 0.0, spotLight.shadowCameraParams, spotShadowMatrix[ i ] * vec4(vWorldPosition, 1), 1 ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, pointShadowMatrix[ i ] * vec4(vWorldPosition, 1) ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif\n",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n\t\n#endif\n",slot_texel_transform_template:"vec4 $SLOT_NAME$TexelTransform( vec4 value ) {\n    float scale = $SLOT_NAME$UVTexelTransformParams2.x;\n    float bias = $SLOT_NAME$UVTexelTransformParams2.y;\n    value.rgb *= scale;\n    value.rgb += vec3( bias );\n    return value;\n}\n",slot_uv_transform_template:"vec2 $SLOT_NAME$UV() {\n  vec2 value = $UV_VAR_NAME$;\n  vec2 scale  = $SLOT_NAME$UVTexelTransformParams1.xy;\n  vec2 offset = $SLOT_NAME$UVTexelTransformParams1.zw;\n  float angle = $SLOT_NAME$UVTexelTransformParams2.z;\n  value.xy *= scale;\n  value.xy += offset;\n  if(abs(angle) > 1e-6) {\n    const vec2 center = vec2(.5);\n    float s = sin(angle);\n    float c = cos(angle);\n    mat2 rotMat = mat2(c, s, -s, c);\n    value.xy = (value.xy - center) * rotMat + center;\n  }\n  return value;\n}\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\t#if defined( TEXTURE_SLOTS )\n\t\tvec2 specularUv = specularMapUV();\n\t#else\n\t\tvec2 specularUv = vUv;\n\t#endif\n\tvec4 texelSpecular = specularMapTexelTransform( texture2D( specularMap, specularUv ) );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif\n",specularmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_SPECULARMAP\n\t\tuniform sampler2D specularMap;\n\t#endif\n#endif\n",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  #include <premultiplied_alpha_fragment>\n  \n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n  \n  #include <unpremultiplied_alpha_fragment>\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP ) || defined( USE_FALLOFFMAP ) || defined( USE_FALLOFFALPHAMAP ) || defined( ANISOTROPY )\n\t\tvarying vec2 vUv;\n\t#endif\n#endif\n",uv_pars_vertex:"#if ! defined( TEXTURE_SLOTS )\n\t#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )  || defined( USE_FALLOFFMAP ) || defined( ANISOTROPY ) || defined( USE_DISPLACEMENTMAP )\n\t\tvarying vec2 vUv;\n\t\tuniform vec4 offsetRepeat;\n\t#endif\n#endif",uv_vertex:"#if ! defined( TEXTURE_SLOTS )\n\t#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP ) || defined( USE_FALLOFFMAP ) || defined( USE_FALLOFFALPHAMAP ) || defined( ANISOTROPY )\n\t\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\t#endif\n#endif\n$INSERT_ADDITIONAL_UV_TRANSFORMS$",uv2_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP ) || defined( ANISOTROPY )\n\t\tvarying vec2 vUv2;\n\t#endif\n#endif\n",uv2_pars_vertex:"#if ! defined( TEXTURE_SLOTS )\n\t#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP ) || defined( ANISOTROPY )\n\t\tattribute vec2 uv2;\n\t\tvarying vec2 vUv2;\n\t#endif\n#endif",uv2_vertex:"#if ! defined( TEXTURE_SLOTS )\n\t#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP ) || defined( ANISOTROPY )\n\t\tvUv2 = uv2;\n\t#endif\n#endif",uvss_pars_fragment:"#if defined( UV_SS )\n\tvarying vec4 vUvSSPosition;\n#endif",uvss_pars_vertex:"#if defined( UV_SS )\n\tvarying vec4 vUvSSPosition;\n#endif",uvss_fragment:"#if defined( UV_SS )\n\tvec2 uvSS = vec2( vUvSSPosition.xy / vUvSSPosition.w ) * 0.5 + vec2( 0.5 );\n#endif",uvss_vertex:"#if defined( UV_SS )\n\tvUvSSPosition = gl_Position;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",oit_fragment:"#ifdef USE_OIT\n    if( oitMode == 0 ) {      float z = abs(vPositionZ);\n      float weight = gl_FragColor.a * clamp( 1e2 / (1e-5 + z), 1e-2, 3e3 );\n      gl_FragColor = vec4(gl_FragColor.rgb * gl_FragColor.a, gl_FragColor.a) * weight;\n    }\n    else if( oitMode == 1 ) {      gl_FragColor = vec4(gl_FragColor.a);\n    }\n#endif\n",oit_vertex:"#ifdef USE_OIT\n  vPositionZ = mvPosition.z;\n#endif\n",oit_pars_vertex:"#ifdef USE_OIT\n  varying float vPositionZ;\n#endif\n",oit_pars_fragment:"#ifdef USE_OIT\n  varying float vPositionZ;\n  uniform int oitMode;\n#endif\n",halton:"float getHalton1DFast(float pointId, const float base, const float baseInv) {\n  pointId += 1.;  float f = 1.;\n  float remainder = 0.;\n  const int maxIter = 6;  for(int iter = 0; iter < maxIter; iter++) {\n    if(pointId < EPSILON)\n      break;\n    f *= baseInv;\n    remainder += f * modFast(pointId, base, baseInv);\n    pointId = floor(pointId * baseInv);\n  }\n  return remainder;\n}\nvec2 getHalton2DFast(int pointId) {\n  const float base1 = 2.;\n  const float base2 = 3.;\n  const float base1Inv = 1. / base1;\n  const float base2Inv = 1. / base2;\n  float pointId_f = float(pointId);\n  return vec2(\n    getHalton1DFast(pointId_f, base1, base1Inv),\n    getHalton1DFast(pointId_f, base2, base2Inv)\n  );\n}\n",triplanar_pars_vertex:"varying vec3 triplanarBlending;\nvarying vec3 triplanarPosition;\nuniform vec3 triplanarScale;\nuniform float triplanarExponent;\n",triplanar_vertex:"\ntriplanarPosition = position * triplanarScale;\ntriplanarBlending = objectNormal;\nvec3 triplanarSigns = sign(triplanarBlending);\ntriplanarBlending = abs(triplanarBlending);\ntriplanarBlending = pow(triplanarBlending, vec3(triplanarExponent));\ntriplanarBlending /= vec3(triplanarBlending.x + triplanarBlending.y + triplanarBlending.z);\ntriplanarBlending *= triplanarSigns;",triplanar_pars_fragment:"#define TRIPLANAR_MAPPING\nvarying vec3 triplanarBlending;\nvarying vec3 triplanarPosition;\nuniform ivec4 triplanarEnabledMaps;\nbool triplanarEnabledMap, triplanarEnabledNormalMap, triplanarEnabledBumpMap, triplanarEnabledRoughnessMap;\n#define TRIPLANAR_UV_X triplanarPosition.zy\n#define TRIPLANAR_UV_Y triplanarPosition.xz\n#define TRIPLANAR_UV_Z triplanarPosition.xy\nvec4 triplanarSampleDirectX(sampler2D texture, vec4 transform) {\n  if(abs(triplanarBlending.x) > EPSILON) {\n    vec2 uv = TRIPLANAR_UV_X * transform.xy + transform.zw;\n    return texture2D(texture, uv);\n  } else\n    return vec4(0);\n}\nvec4 triplanarSampleDirectY(sampler2D texture, vec4 transform) {\n  if(abs(triplanarBlending.y) > EPSILON) {\n    vec2 uv = TRIPLANAR_UV_Y * transform.xy + transform.zw;\n    return texture2D(texture, uv);\n  } else\n    return vec4(0);\n}\nvec4 triplanarSampleDirectZ(sampler2D texture, vec4 transform) {\n  if(abs(triplanarBlending.z) > EPSILON) {\n    vec2 uv = TRIPLANAR_UV_Z * transform.xy + transform.zw;\n    return texture2D(texture, uv);\n  } else\n    return vec4(0);\n}\nvec4 triplanarCombine(vec4 texelColorX, vec4 texelColorY, vec4 texelColorZ) {\n  vec4 total = vec4(0);\n  if(abs(triplanarBlending.x) > EPSILON) total += texelColorX * abs(triplanarBlending.x);\n  if(abs(triplanarBlending.y) > EPSILON) total += texelColorY * abs(triplanarBlending.y);\n  if(abs(triplanarBlending.z) > EPSILON) total += texelColorZ * abs(triplanarBlending.z);\n  return total;\n}\nvec3 triplanarCombine(vec3 texelColorX, vec3 texelColorY, vec3 texelColorZ) {\n  vec3 total = vec3(0);\n  if(abs(triplanarBlending.x) > EPSILON) total += texelColorX * abs(triplanarBlending.x);\n  if(abs(triplanarBlending.y) > EPSILON) total += texelColorY * abs(triplanarBlending.y);\n  if(abs(triplanarBlending.z) > EPSILON) total += texelColorZ * abs(triplanarBlending.z);\n  return total;\n}\nvec2 triplanarCombine(vec2 texelColorX, vec2 texelColorY, vec2 texelColorZ) {\n  vec2 total = vec2(0);\n  if(abs(triplanarBlending.x) > EPSILON) total += texelColorX * abs(triplanarBlending.x);\n  if(abs(triplanarBlending.y) > EPSILON) total += texelColorY * abs(triplanarBlending.y);\n  if(abs(triplanarBlending.z) > EPSILON) total += texelColorZ * abs(triplanarBlending.z);\n  return total;\n}\nvec4 triplanarSample(sampler2D texture, vec4 transform) {\n  vec4 texelColorX = triplanarSampleDirectX(texture, transform);\n  vec4 texelColorY = triplanarSampleDirectY(texture, transform);\n  vec4 texelColorZ = triplanarSampleDirectZ(texture, transform);\n  return triplanarCombine(texelColorX, texelColorY, texelColorZ);\n}\n#ifdef USE_BUMPMAP\n  vec2 _sampleTriplanarBumpSingle(sampler2D texture, vec2 bumpUv, vec2 dSTdx, vec2 dSTdy) {\n    #ifdef USE_bumpMap_UV_TRANSFORM_PARAMS\n      bumpUv *= bumpMapUVTransformParams.xy;\n      bumpUv += bumpMapUVTransformParams.zw;\n    #endif\n    float Hll = bumpMapTexelTransform( texture2D( texture, bumpUv ) ).x;\n    float dBx = bumpMapTexelTransform( texture2D( texture, bumpUv + dSTdx ) ).x - Hll;\n    float dBy = bumpMapTexelTransform( texture2D( texture, bumpUv + dSTdy ) ).x - Hll;\n    return vec2(dBx, dBy);\n  }\n  vec2 triplanarSampleBump(sampler2D texture) {\n    vec2 texelColorX, texelColorY, texelColorZ;\n    texelColorX = texelColorY = texelColorZ = vec2(0);\n    vec3 dPosdx = dFdx( triplanarPosition );\n    vec3 dPosdy = dFdy( triplanarPosition );\n    if(abs(triplanarBlending.x) > EPSILON)\n      texelColorX = _sampleTriplanarBumpSingle(texture, triplanarPosition.yz, dPosdx.zy, dPosdy.zy);\n    if(abs(triplanarBlending.y) > EPSILON)\n      texelColorY = _sampleTriplanarBumpSingle(texture, triplanarPosition.xz, dPosdx.xz, dPosdy.xz);\n    if(abs(triplanarBlending.z) > EPSILON)\n      texelColorZ = _sampleTriplanarBumpSingle(texture, triplanarPosition.xy, dPosdx.xy, dPosdy.xy);\n    return triplanarCombine(texelColorX, texelColorY, texelColorZ);\n  }\n#endif",triplanar_fragment:"triplanarEnabledMap          = triplanarEnabledMaps.x != 0;\ntriplanarEnabledNormalMap    = triplanarEnabledMaps.y != 0;\ntriplanarEnabledBumpMap      = triplanarEnabledMaps.z != 0;\ntriplanarEnabledRoughnessMap = triplanarEnabledMaps.w != 0;\n",ssr_pars_fragment:"#ifdef USE_SSR\n\tuniform sampler2D ssrMap;\n\tuniform vec2 ssrBufferScale;\n\tuniform float ssrNumMips;\n\tuniform mat4 projectionMatrix;\n\tvec3 occludeWithSSR(vec3 envLight) {\n\t\tvec4 reproj = projectionMatrix * vec4(vViewPosition, 1.0);\n\t\tvec2 ssrUV = reproj.xy / reproj.w * .5 + .5;\n\t\tssrUV *= ssrBufferScale;\n\t\t#if defined(TEXTURE_LOD) && False\n\t\t\tfloat power = 2.0/(roughnessSqr * roughnessSqr) - 2.0;\n\t\t\tfloat factor = (exp2(-10.0/sqrt(power)) - .00098)/.9921;\n\t\t\tfloat mipLevel = ssrNumMips * (1.0 - clamp(factor, 0.0, 1.0));\n\t\t\tvec4 ssr = texture2DLodEXT(ssrMap, ssrUV, mipLevel);\n\t\t#else\n\t\t\tvec4 ssr = texture2D(ssrMap, ssrUV);\n\t\t#endif\n\t\tif(ssr.a > .01)\n\t\t\tssr.rgb /= ssr.a;\n\t\telse\n\t\t\tssr.rgba = vec4(0);\n\t\treturn mix(envLight, ssr.rgb, ssr.a);\n\t}\n#endif",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",cubeEnv_frag:"uniform float tFlip;\nuniform float opacity;\nuniform float roughness;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 queryReflectVec = vec3( tFlip * vWorldPosition.x, vWorldPosition.yz );\n\tvec4 envMapColor = vec4( 0.0 );\n\t#if defined( ENVMAP_TYPE_CUBE )\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\tenvMapColor = textureCubeLodEXT( envMap, queryReflectVec, roughness * 8.0 );\n\t\t#else\n\t\t\tenvMapColor = textureCube( envMap, queryReflectVec, roughness * 8.0 );\n\t\t#endif\n\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\tenvMapColor.rgb *= envMapIntensity;\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tenvMapColor = textureCubeUV( queryReflectVec, queryReflectVec, roughness );\n\t\tenvMapColor.rgb *= envMapIntensity;\n\t#endif\n\tgl_FragColor = envMapColor;\n\tgl_FragColor.a = opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <logdepthbuf_fragment>\n}\n",cubeEnv_vert:"varying vec3 vWorldPosition;\n#include <common>\n#include <clipping_planes_pars_vertex>\n#if NUM_CLIPPING_PLANES == 0\n\t#if ! defined( VARYING_VVIEWPOSITION )\n   \t\tvarying vec3 vViewPosition;\n   \t\t#define VARYING_VVIEWPOSITION 1\n   #endif\n#endif\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}\n",depth_frag:"precision highp float;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec4 clipSpacePosition;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200 || DEPTH_PACKING == -1\n\t\tdiffuseColor.a = opacity;\n\t\t\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t\n\tfloat far = gl_DepthRange.far;\n\tfloat near = gl_DepthRange.near;\n\thighp float ndc_depth = clipSpacePosition.z / clipSpacePosition.w;\n\thighp float fragCoordZ = (((far-near) * ndc_depth ) + near + far) / 2.0;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( fragCoordZ ), diffuseColor.a );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#else\n\t\tgl_FragColor = vec4(0);\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <packing>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec4 clipSpacePosition;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tclipSpacePosition = projectionMatrix * mvPosition;\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",glassAdvanced_frag:"#include <packing>\n#include <common>\n#include <math>\n#include <matrix>\n#include <raytracing>\n#ifndef USE_ENVMAP\n\t#define USE_ENVMAP\n#endif\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#define NUM_LAYERS 4.\n#define MODE_TWO_LAYER 0\n#define MODE_FOUR_LAYER 1\n#define MODE_TOTAL_INTERNAL_REFLECTION 2\n#define DM_OFF 0\n#define DM_BINSEARCH 1\n#define DM_ERROR_BACK 2\n#define DM_ERROR_FRONT 3\n#define DM_INCIDENT_DIR 4\n#define DM_SURFACE_NORMAL 5\n#define DM_REFLECTED 6\n#define DM_NTH_INCIDENT 7\n#define DM_NTH_NORMAL 8\n#define DM_NTH_REFLECTED 9\n#define DM_NTH_REFRACTED 10\n#define DM_NTH_HIT_POS 11\n#define DM_PEEL1 12\n#define DM_PEEL2 13\n#define DM_PEEL3 14\n#define DM_PEEL4 15\n#define DM_NTH_DEPTH 16\n#define DM_NTH_PEEL_NUM 17\n#define DM_PEEL1_Z 18\n#define DM_PEEL2_Z 19\n#define DM_PEEL3_Z 20\n#define DM_PEEL4_Z 21\n#define DM_PEEL1_DEPTH2NORMAL 22\n#define DM_PEEL2_DEPTH2NORMAL 23\n#define FOUR_LAYER (MODE == MODE_FOUR_LAYER)\n#if DEBUG_MODE != DM_OFF\nbool isDebugTarget = false;\n#endif\nuniform sampler2D depthPeelDepth1;\nuniform sampler2D depthPeelDepth2;\nuniform sampler2D depthPeelDepth3;\nuniform sampler2D depthPeelDepth4;\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform vec2 cameraNearFar;\nuniform vec2 windowSize;\nuniform float crystalIOR;\nuniform float abbeNumber;\nuniform float boostFactor;\nuniform vec3 absorptionColor;\nuniform float absorptionFactor;\nvec3 absorption;\nvarying vec2 vUv;\nvarying vec4 viewPosition;\nconst float airIOR = 1.0;\nint bounce2;\nuniform bool lqFallback;\nvarying vec3 vNormal;\nuniform mat4 modelViewMatrix;\nvec2 roundUVToPixelCenter( vec2 uv ) {\n\tvec2 localWindowSize = windowSize;\tvec2 localOffset = vec2( 0.5 );\treturn vec2(\n\t\t( floor( uv.x * localWindowSize.x - localOffset.x ) + localOffset.x ) / localWindowSize.x,\n\t\t( floor( uv.y * localWindowSize.y - localOffset.y ) + localOffset.y ) / localWindowSize.y\n\t);\n}\nfloat getDepth(vec4 texel) {\n\treturn texel.z;\n}\nvec3 readNormal(sampler2D texture, vec2 screenPos) {\n\tvec3 normal;\n\tnormal.xy = texture2D( texture, screenPos ).xy;\n\tnormal.z = sign(normal.x);\n\tnormal.x = abs(normal.x);\n\tnormal.x = normal.x * 2. - 1.;\n  normal.z *= sqrt(max(0., 1. - normal.x*normal.x - normal.y*normal.y));\n\treturn normal;\n}\nuniform float headStart;\nfloat abbeNumberToIORDispersion(float abbeNumber) {\n\treturn (crystalIOR - 1.) / abbeNumber;\n}\nbool isFrontDepthGood(float depth) {\n\treturn -depth < cameraNearFar.y - EPSILON;\n}\nbool isBackDepthGood(float depth) {\n\treturn -depth > cameraNearFar.x + EPSILON;\n}\nvec2 projectViewToScreen( vec3 viewPosition ) {\n\tvec4 posNDC = projectionMatrix * vec4(viewPosition, 1.0);\n\tvec2 proj = posNDC.xy/posNDC.w;\n\tproj = proj * 0.5 + 0.5;\n\treturn proj;\n}\n vec3 queryEnvMapLocal( vec3 viewNormal ) {\n\tvec3 queryVec = inverseTransformDirection(viewNormal, viewMatrix);\tqueryVec = vec3( flipEnvMap * queryVec.x, queryVec.y, queryVec.z );\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, .0 );\n\t\t#else\n\t\t\tvec4 envMapColor = textureCube( envMap, queryVec );\n\t\t#endif\n\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envMapColor = textureCubeUV( queryVec, queryVec, .0 );\n\t#else\n\t\tvec4 envMapColor = vec4( 0.0 );\n\t#endif\n\treturn envMapColor.rgb * envMapIntensity;\n}\nvec3 decode2DNormal( vec2 xyNormal ) {\n\treturn  vec3(\n\t\txyNormal.x,\n\t\txyNormal.y,\n\t\tsqrt( max( 1. - pow2(xyNormal.x) - pow2(xyNormal.y), 0.0 )) );\n}\nvec3 TwoLayerRefraction(vec3 P1, vec3 viewVector, vec3 normal, float d) {\n\tvec3 T1 = normalize(refract(viewVector, normal, airIOR / crystalIOR ));\n\tfloat reflectance = fresnelReflectance( airIOR, crystalIOR, viewVector, T1, normal );\n\tvec3 result = queryEnvMapLocal( reflect(viewVector, normal) ) * reflectance;\n\tvec3 transmittance = exp(-absorption * d) * vec3( 1.0 - reflectance );\n\tvec3 P2 = P1 + d * T1;\tvec2 proj = projectViewToScreen(P2);\n\tvec3 N = readNormal( depthPeelDepth2, roundUVToPixelCenter( proj ) );\n\tvec3 T2 = refract(T1, N, crystalIOR / airIOR );\n\tif( dot(T2, T2) == 0.0 ) {\t\tif( N.x*N.x + N.y*N.y == 0.0 ) {\t\t\tvec3 reflColor = queryEnvMapLocal(viewVector);\n\t\t\tresult += reflColor * transmittance * boostFactor;\n\t\t\treturn result;\n\t\t}\n\t\tvec3 reflVec = T1 - N * dot(N, T1);\t\tvec3 reflColor = queryEnvMapLocal(reflVec);\n\t\tresult += reflColor * transmittance * boostFactor;\n\t\treturn result;\n\t}\n\tvec3 inwardSurfaceNormal = N;\treflectance = fresnelReflectance( crystalIOR, airIOR, T1, T2, inwardSurfaceNormal );\n\tif( reflectance >= 0.0 && reflectance < 0.99 ) {\n\t\tvec3 refractedColor = vec3( 0 );\n\t\tfloat dispersion = abbeNumberToIORDispersion(abbeNumber);\n\t\trefractedColor.r = queryEnvMapLocal( T2 ).r;\t\tT2 = refract( T1, inwardSurfaceNormal, crystalIOR/airIOR - dispersion );\n\t\trefractedColor.g = queryEnvMapLocal( T2 ).g;\t\tT2 = refract( T1, inwardSurfaceNormal, crystalIOR/airIOR - dispersion*2. );\n\t\trefractedColor.b = queryEnvMapLocal( T2 ).b;\t\tresult += refractedColor * transmittance * ( 1.0 - reflectance ) * boostFactor;\n\t}\n\telse {\n\t\tresult += queryEnvMapLocal( T1 ) * transmittance * boostFactor;\n\t}\n\treturn result;\n}\nvec3 FourLayerRefraction(vec3 P1, vec3 viewVector, vec3 normal, float d1, float d2, float d3) {\n\tvec3 T1 = normalize(refract(viewVector, normal, airIOR / crystalIOR ));\n\tfloat reflectance = fresnelReflectance( airIOR, crystalIOR, viewVector, T1, normal );\n\tvec3 result = queryEnvMapLocal( reflect(viewVector, normal) ) * reflectance;\n\tvec3 transmittance = vec3( 1.0 - reflectance ) * exp(-absorption * d1);\n\tvec3 P2 = P1 + d1 * T1;\n\tvec2 proj = projectViewToScreen(P2);\n\tvec3 N = readNormal( depthPeelDepth2, roundUVToPixelCenter( proj ) );\n\tvec3 T2 = refract(T1, N, crystalIOR / airIOR  );\n\tif( dot(T2, T2) == 0.0 ) {\t\tif( N.x*N.x + N.y*N.y == 0.0 ) {\t\t\tvec3 reflColor = queryEnvMapLocal(viewVector);\n\t\t\tresult += reflColor * transmittance * boostFactor;\n\t\t\treturn result;\n\t\t}\n\t\tvec3 reflVec = T1 - N * dot(N, T1);\t\tvec3 reflColor = queryEnvMapLocal(reflVec);\n\t\tresult += reflColor * transmittance * boostFactor;\n\t\treturn result;\n\t}\n\tT2 = normalize(T2);\n\tvec3 P3 = P2 + d2 * T2;\n\tproj = projectViewToScreen(P3);\n\tvec3 N2 = readNormal( depthPeelDepth3, roundUVToPixelCenter( proj ) );\n\tvec3 T3 = refract(T2, N2, airIOR / crystalIOR );\n\tvec3 reflVec = normalize(reflect(T2, N2 ));\tvec3 reflColor = queryEnvMapLocal(reflVec);\n\tT3 =  normalize(T3);\n\tvec3 P4 = P3 + d3 * T3;\n\tproj = projectViewToScreen(P4);\n\tvec3 N3 = readNormal( depthPeelDepth4, roundUVToPixelCenter( proj ) );\n\tvec3 T4 = (refract(T3, N3, crystalIOR / airIOR ));\n\tvec3 inwardSurfaceNormal = N3;\n\treflectance = fresnelReflectance( crystalIOR, airIOR, T3, T4, inwardSurfaceNormal );\n\ttransmittance *= vec3( 1.0 - reflectance ) * exp(-absorption * d3);\n\tif( dot(T2, T2) == 0.0 ) {\t\tif( N3.x*N3.x + N3.y*N3.y == 0.0 ) {\t\t\tvec3 reflColor = queryEnvMapLocal(viewVector);\n\t\t\tresult += reflColor * transmittance * boostFactor;\n\t\t\treturn result;\n\t\t}\n\t\tvec3 reflVec = T1 - N3 * dot(N3, T1);\t\tvec3 reflColor = queryEnvMapLocal(reflVec);\n\t\tresult += reflColor * transmittance * boostFactor;\n\t\treturn result;\n\t}\n\tif( reflectance >= 0.0 && reflectance < 0.99 ) {\n\t\tvec3 refractedColor = vec3( 0 );\n\t\tfloat dispersion = abbeNumberToIORDispersion(abbeNumber);\n\t\trefractedColor.r = queryEnvMapLocal( T4 ).r;\t\tT4 = refract( T3, inwardSurfaceNormal, crystalIOR/airIOR - dispersion );\n\t\trefractedColor.g = queryEnvMapLocal( T4 ).g;\t\tT4 = refract( T3, inwardSurfaceNormal, crystalIOR/airIOR - dispersion*2. );\n\t\trefractedColor.b = queryEnvMapLocal( T4 ).b;\t\tresult += refractedColor * transmittance * boostFactor;\n\t}\n\telse {\n\t\tresult += queryEnvMapLocal( T1 ) * transmittance * boostFactor;\n\t}\n\treturn result;\n}\nfloat TIRBinSearchOne (sampler2D depthPeelLayer, in vec3 startView, in vec3 viewDirection, in vec3 endView, in float zSign_, float filter, out vec3 midpointView ) {\n\tconst int MAX_BINSEARCH = 20;\n\tfloat diff;\n\tvec2 midpointScreen;\n\tfor(int j = 0; j < MAX_BINSEARCH; j++) {\n\t\tmidpointView = (startView + endView) * .5;\n\t\tmidpointScreen = projectViewToScreen( midpointView ).xy;\n\t\tvec4 depthLayerResult = texture2D( depthPeelLayer, midpointScreen );\n\t\tfloat depthLayerViewZ = getDepth( depthLayerResult );\t\tbool isGood = (zSign_ > 0.) ? isBackDepthGood(depthLayerViewZ) : isFrontDepthGood(depthLayerViewZ);\n\t\tif(!isGood) {\t\t\tendView = midpointView;\n\t\t\tcontinue;\n\t\t}\n\t\tdiff = midpointView.z - depthLayerViewZ;\n\t\tdiff *= zSign_;\t\tif( diff < 0. ) {\t\t\tendView = midpointView;\n\t\t} else {\t\t\tstartView = midpointView;\n\t\t}\n\t}\n\treturn abs(diff) + EPSILON;\n}\nbool TIRBinSearchAll(Ray3 ray, float d, out vec3 hitView, out vec3 normal) {\n\tvec3 endp = ray.origin + ray.direction * d;\n\tvec3 midBack, midFront;\n\tvec4 lookup;\n\tfloat eBack  = TIRBinSearchOne(depthPeelDepth2, ray.origin, ray.direction, endp, 1.0, 2., midBack);\n\tfloat eFront = TIRBinSearchOne(depthPeelDepth1, ray.origin, ray.direction, endp, -1., 1., midFront);\n\tfloat tToFront = eBack / (eBack + eFront);\n\t#if DEBUG_MODE == DM_BINSEARCH\n\t\tif(isDebugTarget) { normal = mix(vec3(1, 0, 1), vec3(0, 1, 0), tToFront); return true; }\n\t#elif DEBUG_MODE == DM_ERROR_BACK\n\t\tif(isDebugTarget) {normal = vec3(eBack * 1.); return true;}\n\t#elif DEBUG_MODE == DM_ERROR_FRONT\n\t\tif(isDebugTarget) {normal = vec3(eBack * 100.); return true;}\n\t#elif DEBUG_MODE == DM_NTH_PEEL_NUM\n\t\tif(isDebugTarget){ normal = mix(\n\t\t\tvec3(texture2D( depthPeelDepth2, projectViewToScreen( midBack  ).xy).w / NUM_LAYERS),\n\t\t\tvec3(texture2D( depthPeelDepth1, projectViewToScreen( midFront ).xy).w / NUM_LAYERS),\n\t\t\ttToFront); return true; }\n\t#endif\n\tvec3 normalBack  = readNormal( depthPeelDepth2, roundUVToPixelCenter( projectViewToScreen( midBack  ).xy ) );\n\tvec3 normalFront = readNormal( depthPeelDepth1, roundUVToPixelCenter( projectViewToScreen( midFront ).xy ) );\n\thitView = mix(midBack, midFront, tToFront);\n\tnormal = mix( normalBack, normalFront, tToFront );\n\tconst float MAX_ERROR = .01;\n\tif(min(eBack, eFront) > MAX_ERROR)\n\t\treturn false;\n\treturn true;\n}\nfloat unmix(float a, float b, float x) {\n\treturn (x-a) / (b-a);}\nvec3 packDepthBen(float depth) {\n\treturn vec3(1) * unmix(cameraNearFar.x, cameraNearFar.y, depth);\n}\nvec3 packDepth( float depth ) {\n\tdepth = (( depth - cameraNearFar.x ) / ( cameraNearFar.y - cameraNearFar.x ) );\n\tconst float period = .1;\n\tfloat saturation = mod(depth, period);\n\tsaturation /= period;\n\tsaturation *= 2.;\n\tif(saturation > 1.)\n\t\tsaturation = 2.-saturation;\n\tfloat saturation2 = mod(depth, period);\n\tsaturation2 /= period;\n\treturn vec3(depth, vec2(depth) * saturation2);\n}\nvec3 TIR( Ray3 incidentRay, vec3 surfaceNormal) {\n\tvec3 result = vec3( 0.0 );\n\tvec3 transmittance = vec3( 1.0 );\n\tRay3 refractRay; setRay(refractRay, incidentRay.origin, refract(incidentRay.direction, surfaceNormal, airIOR/crystalIOR));\n\tRay3 reflectRay; setRay(reflectRay, incidentRay.origin, reflect(incidentRay.direction, surfaceNormal));\n\tfloat reflectance = fresnelReflectance( airIOR, crystalIOR, incidentRay.direction, refractRay.direction, surfaceNormal );\n\tresult += queryEnvMapLocal( reflectRay.direction ) * reflectance;\n\ttransmittance *= ( 1.0 - reflectance );\n\t#if DEBUG_MODE == DM_SURFACE_NORMAL\n\t\treturn packNormalToRGB(surfaceNormal);\n\t#elif DEBUG_MODE == DM_INCIDENT_DIR\n\t\treturn packNormalToRGB(incidentRay.direction);\n\t#elif DEBUG_MODE == DM_REFLECTED\n\t\treturn packNormalToRGB(reflectRay.direction);\n\t#endif\n\tincidentRay = refractRay;\n\tvec3 backNormal;\n\tfor( int bounce = 0; bounce < NUM_BOUNCES; ++bounce ) {\n\t\tbounce2 = bounce;\n\t\t#if DEBUG_MODE != DM_OFF\n\t\t\tisDebugTarget = bounce+1 == DEBUG_BOUNCE_TARGET;\n\t\t#endif\n\t\t#if DEBUG_MODE == DM_NTH_INCIDENT\n\t\t\tif(isDebugTarget) return packNormalToRGB(incidentRay.direction);\n\t\t#endif\n\t\tfloat d;\n\t\tif( incidentRay.direction.z < 0. )\n\t\t\td = (-cameraNearFar.y-incidentRay.origin.z)/incidentRay.direction.z;\t\telse\n\t\t\td = (-cameraNearFar.x-incidentRay.origin.z)/incidentRay.direction.z;\n\t\tif(d < 0.)\n\t\t\treturn vec3(1, 0, 0);\n\t\tvec3 surfacePoint;\n\t\tif(!TIRBinSearchAll(incidentRay, d, surfacePoint, backNormal)) {\n\t\t}\n\t\t#if DEBUG_MODE == DM_BINSEARCH || DEBUG_MODE == DM_ERROR_BACK || DEBUG_MODE == DM_ERROR_FRONT\n\t\t\tif(isDebugTarget) return backNormal;\n\t\t#elif DEBUG_MODE == DM_NTH_HIT_POS\n\t\t\tif(isDebugTarget) return packNormalToRGB(vec3(projectViewToScreen(surfacePoint)*2.,0));\n\t\t#elif DEBUG_MODE == DM_NTH_NORMAL\n\t\t\tif(isDebugTarget) return packNormalToRGB(backNormal);\n\t\t#elif DEBUG_MODE == DM_NTH_DEPTH\n\t\t\tif(isDebugTarget) return packDepth(-surfacePoint.z);\n\t\t#elif DEBUG_MODE == DM_NTH_PEEL_NUM\n\t\t\tif(isDebugTarget) return backNormal;\n\t\t#endif\n\t\tvec3 inwardSurfaceNormal = backNormal;\n\t\tfloat raySegmentLength = length( surfacePoint - incidentRay.origin );\n\t\ttransmittance *= exp( raySegmentLength * -absorption );\n\t\tsetRay( refractRay, surfacePoint, refract( incidentRay.direction, inwardSurfaceNormal, crystalIOR/airIOR ) );\n\t\tsetRay( reflectRay, surfacePoint, reflect( incidentRay.direction, inwardSurfaceNormal ) );\n\t\t#if DEBUG_MODE == DM_NTH_REFLECTED\n\t\t\tif(isDebugTarget) return packNormalToRGB(reflectRay.direction);\n\t\t#elif DEBUG_MODE == DM_NTH_REFRACTED\n\t\t\tif(isDebugTarget) return packNormalToRGB(refractRay.direction);\n\t\t#endif\n\t\treflectance = fresnelReflectance( crystalIOR, airIOR, incidentRay.direction, refractRay.direction, inwardSurfaceNormal );\n\t\tif( reflectance >= 0.0 && reflectance < 0.99 ) {\n\t\t\tvec3 refractedColor = vec3( 0 );\n\t\t\tfloat dispersion = abbeNumberToIORDispersion(abbeNumber);\n\t\t\trefractedColor.r = queryEnvMapLocal( refractRay.direction ).r;\t\t\tsetRay( refractRay, surfacePoint, refract( incidentRay.direction, inwardSurfaceNormal, crystalIOR/airIOR - dispersion ) );\n\t\t\trefractedColor.g = queryEnvMapLocal( refractRay.direction ).g;\t\t\tsetRay( refractRay, surfacePoint, refract( incidentRay.direction, inwardSurfaceNormal, crystalIOR/airIOR - dispersion*2. ) );\n\t\t\trefractedColor.b = queryEnvMapLocal( refractRay.direction ).b;\t\t\tresult += refractedColor * transmittance * ( 1.0 - reflectance ) * boostFactor;\n\t\t}\n\t\telse {\n\t\t\treflectance = 1.0;\n\t\t\tif( bounce == NUM_BOUNCES - 1 )\n\t\t\t\tresult += queryEnvMapLocal( incidentRay.direction ) * transmittance * boostFactor;\n\t\t}\n\t\ttransmittance *= reflectance;\n\t\tincidentRay = reflectRay;\n\t}\n\treturn result;\n}\n#define PERSPECTIVE_CAMERA 1\nfloat getViewZ( const in float depth ) {\n\t#if PERSPECTIVE_CAMERA == 1\n\t\treturn perspectiveDepthToViewZ( depth, cameraNearFar.x, cameraNearFar.y );\n\t#else\n\t\treturn orthographicDepthToViewZ( depth, cameraNearFar.x, cameraNearFar.y );\n\t#endif\n}\nvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\tfloat clipW = projectionMatrix[2][3] * viewZ + projectionMatrix[3][3];\n\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\tclipPosition *= clipW;\n\treturn (inverse( projectionMatrix ) * clipPosition ).xyz;\n}\nvec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\n\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\n}\nvec4 lqFallbackRefract() {\n\tvec3 viewVector = normalize(viewPosition.xyz);\n\tvec3 surfaceNormal = vNormal;\n\tvec3 refracted = normalize(refract(viewVector, surfaceNormal, airIOR / crystalIOR ));\n\tfloat reflectance = fresnelReflectance( airIOR, crystalIOR, viewVector, refracted, surfaceNormal );\n\tvec3 result = queryEnvMapLocal( reflect(viewVector, surfaceNormal) ) * reflectance;\n\tresult += queryEnvMapLocal(refracted) * (1. - reflectance);\n\treturn vec4(result * exp(-absorptionColor), 1.);\n}\nvoid main()\t{\n\tabsorption = absorptionColor * absorptionFactor;\n\tif(lqFallback) {\n\t\tgl_FragColor = lqFallbackRefract();\n\t\treturn;\n\t}\n\tvec2 screenSpace = gl_FragCoord.xy / windowSize;\n\tvec4 outDepth1 = texture2D(depthPeelDepth1, screenSpace);\n\tvec4 outDepth2 = texture2D(depthPeelDepth2, screenSpace);\n\t#if FOUR_LAYER\n\t\tvec4 outDepth3 = texture2D(depthPeelDepth3, screenSpace);\n\t\tvec4 outDepth4 = texture2D(depthPeelDepth4, screenSpace);\n\t#endif\n\tfloat z1 = getDepth( outDepth1 );\n\tfloat z2 = getDepth( outDepth2 );\n\t#if FOUR_LAYER\n\t\tfloat z3 = getDepth( outDepth3 );\n\t\tfloat z4 = getDepth( outDepth4 );\n\t#endif\n\tint overlap;\n\t#if FOUR_LAYER\n\t\tfloat overlap1 = floor( .5 + max(outDepth1.w, outDepth2.w) * NUM_LAYERS );\n\t\tfloat overlap2 = floor( .5 + max(outDepth3.w, outDepth4.w) * NUM_LAYERS );\n\t\toverlap = int(max(overlap1, overlap2) + .5);\n\t#else\n\t\toverlap = int(outDepth2.w * NUM_LAYERS + .5);\n\t#endif\n\tif(overlap <= 1) {\n\t\tgl_FragColor = vec4(.5, .5, .5, 1.);\n\t\treturn;\n\t}\n\tvec3 viewVector = normalize(viewPosition.xyz);\n\tfloat thickness;\n\tvec3 finalColor;\n\t#if DEBUG_MODE == DM_PEEL1_DEPTH2NORMAL || DEBUG_MODE == DM_PEEL2_DEPTH2NORMAL\n\t\tfloat centerDepth = (DEBUG_MODE == DM_PEEL1_DEPTH2NORMAL) ?\n\t\t\tgetDepth( texture2D( depthPeelDepth1, screenSpace ) ) :\n\t\t\tgetDepth( texture2D( depthPeelDepth2, screenSpace ) );\n\t\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\tdiscard;\n\t\t}\n\t\tfloat centerViewZ = getViewZ( centerDepth );\n\t\tvec3 viewPosition = getViewPosition( screenSpace, centerDepth, centerViewZ );\n\t\tvec3 centerViewNormal = getViewNormal( viewPosition, screenSpace );\n\t\tif(DEBUG_MODE == DM_PEEL1_DEPTH2NORMAL)\n\t\t\tcenterViewNormal *= -1.;\n\t\tgl_FragColor.rgb = packNormalToRGB( centerViewNormal );\n\t\tgl_FragColor.a = 1.0;\n\t\treturn;\n\t#endif\n\t#if DEBUG_MODE == DM_PEEL1\n\t\t{ gl_FragColor = vec4(readNormal(depthPeelDepth1, screenSpace), 1.); return; }\n\t#elif DEBUG_MODE == DM_PEEL2\n\t\t{ gl_FragColor = vec4(readNormal(depthPeelDepth2, screenSpace), 1.); return; }\n\t#elif DEBUG_MODE == DM_PEEL3\n\t\t{ gl_FragColor = vec4(readNormal(depthPeelDepth3, screenSpace), 1.); return; }\n\t#elif DEBUG_MODE == DM_PEEL4\n\t\t{ gl_FragColor = vec4(readNormal(depthPeelDepth4, screenSpace), 1.); return; }\n\t#elif DEBUG_MODE == DM_PEEL1_Z\n\t\t{ gl_FragColor = vec4(vec3(-getDepth(texture2D(depthPeelDepth1, screenSpace))), 1.); return; }\n\t#elif DEBUG_MODE == DM_PEEL2_Z\n\t\t{ gl_FragColor = vec4(vec3(-getDepth(texture2D(depthPeelDepth2, screenSpace))), 1.); return; }\n\t#elif DEBUG_MODE == DM_PEEL3_Z\n\t\t{ gl_FragColor = vec4(vec3(-getDepth(texture2D(depthPeelDepth3, screenSpace))), 1.); return; }\n\t#elif DEBUG_MODE == DM_PEEL4_Z\n\t\t{ gl_FragColor = vec4(vec3(-getDepth(texture2D(depthPeelDepth4, screenSpace))), 1.); return; }\n\t#endif\n\tvec3 surfaceNormal = readNormal(depthPeelDepth1, screenSpace);\n\t#if MODE == MODE_TWO_LAYER\n\t\tif(overlap >= 2) {\n\t\t\tthickness = z1-z2;\n\t\t\tfinalColor = TwoLayerRefraction(viewPosition.xyz, viewVector, surfaceNormal, thickness);\n\t\t}\n\t#elif MODE == MODE_FOUR_LAYER\n\t\tif(overlap >= 4) {\n\t\t\tthickness = (z1-z2) + (z3-z4);\n\t\t\tfinalColor = FourLayerRefraction(viewPosition.xyz, viewVector, surfaceNormal, z1-z2, z2-z3, z3-z4);\n\t\t} else if (overlap >= 2) {\n\t\t\tthickness = z1-z2;\n\t\t\tfinalColor = TwoLayerRefraction(viewPosition.xyz, viewVector, surfaceNormal, thickness);\n\t\t}\n\t#elif MODE == MODE_TOTAL_INTERNAL_REFLECTION\n\t\tif(overlap >= 2) {\n\t\t\tRay3 incidentRay;\n\t\t\tsetRay( incidentRay, viewPosition.xyz, viewVector );\n\t\t\tfinalColor = TIR( incidentRay, surfaceNormal );\n\t\t\tthickness = 0.;\n\t\t}\n\t#else\n\t\tgl_FragColor = vec4(0, 1, 1, 1);\n\t\treturn;\n\t#endif\n\tgl_FragColor = vec4(finalColor, 1.);\n}",glassAdvanced_vert:"#include <common>\nvarying vec2 vUv;\nvarying vec4 viewPosition;\nuniform vec2 windowSize;\nvarying vec3 vNormal;\nvoid main()\t{\n    vUv = uv; \n    viewPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    vNormal = transformDirection(normal, modelViewMatrix);\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = mapTexelToLinear( vec4( diffuse, opacity ) );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <uvss_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <oit_pars_fragment>\nvoid main() {\n\t#include <uvss_fragment>\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = mapTexelToLinear( vec4( diffuse, opacity ) );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <oit_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <uvss_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#include <oit_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <uvss_vertex>\n\t#include <oit_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <uvss_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <iestexturemap_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <oit_pars_fragment>\nvoid main() {\n\t#include <uvss_fragment>\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = mapTexelToLinear( vec4( diffuse, opacity ) );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <oit_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <uvss_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#include <oit_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <uvss_vertex>\n\t#include <oit_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <uvss_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <iestexturemap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <bump_functions>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <oit_pars_fragment>\nvoid main() {\n\t#include <uvss_fragment>\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = mapTexelToLinear( vec4( diffuse, opacity ) );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <oit_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\n#if ! defined( VARYING_VVIEWPOSITION )\n\tvarying vec3 vViewPosition;\n\t#define VARYING_VVIEWPOSITION 1\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <uvss_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#include <oit_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <uvss_vertex>\n\t#include <oit_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"precision highp float;\n#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float anisotropy;\nuniform float anisotropyRotation;\n#define DITHERING\n#define DITHERING_SCALE\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n\t#ifdef FALLOFF\n\t\tuniform vec3 falloffDiffuse;\n\t\tuniform float falloffOpacity;\n\t#endif\n#endif\n#if ! defined( VARYING_VVIEWPOSITION )\n\tvarying vec3 vViewPosition;\n\t#define VARYING_VVIEWPOSITION 1\n#endif\n#if !defined( FLAT_SHADED ) || defined( USE_TANGENT )\n\tvarying vec3 vNormal;\n#endif\n#ifdef USE_TANGENT\n \tvarying vec3 vTangent;\n\tvarying vec3 vBitangent;\n#endif\n#include <common>\n#include <packing>\n#include <triplanar_pars_fragment>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <uvss_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <ssr_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <iestexturemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bump_functions>\n#include <bumpmap_pars_fragment>\n#include <clearcoatbumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <oit_pars_fragment>\n#include <anisotropy_pars_fragment>\nvoid main() {\n\t#include <uvss_fragment>\n\t#include <clipping_planes_fragment>\n\t\n\tvec4 diffuseColor = mapTexelToLinear( vec4( diffuse, opacity ) );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef FALLOFF\n\t\tvec4 falloffDiffuseColor = mapTexelToLinear( vec4( falloffDiffuse, falloffOpacity ) );\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <triplanar_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <clearcoatbumpmap_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <falloffmap_fragment>\n\t#include <falloffalphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <reflectivitymap_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <emissivemap_fragment>\n\t#include <anisotropy_fragment>\n\t#include <falloff_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <oit_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\n#if ! defined( VARYING_VVIEWPOSITION )\n\tvarying vec3 vViewPosition;\n\t#define VARYING_VVIEWPOSITION 1\n#endif\n#if !defined( FLAT_SHADED ) || defined( USE_TANGENT )\n\tvarying vec3 vNormal;\n#endif\n#ifdef USE_TANGENT\n\tvarying vec3 vTangent;\n\tvarying vec3 vBitangent;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <uvss_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <reflectivitymap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#include <oit_pars_vertex>\n#include <triplanar_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <triplanar_vertex>\n#if !defined( FLAT_SHADED ) || defined( USE_TANGENT )\n\tvNormal = normalize( transformedNormal );\n#endif\n#ifdef USE_TANGENT\n  \tvTangent = normalize( transformedTangent );\n\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <uvss_vertex>\n\t#include <oit_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t\n}\n",meshvelocity_frag:"#define NORMAL\nuniform float opacity;\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec4 clipPositionCurrent;\nvarying vec4 clipPositionPrevious;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\tdiffuseColor.a = opacity;\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n    vec2 ndcPositionCurrent  = clipPositionCurrent.xy/clipPositionCurrent.w;\n    vec2 ndcPositionPrevious = clipPositionPrevious.xy/clipPositionPrevious.w;\n    vec2 vel = ( ndcPositionCurrent - ndcPositionPrevious ) * 0.5;\n    vel = vel * 0.5 + 0.5;\n    vec2 v1 = packDepthToRG(vel.x);\n    vec2 v2 = packDepthToRG(vel.y);\n    gl_FragColor = vec4(v1.x, v1.y, v2.x, v2.y);\n\t#include <logdepthbuf_fragment>\n}\n",meshvelocity_vert:"#include <common>\n#include <packing>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nuniform mat4 previousProjectionViewMatrix;\nuniform mat4 currentProjectionViewMatrix;\nvarying vec4 clipPositionCurrent;\nvarying vec4 clipPositionPrevious;\n\t\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n    clipPositionCurrent  = currentProjectionViewMatrix * modelMatrix * skinned;\n    clipPositionPrevious = previousProjectionViewMatrix * modelMatrixPrev * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n    clipPositionCurrent  = currentProjectionViewMatrix * modelMatrix * vec4( transformed, 1.0 );\n    clipPositionPrevious = previousProjectionViewMatrix * modelMatrixPrev * vec4( transformed, 1.0 );\n#endif\n    gl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\t#if ! defined( VARYING_VVIEWPOSITION )\n\t\tvarying vec3 vViewPosition;\n\t\t#define VARYING_VVIEWPOSITION 1\n\t#endif\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <triplanar_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <bump_functions>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\tdiffuseColor.a = opacity;\n\t#include <triplanar_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <clipping_planes_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n   \tgl_FragColor = packNormalToRGBA( (normal * flipNormal) );\n\t#include <logdepthbuf_fragment>\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\t#if ! defined( VARYING_VVIEWPOSITION )\n   \t\tvarying vec3 vViewPosition;\n   \t\t#define VARYING_VVIEWPOSITION 1\n   #endif\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#include <triplanar_pars_vertex>\n\t\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <triplanar_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <alphatest_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",ssr_frag:"#define ERROR_MARGIN 0.0\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tDepth;\nuniform sampler2D tVelocity;\nuniform sampler2D tDither;\nvarying vec2 vUV;\nuniform float cameraNear;\nuniform float cameraFar;\nuniform float maxDistance;\nuniform float stepSize;\nuniform float stepMultiplier;\nuniform float ditherSize;\nuniform vec2 sourceResolution;\nuniform vec2 renderTargetResolution;\nuniform mat4 unprojectionMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 currSStoPrevVSMatrix;\nuniform int traaFrame;\n#include <packing>\n#include <common>\n#include <math>\nconst float INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\nfloat distToAABB(float v1, float v2, float t1, float t2) {\n    if (v1 > v2) {\n        float tmp = v1;\n        v1 = v2;\n        v2 = tmp;\n    }\n    if (t1 > t2) {\n        float tmp = t1;\n        t1 = t2;\n        t2 = tmp;\n    }\n    if (v2 < t1) {\n        return t1 - v2;\n    }\n    if (v1 > t2) {\n        return v1 - t2;\n    }\n    return 0.0;\n}\nfloat getDepth(vec2 uv) {\n    #if DEPTH_PACKING == 1\n    return unpackRGBAToDepth(texture2D(tDepth, uv));\n    #else\n    return texture2D(tDepth, uv).x;\n    #endif\n}\nvec3 getViewNormal(vec2 uv) {\n    return -unpackRGBAToNormal(texture2D(tNormal, uv));\n}\nvec3 getViewPosition(vec2 uv) {\n    float depth = getDepth(uv);\n    vec4 ndc = vec4(uv, depth, 1.0) * 2.0 - 1.0;\n    vec4 view = unprojectionMatrix * ndc;\n    return view.xyz / view.w;\n}\nvec3 getViewPositionFromCurrUVAndDepth(vec2 uv, float depth) {\n    vec4 ndc = vec4(uv, depth, 1.0) * 2.0 - 1.0;\n    vec4 view = currSStoPrevVSMatrix * ndc;\n    return view.xyz / view.w;\n}\nvec4 raymarch(vec2 uv, vec3 ray0, vec3 rayDir, vec3 reflectNormal) {\n    const vec2 ditherUVMul = vec2(1.9521, 1.1254);\n    vec2 ditherUV = uv + fract(float(traaFrame) * ditherUVMul * vec2(traaFrame, 1.0));\n    float dither = unpackRGBAToDepth(texture2D(tDither, ditherUV * renderTargetResolution / ditherSize));\n    float rayLength = ((ray0.z + rayDir.z * maxDistance) > -cameraNear) ?\n                        (-cameraNear - ray0.z) / rayDir.z : maxDistance;\n    vec3 ray1 = ray0 + rayDir * rayLength;\n    vec4 hom0 = projectionMatrix * vec4(ray0, 1.0);\n    vec4 hom1 = projectionMatrix * vec4(ray1, 1.0);\n    float rcpW0 = 1.0 / hom0.w;\n    float rcpW1 = 1.0 / hom1.w;\n    hom0 *= rcpW0;\n    hom1 *= rcpW1;\n    vec2 pixelSize = (hom1.xy - hom0.xy) * 0.5 * sourceResolution;\n    vec2 absPixelSize = abs(pixelSize);\n    bool swizzled = absPixelSize.x < absPixelSize.y;\n    if (swizzled) {\n        pixelSize.xy = pixelSize.yx;\n        absPixelSize.xy = absPixelSize.yx;\n    }\n    vec2 dUV = vec2(sign(pixelSize.x), pixelSize.y / absPixelSize.x);\n    dUV *= stepSize;\n    if (swizzled) {\n        dUV.xy = dUV.yx;\n    }\n    dUV /= sourceResolution;\n    float stepRatio = stepSize / absPixelSize.x;\n    float dRayZ = (ray1.z * rcpW1 - ray0.z * rcpW0) * stepRatio;\n    float dRcpW = (rcpW1 - rcpW0) * stepRatio;\n    vec2 hitUV = uv + dUV * dither;\n    float rayZ = ray0.z * rcpW0 + dRayZ * dither;\n    float rcpW = rcpW0 + dRcpW * dither;\n    float raySegmentZ0 = ray0.z;\n    float raySegmentZ1;\n    float amount = 0.0;\n    float hitDepth = 1.0;\n    float raySign = sign(ray1.z - ray0.z);\n    vec3 scenePos;\n    #if INTERPOLATE_HIT == 1\n    vec3 prevScenePos = ray0;\n    vec2 prevUV = hitUV;\n    #endif\n    float maxZ = ERROR_MARGIN * 2.0 - cameraFar;\n    float accumulatedRatio = 1.0;\n    for (int i = 0; i < NUM_SAMPLES; ++i) {\n        raySegmentZ1 = rayZ / rcpW;\n        scenePos = getViewPosition(hitUV);\n        if (raySegmentZ1 > raySign * ray1.z || raySegmentZ1 < maxZ) {\n            break;\n        }\n        const float zThickness = 1.0;\n        float error = distToAABB(scenePos.z, scenePos.z - zThickness, raySegmentZ0, raySegmentZ1);\n        vec3 normal = getViewNormal(hitUV);\n        vec2 allowanceUV = abs(dUV) / max(1.0 - abs(normal.xy), 0.2);\n        float allowance = max(abs(allowanceUV.x), abs(allowanceUV.y)) * accumulatedRatio;\n        allowance = min(allowance, 0.2);\n        if (error < max(ERROR_MARGIN, allowance)) {\n            vec3 relativePoint = (scenePos - ray0);\n            float advancement = abs(dot(relativePoint, reflectNormal));\n            if (advancement > 0.02 || dot(normal, rayDir) > 0.0) {\n                amount = float(NUM_SAMPLES - i) * INV_NUM_SAMPLES;\n                break;\n            }\n        }\n        accumulatedRatio *= stepMultiplier;\n        dRcpW            *= stepMultiplier;\n        dUV              *= stepMultiplier;\n        dRayZ            *= stepMultiplier;\n        hitUV += dUV;\n        rayZ += dRayZ;\n        rcpW += dRcpW;\n        #if INTERPOLATE_HIT == 1\n        prevScenePos = scenePos;\n        prevUV = hitUV;\n        #endif\n        raySegmentZ0 = raySegmentZ1 + ERROR_MARGIN;\n    }\n    if(amount == 0.0) return vec4(0.0);\n    #if INTERPOLATE_HIT == 1\n    raySegmentZ0 -= ERROR_MARGIN;\n    float t = (scenePos.z - raySegmentZ1) / (raySegmentZ0 - raySegmentZ1 - prevScenePos.z + scenePos.z);\n    hitUV -= t * dUV;\n    #endif\n    const float offscreenFade = 0.1;    const float offscreenFadeOffset = -offscreenFade * .7;    vec2 offscreenErrors = abs(hitUV - 0.5) - 0.5;\n    float offscreenError = max(offscreenErrors.x, offscreenErrors.y);\n    offscreenError -= offscreenFadeOffset;\n    offscreenError = saturate(offscreenError * (1.0 / offscreenFade));\n    amount *= (1.0 - offscreenError);\n    if (amount < EPSILON) {\n        return vec4(0.0);\n    }\n    vec4 color = texture2D(tDiffuse, hitUV);\n    return vec4(color.xyz * amount, amount);\n}\nvec2 getScreenSpaceVelocity( vec2 uv ) {\n    vec4 value = texture2D(tVelocity, uv);\n    if (value.x == 0.0 && value.y == 0.0 && value.z == 0.0 && value.w == 0.0) {\n        return vec2( 0.0 );\n    }\n    float vx = unpackRGToDepth(value.xy);\n    float vy = unpackRGToDepth(value.zw);\n    return vec2(2.0*vx - 1.0, 2.0*vy - 1.0);\n}\nvoid main() {\n    vec2 vel = getScreenSpaceVelocity(vUV);\n    vec2 prevUV = vUV - vel;\n    if (prevUV != saturate(prevUV)) {\n        gl_FragColor = vec4(0);\n        return;\n    }\n    vec3 normal = getViewNormal(prevUV);\n    vec3 viewPos = getViewPosition(prevUV);\n    vec3 coLinnearPoint = getViewPositionFromCurrUVAndDepth(vUV, 0.);\n    vec3 viewDir = normalize(viewPos - coLinnearPoint);\n    vec3 reflDir = normalize(reflect(viewDir, normal));\n    gl_FragColor = raymarch(prevUV, viewPos, reflDir, normal);\n}\n",ssr_vert:"varying vec2 vUV;\nvoid main() {\n    vUV = uv;\n    gl_Position = vec4(position, 1.0);\n}\n"};function Pr(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}Pr.prototype={constructor:Pr,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(t,r,n){if(t=Et.euclideanModulo(t,1),r=Et.clamp(r,0,1),n=Et.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+r):n+r-n*r,a=2*n-i;this.r=e(a,i,t+1/3),this.g=e(a,i,t),this.b=e(a,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(o,s,l)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,c=(u=r[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(u=Ar[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,n=e||{h:0,s:0,l:0},i=this.r,a=this.g,o=this.b,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(l+s)/2;if(l===s)t=0,r=0;else{var c=s-l;switch(r=u<=.5?c/(s+l):c/(2-s-l),s){case i:t=(a-o)/c+(a<o?6:0);break;case a:t=(o-i)/c+2;break;case o:t=(i-a)/c+4}t/=6}return n.h=t,n.s=r,n.l=u,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var n=this.getHSL();return n.h+=e,n.s+=t,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}};var Ar={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cr(e,t,r,n,i,a,o,s,l,u,c,f){Dt.call(this,null,a,o,s,l,u,n,i,c,f),this.image={data:e,width:t,height:r},this.magFilter=void 0!==l?l:Ce,this.minFilter=void 0!==u?u:Ce,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}Cr.prototype=(0,d.default)(Dt.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isDataTexture=!0;var Rr={common:{diffuse:{value:new Pr(15658734)},opacity:{value:1},map:{value:null},skip_map:{value:!1},mapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},mapUVTexelTransformParams2:{value:new Nt(1,0,0,0)},offsetRepeat:{value:new Nt(0,0,1,1)},alphaMap:{value:null},alphaMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},alphaMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)},skip_alphaMap:{value:!1},ditheringScale:{value:1},alphaTest:{value:0},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},anisotropy:{anisotropy:{value:0},anisotropyMap:{value:null},anisotropyRotation:{value:0},anisotropyRotationMap:{value:null},anisotropyMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},anisotropyMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)},anisotropyRotationMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},anisotropyRotationMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)}},aomap:{ssaoMap:{value:null},ssaoMapIntensity:{value:1},aoMap:{value:null},aoMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},aoMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},lightMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null},emissiveMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},emissiveMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)}},clearcoatbumpmap:{clearCoatBumpMap:{value:null},clearCoatBumpScale:{value:1},clearCoatBumpMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},clearCoatBumpMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1},bumpMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},bumpMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)},skip_bumpMap:{value:!1}},normalmap:{normalMap:{value:null},normalScale:{value:new Pt(1,1)},normalMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},normalMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)},skip_normalMap:{value:!1}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0},displacementMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},displacementMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)},skip_displacementMap:{value:!1}},falloffmap:{falloffMap:{value:null},falloffMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},falloffMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)}},falloffalphamap:{falloffAlphaMap:{value:null},falloffAlphaMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},falloffAlphaMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)}},roughnessmap:{roughnessMap:{value:null},roughnessMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},roughnessMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)}},specularmap:{specularMap:{value:null},specularMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},specularMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)}},reflectivitymap:{reflectivityMap:{value:null},reflectivityMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},reflectivityMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)}},metalnessmap:{metalnessMap:{value:null},metalnessMapUVTexelTransformParams1:{value:new Nt(0,0,1,1)},metalnessMapUVTexelTransformParams2:{value:new Nt(1,0,0,0)}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pr(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowSpreadAngle:{},shadowCameraParams:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraParams:{}}},spotIesTextureMap:{value:[]},spotIesTextureMapFlag:{value:[]},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointIesTextureMap:{value:[]},pointIesTextureMapFlag:{value:[]},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Pr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Nt(0,0,1,1)}},triplanar:{triplanarScale:{value:new Ut(1,1,1)},triplanarEnabledMaps:{value:[0,0,0,0]},triplanarExponent:1}},Ir={basic:{uniforms:Tr.merge([Rr.common,Rr.aomap,Rr.lightmap,Rr.fog]),vertexShader:Er.meshbasic_vert,fragmentShader:Er.meshbasic_frag},lambert:{uniforms:Tr.merge([Rr.common,Rr.aomap,Rr.lightmap,Rr.emissivemap,Rr.fog,Rr.lights,{emissive:{value:new Pr(0)}}]),vertexShader:Er.meshlambert_vert,fragmentShader:Er.meshlambert_frag},phong:{uniforms:Tr.merge([Rr.common,Rr.aomap,Rr.lightmap,Rr.emissivemap,Rr.bumpmap,Rr.normalmap,Rr.displacementmap,Rr.gradientmap,Rr.fog,Rr.lights,{emissive:{value:new Pr(0)},specular:{value:new Pr(1118481)},shininess:{value:30}}]),vertexShader:Er.meshphong_vert,fragmentShader:Er.meshphong_frag},standard:{uniforms:Tr.merge([Rr.common,Rr.aomap,Rr.lightmap,Rr.emissivemap,Rr.bumpmap,Rr.normalmap,Rr.displacementmap,Rr.roughnessmap,Rr.reflectivitymap,Rr.specularmap,Rr.metalnessmap,Rr.fog,Rr.lights,{emissive:{value:new Pr(0)},roughness:{value:.5},metalness:{value:0},specularColor:{value:new Pr(8355711)},envMapIntensity:{value:1}}]),vertexShader:Er.meshphysical_vert,fragmentShader:Er.meshphysical_frag},points:{uniforms:Tr.merge([Rr.points,Rr.fog]),vertexShader:Er.points_vert,fragmentShader:Er.points_frag},dashed:{uniforms:Tr.merge([Rr.common,Rr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Er.linedashed_vert,fragmentShader:Er.linedashed_frag},depth:{uniforms:Tr.merge([Rr.common,Rr.displacementmap]),vertexShader:Er.depth_vert,fragmentShader:Er.depth_frag},velocity:{uniforms:Tr.merge([Rr.common,Rr.displacementmap,{currentProjectionViewMatrix:{value:null},previousProjectionViewMatrix:{value:null}}]),vertexShader:Er.meshvelocity_vert,fragmentShader:Er.meshvelocity_frag},normal:{uniforms:Tr.merge([Rr.common,Rr.bumpmap,Rr.normalmap,Rr.displacementmap,Rr.triplanar]),vertexShader:Er.normal_vert,fragmentShader:Er.normal_frag},gem:{uniforms:Tr.merge([Rr.common,{depthPeelDepth1:{type:"t",value:null},depthPeelDepth2:{type:"t",value:null},depthPeelDepth3:{type:"t",value:null},depthPeelDepth4:{type:"t",value:null},depthPeelNormal1:{type:"t",value:null},depthPeelNormal2:{type:"t",value:null},depthPeelNormal3:{type:"t",value:null},depthPeelNormal4:{type:"t",value:null},rIndexDelta:{value:.03},envMapIntensity:{value:1},absorptionColor:{value:new Ut(0,0,0)},absorptionFactor:{value:1},boostFactor:{value:1},abbeNumber:{type:"f",value:60},crystalIOR:{type:"f",value:1.6}}]),vertexShader:Er.glassAdvanced_vert,fragmentShader:Er.glassAdvanced_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Er.cube_vert,fragmentShader:Er.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Er.equirect_vert,fragmentShader:Er.equirect_frag},distanceRGBA:{uniforms:Tr.merge([Rr.common,{lightPos:{value:new Ut}}]),vertexShader:Er.distanceRGBA_vert,fragmentShader:Er.distanceRGBA_frag}};function Or(e,t){this.min=void 0!==e?e:new Pt(1/0,1/0),this.max=void 0!==t?t:new Pt(-1/0,-1/0)}function Lr(e,t){var r,n,i,a,o,s,l,u,c=e.context,f=e.state;function h(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),h=new Uint16Array([0,1,2,0,2,3]);r=c.createBuffer(),n=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,r),c.bufferData(c.ARRAY_BUFFER,t,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,n),c.bufferData(c.ELEMENT_ARRAY_BUFFER,h,c.STATIC_DRAW),l=c.createTexture(),u=c.createTexture(),f.bindTexture(c.TEXTURE_2D,l),c.texImage2D(c.TEXTURE_2D,0,c.RGB,16,16,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),f.bindTexture(c.TEXTURE_2D,u),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,16,16,0,c.RGBA,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),i={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},a=function(t){var r=c.createProgram(),n=c.createShader(c.FRAGMENT_SHADER),i=c.createShader(c.VERTEX_SHADER),a="precision "+e.getPrecision()+" float;\n";return c.shaderSource(n,a+t.fragmentShader),c.shaderSource(i,a+t.vertexShader),c.compileShader(n),c.compileShader(i),c.attachShader(r,n),c.attachShader(r,i),c.linkProgram(r),r}(i),o={vertex:c.getAttribLocation(a,"position"),uv:c.getAttribLocation(a,"uv")},s={renderType:c.getUniformLocation(a,"renderType"),map:c.getUniformLocation(a,"map"),occlusionMap:c.getUniformLocation(a,"occlusionMap"),opacity:c.getUniformLocation(a,"opacity"),color:c.getUniformLocation(a,"color"),scale:c.getUniformLocation(a,"scale"),rotation:c.getUniformLocation(a,"rotation"),screenPosition:c.getUniformLocation(a,"screenPosition")}}this.render=function(i,d,p){if(0!==t.length){var m=new Ut,v=p.w/p.z,g=.5*p.z,y=.5*p.w,x=16/p.w,b=new Pt(x*v,x),w=new Ut(1,1,0),_=new Pt(1,1),M=new Or;M.min.set(p.x,p.y),M.max.set(p.x+(p.z-16),p.y+(p.w-16)),void 0===a&&h(),c.useProgram(a),f.initAttributes(),f.enableAttribute(o.vertex),f.enableAttribute(o.uv),f.disableUnusedAttributes(),c.uniform1i(s.occlusionMap,0),c.uniform1i(s.map,1),c.bindBuffer(c.ARRAY_BUFFER,r),c.vertexAttribPointer(o.vertex,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(o.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,n),f.disable(c.CULL_FACE),f.setDepthWrite(!1);for(var S=0,T=t.length;S<T;S++){x=16/p.w,b.set(x*v,x);var E=t[S];if(m.set(E.matrixWorld.elements[12],E.matrixWorld.elements[13],E.matrixWorld.elements[14]),m.applyMatrix4(d.matrixWorldInverse),m.applyMatrix4(d.projectionMatrix),w.copy(m),_.x=p.x+w.x*g+g-8,_.y=p.y+w.y*y+y-8,!0===M.containsPoint(_)){f.activeTexture(c.TEXTURE0),f.bindTexture(c.TEXTURE_2D,null),f.activeTexture(c.TEXTURE1),f.bindTexture(c.TEXTURE_2D,l),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGB,_.x,_.y,16,16,0),c.uniform1i(s.renderType,0),c.uniform2f(s.scale,b.x,b.y),c.uniform3f(s.screenPosition,w.x,w.y,w.z),f.disable(c.BLEND),f.enable(c.DEPTH_TEST),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),f.activeTexture(c.TEXTURE0),f.bindTexture(c.TEXTURE_2D,u),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,_.x,_.y,16,16,0),c.uniform1i(s.renderType,1),f.disable(c.DEPTH_TEST),f.activeTexture(c.TEXTURE1),f.bindTexture(c.TEXTURE_2D,l),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),E.positionScreen.copy(w),E.customUpdateCallback?E.customUpdateCallback(E):E.updateLensFlares(),c.uniform1i(s.renderType,2),f.enable(c.BLEND);for(var P=0,A=E.lensFlares.length;P<A;P++){var C=E.lensFlares[P];C.opacity>.001&&C.scale>.001&&(w.x=C.x,w.y=C.y,w.z=C.z,x=C.size*C.scale/p.w,b.x=x*v,b.y=x,c.uniform3f(s.screenPosition,w.x,w.y,w.z),c.uniform2f(s.scale,b.x,b.y),c.uniform1f(s.rotation,C.rotation),c.uniform1f(s.opacity,C.opacity),c.uniform3f(s.color,C.color.r,C.color.g,C.color.b),f.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),e.setTexture2D(C.texture,1),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0))}}}f.enable(c.CULL_FACE),f.enable(c.DEPTH_TEST),f.setDepthWrite(!0),e.resetGLState()}}}function Dr(e,t){var r,n,i,a,o,s,l=e.context,u=e.state,c=new Ut,f=new Bt,h=new Ut;function d(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),u=new Uint16Array([0,1,2,0,2,3]);r=l.createBuffer(),n=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,r),l.bufferData(l.ARRAY_BUFFER,t,l.STATIC_DRAW),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,n),l.bufferData(l.ELEMENT_ARRAY_BUFFER,u,l.STATIC_DRAW),i=function(){var t=l.createProgram(),r=l.createShader(l.VERTEX_SHADER),n=l.createShader(l.FRAGMENT_SHADER);return l.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),l.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),l.compileShader(r),l.compileShader(n),l.attachShader(t,r),l.attachShader(t,n),l.linkProgram(t),t}(),a={position:l.getAttribLocation(i,"position"),uv:l.getAttribLocation(i,"uv")},o={uvOffset:l.getUniformLocation(i,"uvOffset"),uvScale:l.getUniformLocation(i,"uvScale"),rotation:l.getUniformLocation(i,"rotation"),scale:l.getUniformLocation(i,"scale"),color:l.getUniformLocation(i,"color"),map:l.getUniformLocation(i,"map"),opacity:l.getUniformLocation(i,"opacity"),modelViewMatrix:l.getUniformLocation(i,"modelViewMatrix"),projectionMatrix:l.getUniformLocation(i,"projectionMatrix"),fogType:l.getUniformLocation(i,"fogType"),fogDensity:l.getUniformLocation(i,"fogDensity"),fogNear:l.getUniformLocation(i,"fogNear"),fogFar:l.getUniformLocation(i,"fogFar"),fogColor:l.getUniformLocation(i,"fogColor"),alphaTest:l.getUniformLocation(i,"alphaTest")};var c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");c.width=8,c.height=8;var f=c.getContext("2d");f.fillStyle="white",f.fillRect(0,0,8,8),(s=new Dt(c)).needsUpdate=!0}function p(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(m,v,g){if(0!==t.length){void 0===i&&d(),l.useProgram(i),u.initAttributes(),u.enableAttribute(a.position),u.enableAttribute(a.uv),u.disableUnusedAttributes(),u.disable(l.CULL_FACE),u.enable(l.BLEND),l.bindBuffer(l.ARRAY_BUFFER,r),l.vertexAttribPointer(a.position,2,l.FLOAT,!1,16,0),l.vertexAttribPointer(a.uv,2,l.FLOAT,!1,16,8),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,n),l.uniformMatrix4fv(o.projectionMatrix,!1,v.projectionMatrix.elements),u.activeTexture(l.TEXTURE0),l.uniform1i(o.map,0);var y=0,x=0,b=m.fog;b?(l.uniform3f(o.fogColor,b.color.r,b.color.g,b.color.b),b.isFog?(l.uniform1f(o.fogNear,b.near),l.uniform1f(o.fogFar,b.far),l.uniform1i(o.fogType,1),y=1,x=1):b.isFogExp2&&(l.uniform1f(o.fogDensity,b.density),l.uniform1i(o.fogType,2),y=2,x=2)):(l.uniform1i(o.fogType,0),y=0,x=0);for(var w=0,_=t.length;w<_;w++){(S=t[w]).modelViewMatrix.multiplyMatrices(v.matrixWorldInverse,S.matrixWorld),S.z=-S.modelViewMatrix.elements[14]}t.sort(p);var M=[];for(w=0,_=t.length;w<_;w++){var S,T=(S=t[w]).material;if((!g||g(S,T))&&!1!==T.visible){l.uniform1f(o.alphaTest,T.alphaTest),l.uniformMatrix4fv(o.modelViewMatrix,!1,S.modelViewMatrix.elements),S.matrixWorld.decompose(c,f,h),M[0]=h.x,M[1]=h.y;var E=0;m.fog&&T.fog&&(E=x),y!==E&&(l.uniform1i(o.fogType,E),y=E),null!==T.map?(l.uniform2f(o.uvOffset,T.map.offset.x,T.map.offset.y),l.uniform2f(o.uvScale,T.map.repeat.x,T.map.repeat.y)):(l.uniform2f(o.uvOffset,0,0),l.uniform2f(o.uvScale,1,1)),l.uniform1f(o.opacity,T.opacity),l.uniform3f(o.color,T.color.r,T.color.g,T.color.b),l.uniform1f(o.rotation,T.rotation),l.uniform2fv(o.scale,M),u.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst),u.setDepthTest(T.depthTest),u.setDepthWrite(T.depthWrite),T.map?e.setTexture2D(T.map,0):e.setTexture2D(s,0),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0)}}u.enable(l.CULL_FACE),e.resetGLState()}}}Ir.cubeEnv={uniforms:Tr.merge([Rr.common,Ir.standard.uniforms,{envMap:{value:null},envMapIntensity:{value:1},tFlip:{value:-1},opacity:{value:1},roughness:{value:0}}]),vertexShader:Er.cubeEnv_vert,fragmentShader:Er.cubeEnv_frag},Ir.physical={uniforms:Tr.merge([Ir.standard.uniforms,Rr.falloffmap,Rr.falloffalphamap,Rr.clearcoatbumpmap,Rr.anisotropy,{falloffDiffuse:{value:new Pr(16777215)},falloffOpacity:{value:0},clearCoat:{value:0},clearCoatRoughness:{value:0}},Rr.triplanar]),vertexShader:Er.meshphysical_vert,fragmentShader:Er.meshphysical_frag},Or.prototype={constructor:Or,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Pt;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new Pt;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Pt;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new Pt).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new Pt).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Pt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};var Nr=0;function Vr(){Object.defineProperty(this,"id",{value:Nr++}),this.uuid=Et.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=V,this.side=P,this.vertexTangents=!1,this.shading=I,this.vertexColors=O,this.opacity=1,this.transparent=!1,this.blendSrc=J,this.blendDst=Q,this.blendEquation=z,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=oe,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.skip_map=!1,this.skip_alphaMap=!1,this.skip_bumpMap=!1,this.skip_displacementMap=!1,this.skip_normalMap=!1,this.forceRefreshMaterial=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0,this.version=0}function Fr(e){Vr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Br(e,t,r,n){this.name=e||"unnamed",this.texture=null,this.uvChannel=t||0,this.uvTransform=r||!1,this.uvOffset=new Pt(0,0),this.uvRepeat=new Pt(1,1),this.uvRotation=0,this.texelTransform=n||!1,this.texelScale=1,this.texelOffset=0,this.texelInvert=!1}Vr.prototype={constructor:Vr,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e,this.version++},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){var n=this[t];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]="overdraw"===t?Number(r):r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function n(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==V&&(r.blending=this.blending),this.shading!==I&&(r.shading=this.shading),this.side!==P&&(r.side=this.side),this.vertexColors!==O&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),r.skinning=this.skinning,r.morphTargets=this.morphTargets,t){var i=n(e.textures),a=n(e.images);i.length>0&&(r.textures=i),a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var n=t.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},(0,p.default)(Vr.prototype,t.prototype),Fr.prototype=(0,d.default)(Vr.prototype),Fr.prototype.constructor=Fr,Fr.prototype.isShaderMaterial=!0,Fr.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Tr.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Fr.prototype.toJSON=function(e){var t=Vr.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Br.prototype={constructor:Br,copy:function(e){return this.name=e.name,this.texture=e.texture,this.uvChannel=e.uvChannel,this.uvTransform=e.uvTransform,this.uvOffset=e.uvOffset,this.uvRepeat=e.uvRepeat,this.uvRotation=e.uvRotation,this.texelTransform=e.texelTransform,this.texelScale=e.texelScale,this.texelOffset=e.texelOffset,this.texelInvert=e.texelInvert,this},getFlattenedTexelTransform:function(e){var t=e||{};return this.texelInvert?(t.texelScale=-this.texelScale,t.texelOffset=this.texelScale+this.texelOffset):(t.texelScale=this.texelScale,t.texelOffset=this.texelOffset),t}},Br.SupportedMapNames=["map","lightMap","aoMap","emissiveMap","specularMap","reflectivityMap","bumpMap","normalMap","roughnessMap","metalnessMap","clearCoatBumpMap","alphaMap","displacementMap","falloffMap","falloffAlphaMap","anisotropyMap","anisotropyRotationMap"],Br.SupportedMapSlotNames=[],Br.SupportedMapUVTexelNames=[];for(var Ur=0;Ur<Br.SupportedMapNames.length;Ur++){var kr=Br.SupportedMapNames[Ur];Br.SupportedMapSlotNames.push(kr+"Slot"),Br.SupportedMapUVTexelNames.push(kr+"UVTexelTransformParams")}function zr(e){Vr.call(this),this.type="MeshDepthMaterial",this.depthPacking=_t,this.color=new Pr(16777215),this.mapSlot=new Br("map",0,!1,!1),this.displacementMapSlot=new Br("displacementMap",0,!1,!0),this.alphaMapSlot=new Br("alphaMap",0,!1,!1),this.skinning=!1,this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clearColor=new Pr(1,1,1),this.clearAlpha=1,this.blending=N,this.setValues(e)}zr.prototype=(0,d.default)(Vr.prototype),zr.prototype.constructor=zr,zr.prototype.isMeshDepthMaterial=!0;var Gr,jr,Hr,Wr,Xr,qr,Yr,Zr,Jr,Qr,Kr;!function(){var e={map:{get:function(){return this.mapSlot.texture},set:function(e){this.mapSlot.texture=e}},displacementMap:{get:function(){return this.displacementMapSlot.texture},set:function(e){this.displacementMapSlot.texture=e}},displacementScale:{get:function(){return this.displacementMapSlot.texelScale},set:function(e){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelScale=e}},displacementBias:{get:function(){return this.displacementMapSlot.texelOffset},set:function(e){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelOffset=e}},alphaMap:{get:function(){return this.alphaMapSlot.texture},set:function(e){this.alphaMapSlot.texture=e}}};for(var t in e)(0,h.default)(zr.prototype,t,e[t])}();function $r(e,t){this.min=void 0!==e?e:new Ut(1/0,1/0,1/0),this.max=void 0!==t?t:new Ut(-1/0,-1/0,-1/0)}function en(e,t){this.center=void 0!==e?e:new Ut,this.radius=void 0!==t?t:0}function tn(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function rn(e,t){this.normal=void 0!==e?e:new Ut(1,0,0),this.constant=void 0!==t?t:0}function nn(e,t,r,n,i,a){this.planes=[void 0!==e?e:new rn,void 0!==t?t:new rn,void 0!==r?r:new rn,void 0!==n?n:new rn,void 0!==i?i:new rn,void 0!==a?a:new rn]}function an(e,t,r,n){var i=e.context,a=e.state,o=new nn,s=new kt,l=t.shadows,u=new Pt,c=new Pt(n.maxTextureSize,n.maxTextureSize),f=new Ut,h=new Ut,d=[],p=1,m=2,v=1+(p|m),g=new Array(v),y=new Array(v),x={},b=[new Ut(1,0,0),new Ut(-1,0,0),new Ut(0,0,1),new Ut(0,0,-1),new Ut(0,1,0),new Ut(0,-1,0)],w=[new Ut(0,1,0),new Ut(0,1,0),new Ut(0,1,0),new Ut(0,1,0),new Ut(0,0,1),new Ut(0,0,-1)],_=[new Nt,new Nt,new Nt,new Nt,new Nt,new Nt],M=new zr;M.depthPacking=Mt,M.clipping=!0;for(var T=Ir.distanceRGBA,E=Tr.clone(T.uniforms),R=0;R!==v;++R){var I=0!=(R&p),O=0!=(R&m),L=M.clone();L.morphTargets=I,L.skinning=O,g[R]=L;var D=new Fr({defines:{USE_SHADOWMAP:""},uniforms:E,vertexShader:T.vertexShader,fragmentShader:T.fragmentShader,morphTargets:I,skinning:O,clipping:!0});y[R]=D}var N=this;function V(t,r,n,i,a){var o=t.geometry,s=null,l=g,u=t.customDepthMaterial;if(n&&(l=y,u=t.customDistanceMaterial),u)s=u;else{var c=!1;r.morphTargets&&(o&&o.isBufferGeometry?c=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(c=o.morphTargets&&o.morphTargets.length>0));var f=t.isSkinnedMesh&&r.skinning,h=0;c&&(h|=p),f&&(h|=m),s=l[h]}if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var d=s.uuid,v=r.uuid,b=x[d];void 0===b&&(b={},x[d]=b);var w=b[v];void 0===w&&(w=s.clone(),b[v]=w),s=w}s.visible=r.visible,s.wireframe=r.wireframe;var _=r.side;return a==C?_=a:a==P?_===P?_=P:_===A&&(_=A):_===P?_=A:_===A&&(_=P),s.side=_,s.clipShadows=r.clipShadows,s.clippingPlanes=r.clippingPlanes,s.wireframeLinewidth=r.wireframeLinewidth,s.linewidth=r.linewidth,n&&void 0!==s.uniforms.lightPos&&s.uniforms.lightPos.value.copy(i),s}function F(e,t,r){if(!1!==e.visible){if(0!=(e.layers.mask&t.layers.mask)&&(e.isMesh||e.isLine||e.isPoints))if(e.castShadow&&(!1===e.frustumCulled||!0===o.intersectsObject(e)))!0===e.material.visible&&(e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),d.push(e));for(var n=e.children,i=0,a=n.length;i<a;i++)F(n[i],t,r)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=S,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,n){if(!1!==N.enabled&&(!1!==N.autoUpdate||!1!==N.needsUpdate)&&0!==l.length){var p,m;a.buffers.color.setClear(1,1,1,1),a.disable(i.BLEND),a.setDepthTest(!0),a.setScissorTest(!1);for(var v=0,g=l.length;v<g;v++){var y=l[v],x=y.shadow;if(void 0!==x){var M=x.camera,S=x.side;if(u.copy(x.mapSize),u.min(c),y&&y.isPointLight){p=6,m=!0;var T=u.x,E=u.y;_[0].set(2*T,E,T,E),_[1].set(0,E,T,E),_[2].set(3*T,E,T,E),_[3].set(T,E,T,E),_[4].set(3*T,0,T,E),_[5].set(T,0,T,E),u.x*=4,u.y*=2}else p=1,m=!1;if(null===x.map){var P={minFilter:Ce,magFilter:Ce,format:Ze,name:y.name+".shadowMap"};x.map=new Vt(u.x,u.y,P),M.updateProjectionMatrix()}(x.isSpotLightShadow||x.isDirectionalLightShadow)&&x.update(y),x&&x.isRectAreaLightShadow&&x.update(y);var A=x.map,C=x.matrix;h.setFromMatrixPosition(y.matrixWorld),e.setRenderTarget(A),e.clear();for(var R=0;R<p;R++){if(M.position.copy(x.virtualPosition?x.virtualPosition:h),m){f.copy(M.position),f.add(b[R]),M.up.copy(w[R]),M.lookAt(f);var I=_[R];a.viewport(I)}else f.setFromMatrixPosition(y.target.matrixWorld),M.lookAt(f);if(x.virtualPosition){var O=M.position.clone().sub(h);f.add(O),M.lookAt(f)}(x.samplePosition||x.sampleQuaternion)&&(x.samplePosition&&M.position.add(x.samplePosition),x.sampleQuaternion&&M.quaternion.multiply(x.sampleQuaternion)),M.updateMatrixWorld(),M.matrixWorldInverse.getInverse(M.matrixWorld),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(M.projectionMatrix),C.multiply(M.matrixWorldInverse),s.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse),o.setFromMatrix(s),d.length=0,F(t,n,M);for(var L=0,D=d.length;L<D;L++){var B=d[L],U=r.update(B),k=B.material;if(k&&k.isMultiMaterial)for(var z=U.groups,G=k.materials,j=0,H=z.length;j<H;j++){var W=z[j],X=G[W.materialIndex];if(!0===X.visible){var q=V(B,X,m,h,S);e.renderBufferDirect(M,null,U,q,B,W)}}else{q=V(B,k,m,h,S);e.renderBufferDirect(M,null,U,q,B,null)}}}}else console.warn("THREE.WebGLShadowMap:",y,"has no shadow.")}var Y=e.getClearColor(),Z=e.getClearAlpha();e.setClearColor(Y,Z),N.needsUpdate=!1}}}function on(e,t){this.origin=void 0!==e?e:new Ut,this.direction=void 0!==t?t:new Ut}function sn(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||sn.DefaultOrder}function ln(){this.mask=1}zr.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.opacity=e.opacity,this.mapSlot.copy(e.mapSlot),this.displacementMapSlot.copy(e.displacementMapSlot),this.alphaMapSlot.copy(e.alphaMapSlot),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.clearColor=e.clearColor,this.clearAlpha=e.clearAlpha,this},$r.prototype={constructor:$r,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],f=e[s+2];u<t&&(t=u),c<r&&(r=c),f<n&&(n=f),u>i&&(i=u),c>a&&(a=c),f>o&&(o=f)}this.min.set(t,r,n),this.max.set(i,a,o)},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),f=e.getZ(s);u<t&&(t=u),c<r&&(r=c),f<n&&(n=f),u>i&&(i=u),c>a&&(a=c),f>o&&(o=f)}this.min.set(t,r,n),this.max.set(i,a,o)},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Ut;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(){var e=new Ut;return function(t){var r=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var n,i,a=t.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(n=0,i=o.length;n<i;n++)e.copy(o[n]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(n=0,i=s.count;n<i;n++)e.fromBufferAttribute(s,n).applyMatrix4(t.matrixWorld),r.expandByPoint(e)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new Ut;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Ut;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new Ut).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return void 0===jr&&(jr=new Ut),this.clampPoint(e.center,jr),jr.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant},clampPoint:function(e,t){return(t||new Ut).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Ut;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Ut;return function(t){var r=t||new en;return this.getCenter(r.center),r.radius=.5*this.getSize(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(Gr=[new Ut,new Ut,new Ut,new Ut,new Ut,new Ut,new Ut,new Ut],function(e){return this.isEmpty()?this:(Gr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Gr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Gr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Gr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Gr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Gr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Gr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Gr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Gr),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},en.prototype={constructor:en,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Hr=new $r,function(e,t){var r=this.center;void 0!==t?r.copy(t):Hr.setFromPoints(e).getCenter(r);for(var n=0,i=0,a=e.length;i<a;i++)n=Math.max(n,r.distanceToSquared(e[i]));return this.radius=Math.sqrt(n),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),n=t||new Ut;return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){var t=e||new $r;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},tn.prototype={constructor:tn,isMatrix3:!0,set:function(e,t,r,n,i,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=n,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=r,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new Ut);for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-r*i*u+r*o*s+n*i*l-n*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var r=e.elements,n=this.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],f=r[7],h=r[8],d=h*l-u*f,p=u*c-h*s,m=f*s-l*c,v=i*d+a*p+o*m;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return n[0]=d*y,n[1]=(o*f-h*a)*y,n[2]=(u*a-o*l)*y,n[3]=p*y,n[4]=(h*i-o*c)*y,n[5]=(o*s-u*i)*y,n[6]=m*y,n[7]=(a*c-f*i)*y,n[8]=(l*i-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}},rn.prototype={constructor:rn,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Ut,t=new Ut;return function(r,n,i){var a=e.subVectors(i,n).cross(t.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e);return(t||new Ut).copy(this.normal).multiplyScalar(r)},intersectLine:function(){var e=new Ut;return function(t,r){var n=r||new Ut,i=t.delta(e),a=this.normal.dot(i);if(0===a)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/a;return o<0||o>1?void 0:n.copy(i).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new Ut).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Ut,t=new tn;return function(r,n){var i=this.coplanarPoint(e).applyMatrix4(r),a=n||t.getNormalMatrix(r),o=this.normal.applyMatrix3(a).normalize();return this.constant=-i.dot(o),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},nn.prototype={constructor:nn,set:function(e,t,r,n,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(n),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],h=r[9],d=r[10],p=r[11],m=r[12],v=r[13],g=r[14],y=r[15];return t[0].setComponents(o-n,c-s,p-f,y-m).normalize(),t[1].setComponents(o+n,c+s,p+f,y+m).normalize(),t[2].setComponents(o+i,c+l,p+h,y+v).normalize(),t[3].setComponents(o-i,c-l,p-h,y-v).normalize(),t[4].setComponents(o-a,c-u,p-d,y-g).normalize(),t[5].setComponents(o+a,c+u,p+d,y+g).normalize(),this},intersectsObject:(qr=new en,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),qr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(qr)}),intersectsSprite:function(){var e=new en;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(r)<n)return!1}return!0},intersectsBox:(Wr=new Ut,Xr=new Ut,function(e){for(var t=this.planes,r=0;r<6;r++){var n=t[r];Wr.x=n.normal.x>0?e.min.x:e.max.x,Xr.x=n.normal.x>0?e.max.x:e.min.x,Wr.y=n.normal.y>0?e.min.y:e.max.y,Xr.y=n.normal.y>0?e.max.y:e.min.y,Wr.z=n.normal.z>0?e.min.z:e.max.z,Xr.z=n.normal.z>0?e.max.z:e.min.z;var i=n.distanceToPoint(Wr),a=n.distanceToPoint(Xr);if(i<0&&a<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}},on.prototype={constructor:on,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new Ut).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Ut;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new Ut;r.subVectors(e,this.origin);var n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Ut;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(Zr=new Ut,Jr=new Ut,Qr=new Ut,function(e,t,r,n){Zr.copy(e).add(t).multiplyScalar(.5),Jr.copy(t).sub(e).normalize(),Qr.copy(this.origin).sub(Zr);var i,a,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(Jr),c=Qr.dot(this.direction),f=-Qr.dot(Jr),h=Qr.lengthSq(),d=Math.abs(1-u*u);if(d>0)if(a=u*c-f,s=l*d,(i=u*f-c)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+u*(a*=p)+2*c)+a*(u*i+a+2*f)+h}else a=l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*f)+h;else a=-l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*f)+h;else a<=-s?o=-(i=Math.max(0,-(-u*l+c)))*i+(a=i>0?-l:Math.min(Math.max(-l,-f),l))*(a+2*f)+h:a<=s?(i=0,o=(a=Math.min(Math.max(-l,-f),l))*(a+2*f)+h):o=-(i=Math.max(0,-(u*l+c)))*i+(a=i>0?l:Math.min(Math.max(-l,-f),l))*(a+2*f)+h;else a=u>0?-l:l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*f)+h;return r&&r.copy(this.direction).multiplyScalar(i).add(this.origin),n&&n.copy(Jr).multiplyScalar(a).add(Zr),o}),intersectSphere:function(){var e=new Ut;return function(t,r){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),i=e.dot(e)-n*n,a=t.radius*t.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=n-o,l=n+o;return s<0&&l<0?null:s<0?this.at(l,r):this.at(s,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,n,i,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,f=this.origin;return l>=0?(r=(e.min.x-f.x)*l,n=(e.max.x-f.x)*l):(r=(e.max.x-f.x)*l,n=(e.min.x-f.x)*l),u>=0?(i=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(i=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),r>a||i>n?null:((i>r||r!=r)&&(r=i),(a<n||n!=n)&&(n=a),c>=0?(o=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(o=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),r>s||o>n?null:((o>r||r!=r)&&(r=o),(s<n||n!=n)&&(n=s),n<0?null:this.at(r>=0?r:n,t)))},intersectsBox:(Yr=new Ut,function(e){return null!==this.intersectBox(e,Yr)}),intersectTriangle:function(){var e=new Ut,t=new Ut,r=new Ut,n=new Ut;return function(i,a,o,s,l){t.subVectors(a,i),r.subVectors(o,i),n.crossVectors(t,r);var u,c=this.direction.dot(n);if(c>0){if(s)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}e.subVectors(this.origin,i);var f=u*this.direction.dot(r.crossVectors(e,r));if(f<0)return null;var h=u*this.direction.dot(t.cross(e));if(h<0)return null;if(f+h>c)return null;var d=-u*e.dot(n);return d<0?null:this.at(d/c,l)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},sn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],sn.DefaultOrder="XYZ",sn.prototype={constructor:sn,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=Et.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],f=i[2],h=i[6],d=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(h,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===t?(this._y=Math.asin(-n(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===t?(this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(h,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,r,n){return void 0===e&&(e=new kt),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(Kr=new Bt,function(e){return Kr.setFromEuler(this),this.setFromQuaternion(Kr,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Ut(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},ln.prototype={constructor:ln,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!=(this.mask&e.mask)}};var un,cn,fn,hn,dn,pn,mn,vn,gn,yn=0;function xn(){Object.defineProperty(this,"id",{value:yn++}),this.uuid=Et.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xn.DefaultUp.clone();var e=new Ut,t=new sn,r=new Bt,n=new Ut(1,1,1),i=new Ut;t.onChange(function(){r.setFromEuler(t,!1)}),r.onChange(function(){t.setFromQuaternion(r,void 0,!1)}),(0,f.default)(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:n},shear:{enumerable:!0,value:i},modelViewMatrix:{value:new kt},normalMatrix:{value:new tn}}),this.matrix=new kt,this.matrixWorld=new kt,this.matrixWorldPrevious=new kt,this.matrixWorldInverse=new kt,this.matrixAutoUpdate=xn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ln,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function bn(e,t){this.start=void 0!==e?e:new Ut,this.end=void 0!==t?t:new Ut}function wn(e,t,r){this.a=void 0!==e?e:new Ut,this.b=void 0!==t?t:new Ut,this.c=void 0!==r?r:new Ut}function _n(e,t,r,n,i,a){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new Ut,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new Pr,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}function Mn(e){Vr.call(this),this.type="MeshBasicMaterial",this.color=new Pr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Sn(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Et.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Tn(e,t){Sn.call(this,new Int8Array(e),t)}function En(e,t){Sn.call(this,new Uint8Array(e),t)}function Pn(e,t){Sn.call(this,new Uint8ClampedArray(e),t)}function An(e,t){Sn.call(this,new Int16Array(e),t)}function Cn(e,t){Sn.call(this,new Uint16Array(e),t)}function Rn(e,t){Sn.call(this,new Int32Array(e),t)}function In(e,t){Sn.call(this,new Uint32Array(e),t)}function On(e,t){Sn.call(this,new Float32Array(e),t)}function Ln(e,t){Sn.call(this,new Float64Array(e),t)}function Dn(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}xn.DefaultUp=new Ut(0,1,0),xn.DefaultMatrixAutoUpdate=!0,xn.prototype={constructor:xn,isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale,this.shear)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(pn=new Bt,function(e,t){return pn.setFromAxisAngle(e,t),this.quaternion.multiply(pn),this}),rotateX:function(){var e=new Ut(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Ut(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Ut(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Ut;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new Ut(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Ut(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Ut(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(dn=new kt,function(e){return e.applyMatrix4(dn.getInverse(this.matrixWorld))}),lookAt:function(){var e=new kt;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var r=this.children.indexOf(e);-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectByProperty(e,t);if(void 0!==i)return i}},getObjectsByProperty:function(e,t,r){r=r||[],this[e]===t&&r.push(this);for(var n=0,i=this.children.length;n<i;n++){this.children[n].getObjectsByProperty(e,t,r)}return r},getWorldPosition:function(e){var t=e||new Ut;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(cn=new Ut,fn=new Ut,hn=new Ut,function(e){var t=e||new Bt;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(cn,t,fn,hn),t}),getWorldRotation:function(){var e=new Bt;return function(t){var r=t||new sn;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new Ut,t=new Bt,r=new Ut;return function(n){var i=n||new Ut;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i,r),i}}(),getWorldDirection:function(){var e=new Bt;return function(t){var r=t||new Ut;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},boundingBox:(un=new $r,function(e,t,r){var n=r||new $r;return n.makeEmpty(),this.traverseVisible(function(e){if((!t||t(e))&&e.geometry){var r=e.geometry;null===r.boundingBox&&r.computeBoundingBox(),r.boundingBox.isEmpty()||(un.copy(r.boundingBox),un.applyMatrix4(e.matrixWorld),n.union(un))}}),e||n.applyMatrix4(matrixWorldInverse),n}),updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale,this.shear),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldInverse.getInverse(this.matrixWorld),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||""===e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var n={};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),"{}"!==(0,c.default)(this.userData)&&(n.userData=this.userData),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),n.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),n.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),n.material=this.material.uuid),this.children.length>0){n.children=[];for(var i=0;i<this.children.length;i++)n.children.push(this.children[i].toJSON(e).object)}if(t){var a=u(e.geometries),o=u(e.materials),s=u(e.textures),l=u(e.images);a.length>0&&(r.geometries=a),o.length>0&&(r.materials=o),s.length>0&&(r.textures=s),l.length>0&&(r.images=l)}return r.object=n,r;function u(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.shear.copy(e.shear),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse((0,c.default)(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}},(0,p.default)(xn.prototype,t.prototype),bn.prototype={constructor:bn,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new Ut).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new Ut).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new Ut;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(mn=new Ut,vn=new Ut,function(e,t){mn.subVectors(e,this.start),vn.subVectors(this.end,this.start);var r=vn.dot(vn),n=vn.dot(mn)/r;return t&&(n=Et.clamp(n,0,1)),n}),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t),i=r||new Ut;return this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},wn.normal=(gn=new Ut,function(e,t,r,n){var i=n||new Ut;i.subVectors(r,t),gn.subVectors(e,t),i.cross(gn);var a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}),wn.barycoordFromPoint=function(){var e=new Ut,t=new Ut,r=new Ut;return function(n,i,a,o,s){e.subVectors(o,i),t.subVectors(a,i),r.subVectors(n,i);var l=e.dot(e),u=e.dot(t),c=e.dot(r),f=t.dot(t),h=t.dot(r),d=l*f-u*u,p=s||new Ut;if(0===d)return p.set(-2,-1,-1);var m=1/d,v=(f*c-u*h)*m,g=(l*h-u*c)*m;return p.set(1-v-g,g,v)}}(),wn.containsPoint=function(){var e=new Ut;return function(t,r,n,i){var a=wn.barycoordFromPoint(t,r,n,i,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),wn.prototype={constructor:wn,set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new Ut,t=new Ut;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new Ut).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return wn.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new rn).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return wn.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return wn.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,t,r,n;return function(i,a){void 0===e&&(e=new rn,t=[new bn,new bn,new bn],r=new Ut,n=new Ut);var o=a||new Ut,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,r),!0===this.containsPoint(r))o.copy(r);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var l=0;l<t.length;l++){t[l].closestPointToPoint(r,!0,n);var u=r.distanceToSquared(n);u<s&&(s=u,o.copy(n))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},_n.prototype={constructor:_n,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},Mn.prototype=(0,d.default)(Vr.prototype),Mn.prototype.constructor=Mn,Mn.prototype.isMeshBasicMaterial=!0,Mn.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Sn.prototype={constructor:Sn,isBufferAttribute:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new Pr),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];t[r++]=a.a,t[r++]=a.b,t[r++]=a.c}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),a=new Pt),t[r++]=a.x,t[r++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),a=new Ut),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new Nt),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return(new this.constructor).copy(this)}},Tn.prototype=(0,d.default)(Sn.prototype),Tn.prototype.constructor=Tn,En.prototype=(0,d.default)(Sn.prototype),En.prototype.constructor=En,Pn.prototype=(0,d.default)(Sn.prototype),Pn.prototype.constructor=Pn,An.prototype=(0,d.default)(Sn.prototype),An.prototype.constructor=An,Cn.prototype=(0,d.default)(Sn.prototype),Cn.prototype.constructor=Cn,Rn.prototype=(0,d.default)(Sn.prototype),Rn.prototype.constructor=Rn,In.prototype=(0,d.default)(Sn.prototype),In.prototype.constructor=In,On.prototype=(0,d.default)(Sn.prototype),On.prototype.constructor=On,Ln.prototype=(0,d.default)(Sn.prototype),Ln.prototype.constructor=Ln,(0,p.default)(Dn.prototype,{computeGroups:function(e){for(var t,r=[],n=void 0,i=e.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==n&&(n=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,r.push(t)),t={start:3*a,materialIndex:n})}void 0!==t&&(t.count=3*a-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,n=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]=[];this.morphTargets.position=t}var c,f=e.morphNormals,h=f.length;if(h>0){c=[];for(u=0;u<h;u++)c[u]=[];this.morphTargets.normal=c}var d=e.skinIndices,p=e.skinWeights,m=d.length===n.length,v=p.length===n.length;for(u=0;u<r.length;u++){var g=r[u];this.vertices.push(n[g.a],n[g.b],n[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=g.normal;this.normals.push(x,x,x)}var b,w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var _=g.color;this.colors.push(_,_,_)}if(!0===a)void 0!==(b=i[0][u])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new Pt,new Pt,new Pt));if(!0===o)void 0!==(b=i[1][u])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new Pt,new Pt,new Pt));for(var M=0;M<l;M++){var S=s[M].vertices;t[M].push(S[g.a],S[g.b],S[g.c])}for(M=0;M<h;M++){var T=f[M].vertexNormals[u];c[M].push(T.a,T.b,T.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Nn,Vn=0;function Fn(){return Vn++}function Bn(){Object.defineProperty(this,"id",{value:Fn()}),this.uuid=Et.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Un(){Object.defineProperty(this,"id",{value:Fn()}),this.uuid=Et.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function kn(e,t){xn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Un,this.material=void 0!==t?t:new Mn({color:16777215*Math.random()}),this.drawMode=ht,this.updateMorphTargets()}function zn(e,t,r,n,i,a){Un.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};var o,s,l,u,c=this,f=function(e,t,r){var n=0;return n+=(e+1)*(t+1)*2,n+=(e+1)*(r+1)*2,n+=(r+1)*(t+1)*2}(n=Math.floor(n)||1,i=Math.floor(i)||1,a=Math.floor(a)||1),h=(u=0,u+=(o=n)*(s=i)*2,u+=o*(l=a)*2,6*(u+=l*s*2)),d=new(h>65535?Uint32Array:Uint16Array)(h),p=new Float32Array(3*f),m=new Float32Array(3*f),v=new Float32Array(2*f),g=0,y=0,x=0,b=0,w=0;function _(e,t,r,n,i,a,o,s,l,u,f){for(var h=a/l,_=o/u,M=a/2,S=o/2,T=s/2,E=l+1,P=u+1,A=0,C=0,R=new Ut,I=0;I<P;I++)for(var O=I*_-S,L=0;L<E;L++){var D=L*h-M;R[e]=D*n,R[t]=O*i,R[r]=T,p[g]=R.x,p[g+1]=R.y,p[g+2]=R.z,R[e]=0,R[t]=0,R[r]=s>0?1:-1,m[g]=R.x,m[g+1]=R.y,m[g+2]=R.z,v[y]=L/l,v[y+1]=1-I/u,g+=3,y+=2,A+=1}for(I=0;I<u;I++)for(L=0;L<l;L++){var N=b+L+E*I,V=b+L+E*(I+1),F=b+(L+1)+E*(I+1),B=b+(L+1)+E*I;d[x]=N,d[x+1]=V,d[x+2]=B,d[x+3]=V,d[x+4]=F,d[x+5]=B,x+=6,C+=6}c.addGroup(w,C,f),w+=C,b+=A}_("z","y","x",-1,-1,r,t,e,a,i,0),_("z","y","x",1,-1,r,t,-e,a,i,1),_("x","z","y",1,1,e,r,t,n,a,2),_("x","z","y",1,-1,e,r,-t,n,a,3),_("x","y","z",1,-1,e,t,r,n,i,4),_("x","y","z",-1,-1,e,t,-r,n,i,5),this.setIndex(new Sn(d,1)),this.addAttribute("position",new Sn(p,3)),this.addAttribute("normal",new Sn(m,3)),this.addAttribute("uv",new Sn(v,2))}function Gn(e,t,r,n){Un.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};for(var i=e/2,a=t/2,o=Math.floor(r)||1,s=Math.floor(n)||1,l=o+1,u=s+1,c=e/o,f=t/s,h=new Float32Array(l*u*3),d=new Float32Array(l*u*3),p=new Float32Array(l*u*2),m=0,v=0,g=0;g<u;g++)for(var y=g*f-a,x=0;x<l;x++){var b=x*c-i;h[m]=b,h[m+1]=-y,d[m+2]=1,p[v]=x/o,p[v+1]=1-g/s,m+=3,v+=2}m=0;var w=new(h.length/3>65535?Uint32Array:Uint16Array)(o*s*6);for(g=0;g<s;g++)for(x=0;x<o;x++){var _=x+l*g,M=x+l*(g+1),S=x+1+l*(g+1),T=x+1+l*g;w[m]=_,w[m+1]=M,w[m+2]=T,w[m+3]=M,w[m+4]=S,w[m+5]=T,m+=6}this.setIndex(new Sn(w,1)),this.addAttribute("position",new Sn(h,3)),this.addAttribute("normal",new Sn(d,3)),this.addAttribute("uv",new Sn(p,2))}function jn(){xn.call(this),this.type="Camera",this.matrixWorldInverse=new kt,this.projectionMatrix=new kt}Bn.prototype={constructor:Bn,isGeometry:!0,applyMatrix:function(e){for(var t=(new tn).getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++){this.vertices[r].applyMatrix4(e)}for(r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(var a=0,o=i.vertexNormals.length;a<o;a++)i.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new kt),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new kt),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new kt),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,r,n){return void 0===e&&(e=new kt),e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,r,n){return void 0===e&&(e=new kt),e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(e){void 0===Nn&&(Nn=new xn),Nn.lookAt(e),Nn.updateMatrix(),this.applyMatrix(Nn.matrix)},fromBufferGeometry:function(e){var t=this,r=null!==e.index?e.index.array:void 0,n=e.attributes,i=n.position.array,a=void 0!==n.normal?n.normal.array:void 0,o=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,l=void 0!==n.uv2?n.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=[],c=[],f=[],h=0,d=0;h<i.length;h+=3,d+=2)t.vertices.push(new Ut(i[h],i[h+1],i[h+2])),void 0!==a&&u.push(new Ut(a[h],a[h+1],a[h+2])),void 0!==o&&t.colors.push(new Pr(o[h],o[h+1],o[h+2])),void 0!==s&&c.push(new Pt(s[d],s[d+1])),void 0!==l&&f.push(new Pt(l[d],l[d+1]));function p(e,r,n,i){var h=new _n(e,r,n,void 0!==a?[u[e].clone(),u[r].clone(),u[n].clone()]:[],void 0!==o?[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()]:[],i);t.faces.push(h),void 0!==s&&t.faceVertexUvs[0].push([c[e].clone(),c[r].clone(),c[n].clone()]),void 0!==l&&t.faceVertexUvs[1].push([f[e].clone(),f[r].clone(),f[n].clone()])}if(void 0!==r){var m=e.groups;if(m.length>0)for(h=0;h<m.length;h++)for(var v=m[h],g=v.start,y=(d=g,g+v.count);d<y;d+=3)p(r[d],r[d+1],r[d+2],v.materialIndex);else for(h=0;h<r.length;h+=3)p(r[h],r[h+1],r[h+2])}else for(h=0;h<i.length/3;h+=3)p(h,h+1,h+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,n=new kt;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new Ut,t=new Ut,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,r,n,i,a,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)o[t]=new Ut;if(e){var s,l,u,c=new Ut,f=new Ut;for(n=0,i=this.faces.length;n<i;n++)a=this.faces[n],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],c.subVectors(u,l),f.subVectors(s,l),c.cross(f),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)o[(a=this.faces[n]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,r=this.vertices.length;t<r;t++)o[t].normalize();for(n=0,i=this.faces.length;n<i;n++){var h=(a=this.faces[n]).vertexNormals;3===h.length?(h[0].copy(o[a.a]),h[1].copy(o[a.b]),h[2].copy(o[a.c])):(h[0]=o[a.a].clone(),h[1]=o[a.b].clone(),h[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var n=(r=this.faces[e]).vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for((i=this.faces[r]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new Bn;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)l=new Ut,u={a:new Ut,b:new Ut,c:new Ut},o.push(l),s.push(u)}var l,u,c=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),r=0,n=this.faces.length;r<n;r++)i=this.faces[r],l=c.faceNormals[r],u=c.vertexNormals[r],l.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)(i=this.faces[r]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,r=0,n=t.length;r<n;r++)r>0&&(e+=t[r].distanceTo(t[r-1])),this.lineDistances[r]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $r),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new en),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(!1!==(e&&e.isGeometry)){var n,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.faceVertexUvs[0],c=e.faceVertexUvs[0],f=this.colors,h=e.colors;void 0===r&&(r=0),void 0!==t&&(n=(new tn).getNormalMatrix(t));for(var d=0,p=o.length;d<p;d++){var m=o[d].clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(d=0,p=h.length;d<p;d++)f.push(h[d].clone());for(d=0,p=l.length;d<p;d++){var v,g,y,x=l[d],b=x.vertexNormals,w=x.vertexColors;(v=new _n(x.a+i,x.b+i,x.c+i)).normal.copy(x.normal),void 0!==n&&v.normal.applyMatrix3(n).normalize();for(var _=0,M=b.length;_<M;_++)g=b[_].clone(),void 0!==n&&g.applyMatrix3(n).normalize(),v.vertexNormals.push(g);v.color.copy(x.color);for(_=0,M=w.length;_<M;_++)y=w[_],v.vertexColors.push(y.clone());v.materialIndex=x.materialIndex+r,s.push(v)}for(d=0,p=c.length;d<p;d++){var S=c[d],T=[];if(void 0!==S){for(_=0,M=S.length;_<M;_++)T.push(S[_].clone());u.push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){!1!==(e&&e.isMesh)?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,r,n,i,a,o,s,l={},u=[],c=[],f=Math.pow(10,4);for(r=0,n=this.vertices.length;r<n;r++)e=this.vertices[r],void 0===l[t=Math.round(e.x*f)+"_"+Math.round(e.y*f)+"_"+Math.round(e.z*f)]?(l[t]=r,u.push(this.vertices[r]),c[r]=u.length-1):c[r]=c[l[t]];var h=[];for(r=0,n=this.faces.length;r<n;r++){(i=this.faces[r]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],a=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){h.push(r);break}}for(r=h.length-1;r>=0;r--){var p=h[r];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var n,i,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(n=[]),o&&o.length===t&&(i=[]);for(r=0;r<t;r++){var s=e[r]._id;n&&n.push(a[s]),i&&i.push(o[s])}n&&(this.faceVertexUvs[0]=n),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var n=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];n.push(a.x,a.y,a.z)}var o=[],s=[],l={},u=[],c={},f=[],h={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,x=0;if(x=M(x=M(x=M(x=M(x=M(x=M(x=M(x=M(x,0,0),1,!0),2,!1),3,p),4,m),5,v),6,g),7,y),o.push(x),o.push(d.a,d.b,d.c),o.push(d.materialIndex),p){var b=this.faceVertexUvs[0][i];o.push(E(b[0]),E(b[1]),E(b[2]))}if(m&&o.push(S(d.normal)),v){var w=d.vertexNormals;o.push(S(w[0]),S(w[1]),S(w[2]))}if(g&&o.push(T(d.color)),y){var _=d.vertexColors;o.push(T(_[0]),T(_[1]),T(_[2]))}}function M(e,t,r){return r?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]?l[t]:(l[t]=s.length/3,s.push(e.x,e.y,e.z),l[t])}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]?c[t]:(c[t]=u.length,u.push(e.getHex()),c[t])}function E(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]?h[t]:(h[t]=f.length/2,f.push(e.x,e.y),h[t])}return e.data={},e.data.vertices=n,e.data.normals=s,u.length>0&&(e.data.colors=u),f.length>0&&(e.data.uvs=[f]),e.data.faces=o,e},clone:function(){return(new Bn).copy(this)},copy:function(e){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var t=e.vertices,r=0,n=t.length;r<n;r++)this.vertices.push(t[r].clone());var i=e.colors;for(r=0,n=i.length;r<n;r++)this.colors.push(i[r].clone());var a=e.faces;for(r=0,n=a.length;r<n;r++)this.faces.push(a[r].clone());for(r=0,n=e.faceVertexUvs.length;r<n;r++){var o=e.faceVertexUvs[r];void 0===this.faceVertexUvs[r]&&(this.faceVertexUvs[r]=[]);for(var s=0,l=o.length;s<l;s++){for(var u=o[s],c=[],f=0,h=u.length;f<h;f++){var d=u[f];c.push(d.clone())}this.faceVertexUvs[r].push(c)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},(0,p.default)(Bn.prototype,t.prototype),Un.prototype={constructor:Un,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=e},addAttribute:function(e,t){return!1===(t&&t.isBufferAttribute)&&!1===(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new Sn(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var r=this.attributes.normal;void 0!==r&&((new tn).getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new kt),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new kt),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new kt),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,r,n){return void 0===e&&(e=new kt),e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,r,n){return void 0===e&&(e=new kt),e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new xn),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new On(3*t.vertices.length,3),n=new On(3*t.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new On(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t,r=e.geometry;if(e.isMesh){var n=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(n=void 0,r.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(r);n.verticesNeedUpdate=r.verticesNeedUpdate,n.normalsNeedUpdate=r.normalsNeedUpdate,n.colorsNeedUpdate=r.colorsNeedUpdate,n.uvsNeedUpdate=r.uvsNeedUpdate,n.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=n}return!0===r.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(r.vertices),t.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(r.normals),t.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(r.colors),t.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(r.uvs),t.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(r.lineDistances),t.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(e.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Dn).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Sn(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Sn(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.addAttribute("color",new Sn(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Sn(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Sn(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var o=new(e.vertices.length>65535?Uint32Array:Uint16Array)(3*e.indices.length);this.setIndex(new Sn(o,1).copyIndicesArray(e.indices))}for(var s in this.groups=e.groups,e.morphTargets){for(var l=[],u=e.morphTargets[s],c=0,f=u.length;c<f;c++){var h=u[c],d=new On(3*h.length,3);l.push(d.copyVector3sArray(h))}this.morphAttributes[s]=l}if(e.skinIndices.length>0){var p=new On(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var m=new On(4*e.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $r);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new $r,t=new Ut;return function(){null===this.boundingSphere&&(this.boundingSphere=new en);var r=this.attributes.position;if(r){var n=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(n);for(var i=0,a=0,o=r.count;a<o;a++)t.x=r.getX(a),t.y=r.getY(a),t.z=r.getZ(a),i=Math.max(i,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,r=this.groups;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Sn(new Float32Array(n.length),3));else for(var i=t.normal.array,a=0,o=i.length;a<o;a++)i[a]=0;var s,l,u,c=t.normal.array,f=new Ut,h=new Ut,d=new Ut,p=new Ut,m=new Ut;if(e){var v=e.array;0===r.length&&this.addGroup(0,v.length);for(var g=0,y=r.length;g<y;++g){var x=r[g],b=x.start;for(a=b,o=b+x.count;a<o;a+=3)s=3*v[a+0],l=3*v[a+1],u=3*v[a+2],f.fromArray(n,s),h.fromArray(n,l),d.fromArray(n,u),p.subVectors(d,h),m.subVectors(f,h),p.cross(m),c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z}}else for(a=0,o=n.length;a<o;a+=9)f.fromArray(n,a),h.fromArray(n,a+3),d.fromArray(n,a+6),p.subVectors(d,h),m.subVectors(f,h),p.cross(m),c[a]=p.x,c[a+1]=p.y,c[a+2]=p.z,c[a+3]=p.x,c[a+4]=p.y,c[a+5]=p.z,c[a+6]=p.x,c[a+7]=p.y,c[a+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!1!==(e&&e.isBufferGeometry)){void 0===t&&(t=0);var r=this.attributes;for(var n in r)if(void 0!==e.attributes[n])for(var i=r[n].array,a=e.attributes[n],o=a.array,s=0,l=a.itemSize*t;s<o.length;s++,l++)i[l]=o[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e,t,r,n,i=this.attributes.normal.array,a=0,o=i.length;a<o;a+=3)e=i[a],t=i[a+1],r=i[a+2],n=1/Math.sqrt(e*e+t*t+r*r),i[a]*=n,i[a+1]*=n,i[a+2]*=n},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Un,t=this.index.array,r=this.attributes;for(var n in r){for(var i=r[n],a=i.array,o=i.itemSize,s=new a.constructor(t.length*o),l=0,u=0,c=0,f=t.length;c<f;c++){l=t[c]*o;for(var h=0;h<o;h++)s[u++]=a[l++]}e.addAttribute(n,new Sn(s,o))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;if(null!==n){var i=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:i}}var a=this.attributes;for(var r in a){var o=a[r];i=Array.prototype.slice.call(o.array);e.data.attributes[r]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse((0,c.default)(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Un).copy(this)},copy:function(e){var t,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var l=[],u=s[t];for(r=0,n=u.length;r<n;r++)l.push(u[r].clone());this.morphAttributes[t]=l}var c=e.groups;for(r=0,n=c.length;r<n;r++){var f=c[r];this.addGroup(f.start,f.count,f.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Un.MaxIndex=65535,(0,p.default)(Un.prototype,t.prototype),kn.prototype=(0,p.default)((0,d.default)(xn.prototype),{constructor:kn,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return xn.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,r=e.length;t<r;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){var e=new kt,t=new on,r=new en,n=new Ut,i=new Ut,a=new Ut,o=new Ut,s=new Ut,l=new Ut,u=new Pt,c=new Pt,f=new Pt,h=new Ut,d=new Ut,p=new Ut;function m(e,t,r,n,i,a,o){return wn.barycoordFromPoint(e,t,r,n,h),i.multiplyScalar(h.x),a.multiplyScalar(h.y),o.multiplyScalar(h.z),i.add(a).add(o),i.clone()}function v(e,t,r,n,i,a,o){var s=e.material;if(null===(s.side===A?r.intersectTriangle(a,i,n,!0,o):r.intersectTriangle(n,i,a,s.side!==C,o)))return null;p.copy(o),p.applyMatrix4(e.matrixWorld);var l=t.ray.origin.distanceTo(p);return l<t.near||l>t.far?null:{distance:l,point:p.clone(),object:e}}function g(e,t,r,o,s,l,h,p){n.fromBufferAttribute(o,l),i.fromBufferAttribute(o,h),a.fromBufferAttribute(o,p);var g=v(e,t,r,n,i,a,d);return g&&(s&&(u.fromBufferAttribute(s,l),c.fromBufferAttribute(s,h),f.fromBufferAttribute(s,p),g.uv=m(d,n,i,a,u,c,f)),g.face=new _n(l,h,p,wn.normal(n,i,a)),g.faceIndex=l),g}return function(h,p){var y,x=this.geometry,b=this.material,w=this.matrixWorld;if(void 0!==b&&(null===x.boundingSphere&&x.computeBoundingSphere(),r.copy(x.boundingSphere),r.applyMatrix4(w),!1!==h.ray.intersectsSphere(r)&&(e.getInverse(w),t.copy(h.ray).applyMatrix4(e),null===x.boundingBox||!1!==t.intersectsBox(x.boundingBox))))if(x.isBufferGeometry){var _,M,S,T,E,P=x.index,A=x.attributes.position,C=x.attributes.uv;if(null!==P)for(T=0,E=P.count;T<E;T+=3)_=P.getX(T),M=P.getX(T+1),S=P.getX(T+2),(y=g(this,h,t,A,C,_,M,S))&&(y.faceIndex=Math.floor(T/3),p.push(y));else for(T=0,E=A.count;T<E;T+=3)(y=g(this,h,t,A,C,_=T,M=T+1,S=T+2))&&(y.index=_,p.push(y))}else if(x.isGeometry){var R,I,O,L,D=b&&b.isMultiMaterial,N=!0===D?b.materials:null,V=x.vertices,F=x.faces,B=x.faceVertexUvs[0];B.length>0&&(L=B);for(var U=0,k=F.length;U<k;U++){var z=F[U],G=!0===D?N[z.materialIndex]:b;if(void 0!==G){if(R=V[z.a],I=V[z.b],O=V[z.c],!0===G.morphTargets){var j=x.morphTargets,H=this.morphTargetInfluences;n.set(0,0,0),i.set(0,0,0),a.set(0,0,0);for(var W=0,X=j.length;W<X;W++){var q=H[W];if(0!==q){var Y=j[W].vertices;n.addScaledVector(o.subVectors(Y[z.a],R),q),i.addScaledVector(s.subVectors(Y[z.b],I),q),a.addScaledVector(l.subVectors(Y[z.c],O),q)}}n.add(R),i.add(I),a.add(O),R=n,I=i,O=a}if(y=v(this,h,t,R,I,O,d)){if(L){var Z=L[U];u.copy(Z[0]),c.copy(Z[1]),f.copy(Z[2]),y.uv=m(d,R,I,O,u,c,f)}y.face=z,y.faceIndex=U,p.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),zn.prototype=(0,d.default)(Un.prototype),zn.prototype.constructor=zn,Gn.prototype=(0,d.default)(Un.prototype),Gn.prototype.constructor=Gn,jn.prototype=(0,d.default)(xn.prototype),jn.prototype.constructor=jn,jn.prototype.isCamera=!0,jn.prototype.getWorldDirection=function(){var e=new Bt;return function(t){var r=t||new Ut;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),jn.prototype.lookAt=function(){var e=new kt;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),jn.prototype.clone=function(){return(new this.constructor).copy(this)},jn.prototype.copy=function(e){return xn.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this};var Hn=!1;function Wn(e,t,r,n){jn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Xn(e,t,r,n,i,a){jn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function qn(e,t,r){var n=e.createShader(t);e.shaderSource(n,r),e.compileShader(n),!1===e.getShaderParameter(n,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.",e.getShaderInfoLog(n),function(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}(r));var i=e.getShaderInfoLog(n);return""!==i.trim()&&i.indexOf("GL_ARB_gpu_shader5")<0&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",i),n}jn.prototype.fitClipPlanes=function(e,t,r){var n=t||this.getWorldPosition(),i=r||this.getWorldDirection();i.normalize();var a=e.getBoundingSphere(),o=i.clone().multiplyScalar(a.radius),s=(new Ut).addVectors(a.center,o),l=(new rn).setFromNormalAndCoplanarPoint(i.clone().negate(),s).distanceToPoint(n),u=(new Ut).subVectors(a.center,o),c=(new rn).setFromNormalAndCoplanarPoint(i.clone().negate(),u).distanceToPoint(n);c=Math.max(c,.001),l=Math.max(l,c);var f=this.nearUserDefined,h=this.farUserDefined;void 0!==f&&null!==f&&void 0!==h&&null!==h?(c=Et.clamp(c,this.nearUserDefined,this.farUserDefined),l=Et.clamp(l,this.nearUserDefined,this.farUserDefined)):!1===Hn&&(console.log("Warning: User defined clips missing"),Hn=!0),this.near=c,this.far=l},Wn.prototype=(0,p.default)((0,d.default)(jn.prototype),{constructor:Wn,isPerspectiveCamera:!0,copy:function(e){return jn.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:(0,p.default)({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Et.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Et.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Et.RAD2DEG*Math.atan(Math.tan(.5*Et.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,a){e?(this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:n,width:i,height:a},this.updateProjectionMatrix()):this.view=null},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Et.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,a=this.view;if(null!==a){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*n/o,t-=a.offsetY*r/s,n*=a.width/o,r*=a.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far)},toJSON:function(e){var t=xn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=(0,p.default)({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Xn.prototype=(0,p.default)((0,d.default)(jn.prototype),{constructor:Xn,isOrthographicCamera:!0,copy:function(e){return jn.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:(0,p.default)({},e.view),this},setViewOffset:function(e,t,r,n,i,a){this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:n,width:i,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,a=r+e,o=n+t,s=n-t;if(null!==this.view){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,f=(this.top-this.bottom)/this.view.height;a=(i+=c*(this.view.offsetX/l))+c*(this.view.width/l),s=(o-=f*(this.view.offsetY/u))-f*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far)},toJSON:function(e){var t=xn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=(0,p.default)({},this.view)),t}});var Yn=0;function Zn(e){switch(e){case mt:return["Linear","( value )"];case vt:return["sRGB","( value )"];case yt:return["RGBE","( value )"];case xt:return["RGBM","( value, 7.0 )"];case bt:return["RGBM","( value, 16.0 )"];case wt:return["RGBD","( value, 256.0 )"];case gt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Jn(e,t){var r=Zn(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function Qn(e,t){if(!t||!t.texelTransform)return"vec4 "+e+"TexelTransform( vec4 value ) { return value; }\n";t.getFlattenedTexelTransform();return Er.slot_texel_transform_template.replace(/\$SLOT_NAME\$/g,e)}function Kn(e,t,r){var n=r?"uv":"vUv";if(t&&t.uvChannel>0&&(n+=t.uvChannel+1),!t||!t.uvTransform)return"vec2 "+e+"UV() { return "+n+"; }\n";t.getFlattenedTexelTransform();var i=Er.slot_uv_transform_template.replace(/\$SLOT_NAME\$/g,e);return i=i.replace(/\$UV_VAR_NAME\$/g,n)}function $n(e){return""!==e}function ei(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function ti(e){return e.replace(/#include +<([\w\d.]+)>/g,function(e,t){var r=Er[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return ti(r)})}function ri(e){return e.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,r,n){for(var i="",a=parseInt(t);a<parseInt(r);a++)i+=n.replace(/\[ i \]/g,"[ "+a+" ]");return i})}function ni(e,t,r,n){var i=e.context,a=r.extensions,o=r.defines,s=r.__webglShader.vertexShader,l=r.__webglShader.fragmentShader,c="SHADOWMAP_TYPE_BASIC";n.shadowMapType===S?c="SHADOWMAP_TYPE_PCF":n.shadowMapType===E?c="SHADOWMAP_TYPE_PCSS":n.shadowMapType===T&&(c="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(r.envMap.mapping){case xe:case be:h="ENVMAP_TYPE_CUBE";break;case Se:case Te:h="ENVMAP_TYPE_CUBE_UV";break;case we:case _e:h="ENVMAP_TYPE_EQUIREC";break;case Me:h="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case be:case _e:d="ENVMAP_MODE_REFRACTION"}switch(r.combine){case fe:p="ENVMAP_BLENDING_MULTIPLY";break;case he:p="ENVMAP_BLENDING_MIX";break;case de:p="ENVMAP_BLENDING_ADD"}}var m,v,g,y,x,b=e.gammaFactor>0?e.gammaFactor:1,w=function(e,t,r){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.clearCoatBumpMap||t.flatShading||t.anisotropy&&!t.vertexTangents?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter($n).join("\n")}(a,n,e.extensions),_=function(e){var t=[];for(var r in e){var n=e[r];!1!==n&&t.push("#define "+r+" "+n)}return t.join("\n")}(o),M=i.createProgram();if(r.isRawShaderMaterial)m=[_,"\n"].filter($n).join("\n"),v=[w,_,"\n"].filter($n).join("\n");else{m=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,_,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+n.maxBones,n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.reflectivityMap?"#define USE_REFLECTIVITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.falloffMap&&n.falloff?"#define USE_FALLOFFMAP":"",n.falloffAlphaMap&&n.falloff?"#define USE_FALLOFFALPHAMAP":"",n.ssaoMap?"#define UV_SS":"",n.flatShading?"#define FLAT_SHADED":"",n.anisotropy?"#define ANISOTROPY":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.oit?"#define USE_OIT":"","uniform mat4 modelMatrix;","uniform mat4 modelMatrixPrev;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef ANISOTROPY"," attribute vec4 tangent;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($n).join("\n"),v=[w,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,_,n.alphaTest?"#define ALPHATEST":"",n.falloff?"#define FALLOFF":"",n.falloffMap&&n.falloff?"#define USE_FALLOFFMAP":"",n.falloffAlphaMap&&n.falloff?"#define USE_FALLOFFALPHAMAP":"","#define GAMMA_FACTOR "+b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.reflectivityMap?"#define USE_REFLECTIVITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.ssaoMap?"#define USE_SSAOMAP":"",n.ssaoMap?"#define UV_SS":"",n.clearCoatBumpMap?"#define USE_CLEARCOATBUMPMAP":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.anisotropy?"#define ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.anisotropyRotationMap?"#define USE_ANISOTROPYROTATIONMAP":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(n.numClippingPlanes-n.numClipIntersection),n.iesTextureMapEnabled?"#define USE_IESPROFILE":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.falloffMapEncoding||n.emissiveMapEncoding?Er.encodings_pars_fragment:"",n.mapEncoding?Jn("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?Jn("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Jn("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.falloffMapEncoding?Jn("falloffMapTexelToLinear",n.falloffMapEncoding):"",n.outputEncoding?(g="linearToOutputTexel",y=n.outputEncoding,x=Zn(y),"vec4 "+g+"( vec4 value ) { return LinearTo"+x[0]+x[1]+"; }"):"",n.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",n.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",n.toneMapping!==pe?"#define TONE_MAPPING":"",n.toneMapping!==pe?Er.tonemapping_pars_fragment:"",n.toneMapping!==pe?function(e,t){var r;switch(t){case me:r="Linear";break;case ve:r="Reinhard";break;case ge:r="Uncharted2";break;case ye:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",n.oit?"#define USE_OIT":"",n.isMac?"#define IS_MAC":"",n.transparent?"#define TRANSPARENT":"",n.useSSR?"#define USE_SSR":"","\n"].filter($n).join("\n");for(var P=Br.SupportedMapNames,A="",C="",R="",I={},O=0;O<P.length;O++){var L=P[O],D=r[L+"Slot"];(r[L]||D&&D.texture)&&(D&&!I[D.uvChannel]&&(I[D.uvChannel]=!0),v+="uniform vec4 $SLOT_NAME$UVTexelTransformParams1;\nuniform vec4 $SLOT_NAME$UVTexelTransformParams2;\n".replace(/\$SLOT_NAME\$/g,L),R+=Qn(L,D),A+="uniform sampler2D "+L+";\n",A+=Kn(L,D,!1))}if((0,u.default)(I).length>0){var N="",V="";for(var F in I){var B="uv",U="vUv";if((F=parseInt(F))>0){var k=""+(F+1);U+=k,V+="attribute vec2 "+(B+=k)+";\n"}N+="varying vec2 "+U+";\n",C+=U+" = "+B+";\n"}v+="#define TEXTURE_SLOTS\n"+N+A,m+="#define TEXTURE_SLOTS\n"+N+V}v+=R}s=(s=ei(s=ti(s),n)).replace(/\$INSERT_ADDITIONAL_UV_TRANSFORMS\$/g,C),l=ei(l=ti(l),n),r.isShaderMaterial||(s=ri(s),l=ri(l));var z=m+s,G=v+l,j=qn(i,i.VERTEX_SHADER,z),H=qn(i,i.FRAGMENT_SHADER,G);i.attachShader(M,j),i.attachShader(M,H),void 0!==r.index0AttributeName?i.bindAttribLocation(M,0,r.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(M,0,"position"),i.linkProgram(M);var W,X,q=i.getProgramInfoLog(M),Y=i.getShaderInfoLog(j),Z=i.getShaderInfoLog(H),J=!0,Q=!0;!1===i.getProgramParameter(M,i.LINK_STATUS)?(J=!1,i.getExtension("WEBGL_debug_shaders")&&(console.log("**VERTEX**",z,"----------------------------------------------------------",i.getExtension("WEBGL_debug_shaders").getTranslatedShaderSource(j)),console.log("**FRAGMENT**",G,"----------------------------------------------------------",i.getExtension("WEBGL_debug_shaders").getTranslatedShaderSource(H))),console.error("THREE.WebGLProgram: shader error: ",i.getError(),"gl.VALIDATE_STATUS",i.getProgramParameter(M,i.VALIDATE_STATUS),"gl.getProgramInfoLog",q,Y,Z)):""!==q.trim()?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog() = ",q):""!==Y&&""!==Z||(Q=!1);return Q&&(this.diagnostics={runnable:J,material:r,programLog:q,vertexShader:{log:Y,prefix:m},fragmentShader:{log:Z,prefix:v}}),i.deleteShader(j),i.deleteShader(H),this.getUniforms=function(){return void 0===W&&(W=new Sr(i,M,e)),W},this.getAttributes=function(){return void 0===X&&(X=function(e,t,r){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<i;a++){var o=e.getActiveAttrib(t,a).name;n[o]=e.getAttribLocation(t,o)}return n}(i,M)),X},this.destroy=function(){i.deleteProgram(M),this.program=void 0},(0,f.default)(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Yn++,this.code=t,this.usedTimes=1,this.program=M,this.vertexShader=j,this.fragmentShader=H,this}var ii,ai,oi=!1;function si(e,t){for(var r=[],n={MeshVelocityMaterial:"velocity",MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshCubeMaterial:"cubeEnv",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},i=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","reflectivityMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","ssaoMap","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","clearCoatBumpMap","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","falloff","falloffMap","falloffAlphaMap","transparent","ssrMap","useSSR","anisotropy","anisotropyMap","anisotropyRotationMap"],a=Br.SupportedMapNames,o=0;o<a.length;o++){var s=a[o];i.push(s),i.push(s+"UVChannel"),i.push(s+"UVTexelTransform")}function l(e,t){var r;return e?e.isTexture?r=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=e.texture.encoding):r=mt,r===mt&&t&&(r=gt),r}this.getParameters=function(r,i,a,o,s,u){var c=n[r.type],f=function(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var r=t.maxVertexUniforms,n=Math.floor((r-20)/4);return void 0!==e&&e&&e.isSkinnedMesh&&(n=Math.min(e.skeleton.bones.length,n))<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)"),n}(u),h=e.getPrecision();null!==r.precision&&(h=t.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",h,"instead.");for(var d=e.getCurrentRenderTarget(),p=!!r.anisotropy,m={shaderID:c,precision:h,supportsVertexTextures:t.vertexTextures,outputEncoding:l(d?d.texture:null,e.gammaOutput),mapEncoding:l(r.map,e.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:l(r.envMap,e.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===Se||r.envMap.mapping===Te),emissiveMapEncoding:l(r.emissiveMap,e.gammaInput),falloff:r.falloff,falloffMapEncoding:l(r.falloffMap,e.gammaInput),gradientMap:!!r.gradientMap,combine:r.combine,vertexTangents:(r.normalMap||p)&&r.vertexTangents,anisotropy:p,anisotropyMap:p&&!!r.anisotropyMap,anisotropyRotationMap:p&&!!r.anisotropyRotationMap,ssaoMap:!(!e.ssaoMap||u.isPlanarShadow||r.isGlossyMirrorMaterial||r.transparent),vertexColors:r.vertexColors,fog:!!a,useFog:r.fog,fogExp:a&&a.isFogExp2,flatShading:r.shading===R,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:r.skinning,maxBones:f,useVertexTexture:t.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:o,numClipIntersection:s,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&i.shadows.length>0,shadowMapType:e.shadowMap.type,iesTextureMapEnabled:!0,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:void 0!==r.alphaTest&&r.alphaTest>0,doubleSided:r.side===C,flipSided:r.side===A,depthPacking:void 0!==r.depthPacking&&r.depthPacking,oit:e.transparency===St,isMac:!!e.isMac,transparent:!!r.transparent,useSSR:!!r.ssrEnabled},v=Br.SupportedMapNames,g=0;g<v.length;g++){var y=v[g],x=Br.SupportedMapSlotNames[g];m[y]=!!r[y];var b=r[x];m[y+"UVChannel"]=void 0!==b?b.uvChannel:0,m[y+"UVTexelTransform"]=void 0!==b&&b.uvTexelTransform}return!p||m.vertexTangents||oi||(console.warn("Warning: implicit tangents for anisotropy will be flat shaded. Consider using BufferGeometryUtils.computeTangents().",r),oi=!0),m},this.getProgramCode=function(e,t){var r=[];if(t.shaderID?r.push(t.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var n in e.defines)r.push(n),r.push(e.defines[n]);for(var a=0;a<i.length;a++)r.push(t[i[a]]);return r.join()},this.acquireProgram=function(t,n,i){for(var a,o=0,s=r.length;o<s;o++){var l=r[o];if(l.code===i){++(a=l).usedTimes;break}}return void 0===a&&(a=new ni(e,i,t,n),r.push(a)),a},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function li(e,t,r){var n={};function i(e){var o=e.target,s=n[o.id];null!==s.index&&a(s.index),function(e){for(var t in e)a(e[t])}(s.attributes),o.removeEventListener("dispose",i),delete n[o.id];var l=t.get(o);l.wireframe&&a(l.wireframe),t.delete(o);var u=t.get(s);u.wireframe&&a(u.wireframe),t.delete(s),r.memory.geometries--}function a(r){var n=function(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}(r);void 0!==n&&(e.deleteBuffer(n),function(e){e.isInterleavedBufferAttribute?t.delete(e.data):t.delete(e)}(r))}return{get:function(e){var t,a=e.geometry;return void 0!==n[a.id]?n[a.id]:(a.addEventListener("dispose",i),a.isBufferGeometry?t=a:a.isGeometry&&(void 0===a._bufferGeometry&&(a._bufferGeometry=(new Un).setFromObject(e)),t=a._bufferGeometry),n[a.id]=t,r.memory.geometries++,t)}}}function ui(e,t,r){var n=new li(e,t,r);function i(r,n){var i=r.isInterleavedBufferAttribute?r.data:r,a=t.get(i);void 0===a.__webglBuffer?function(t,r,n){t.__webglBuffer=e.createBuffer(),e.bindBuffer(n,t.__webglBuffer);var i=r.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(n,r.array,i);var a=e.FLOAT,o=r.array;o instanceof Float32Array?a=e.FLOAT:o instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):o instanceof Uint16Array?a=e.UNSIGNED_SHORT:o instanceof Int16Array?a=e.SHORT:o instanceof Uint32Array?a=e.UNSIGNED_INT:o instanceof Int32Array?a=e.INT:o instanceof Int8Array?a=e.BYTE:o instanceof Uint8Array&&(a=e.UNSIGNED_BYTE);t.bytesPerElement=o.BYTES_PER_ELEMENT,t.type=a,t.version=r.version,r.onUploadCallback()}(a,i,n):a.version!==i.version&&function(t,r,n){e.bindBuffer(n,t.__webglBuffer),!1===r.dynamic?e.bufferData(n,r.array,e.STATIC_DRAW):-1===r.updateRange.count?e.bufferSubData(n,0,r.array):0===r.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(n,r.updateRange.offset*r.array.BYTES_PER_ELEMENT,r.array.subarray(r.updateRange.offset,r.updateRange.offset+r.updateRange.count)),r.updateRange.count=0);t.version=r.version}(a,i,n)}return{getAttributeBuffer:function(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer},getAttributeProperties:function(e){return e.isInterleavedBufferAttribute?t.get(e.data):t.get(e)},getWireframeAttribute:function(r){var n=t.get(r);if(void 0!==n.wireframe)return n.wireframe;var a,o=[],s=r.index,l=r.attributes,u=l.position;if(null!==s)for(var c=0,f=(a=s.array).length;c<f;c+=3){var h=a[c+0],d=a[c+1],p=a[c+2];o.push(h,d,d,p,p,h)}else for(c=0,f=(a=l.position.array).length/3-1;c<f;c+=3)h=c+0,d=c+1,p=c+2,o.push(h,d,d,p,p,h);var m=new Sn(new(u.count>65535?Uint32Array:Uint16Array)(o),1);return i(m,e.ELEMENT_ARRAY_BUFFER),n.wireframe=m,m},update:function(t){var r=n.get(t);t.geometry.isGeometry&&r.updateFromObject(t);var a=r.index,o=r.attributes;for(var s in null!==a&&i(a,e.ELEMENT_ARRAY_BUFFER),o)i(o[s],e.ARRAY_BUFFER);var l=r.morphAttributes;for(var s in l)for(var u=l[s],c=0,f=u.length;c<f;c++)i(u[c],e.ARRAY_BUFFER);return r}}}function ci(e,t,r,n,i,a,o){var s=o.memory,l="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;function u(e,t){if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.width=Math.floor(e.width*r),n.height=Math.floor(e.height*r),n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height,e),n}return e}function c(e){return Et.isPowerOfTwo(e.width)&&Et.isPowerOfTwo(e.height)}function f(t){return t===Ce||t===Re||t===Ie?e.NEAREST:e.LINEAR}function h(t){var r=t.target;r.removeEventListener("dispose",h),function(t){var r=n.get(t);if(t.image&&r.__image__webglTextureCube)e.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture)}n.delete(t)}(r),s.textures--}function d(t){var r=t.target;r.removeEventListener("dispose",d),function(t){var r=n.get(t),i=n.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(r.__webglFramebuffer[a]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[a]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);n.delete(t.texture),n.delete(t)}(r),s.textures--}var p=!1,m=!1;function v(t,o){var f=n.get(t);if(t.version>0&&f.__version!==t.version){var d=t.image;if(void 0===d)p||(console.trace("THREE.WebGLRenderer: Texture marked for update but image is undefined",t),p=!0);else{if(!1!==d.complete)return void function(t,n,o){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",h),t.__webglTexture=e.createTexture(),s.textures++);r.activeTexture(e.TEXTURE0+o),r.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment);var f=u(n.image,i.maxTextureSize);(function(e){return e.wrapS!==Pe||e.wrapT!==Pe||e.minFilter!==Ce&&e.minFilter!==Oe})(n)&&!1===c(f)&&(f=function(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.width=Et.nearestPowerOfTwo(e.width),t.height=Et.nearestPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}(f));var d=c(f),p=a(n.format),m=a(n.type);g(e.TEXTURE_2D,n,d);var v,y=n.mipmaps;if(n.isDepthTexture){var x=e.DEPTH_COMPONENT;if(n.type===ze){if(!l)throw new Error("Float Depth Texture only supported in WebGL2.0");x=e.DEPTH_COMPONENT32F}else l&&(x=e.DEPTH_COMPONENT16);n.format===$e&&x===e.DEPTH_COMPONENT&&n.type!==Be&&n.type!==ke&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=Be,m=a(n.type)),n.format===et&&(x=e.DEPTH_STENCIL,n.type!==Xe&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=Xe,m=a(n.type))),r.texImage2D(e.TEXTURE_2D,0,x,f.width,f.height,0,p,m,null)}else if(n.isDataTexture)if(y.length>0&&d){for(var b=0,w=y.length;b<w;b++)v=y[b],r.texImage2D(e.TEXTURE_2D,b,p,v.width,v.height,0,p,m,v.data);n.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,p,f.width,f.height,0,p,m,f.data);else if(n.isCompressedTexture)for(var b=0,w=y.length;b<w;b++)v=y[b],n.format!==Ze&&n.format!==Ye?r.getCompressedTextureFormats().indexOf(p)>-1?r.compressedTexImage2D(e.TEXTURE_2D,b,p,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(e.TEXTURE_2D,b,p,v.width,v.height,0,p,m,v.data);else if(y.length>0&&d){for(var b=0,w=y.length;b<w;b++)v=y[b],r.texImage2D(e.TEXTURE_2D,b,p,p,m,v);n.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,p,p,m,f);n.generateMipmaps&&d&&e.generateMipmap(e.TEXTURE_2D);t.__version=n.version,n.onUpdate&&n.onUpdate(n)}(f,t,o);m||(console.trace("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t),m=!0)}}r.activeTexture(e.TEXTURE0+o),r.bindTexture(e.TEXTURE_2D,f.__webglTexture)}function g(r,o,s){var l;if(s?(e.texParameteri(r,e.TEXTURE_WRAP_S,a(o.wrapS)),e.texParameteri(r,e.TEXTURE_WRAP_T,a(o.wrapT)),e.texParameteri(r,e.TEXTURE_MAG_FILTER,a(o.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,a(o.minFilter))):(e.texParameteri(r,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(r,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o.wrapS===Pe&&o.wrapT===Pe||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o),e.texParameteri(r,e.TEXTURE_MAG_FILTER,f(o.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,f(o.minFilter)),o.minFilter!==Ce&&o.minFilter!==Oe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)),l=t.get("EXT_texture_filter_anisotropic")){if(o.type===ze&&null===t.get("OES_texture_float_linear"))return;if(o.type===Ge&&null===t.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||n.get(o).__currentAnisotropy)&&(e.texParameterf(r,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}}function y(t,i,o,s){var l=a(i.texture.format),u=a(i.texture.type);r.texImage2D(s,0,l,i.width,i.height,0,l,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,s,n.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function x(t,r){e.bindRenderbuffer(e.RENDERBUFFER,t),r.depthBuffer&&!r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):r.depthBuffer&&r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,r.width,r.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function b(t){var r=n.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),v(r.depthTexture,0);var i=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===$e)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(r.depthTexture.format!==et)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(r.__webglFramebuffer,t)}else if(i){r.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=e.createRenderbuffer(),x(r.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),x(r.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}this.setTexture2D=v,this.setTextureCube=function(t,o){var l=n.get(t);if(6===t.image.length)if(t.version>0&&l.__version!==t.version){l.__image__webglTextureCube||(t.addEventListener("dispose",h),l.__image__webglTextureCube=e.createTexture(),s.textures++),r.activeTexture(e.TEXTURE0+o),r.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var f=t&&t.isCompressedTexture,d=t.image[0]&&t.image[0].isDataTexture,p=[],m=0;m<6;m++)p[m]=f||d?d?t.image[m].image:t.image[m]:u(t.image[m],i.maxCubemapSize);var v=c(p[0]),y=a(t.format),x=a(t.type);for(g(e.TEXTURE_CUBE_MAP,t,v),m=0;m<6;m++){var b,w;if(f)for(_=0,M=(w=p[m].mipmaps).length;_<M;_++)b=w[_],t.format!==Ze&&t.format!==Ye?r.getCompressedTextureFormats().indexOf(y)>-1?r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,_,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,_,y,b.width,b.height,0,y,x,b.data);else if(d)if(void 0!==(w=t.image[m].mipmaps)&&0!==w.length)for(var _=0,M=w.length;_<M;_++)b=w[_],r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,_,y,b.width,b.height,0,y,x,b.data);else r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,p[m].width,p[m].height,0,y,x,p[m].data);else r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,y,x,p[m])}t.generateMipmaps&&v&&e.generateMipmap(e.TEXTURE_CUBE_MAP),l.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(e.TEXTURE0+o),r.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){r.activeTexture(e.TEXTURE0+i),r.bindTexture(e.TEXTURE_CUBE_MAP,n.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=n.get(t),a=n.get(t.texture);t.addEventListener("dispose",d),a.__webglTexture=e.createTexture(),s.textures++;var o=!0===t.isWebGLRenderTargetCube,l=c(t);if(o){i.__webglFramebuffer=[];for(var u=0;u<6;u++)i.__webglFramebuffer[u]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(o){for(r.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),g(e.TEXTURE_CUBE_MAP,t.texture,l),u=0;u<6;u++)y(i.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);t.texture.generateMipmaps&&l&&e.generateMipmap(e.TEXTURE_CUBE_MAP),r.bindTexture(e.TEXTURE_CUBE_MAP,null)}else r.bindTexture(e.TEXTURE_2D,a.__webglTexture),g(e.TEXTURE_2D,t.texture,l),y(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&l&&e.generateMipmap(e.TEXTURE_2D),r.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&b(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(i.generateMipmaps&&c(t)&&i.minFilter!==Ce&&i.minFilter!==Oe){var a=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=n.get(i).__webglTexture;r.bindTexture(a,o),e.generateMipmap(a),r.bindTexture(a,null)}}}function fi(){xn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function hi(e){console.log("THREE.WebGLRenderer",x);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=[];this.opaqueObjects=[];var c=-1;this.transparentObjects=[];var f=-1,h=new Float32Array(8),d=this.sprites=[],p=[],m=null,v=null,g=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.ssaoMapIntensity=1,this.ssaoMap=null,this.physicallyCorrectLights=!1,this.toneMapping=me,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.ditherScale=1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.autoResizeTextures=!1,this.ssrMap=null,this.ssrNumMips=0,this.ssrBufferScale=new Pt;var y,S=this,T=null,E=null,P=null,I=-1,L="",D=null,fe=new Nt,he=null,de=new Nt,pe=0,ve=new Pr(0),ge=0,ye=t.width,xe=t.height,be=1,we=new Nt(0,0,ye,xe),_e=!1,Me=new Nt(0,0,ye,xe),Se=new nn,Te=new function(){var e=this,t=null,r=0,n=!1,i=!1,a=new rn,o=new tn,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(t,r,n,i){var l=null!==t?t.length:0,u=null;if(0!==l){if(u=s.value,!0!==i||null===u){var c=n+4*l,f=r.matrixWorldInverse;o.getNormalMatrix(f),(null===u||u.length<c)&&(u=new Float32Array(c));for(var h=0,d=n;h!==l;++h,d+=4)a.copy(t[h]).applyMatrix4(f,o),a.normal.toArray(u,d),u[d+3]=a.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=l,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,a){var o=0!==e.length||i||0!==r||n;return n=i,t=u(e,a,0),r=e.length,o},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,l()},this.setState=function(e,a,o,c,f,h){if(!n||null===e||0===e.length||i&&!o)i?u(null):l();else{var d=i?0:r,p=4*d,m=f.clippingState||null;s.value=m,m=u(e,c,p,h);for(var v=0;v!==p;++v)m[v]=t[v];f.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=d}}},Ke=!1,ct=!1,ft=new en,mt=new kt,vt=new Pt,gt=new Ut,yt=new kt,xt=new kt,bt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],spotIesTextureMap:[],spotIesTextureMapFlag:[],pointIesTextureMap:[],pointIesTextureMapFlag:[],shadows:[]},wt={calls:0,vertices:0,faces:0,points:0};this.info={render:wt,memory:{geometries:0,textures:0},programs:null};try{var _t={alpha:n,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l};if(null===(y=r||t.getContext("webgl",_t)||t.getContext("experimental-webgl",_t)))throw null!==t.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===y.getShaderPrecisionFormat&&(y.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),t.addEventListener("webglcontextlost",qt,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var Mt=new function(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=e.getExtension("WEBGL_compressed_texture_etc1");break;default:n=e.getExtension(r)}return null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=n,n}}}(y);this.transparency=Tt,this.oitMode=2,Mt.get("WEBGL_depth_texture"),Mt.get("OES_texture_float"),Mt.get("OES_texture_float_linear"),Mt.get("OES_texture_half_float"),Mt.get("OES_texture_half_float_linear"),Mt.get("OES_standard_derivatives"),Mt.get("ANGLE_instanced_arrays"),Mt.get("OES_element_index_uint")&&(Un.MaxIndex=4294967296);var St=new function(e,t,r){var n;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a=void 0!==r.precision?r.precision:"highp",o=i(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);var s=!0===r.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth"),l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),h=e.getParameter(e.MAX_VERTEX_ATTRIBS),d=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),p=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=u>0,g=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==n)return n;var r=t.get("EXT_texture_filter_anisotropic");return n=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:s,maxTextures:l,maxVertexTextures:u,maxTextureSize:c,maxCubemapSize:f,maxAttributes:h,maxVertexUniforms:d,maxVaryings:p,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:g,floatVertexTextures:v&&g}}(y,Mt,e),At=new function(e,t,r){var n=new function(){var t=!1,r=new Nt,n=null,i=new Nt;return{setMask:function(r){n===r||t||(e.colorMask(r,r,r,r),n=r)},setLocked:function(e){t=e},setClear:function(t,n,a,o,s){!0===s&&(t*=o,n*=o,a*=o),r.set(t,n,a,o),!1===i.equals(r)&&(e.clearColor(t,n,a,o),i.copy(r))},reset:function(){t=!1,n=null,i.set(0,0,0,1)}}},i=new function(){var t=!1,r=null,n=null,i=null;return{setTest:function(t){t?H(e.DEPTH_TEST):W(e.DEPTH_TEST)},setMask:function(n){r===n||t||(e.depthMask(n),r=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case ne:e.depthFunc(e.NEVER);break;case ie:e.depthFunc(e.ALWAYS);break;case ae:e.depthFunc(e.LESS);break;case oe:e.depthFunc(e.LEQUAL);break;case se:e.depthFunc(e.EQUAL);break;case le:e.depthFunc(e.GEQUAL);break;case ue:e.depthFunc(e.GREATER);break;case ce:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,r=null,n=null,i=null}}},a=new function(){var t=!1,r=null,n=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(t){t?H(e.STENCIL_TEST):W(e.STENCIL_TEST)},setMask:function(n){r===n||t||(e.stencilMask(n),r=n)},setFunc:function(t,r,o){n===t&&i===r&&a===o||(e.stencilFunc(t,r,o),n=t,i=r,a=o)},setOp:function(t,r,n){o===t&&s===r&&l===n||(e.stencilOp(t,r,n),o=t,s=r,l=n)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,r=null,n=null,i=null,a=null,o=null,s=null,l=null,u=null}}},o=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=new Uint8Array(o),l=new Uint8Array(o),u=new Uint8Array(o),c={},f=null,h=null,d=null,p=null,m=null,v=null,g=null,y=null,x=!1,M=null,S=null,T=null,E=null,P=null,A=null,C=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),R=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),I=parseFloat(R)>=1,O=null,L={},D=new Nt,z=new Nt;function G(t,r,n){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<n;o++)e.texImage2D(r+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return a}var j={};function H(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function W(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}function X(t,n,i,a,o,s,l,u){t!==N?H(e.BLEND):W(e.BLEND),t===h&&u===x||(t===F?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===B?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===U?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE_MINUS_DST_ALPHA,e.ONE)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),h=t,x=u),t===k?(o=o||n,s=s||i,l=l||a,n===d&&o===v||(e.blendEquationSeparate(r(n),r(o)),d=n,v=o),i===p&&a===m&&s===g&&l===y||(e.blendFuncSeparate(r(i),r(a),r(s),r(l)),p=i,m=a,g=s,y=l)):(d=null,p=null,m=null,v=null,g=null,y=null)}function q(e){i.setFunc(e)}function Y(t){M!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),M=t)}function Z(t){t!==b?(H(e.CULL_FACE),t!==S&&(t===w?e.cullFace(e.BACK):t===_?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):W(e.CULL_FACE),S=t}function J(t){void 0===t&&(t=e.TEXTURE0+C-1),O!==t&&(e.activeTexture(t),O=t)}return j[e.TEXTURE_2D]=G(e.TEXTURE_2D,e.TEXTURE_2D,1),j[e.TEXTURE_CUBE_MAP]=G(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:n,depth:i,stencil:a},init:function(){n.setClear(0,0,0,1),i.setClear(1),a.setClear(0),H(e.DEPTH_TEST),q(oe),Y(!1),Z(w),H(e.CULL_FACE),H(e.BLEND),X(V)},initAttributes:function(){for(var e=0,t=s.length;e<t;e++)s[e]=0},enableAttribute:function(r){s[r]=1,0===l[r]&&(e.enableVertexAttribArray(r),l[r]=1),0!==u[r]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(r,0),u[r]=0)},enableAttributeAndDivisor:function(t,r,n){s[t]=1,0===l[t]&&(e.enableVertexAttribArray(t),l[t]=1),u[t]!==r&&(n.vertexAttribDivisorANGLE(t,r),u[t]=r)},disableUnusedAttributes:function(){for(var t=0,r=l.length;t!==r;++t)l[t]!==s[t]&&(e.disableVertexAttribArray(t),l[t]=0)},enable:H,disable:W,getCompressedTextureFormats:function(){if(null===f&&(f=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var r=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),n=0;n<r.length;n++)f.push(r[n]);return f},setBlending:X,setColorWrite:function(e){n.setMask(e)},setDepthTest:function(e){i.setTest(e)},setDepthWrite:function(e){i.setMask(e)},setDepthFunc:q,setStencilTest:function(e){a.setTest(e)},setStencilWrite:function(e){a.setMask(e)},setStencilFunc:function(e,t,r){a.setFunc(e,t,r)},setStencilOp:function(e,t,r){a.setOp(e,t,r)},setFlipSided:Y,setCullFace:Z,setLineWidth:function(t){t!==T&&(I&&e.lineWidth(t),T=t)},setPolygonOffset:function(t,r,n){t?(H(e.POLYGON_OFFSET_FILL),E===r&&P===n||(e.polygonOffset(r,n),E=r,P=n)):W(e.POLYGON_OFFSET_FILL)},getScissorTest:function(){return A},setScissorTest:function(t){A=t,t?H(e.SCISSOR_TEST):W(e.SCISSOR_TEST)},activeTexture:J,bindTexture:function(t,r){null===O&&J();var n=L[O];void 0===n&&(n={type:void 0,texture:void 0},L[O]=n),n.type===t&&n.texture===r||(e.bindTexture(t,r||j[t]),n.type=t,n.texture=r)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(e)}},scissor:function(t){!1===D.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),D.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){for(var t=0;t<l.length;t++)1===l[t]&&(e.disableVertexAttribArray(t),l[t]=0);c={},f=null,O=null,L={},h=null,M=null,S=null,n.reset(),i.reset(),a.reset()}}}(y,Mt,lr),Ct=new function(){var e={};return{get:function(t){var r=t.uuid,n=e[r];return void 0===n&&(n={},e[r]=n),n},delete:function(t){delete e[t.uuid]},clear:function(){e={}}}},Rt=new ci(y,Mt,At,Ct,St,lr,this.info),It=new ui(y,Ct,this.info),Ot=new si(this,St),Lt=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new Ut,color:new Pr,shadow:!1,shadowBias:0,shadowRadius:1,shadowSpreadAngle:0,shadowMapSize:new Pt,shadowCameraParams:new Ut};break;case"SpotLight":r={position:new Ut,direction:new Ut,color:new Pr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Pt,shadowCameraParams:new Ut};break;case"PointLight":r={position:new Ut,color:new Pr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Pt};break;case"HemisphereLight":r={direction:new Ut,skyColor:new Pr,groundColor:new Pr};break;case"RectAreaLight":r={color:new Pr,position:new Ut,halfWidth:new Ut,halfHeight:new Ut}}return e[t.id]=r,r}}};this.info.programs=Ot.programs;var Dt=new function(e,t,r){var n;return{setMode:function(e){n=e},render:function(t,i){e.drawArrays(n,t,i),r.calls++,r.vertices+=i,n===e.TRIANGLES&&(r.faces+=i/3)},renderInstances:function(i){var a=t.get("ANGLE_instanced_arrays");if(null!==a){var o=i.attributes.position,s=0;o.isInterleavedBufferAttribute?(s=o.data.count,a.drawArraysInstancedANGLE(n,0,s,i.maxInstancedCount)):(s=o.count,a.drawArraysInstancedANGLE(n,0,s,i.maxInstancedCount)),r.calls++,r.vertices+=s*i.maxInstancedCount,n===e.TRIANGLES&&(r.faces+=i.maxInstancedCount*s/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}(y,Mt,wt),Vt=new function(e,t,r){var n,i,a;return{setMode:function(e){n=e},setIndex:function(r){r.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(i=e.UNSIGNED_INT,a=4):r.array instanceof Uint16Array?(i=e.UNSIGNED_SHORT,a=2):(i=e.UNSIGNED_BYTE,a=1)},render:function(t,o){e.drawElements(n,o,i,t*a),r.calls++,r.vertices+=o,n===e.TRIANGLES&&(r.faces+=o/3)},renderInstances:function(o,s,l){var u=t.get("ANGLE_instanced_arrays");null!==u?(u.drawElementsInstancedANGLE(n,l,i,s*a,o.maxInstancedCount),r.calls++,r.vertices+=l*o.maxInstancedCount,n===e.TRIANGLES&&(r.faces+=o.maxInstancedCount*l/3)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}(y,Mt,wt),Ft=(new Xn(-1,1,1,-1,0,1),new Wn,new kn(new Gn(2,2),new Mn({depthTest:!1,depthWrite:!1,fog:!1})),Ir.cube);new kn(new zn(5,5,5),new Fr({uniforms:Ft.uniforms,vertexShader:Ft.vertexShader,fragmentShader:Ft.fragmentShader,side:A,depthTest:!1,depthWrite:!1,fog:!1}));function Bt(){return null===E?be:1}function zt(){At.init(),At.scissor(fe.copy(we).multiplyScalar(be)),At.viewport(de.copy(Me).multiplyScalar(be)),At.buffers.color.setClear(ve.r,ve.g,ve.b,ge,s)}function Gt(){T=null,D=null,L="",I=-1,At.reset()}zt(),this.context=y,this.capabilities=St,this.extensions=Mt,this.properties=Ct,this.state=At;var jt=new an(this,bt,It,St);this.shadowMap=jt;var Ht,Wt=new Dr(this,d),Xt=new Lr(this,p);function qt(e){e.preventDefault(),Gt(),zt(),Ct.clear()}function Yt(e){var t=e.target;t.removeEventListener("dispose",Yt),function(e){Zt(e),Ct.delete(e)}(t)}function Zt(e){var t=Ct.get(e).program;e.program=void 0,void 0!==t&&Ot.releaseProgram(t)}function Jt(e,t){return Math.abs(t[0])-Math.abs(e[0])}function Qt(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Kt(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function $t(e,t,r,n,i){if(r.isMultiMaterial)return console.warn("Attempted to render MultiMaterial itself... skipping. This is probably caused by a MultiMaterial containing a MultiMaterial."),void console.log("Material provided for render:",r);var a,o;r.transparent?(a=S.transparentObjects,o=++f):(a=S.opaqueObjects,o=++c);var s=a[o];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=r,s.z=gt.z,s.group=i):(s={id:e.id,object:e,geometry:t,material:r,z:gt.z,group:i},a.push(s))}function er(e){if(!Se.intersectsSphere(e))return!1;var t=Te.numPlanes;if(0===t)return!0;var r=S.clippingPlanes,n=e.center,i=-e.radius,a=0;do{if(r[a].distanceToPoint(n)<i)return!1}while(++a!==t);return!0}function tr(e,t,r,n,i){for(var a=0,o=e.length;a<o;a++){var s=e[a],l=s.object;if(!i||!l||i(l,s.material)){var u=s.material;S.materialOverrider?u=S.materialOverrider(u):void 0!==n&&(u=n);var c=s.geometry,f=s.group;if(l.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,l.matrixWorld),l.normalMatrix.getNormalMatrix(l.modelViewMatrix),l.onBeforeRender(S,t,r,c,u,f),l.isImmediateRenderObject){var h=l.isMesh&&l.matrixWorld.determinant()<0;rr(u,h);var d=nr(r,t.fog,u,l);L="",l.render(function(e){S.renderBufferImmediate(e,d,u)})}else S.renderBufferDirect(r,t.fog,c,u,l,f);l.onAfterRender(S,t,r,c,u,f)}}}function rr(e,t){e.side===C?At.disable(y.CULL_FACE):At.enable(y.CULL_FACE);var r=e.side===A;t&&(r=!r),At.setFlipSided(r),!0===e.transparent?At.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):At.setBlending(N),At.setDepthFunc(e.depthFunc),At.setDepthTest(e.depthTest),At.setDepthWrite(e.depthWrite),At.setColorWrite(e.colorWrite),At.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function nr(e,t,r,n){pe=0;var i=Ct.get(r);if(Ke&&(ct||e!==D)){var a=e===D&&r.id===I;Te.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,i,a)}!1===r.needsUpdate&&(void 0===i.program?r.needsUpdate=!0:r.fog&&i.fog!==t?r.needsUpdate=!0:r.lights&&i.lightsHash!==bt.hash?r.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===Te.numPlanes&&i.numIntersection===Te.numIntersection||(r.needsUpdate=!0)),r.needsUpdate&&(!function(e,t,r){var n=Ct.get(e),i=Ot.getParameters(e,bt,t,Te.numPlanes,Te.numIntersection,r),a=Ot.getProgramCode(e,i),o=n.program,s=!0;if(void 0===o)e.addEventListener("dispose",Yt);else if(o.code!==a)Zt(e);else{if(void 0!==i.shaderID)return;s=!1}if(s){if(i.shaderID){var l=Ir[i.shaderID];n.__webglShader={name:e.type,uniforms:Tr.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else n.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=n.__webglShader,o=Ot.acquireProgram(e,i,a),n.program=o,e.program=o}var u=o.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var c=0;c<S.maxMorphTargets;c++)u["morphTarget"+c]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,c=0;c<S.maxMorphNormals;c++)u["morphNormal"+c]>=0&&e.numSupportedMorphNormals++;var f=n.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=Te.numPlanes,n.numIntersection=Te.numIntersection,f.clippingPlanes=Te.uniform),n.fog=t,n.lightsHash=bt.hash,e.lights&&(f.ambientLightColor.value=bt.ambient,f.directionalLights.value=bt.directional,f.spotLights.value=bt.spot,f.rectAreaLights.value=bt.rectArea,f.pointLights.value=bt.point,f.hemisphereLights.value=bt.hemi,f.spotIesTextureMap.value=bt.spotIesTextureMap,f.spotIesTextureMapFlag.value=bt.spotIesTextureMapFlag,f.pointIesTextureMap.value=bt.pointIesTextureMap,f.pointIesTextureMapFlag.value=bt.pointIesTextureMapFlag,f.directionalShadowMap.value=bt.directionalShadowMap,f.directionalShadowMatrix.value=bt.directionalShadowMatrix,f.spotShadowMap.value=bt.spotShadowMap,f.spotShadowMatrix.value=bt.spotShadowMatrix,f.pointShadowMap.value=bt.pointShadowMap,f.pointShadowMatrix.value=bt.pointShadowMatrix);var h=n.program.getUniforms(),d=Sr.seqWithValue(h.seq,f);n.uniformsList=d}(r,t,n),r.needsUpdate=!1);var o,s,l=!1,u=!!r.forceRefreshMaterial,c=!1,f=i.program,h=f.getUniforms(),d=i.__webglShader.uniforms;if(f.id!==T&&(y.useProgram(f.program),T=f.id,l=!0,u=!0,c=!0),r.id!==I&&(I=r.id,u=!0),l||e!==D){if(h.set(y,e,"projectionMatrix"),St.logarithmicDepthBuffer&&h.setValue(y,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==D&&(D=e,u=!0,c=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var p=h.map.cameraPosition;void 0!==p&&p.setValue(y,gt.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&h.setValue(y,"viewMatrix",e.matrixWorldInverse),h.set(y,S,"toneMappingExposure"),h.set(y,S,"toneMappingWhitePoint"),h.set(y,S,"ditherScale")}if(h.set(y,S,"oitMode"),h.setValue(y,"cameraNearFar",vt.set(e.near,e.far)),h.setValue(y,"windowSize",S.effectComposerSize||vt.set(S.getSize().width,S.getSize().height)),h.setValue(y,"lqFallback",S.drawingMirror||S.lqFallback),r.skinning){h.setOptional(y,n,"bindMatrix"),h.setOptional(y,n,"bindMatrixInverse");var m=n.skeleton;m&&(St.floatVertexTextures&&m.useVertexTexture?(h.set(y,m,"boneTexture"),h.set(y,m,"boneTextureWidth"),h.set(y,m,"boneTextureHeight")):h.setOptional(y,m,"boneMatrices"))}return h.setOptional(y,S,"ssrMap"),h.setOptional(y,S,"ssrNumMips"),h.setOptional(y,S,"ssrBufferScale"),u&&(r.lights&&(s=c,(o=d).ambientLightColor.needsUpdate=s,o.directionalLights.needsUpdate=s,o.pointLights.needsUpdate=s,o.spotLights.needsUpdate=s,o.rectAreaLights.needsUpdate=s,o.hemisphereLights.needsUpdate=s),t&&r.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(d,t),(r.isMeshBasicMaterial||r.isMeshLambertMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.isMeshDepthMaterial||r.isMeshVelocityMaterial||r.isMeshNormalMaterial||r.isMeshCubeMaterial)&&function(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color;for(var r=["skip_map","skip_alphaMap","skip_bumpMap","skip_normalMap","skip_displacementMap"],n=0;n<r.length;n++){var i=r[n];e[i]&&(e[i].value=!!t[i])}t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity);var a,o=Br.SupportedMapNames,s=Br.SupportedMapSlotNames,l=Br.SupportedMapUVTexelNames;if(!t.usedSlots||t.usedSlotsVersion!=t.version){t.usedSlots=[];for(var n=0,u=o.length;n<u;n++){var c=o[n],f=s[n],h=t[f];t.usedSlots.push({index:n,mapUniform:e[c],uvTexelUniform1:e[l[n]+"1"],uvTexelUniform2:e[l[n]+"2"]})}t.usedSlotsVersion=t.version}for(var d=0,p=t.usedSlots.length;d<p;d++){var m=t.usedSlots[d],n=m.index,c=o[n],f=s[n],h=t[f];if(h){if(m.mapUniform.value=h.texture,h.texture&&m.uvTexelUniform1&&(h.uvTransform&&(m.uvTexelUniform1.value.set(h.uvRepeat.x,h.uvRepeat.y,h.uvOffset.x,h.uvOffset.y),m.uvTexelUniform2.value.z=h.uvRotation),h.texelTransform)){var v=h.getFlattenedTexelTransform();m.uvTexelUniform2.value.x=v.texelScale,m.uvTexelUniform2.value.y=v.texelOffset}}else t[c]&&(e[c].value=t[c])}t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity);t.aoMap&&(e.aoMapIntensity.value=t.aoMapIntensity);t.map?a=t.map:t.specularMap?a=t.specularMap:t.displacementMap?a=t.displacementMap:t.normalMap?a=t.normalMap:t.bumpMap?a=t.bumpMap:t.roughnessMap?a=t.roughnessMap:t.metalnessMap?a=t.metalnessMap:t.alphaMap?a=t.alphaMap:t.emissiveMap&&(a=t.emissiveMap);if(void 0!==a){a.isWebGLRenderTarget&&(a=a.texture);var g=a.offset,y=a.repeat;e.offsetRepeat.value.set(g.x,g.y,y.x,y.y)}e.envMap.value=t.envMap,t.envMapIntensity&&(e.envMapIntensity.value=t.envMapIntensity);e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.alphaTest.value=t.alphaTest}(d,r),r.isLineBasicMaterial?ir(d,r):r.isLineDashedMaterial?(ir(d,r),function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(d,r)):r.isPointsMaterial?function(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*be,e.scale.value=.5*xe,e.map.value=t.map,null!==t.map){var r=t.map.offset,n=t.map.repeat;e.offsetRepeat.value.set(r.x,r.y,n.x,n.y)}}(d,r):r.isMeshCubeMaterial?function(e,t){e.roughness.value=t.roughness,e.opacity.value=t.opacity,e.envMapIntensity.value=t.envMapIntensity}(d,r):r.isMeshLambertMaterial?function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(d,r):r.isMeshToonMaterial?function(e,t){ar(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(d,r):r.isMeshPhongMaterial?ar(d,r):r.isMeshPhysicalMaterial?function(e,t){e.falloffDiffuse.value=t.falloffColor,t.falloffMap&&(e.falloffMap.value=t.falloffMap);e.falloffOpacity.value=t.falloffOpacity,t.falloffAlphaMap&&(e.falloffAlphaMap.value=t.falloffAlphaMap);e.anisotropy.value=t.anisotropy,t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap);e.anisotropyRotation.value=t.anisotropyRotation,t.anisotropyRotationMap&&(e.anisotropyRotationMap.value=t.anisotropyRotationMap);e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,e.clearCoatBumpScale.value=t.clearCoatBumpScale,t.clearCoatBumpMap&&(e.clearCoatBumpMap.value=t.clearCoatBumpMap);or(e,t),sr(e,t)}(d,r):r.isMeshStandardMaterial?or(d,r):r.isMeshVelocityMaterial?(d.currentProjectionViewMatrix.value=r.currentProjectionViewMatrix,d.previousProjectionViewMatrix.value=r.previousProjectionViewMatrix):r.isMeshDepthMaterial||r.isMeshNormalMaterial&&function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale);t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));sr(e,t)}(d,r),r.displacementMap&&(d.displacementMap.value=r.displacementMap,d.displacementScale.value=r.displacementScale,d.displacementBias.value=r.displacementBias),void 0!==d.ltcMat&&(d.ltcMat.value=Rr.LTC_MAT_TEXTURE),void 0!==d.ltcMag&&(d.ltcMag.value=Rr.LTC_MAG_TEXTURE),Sr.upload(y,i.uniformsList,d,S)),h.set(y,n,"modelViewMatrix"),h.set(y,n,"normalMatrix"),h.setValue(y,"modelMatrix",n.matrixWorld),h.setValue(y,"modelMatrixPrev",n.matrixWorldPrevious),h.setValue(y,"modelMatrixInverse",n.matrixWorldInverse),f}function ir(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function ar(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale))}function or(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,S.ssaoMap&&(e.ssaoMap.value=S.ssaoMap,e.ssaoMapIntensity.value=S.ssaoMapIntensity),t.specularMap&&(e.specularMap.value=t.specularMap),t.reflectivityMap&&(e.reflectivityMap.value=t.reflectivityMap),t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function sr(e,t){e.triplanarScale.value.copy(t.triplanarScale),e.triplanarExponent.value=t.triplanarExponent,e.triplanarEnabledMaps.value[0]=t.triplanarEnabledMap?1:0,e.triplanarEnabledMaps.value[1]=t.triplanarEnabledNormalMap?1:0,e.triplanarEnabledMaps.value[2]=t.triplanarEnabledBumpMap?1:0,e.triplanarEnabledMaps.value[3]=t.triplanarEnabledRoughnessMap?1:0}function lr(e){var t;if(e===Ee)return y.REPEAT;if(e===Pe)return y.CLAMP_TO_EDGE;if(e===Ae)return y.MIRRORED_REPEAT;if(e===Ce)return y.NEAREST;if(e===Re)return y.NEAREST_MIPMAP_NEAREST;if(e===Ie)return y.NEAREST_MIPMAP_LINEAR;if(e===Oe)return y.LINEAR;if(e===Le)return y.LINEAR_MIPMAP_NEAREST;if(e===De)return y.LINEAR_MIPMAP_LINEAR;if(e===Ne)return y.UNSIGNED_BYTE;if(e===je)return y.UNSIGNED_SHORT_4_4_4_4;if(e===He)return y.UNSIGNED_SHORT_5_5_5_1;if(e===We)return y.UNSIGNED_SHORT_5_6_5;if(e===Ve)return y.BYTE;if(e===Fe)return y.SHORT;if(e===Be)return y.UNSIGNED_SHORT;if(e===Ue)return y.INT;if(e===ke)return y.UNSIGNED_INT;if(e===ze)return y.FLOAT;if(e===Ge&&null!==(t=Mt.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(e===qe)return y.ALPHA;if(e===Ye)return y.RGB;if(e===Ze)return y.RGBA;if(e===Je)return y.LUMINANCE;if(e===Qe)return y.LUMINANCE_ALPHA;if(e===$e)return y.DEPTH_COMPONENT;if(e===et)return y.DEPTH_STENCIL;if(e===z)return y.FUNC_ADD;if(e===G)return y.FUNC_SUBTRACT;if(e===j)return y.FUNC_REVERSE_SUBTRACT;if(e===X)return y.ZERO;if(e===q)return y.ONE;if(e===Y)return y.SRC_COLOR;if(e===Z)return y.ONE_MINUS_SRC_COLOR;if(e===J)return y.SRC_ALPHA;if(e===Q)return y.ONE_MINUS_SRC_ALPHA;if(e===K)return y.DST_ALPHA;if(e===$)return y.ONE_MINUS_DST_ALPHA;if(e===ee)return y.DST_COLOR;if(e===te)return y.ONE_MINUS_DST_COLOR;if(e===re)return y.SRC_ALPHA_SATURATE;if((e===tt||e===rt||e===nt||e===it)&&null!==(t=Mt.get("WEBGL_compressed_texture_s3tc"))){if(e===tt)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===rt)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===nt)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===it)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===at||e===ot||e===st||e===lt)&&null!==(t=Mt.get("WEBGL_compressed_texture_pvrtc"))){if(e===at)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===ot)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===st)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===lt)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===ut&&null!==(t=Mt.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===H||e===W)&&null!==(t=Mt.get("EXT_blend_minmax"))){if(e===H)return t.MIN_EXT;if(e===W)return t.MAX_EXT}return e===Xe&&null!==(t=Mt.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return y},this.getContextAttributes=function(){return y.getContextAttributes()},this.forceContextLoss=function(){Mt.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return St.getMaxAnisotropy()},this.getPrecision=function(){return St.precision},this.getPixelRatio=function(){return be},this.setPixelRatio=function(e){void 0!==e&&(be=e,this.setSize(Me.z,Me.w,!1))},this.getSize=function(){return{width:ye,height:xe}},this.setSize=function(e,r,n){ye=e,xe=r,t.width=e*be,t.height=r*be,!1!==n&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r)},this.setViewport=function(e,t,r,n){At.viewport(Me.set(e,t,r,n))},this.setScissor=function(e,t,r,n){At.scissor(we.set(e,t,r,n))},this.setScissorTest=function(e){At.setScissorTest(_e=e)},this.getClearColor=function(){return ve},this.setClearColor=function(e,t){ve.set(e),ge=void 0!==t?t:1,At.buffers.color.setClear(ve.r,ve.g,ve.b,ge,s)},this.getClearAlpha=function(){return ge},this.setClearAlpha=function(e){ge=e,At.buffers.color.setClear(ve.r,ve.g,ve.b,ge,s)},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=y.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=y.DEPTH_BUFFER_BIT),(void 0===r||r)&&(n|=y.STENCIL_BUFFER_BIT),y.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,r,n){this.setRenderTarget(e),this.clear(t,r,n)},this.resetGLState=Gt,this.dispose=function(){this.transparentObjects=[],f=-1,this.opaqueObjects=[],c=-1,t.removeEventListener("webglcontextlost",qt,!1)},this.renderBufferImmediate=function(e,t,r){At.initAttributes();var n=Ct.get(e);e.hasPositions&&!n.position&&(n.position=y.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=y.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=y.createBuffer()),e.hasColors&&!n.color&&(n.color=y.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(y.bindBuffer(y.ARRAY_BUFFER,n.position),y.bufferData(y.ARRAY_BUFFER,e.positionArray,y.DYNAMIC_DRAW),At.enableAttribute(i.position),y.vertexAttribPointer(i.position,3,y.FLOAT,!1,0,0)),e.hasNormals){if(y.bindBuffer(y.ARRAY_BUFFER,n.normal),!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&!r.isMeshNormalMaterial&&r.shading===R)for(var a=0,o=3*e.count;a<o;a+=9){var s=e.normalArray,l=(s[a+0]+s[a+3]+s[a+6])/3,u=(s[a+1]+s[a+4]+s[a+7])/3,c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=l,s[a+1]=u,s[a+2]=c,s[a+3]=l,s[a+4]=u,s[a+5]=c,s[a+6]=l,s[a+7]=u,s[a+8]=c}y.bufferData(y.ARRAY_BUFFER,e.normalArray,y.DYNAMIC_DRAW),At.enableAttribute(i.normal),y.vertexAttribPointer(i.normal,3,y.FLOAT,!1,0,0)}e.hasUvs&&r.map&&(y.bindBuffer(y.ARRAY_BUFFER,n.uv),y.bufferData(y.ARRAY_BUFFER,e.uvArray,y.DYNAMIC_DRAW),At.enableAttribute(i.uv),y.vertexAttribPointer(i.uv,2,y.FLOAT,!1,0,0)),e.hasColors&&r.vertexColors!==O&&(y.bindBuffer(y.ARRAY_BUFFER,n.color),y.bufferData(y.ARRAY_BUFFER,e.colorArray,y.DYNAMIC_DRAW),At.enableAttribute(i.color),y.vertexAttribPointer(i.color,3,y.FLOAT,!1,0,0)),At.disableUnusedAttributes(),y.drawArrays(y.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,n,i,a){rr(n,i.isMesh&&i.matrixWorld.determinant()<0);var o=nr(e,t,n,i),s=!1,l=r.id+"_"+o.id+"_"+n.wireframe;l!==L&&(L=l,s=!0);var u=i.morphTargetInfluences;if(void 0!==u){for(var c=[],f=0,d=u.length;f<d;f++){var p=u[f];c.push([p,f])}c.sort(Jt),c.length>8&&(c.length=8);var m=r.morphAttributes;for(f=0,d=c.length;f<d;f++){p=c[f];if(h[f]=p[0],0!==p[0]){var v=p[1];!0===n.morphTargets&&m.position&&r.addAttribute("morphTarget"+f,m.position[v]),!0===n.morphNormals&&m.normal&&r.addAttribute("morphNormal"+f,m.normal[v])}else!0===n.morphTargets&&r.removeAttribute("morphTarget"+f),!0===n.morphNormals&&r.removeAttribute("morphNormal"+f)}f=c.length;for(var g=h.length;f<g;f++)h[f]=0;o.getUniforms().setValue(y,"morphTargetInfluences",h),s=!0}v=r.index;var x,b=r.attributes.position,w=1;!0===n.wireframe&&(v=It.getWireframeAttribute(r),w=2),null!==v?(x=Vt).setIndex(v):x=Dt,s&&(!function(e,t,r,n){var i;if(r&&r.isInstancedBufferGeometry&&null===(i=Mt.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===n&&(n=0);At.initAttributes();var a=r.attributes,o=t.getAttributes(),s=e.defaultAttributeValues;for(var l in o){var u=o[l];if(u>=0){var c=a[l];if(void 0!==c){var f=c.normalized,h=c.itemSize,d=It.getAttributeProperties(c),p=d.__webglBuffer,m=d.type,v=d.bytesPerElement;if(c.isInterleavedBufferAttribute){var g=c.data,x=g.stride,b=c.offset;g&&g.isInstancedInterleavedBuffer?(At.enableAttributeAndDivisor(u,g.meshPerAttribute,i),void 0===r.maxInstancedCount&&(r.maxInstancedCount=g.meshPerAttribute*g.count)):At.enableAttribute(u),y.bindBuffer(y.ARRAY_BUFFER,p),y.vertexAttribPointer(u,h,m,f,x*v,(n*x+b)*v)}else c.isInstancedBufferAttribute?(At.enableAttributeAndDivisor(u,c.meshPerAttribute,i),void 0===r.maxInstancedCount&&(r.maxInstancedCount=c.meshPerAttribute*c.count)):At.enableAttribute(u),y.bindBuffer(y.ARRAY_BUFFER,p),y.vertexAttribPointer(u,h,m,f,0,n*h*v)}else if(void 0!==s){var w=s[l];if(void 0!==w)switch(w.length){case 2:y.vertexAttrib2fv(u,w);break;case 3:y.vertexAttrib3fv(u,w);break;case 4:y.vertexAttrib4fv(u,w);break;default:y.vertexAttrib1fv(u,w)}}}}At.disableUnusedAttributes()}(n,o,r),null!==v&&y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,It.getAttributeBuffer(v)));var _=0;null!==v?_=v.count:void 0!==b&&(_=b.count);var M=r.drawRange.start*w,S=r.drawRange.count*w,T=null!==a?a.start*w:0,E=null!==a?a.count*w:1/0,P=Math.max(M,T),A=Math.min(_,M+S,T+E)-1,C=Math.max(0,A-P+1);if(0!==C){if(i.isMesh)if(!0===n.wireframe)At.setLineWidth(n.wireframeLinewidth*Bt()),x.setMode(y.LINES);else switch(i.drawMode){case ht:x.setMode(y.TRIANGLES);break;case dt:x.setMode(y.TRIANGLE_STRIP);break;case pt:x.setMode(y.TRIANGLE_FAN)}else if(i.isLine){var R=n.linewidth;void 0===R&&(R=1),At.setLineWidth(R*Bt()),i.isLineSegments?x.setMode(y.LINES):x.setMode(y.LINE_STRIP)}else i.isPoints&&x.setMode(y.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&x.renderInstances(r,P,C):x.render(P,C)}},this.renderOverride=function(e,t,r,n,i,a){t.overrideMaterial=e,this.render(t,r,n,i,a),t.overrideMaterial=null},this.renderPass=function(e,t,r){null===m&&(v=new Xn(-1,1,1,-1,0,1),g=new kn(new Gn(2,2),null),(m=new fi).add(g)),g.material=e,this.render(m,v,t,r),g.material=null},this.render=function(e,t,r,n,i){if(void 0===t||!0===t.isCamera){L="",I=-1,D=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),mt.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Se.setFromMatrix(mt),u.length=0,c=-1,f=-1,d.length=0,p.length=0,ct=this.localClippingEnabled,Ke=Te.init(this.clippingPlanes,ct,t),this.projectObject(e,t),this.opaqueObjects.length=c+1,this.transparentObjects.length=f+1,!0===S.sortObjects&&(this.opaqueObjects.sort(Qt),this.transparency===Tt&&this.transparentObjects.sort(Kt)),Ke&&Te.beginShadows(),function(e){for(var t=0,r=0,n=e.length;r<n;r++){var i=e[r];i.castShadow&&(bt.shadows[t++]=i)}bt.shadows.length=t}(u),jt.render(e,t),function(e,t,r){var n,i,a,o,s,l,u,c=0,f=0,h=0,d=t.matrixWorldInverse,p=0,m=0,v=0,g=0,y=0;for(r.updateMatrixWorld(!1),n=0,i=e.length;n<i;n++)if(a=e[n],o=a.color,s=a.intensity,l=a.distance,u=a.shadow&&a.shadow.map?a.shadow.map.texture:null,a.isAmbientLight)c+=o.r*s,f+=o.g*s,h+=o.b*s;else if(a.isDirectionalLight){a.castShadow&&a.updateShadow(r);var x=Lt.get(a);x.color.copy(a.color).multiplyScalar(a.intensity),x.direction.setFromMatrixPosition(a.matrixWorld),gt.setFromMatrixPosition(a.target.matrixWorld),x.direction.sub(gt),x.direction.transformDirection(d),x.shadow=a.castShadow,a.castShadow&&(x.shadowBias=a.shadow.bias,x.spreadAngle=a.shadow.spreadAngle,x.shadowMapSize=a.shadow.mapSize,x.shadowCameraParams.x=Math.abs(a.shadow.camera.right-a.shadow.camera.left),x.shadowCameraParams.y=a.shadow.camera.near,x.shadowCameraParams.z=a.shadow.camera.far),bt.directionalShadowMap[p]=u,bt.directionalShadowMatrix[p]=a.shadow.matrix,bt.directional[p++]=x}else if(a.isSpotLight){var x=Lt.get(a);a.castShadow&&a.updateShadow(r),x.position.setFromMatrixPosition(a.matrixWorld),x.position.applyMatrix4(d),x.color.copy(o).multiplyScalar(s),x.distance=l,x.direction.setFromMatrixPosition(a.matrixWorld),gt.setFromMatrixPosition(a.target.matrixWorld),x.direction.sub(gt),x.direction.transformDirection(d),x.coneCos=Math.cos(a.angle),x.penumbraCos=Math.cos(a.angle*(1-a.penumbra)),x.decay=0===a.distance?0:a.decay,x.shadow=a.castShadow,a.castShadow&&(x.shadowBias=a.shadow.bias,x.shadowRadius=a.shadow.radius,x.shadowMapSize=a.shadow.mapSize,x.shadowCameraParams.x=Et.DEG2RAD*a.shadow.camera.fov,x.shadowCameraParams.y=a.shadow.camera.near,x.shadowCameraParams.z=a.shadow.camera.far),void 0!==a.iesTexture&&null!==a.iesTexture?(bt.spotIesTextureMap[v]=a.iesTexture,bt.spotIesTextureMapFlag[v]=!0):(bt.spotIesTextureMap[v]=null,bt.spotIesTextureMapFlag[v]=!1),bt.spotShadowMap[v]=u,bt.spotShadowMatrix[v]=a.shadow.matrix,bt.spot[v++]=x}else if(a.isRectAreaLight){var x=Lt.get(a);x.color.copy(o).multiplyScalar(s/(a.width*a.height)),x.position.setFromMatrixPosition(a.matrixWorld),x.position.applyMatrix4(d),xt.identity(),yt.copy(a.matrixWorld),yt.premultiply(d),xt.extractRotation(yt),x.halfWidth.set(.5*a.width,0,0),x.halfHeight.set(0,.5*a.height,0),x.halfWidth.applyMatrix4(xt),x.halfHeight.applyMatrix4(xt),bt.rectArea[g++]=x}else if(a.isPointLight){var x=Lt.get(a);x.position.setFromMatrixPosition(a.matrixWorld),x.position.applyMatrix4(d),x.color.copy(a.color).multiplyScalar(a.intensity),x.distance=a.distance,x.decay=0===a.distance?0:a.decay,x.shadow=a.castShadow,a.castShadow&&(x.shadowBias=a.shadow.bias,x.shadowRadius=a.shadow.radius,x.shadowMapSize=a.shadow.mapSize),void 0!==a.iesTexture&&null!==a.iesTexture?(bt.pointIesTextureMap[m]=a.iesTexture,bt.pointIesTextureMapFlag[m]=!0):(bt.pointIesTextureMap[m]=null,bt.pointIesTextureMapFlag[m]=!1),bt.pointShadowMap[m]=u,void 0===bt.pointShadowMatrix[m]&&(bt.pointShadowMatrix[m]=new kt),gt.setFromMatrixPosition(a.matrixWorld).negate(),bt.pointShadowMatrix[m].identity().setPosition(gt),bt.point[m++]=x}else if(a.isHemisphereLight){var x=Lt.get(a);x.direction.setFromMatrixPosition(a.matrixWorld),x.direction.transformDirection(d),x.direction.normalize(),x.skyColor.copy(a.color).multiplyScalar(s),x.groundColor.copy(a.groundColor).multiplyScalar(s),bt.hemi[y++]=x}bt.ambient[0]=c,bt.ambient[1]=f,bt.ambient[2]=h,bt.directional.length=p,bt.spot.length=v,bt.rectArea.length=g,bt.point.length=m,bt.hemi.length=y,bt.hash=p+","+m+","+v+","+g+","+y+","+bt.shadows.length}(u,t,e),Ke&&Te.endShadows(),wt.calls=0,wt.vertices=0,wt.faces=0,wt.points=0,void 0===r&&(r=null),this.setRenderTarget(r);e.background;if(null,At.buffers.color.setClear(ve.r,ve.g,ve.b,ge,s),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),e.overrideMaterial){var a=e.overrideMaterial;tr(this.opaqueObjects,e,t,a,i),tr(this.transparentObjects,e,t,a,i)}else At.setBlending(N),tr(this.opaqueObjects,e,t,a,i),tr(this.transparentObjects,e,t,a,i);Wt.render(e,t,i),Xt.render(e,t,de),r&&Rt.updateRenderTargetMipmap(r),At.setDepthTest(!0),At.setDepthWrite(!0),At.setColorWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.projectObject=function(e,t){if(!1!==e.visible){var r;if(0!=(e.layers.mask&t.layers.mask))if(e.isLight)u.push(e);else if(e.isSprite)!1!==e.frustumCulled&&!0!==(r=e,ft.center.set(0,0,0),ft.radius=.7071067811865476,ft.applyMatrix4(r.matrixWorld),er(ft))||d.push(e);else if(e.isLensFlare)p.push(e);else if(e.isImmediateRenderObject)!0===S.sortObjects&&(gt.setFromMatrixPosition(e.matrixWorld),gt.applyMatrix4(mt)),$t(e,null,e.material,gt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!1===e.frustumCulled||!0===function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),ft.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),er(ft)}(e))){var n=e.material;if(n){if(!0===n.visible){!0===S.sortObjects&&(gt.setFromMatrixPosition(e.matrixWorld),gt.applyMatrix4(mt));var i=It.update(e);if(n.isMultiMaterial)for(var a=i.groups,o=n.materials,s=0,l=a.length;s<l;s++){var c=a[s],f=o[c.materialIndex];!0===f.visible&&$t(e,i,f,gt.z,c)}else $t(e,i,n,gt.z,null)}}else console.warn("Object has null material",e)}var h=e.children;for(s=0,l=h.length;s<l;s++)this.projectObject(h[s],t)}},this.setFaceCulling=function(e,t){At.setCullFace(e),At.setFlipSided(t===M)},this.allocTextureUnit=function(){var e=pe;return e>=St.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+St.maxTextures),pe+=1,e},this.setTexture2D=(Ht=!1,function(e,t){e&&e.isWebGLRenderTarget&&(Ht||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.",e),Ht=!0),e=e.texture),Rt.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,r){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),Rt.setTexture2D(t,r)}}(),this.setTextureCube=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.",t),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Rt.setTextureCube(t,r):Rt.setTextureCubeDynamic(t,r)}}(),this.getCurrentRenderTarget=function(){return E},this.setRenderTarget=function(e){E=e,e&&void 0===Ct.get(e).__webglFramebuffer&&Rt.setupRenderTarget(e);var t,r=e&&e.isWebGLRenderTargetCube;if(e){var n=Ct.get(e);t=r?n.__webglFramebuffer[e.activeCubeFace]:n.__webglFramebuffer,fe.copy(e.scissor),he=e.scissorTest,de.copy(e.viewport)}else t=null,fe.copy(we).multiplyScalar(be),he=_e,de.copy(Me).multiplyScalar(be);if(P!==t&&(y.bindFramebuffer(y.FRAMEBUFFER,t),P=t),At.scissor(fe),At.setScissorTest(he),At.viewport(de),r){var i=Ct.get(e.texture);y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,r,n,i,a){if(!1!==(e&&e.isWebGLRenderTarget)){var o=Ct.get(e).__webglFramebuffer;o=Ct.get(e).__webglFramebuffer;if(e&&e.isWebGLRenderTargetCube&&(o=o[e.activeCubeFace]),o){var s=!1;o!==P&&(y.bindFramebuffer(y.FRAMEBUFFER,o),s=!0);try{var l=e.texture,u=l.format,c=l.type;if(u!==Ze&&lr(u)!==y.getParameter(y.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Ne||lr(c)===y.getParameter(y.IMPLEMENTATION_COLOR_READ_TYPE)||c===ze&&(Mt.get("OES_texture_float")||Mt.get("WEBGL_color_buffer_float"))||c===Ge&&Mt.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");y.checkFramebufferStatus(y.FRAMEBUFFER)===y.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-n&&r>=0&&r<=e.height-i&&y.readPixels(t,r,n,i,lr(u),lr(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&y.bindFramebuffer(y.FRAMEBUFFER,P)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function di(e,t){this.name="",this.color=new Pr(e),this.density=void 0!==t?t:25e-5}function pi(e,t,r){this.name="",this.color=new Pr(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function mi(e,t,r,n,i){xn.call(this),this.lensFlares=[],this.positionScreen=new Ut,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,r,n,i)}function vi(e){Vr.call(this),this.type="SpriteMaterial",this.color=new Pr(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function gi(e){xn.call(this),this.type="Sprite",this.material=void 0!==e?e:new vi}function yi(){xn.call(this),this.type="LOD",(0,f.default)(this,{levels:{enumerable:!0,value:[]}})}function xi(e,t,r){if(this.useVertexTexture=void 0===r||r,this.identityMatrix=new kt,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var n=Math.sqrt(4*this.bones.length);n=Et.nextPowerOfTwo(Math.ceil(n)),n=Math.max(n,4),this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new Cr(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Ze,ze)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new kt)}}function bi(){xn.call(this),this.type="Bone"}function wi(e,t,r){kn.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new kt,this.bindMatrixInverse=new kt;var n=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,a,o=0,s=this.geometry.bones.length;o<s;++o)a=this.geometry.bones[o],i=new bi,n.push(i),i.name=a.name,i.position.fromArray(a.pos),i.quaternion.fromArray(a.rotq),void 0!==a.scl&&i.scale.fromArray(a.scl);for(o=0,s=this.geometry.bones.length;o<s;++o)-1!==(a=this.geometry.bones[o]).parent&&null!==a.parent&&void 0!==n[a.parent]?n[a.parent].add(n[o]):this.add(n[o])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new xi(n,void 0,r),this.matrixWorld)}function _i(e){Vr.call(this),this.type="LineBasicMaterial",this.color=new Pr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Mi(e,t,r){if(1===r)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Si(e,t);xn.call(this),this.type="Line",this.geometry=void 0!==e?e:new Un,this.material=void 0!==t?t:new _i({color:16777215*Math.random()})}function Si(e,t){Mi.call(this,e,t),this.type="LineSegments"}function Ti(e){Vr.call(this),this.type="PointsMaterial",this.color=new Pr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Ei(e,t){xn.call(this),this.type="Points",this.geometry=void 0!==e?e:new Un,this.material=void 0!==t?t:new Ti({color:16777215*Math.random()})}function Pi(){xn.call(this),this.type="Group"}function Ai(e,t,r,n,i,a,o,s,l){Dt.call(this,e,t,r,n,i,a,o,s,l),this.generateMipmaps=!1;var u=this;!function t(){requestAnimationFrame(t),e.readyState>=e.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}()}function Ci(e,t,r,n,i,a,o,s,l,u,c,f){Dt.call(this,null,a,o,s,l,u,n,i,c,f),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Ri(e,t,r,n,i,a,o,s,l){Dt.call(this,e,t,r,n,i,a,o,s,l),this.needsUpdate=!0}function Ii(e,t,r,n,i,a,o,s,l,u){if((u=void 0!==u?u:$e)!==$e&&u!==et)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&u===$e&&(r=ke),void 0===r&&u===et&&(r=Xe),Dt.call(this,null,n,i,a,o,s,u,r,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:Ce,this.minFilter=void 0!==s?s:Ce,this.flipY=!1,this.generateMipmaps=!1}function Oi(e){Un.call(this);var t=[0,0],r={};function n(e,t){return e-t}var i=["a","b","c"];if(e&&e.isGeometry){for(var a=e.vertices,o=e.faces,s=0,l=new Uint32Array(6*o.length),u=0,c=o.length;u<c;u++)for(var f=o[u],h=0;h<3;h++){t[0]=f[i[h]],t[1]=f[i[(h+1)%3]],t.sort(n),void 0===r[_=t.toString()]&&(l[2*s]=t[0],l[2*s+1]=t[1],r[_]=!0,s++)}var d=new Float32Array(2*s*3);for(u=0,c=s;u<c;u++)for(h=0;h<2;h++){var p=a[l[2*u+h]];d[(M=6*u+3*h)+0]=p.x,d[M+1]=p.y,d[M+2]=p.z}this.addAttribute("position",new Sn(d,3))}else if(e&&e.isBufferGeometry)if(null!==e.index){var m=e.index.array,v=(a=e.attributes.position,e.groups);s=0;0===v.length&&e.addGroup(0,m.length);l=new Uint32Array(2*m.length);for(var g=0,y=v.length;g<y;++g)for(var x=v[g],b=x.start,w=(u=b,b+x.count);u<w;u+=3)for(h=0;h<3;h++){var _;t[0]=m[u+h],t[1]=m[u+(h+1)%3],t.sort(n),void 0===r[_=t.toString()]&&(l[2*s]=t[0],l[2*s+1]=t[1],r[_]=!0,s++)}for(d=new Float32Array(2*s*3),u=0,c=s;u<c;u++)for(h=0;h<2;h++){var M=6*u+3*h,S=l[2*u+h];d[M+0]=a.getX(S),d[M+1]=a.getY(S),d[M+2]=a.getZ(S)}this.addAttribute("position",new Sn(d,3))}else{var T=(s=(a=e.attributes.position.array).length/3)/3;for(d=new Float32Array(2*s*3),u=0,c=T;u<c;u++)for(h=0;h<3;h++){var E=9*u+3*h;d[(M=18*u+6*h)+0]=a[E],d[M+1]=a[E+1],d[M+2]=a[E+2];S=9*u+(h+1)%3*3;d[M+3]=a[S],d[M+4]=a[S+1],d[M+5]=a[S+2]}this.addAttribute("position",new Sn(d,3))}}function Li(e,t,r){Un.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var n,i,a,o,s,l=[],u=[],c=t+1;for(n=0;n<=r;n++)for(s=n/r,i=0;i<=t;i++)a=e(o=i/t,s),l.push(a.x,a.y,a.z),u.push(o,s);var f,h,d,p,m=[];for(n=0;n<r;n++)for(i=0;i<t;i++)f=n*c+i,h=n*c+i+1,d=(n+1)*c+i+1,p=(n+1)*c+i,m.push(f,h,p),m.push(h,d,p);this.setIndex(new(m.length>65535?In:Cn)(m,1)),this.addAttribute("position",new On(l,3)),this.addAttribute("uv",new On(u,2)),this.computeVertexNormals()}function Di(e,t,r){Bn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new Li(e,t,r)),this.mergeVertices()}function Ni(e,t,r,n){Un.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},r=r||1;var i=[],a=[];function o(e,t,r,n){var i,a,o=Math.pow(2,n),l=[];for(i=0;i<=o;i++){l[i]=[];var u=e.clone().lerp(r,i/o),c=t.clone().lerp(r,i/o),f=o-i;for(a=0;a<=f;a++)l[i][a]=0===a&&i===o?u:u.clone().lerp(c,a/f)}for(i=0;i<o;i++)for(a=0;a<2*(o-i)-1;a++){var h=Math.floor(a/2);a%2==0?(s(l[i][h+1]),s(l[i+1][h]),s(l[i][h])):(s(l[i][h+1]),s(l[i+1][h+1]),s(l[i+1][h]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,r){var n=3*t;r.x=e[n+0],r.y=e[n+1],r.z=e[n+2]}function u(e,t,r,n){n<0&&1===e.x&&(a[t]=e.x-1),0===r.x&&0===r.z&&(a[t]=n/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){for(var r=new Ut,n=new Ut,i=new Ut,a=0;a<t.length;a+=3)l(t[a+0],r),l(t[a+1],n),l(t[a+2],i),o(r,n,i,e)}(n=n||0),function(e){for(var t=new Ut,r=0;r<i.length;r+=3)t.x=i[r+0],t.y=i[r+1],t.z=i[r+2],t.normalize().multiplyScalar(e),i[r+0]=t.x,i[r+1]=t.y,i[r+2]=t.z}(r),function(){for(var e=new Ut,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var r=c(e)/2/Math.PI+.5,n=(o=e,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(r,1-n)}var o;(function(){for(var e=new Ut,t=new Ut,r=new Ut,n=new Ut,o=new Pt,s=new Pt,l=new Pt,f=0,h=0;f<i.length;f+=9,h+=6){e.set(i[f+0],i[f+1],i[f+2]),t.set(i[f+3],i[f+4],i[f+5]),r.set(i[f+6],i[f+7],i[f+8]),o.set(a[h+0],a[h+1]),s.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),n.copy(e).add(t).add(r).divideScalar(3);var d=c(n);u(o,h+0,e,d),u(s,h+2,t,d),u(l,h+4,r,d)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],r=a[e+2],n=a[e+4],i=Math.max(t,r,n),o=Math.min(t,r,n);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),r<.2&&(a[e+2]+=1),n<.2&&(a[e+4]+=1))}}()}(),this.addAttribute("position",new On(i,3)),this.addAttribute("normal",new On(i.slice(),3)),this.addAttribute("uv",new On(a,2)),this.normalizeNormals(),this.boundingSphere=new en(new Ut,r)}function Vi(e,t){Ni.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Fi(e,t){Bn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Vi(e,t)),this.mergeVertices()}function Bi(e,t){Ni.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ui(e,t){Bn.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Bi(e,t)),this.mergeVertices()}function ki(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];Ni.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function zi(e,t){Bn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ki(e,t)),this.mergeVertices()}function Gi(e,t){var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n];Ni.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ji(e,t){Bn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Gi(e,t)),this.mergeVertices()}function Hi(e,t,r,n){Bn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},this.fromBufferGeometry(new Ni(e,t,r,n)),this.mergeVertices()}function Wi(e,t,r,n,i){Un.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},t=t||64,r=r||1,n=n||8,i=i||!1;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,l=new Ut,u=new Ut,c=new Pt,f=[],h=[],d=[],p=[];function m(i){var o=e.getPointAt(i/t),c=a.normals[i],d=a.binormals[i];for(s=0;s<=n;s++){var p=s/n*Math.PI*2,m=Math.sin(p),v=-Math.cos(p);u.x=v*c.x+m*d.x,u.y=v*c.y+m*d.y,u.z=v*c.z+m*d.z,u.normalize(),h.push(u.x,u.y,u.z),l.x=o.x+r*u.x,l.y=o.y+r*u.y,l.z=o.z+r*u.z,f.push(l.x,l.y,l.z)}}!function(){for(o=0;o<t;o++)m(o);m(!1===i?t:0),function(){for(o=0;o<=t;o++)for(s=0;s<=n;s++)c.x=o/t,c.y=s/n,d.push(c.x,c.y)}(),function(){for(s=1;s<=t;s++)for(o=1;o<=n;o++){var e=(n+1)*(s-1)+(o-1),r=(n+1)*s+(o-1),i=(n+1)*s+o,a=(n+1)*(s-1)+o;p.push(e,r,a),p.push(r,i,a)}}()}(),this.setIndex(new(p.length>65535?In:Cn)(p,1)),this.addAttribute("position",new On(f,3)),this.addAttribute("normal",new On(h,3)),this.addAttribute("uv",new On(d,2))}function Xi(e,t,r,n,i,a){Bn.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Wi(e,t,r,n,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function qi(e,t,r,n,i,a){Un.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:a},e=e||100,t=t||40,r=Math.floor(r)||64,n=Math.floor(n)||8,i=i||2,a=a||3;var o,s,l=(n+1)*(r+1),u=n*r*2*3,c=new Sn(new(u>65535?Uint32Array:Uint16Array)(u),1),f=new Sn(new Float32Array(3*l),3),h=new Sn(new Float32Array(3*l),3),d=new Sn(new Float32Array(2*l),2),p=0,m=0,v=new Ut,g=new Ut,y=new Pt,x=new Ut,b=new Ut,w=new Ut,_=new Ut,M=new Ut;for(o=0;o<=r;++o){var S=o/r*i*Math.PI*2;for(O(S,i,a,e,x),O(S+.01,i,a,e,b),_.subVectors(b,x),M.addVectors(b,x),w.crossVectors(_,M),M.crossVectors(w,_),w.normalize(),M.normalize(),s=0;s<=n;++s){var T=s/n*Math.PI*2,E=-t*Math.cos(T),P=t*Math.sin(T);v.x=x.x+(E*M.x+P*w.x),v.y=x.y+(E*M.y+P*w.y),v.z=x.z+(E*M.z+P*w.z),f.setXYZ(p,v.x,v.y,v.z),g.subVectors(v,x).normalize(),h.setXYZ(p,g.x,g.y,g.z),y.x=o/r,y.y=s/n,d.setXY(p,y.x,y.y),p++}}for(s=1;s<=r;s++)for(o=1;o<=n;o++){var A=(n+1)*(s-1)+(o-1),C=(n+1)*s+(o-1),R=(n+1)*s+o,I=(n+1)*(s-1)+o;c.setX(m,A),m++,c.setX(m,C),m++,c.setX(m,I),m++,c.setX(m,C),m++,c.setX(m,R),m++,c.setX(m,I),m++}function O(e,t,r,n,i){var a=Math.cos(e),o=Math.sin(e),s=r/t*e,l=Math.cos(s);i.x=n*(2+l)*.5*a,i.y=n*(2+l)*o*.5,i.z=n*Math.sin(s)*.5}this.setIndex(c),this.addAttribute("position",f),this.addAttribute("normal",h),this.addAttribute("uv",d)}function Yi(e,t,r,n,i,a,o){Bn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new qi(e,t,r,n,i,a)),this.mergeVertices()}function Zi(e,t,r,n,i){Un.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},e=e||100,t=t||40,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var a,o,s=(r+1)*(n+1),l=r*n*2*3,u=new(l>65535?Uint32Array:Uint16Array)(l),c=new Float32Array(3*s),f=new Float32Array(3*s),h=new Float32Array(2*s),d=0,p=0,m=0,v=new Ut,g=new Ut,y=new Ut;for(a=0;a<=r;a++)for(o=0;o<=n;o++){var x=o/n*i,b=a/r*Math.PI*2;g.x=(e+t*Math.cos(b))*Math.cos(x),g.y=(e+t*Math.cos(b))*Math.sin(x),g.z=t*Math.sin(b),c[d]=g.x,c[d+1]=g.y,c[d+2]=g.z,v.x=e*Math.cos(x),v.y=e*Math.sin(x),y.subVectors(g,v).normalize(),f[d]=y.x,f[d+1]=y.y,f[d+2]=y.z,h[p]=o/n,h[p+1]=a/r,d+=3,p+=2}for(a=1;a<=r;a++)for(o=1;o<=n;o++){var w=(n+1)*a+o-1,_=(n+1)*(a-1)+o-1,M=(n+1)*(a-1)+o,S=(n+1)*a+o;u[m]=w,u[m+1]=_,u[m+2]=S,u[m+3]=_,u[m+4]=M,u[m+5]=S,m+=6}this.setIndex(new Sn(u,1)),this.addAttribute("position",new Sn(c,3)),this.addAttribute("normal",new Sn(f,3)),this.addAttribute("uv",new Sn(h,2))}function Ji(e,t,r,n,i){Bn.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new Zi(e,t,r,n,i))}fi.prototype=(0,d.default)(xn.prototype),fi.prototype.constructor=fi,fi.prototype.copy=function(e,t){return xn.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},fi.prototype.toJSON=function(e){var t=xn.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},di.prototype.isFogExp2=!0,di.prototype.clone=function(){return new di(this.color.getHex(),this.density)},di.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},pi.prototype.isFog=!0,pi.prototype.clone=function(){return new pi(this.color.getHex(),this.near,this.far)},pi.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},mi.prototype=(0,p.default)((0,d.default)(xn.prototype),{constructor:mi,isLensFlare:!0,copy:function(e){xn.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,r=e.lensFlares.length;t<r;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,r,n,i,a){void 0===t&&(t=-1),void 0===r&&(r=0),void 0===a&&(a=1),void 0===i&&(i=new Pr(16777215)),void 0===n&&(n=V),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:e,size:t,distance:r,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:i,blending:n})},updateLensFlares:function(){var e,t,r=this.lensFlares.length,n=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<r;e++)(t=this.lensFlares[e]).x=this.positionScreen.x+n*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),vi.prototype=(0,d.default)(Vr.prototype),vi.prototype.constructor=vi,vi.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},gi.prototype=(0,p.default)((0,d.default)(xn.prototype),{constructor:gi,isSprite:!0,raycast:(ii=new Ut,function(e,t){ii.setFromMatrixPosition(this.matrixWorld);var r=e.ray.distanceSqToPoint(ii);r>this.scale.x*this.scale.y/4||t.push({distance:Math.sqrt(r),point:this.position,face:null,object:this})}),clone:function(){return new this.constructor(this.material).copy(this)}}),yi.prototype=(0,p.default)((0,d.default)(xn.prototype),{constructor:yi,copy:function(e){xn.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);r.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,n=t.length;r<n&&!(e<t[r].distance);r++);return t[r-1].object},raycast:function(){var e=new Ut;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(t,r)}}(),update:function(){var e=new Ut,t=new Ut;return function(r){var n=this.levels;if(n.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);n[0].object.visible=!0;for(var a=1,o=n.length;a<o&&i>=n[a].distance;a++)n[a-1].object.visible=!1,n[a].object.visible=!0;for(;a<o;a++)n[a].object.visible=!1}}}(),toJSON:function(e){var t=xn.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,n=0,i=r.length;n<i;n++){var a=r[n];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),(0,p.default)(xi.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new kt;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){for(var e,t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(ai=new kt,function(){for(var e=0,t=this.bones.length;e<t;e++){var r=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;ai.multiplyMatrices(r,this.boneInverses[e]),ai.toArray(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}),clone:function(){return new xi(this.bones,this.boneInverses,this.useVertexTexture)}}),bi.prototype=(0,p.default)((0,d.default)(xn.prototype),{constructor:bi,isBone:!0}),wi.prototype=(0,p.default)((0,d.default)(kn.prototype),{constructor:wi,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e];(i=1/t.lengthManhattan())!==1/0?t.multiplyScalar(i):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new Nt,n=this.geometry.attributes.skinWeight;for(e=0;e<n.count;e++){var i;r.x=n.getX(e),r.y=n.getY(e),r.z=n.getZ(e),r.w=n.getW(e),(i=1/r.lengthManhattan())!==1/0?r.multiplyScalar(i):r.set(1,0,0,0),n.setXYZW(e,r.x,r.y,r.z,r.w)}}},updateMatrixWorld:function(e){kn.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),_i.prototype=(0,d.default)(Vr.prototype),_i.prototype.constructor=_i,_i.prototype.isLineBasicMaterial=!0,_i.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Mi.prototype=(0,p.default)((0,d.default)(xn.prototype),{constructor:Mi,isLine:!0,raycast:function(){var e=new kt,t=new on,r=new en;return function(n,i){var a=n.linePrecision,o=a*a,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(l),!1!==n.ray.intersectsSphere(r)){e.getInverse(l),t.copy(n.ray).applyMatrix4(e);var u=new Ut,c=new Ut,f=new Ut,h=new Ut,d=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var p=s.index,m=s.attributes.position.array;if(null!==p)for(var v=p.array,g=0,y=v.length-1;g<y;g+=d){var x=v[g],b=v[g+1];if(u.fromArray(m,3*x),c.fromArray(m,3*b),!(t.distanceSqToSegment(u,c,h,f)>o))h.applyMatrix4(this.matrixWorld),(M=n.ray.origin.distanceTo(h))<n.near||M>n.far||i.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}else for(g=0,y=m.length/3-1;g<y;g+=d){if(u.fromArray(m,3*g),c.fromArray(m,3*g+3),!(t.distanceSqToSegment(u,c,h,f)>o))h.applyMatrix4(this.matrixWorld),(M=n.ray.origin.distanceTo(h))<n.near||M>n.far||i.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else if(s.isGeometry){var w=s.vertices,_=w.length;for(g=0;g<_-1;g+=d){var M;if(!(t.distanceSqToSegment(w[g],w[g+1],h,f)>o))h.applyMatrix4(this.matrixWorld),(M=n.ray.origin.distanceTo(h))<n.near||M>n.far||i.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Si.prototype=(0,p.default)((0,d.default)(Mi.prototype),{constructor:Si,isLineSegments:!0}),Ti.prototype=(0,d.default)(Vr.prototype),Ti.prototype.constructor=Ti,Ti.prototype.isPointsMaterial=!0,Ti.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Ei.prototype=(0,p.default)((0,d.default)(xn.prototype),{constructor:Ei,isPoints:!0,raycast:function(){var e=new kt,t=new on,r=new en;return function(n,i){var a=this,o=this.geometry,s=this.matrixWorld,l=n.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),r.copy(o.boundingSphere),r.applyMatrix4(s),!1!==n.ray.intersectsSphere(r)){e.getInverse(s),t.copy(n.ray).applyMatrix4(e);var u=l/((this.scale.x+this.scale.y+this.scale.z)/3),c=u*u,f=new Ut;if(o.isBufferGeometry){var h=o.index,d=o.attributes.position.array;if(null!==h)for(var p=h.array,m=0,v=p.length;m<v;m++){var g=p[m];f.fromArray(d,3*g),b(f,g)}else{m=0;for(var y=d.length/3;m<y;m++)f.fromArray(d,3*m),b(f,m)}}else{var x=o.vertices;for(m=0,y=x.length;m<y;m++)b(x[m],m)}}function b(e,r){var o=t.distanceSqToPoint(e);if(o<c){var l=t.closestPointToPoint(e);l.applyMatrix4(s);var u=n.ray.origin.distanceTo(l);if(u<n.near||u>n.far)return;i.push({distance:u,distanceToRay:Math.sqrt(o),point:l.clone(),index:r,face:null,object:a})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Pi.prototype=(0,p.default)((0,d.default)(xn.prototype),{constructor:Pi}),Ai.prototype=(0,d.default)(Dt.prototype),Ai.prototype.constructor=Ai,Ci.prototype=(0,d.default)(Dt.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isCompressedTexture=!0,Ri.prototype=(0,d.default)(Dt.prototype),Ri.prototype.constructor=Ri,Ii.prototype=(0,d.default)(Dt.prototype),Ii.prototype.constructor=Ii,Ii.prototype.isDepthTexture=!0,Oi.prototype=(0,d.default)(Un.prototype),Oi.prototype.constructor=Oi,Li.prototype=(0,d.default)(Un.prototype),Li.prototype.constructor=Li,Di.prototype=(0,d.default)(Bn.prototype),Di.prototype.constructor=Di,Ni.prototype=(0,d.default)(Un.prototype),Ni.prototype.constructor=Ni,Vi.prototype=(0,d.default)(Ni.prototype),Vi.prototype.constructor=Vi,Fi.prototype=(0,d.default)(Bn.prototype),Fi.prototype.constructor=Fi,Bi.prototype=(0,d.default)(Ni.prototype),Bi.prototype.constructor=Bi,Ui.prototype=(0,d.default)(Bn.prototype),Ui.prototype.constructor=Ui,ki.prototype=(0,d.default)(Ni.prototype),ki.prototype.constructor=ki,zi.prototype=(0,d.default)(Bn.prototype),zi.prototype.constructor=zi,Gi.prototype=(0,d.default)(Ni.prototype),Gi.prototype.constructor=Gi,ji.prototype=(0,d.default)(Bn.prototype),ji.prototype.constructor=ji,Hi.prototype=(0,d.default)(Bn.prototype),Hi.prototype.constructor=Hi,Wi.prototype=(0,d.default)(Un.prototype),Wi.prototype.constructor=Wi,Xi.prototype=(0,d.default)(Bn.prototype),Xi.prototype.constructor=Xi,qi.prototype=(0,d.default)(Un.prototype),qi.prototype.constructor=qi,Yi.prototype=(0,d.default)(Bn.prototype),Yi.prototype.constructor=Yi,Zi.prototype=(0,d.default)(Un.prototype),Zi.prototype.constructor=Zi,Ji.prototype=(0,d.default)(Bn.prototype),Ji.prototype.constructor=Ji;var Qi={area:function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r},triangulate:function(){function e(e,t,r,n,i,a){var o,s,l,u,c,f,h,d,p,m,g,y,x,b,w,_,M;if(s=e[a[t]].x,l=e[a[t]].y,u=e[a[r]].x,c=e[a[r]].y,f=e[a[n]].x,(u-s)*((h=e[a[n]].y)-l)-(c-l)*(f-s)<=0)return!1;for(m=f-u,g=h-c,y=s-f,x=l-h,b=u-s,w=c-l,o=0;o<i;o++)if(d=e[a[o]].x,p=e[a[o]].y,!(d===s&&p===l||d===u&&p===c||d===f&&p===h)&&(_=b*(p-l)-w*(d-s),M=y*(p-h)-x*(d-f),m*(p-c)-g*(d-u)>=-v.default&&M>=-v.default&&_>=-v.default))return!1;return!0}return function(t,r){var n=t.length;if(n<3)return null;var i,a,o,s=[],l=[],u=[];if(Qi.area(t)>0)for(a=0;a<n;a++)l[a]=a;else for(a=0;a<n;a++)l[a]=n-1-a;var c=n,f=2*c;for(a=c-1;c>2;){if(f--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),r?u:s;if(c<=(i=a)&&(i=0),c<=(a=i+1)&&(a=0),c<=(o=a+1)&&(o=0),e(t,i,a,o,c,l)){var h,d,p,m,v;for(h=l[i],d=l[a],p=l[o],s.push([t[h],t[d],t[p]]),u.push([l[i],l[a],l[o]]),m=a,v=a+1;v<c;m++,v++)l[m]=l[v];f=2*--c}}return r?u:s}}(),triangulateShape:function(e,t){function r(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function n(e,t,r){return e.x!==t.x?e.x<t.x?e.x<=r.x&&r.x<=t.x:t.x<=r.x&&r.x<=e.x:e.y<t.y?e.y<=r.y&&r.y<=t.y:t.y<=r.y&&r.y<=e.y}function i(e,t,r,i,a){var o=t.x-e.x,s=t.y-e.y,l=i.x-r.x,u=i.y-r.y,c=e.x-r.x,f=e.y-r.y,h=s*l-o*u,d=s*c-o*f;if(Math.abs(h)>v.default){var p;if(h>0){if(d<0||d>h)return[];if((p=u*c-l*f)<0||p>h)return[]}else{if(d>0||d<h)return[];if((p=u*c-l*f)>0||p<h)return[]}if(0===p)return!a||0!==d&&d!==h?[e]:[];if(p===h)return!a||0!==d&&d!==h?[t]:[];if(0===d)return[r];if(d===h)return[i];var m=p/h;return[{x:e.x+m*o,y:e.y+m*s}]}if(0!==d||u*c!=l*f)return[];var g,y,x,b,w,_,M,S,T=0===o&&0===s,E=0===l&&0===u;return T&&E?e.x!==r.x||e.y!==r.y?[]:[e]:T?n(r,i,e)?[e]:[]:E?n(e,t,r)?[r]:[]:(0!==o?(e.x<t.x?(g=e,x=e.x,y=t,b=t.x):(g=t,x=t.x,y=e,b=e.x),r.x<i.x?(w=r,M=r.x,_=i,S=i.x):(w=i,M=i.x,_=r,S=r.x)):(e.y<t.y?(g=e,x=e.y,y=t,b=t.y):(g=t,x=t.y,y=e,b=e.y),r.y<i.y?(w=r,M=r.y,_=i,S=i.y):(w=i,M=i.y,_=r,S=r.y)),x<=M?b<M?[]:b===M?a?[]:[w]:b<=S?[w,y]:[w,_]:x>S?[]:x===S?a?[]:[g]:b<=S?[g,y]:[g,_])}function a(e,t,r,n){var i=t.x-e.x,a=t.y-e.y,o=r.x-e.x,s=r.y-e.y,l=n.x-e.x,u=n.y-e.y,c=i*s-a*o,f=i*u-a*l;if(Math.abs(c)>v.default){var h=l*s-u*o;return c>0?f>=0&&h>=0:f>=0||h>=0}return f>0}r(e),t.forEach(r);for(var o,s,l,u,c,f,h={},d=e.concat(),p=0,m=t.length;p<m;p++)Array.prototype.push.apply(d,t[p]);for(o=0,s=d.length;o<s;o++)void 0!==h[c=d[o].x+":"+d[o].y]&&console.warn("THREE.ShapeUtils: Duplicate point",c,o),h[c]=o;var g=function(e,t){var r,n=e.concat();function o(e,t){var i=n.length-1,o=e-1;o<0&&(o=i);var s=e+1;s>i&&(s=0);var l=a(n[e],n[o],n[s],r[t]);if(!l)return!1;var u=r.length-1,c=t-1;c<0&&(c=u);var f=t+1;return f>u&&(f=0),!!(l=a(r[t],r[c],r[f],n[e]))}function s(e,t){var r,a;for(r=0;r<n.length;r++)if(a=r+1,a%=n.length,i(e,t,n[r],n[a],!0).length>0)return!0;return!1}var l=[];function u(e,r){var n,a,o,s;for(n=0;n<l.length;n++)for(a=t[l[n]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,i(e,r,a[o],a[s],!0).length>0)return!0;return!1}for(var c,f,h,d,p,m,v,g,y,x,b=[],w=0,_=t.length;w<_;w++)l.push(w);for(var M=0,S=2*l.length;l.length>0;){if(--S<0){console.log("Infinite Loop! Holes left:"+l.length+", Probably Hole outside Shape!");break}for(f=M;f<n.length;f++){for(h=n[f],c=-1,w=0;w<l.length;w++)if(p=l[w],void 0===b[m=h.x+":"+h.y+":"+p]){r=t[p];for(var T=0;T<r.length;T++)if(d=r[T],o(f,T)&&!s(h,d)&&!u(h,d)){c=T,l.splice(w,1),v=n.slice(0,f+1),g=n.slice(f),y=r.slice(c),x=r.slice(0,c+1),n=v.concat(y).concat(x).concat(g),M=f;break}if(c>=0)break;b[m]=!0}if(c>=0)break}}return n}(e,t),y=Qi.triangulate(g,!1);for(o=0,s=y.length;o<s;o++)for(u=y[o],l=0;l<3;l++)void 0!==(f=h[c=u[l].x+":"+u[l].y])&&(u[l]=f);return y.concat()},isClockWise:function(e){return Qi.area(e)<0}};function Ki(e,t){void 0!==e?(Bn.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeFaceNormals()):e=[]}function $i(e,t){var r=(t=t||{}).font;if(!1===(r&&r.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Bn;var n=r.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Ki.call(this,n,t),this.type="TextGeometry"}function ea(e,t,r,n,i,a,o){Un.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},e=e||50,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;for(var s=(a=void 0!==a?a:0)+(o=void 0!==o?o:Math.PI),l=(t+1)*(r+1),u=new Sn(new Float32Array(3*l),3),c=new Sn(new Float32Array(3*l),3),f=new Sn(new Float32Array(2*l),2),h=0,d=[],p=new Ut,m=0;m<=r;m++){for(var v=[],g=m/r,y=0;y<=t;y++){var x=y/t,b=-e*Math.cos(n+x*i)*Math.sin(a+g*o),w=e*Math.cos(a+g*o),_=e*Math.sin(n+x*i)*Math.sin(a+g*o);p.set(b,w,_).normalize(),u.setXYZ(h,b,w,_),c.setXYZ(h,p.x,p.y,p.z),f.setXY(h,x,1-g),v.push(h),h++}d.push(v)}var M=[];for(m=0;m<r;m++)for(y=0;y<t;y++){var S=d[m][y+1],T=d[m][y],E=d[m+1][y],P=d[m+1][y+1];(0!==m||a>0)&&M.push(S,T,P),(m!==r-1||s<Math.PI)&&M.push(T,E,P)}this.setIndex(new(u.count>65535?In:Cn)(M,1)),this.addAttribute("position",u),this.addAttribute("normal",c),this.addAttribute("uv",f),this.boundingSphere=new en(new Ut,e)}function ta(e,t,r,n,i,a,o){Bn.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new ea(e,t,r,n,i,a,o))}function ra(e,t,r,n,i,a){Un.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a},e=e||20,t=t||50,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI;var o,s,l,u=((r=void 0!==r?Math.max(3,r):8)+1)*((n=void 0!==n?Math.max(1,n):1)+1),c=r*n*2*3,f=new Sn(new(c>65535?Uint32Array:Uint16Array)(c),1),h=new Sn(new Float32Array(3*u),3),d=new Sn(new Float32Array(3*u),3),p=new Sn(new Float32Array(2*u),2),m=0,v=0,g=e,y=(t-e)/n,x=new Ut,b=new Pt;for(s=0;s<=n;s++){for(l=0;l<=r;l++)o=i+l/r*a,x.x=g*Math.cos(o),x.y=g*Math.sin(o),h.setXYZ(m,x.x,x.y,x.z),d.setXYZ(m,0,0,1),b.x=(x.x/t+1)/2,b.y=(x.y/t+1)/2,p.setXY(m,b.x,b.y),m++;g+=y}for(s=0;s<n;s++){var w=s*(r+1);for(l=0;l<r;l++){var _=o=l+w,M=o+r+1,S=o+r+2,T=o+1;f.setX(v,_),v++,f.setX(v,M),v++,f.setX(v,S),v++,f.setX(v,_),v++,f.setX(v,S),v++,f.setX(v,T),v++}}this.setIndex(f),this.addAttribute("position",h),this.addAttribute("normal",d),this.addAttribute("uv",p)}function na(e,t,r,n,i,a){Bn.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new ra(e,t,r,n,i,a))}function ia(e,t,r,n){Bn.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new Gn(e,t,r,n))}function aa(e,t,r,n){Un.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=Math.floor(t)||12,r=r||0,n=n||2*Math.PI,n=Et.clamp(n,0,2*Math.PI);var i,a,o,s=(t+1)*e.length,l=t*e.length*2*3,u=new Sn(new(l>65535?Uint32Array:Uint16Array)(l),1),c=new Sn(new Float32Array(3*s),3),f=new Sn(new Float32Array(2*s),2),h=0,d=0,p=1/t,m=new Ut,v=new Pt;for(a=0;a<=t;a++){var g=r+a*p*n,y=Math.sin(g),x=Math.cos(g);for(o=0;o<=e.length-1;o++)m.x=e[o].x*y,m.y=e[o].y,m.z=e[o].x*x,c.setXYZ(h,m.x,m.y,m.z),v.x=a/t,v.y=o/(e.length-1),f.setXY(h,v.x,v.y),h++}for(a=0;a<t;a++)for(o=0;o<e.length-1;o++){var b=i=o+a*e.length,w=i+e.length,_=i+e.length+1,M=i+1;u.setX(d,b),d++,u.setX(d,w),d++,u.setX(d,M),d++,u.setX(d,w),d++,u.setX(d,_),d++,u.setX(d,M),d++}if(this.setIndex(u),this.addAttribute("position",c),this.addAttribute("uv",f),this.computeVertexNormals(),n===2*Math.PI){var S=this.attributes.normal.array,T=new Ut,E=new Ut,P=new Ut;for(i=t*e.length*3,a=0,o=0;a<e.length;a++,o+=3)T.x=S[o+0],T.y=S[o+1],T.z=S[o+2],E.x=S[i+o+0],E.y=S[i+o+1],E.z=S[i+o+2],P.addVectors(T,E).normalize(),S[o+0]=S[i+o+0]=P.x,S[o+1]=S[i+o+1]=P.y,S[o+2]=S[i+o+2]=P.z}}function oa(e,t,r,n){Bn.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},this.fromBufferGeometry(new aa(e,t,r,n)),this.mergeVertices()}function sa(e,t){Un.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],n=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(e))u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(o,s,l),o+=s,s=0;function u(e){var o,l,u,c=r.length/3,f=e.extractPoints(t),h=f.shape,d=f.holes;if(!1===Qi.isClockWise(h))for(h=h.reverse(),o=0,l=d.length;o<l;o++)u=d[o],!0===Qi.isClockWise(u)&&(d[o]=u.reverse());var p=Qi.triangulateShape(h,d);for(o=0,l=d.length;o<l;o++)u=d[o],h=h.concat(u);for(o=0,l=h.length;o<l;o++){var m=h[o];r.push(m.x,m.y,0),n.push(0,0,1),i.push(m.x,m.y)}for(o=0,l=p.length;o<l;o++){var v=p[o],g=v[0]+c,y=v[1]+c,x=v[2]+c;a.push(g,y,x),s+=3}}this.setIndex(new(a.length>65535?In:Cn)(a,1)),this.addAttribute("position",new On(r,3)),this.addAttribute("normal",new On(n,3)),this.addAttribute("uv",new On(i,2))}function la(e,t){Bn.call(this),this.type="ShapeGeometry","object"===(void 0===t?"undefined":(0,g.default)(t))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new sa(e,t)),this.mergeVertices()}function ua(e,t){Un.call(this),t=void 0!==t?t:1;var r=Math.cos(Et.DEG2RAD*t),n=[0,0],i={};function a(e,t){return e-t}var o,s=["a","b","c"];e.isBufferGeometry?(o=new Bn).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var l=o.vertices,u=o.faces,c=0,f=u.length;c<f;c++)for(var h=u[c],d=0;d<3;d++){n[0]=h[s[d]],n[1]=h[s[(d+1)%3]],n.sort(a),void 0===i[m=n.toString()]?i[m]={vert1:n[0],vert2:n[1],face1:c,face2:void 0}:i[m].face2=c}var p=[];for(var m in i){var v=i[m];if(void 0===v.face2||u[v.face1].normal.dot(u[v.face2].normal)<=r){var g=l[v.vert1];p.push(g.x),p.push(g.y),p.push(g.z),g=l[v.vert2],p.push(g.x),p.push(g.y),p.push(g.z)}}this.addAttribute("position",new On(p,3))}function ca(e,t,r,n,i,a,o,s){Un.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var l=this;e=void 0!==e?e:20,t=void 0!==t?t:20,r=void 0!==r?r:100,n=Math.floor(n)||8,i=Math.floor(i)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var u=0;!1===a&&(e>0&&u++,t>0&&u++);var c=function(){var e=(n+1)*(i+1);!1===a&&(e+=(n+1)*u+n*u);return e}(),f=function(){var e=n*i*2*3;!1===a&&(e+=n*u*3);return e}(),h=new Sn(new(f>65535?Uint32Array:Uint16Array)(f),1),d=new Sn(new Float32Array(3*c),3),p=new Sn(new Float32Array(3*c),3),m=new Sn(new Float32Array(2*c),2),v=0,g=0,y=[],x=r/2,b=0;function w(r){var i,a,u,c=new Pt,f=new Ut,y=0,w=!0===r?e:t,_=!0===r?1:-1;for(a=v,i=1;i<=n;i++)d.setXYZ(v,0,x*_,0),p.setXYZ(v,0,_,0),c.x=.5,c.y=.5,m.setXY(v,c.x,c.y),v++;for(u=v,i=0;i<=n;i++){var M=i/n*s+o,S=Math.cos(M),T=Math.sin(M);f.x=w*T,f.y=x*_,f.z=w*S,d.setXYZ(v,f.x,f.y,f.z),p.setXYZ(v,0,_,0),c.x=.5*S+.5,c.y=.5*T*_+.5,m.setXY(v,c.x,c.y),v++}for(i=0;i<n;i++){var E=a+i,P=u+i;!0===r?(h.setX(g,P),g++,h.setX(g,P+1),g++,h.setX(g,E),g++):(h.setX(g,P+1),g++,h.setX(g,P),g++,h.setX(g,E),g++),y+=3}l.addGroup(b,y,!0===r?1:2),b+=y}!function(){var a,u,c=new Ut,f=new Ut,w=0,_=(t-e)/r;for(u=0;u<=i;u++){var M=[],S=u/i,T=S*(t-e)+e;for(a=0;a<=n;a++){var E=a/n,P=E*s+o,A=Math.sin(P),C=Math.cos(P);f.x=T*A,f.y=-S*r+x,f.z=T*C,d.setXYZ(v,f.x,f.y,f.z),c.set(A,_,C).normalize(),p.setXYZ(v,c.x,c.y,c.z),m.setXY(v,E,1-S),M.push(v),v++}y.push(M)}for(a=0;a<n;a++)for(u=0;u<i;u++){var R=y[u][a],I=y[u+1][a],O=y[u+1][a+1],L=y[u][a+1];h.setX(g,R),g++,h.setX(g,I),g++,h.setX(g,L),g++,h.setX(g,I),g++,h.setX(g,O),g++,h.setX(g,L),g++,w+=6}l.addGroup(b,w,0),b+=w}(),!1===a&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(h),this.addAttribute("position",d),this.addAttribute("normal",p),this.addAttribute("uv",m)}function fa(e,t,r,n,i,a,o,s){Bn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new ca(e,t,r,n,i,a,o,s)),this.mergeVertices()}function ha(e,t,r,n,i,a,o){fa.call(this,0,e,t,r,n,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function da(e,t,r,n,i,a,o){ca.call(this,0,e,t,r,n,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function pa(e,t,r,n){Un.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},e=e||50,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i=t+2,a=new Float32Array(3*i),o=new Float32Array(3*i),s=new Float32Array(2*i);o[2]=1,s[0]=.5,s[1]=.5;for(var l=0,u=3,c=2;l<=t;l++,u+=3,c+=2){var f=r+l/t*n;a[u]=e*Math.cos(f),a[u+1]=e*Math.sin(f),o[u+2]=1,s[c]=(a[u]/e+1)/2,s[c+1]=(a[u+1]/e+1)/2}var h=[];for(u=1;u<=t;u++)h.push(u,u+1,0);this.setIndex(new Sn(new Uint16Array(h),1)),this.addAttribute("position",new Sn(a,3)),this.addAttribute("normal",new Sn(o,3)),this.addAttribute("uv",new Sn(s,2)),this.boundingSphere=new en(new Ut,e)}function ma(e,t,r,n){Bn.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new pa(e,t,r,n))}function va(e,t,r,n,i,a){Bn.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new zn(e,t,r,n,i,a)),this.mergeVertices()}Ki.prototype=(0,d.default)(Bn.prototype),Ki.prototype.constructor=Ki,Ki.prototype.addShapeList=function(e,t){for(var r=e.length,n=0;n<r;n++){var i=e[n];this.addShape(i,t)}},Ki.prototype.addShape=function(e,t){var r,n,i,a,o,s,l,u,c=void 0!==t.amount?t.amount:100,f=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:f-2,d=void 0!==t.bevelSegments?t.bevelSegments:3,p=void 0===t.bevelEnabled||t.bevelEnabled,g=void 0!==t.curveSegments?t.curveSegments:12,y=void 0!==t.steps?t.steps:1,x=t.extrudePath,b=!1,w=void 0!==t.UVGenerator?t.UVGenerator:Ki.WorldUVGenerator;x&&(r=x.getSpacedPoints(y),b=!0,p=!1,n=void 0!==t.frames?t.frames:x.computeFrenetFrames(y,!1),i=new Ut,a=new Ut,o=new Ut),p||(d=0,f=0,h=0);var _=this,M=this.vertices.length,S=e.extractPoints(g),T=S.shape,E=S.holes,P=!Qi.isClockWise(T);if(P){for(T=T.reverse(),l=0,u=E.length;l<u;l++)s=E[l],Qi.isClockWise(s)&&(E[l]=s.reverse());P=!1}var A=Qi.triangulateShape(T,E),C=T;for(l=0,u=E.length;l<u;l++)s=E[l],T=T.concat(s);function R(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}var I,O,L,D,N,V,F=T.length,B=A.length;function U(e,t,r){var n,i,a=1,o=e.x-t.x,s=e.y-t.y,l=r.x-e.x,u=r.y-e.y,c=o*o+s*s,f=o*u-s*l;if(Math.abs(f)>v.default){var h=Math.sqrt(c),d=Math.sqrt(l*l+u*u),p=t.x-s/h,g=t.y+o/h,y=((r.x-u/d-p)*u-(r.y+l/d-g)*l)/(o*u-s*l),x=(n=p+o*y-e.x)*n+(i=g+s*y-e.y)*i;if(x<=2)return new Pt(n,i);a=Math.sqrt(x/2)}else{var b=!1;o>v.default?l>v.default&&(b=!0):o<-v.default?l<-v.default&&(b=!0):(0,m.default)(s)===(0,m.default)(u)&&(b=!0),b?(n=-s,i=o,a=Math.sqrt(c)):(n=o,i=s,a=Math.sqrt(c/2))}return new Pt(n/a,i/a)}for(var k=[],z=0,G=C.length,j=G-1,H=z+1;z<G;z++,j++,H++)j===G&&(j=0),H===G&&(H=0),k[z]=U(C[z],C[j],C[H]);var W,X,q=[],Y=k.concat();for(l=0,u=E.length;l<u;l++){for(s=E[l],W=[],z=0,j=(G=s.length)-1,H=z+1;z<G;z++,j++,H++)j===G&&(j=0),H===G&&(H=0),W[z]=U(s[z],s[j],s[H]);q.push(W),Y=Y.concat(W)}for(I=0;I<d;I++){for(L=I/d,D=f*Math.cos(L*Math.PI/2),O=h*Math.sin(L*Math.PI/2),z=0,G=C.length;z<G;z++)J((N=R(C[z],k[z],O)).x,N.y,-D);for(l=0,u=E.length;l<u;l++)for(s=E[l],W=q[l],z=0,G=s.length;z<G;z++)J((N=R(s[z],W[z],O)).x,N.y,-D)}for(O=h,z=0;z<F;z++)N=p?R(T[z],Y[z],O):T[z],b?(a.copy(n.normals[0]).multiplyScalar(N.x),i.copy(n.binormals[0]).multiplyScalar(N.y),o.copy(r[0]).add(a).add(i),J(o.x,o.y,o.z)):J(N.x,N.y,0);for(X=1;X<=y;X++)for(z=0;z<F;z++)N=p?R(T[z],Y[z],O):T[z],b?(a.copy(n.normals[X]).multiplyScalar(N.x),i.copy(n.binormals[X]).multiplyScalar(N.y),o.copy(r[X]).add(a).add(i),J(o.x,o.y,o.z)):J(N.x,N.y,c/y*X);for(I=d-1;I>=0;I--){for(L=I/d,D=f*Math.cos(L*Math.PI/2),O=h*Math.sin(L*Math.PI/2),z=0,G=C.length;z<G;z++)J((N=R(C[z],k[z],O)).x,N.y,c+D);for(l=0,u=E.length;l<u;l++)for(s=E[l],W=q[l],z=0,G=s.length;z<G;z++)N=R(s[z],W[z],O),b?J(N.x,N.y+r[y-1].y,r[y-1].x+D):J(N.x,N.y,c+D)}function Z(e,t){var r,n;for(z=e.length;--z>=0;){r=z,(n=z-1)<0&&(n=e.length-1);var i=0,a=y+2*d;for(i=0;i<a;i++){var o=F*i,s=F*(i+1);K(t+r+o,t+n+o,t+n+s,t+r+s,e,i,a,r,n)}}}function J(e,t,r){_.vertices.push(new Ut(e,t,r))}function Q(e,t,r){e+=M,t+=M,r+=M,_.faces.push(new _n(e,t,r,null,null,0));var n=w.generateTopUV(_,e,t,r);_.faceVertexUvs[0].push(n)}function K(e,t,r,n,i,a,o,s,l){e+=M,t+=M,r+=M,n+=M,_.faces.push(new _n(e,t,n,null,null,1)),_.faces.push(new _n(t,r,n,null,null,1));var u=w.generateSideWallUV(_,e,t,r,n);_.faceVertexUvs[0].push([u[0],u[1],u[3]]),_.faceVertexUvs[0].push([u[1],u[2],u[3]])}!function(){if(p){var e=0,t=F*e;for(z=0;z<B;z++)Q((V=A[z])[2]+t,V[1]+t,V[0]+t);for(t=F*(e=y+2*d),z=0;z<B;z++)Q((V=A[z])[0]+t,V[1]+t,V[2]+t)}else{for(z=0;z<B;z++)Q((V=A[z])[2],V[1],V[0]);for(z=0;z<B;z++)Q((V=A[z])[0]+F*y,V[1]+F*y,V[2]+F*y)}}(),function(){var e=0;for(Z(C,e),e+=C.length,l=0,u=E.length;l<u;l++)Z(s=E[l],e),e+=s.length}()},Ki.WorldUVGenerator={generateTopUV:function(e,t,r,n){var i=e.vertices,a=i[t],o=i[r],s=i[n];return[new Pt(a.x,a.y),new Pt(o.x,o.y),new Pt(s.x,s.y)]},generateSideWallUV:function(e,t,r,n,i){var a=e.vertices,o=a[t],s=a[r],l=a[n],u=a[i];return Math.abs(o.y-s.y)<.01?[new Pt(o.x,1-o.z),new Pt(s.x,1-s.z),new Pt(l.x,1-l.z),new Pt(u.x,1-u.z)]:[new Pt(o.y,1-o.z),new Pt(s.y,1-s.z),new Pt(l.y,1-l.z),new Pt(u.y,1-u.z)]}},$i.prototype=(0,d.default)(Ki.prototype),$i.prototype.constructor=$i,ea.prototype=(0,d.default)(Un.prototype),ea.prototype.constructor=ea,ta.prototype=(0,d.default)(Bn.prototype),ta.prototype.constructor=ta,ra.prototype=(0,d.default)(Un.prototype),ra.prototype.constructor=ra,na.prototype=(0,d.default)(Bn.prototype),na.prototype.constructor=na,ia.prototype=(0,d.default)(Bn.prototype),ia.prototype.constructor=ia,aa.prototype=(0,d.default)(Un.prototype),aa.prototype.constructor=aa,oa.prototype=(0,d.default)(Bn.prototype),oa.prototype.constructor=oa,sa.prototype=(0,d.default)(Un.prototype),sa.prototype.constructor=sa,la.prototype=(0,d.default)(Bn.prototype),la.prototype.constructor=la,ua.prototype=(0,d.default)(Un.prototype),ua.prototype.constructor=ua,ca.prototype=(0,d.default)(Un.prototype),ca.prototype.constructor=ca,fa.prototype=(0,d.default)(Bn.prototype),fa.prototype.constructor=fa,ha.prototype=(0,d.default)(fa.prototype),ha.prototype.constructor=ha,da.prototype=(0,d.default)(ca.prototype),da.prototype.constructor=da,pa.prototype=(0,d.default)(Un.prototype),pa.prototype.constructor=pa,ma.prototype=(0,d.default)(Bn.prototype),ma.prototype.constructor=ma,va.prototype=(0,d.default)(Bn.prototype),va.prototype.constructor=va;var ga=(0,l.default)({WireframeGeometry:Oi,ParametricGeometry:Di,ParametricBufferGeometry:Li,TetrahedronGeometry:Fi,TetrahedronBufferGeometry:Vi,OctahedronGeometry:Ui,OctahedronBufferGeometry:Bi,IcosahedronGeometry:zi,IcosahedronBufferGeometry:ki,DodecahedronGeometry:ji,DodecahedronBufferGeometry:Gi,PolyhedronGeometry:Hi,PolyhedronBufferGeometry:Ni,TubeGeometry:Xi,TubeBufferGeometry:Wi,TorusKnotGeometry:Yi,TorusKnotBufferGeometry:qi,TorusGeometry:Ji,TorusBufferGeometry:Zi,TextGeometry:$i,SphereBufferGeometry:ea,SphereGeometry:ta,RingGeometry:na,RingBufferGeometry:ra,PlaneBufferGeometry:Gn,PlaneGeometry:ia,LatheGeometry:oa,LatheBufferGeometry:aa,ShapeGeometry:la,ShapeBufferGeometry:sa,ExtrudeGeometry:Ki,EdgesGeometry:ua,ConeGeometry:ha,ConeBufferGeometry:da,CylinderGeometry:fa,CylinderBufferGeometry:ca,CircleBufferGeometry:pa,CircleGeometry:ma,BoxBufferGeometry:zn,BoxGeometry:va});function ya(){Fr.call(this,{uniforms:Tr.merge([Rr.lights,{opacity:{value:1}}]),vertexShader:Er.shadow_vert,fragmentShader:Er.shadow_frag}),this.lights=!0,this.transparent=!0,(0,f.default)(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})}function xa(e){Fr.call(this,e),this.type="RawShaderMaterial"}function ba(e){this.uuid=Et.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(e)?e:[],this.visible=!0}function wa(e){Vr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pr(16777215),this.mapSlot=new Br("map",0,!1,!1),this.reflectivity=.5,this.reflectivityMapSlot=new Br("reflectivityMap",0,!1,!1),this.roughness=.5,this.roughnessMapSlot=new Br("roughnessMap",0,!1,!1),this.metalness=.5,this.metalnessMapSlot=new Br("metalnessMap",0,!1,!1),this.emissive=new Pr(0),this.emissiveIntensity=1,this.emissiveMapSlot=new Br("emissiveMap",0,!1,!1),this.bumpMapSlot=new Br("bumpMap",0,!1,!0),this.normalScale=new Pt(1,1),this.normalMapSlot=new Br("normalMap",0,!1,!1),this.displacementMapSlot=new Br("displacementMap",0,!1,!0),this.lightMapSlot=new Br("lightMap",1,!1,!0),this.aoMapIntensity=1,this.aoMapSlot=new Br("aoMap",1,!1,!0),this.alphaMapSlot=new Br("alphaMap",0,!1,!1),this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}ya.prototype=(0,d.default)(Fr.prototype),ya.prototype.constructor=ya,ya.prototype.isShadowMaterial=!0,xa.prototype=(0,d.default)(Fr.prototype),xa.prototype.constructor=xa,xa.prototype.isRawShaderMaterial=!0,ba.prototype={constructor:ba,isMultiMaterial:!0,toJSON:function(e){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},r=this.materials,n=0,i=r.length;n<i;n++){var a=r[n].toJSON(e);delete a.metadata,t.materials.push(a)}return t.visible=this.visible,t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},wa.prototype=(0,d.default)(Vr.prototype),wa.prototype.constructor=wa,wa.prototype.isMeshStandardMaterial=!0;!function(){var e={map:{get:function(){return this.mapSlot.texture},set:function(e){this.mapSlot.texture=e}},lightMap:{get:function(){return this.lightMapSlot.texture},set:function(e){this.lightMapSlot.texture=e}},lightMapIntensity:{get:function(){return this.lightMapSlot.texelScale},set:function(e){this.lightMapSlot.texelTransform=!0,this.lightMapSlot.texelScale=e}},aoMap:{get:function(){return this.aoMapSlot.texture},set:function(e){this.aoMapSlot.texture=e}},emissiveMap:{get:function(){return this.emissiveMapSlot.texture},set:function(e){this.emissiveMapSlot.texture=e}},bumpMap:{get:function(){return this.bumpMapSlot.texture},set:function(e){this.bumpMapSlot.texture=e}},bumpScale:{get:function(){return this.bumpMapSlot.texelScale},set:function(e){this.bumpMapSlot.texelTransform=!0,this.bumpMapSlot.texelScale=e}},normalMap:{get:function(){return this.normalMapSlot.texture},set:function(e){this.normalMapSlot.texture=e}},displacementMap:{get:function(){return this.displacementMapSlot.texture},set:function(e){this.displacementMapSlot.texture=e}},displacementScale:{get:function(){return this.displacementMapSlot.texelScale},set:function(e){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelScale=e}},displacementBias:{get:function(){return this.displacementMapSlot.texelOffset},set:function(e){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelOffset=e}},reflectivityMap:{get:function(){return this.reflectivityMapSlot.texture},set:function(e){this.reflectivityMapSlot.texture=e}},roughnessMap:{get:function(){return this.roughnessMapSlot.texture},set:function(e){this.roughnessMapSlot.texture=e}},metalnessMap:{get:function(){return this.metalnessMapSlot.texture},set:function(e){this.metalnessMapSlot.texture=e}},alphaMap:{get:function(){return this.alphaMapSlot.texture},set:function(e){this.alphaMapSlot.texture=e}}};for(var t in e)(0,h.default)(wa.prototype,t,e[t])}();function _a(e){wa.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.falloff=!1,this.falloffColor=new Pr(16777215),this.falloffMapSlot=new Br("falloffMap",0,!1,!1),this.falloffOpacity=1,this.falloffAlphaMapSlot=new Br("falloffAlphaMap",0,!1,!1),this.clearCoat=0,this.clearCoatRoughness=0,this.clearCoatBumpMapSlot=new Br("clearCoatBumpMap",0,!1,!1),this.anisotropy=0,this.anisotropyMapSlot=new Br("anisotropyMap",0,!1,!1),this.anisotropyRotation=0,this.anisotropyRotationMapSlot=new Br("anisotropyRotationMap",0,!1,!1),this.triplanarScale=new Ut(1,1,1),this.triplanarExponent=1,this.triplanarEnabledMap=!1,this.triplanarEnabledNormalMap=!1,this.triplanarEnabledBumpMap=!1,this.triplanarEnabledRoughnessMap=!1,this.ssrEnabled=!1,this.setValues(e)}wa.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.mapSlot.copy(e.mapSlot),this.reflectivity=e.reflectivity,this.reflectivityMapSlot.copy(e.reflectivityMapSlot),this.roughness=e.roughness,this.roughnessMapSlot.copy(e.roughnessMapSlot),this.metalness=e.metalness,this.metalnessMapSlot.copy(e.metalnessMapSlot),this.lightMapSlot.copy(e.lightMapSlot),this.aoMapIntensity=e.aoMapIntensity,this.aoMapSlot.copy(e.aoMapSlot),this.emissive.copy(e.emissive),this.emissiveIntensity=e.emissiveIntensity,this.emissiveMapSlot.copy(e.emissiveMapSlot),this.bumpMapSlot.copy(e.bumpMapSlot),this.normalScale.copy(e.normalScale),this.normalMapSlot.copy(e.normalMapSlot),this.displacementMapSlot.copy(e.displacementMapSlot),this.alphaMapSlot.copy(e.alphaMapSlot),this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},_a.prototype=(0,d.default)(wa.prototype),_a.prototype.constructor=_a,_a.prototype.isMeshPhysicalMaterial=!0;!function(){var e={falloffMap:{get:function(){return this.falloffMapSlot.texture},set:function(e){this.falloffMapSlot.texture=e}},falloffAlphaMap:{get:function(){return this.falloffAlphaMapSlot.texture},set:function(e){this.falloffAlphaMapSlot.texture=e}},clearCoatBumpScale:{get:function(){return this.clearCoatBumpMapSlot.texelScale},set:function(e){this.clearCoatBumpMapSlot.texelTransform=!0,this.clearCoatBumpMapSlot.texelScale=e}},clearCoatBumpMap:{get:function(){return this.clearCoatBumpMapSlot.texture},set:function(e){this.clearCoatBumpMapSlot.texture=e}},anisotropyMap:{get:function(){return this.anisotropyMapSlot.texture},set:function(e){this.anisotropyMapSlot.texture=e}},anisotropyRotationMap:{get:function(){return this.anisotropyRotationMapSlot.texture},set:function(e){this.anisotropyRotationMapSlot.texture=e}}};for(var t in e)(0,h.default)(_a.prototype,t,e[t])}();function Ma(e){Vr.call(this),this.type="MeshPhongMaterial",this.color=new Pr(16777215),this.specular=new Pr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Sa(e){Ma.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Ta(e){Vr.call(this,e),this.type="MeshNormalMaterial",this.opacity=1,this.mapSlot=new Br("map",0,!1,!1),this.bumpMapSlot=new Br("bumpMap",0,!1,!0),this.normalScale=new Pt(1,1),this.normalMapSlot=new Br("normalMap",0,!1,!1),this.displacementMapSlot=new Br("displacementMap",0,!1,!0),this.alphaMapSlot=new Br("alphaMap",0,!1,!1),this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.clearColor=new Pr(.5,.5,1),this.clearAlpha=1,this.blending=N,this.triplanarScale=new Ut(1,1,1),this.triplanarEnabledMap=!1,this.triplanarEnabledNormalMap=!1,this.triplanarExponent=1,this.setValues(e)}_a.prototype.copy=function(e){return wa.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.falloff=e.falloff,this.falloffColor.copy(e.falloffColor),this.falloffMapSlot.copy(e.falloffMapSlot),this.falloffOpacity=e.falloffOpacity,this.falloffAlphaMapSlot.copy(e.falloffAlphaMapSlot),this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this.clearCoatBumpMapSlot.copy(e.clearCoatBumpMapSlot),this.clearCoatBumpScale=e.clearCoatBumpScale,this.anisotropy=e.anisotropy,this.anisotropyMapSlot=e.anisotropyMapSlot,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyRotationMapSlot=e.anisotropyRotationMapSlot,this.triplanarScale.copy(e.triplanarScale),this.triplanarExponent=e.triplanarExponent,this.triplanarEnabledMap=e.triplanarEnabledMap,this.triplanarEnabledNormalMap=e.triplanarEnabledNormalMap,this.triplanarEnabledBumpMap=e.triplanarEnabledBumpMap,this.triplanarEnabledRoughnessMap=e.triplanarEnabledRoughnessMap,this.ssrEnabled=e.ssrEnabled,this},Ma.prototype=(0,d.default)(Vr.prototype),Ma.prototype.constructor=Ma,Ma.prototype.isMeshPhongMaterial=!0,Ma.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Sa.prototype=(0,d.default)(Ma.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isMeshToonMaterial=!0,Sa.prototype.copy=function(e){return Ma.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Ta.prototype=(0,d.default)(Vr.prototype),Ta.prototype.constructor=Ta,Ta.prototype.isMeshNormalMaterial=!0;!function(){var e={map:{get:function(){return this.mapSlot.texture},set:function(e){this.mapSlot.texture=e}},bumpMap:{get:function(){return this.bumpMapSlot.texture},set:function(e){this.bumpMapSlot.texture=e}},bumpScale:{get:function(){return this.bumpMapSlot.texelScale},set:function(e){this.bumpMapSlot.texelTransform=!0,this.bumpMapSlot.texelScale=e}},normalMap:{get:function(){return this.normalMapSlot.texture},set:function(e){this.normalMapSlot.texture=e}},displacementMap:{get:function(){return this.displacementMapSlot.texture},set:function(e){this.displacementMapSlot.texture=e}},displacementScale:{get:function(){return this.displacementMapSlot.texelScale},set:function(e){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelScale=e}},displacementBias:{get:function(){return this.displacementMapSlot.texelOffset},set:function(e){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelOffset=e}},alphaMap:{get:function(){return this.alphaMapSlot.texture},set:function(e){this.alphaMapSlot.texture=e}}};for(var t in e)(0,h.default)(Ta.prototype,t,e[t])}();function Ea(e){Vr.call(this),this.type="MeshLambertMaterial",this.color=new Pr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Pa(e){Vr.call(this),this.type="MeshVelocityMaterial",this.depthPacking=_t,this.currentProjectionViewMatrix=new kt,this.previousProjectionViewMatrix=new kt,this.color=new Pr(16777215),this.mapSlot=new Br("map",0,!1,!1),this.displacementMapSlot=new Br("displacementMap",0,!1,!0),this.alphaMapSlot=new Br("alphaMap",0,!1,!1),this.skinning=!1,this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clearColor=new Pr(1,1,1),this.clearAlpha=1,this.blending=N,this.setValues(e)}Ta.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.opacity=e.opacity,this.mapSlot.copy(e.mapSlot),this.bumpMapSlot.copy(e.bumpMapSlot),this.normalScale.copy(e.normalScale),this.normalMapSlot.copy(e.normalMapSlot),this.displacementMapSlot.copy(e.displacementMapSlot),this.alphaMapSlot.copy(e.alphaMapSlot),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.clearColor=e.clearColor,this.clearAlpha=e.clearAlpha,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.triplanarScale.copy(e.triplanarScale),this.triplanarExponent=e.triplanarExponent,this.triplanarEnabledNormalMap=e.triplanarEnabledNormalMap,this.triplanarEnabledBumpMap=e.triplanarEnabledBumpMap,this},Ea.prototype=(0,d.default)(Vr.prototype),Ea.prototype.constructor=Ea,Ea.prototype.isMeshLambertMaterial=!0,Ea.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Pa.prototype=(0,d.default)(Vr.prototype),Pa.prototype.constructor=Pa,Pa.prototype.isMeshVelocityMaterial=!0;!function(){var e={map:{get:function(){return this.mapSlot.texture},set:function(e){this.mapSlot.texture=e}},displacementMap:{get:function(){return this.displacementMapSlot.texture},set:function(e){this.displacementMapSlot.texture=e}},displacementScale:{get:function(){return this.displacementMapSlot.texelScale},set:function(e){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelScale=e}},displacementBias:{get:function(){return this.displacementMapSlot.texelOffset},set:function(e){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelOffset=e}},alphaMap:{get:function(){return this.alphaMapSlot.texture},set:function(e){this.alphaMapSlot.texture=e}}};for(var t in e)(0,h.default)(Pa.prototype,t,e[t])}();function Aa(e){Vr.call(this),this.type="MeshCubeMaterial",this.envMap=null,this.envMapIntensity=1,this.roughness=0,this.depthTest=!1,this.depthWrite=!1,this.side=A,this.lights=!1,this.setValues(e)}function Ca(e){Vr.call(this),this.type="LineDashedMaterial",this.color=new Pr(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}function Ra(e){e=(0,p.default)(e||{},Ir.gem),Fr.call(this,e),this.uniforms=Tr.clone(Ir.gem.uniforms),this.defines={NUM_BOUNCES:2,MODE:2,DEBUG_MODE:0,DEBUG_BOUNCE_TARGET:2},this.extensions={derivatives:!0},this.side=P,this.blending=V,this.premultipliedAlpha=!0,this.depthWrite=!0,this.transparent=!1,this.isGemMaterial=!0}Pa.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.currentProjectionViewMatrix.copy(this.currentProjectionViewMatrix),this.previousProjectionViewMatrix.copy(this.previousProjectionViewMatrix),this.opacity=e.opacity,this.mapSlot.copy(e.mapSlot),this.displacementMapSlot.copy(e.displacementMapSlot),this.alphaMapSlot.copy(e.alphaMapSlot),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.clearColor=e.clearColor,this.clearAlpha=e.clearAlpha,this},Aa.prototype=(0,d.default)(Vr.prototype),Aa.prototype.constructor=Aa,Aa.prototype.isMeshCubeMaterial=!0,Aa.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.roughness=e.roughness,this},Ca.prototype=(0,d.default)(Vr.prototype),Ca.prototype.constructor=Ca,Ca.prototype.isLineDashedMaterial=!0,Ca.prototype.copy=function(e){return Vr.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this},Ra.prototype=(0,d.default)(Fr.prototype),Ra.prototype.constructor=Ra;var Ia=(0,l.default)({ShadowMaterial:ya,SpriteMaterial:vi,RawShaderMaterial:xa,ShaderMaterial:Fr,PointsMaterial:Ti,MultiMaterial:ba,MeshPhysicalMaterial:_a,MeshStandardMaterial:wa,MeshPhongMaterial:Ma,MeshToonMaterial:Sa,MeshNormalMaterial:Ta,MeshLambertMaterial:Ea,MeshDepthMaterial:zr,MeshVelocityMaterial:Pa,MeshBasicMaterial:Mn,MeshCubeMaterial:Aa,LineDashedMaterial:Ca,LineBasicMaterial:_i,MaterialMap:Br,Material:Vr,GemMaterial:Ra}),Oa={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function La(e,t,r){var n=this,i=!1,a=0,o=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){o++,!1===i&&void 0!==n.onStart&&n.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==n.onProgress&&n.onProgress(e,a,o),a===o&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)}}var Da=new La;function Na(e){this.manager=void 0!==e?e:Da}function Va(e){this.manager=void 0!==e?e:Da,this._parser=null}function Fa(e){this.manager=void 0!==e?e:Da,this._parser=null}function Ba(e){this.manager=void 0!==e?e:Da}function Ua(e){this.manager=void 0!==e?e:Da}function ka(e){this.manager=void 0!==e?e:Da}function za(e,t){xn.call(this),this.type="Light",this.color=new Pr(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Ga(e,t,r){za.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(xn.DefaultUp),this.updateMatrix(),this.groundColor=new Pr(t)}function ja(){function e(e){var t,r,n;for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),r=e[n],e[n]=e[t],e[t]=r}this.jitterLevel=5,this.pixelArea=1,this.numJitterSamples=ja.JitterVectors[this.jitterLevel].length,this.nextJitterSample=0,this._activeJitterLevel=-1;for(var t=0;t<ja.JitterVectors.length;t++)e(ja.JitterVectors[t])}(0,p.default)(Na.prototype,{load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,a=Oa.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],l=!!o[2],u=o[3];u=window.decodeURIComponent(u),l&&(u=window.atob(u));try{var c,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":c=new ArrayBuffer(u.length);for(var h=new Uint8Array(c),d=0;d<u.length;d++)h[d]=u.charCodeAt(d);"blob"===f&&(c=new Blob([c],{type:s}));break;case"document":var p=new DOMParser;c=p.parseFromString(u,s);break;case"json":c=JSON.parse(u);break;default:c=u}window.setTimeout(function(){t&&t(c),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){n&&n(t),i.manager.itemError(e)},0)}}else{var m=new XMLHttpRequest;m.open("GET",e,!0),m.addEventListener("load",function(r){var a=r.target.response;Oa.add(e,a),200===this.status?(t&&t(a),i.manager.itemEnd(e)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(a),i.manager.itemEnd(e)):(n&&n(r),i.manager.itemError(e))},!1),void 0!==r&&m.addEventListener("progress",function(e){r(e)},!1),m.addEventListener("error",function(t){n&&n(t),i.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),m.send(null)}return i.manager.itemStart(e),m},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),(0,p.default)(Va.prototype,{load:function(e,t,r,n){var i=this,a=[],o=new Ci;o.image=a;var s=new Na(this.manager);function l(l){s.load(e[l],function(e){var r=i._parser(e,!0);a[l]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(u+=1)&&(1===r.mipmapCount&&(o.minFilter=Oe),o.format=r.format,o.needsUpdate=!0,t&&t(o))},r,n)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,f=e.length;c<f;++c)l(c);else s.load(e,function(e){var r=i._parser(e,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,s=0;s<n;s++){a[s]={mipmaps:[]};for(var l=0;l<r.mipmapCount;l++)a[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+l]),a[s].format=r.format,a[s].width=r.width,a[s].height=r.height}else o.image.width=r.width,o.image.height=r.height,o.mipmaps=r.mipmaps;1===r.mipmapCount&&(o.minFilter=Oe),o.format=r.format,o.needsUpdate=!0,t&&t(o)},r,n);return o},setPath:function(e){return this.path=e,this}}),(0,p.default)(Fa.prototype,{load:function(e,t,r,n){var i=this,a=new Cr,o=new Na(this.manager);return o.setResponseType("arraybuffer"),o.load(e,function(e){var r=i._parser(e);r&&(void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:Pe,a.wrapT=void 0!==r.wrapT?r.wrapT:Pe,a.magFilter=void 0!==r.magFilter?r.magFilter:Oe,a.minFilter=void 0!==r.minFilter?r.minFilter:De,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps),1===r.mipmapCount&&(a.minFilter=Oe),a.needsUpdate=!0,t&&t(a,r))},r,n),a}}),(0,p.default)(Ba.prototype,{load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,a=Oa.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){Oa.add(e,this),t&&t(this),i.manager.itemEnd(e)},!1),o.addEventListener("error",function(t){n&&n(t),i.manager.itemError(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),(0,p.default)(Ua.prototype,{load:function(e,t,r,n){var i=new zt,a=new Ba(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(r){a.load(e[r],function(e){i.images[r]=e,6===++o&&(i.needsUpdate=!0,t&&t(i))},void 0,n)}for(var l=0;l<e.length;++l)s(l);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),(0,p.default)(ka.prototype,{load:function(e,t,r,n){var i=new Dt,a=new Ba(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(r){var n=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=n?Ye:Ze,i.image=r,i.needsUpdate=!0,void 0!==t&&t(i)},r,n),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),za.prototype=(0,p.default)((0,d.default)(xn.prototype),{constructor:za,isLight:!0,copy:function(e){return xn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=xn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t},objectFilter:function(e){return e.isMesh&&(e.castShadow||e.receiveShadow)&&!e.discardable}}),Ga.prototype=(0,p.default)((0,d.default)(za.prototype),{constructor:Ga,isHemisphereLight:!0,copy:function(e){return za.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),ja.prototype=(0,p.default)(ja.prototype,{constructor:ja,dispose:function(){this.clear()},setJitterLevel:function(e){this.jitterLevel=e,this.numJitterSamples=Math.pow(2,this.jitterLevel),this.nextJitterSample=0},clear:function(e){e.clearViewOffset&&e.clearViewOffset()},advance:function(e,t,r){if(this._activeJitterLevel!==this.jitterLevel&&(this.jitterLevel=Math.max(0,Math.min(this.jitterLevel,5)),this.numJitterSamples=ja.JitterVectors[this.jitterLevel].length,this.nextJitterSample=0,this._activeJitterLevel=this.jitterLevel),this.jitterLevel>0){var n=ja.JitterVectors[this.jitterLevel][this.nextJitterSample];this.nextJitterSample=(this.nextJitterSample+1)%this.numJitterSamples;var i=.0625*Math.sqrt(this.pixelArea);r.setViewOffset(e,t,n[0]*i,n[1]*i,e,t)}}}),ja.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];var Ha={};function Wa(){this.index=0}Ha.calcAt=function(e,t){e++;var r=1,n=0,i=1/t;if(2===t)for(;e>0;)n+=(r*=i)*(1&e),e>>=1;else for(;e>0;)n+=(r*=i)*(e%t),e=Math.floor(e*i);return n},Ha.calcSequence=function(e,t,r,n){void 0===t&&(t=3),void 0===r&&(r=0),void 0!==n&&null!==n||(n=function(e,t){return!0});var i=r,a=[];if(2===t)for(;a.length<e;){n(o=new Pt(Ha.calcAt(i,2),Ha.calcAt(i,3)),a)&&a.push(o),i++}else{if(3!==t)return void console.log("Halton.calcSequence: invalid dimension ("+t+"). Use 2 or 3.");for(;a.length<e;){var o;n(o=new Ut(Ha.calcAt(i,2),Ha.calcAt(i,3),Ha.calcAt(i,5)),a)&&a.push(o),i++}}return a},Ha.generateCube=function(e,t){return Ha.generateCuboid(e,t,t,t)},Ha.generateCuboid=function(e,t,r,n){return void 0===t&&(t=1),void 0===r&&(r=1),void 0===n&&(n=1),Ha.calcSequence(e,3,0,function(e){return 1!==t&&(e.x*=t),1!==r&&(e.y*=r),1!==n&&(e.z*=n),!0})},Ha.generateSquare=function(e,t){return Ha.generateRectangle(e,t,t)},Ha.generateRectangle=function(e,t,r){return void 0===t&&(t=1),void 0===r&&(r=1),Ha.calcSequence(e,2,0,function(e){return 1!==t&&(e.x*=t),1!==r&&(e.y*=r),!0})},Ha.generateSphere=function(e,t){void 0===t&&(t=1);for(var r=Ha.generateSphereCap(e),n=0;n<e;n++){var i=Math.pow(Ha.calcAt(n,5),1/3);r[n].multiplyScalar(t*i)}return r},Ha.generateSphereCap=function(e,t){void 0===t&&(t=Math.PI);for(var r=Math.cos(t),n=Ha.generateSquare(e),i=0;i<e;i++){var a=n[i].x*(1-r)+r,o=2*n[i].y*Math.PI,s=Math.sqrt(1-a*a);n[i]=new Ut(s*Math.cos(o),s*Math.sin(o),a)}return n},Ha.sortByLength=function(e,t){return e.lengthSq()>t.lengthSq()},Ha.nextSampleOnSphereCap=function(e,t,r){void 0===t&&(t=Math.PI);var n=Math.cos(t),i=Ha.calcAt(e,2)*(1-n)+n,a=2*Ha.calcAt(e,3)*Math.PI,o=Math.sqrt(1-i*i),s=new Ut(o*Math.cos(a),o*Math.sin(a),i);return r.copy(s),e},Ha.nextSampleInSphereVolume=function(e,t){Ha.nextSampleOnSphereCap(e,Math.PI,t);var r=Math.pow(Ha.calcAt(e,11),1/3);return t.multiplyScalar(r),e},(0,p.default)(Wa.prototype,{copy:function(e){return this.index=e.index,this},clone:function(){return(new this.constructor).copy(this)},reset:function(){this.index=0},getNextAsPosition:function(e){},getNextAsQuaternion:function(e){return e=e||new Bt,this.getNextAsPosition(Xa),e.setFromUnitVectors(qa,Xa),e}});var Xa=new Ut,qa=new Ut(0,0,-1);function Ya(){Wa.call(this)}function Za(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Pt(512,512),this.map=null,this.matrix=new kt,this.sampler=new Ya,this.doesSamplePosition=!0,this.doesSampleQuaternion=!1,this.samplePosition=null,this.sampleQuaternion=null,this.cameraJitter=new ja,this.cameraJitter.pixelArea=1}function Ja(){Za.call(this,new Wn)}function Qa(e,t,r,n,i,a){za.call(this,e,t),this.type="SpotLight",this.position.copy(xn.DefaultUp),this.updateMatrix(),this.target=new xn,this.autoShadow=!1,this.autoShadowTarget=null,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new Ja}function Ka(e,t,r,n){za.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new Za(new Wn(90,1,.5,500))}function $a(e){Wa.call(this),void 0===e&&(e=0),this.maxAngle=e}function eo(){Za.call(this,new Xn),this.spreadAngle=0,this.sampler=new $a,this.doesSamplePosition=!1,this.doesSampleQuaternion=!0}function to(e,t){za.call(this,e,t),this.type="DirectionalLight",this.position.copy(xn.DefaultUp),this.updateMatrix(),this.target=new xn,this.autoShadow=!1,this.autoShadowTarget=null,this.shadow=new eo}function ro(e,t){za.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}Ya.prototype=(0,d.default)(Wa.prototype),Ya.prototype.constructor=Ya,(0,p.default)(Ya.prototype,{copy:function(e){return this.index=e.index,this},getNextAsPosition:function(e){return e=e||new Ut,Ha.nextSampleInSphereVolume(this.index,e),this.index++,e}}),(0,p.default)(Za.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},resetSample:function(){this.sampler.reset()},applyNextSample:function(){this.doesSamplePosition?(this.samplePosition=this.samplePosition||new Ut,this.sampler.getNextAsPosition(this.samplePosition),this.samplePosition.multiplyScalar(this.radius)):this.samplePosition=null,this.doesSampleQuaternion?(this.sampleQuaternion=this.sampleQuaternion||new Bt,this.sampler.getNextAsQuaternion(this.sampleQuaternion)):this.sampleQuaternion=null},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Ja.prototype=(0,p.default)((0,d.default)(Za.prototype),{constructor:Ja,isSpotLightShadow:!0,update:function(e){var t=2*Et.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,n=e.distance||500,i=this.camera;i.fov=t,i.aspect=r,i.far=n,i.updateProjectionMatrix()}}),Qa.prototype=(0,p.default)((0,d.default)(za.prototype),{constructor:Qa,isSpotLight:!0,copy:function(e){return za.prototype.copy.call(this,e),this.autoShadow=e.autoShadow,this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.autoShadowTarget=e.autoShadowTarget,this.shadow=e.shadow.clone(),this}}),Qa.prototype.updateShadow=function(e){if(this.autoShadow&&e){var t=(this.autoShadowTarget||e).boundingBox(!0,this.objectFilter),r=this.getWorldPosition(),n=this.target.getWorldPosition(),i=(new Ut).subVectors(n,r).normalize();this.shadow.camera.fitClipPlanes(t,r,i),this.shadow.camera.updateProjectionMatrix()}},Ka.prototype=(0,p.default)((0,d.default)(za.prototype),{constructor:Ka,isPointLight:!0,copy:function(e){return za.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),$a.prototype=(0,d.default)(Wa.prototype),$a.prototype.constructor=$a,(0,p.default)($a.prototype,{copy:function(e){return this.index=e.index,this.maxAngle=e.maxAngle,this},clone:function(){return(new this.constructor).copy(this)},getNextAsPosition:function(e){return e=e||new Ut,Ha.nextSampleOnSphereCap(this.index,this.maxAngle,e),this.index++,e}}),eo.prototype=(0,p.default)((0,d.default)(Za.prototype),{constructor:eo,isDirectionalLightShadow:!0,copy:function(e){return Za.prototype.copy.call(this,e),this.spreadAngle=e.spreadAngle,this},update:function(e){this.sampler.maxAngle=this.spreadAngle/2,this.camera.updateProjectionMatrix()}}),to.prototype=(0,p.default)((0,d.default)(za.prototype),{constructor:to,isDirectionalLight:!0,copy:function(e){return za.prototype.copy.call(this,e),this.target=e.target.clone(),this.autoShadow=e.autoShadow,this.autoShadowTarget=e.autoShadowTarget,this.shadow=e.shadow.clone(),this}}),to.prototype.updateShadowWithPosition=function(e){if(e){var t=this.getWorldPosition(),r=this.target.getWorldPosition(),n=(this.autoShadowTarget||e).boundingBox(!0,this.objectFilter),i=n.getBoundingSphere(),a=(new Ut).subVectors(r,t),o=(new Ut).subVectors(i.center,t),s=a.angleTo(o),l=i.center.distanceTo(this.position)*Math.sin(s)+i.radius;this.shadow.camera.left=-l,this.shadow.camera.right=l,this.shadow.camera.top=l,this.shadow.camera.bottom=-l,this.shadow.camera.fitClipPlanes(n,t,a),this.shadow.camera.updateProjectionMatrix()}},to.prototype.updateShadow=function(e){if(this.autoShadow&&e){var t=this.getWorldPosition(),r=this.target.getWorldPosition(),n=(this.autoShadowTarget||e).boundingBox(!0,this.objectFilter),i=n.getBoundingSphere(),a=(new Ut).subVectors(r,t).normalize(),o=i.center.clone().sub(a.clone().multiplyScalar(i.radius)),s=i.radius;this.shadow.virtualPosition=new Ut(o.x,o.y,o.z),this.shadow.camera.left=-s,this.shadow.camera.right=s,this.shadow.camera.top=s,this.shadow.camera.bottom=-s,this.shadow.camera.fitClipPlanes(n,this.shadow.virtualPosition,a),this.shadow.camera.updateProjectionMatrix()}},ro.prototype=(0,p.default)((0,d.default)(za.prototype),{constructor:ro,isAmbientLight:!0});var no,io,ao,oo,so,lo={arraySlice:function(e,t,r){return lo.isTypedArray(e)?new e.constructor(e.subarray(t,r)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,r=new Array(t),n=0;n!==t;++n)r[n]=n;return r.sort(function(t,r){return e[t]-e[r]}),r},sortedArray:function(e,t,r){for(var n=e.length,i=new e.constructor(n),a=0,o=0;o!==n;++a)for(var s=r[a]*t,l=0;l!==t;++l)i[o++]=e[s+l];return i},flattenJSON:function(e,t,r,n){for(var i=1,a=e[0];void 0!==a&&void 0===a[n];)a=e[i++];if(void 0!==a){var o=a[n];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[n])&&(t.push(a.time),r.push.apply(r,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[n])&&(t.push(a.time),o.toArray(r,r.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[n])&&(t.push(a.time),r.push(o)),a=e[i++]}while(void 0!==a)}}};function uo(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function co(e,t,r,n){uo.call(this,e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function fo(e,t,r,n){uo.call(this,e,t,r,n)}function ho(e,t,r,n){uo.call(this,e,t,r,n)}function po(e,t,r,n){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=lo.convertArray(t,this.TimeBufferType),this.values=lo.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function mo(e,t,r,n){po.call(this,e,t,r,n)}function vo(e,t,r,n){uo.call(this,e,t,r,n)}function go(e,t,r,n){po.call(this,e,t,r,n)}function yo(e,t,r,n){po.call(this,e,t,r,n)}function xo(e,t,r,n){po.call(this,e,t,r,n)}function bo(e,t,r){po.call(this,e,t,r)}function wo(e,t,r,n){po.call(this,e,t,r,n)}function _o(e,t,r,n){po.apply(this,arguments)}function Mo(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=Et.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function So(e){this.manager=void 0!==e?e:Da,this.textures={}}function To(e){this.manager=void 0!==e?e:Da}function Eo(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Po(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Da,this.withCredentials=!1}function Ao(e){this.manager=void 0!==e?e:Da,this.texturePath=""}function Co(e,t,r,n,i){var a=.5*(n-t),o=.5*(i-r),s=e*e;return(2*r-2*n+a+o)*(e*s)+(-3*r+3*n-2*a-o)*s+a*e+r}function Ro(e,t,r,n){return function(e,t){var r=1-e;return r*r*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,r)+function(e,t){return e*e*t}(e,n)}function Io(e,t,r,n,i){return function(e,t){var r=1-e;return r*r*r*t}(e,t)+function(e,t){var r=1-e;return 3*r*r*e*t}(e,r)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,i)}function Oo(){}function Lo(e,t){this.v1=e,this.v2=t}function Do(){this.curves=[],this.autoClose=!1}function No(e,t,r,n,i,a,o,s){this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=n,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0}function Vo(e){this.points=void 0===e?[]:e}function Fo(e,t,r,n){this.v0=e,this.v1=t,this.v2=r,this.v3=n}function Bo(e,t,r){this.v0=e,this.v1=t,this.v2=r}uo.prototype={constructor:uo,evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{var a;r:{n:if(!(e<n)){for(var o=r+2;;){if(void 0===n){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,i)}if(r===o)break;if(i=n,e<(n=t[++r]))break t}a=t.length;break r}if(e>=i)break e;var s=t[1];e<s&&(r=2,i=s);for(o=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===o)break;if(n=i,e>=(i=t[--r-1]))break t}a=r,r=0}for(;r<a;){var l=r+a>>>1;e<t[l]?a=l:r=l+1}if(n=t[r],void 0===(i=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,i,e)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n,a=0;a!==n;++a)t[a]=r[i+a];return t},interpolate_:function(e,t,r,n){throw new Error("call to abstract method")},intervalChanged_:function(e,t,r){}},(0,p.default)(uo.prototype,{beforeStart_:uo.prototype.copySampleValue_,afterEnd_:uo.prototype.copySampleValue_}),co.prototype=(0,p.default)((0,d.default)(uo.prototype),{constructor:co,DefaultSettings_:{endingStart:ft,endingEnd:ft},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,a=e+1,o=n[i],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:i=e,o=2*t-r;break;case 2402:o=t+n[i=n.length-2]-n[i+1];break;default:i=e,o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=e,s=2*r-t;break;case 2402:a=1,s=r+n[1]-n[0];break;default:a=e-1,s=t}var l=.5*(r-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-r),this._offsetPrev=i*u,this._offsetNext=a*u},interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,f=this._weightPrev,h=this._weightNext,d=(r-t)/(n-t),p=d*d,m=p*d,v=-f*m+2*f*p-f*d,g=(1+f)*m+(-1.5-2*f)*p+(-.5+f)*d+1,y=(-1-h)*m+(1.5+h)*p+.5*d,x=h*m-h*p,b=0;b!==o;++b)i[b]=v*a[u+b]+g*a[l+b]+y*a[s+b]+x*a[c+b];return i}}),fo.prototype=(0,p.default)((0,d.default)(uo.prototype),{constructor:fo,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(r-t)/(n-t),c=1-u,f=0;f!==o;++f)i[f]=a[l+f]*c+a[s+f]*u;return i}}),ho.prototype=(0,p.default)((0,d.default)(uo.prototype),{constructor:ho,interpolate_:function(e,t,r,n){return this.copySampleValue_(e-1)}}),no={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new ho(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new fo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new co(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}console.warn(r)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,n=r.length,i=0,a=n-1;i!==n&&r[i]<e;)++i;for(;-1!==a&&r[a]>t;)--a;if(++a,0!==i||a!==n){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=lo.arraySlice(r,i,a),this.values=lo.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("invalid value size in track",this),e=!1);var r=this.times,n=this.values,i=r.length;0===i&&(console.error("track is empty",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=r[o];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("out of order keys",this,o,s,a),e=!1;break}a=s}if(void 0!==n&&lo.isTypedArray(n)){o=0;for(var l=n.length;o!==l;++o){var u=n[o];if(isNaN(u)){console.error("value is not a valid number",this,o,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,r=this.getValueSize(),n=2302===this.getInterpolation(),i=1,a=e.length-1,o=1;o<a;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==l[0]))if(n)s=!0;else for(var u=o*r,c=u-r,f=u+r,h=0;h!==r;++h){var d=t[u+h];if(d!==t[c+h]||d!==t[f+h]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];var p=o*r,m=i*r;for(h=0;h!==r;++h)t[m+h]=t[p+h]}++i}}if(a>0){e[i]=e[a];for(p=a*r,m=i*r,h=0;h!==r;++h)t[m+h]=t[p+h];++i}return i!==e.length&&(this.times=lo.arraySlice(e,0,i),this.values=lo.arraySlice(t,0,i*r)),this}},mo.prototype=(0,p.default)((0,d.default)(no),{constructor:mo,ValueTypeName:"vector"}),vo.prototype=(0,p.default)((0,d.default)(uo.prototype),{constructor:vo,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=(r-t)/(n-t),u=s+o;s!==u;s+=4)Bt.slerpFlat(i,0,a,s-o,a,s,l);return i}}),go.prototype=(0,p.default)((0,d.default)(no),{constructor:go,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new vo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),yo.prototype=(0,p.default)((0,d.default)(no),{constructor:yo,ValueTypeName:"number"}),xo.prototype=(0,p.default)((0,d.default)(no),{constructor:xo,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),bo.prototype=(0,p.default)((0,d.default)(no),{constructor:bo,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),wo.prototype=(0,p.default)((0,d.default)(no),{constructor:wo,ValueTypeName:"color"}),_o.prototype=no,no.constructor=_o,(0,p.default)(_o,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=_o._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],n=[];lo.flattenJSON(e.keys,r,n,"value"),e.times=r,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:lo.convertArray(e.times,Array),values:lo.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yo;case"vector":case"vector2":case"vector3":case"vector4":return mo;case"color":return wo;case"quaternion":return go;case"bool":case"boolean":return bo;case"string":return xo}throw new Error("Unsupported typeName: "+e)}}),Mo.prototype={constructor:Mo,resetDuration:function(){for(var e=0,t=0,r=this.tracks.length;t!==r;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},(0,p.default)(Mo,{parse:function(e){for(var t=[],r=e.tracks,n=1/(e.fps||1),i=0,a=r.length;i!==a;++i)t.push(_o.parse(r[i]).scale(n));return new Mo(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t},i=0,a=r.length;i!==a;++i)t.push(_o.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(e,t,r,n){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],l=[];s.push((o+i-1)%i,o,(o+1)%i),l.push(0,1,0);var u=lo.getKeyframeOrder(s);s=lo.sortedArray(s,1,u),l=lo.sortedArray(l,1,u),n||0!==s[0]||(s.push(i),l.push(l[0])),a.push(new yo(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/r))}return new Mo(e,-1,a)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(i);if(l&&l.length>1){var u=n[f=l[1]];u||(n[f]=u=[]),u.push(s)}}var c=[];for(var f in n)c.push(Mo.CreateFromMorphTargetSequence(f,n[f],t,r));return c},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var r=function(e,t,r,n,i){if(0!==r.length){var a=[],o=[];lo.flattenJSON(r,a,o,n),0!==a.length&&i.push(new e(t,a,o))}},n=[],i=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},f=0;f<u.length;f++)if(u[f].morphTargets)for(var h=0;h<u[f].morphTargets.length;h++)c[u[f].morphTargets[h]]=-1;for(var d in c){var p=[],m=[];for(h=0;h!==u[f].morphTargets.length;++h){var v=u[f];p.push(v.time),m.push(v.morphTarget===d?1:0)}n.push(new yo(".morphTargetInfluence["+d+"]",p,m))}a=c.length*(o||1)}else{var g=".bones["+t[l].name+"]";r(mo,g+".position",u,"pos",n),r(go,g+".quaternion",u,"rot",n),r(mo,g+".scale",u,"scl",n)}}return 0===n.length?null:new Mo(i,a,n)}}),(0,p.default)(So.prototype,{load:function(e,t,r,n){var i=this;new Na(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var n=new Ia[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearCoat&&(n.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(n.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(n.uniforms=e.uniforms),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.shading&&(n.shading=e.shading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=r(e.map)),void 0!==e.alphaMap&&(n.alphaMap=r(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=r(e.normalMap)),void 0!==e.normalScale){var i=e.normalScale;!1===Array.isArray(i)&&(i=[i,i]),n.normalScale=(new Pt).fromArray(i)}if(void 0!==e.displacementMap&&(n.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=r(e.specularMap)),void 0!==e.envMap&&(n.envMap=r(e.envMap)),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.lightMap&&(n.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=r(e.gradientMap)),void 0!==e.materials)for(var a=0,o=e.materials.length;a<o;a++)n.materials.push(this.parse(e.materials[a]));return n}}),(0,p.default)(To.prototype,{load:function(e,t,r,n){var i=this;new Na(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e){var t=new Un,r=e.data.index,n={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==r){var i=new n[r.type](r.array);t.setIndex(new Sn(i,1))}var a=e.data.attributes;for(var o in a){var s=a[o];i=new n[s.type](s.array);t.addAttribute(o,new Sn(i,s.itemSize,s.normalized))}var l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(var u=0,c=l.length;u!==c;++u){var f=l[u];t.addGroup(f.start,f.count,f.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var d=new Ut;void 0!==h.center&&d.fromArray(h.center),t.boundingSphere=new en(d,h.radius)}return t}}),Eo.prototype={constructor:Eo,crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,r){for(var n=[],i=0;i<e.length;++i)n[i]=this.createMaterial(e[i],t,r);return n},createMaterial:(so={NoBlending:N,NormalBlending:V,AdditiveBlending:F,SubtractiveBlending:B,MultiplyBlending:U,CustomBlending:k},function(e,t,r){void 0===io&&(io=new Pr),void 0===ao&&(ao=new ka),void 0===oo&&(oo=new So);var n={};function i(e,i,a,o,s){var l,u=t+e,c=Eo.Handlers.get(u);null!==c?l=c.load(u):(ao.setCrossOrigin(r),l=ao.load(u)),void 0!==i&&(l.repeat.fromArray(i),1!==i[0]&&(l.wrapS=Ee),1!==i[1]&&(l.wrapT=Ee)),void 0!==a&&l.offset.fromArray(a),void 0!==o&&("repeat"===o[0]&&(l.wrapS=Ee),"mirror"===o[0]&&(l.wrapS=Ae),"repeat"===o[1]&&(l.wrapT=Ee),"mirror"===o[1]&&(l.wrapT=Ae)),void 0!==s&&(l.anisotropy=s);var f=Et.generateUUID();return n[f]=l,f}var a={uuid:Et.generateUUID(),type:"MeshLambertMaterial"};for(var o in e){var s=e[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":a.name=s;break;case"blending":a.blending=so[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",o,"is no longer supported.");break;case"colorDiffuse":a.color=io.fromArray(s).getHex();break;case"colorSpecular":a.specular=io.fromArray(s).getHex();break;case"colorEmissive":a.emissive=io.fromArray(s).getHex();break;case"specularCoef":a.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(a.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(a.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(a.type="MeshStandardMaterial");break;case"mapDiffuse":a.map=i(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":a.emissiveMap=i(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":a.lightMap=i(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":a.aoMap=i(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":a.bumpMap=i(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":a.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":a.normalMap=i(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":a.normalScale=[s,s];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":a.specularMap=i(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapReflectivity":a.reflectivityMap=i(s,e.mapReflectivityRepeat,e.mapReflectivityOffset,e.mapReflectivityWrap,e.mapReflectivityAnisotropy);break;case"mapReflectivityRepeat":case"mapReflectivityOffset":case"mapReflectivityWrap":case"mapReflectivityAnisotropy":break;case"mapMetalness":a.metalnessMap=i(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":a.roughnessMap=i(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":a.alphaMap=i(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":a.side=A;break;case"doubleSided":a.side=C;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),a.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":a[o]=s;break;case"vertexColors":!0===s&&(a.vertexColors=D),"face"===s&&(a.vertexColors=L);break;default:console.error("THREE.Loader.createMaterial: Unsupported",o,s)}}return"MeshBasicMaterial"===a.type&&delete a.emissive,"MeshPhongMaterial"!==a.type&&delete a.specular,a.opacity<1&&(a.transparent=!0),oo.setTextures(n),oo.parse(a)})},Eo.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,n=t.length;r<n;r+=2){var i=t[r],a=t[r+1];if(i.test(e))return a}return null}},(0,p.default)(Po.prototype,{load:function(e,t,r,n){var i=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Eo.prototype.extractUrlBase(e),o=new Na(this.manager);o.setWithCredentials(this.withCredentials),o.load(e,function(r){var n=JSON.parse(r),o=n.metadata;if(void 0!==o){var s=o.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var l=i.parse(n,a);t(l.geometry,l.materials)},r,n)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){var r=new Bn,n=void 0!==e.scale?1/e.scale:1;if(function(t){function n(e,t){return e&1<<t}var i,a,o,s,l,u,c,f,h,d,p,m,v,g,y,x,b,w,_,M,S,T,E,P,A,C,R,I=e.faces,O=e.vertices,L=e.normals,D=e.colors,N=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&N++;for(i=0;i<N;i++)r.faceVertexUvs[i]=[]}s=0,l=O.length;for(;s<l;)(w=new Ut).x=O[s++]*t,w.y=O[s++]*t,w.z=O[s++]*t,r.vertices.push(w);s=0,l=I.length;for(;s<l;)if(d=I[s++],p=n(d,0),m=n(d,1),v=n(d,3),g=n(d,4),y=n(d,5),x=n(d,6),b=n(d,7),p){if((M=new _n).a=I[s],M.b=I[s+1],M.c=I[s+3],(S=new _n).a=I[s+1],S.b=I[s+2],S.c=I[s+3],s+=4,m&&(h=I[s++],M.materialIndex=h,S.materialIndex=h),o=r.faces.length,v)for(i=0;i<N;i++)for(P=e.uvs[i],r.faceVertexUvs[i][o]=[],r.faceVertexUvs[i][o+1]=[],a=0;a<4;a++)f=I[s++],C=P[2*f],R=P[2*f+1],A=new Pt(C,R),2!==a&&r.faceVertexUvs[i][o].push(A),0!==a&&r.faceVertexUvs[i][o+1].push(A);if(g&&(c=3*I[s++],M.normal.set(L[c++],L[c++],L[c]),S.normal.copy(M.normal)),y)for(i=0;i<4;i++)c=3*I[s++],E=new Ut(L[c++],L[c++],L[c]),2!==i&&M.vertexNormals.push(E),0!==i&&S.vertexNormals.push(E);if(x&&(u=I[s++],T=D[u],M.color.setHex(T),S.color.setHex(T)),b)for(i=0;i<4;i++)u=I[s++],T=D[u],2!==i&&M.vertexColors.push(new Pr(T)),0!==i&&S.vertexColors.push(new Pr(T));r.faces.push(M),r.faces.push(S)}else{if((_=new _n).a=I[s++],_.b=I[s++],_.c=I[s++],m&&(h=I[s++],_.materialIndex=h),o=r.faces.length,v)for(i=0;i<N;i++)for(P=e.uvs[i],r.faceVertexUvs[i][o]=[],a=0;a<3;a++)f=I[s++],C=P[2*f],R=P[2*f+1],A=new Pt(C,R),r.faceVertexUvs[i][o].push(A);if(g&&(c=3*I[s++],_.normal.set(L[c++],L[c++],L[c])),y)for(i=0;i<3;i++)c=3*I[s++],E=new Ut(L[c++],L[c++],L[c]),_.vertexNormals.push(E);if(x&&(u=I[s++],_.color.setHex(D[u])),b)for(i=0;i<3;i++)u=I[s++],_.vertexColors.push(new Pr(D[u]));r.faces.push(_)}}(n),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var n=0,i=e.skinWeights.length;n<i;n+=t){var a=e.skinWeights[n],o=t>1?e.skinWeights[n+1]:0,s=t>2?e.skinWeights[n+2]:0,l=t>3?e.skinWeights[n+3]:0;r.skinWeights.push(new Nt(a,o,s,l))}if(e.skinIndices)for(var n=0,i=e.skinIndices.length;n<i;n+=t){var u=e.skinIndices[n],c=t>1?e.skinIndices[n+1]:0,f=t>2?e.skinIndices[n+2]:0,h=t>3?e.skinIndices[n+3]:0;r.skinIndices.push(new Nt(u,c,f,h))}r.bones=e.bones,r.bones&&r.bones.length>0&&(r.skinWeights.length!==r.skinIndices.length||r.skinIndices.length!==r.vertices.length)&&console.warn("When skinning, number of vertices ("+r.vertices.length+"), skinIndices ("+r.skinIndices.length+"), and skinWeights ("+r.skinWeights.length+") should match.")}(),function(t){if(void 0!==e.morphTargets)for(var n=0,i=e.morphTargets.length;n<i;n++){r.morphTargets[n]={},r.morphTargets[n].name=e.morphTargets[n].name,r.morphTargets[n].vertices=[];for(var a=r.morphTargets[n].vertices,o=e.morphTargets[n].vertices,s=0,l=o.length;s<l;s+=3){var u=new Ut;u.x=o[s]*t,u.y=o[s+1]*t,u.z=o[s+2]*t,a.push(u)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var c=r.faces,f=e.morphColors[0].colors,n=0,i=c.length;n<i;n++)c[n].color.fromArray(f,3*n)}}(n),function(){var t=[],n=[];void 0!==e.animation&&n.push(e.animation);void 0!==e.animations&&(e.animations.length?n=n.concat(e.animations):n.push(e.animations));for(var i=0;i<n.length;i++){var a=Mo.parseAnimation(n[i],r.bones);a&&t.push(a)}if(r.morphTargets){var o=Mo.CreateClipsFromMorphTargetSequences(r.morphTargets,10);t=t.concat(o)}t.length>0&&(r.animations=t)}(),r.computeFaceNormals(),r.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:r};var i=Eo.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:r,materials:i}}}),(0,p.default)(Ao.prototype,{load:function(e,t,r,n){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new Na(i.manager).load(e,function(r){var n=null;try{n=JSON.parse(r)}catch(t){return void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=n.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(n,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},r,n)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseGeometries(e.geometries),n=this.parseImages(e.images,function(){void 0!==t&&t(o)}),i=this.parseTextures(e.textures,n),a=this.parseMaterials(e.materials,i),o=this.parseObject(e.object,r,a);return e.animations&&(o.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(o),o},parseGeometries:function(e){var t={};if(void 0!==e)for(var r=new Po,n=new To,i=0,a=e.length;i<a;i++){var o,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new ga[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new ga[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new ga[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new ga[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new ga[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new ga[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":o=new ga[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new ga[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new ga[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new ga[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new ga[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":o=n.parse(s);break;case"Geometry":o=r.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),t[s.uuid]=o}return t},parseMaterials:function(e,t){var r={};if(void 0!==e){var n=new So;n.setTextures(t);for(var i=0,a=e.length;i<a;i++){var o=n.parse(e[i]);r[o.uuid]=o}}return r},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=Mo.parse(e[r]);t.push(n)}return t},parseImages:function(e,t){var r=this,n={};function i(e){return r.manager.itemStart(e),a.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemError(e)})}if(void 0!==e&&e.length>0){var a=new Ba(new La(t));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var l=e[o],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:r.texturePath+l.url;n[l.uuid]=i(u)}}return n},parseTextures:function(e,t){var r={UVMapping:300,CubeReflectionMapping:xe,CubeRefractionMapping:be,EquirectangularReflectionMapping:we,EquirectangularRefractionMapping:_e,SphericalReflectionMapping:Me,CubeUVReflectionMapping:Se,CubeUVRefractionMapping:Te},n={RepeatWrapping:Ee,ClampToEdgeWrapping:Pe,MirroredRepeatWrapping:Ae},i={NearestFilter:Ce,NearestMipMapNearestFilter:Re,NearestMipMapLinearFilter:Ie,LinearFilter:Oe,LinearMipMapNearestFilter:Le,LinearMipMapLinearFilter:De};function a(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var o={};if(void 0!==e)for(var s=0,l=e.length;s<l;s++){var u=e[s];void 0===u.image&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),void 0===t[u.image]&&console.warn("THREE.ObjectLoader: Undefined image",u.image);var c=new Dt(t[u.image]);c.needsUpdate=!0,c.uuid=u.uuid,void 0!==u.name&&(c.name=u.name),void 0!==u.mapping&&(c.mapping=a(u.mapping,r)),void 0!==u.offset&&c.offset.fromArray(u.offset),void 0!==u.repeat&&c.repeat.fromArray(u.repeat),void 0!==u.wrap&&(c.wrapS=a(u.wrap[0],n),c.wrapT=a(u.wrap[1],n)),void 0!==u.minFilter&&(c.minFilter=a(u.minFilter,i)),void 0!==u.magFilter&&(c.magFilter=a(u.magFilter,i)),void 0!==u.anisotropy&&(c.anisotropy=u.anisotropy),void 0!==u.flipY&&(c.flipY=u.flipY),o[u.uuid]=c}return o},parseObject:function(){var e=new kt;return function(t,r,n){var i;function a(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),r[e]}function o(e){if(void 0!==e)return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}switch(t.type){case"Scene":i=new fi,void 0!==t.background&&(0,s.default)(t.background)&&(i.background=new Pr(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new pi(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new di(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new Wn(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=(0,p.default)({},t.view));break;case"OrthographicCamera":i=new Xn(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":i=new ro(t.color,t.intensity);break;case"DirectionalLight":i=new to(t.color,t.intensity);break;case"PointLight":i=new Ka(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":i=new Qa(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new Ga(t.color,t.groundColor,t.intensity);break;case"Mesh":var l=a(t.geometry),u=o(t.material);i=l.bones&&l.bones.length>0?new wi(l,u):new kn(l,u);break;case"LOD":i=new yi;break;case"Line":i=new Mi(a(t.geometry),o(t.material),t.mode);break;case"LineSegments":i=new Si(a(t.geometry),o(t.material));break;case"PointCloud":case"Points":i=new Ei(a(t.geometry),o(t.material));break;case"Sprite":i=new gi(o(t.material));break;case"Group":i=new Pi;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:i=new xn}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.children)for(var c in t.children)i.add(this.parseObject(t.children[c],r,n));if("LOD"===t.type)for(var f=t.levels,h=0;h<f.length;h++){var d=f[h];void 0!==(c=i.getObjectByProperty("uuid",d.object))&&i.addLevel(c,d.distance)}return i}}()}),Oo.prototype={constructor:Oo,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){e||(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){e||(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,n=[],i=this.getPoint(0),a=0;for(n.push(0),r=1;r<=e;r++)a+=(t=this.getPoint(r/e)).distanceTo(i),n.push(a),i=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,n=this.getLengths(),i=0,a=n.length;r=t||e*n[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=n[i=Math.floor(s+(l-s)/2)]-r)<0)s=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(n[i=l]===r)return i/(a-1);var u=n[i];return(i+(r-u)/(n[i+1]-u))/(a-1)},getTangent:function(e){var t=e-1e-4,r=e+1e-4;t<0&&(t=0),r>1&&(r=1);var n=this.getPoint(t);return this.getPoint(r).clone().sub(n).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,n,i,a=new Ut,o=[],s=[],l=[],u=new Ut,c=new kt;for(r=0;r<=e;r++)n=r/e,o[r]=this.getTangentAt(n),o[r].normalize();s[0]=new Ut,l[0]=new Ut;var f=Number.MAX_VALUE,h=Math.abs(o[0].x),d=Math.abs(o[0].y),p=Math.abs(o[0].z);for(h<=f&&(f=h,a.set(1,0,0)),d<=f&&(f=d,a.set(0,1,0)),p<=f&&a.set(0,0,1),u.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],u),l[0].crossVectors(o[0],s[0]),r=1;r<=e;r++)s[r]=s[r-1].clone(),l[r]=l[r-1].clone(),u.crossVectors(o[r-1],o[r]),u.length()>v.default&&(u.normalize(),i=Math.acos(Et.clamp(o[r-1].dot(o[r]),-1,1)),s[r].applyMatrix4(c.makeRotationAxis(u,i))),l[r].crossVectors(o[r],s[r]);if(!0===t)for(i=Math.acos(Et.clamp(s[0].dot(s[e]),-1,1)),i/=e,o[0].dot(u.crossVectors(s[0],s[e]))>0&&(i=-i),r=1;r<=e;r++)s[r].applyMatrix4(c.makeRotationAxis(o[r],i*r)),l[r].crossVectors(o[r],s[r]);return{tangents:o,normals:s,binormals:l}}},Lo.prototype=(0,d.default)(Oo.prototype),Lo.prototype.constructor=Lo,Lo.prototype.isLineCurve=!0,Lo.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},Lo.prototype.getPointAt=function(e){return this.getPoint(e)},Lo.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},Do.prototype=(0,p.default)((0,d.default)(Oo.prototype),{constructor:Do,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Lo(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=t){var i=r[n]-t,a=this.curves[n],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e||(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],n=0,i=this.curves;n<i.length;n++)for(var a=i[n],o=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(r.push(u),t=u)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Bn,r=0,n=e.length;r<n;r++){var i=e[r];t.vertices.push(new Ut(i.x,i.y,i.z||0))}return t}}),No.prototype=(0,d.default)(Oo.prototype),No.prototype.constructor=No,No.prototype.isEllipseCurve=!0,No.prototype.getPoint=function(e){for(var t=2*Math.PI,r=this.aEndAngle-this.aStartAngle,n=Math.abs(r)<v.default;r<0;)r+=t;for(;r>t;)r-=t;r<v.default&&(r=n?0:t),!0!==this.aClockwise||n||(r===t?r=-t:r-=t);var i=this.aStartAngle+e*r,a=this.aX+this.xRadius*Math.cos(i),o=this.aY+this.yRadius*Math.sin(i);if(0!==this.aRotation){var s=Math.cos(this.aRotation),l=Math.sin(this.aRotation),u=a-this.aX,c=o-this.aY;a=u*s-c*l+this.aX,o=u*l+c*s+this.aY}return new Pt(a,o)},Vo.prototype=(0,d.default)(Oo.prototype),Vo.prototype.constructor=Vo,Vo.prototype.isSplineCurve=!0,Vo.prototype.getPoint=function(e){var t=this.points,r=(t.length-1)*e,n=Math.floor(r),i=r-n,a=t[0===n?n:n-1],o=t[n],s=t[n>t.length-2?t.length-1:n+1],l=t[n>t.length-3?t.length-1:n+2];return new Pt(Co(i,a.x,o.x,s.x,l.x),Co(i,a.y,o.y,s.y,l.y))},Fo.prototype=(0,d.default)(Oo.prototype),Fo.prototype.constructor=Fo,Fo.prototype.getPoint=function(e){var t=this.v0,r=this.v1,n=this.v2,i=this.v3;return new Pt(Io(e,t.x,r.x,n.x,i.x),Io(e,t.y,r.y,n.y,i.y))},Bo.prototype=(0,d.default)(Oo.prototype),Bo.prototype.constructor=Bo,Bo.prototype.getPoint=function(e){var t=this.v0,r=this.v1,n=this.v2;return new Pt(Ro(e,t.x,r.x,n.x),Ro(e,t.y,r.y,n.y))};var Uo,ko=(0,p.default)((0,d.default)(Do.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new Lo(this.currentPoint.clone(),new Pt(e,t));this.curves.push(r),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,n){var i=new Bo(this.currentPoint.clone(),new Pt(e,t),new Pt(r,n));this.curves.push(i),this.currentPoint.set(r,n)},bezierCurveTo:function(e,t,r,n,i,a){var o=new Fo(this.currentPoint.clone(),new Pt(e,t),new Pt(r,n),new Pt(i,a));this.curves.push(o),this.currentPoint.set(i,a)},splineThru:function(e){var t=new Vo([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,n,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,r,n,i,a)},absarc:function(e,t,r,n,i,a){this.absellipse(e,t,r,r,n,i,a)},ellipse:function(e,t,r,n,i,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,r,n,i,a,o,s)},absellipse:function(e,t,r,n,i,a,o,s){var l=new No(e,t,r,n,i,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)}});function zo(e){Do.call(this),this.currentPoint=new Pt,e&&this.fromPoints(e)}function Go(){zo.apply(this,arguments),this.holes=[]}function jo(){this.subPaths=[],this.currentPath=null}function Ho(e){this.data=e}function Wo(e){this.manager=void 0!==e?e:Da}function Xo(e){this.manager=void 0!==e?e:Da}zo.prototype=ko,ko.constructor=zo,Go.prototype=(0,p.default)((0,d.default)(ko),{constructor:Go,getPointsHoles:function(e){for(var t=[],r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),jo.prototype={moveTo:function(e,t){this.currentPath=new zo,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,n){this.currentPath.quadraticCurveTo(e,t,r,n)},bezierCurveTo:function(e,t,r,n,i,a){this.currentPath.bezierCurveTo(e,t,r,n,i,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],a=new Go;a.curves=i.curves,t.push(a)}return t}function n(e,t){for(var r=t.length,n=!1,i=r-1,a=0;a<r;i=a++){var o=t[i],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>v.default){if(u<0&&(o=t[a],l=-l,s=t[i],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return!0;if(c<0)continue;n=!n}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return n}var i=Qi.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return r(a);var o,s,l,u=[];if(1===a.length)return s=a[0],(l=new Go).curves=s.curves,u.push(l),u;var c=!i(a[0].getPoints());c=e?!c:c;var f,h,d=[],p=[],m=[],g=0;p[g]=void 0,m[g]=[];for(var y=0,x=a.length;y<x;y++)o=i(f=(s=a[y]).getPoints()),(o=e?!o:o)?(!c&&p[g]&&g++,p[g]={s:new Go,p:f},p[g].s.curves=s.curves,c&&g++,m[g]=[]):m[g].push({h:s,p:f[0]});if(!p[0])return r(a);if(p.length>1){for(var b=!1,w=[],_=0,M=p.length;_<M;_++)d[_]=[];for(_=0,M=p.length;_<M;_++)for(var S=m[_],T=0;T<S.length;T++){for(var E=S[T],P=!0,A=0;A<p.length;A++)n(E.p,p[A].p)&&(_!==A&&w.push({froms:_,tos:A,hole:T}),P?(P=!1,d[A].push(E)):b=!0);P&&d[_].push(E)}w.length>0&&(b||(m=d))}y=0;for(var C=p.length;y<C;y++){l=p[y].s,u.push(l);for(var R=0,I=(h=m[y]).length;R<I;R++)l.holes.push(h[R].h)}return u}},(0,p.default)(Ho.prototype,{isFont:!0,generateShapes:function(e,t,r){function n(e,t,n){var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,l,u,c,f,h,d,p,m,v,g=new jo,y=[];if(a.o)for(var x=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),b=0,w=x.length;b<w;){switch(x[b++]){case"m":o=x[b++]*t+n,s=x[b++]*t,g.moveTo(o,s);break;case"l":o=x[b++]*t+n,s=x[b++]*t,g.lineTo(o,s);break;case"q":if(l=x[b++]*t+n,u=x[b++]*t,h=x[b++]*t+n,d=x[b++]*t,g.quadraticCurveTo(h,d,l,u),v=y[y.length-1]){c=v.x,f=v.y;for(var _=1;_<=r;_++){Ro(M=_/r,c,h,l),Ro(M,f,d,u)}}break;case"b":if(l=x[b++]*t+n,u=x[b++]*t,h=x[b++]*t+n,d=x[b++]*t,p=x[b++]*t+n,m=x[b++]*t,g.bezierCurveTo(h,d,p,m,l,u),v=y[y.length-1]){c=v.x,f=v.y;for(_=1;_<=r;_++){var M;Io(M=_/r,c,h,p,l),Io(M,f,d,m,u)}}}}return{offset:a.ha*t,path:g}}}void 0===t&&(t=100),void 0===r&&(r=4);for(var i=this.data,a=function(e){for(var r=String(e).split(""),a=t/i.resolution,o=0,s=[],l=0;l<r.length;l++){var u=n(r[l],a,o);o+=u.offset,s.push(u.path)}return s}(e),o=[],s=0,l=a.length;s<l;s++)Array.prototype.push.apply(o,a[s].toShapes());return o}}),(0,p.default)(Wo.prototype,{load:function(e,t,r,n){var i=this;new Na(this.manager).load(e,function(e){var r;try{r=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var n=i.parse(r);t&&t(n)},r,n)},parse:function(e){return new Ho(e)}}),(0,p.default)(Xo.prototype,{_parseIESData:function(e){return new function(e){var t,r=this,n=e.split("\n"),i=0;function a(e){return(e=(e=(e=e.replace(/^\s+|\s+$/g,"")).replace(/,/g," ")).replace(/\s\s+/g," ")).split(" ")}function o(e,t){for(;;){for(var r=a(n[i++]),o=0;o<r.length;++o)t.push(Number(r[o]));if(t.length===e)break}}for(r.verAngles=[],r.horAngles=[],r.candelaValues=[],r.tiltData={},r.tiltData.angles=[],r.tiltData.mulFactors=[];;){var s;if((s=n[i++]).includes("TILT"))break}s.includes("NONE")||s.includes("INCLUDE")&&function(){var e=n[i++],t=a(e);r.tiltData.lampToLumGeometry=Number(t[0]),t=a(e=n[i++]),r.tiltData.numAngles=Number(t[0]),o(r.tiltData.numAngles,r.tiltData.angles),o(r.tiltData.numAngles,r.tiltData.mulFactors)}(),o(10,t=[]),r.count=Number(t[0]),r.lumens=Number(t[1]),r.multiplier=Number(t[2]),r.numVerAngles=Number(t[3]),r.numHorAngles=Number(t[4]),r.gonioType=Number(t[5]),r.units=Number(t[6]),r.width=Number(t[7]),r.length=Number(t[8]),r.height=Number(t[9]),function(){var e=[];o(3,e),r.ballFactor=Number(e[0]),r.blpFactor=Number(e[1]),r.inputWatts=Number(e[2])}();for(var l=0;l<r.numHorAngles;++l)r.candelaValues.push([]);for(o(r.numVerAngles,r.verAngles),o(r.numHorAngles,r.horAngles),l=0;l<r.numHorAngles;++l)o(r.numVerAngles,r.candelaValues[l]);for(l=0;l<r.numHorAngles;++l)for(var u=0;u<r.numVerAngles;++u)r.candelaValues[l][u]*=r.candelaValues[l][u]*r.multiplier*r.ballFactor*r.blpFactor;var c=-1;for(l=0;l<r.numHorAngles;++l)for(u=0;u<r.numVerAngles;++u){var f=r.candelaValues[l][u];c=c<f?f:c}if(c>0)for(l=0;l<r.numHorAngles;++l)for(u=0;u<r.numVerAngles;++u)r.candelaValues[l][u]/=c}(e)},_getIESValues:function(e){var t=new Uint8Array(64800);function r(t,r){for(var n=0,i=0,a=0,o=0,s=0,l=0,u=0;u<e.numHorAngles-1;++u)if(r<e.horAngles[u+1]||u==e.numHorAngles-2){i=u,a=e.horAngles[u],o=e.horAngles[u+1];break}for(u=0;u<e.numVerAngles-1;++u)if(t<e.verAngles[u+1]||u==e.numVerAngles-2){n=u,s=e.verAngles[u],l=e.verAngles[u+1];break}var c=o-a,f=l-s;if(0===f)return 0;var h=0===c?0:(r-a)/c,d=(t-s)/f,p=0===c?i:i+1,m=Et.lerp(e.candelaValues[i][n],e.candelaValues[p][n],h),v=Et.lerp(e.candelaValues[i][n+1],e.candelaValues[p][n+1],h),g=Et.lerp(m,v,d);return Math.floor(255*g)}for(var n=e.horAngles[0],i=e.horAngles[e.numHorAngles-1],a=0;a<64800;++a){var o=a%360,s=Math.floor(a/360);i-n!=0&&(o<n||o>=i)&&(o%=2*i)>i&&(o=2*i-o),t[a]=r(s,o)}return t},load:function(e,t,r,n){var i=new Na(this.manager);i.setResponseType("text");var a=this,o=new THREE.DataTexture(null,360,180,THREE.LuminanceFormat);return o.minFilter=THREE.LinearFilter,o.magFilter=THREE.LinearFilter,i.load(e,function(e){var r=a._parseIESData(e);o.image.data=a._getIESValues(r),o.needsUpdate=!0,void 0!==t&&t(o)},r,n),o}});var qo,Yo,Zo,Jo,Qo,Ko,$o,es,ts,rs,ns,is={getContext:function(){return void 0===Uo&&(Uo=new(window.AudioContext||window.webkitAudioContext)),Uo},setContext:function(e){Uo=e}};function as(e){this.manager=void 0!==e?e:Da}function os(e,t,r,n){za.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function ss(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Wn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Wn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function ls(e,t,r){xn.call(this),this.type="CubeCamera";var n=new Wn(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new Ut(1,0,0)),this.add(n);var i=new Wn(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Ut(-1,0,0)),this.add(i);var a=new Wn(90,1,e,t);a.up.set(0,0,1),a.lookAt(new Ut(0,1,0)),this.add(a);var o=new Wn(90,1,e,t);o.up.set(0,0,-1),o.lookAt(new Ut(0,-1,0)),this.add(o);var s=new Wn(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Ut(0,0,1)),this.add(s);var l=new Wn(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new Ut(0,0,-1)),this.add(l);var u={format:Ye,magFilter:Oe,minFilter:Oe,name:"cubeCamera"};this.renderTarget=new Ft(r,r,u),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,u=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,n,r),r.activeCubeFace=1,e.render(t,i,r),r.activeCubeFace=2,e.render(t,a,r),r.activeCubeFace=3,e.render(t,o,r),r.activeCubeFace=4,e.render(t,s,r),r.texture.generateMipmaps=u,r.activeCubeFace=5,e.render(t,l,r),e.setRenderTarget(null)}}function us(){xn.call(this),this.type="AudioListener",this.context=is.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function cs(e){xn.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function fs(e){cs.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function hs(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function ds(e,t,r){this.binding=e,this.valueSize=r;var n,i=Float64Array;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":i=Array,n=this._select;break;default:n=this._lerp}this.buffer=new i(4*r),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function ps(e,t,r){this.path=t,this.parsedPath=r||ps.parseTrackName(t),this.node=ps.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function ms(e){this.uuid=Et.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var r=0,n=arguments.length;r!==n;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function vs(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var n=t.tracks,i=n.length,a=new Array(i),o={endingStart:ft,endingEnd:ft},s=0;s!==i;++s){var l=n[s].createInterpolant(null);a[s]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ct,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function gs(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function ys(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function xs(){Un.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function bs(e,t,r,n){this.uuid=Et.generateUUID(),this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===n}function ws(e,t){this.uuid=Et.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function _s(e,t,r){ws.call(this,e,t),this.meshPerAttribute=r||1}function Ms(e,t,r){Sn.call(this,e,t),this.meshPerAttribute=r||1}function Ss(e,t,r,n){this.ray=new on(e,t),this.near=r||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},(0,f.default)(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Ts(e,t){return e.distance-t.distance}function Es(e,t,r,n){if(!1!==e.visible&&(e.raycast(t,r),!0===n))for(var i=e.children,a=0,o=i.length;a<o;a++)Es(i[a],t,r,!0)}function Ps(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function As(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function Cs(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}function Rs(e,t){kn.call(this,e,t),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length,n=r-1,i=r/1;this.createAnimation("__default",0,n,i),this.setAnimationWeight("__default",1)}function Is(e){xn.call(this),this.material=e,this.render=function(e){}}function Os(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16711680,a=void 0!==n?n:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new Un,u=new On(2*o*3,3);l.addAttribute("position",u),Si.call(this,l,new _i({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Ls(e){xn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new Un,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,i=1;n<32;n++,i++){var a=n/32*Math.PI*2,o=i/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}t.addAttribute("position",new On(r,3));var s=new _i({fog:!1});this.cone=new Si(t,s),this.add(this.cone),this.update()}function Ds(e){this.bones=this.getBoneList(e);for(var t=new Un,r=[],n=[],i=new Pr(0,0,1),a=new Pr(0,1,0),o=0;o<this.bones.length;o++){var s=this.bones[o];s.parent&&s.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),n.push(i.r,i.g,i.b),n.push(a.r,a.g,a.b))}t.addAttribute("position",new On(r,3)),t.addAttribute("color",new On(n,3));var l=new _i({vertexColors:D,depthTest:!1,depthWrite:!1,transparent:!0});Si.call(this,t,l),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Ns(e,t){this.light=e,this.light.updateMatrixWorld();var r=new ea(t,4,2),n=new Mn({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),kn.call(this,r,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Vs(e){xn.call(this),this.light=e,this.light.updateMatrixWorld();var t=new Mn({color:e.color,fog:!1}),r=new Mn({color:e.color,fog:!1,wireframe:!0}),n=new Un;n.addAttribute("position",new Sn(new Float32Array(18),3)),this.add(new kn(n,t)),this.add(new kn(n,r)),this.update()}function Fs(e,t){xn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var r=new Bi(t);r.rotateY(.5*Math.PI);var n=new Mn({vertexColors:D,wireframe:!0}),i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.addAttribute("color",new Sn(a,3)),this.add(new kn(r,n)),this.update()}function Bs(e,t,r,n){e=e||10,t=t||10,r=new Pr(void 0!==r?r:4473924),n=new Pr(void 0!==n?n:8947848);for(var i=t/2,a=2*e/t,o=[],s=[],l=0,u=0,c=-e;l<=t;l++,c+=a){o.push(-e,0,c,e,0,c),o.push(c,0,-e,c,0,e);var f=l===i?r:n;f.toArray(s,u),u+=3,f.toArray(s,u),u+=3,f.toArray(s,u),u+=3,f.toArray(s,u),u+=3}var h=new Un;h.addAttribute("position",new On(o,3)),h.addAttribute("color",new On(s,3));var d=new _i({vertexColors:D});Si.call(this,h,d)}function Us(e,t,r,n,i,a){e=e||10,t=t||16,r=r||8,n=n||64,i=new Pr(void 0!==i?i:4473924),a=new Pr(void 0!==a?a:8947848);var o,s,l,u,c,f,h,d=[],p=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),o=Math.sin(l)*e,s=Math.cos(l)*e,d.push(0,0,0),d.push(o,0,s),h=1&u?i:a,p.push(h.r,h.g,h.b),p.push(h.r,h.g,h.b);for(u=0;u<=r;u++)for(h=1&u?i:a,f=e-e/r*u,c=0;c<n;c++)l=c/n*(2*Math.PI),o=Math.sin(l)*f,s=Math.cos(l)*f,d.push(o,0,s),p.push(h.r,h.g,h.b),l=(c+1)/n*(2*Math.PI),o=Math.sin(l)*f,s=Math.cos(l)*f,d.push(o,0,s),p.push(h.r,h.g,h.b);var m=new Un;m.addAttribute("position",new On(d,3)),m.addAttribute("color",new On(p,3));var v=new _i({vertexColors:D});Si.call(this,m,v)}function ks(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16776960,a=void 0!==n?n:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Un,u=new On(2*o*3,3);l.addAttribute("position",u),Si.call(this,l,new _i({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function zs(e,t){xn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var r=new Un;r.addAttribute("position",new On([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var n=new _i({fog:!1});this.add(new Mi(r,n)),(r=new Un).addAttribute("position",new On([0,0,0,0,0,1],3)),this.add(new Mi(r,n)),this.update()}function Gs(e){var t=new Un,r=new _i({color:16777215,vertexColors:L}),n=[],i=[],a={},o=new Pr(16755200),s=new Pr(16711680),l=new Pr(43775),u=new Pr(16777215),c=new Pr(3355443);function f(e,t,r){h(e,r),h(t,r)}function h(e,t){n.push(0,0,0),i.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}f("n1","n2",o),f("n2","n4",o),f("n4","n3",o),f("n3","n1",o),f("f1","f2",o),f("f2","f4",o),f("f4","f3",o),f("f3","f1",o),f("n1","f1",o),f("n2","f2",o),f("n3","f3",o),f("n4","f4",o),f("p","n1",s),f("p","n2",s),f("p","n3",s),f("p","n4",s),f("u1","u2",l),f("u2","u3",l),f("u3","u1",l),f("c","t",u),f("p","c",c),f("cn1","cn2",c),f("cn3","cn4",c),f("cf1","cf2",c),f("cf3","cf4",c),t.addAttribute("position",new On(n,3)),t.addAttribute("color",new On(i,3)),Si.call(this,t,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function js(e,t){void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new Un;i.setIndex(new Sn(r,1)),i.addAttribute("position",new Sn(n,3)),Si.call(this,i,new _i({color:t})),void 0!==e&&this.update(e)}(0,p.default)(as.prototype,{load:function(e,t,r,n){var i=new Na(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){is.getContext().decodeAudioData(e,function(e){t(e)})},r,n)}}),os.prototype=(0,p.default)((0,d.default)(za.prototype),{constructor:os,isRectAreaLight:!0,copy:function(e){return za.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this}}),(0,p.default)(ss.prototype,{update:(es=new kt,ts=new kt,function(e){if(qo!==this||Yo!==e.focus||Zo!==e.fov||Jo!==e.aspect*this.aspect||Qo!==e.near||Ko!==e.far||$o!==e.zoom){qo=this,Yo=e.focus,Zo=e.fov,Jo=e.aspect*this.aspect,Qo=e.near,Ko=e.far,$o=e.zoom;var t,r,n=e.projectionMatrix.clone(),i=this.eyeSep/2,a=i*Qo/Yo,o=Qo*Math.tan(Et.DEG2RAD*Zo*.5)/$o;ts.elements[12]=-i,es.elements[12]=i,t=-o*Jo+a,r=o*Jo+a,n.elements[0]=2*Qo/(r-t),n.elements[8]=(r+t)/(r-t),this.cameraL.projectionMatrix.copy(n),t=-o*Jo-a,r=o*Jo-a,n.elements[0]=2*Qo/(r-t),n.elements[8]=(r+t)/(r-t),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ts),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(es)})}),ls.prototype=(0,d.default)(xn.prototype),ls.prototype.constructor=ls,us.prototype=(0,p.default)((0,d.default)(xn.prototype),{constructor:us,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new Ut,t=new Bt,r=new Ut,n=new Ut;return function(i){xn.prototype.updateMatrixWorld.call(this,i);var a=this.context.listener,o=this.up;this.matrixWorld.decompose(e,t,r),n.set(0,0,-1).applyQuaternion(t),a.positionX?(a.positionX.setValueAtTime(e.x,this.context.currentTime),a.positionY.setValueAtTime(e.y,this.context.currentTime),a.positionZ.setValueAtTime(e.z,this.context.currentTime),a.forwardX.setValueAtTime(n.x,this.context.currentTime),a.forwardY.setValueAtTime(n.y,this.context.currentTime),a.forwardZ.setValueAtTime(n.z,this.context.currentTime),a.upX.setValueAtTime(o.x,this.context.currentTime),a.upY.setValueAtTime(o.y,this.context.currentTime),a.upZ.setValueAtTime(o.z,this.context.currentTime)):(a.setPosition(e.x,e.y,e.z),a.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z))}}()}),cs.prototype=(0,p.default)((0,d.default)(xn.prototype),{constructor:cs,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),fs.prototype=(0,p.default)((0,d.default)(cs.prototype),{constructor:fs,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Ut;return function(t){xn.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),(0,p.default)(hs.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),ds.prototype={constructor:ds,accumulate:function(e,t){var r=this.buffer,n=this.valueSize,i=e*n+n,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==n;++o)r[i+o]=r[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=3*t;this._mixBufferRegion(r,n,o,1-i,t)}for(var s=t,l=t+t;s!==l;++s)if(r[s]!==r[s+t]){a.setValue(r,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,n=3*r;e.getValue(t,n);for(var i=r,a=n;i!==a;++i)t[i]=t[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,n,i){if(n>=.5)for(var a=0;a!==i;++a)e[t+a]=e[r+a]},_slerp:function(e,t,r,n,i){Bt.slerpFlat(e,t,e,t,e,r,n)},_lerp:function(e,t,r,n,i){for(var a=1-n,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[r+o]*n}}},ps.prototype={constructor:ps,getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(e||(e=ps.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var a=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[r])return void console.error("  can not bind to objectName of node, undefined",this);e=e[r]}if(void 0!==a){if(void 0===e[a])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[a]}}var s=e[n];if(void 0!==s){var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===i){i=o;break}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):void 0!==s.length?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=t.nodeName;console.error("  trying to update property for track: "+c+"."+n+" but it wasn't found.",e)}}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},(0,p.default)(ps.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:ps.prototype.getValue,_setValue_unbound:ps.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)e[t++]=r[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),ps.Composite=function(e,t,r){var n=r||ps.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)},ps.Composite.prototype={constructor:ps.Composite,getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},ps.create=function(e,t,r){return e&&e.isAnimationObjectGroup?new ps.Composite(e,t,r):new ps(e,t,r)},ps.parseTrackName=function(e){var t=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(e);if(!t)throw new Error("cannot parse trackName at all: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};if(null===r.propertyName||0===r.propertyName.length)throw new Error("can not parse propertyName from trackName: "+e);return r},ps.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=function(e){for(var r=0;r<e.bones.length;r++){var n=e.bones[r];if(n.name===t)return n}return null}(e.skeleton);if(r)return r}if(e.children){var n=function e(r){for(var n=0;n<r.length;n++){var i=r[n];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(n)return n}return null},ms.prototype={constructor:ms,isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,r=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,a=this._paths,o=this._parsedPaths,s=this._bindings,l=s.length,u=0,c=arguments.length;u!==c;++u){var f=arguments[u],h=f.uuid,d=i[h],p=void 0;if(void 0===d){d=r++,i[h]=d,t.push(f);for(var m=0,v=l;m!==v;++m)s[m].push(new ps(f,a[m],o[m]))}else if(d<n){p=t[d];var g=--n,y=t[g];i[y.uuid]=d,t[d]=y,i[h]=g,t[g]=f;for(m=0,v=l;m!==v;++m){var x=s[m],b=x[g],w=x[d];x[d]=b,void 0===w&&(w=new ps(f,a[m],o[m])),x[g]=w}}else t[d]!==p&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=n},remove:function(e){for(var t=this._objects,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=n[u];if(void 0!==c&&c>=r){var f=r++,h=t[f];n[h.uuid]=c,t[c]=h,n[u]=f,t[f]=l;for(var d=0,p=a;d!==p;++d){var m=i[d],v=m[f],g=m[c];m[c]=v,m[f]=g}}}this.nCachedObjects_=r},uncache:function(e){for(var t=this._objects,r=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,a=this._bindings,o=a.length,s=0,l=arguments.length;s!==l;++s){var u=arguments[s].uuid,c=i[u];if(void 0!==c)if(delete i[u],c<n){var f=--n,h=t[f],d=t[y=--r];i[h.uuid]=c,t[c]=h,i[d.uuid]=f,t[f]=d,t.pop();for(var p=0,m=o;p!==m;++p){var v=(x=a[p])[f],g=x[y];x[c]=v,x[f]=g,x.pop()}}else{var y;i[(d=t[y=--r]).uuid]=c,t[c]=d,t.pop();for(p=0,m=o;p!==m;++p){var x;(x=a[p])[c]=x[y],x.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(void 0!==n)return i[n];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);n=i.length,r[e]=n,a.push(e),o.push(t),i.push(c);for(var f=u,h=s.length;f!==h;++f){var d=s[f];c[f]=new ps(d,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=r,a[r]=s,a.pop(),i[r]=i[o],i.pop(),n[r]=n[o],n.pop()}}},vs.prototype={constructor:vs,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var n=this._clip.duration,i=e._clip.duration,a=i/n,o=n/i;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+r,l[0]=e/o,l[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){var i=this._startTime;if(null!==i){var a=(e-i)*r;if(a<0||0===r)return;this._startTime=null,t=r*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulate(n,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r)t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var r=this._clip.duration,n=this.loop,i=this._loopCount;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=2202===n;if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=r||t<0){var o=Math.floor(t/r);t-=r*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&i))return this.time=t,r-t}return this.time=t,t},_setEndings:function(e,t,r){var n=this._interpolantSettings;r?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=e?this.zeroSlopeAtStart?2401:ft:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:ft:2402)},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=r,this}},gs.prototype={constructor:gs,clipAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?Mo.findByName(r,e):e,a=null!==i?i.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[n];if(void 0!==l)return l;s=o.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new vs(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,a,n),u},existingAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?Mo.findByName(r,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[n]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==n;++i)r[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=(0,m.default)(e),a=this._accuIndex^=1,o=0;o!==r;++o){var s=t[o];s.enabled&&s._update(n,e,i,a)}var l=this._bindings,u=this._nActiveBindings;for(o=0;o!==u;++o)l[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}},(0,p.default)(gs.prototype,{_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,a=e._propertyBindings,o=e._interpolants,s=r.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==i;++c){var f=n[c],h=f.name,d=u[h];if(void 0!==d)a[c]=d;else{if(void 0!==(d=a[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,h));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(d=new ds(ps.create(r,h,p),f.ValueTypeName,f.getValueSize())).referenceCount,this._addInactiveBinding(d,s,h),a[c]=d}o[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=n.length,n.push(e),a.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],a=this._bindings;void 0===i&&(i={},n[t]=i),i[r]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,a=this._bindingsByRootAndName,o=a[n],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i];e:{for(var u in o)break e;delete a[n]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&((r=new fo(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),(0,p.default)(gs.prototype,t.prototype),ys.prototype.clone=function(){return new ys(void 0===this.value.clone?this.value:this.value.clone())},xs.prototype=(0,d.default)(Un.prototype),xs.prototype.constructor=xs,xs.prototype.isInstancedBufferGeometry=!0,xs.prototype.addGroup=function(e,t,r){this.groups.push({start:e,count:t,materialIndex:r})},xs.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var r=e.attributes;for(var n in r){var i=r[n];this.addAttribute(n,i.clone())}for(var a=e.groups,o=0,s=a.length;o<s;o++){var l=a[o];this.addGroup(l.start,l.count,l.materialIndex)}return this},bs.prototype={constructor:bs,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}},ws.prototype={constructor:ws,isInterleavedBuffer:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}},_s.prototype=(0,d.default)(ws.prototype),_s.prototype.constructor=_s,_s.prototype.isInstancedInterleavedBuffer=!0,_s.prototype.copy=function(e){return ws.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},Ms.prototype=(0,d.default)(Sn.prototype),Ms.prototype.constructor=Ms,Ms.prototype.isInstancedBufferAttribute=!0,Ms.prototype.copy=function(e){return Sn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},Ss.prototype={constructor:Ss,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var r=[];return Es(e,this,r,t),r.sort(Ts),r},intersectObjects:function(e,t){var r=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var n=0,i=e.length;n<i;n++)Es(e[n],this,r,t);return r.sort(Ts),r}},Ps.prototype={constructor:Ps,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=(performance||Date).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},As.prototype={constructor:As,set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Et.clamp(e.y/this.radius,-1,1))),this}},Cs.prototype={constructor:Cs,set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}},Rs.prototype=(0,d.default)(kn.prototype),Rs.prototype.constructor=Rs,Rs.prototype.createAnimation=function(e,t,r,n){var i={start:t,end:r,length:r-t+1,fps:n,duration:(r-t)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},Rs.prototype.autoCreateAnimations=function(e){for(var t,r=/([a-z]+)_?(\d+)/i,n={},i=this.geometry,a=0,o=i.morphTargets.length;a<o;a++){var s=i.morphTargets[a].name.match(r);if(s&&s.length>1)n[l=s[1]]||(n[l]={start:1/0,end:-1/0}),a<(u=n[l]).start&&(u.start=a),a>u.end&&(u.end=a),t||(t=l)}for(var l in n){var u=n[l];this.createAnimation(l,u.start,u.end,e)}this.firstAnimation=t},Rs.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},Rs.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},Rs.prototype.setAnimationFPS=function(e,t){var r=this.animationsMap[e];r&&(r.fps=t,r.duration=(r.end-r.start)/r.fps)},Rs.prototype.setAnimationDuration=function(e,t){var r=this.animationsMap[e];r&&(r.duration=t,r.fps=(r.end-r.start)/r.duration)},Rs.prototype.setAnimationWeight=function(e,t){var r=this.animationsMap[e];r&&(r.weight=t)},Rs.prototype.setAnimationTime=function(e,t){var r=this.animationsMap[e];r&&(r.time=t)},Rs.prototype.getAnimationTime=function(e){var t=0,r=this.animationsMap[e];return r&&(t=r.time),t},Rs.prototype.getAnimationDuration=function(e){var t=-1,r=this.animationsMap[e];return r&&(t=r.duration),t},Rs.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},Rs.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},Rs.prototype.update=function(e){for(var t=0,r=this.animationsList.length;t<r;t++){var n=this.animationsList[t];if(n.active){var i=n.duration/n.length;n.time+=n.direction*e,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var a=n.start+Et.clamp(Math.floor(n.time/i),0,n.length-1),o=n.weight;a!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*o,this.morphTargetInfluences[a]=0,n.lastFrame=n.currentFrame,n.currentFrame=a);var s=n.time%i/i;n.directionBackwards&&(s=1-s),n.currentFrame!==n.lastFrame?(this.morphTargetInfluences[n.currentFrame]=s*o,this.morphTargetInfluences[n.lastFrame]=(1-s)*o):this.morphTargetInfluences[n.currentFrame]=o}}},Is.prototype=(0,d.default)(xn.prototype),Is.prototype.constructor=Is,Is.prototype.isImmediateRenderObject=!0,Os.prototype=(0,d.default)(Si.prototype),Os.prototype.constructor=Os,Os.prototype.update=function(){var e=new Ut,t=new Ut,r=new tn;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,l=o.faces,u=0,c=0,f=l.length;c<f;c++)for(var h=l[c],d=0,p=h.vertexNormals.length;d<p;d++){var m=s[h[n[d]]],v=h.vertexNormals[d];e.copy(m).applyMatrix4(i),t.copy(v).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}else if(o&&o.isBufferGeometry){var g=o.attributes.position,y=o.attributes.normal;for(u=0,d=0,p=g.count;d<p;d++)e.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(i),t.set(y.getX(d),y.getY(d),y.getZ(d)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}return a.needsUpdate=!0,this}}(),Ls.prototype=(0,d.default)(xn.prototype),Ls.prototype.constructor=Ls,Ls.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Ls.prototype.update=(rs=new Ut,ns=new Ut,function(){var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),rs.setFromMatrixPosition(this.light.matrixWorld),ns.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ns.sub(rs)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}),Ds.prototype=(0,d.default)(Si.prototype),Ds.prototype.constructor=Ds,Ds.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,this.getBoneList(e.children[r]));return t},Ds.prototype.update=function(){var e=new Ut,t=new kt,r=new kt;return function(){var n=this.geometry,i=n.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var a=0,o=0;a<this.bones.length;a++){var s=this.bones[a];s.parent&&s.parent.isBone&&(t.multiplyMatrices(r,s.matrixWorld),e.setFromMatrixPosition(t),i.setXYZ(o,e.x,e.y,e.z),t.multiplyMatrices(r,s.parent.matrixWorld),e.setFromMatrixPosition(t),i.setXYZ(o+1,e.x,e.y,e.z),o+=2)}n.getAttribute("position").needsUpdate=!0}}(),Ns.prototype=(0,d.default)(kn.prototype),Ns.prototype.constructor=Ns,Ns.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Ns.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},Vs.prototype=(0,d.default)(xn.prototype),Vs.prototype.constructor=Vs,Vs.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},Vs.prototype.update=function(){var e=new Ut,t=new Ut;return function(){var r=this.children[0],n=this.children[1];if(this.light.target){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld);var i=t.clone().sub(e);r.lookAt(i),n.lookAt(i)}r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var a=.5*this.light.width,o=.5*this.light.height,s=r.geometry.getAttribute("position"),l=s.array;l[0]=a,l[1]=-o,l[2]=0,l[3]=a,l[4]=o,l[5]=0,l[6]=-a,l[7]=o,l[8]=0,l[9]=-a,l[10]=o,l[11]=0,l[12]=-a,l[13]=-o,l[14]=0,l[15]=a,l[16]=-o,l[17]=0,s.needsUpdate=!0}}(),Fs.prototype=(0,d.default)(xn.prototype),Fs.prototype.constructor=Fs,Fs.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Fs.prototype.update=function(){var e=new Ut,t=new Pr,r=new Pr;return function(){var n=this.children[0],i=n.geometry.getAttribute("color");t.copy(this.light.color).multiplyScalar(this.light.intensity),r.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var a=0,o=i.count;a<o;a++){var s=a<o/2?t:r;i.setXYZ(a,s.r,s.g,s.b)}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),i.needsUpdate=!0}}(),Bs.prototype=(0,d.default)(Si.prototype),Bs.prototype.constructor=Bs,Us.prototype=(0,d.default)(Si.prototype),Us.prototype.constructor=Us,ks.prototype=(0,d.default)(Si.prototype),ks.prototype.constructor=ks,ks.prototype.update=function(){var e=new Ut,t=new Ut,r=new tn;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,i=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,l=0,u=0,c=s.length;u<c;u++){var f=s[u],h=f.normal;e.copy(o[f.a]).add(o[f.b]).add(o[f.c]).divideScalar(3).applyMatrix4(n),t.copy(h).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),i.setXYZ(l,e.x,e.y,e.z),l+=1,i.setXYZ(l,t.x,t.y,t.z),l+=1}return i.needsUpdate=!0,this}}(),zs.prototype=(0,d.default)(xn.prototype),zs.prototype.constructor=zs,zs.prototype.isDirectionalLightHeper=!0,zs.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},zs.prototype.update=function(){var e=new Ut,t=new Ut,r=new Ut;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e);var n=this.children[0],i=this.children[1];n.lookAt(r),n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.lookAt(r),i.scale.z=r.length()}}(),Gs.prototype=(0,d.default)(Si.prototype),Gs.prototype.constructor=Gs,Gs.prototype.isCameraHelper=!0,Gs.prototype.update=function(){var e,t,r=new Ut,n=new jn;function i(i,a,o,s){r.set(a,o,s).unproject(n);var l=t[i];if(void 0!==l)for(var u=e.getAttribute("position"),c=0,f=l.length;c<f;c++)u.setXYZ(l[c],r.x,r.y,r.z)}return function(){e=this.geometry,t=this.pointMap;n.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),js.prototype=(0,d.default)(Si.prototype),js.prototype.constructor=js,js.prototype.update=function(){var e=new $r;return function(t){if(t&&t.isBox3?e.copy(t):e.setFromObject(t),!e.isEmpty()){var r=e.min,n=e.max,i=this.geometry.attributes.position,a=i.array;a[0]=n.x,a[1]=n.y,a[2]=n.z,a[3]=r.x,a[4]=n.y,a[5]=n.z,a[6]=r.x,a[7]=r.y,a[8]=n.z,a[9]=n.x,a[10]=r.y,a[11]=n.z,a[12]=n.x,a[13]=n.y,a[14]=r.z,a[15]=r.x,a[16]=n.y,a[17]=r.z,a[18]=r.x,a[19]=r.y,a[20]=r.z,a[21]=n.x,a[22]=r.y,a[23]=r.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var Hs=new Un;Hs.addAttribute("position",new On([0,0,0,0,1,0],3));var Ws,Xs,qs,Ys,Zs,Js,Qs=new ca(0,.5,1,5,1);function Ks(e,t,r,n,i,a){xn.call(this),void 0===n&&(n=16776960),void 0===r&&(r=1),void 0===i&&(i=.2*r),void 0===a&&(a=.2*i),this.position.copy(t),this.line=new Mi(Hs,new _i({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new kn(Qs,new Mn({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,i,a)}function $s(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new Un;r.addAttribute("position",new On(t,3)),r.addAttribute("color",new On([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var n=new _i({vertexColors:D});Si.call(this,r,n)}function el(){var e=0,t=0,r=0,n=0;function i(i,a,o,s){e=i,t=o,r=-3*i+3*a-2*o-s,n=2*i-2*a+o+s}return{initCatmullRom:function(e,t,r,n,a){i(t,r,a*(r-e),a*(n-t))},initNonuniformCatmullRom:function(e,t,r,n,a,o,s){var l=(t-e)/a-(r-e)/(a+o)+(r-t)/o,u=(r-t)/o-(n-t)/(o+s)+(n-r)/s;i(t,r,l*=o,u*=o)},calc:function(i){var a=i*i;return e+t*i+r*a+n*(a*i)}}}function tl(e){this.points=e||[],this.closed=!1}function rl(e,t,r,n){this.v0=e,this.v1=t,this.v2=r,this.v3=n}function nl(e,t,r){this.v0=e,this.v1=t,this.v2=r}function il(e,t){this.v1=e,this.v2=t}function al(e,t,r,n,i,a){No.call(this,e,t,r,r,n,i,a)}Qs.translate(0,-.5,0),Ks.prototype=(0,d.default)(xn.prototype),Ks.prototype.constructor=Ks,Ks.prototype.setDirection=(Xs=new Ut,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(Xs.set(e.z,0,-e.x).normalize(),Ws=Math.acos(e.y),this.quaternion.setFromAxisAngle(Xs,Ws))}),Ks.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},Ks.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},$s.prototype=(0,d.default)(Si.prototype),$s.prototype.constructor=$s,tl.prototype=(0,d.default)(Oo.prototype),tl.prototype.constructor=tl,tl.prototype.getPoint=(qs=new Ut,Ys=new el,Zs=new el,Js=new el,function(e){var t=this.points,r=t.length;r<2&&console.log("duh, you need at least 2 points");var n,i,a,o,s=(r-(this.closed?0:1))*e,l=Math.floor(s),u=s-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/t.length)+1)*t.length:0===u&&l===r-1&&(l=r-2,u=1),this.closed||l>0?n=t[(l-1)%r]:(qs.subVectors(t[0],t[1]).add(t[0]),n=qs),i=t[l%r],a=t[(l+1)%r],this.closed||l+2<r?o=t[(l+2)%r]:(qs.subVectors(t[r-1],t[r-2]).add(t[r-1]),o=qs),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var c="chordal"===this.type?.5:.25,f=Math.pow(n.distanceToSquared(i),c),h=Math.pow(i.distanceToSquared(a),c),d=Math.pow(a.distanceToSquared(o),c);h<1e-4&&(h=1),f<1e-4&&(f=h),d<1e-4&&(d=h),Ys.initNonuniformCatmullRom(n.x,i.x,a.x,o.x,f,h,d),Zs.initNonuniformCatmullRom(n.y,i.y,a.y,o.y,f,h,d),Js.initNonuniformCatmullRom(n.z,i.z,a.z,o.z,f,h,d)}else if("catmullrom"===this.type){var p=void 0!==this.tension?this.tension:.5;Ys.initCatmullRom(n.x,i.x,a.x,o.x,p),Zs.initCatmullRom(n.y,i.y,a.y,o.y,p),Js.initCatmullRom(n.z,i.z,a.z,o.z,p)}return new Ut(Ys.calc(u),Zs.calc(u),Js.calc(u))}),rl.prototype=(0,d.default)(Oo.prototype),rl.prototype.constructor=rl,rl.prototype.getPoint=function(e){var t=this.v0,r=this.v1,n=this.v2,i=this.v3;return new Ut(Io(e,t.x,r.x,n.x,i.x),Io(e,t.y,r.y,n.y,i.y),Io(e,t.z,r.z,n.z,i.z))},nl.prototype=(0,d.default)(Oo.prototype),nl.prototype.constructor=nl,nl.prototype.getPoint=function(e){var t=this.v0,r=this.v1,n=this.v2;return new Ut(Ro(e,t.x,r.x,n.x),Ro(e,t.y,r.y,n.y),Ro(e,t.z,r.z,n.z))},il.prototype=(0,d.default)(Oo.prototype),il.prototype.constructor=il,il.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=new Ut;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t},al.prototype=(0,d.default)(No.prototype),al.prototype.constructor=al;var ol={createMultiMaterialObject:function(e,t){for(var r=new Pi,n=0,i=t.length;n<i;n++)r.add(new kn(e,t[n]));return r},detach:function(e,t,r){e.applyMatrix(t.matrixWorld),t.remove(e),r.add(e)},attach:function(e,t,r){var n=new kt;n.getInverse(r.matrixWorld),e.applyMatrix(n),t.remove(e),r.add(e)}};function sl(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),tl.call(this,e),this.type="catmullrom",this.closed=!0}function ll(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),tl.call(this,e),this.type="catmullrom"}function ul(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),tl.call(this,e),this.type="catmullrom"}Oo.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=(0,d.default)(Oo.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},sl.prototype=(0,d.default)(tl.prototype),ll.prototype=(0,d.default)(tl.prototype),ul.prototype=(0,d.default)(tl.prototype),(0,p.default)(ul.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Bs.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},(0,p.default)(Or.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),(0,p.default)($r.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),bn.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Et.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},(0,p.default)(tn.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToBuffer:function(e,t,r){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,r){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),(0,p.default)(kt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Ut),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,r){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,r){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,r,i,a)}}),rn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Bt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},(0,p.default)(on.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),(0,p.default)(Go.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ki(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new la(this,e)}}),(0,p.default)(Pt.prototype,{fromAttribute:function(e,t,r){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),(0,p.default)(Ut.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),(0,p.default)(Nt.prototype,{fromAttribute:function(e,t,r){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),Bn.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},(0,p.default)(xn.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),(0,f.default)(xn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),(0,f.default)(yi.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Wn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},(0,f.default)(za.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),(0,f.default)(Sn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),(0,p.default)(Un.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),(0,f.default)(Un.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),(0,f.default)(ys.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),(0,f.default)(Vr.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new Pr}}}),(0,f.default)(Ma.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),(0,f.default)(Fr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),(0,p.default)(hi.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),(0,f.default)(hi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),(0,f.default)(an.prototype,{cullFace:{get:function(){return this.renderReverseSided?_:w},set:function(e){var t=e!==w;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),(0,f.default)(Vt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),cs.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new as).load(e,function(e){t.setBuffer(e)}),this},hs.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var cl={merge:function(e,t,r){var n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},fl={crossOrigin:void 0,loadTexture:function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new ka;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,r,void 0,n);return t&&(a.mapping=t),a},loadTextureCube:function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Ua;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,r,void 0,n);return t&&(a.mapping=t),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};Pt.InstanceScalarSize=2,Ut.InstanceScalarSize=3,Nt.InstanceScalarSize=4,Pr.InstanceScalarSize=3,Bt.InstanceScalarSize=4,tn.InstanceScalarSize=9,kt.InstanceScalarSize=16,e.WebGLRenderTargetCube=Ft,e.WebGLRenderTarget=Vt,e.WebGLRenderer=hi,e.ShaderLib=Ir,e.UniformsLib=Rr,e.UniformsUtils=Tr,e.ShaderChunk=Er,e.FogExp2=di,e.Fog=pi,e.Scene=fi,e.LensFlare=mi,e.Sprite=gi,e.LOD=yi,e.SkinnedMesh=wi,e.Skeleton=xi,e.Bone=bi,e.Mesh=kn,e.LineSegments=Si,e.Line=Mi,e.Points=Ei,e.Group=Pi,e.VideoTexture=Ai,e.DataTexture=Cr,e.CompressedTexture=Ci,e.CubeTexture=zt,e.CanvasTexture=Ri,e.DepthTexture=Ii,e.Texture=Dt,e.CompressedTextureLoader=Va,e.DataTextureLoader=Fa,e.CubeTextureLoader=Ua,e.TextureLoader=ka,e.ObjectLoader=Ao,e.MaterialLoader=So,e.BufferGeometryLoader=To,e.DefaultLoadingManager=Da,e.LoadingManager=La,e.JSONLoader=Po,e.ImageLoader=Ba,e.FontLoader=Wo,e.IESLoader=Xo,e.FileLoader=Na,e.Loader=Eo,e.Cache=Oa,e.AudioLoader=as,e.SpotLightShadow=Ja,e.SpotLight=Qa,e.PointLight=Ka,e.RectAreaLight=os,e.HemisphereLight=Ga,e.DirectionalLightShadow=eo,e.DirectionalLight=to,e.AmbientLight=ro,e.LightShadow=Za,e.Light=za,e.StereoCamera=ss,e.PerspectiveCamera=Wn,e.OrthographicCamera=Xn,e.CubeCamera=ls,e.Camera=jn,e.CameraJitter=ja,e.AudioListener=us,e.PositionalAudio=fs,e.AudioContext=is,e.AudioAnalyser=hs,e.Audio=cs,e.VectorKeyframeTrack=mo,e.StringKeyframeTrack=xo,e.QuaternionKeyframeTrack=go,e.NumberKeyframeTrack=yo,e.ColorKeyframeTrack=wo,e.BooleanKeyframeTrack=bo,e.PropertyMixer=ds,e.PropertyBinding=ps,e.KeyframeTrack=_o,e.AnimationUtils=lo,e.AnimationObjectGroup=ms,e.AnimationMixer=gs,e.AnimationClip=Mo,e.Uniform=ys,e.InstancedBufferGeometry=xs,e.BufferGeometry=Un,e.GeometryIdCount=Fn,e.Geometry=Bn,e.InterleavedBufferAttribute=bs,e.InstancedInterleavedBuffer=_s,e.InterleavedBuffer=ws,e.InstancedBufferAttribute=Ms,e.Face3=_n,e.Object3D=xn,e.Raycaster=Ss,e.Layers=ln,e.EventDispatcher=t,e.Clock=Ps,e.QuaternionLinearInterpolant=vo,e.LinearInterpolant=fo,e.DiscreteInterpolant=ho,e.CubicInterpolant=co,e.Interpolant=uo,e.Triangle=wn,e.Math=Et,e.Spherical=As,e.Cylindrical=Cs,e.Plane=rn,e.Frustum=nn,e.Sphere=en,e.Ray=on,e.Matrix4=kt,e.Matrix3=tn,e.Box3=$r,e.Box2=Or,e.Line3=bn,e.Euler=sn,e.Vector4=Nt,e.Vector3=Ut,e.Vector2=Pt,e.Quaternion=Bt,e.Color=Pr,e.MorphBlendMesh=Rs,e.ImmediateRenderObject=Is,e.VertexNormalsHelper=Os,e.SpotLightHelper=Ls,e.SkeletonHelper=Ds,e.PointLightHelper=Ns,e.RectAreaLightHelper=Vs,e.HemisphereLightHelper=Fs,e.GridHelper=Bs,e.PolarGridHelper=Us,e.FaceNormalsHelper=ks,e.DirectionalLightHelper=zs,e.CameraHelper=Gs,e.BoxHelper=js,e.ArrowHelper=Ks,e.AxisHelper=$s,e.CatmullRomCurve3=tl,e.CubicBezierCurve3=rl,e.QuadraticBezierCurve3=nl,e.LineCurve3=il,e.ArcCurve=al,e.EllipseCurve=No,e.SplineCurve=Vo,e.CubicBezierCurve=Fo,e.QuadraticBezierCurve=Bo,e.LineCurve=Lo,e.Shape=Go,e.Path=zo,e.ShapePath=jo,e.Font=Ho,e.CurvePath=Do,e.Curve=Oo,e.ShapeUtils=Qi,e.SceneUtils=ol,e.WireframeGeometry=Oi,e.ParametricGeometry=Di,e.ParametricBufferGeometry=Li,e.TetrahedronGeometry=Fi,e.TetrahedronBufferGeometry=Vi,e.OctahedronGeometry=Ui,e.OctahedronBufferGeometry=Bi,e.IcosahedronGeometry=zi,e.IcosahedronBufferGeometry=ki,e.DodecahedronGeometry=ji,e.DodecahedronBufferGeometry=Gi,e.PolyhedronGeometry=Hi,e.PolyhedronBufferGeometry=Ni,e.TubeGeometry=Xi,e.TubeBufferGeometry=Wi,e.TorusKnotGeometry=Yi,e.TorusKnotBufferGeometry=qi,e.TorusGeometry=Ji,e.TorusBufferGeometry=Zi,e.TextGeometry=$i,e.SphereBufferGeometry=ea,e.SphereGeometry=ta,e.RingGeometry=na,e.RingBufferGeometry=ra,e.PlaneBufferGeometry=Gn,e.PlaneGeometry=ia,e.LatheGeometry=oa,e.LatheBufferGeometry=aa,e.ShapeGeometry=la,e.ShapeBufferGeometry=sa,e.ExtrudeGeometry=Ki,e.EdgesGeometry=ua,e.ConeGeometry=ha,e.ConeBufferGeometry=da,e.CylinderGeometry=fa,e.CylinderBufferGeometry=ca,e.CircleBufferGeometry=pa,e.CircleGeometry=ma,e.BoxBufferGeometry=zn,e.BoxGeometry=va,e.ShadowMaterial=ya,e.SpriteMaterial=vi,e.RawShaderMaterial=xa,e.ShaderMaterial=Fr,e.PointsMaterial=Ti,e.MultiMaterial=ba,e.MeshPhysicalMaterial=_a,e.MeshStandardMaterial=wa,e.MeshPhongMaterial=Ma,e.MeshToonMaterial=Sa,e.MeshNormalMaterial=Ta,e.MeshLambertMaterial=Ea,e.MeshDepthMaterial=zr,e.MeshVelocityMaterial=Pa,e.MeshBasicMaterial=Mn,e.MeshCubeMaterial=Aa,e.LineDashedMaterial=Ca,e.LineBasicMaterial=_i,e.MaterialMap=Br,e.Material=Vr,e.GemMaterial=Ra,e.Float64BufferAttribute=Ln,e.Float32BufferAttribute=On,e.Uint32BufferAttribute=In,e.Int32BufferAttribute=Rn,e.Uint16BufferAttribute=Cn,e.Int16BufferAttribute=An,e.Uint8ClampedBufferAttribute=Pn,e.Uint8BufferAttribute=En,e.Int8BufferAttribute=Tn,e.BufferAttribute=Sn,e.REVISION=x,e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=b,e.CullFaceBack=w,e.CullFaceFront=_,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=M,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=S,e.PCFSoftShadowMap=T,e.PCSSSoftShadowMap=E,e.FrontSide=P,e.BackSide=A,e.DoubleSide=C,e.FlatShading=R,e.SmoothShading=I,e.NoColors=O,e.FaceColors=L,e.VertexColors=D,e.NoBlending=N,e.NormalBlending=V,e.AdditiveBlending=F,e.SubtractiveBlending=B,e.MultiplyBlending=U,e.CustomBlending=k,e.AddEquation=z,e.SubtractEquation=G,e.ReverseSubtractEquation=j,e.MinEquation=H,e.MaxEquation=W,e.ZeroFactor=X,e.OneFactor=q,e.SrcColorFactor=Y,e.OneMinusSrcColorFactor=Z,e.SrcAlphaFactor=J,e.OneMinusSrcAlphaFactor=Q,e.DstAlphaFactor=K,e.OneMinusDstAlphaFactor=$,e.DstColorFactor=ee,e.OneMinusDstColorFactor=te,e.SrcAlphaSaturateFactor=re,e.NeverDepth=ne,e.AlwaysDepth=ie,e.LessDepth=ae,e.LessEqualDepth=oe,e.EqualDepth=se,e.GreaterEqualDepth=le,e.GreaterDepth=ue,e.NotEqualDepth=ce,e.MultiplyOperation=fe,e.MixOperation=he,e.AddOperation=de,e.NoToneMapping=pe,e.LinearToneMapping=me,e.ReinhardToneMapping=ve,e.Uncharted2ToneMapping=ge,e.CineonToneMapping=ye,e.UVMapping=300,e.CubeReflectionMapping=xe,e.CubeRefractionMapping=be,e.EquirectangularReflectionMapping=we,e.EquirectangularRefractionMapping=_e,e.SphericalReflectionMapping=Me,e.CubeUVReflectionMapping=Se,e.CubeUVRefractionMapping=Te,e.RepeatWrapping=Ee,e.ClampToEdgeWrapping=Pe,e.MirroredRepeatWrapping=Ae,e.NearestFilter=Ce,e.NearestMipMapNearestFilter=Re,e.NearestMipMapLinearFilter=Ie,e.LinearFilter=Oe,e.LinearMipMapNearestFilter=Le,e.LinearMipMapLinearFilter=De,e.UnsignedByteType=Ne,e.ByteType=Ve,e.ShortType=Fe,e.UnsignedShortType=Be,e.IntType=Ue,e.UnsignedIntType=ke,e.FloatType=ze,e.HalfFloatType=Ge,e.UnsignedShort4444Type=je,e.UnsignedShort5551Type=He,e.UnsignedShort565Type=We,e.UnsignedInt248Type=Xe,e.AlphaFormat=qe,e.RGBFormat=Ye,e.RGBAFormat=Ze,e.LuminanceFormat=Je,e.LuminanceAlphaFormat=Qe,e.RGBEFormat=Ke,e.DepthFormat=$e,e.DepthStencilFormat=et,e.RGB_S3TC_DXT1_Format=tt,e.RGBA_S3TC_DXT1_Format=rt,e.RGBA_S3TC_DXT3_Format=nt,e.RGBA_S3TC_DXT5_Format=it,e.RGB_PVRTC_4BPPV1_Format=at,e.RGB_PVRTC_2BPPV1_Format=ot,e.RGBA_PVRTC_4BPPV1_Format=st,e.RGBA_PVRTC_2BPPV1_Format=lt,e.RGB_ETC1_Format=ut,e.LoopOnce=2200,e.LoopRepeat=ct,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=ft,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=ht,e.TriangleStripDrawMode=dt,e.TriangleFanDrawMode=pt,e.LinearEncoding=mt,e.sRGBEncoding=vt,e.GammaEncoding=gt,e.RGBEEncoding=yt,e.LogLuvEncoding=3003,e.RGBM7Encoding=xt,e.RGBM16Encoding=bt,e.RGBDEncoding=wt,e.BasicDepthPacking=_t,e.RGBADepthPacking=Mt,e.OrderIndependentTransperancy=St,e.PaintersTransperancy=Tt,e.CubeGeometry=va,e.Face4=function(e,t,r,n,i,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new _n(e,t,r,i,a,o)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new ba(e)},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ei(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new gi(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ei(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ti(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ti(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ti(e)},e.Vertex=function(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Ut(e,t,r)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Sn(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Tn(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new En(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Pn(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new An(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Cn(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Rn(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new In(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new On(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ln(e,t)},e.ClosedSplineCurve3=sl,e.SplineCurve3=ll,e.Spline=ul,e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new js(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Si(new ua(e.geometry),new _i({color:void 0!==t?t:16777215}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Si(new Oi(e.geometry),new _i({color:void 0!==t?t:16777215}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Na(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Fa(e)},e.GeometryUtils=cl,e.ImageUtils=fl,e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},Object.defineProperty(e,"__esModule",{value:!0})},"object"===(0,g.default)(t)&&void 0!==e?o(t):(i=[t],void 0===(a="function"==typeof(n=o)?n.apply(t,i):n)||(e.exports=a))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=h(r(6)),a=h(r(51)),o=h(r(33)),s=h(r(30)),l=h(r(18));t.get=b,t.setApi=function(e){return{type:d,payload:e}},t.getSetupCommand=w;var u=r(36),c=h(r(50)),f=h(r(248));function h(e){return e&&e.__esModule?e:{default:e}}var d="SET_API",p="LOADING_PLUGIN",m="LOADED_PLUGIN",v="SET_PLUGIN",g="LOADING_PLUGIN_ERROR",y=(0,u.Map)({api:null,plugins:(0,u.Map)(),loading:(0,u.Map)()});function x(e){return function(t){var r=t.getIn(["sceneIO","id"]);if(!r)return s.default.reject("No scene attached");var n=t.getIn(["plugins","api"]);return n&&n[e]?s.default.resolve(n[e]):t.callApi({types:[p,m,g],url:"https://clara.io/api/scenes/"+r+"/plugins/"+e,payload:e,queryKey:"PLUGIN"+e}).then(function(r){return function(e,t,r){try{var n=function(t){return new Function("api",t||"")(e.getIn(["plugins","api"]))},i=r.content,a=r.loadFromServer,l=r.url;return a?(console.log("Load plugin from server",l),new f.default.Promise(function(r,i){e.callApi({types:[p,m,g],url:l,payload:t,queryKey:"PLUGINexternal"+t,contentType:"external"}).then(function(e){console.log("fetched external plugin",void 0===e?"undefined":(0,o.default)(e),e&&e.length);try{var t=n(e);t||console.log("External plugin must be a function that returns an object"),r(t||{})}catch(e){console.log("Error building plugin",e),e.stack&&console.log(e.stack),r({})}}).catch(function(e){console.log("Error loading external plugin",e),r({})})})):s.default.resolve(n(i))}catch(e){console.log("error",e)}}(t,e,r).then(function(r){return t.dispatch({type:v,payload:{name:e,plugin:r}}),r})})}}function b(e,t){var r=e.getIn(["plugins","plugins",t]);return r?s.default.resolve(r):e.dispatch(x(t))}function w(e,t,r){try{var n=function(e){return console.log(e),s.default.resolve(!0)},l=t.split("/"),u=(0,a.default)(l,2),c=u[0],f=u[1],h="string"==typeof r?JSON.parse(r):r;return function(){return console.log("Get plugin",c,"for command",f),b(e,c).then(function(e){return console.log("Fetched plugin",!!e,"object"===(void 0===e?"undefined":(0,o.default)(e))&&(0,i.default)(e)),e?e[f]?"function"!=typeof e[f]?n("Command: "+f+" in plugin: "+c+" is not a function"):Array.isArray(h)?s.default.resolve(e[f].apply(e,h)):s.default.resolve(e[f](h)):n("Unknown command: "+f+" for plugin: "+c):n("Error getting plugin: "+c)})}}catch(e){return function(){console.error(e)}}}var _={reducer:(0,c.default)(y,(n={},(0,l.default)(n,d,function(e,t){return e.set("api",t)}),(0,l.default)(n,p,function(e,t){return e.setIn(["loading",t],!0)}),(0,l.default)(n,m,function(e,t,r){r.action;return e.setIn(["loading",t],!1)}),(0,l.default)(n,v,function(e,t){var r=t.name,n=t.plugin;return e.setIn(["plugins",r],n)}),n)),actions:{loadPlugin:x},selectors:{get:b,getSetupCommand:w}};t.default=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TessellateConstants=t.TessellationTypes=void 0;var n=o(r(55)),i=o(r(567)),a=o(r(77));function o(e){return e&&e.__esModule?e:{default:e}}var s=t.TessellationTypes={edge:1,vertex:2},l=t.TessellateConstants={UNPROCESSED:0,SELECTED:1},u={name:"Tessellate",schema:{iterations:{label:"iterations",type:"Number",step:1,defaultValue:1,animatable:!0},tessellationType:{label:"Tessellation Type",type:"Options",display:"Dropdown",labels:["Edge - Quadrilaterals","Vertex - Triangles"],values:[s.edge,s.vertex],defaultValue:1},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"}},update:function(e,t){var r=t.mesh;if(!r)return t;var o=e.iterations,s=e.tessellationType,u=e.indices,c=new a.default((0,n.default)(u),a.default.Faces),f=c?c.indices:[],h=new Uint8Array(r.faceRangeOffsets.length);if(c&&0!==f.length)for(var d=0;d<f.length;++d){var p=f[d];p>=0&&p<h.length&&(h[p]=l.SELECTED)}else h.fill(l.SELECTED);return t.mesh=(0,i.default)(r,h,s,o),t}};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n,i=r(43),a=(n=i)&&n.__esModule?n:{default:n};function o(e,t){this.blocks=[],this.lastBlock=null,this.arrayType=e;var r=t||12;this.intraBlockIndexBits=r,this.intraBlockIndexMask=(1<<r)-1,this.length=0}o.prototype={constructor:o,elementSize:1,toArrayAndClear:function(){var e=this.toArray();return this.clear(),e},newRangeArray:function(e){var t=e||1;return new this.arrayType(t*this.elementSize)},rangeToArray:function(e,t,r,n){for(var i=this.intraBlockIndexMask,a=this.elementSize,o=e>>this.intraBlockIndexBits,s=e&i,l=this.blocks[o],u=r||new this.arrayType(t*a),c=void 0===n?0:n,f=0;f<t;++f){for(var h=s*a,d=h+a;h!==d;++h)u[c++]=l[h];0==(++s&i)&&(l=this.blocks[++o])}return u},arrayToRange:function(e,t,r,n){for(var i=this.intraBlockIndexMask,a=this.elementSize,o=t>>this.intraBlockIndexBits,s=t&i,l=this.blocks[o],u=void 0===n?0:n,c=0;c<r;++c){for(var f=s*a,h=f+a;f!==h;++f)l[f]=e[u++];0==(++s&i)&&(l=this.blocks[++o])}return this},pushArrayRange:function(e,t,r){for(var n=this.intraBlockIndexMask,i=this.elementSize,a=this.length,o=this.lastBlock,s=void 0===r?0:r,l=0;l<t;++l){if(0==(a&=n)){var u=n+1;o=new this.arrayType(u*i),this.lastBlock=o,this.blocks.push(o)}for(var c=a++*i,f=c+i;c!==f;++c)o[c]=e[s++]}return this.length+=t},clear:function(){return this.blocks=[],this.length=0,this.lastBlock=null,this},toArray:function(e,t){for(var r=void 0===t?0:t,n=this.elementSize,i=this.length*n+r,o=a.default.maybeCreate(e||this.arrayType,i),s=this.blocks,l=(1<<this.intraBlockIndexBits)*n,u=Math.max(s.length-1,0),c=0;c!==u;++c)o.set(s[c],r),r+=l;var f=i-r;return 0!==f&&o.set(s[u].subarray(0,f),r),o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=a(r(43)),i=a(r(284));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){this.data=e,this.length=t}o.prototype={constructor:o,offset:0,stride:1,elementSize:1,newRangeArray:function(e){var t=e||1;return new this.data.constructor(t*this.elementSize)},rangeToArray:function(e,t,r,n){for(var i=this.data,a=this.stride,o=this.elementSize,s=r||new this.data.constructor(t*this.elementSize),l=n||0,u=this.offset+e*a,c=u+t*a;u<c;u+=a)for(var f=u,h=u+o;f!==h;++f)s[l++]=i[f];return s},arrayToRange:function(e,t,r,n){for(var i=this.data,a=this.stride,o=this.elementSize,s=n||0,l=this.offset+t*a,u=l+r*a;l<u;l+=a)for(var c=l,f=l+o;c!==f;++c)i[c]=e[s++];return this},toArray:function(e,t){var r=this.stride,i=this.length,a=this.elementSize,o=void 0===t?0:t,s=o+i*a;if(r===a){var l=this.data,u=this.offset,c=u+i*a;if(0===o&&(void 0===e||e===this.data.constructor))return n.default.slice(l,u,c);var f=n.default.maybeCreate(e,s);return f.set(l.subarray(u,c),o),f}var h=n.default.maybeCreate(e,s);return this.rangeToArray(0,i,h,t)},fromArray:function(e,t){var r=this.stride,n=this.length,i=this.elementSize,a=void 0===t?0:t,o=a+n*i;if(r!==i)return this.arrayToRange(e,0,n,a);var s=0===a&&e.length===o?e:e.subarray(a,o);return this.data.set(s,this.offset),this},repack:function(e){var t=this.data.constructor,r=e||t;return this.stride===this.elementSize&&r===t||this.forceRepack(e),this},forceRepack:function(e){return this.data=this.toArray(e),this.offset=0,this.stride=this.elementSize,this},clone:function(){return this.newCompatibleView(this.toArray(),this.length)},newCompatibleView:function(e,t){throw Error("not implemented")},newCompatibleBuffer:function(){throw Error("not implemented")},newCompareAtIndices:function(){return i.default.derefedTuplesIn(this.data,this.elementSize,this.stride)},newCompareAtIndicesStable:function(){return i.default.derefedTuplesStableIn(this.data,this.elementSize,this.stride)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(56)),i=o(r(2));t.default=s;var a=o(r(281));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){a.default.call(this,e||Uint32Array)}s.prototype=(0,i.default)((0,n.default)(a.default.prototype),{constructor:s,getAt:function(e){var t=e>>this.intraBlockIndexBits,r=e&this.intraBlockIndexMask;return this.blocks[t][r]},setAt:function(e,t){var r=e>>this.intraBlockIndexBits,n=e&this.intraBlockIndexMask;return this.blocks[r][n]=t,this},push:function(e){var t=this.length++,r=this.lastBlock,n=t&this.intraBlockIndexMask;if(0===n){var i=this.intraBlockIndexMask+1;r=new this.arrayType(i),this.lastBlock=r,this.blocks.push(r)}return r[n]=e,t+1}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={Numeric:function(e,t){return e-t},Natural:function(e,t){return e<t?-1:t<e?1:0},derefedNumbersIn:function(e){return function(t,r){return e[t]-e[r]}},derefedTuplesIn:function(e,t,r){if(!t)throw Error("Invalid element size!");var i=r||t;return 1===i&&1===t?n.derefNumbersIn(e):function(r,n){for(var a=r*i,o=n*i,s=e[a]-e[o],l=1;l!==t&&0===s;++l)s=e[a+l]-e[o+l];return s}},derefedNumbersStableIn:function(e){return function(t,r){var n=e[t]-e[r];return 0!==n?n:t-r}},derefedTuplesStableIn:function(e,t,r){if(!t)throw Error("Invalid element size!");var i=r||t;return 1===i&&1===t?n.derefNumbersStableIn(e):function(r,n){for(var a=r*i,o=n*i,s=e[a]-e[o],l=1;l!==t&&0===s;++l)s=e[a+l]-e[o+l];return 0!==s?s:r-n}}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(13));t.default=f;var i=l(r(244)),a=r(0),o=r(288),s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}var u=30;function c(e,t,r,n,a,s,l,u,c){if(l===o.CONVEXITY.FAN_TRIANGULATION)return function(e,t,r){for(var n=e-2,i=0,a=r;i<n;i++,a+=3)t[a]=0,t[a+1]=i+1,t[a+2]=i+2;return n}(n,a,s);var f=u,h=new Float32Array(2*n);switch(l){case o.CONVEXITY.PROJ_XY:for(var d=0;d<n;d++)e.getAt(t[r+d],f),h[2*d]=f.x,h[2*d+1]=f.y;break;case o.CONVEXITY.PROJ_XZ:for(var p=0;p<n;p++)e.getAt(t[r+p],f),h[2*p]=f.x,h[2*p+1]=f.z;break;case o.CONVEXITY.PROJ_YZ:for(var m=0;m<n;m++)e.getAt(t[r+m],f),h[2*m]=f.y,h[2*m+1]=f.z;break;case o.CONVEXITY.INVALID_MESH:default:return 0}var v=0,g=u,y=c;g.x=h[2]-h[0],g.y=h[3]-h[1];for(var x=2;x<n;x++)y.copy(g),g.x=h[2*x]-h[0],g.y=h[2*x+1]-h[1],v+=g.x*y.y-g.y*y.x;if(v>0)for(var b=0;b<n;b++)h[2*b]*=-1;return function(e,t,r){for(var n=(0,i.default)(e),a=0;a<n.length;a++)t[r+a]=n[a];return n.length/3}(h,a,s)}function f(e){this.mesh=e,this.groups=null,this.polygonOrder=null,this.numTriangles=-1,this.mesh.faceConvexity||(this.mesh=(0,s.default)(this.mesh)),function(e){var t=e.mesh.faceRangeOffsets,r=t.length-1,n=e.mesh.positions.faceValueIndices,i=e.mesh.positions.values,o=e.mesh.faceConvexity,s=t[r]-t[0]-2*r,l=new Uint32Array(3*s),u=new Uint32Array(r+1),f=new Uint32Array(s);s=0;for(var h=new a.Vector3,d=new a.Vector3,p=t[0],m=0,v=0;v<r;v++){var g=t[v+1],y=g-p;if(u[v+1]=u[v],y>3){for(var x=c(i,n,p,y,l,m,o[v],h,d),b=0;b<x;b++)f[s+b]=v;u[v+1]+=x,s+=x,m+=3*x}else 3===y&&(f[s]=v,u[v+1]++,l[m+0]=0,l[m+1]=1,l[m+2]=2,s++,m+=3);p=g}e.numTriangles=s,e.mapFaceIdToLocalTriangulation=l,e.mapFaceIdToTriangleOffsets=u,e.mapTriangulationFaceId=f}(this),function(e){var t=e.mesh.materialIds;if(t){for(var r=e.mesh.faceRangeOffsets,i=r.length-1,a=new Uint32Array(i),o=0;o<a.length;o++)a[o]=o;a.sort(function(e,r){return t[e]-t[r]}),e.polygonOrder=a;var s=new Uint32Array(u),l=0,c=0,f=r[0],h=!0,d=!1,p=void 0;try{for(var m,v=(0,n.default)(t);!(h=(m=v.next()).done);h=!0){var g=m.value;g>=u?l=g=u-1:g>l&&(l=g);var y=r[c+1];s[g]+=y-f-2,f=y,++c}}catch(e){d=!0,p=e}finally{try{!h&&v.return&&v.return()}finally{if(d)throw p}}for(var x=l+1===u?s:new Uint32Array(s.buffer,0,l+1),b=new Uint32Array(l+1),w=0,_=0;_<=l;++_)b[_]=w,w+=x[_]*=3;e.groups={groupStarts:b,groupCounts:x}}}(this)}f.prototype={constructor:f,translateIndices:function(e,t){for(var r=this.mesh.faceRangeOffsets,i=r.length-1,a=t.data,o=t.stride,s=t.offset,l=this.polygonOrder,u=0;u<i;++u){var c=l?l[u]:u,f=r[c],h=3*this.mapFaceIdToTriangleOffsets[c],d=3*this.mapFaceIdToTriangleOffsets[c+1];if(d>h){var p=this.mapFaceIdToLocalTriangulation.slice(h,d),m=!0,v=!1,g=void 0;try{for(var y,x=(0,n.default)(p);!(m=(y=x.next()).done);m=!0){var b=y.value;a[s]=e[f+b],s+=o}}catch(e){v=!0,g=e}finally{try{!m&&x.return&&x.return()}finally{if(v)throw g}}}}},translateMaterialIds:function(e){},translateToUnindexedValues:function(e,t,r){for(var i=this.mesh.faceRangeOffsets,a=i.length-1,o=e.newRangeArray(1),s=this.polygonOrder,l=0,u=0;u<a;++u){var c=s?s[u]:u,f=i[c],h=3*this.mapFaceIdToTriangleOffsets[c],d=3*this.mapFaceIdToTriangleOffsets[c+1];if(d>h){var p=this.mapFaceIdToLocalTriangulation.slice(h,d),m=!0,v=!1,g=void 0;try{for(var y,x=(0,n.default)(p);!(m=(y=x.next()).done);m=!0){var b=y.value;t.arrayToRange(e.rangeToArray(r[f+b],1,o),l,1),++l}}catch(e){v=!0,g=e}finally{try{!m&&x.return&&x.return()}finally{if(v)throw g}}}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),a=r(3),o=(n=a)&&n.__esModule?n:{default:n};function s(e,t,r,n){this.positions=e||new o.default(i.Vector3,0),this.normals=t,this.weights=r,this.weight=n||1}s.prototype={constructor:s,isEmpty:function(){return!this.positions.length},setWeight:function(e){this.weight=e}},t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmoothingGroupIds=t.ShapeSetBevelStyles=void 0;var n=c(r(137)),i=c(r(204)),a=c(r(13));t.ShapeSet=v;var o=r(0),s=c(r(3)),l=r(143),u=r(142);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r){var n=e.holeOffsets[r];return 0===n.length?e.loopRangeOffsets[r+1]:t+n[0]}function h(e,t,r){if(0!==t.deltaY){var n=(e.y-t.y)/t.deltaY;if(n>=0&&n<=1){var i=Math.abs(e.x-t.x-n*t.deltaX);r=Math.min(r,i)}}return r}function d(e){for(var t=void 0,r=new o.Vector3,n=new o.Vector3,i=e.loopRangeOffsets.length-1,a=[],s=0;s<i;++s){var l=e.loopRangeOffsets[s],u=f(e,l,s);e.positions.getAt(u-1,n);for(var c=l;c<u;++c){e.positions.getAt(c,r);var h=r.x,d=n.x,p=r.y,m=n.y;p>m&&(t=h,h=d,d=t,t=p,p=m,m=t),a.push({x:h,y:p,deltaX:d-h,deltaY:m-p}),t=r,r=n,n=t}}return a}var p=t.ShapeSetBevelStyles={Round:0,Extended:1},m=t.SmoothingGroupIds={Front:1,Back:2,Bevel:4};function v(e){e?(this.loopRangeOffsets=e.loopRangeOffsets,this.loopValueIndices=e.loopValueIndices,this.positions=e.positions,this.holeOffsets=e.holeOffsets,this.bevelSegments=e.bevelSegments,this.bevelSmoothingGroups=e.bevelSmoothingGroups||[],this.backFaceOffsets=e.backFaceOffsets,this.ringOffsets=e.ringOffsets):(this.loopRangeOffsets=new Uint32Array(1),this.loopValueIndices=new Uint32Array(0),this.positions=new s.default(o.Vector3,0),this.holeOffsets=[],this.bevelSegments=[],this.backFaceOffsets=0,this.bevelSmoothingGroups=[],this.ringOffsets=[])}function g(e,t,r,n){var i=1-n,a=i*i,o=2*i*n,s=n*n;return{x:a*e.x+o*t.x+s*r.x,y:a*e.y+o*t.y+s*r.y}}v.prototype={constructor:v,getHorizontalDistance:function(e,t,r,n){var i=t,o=(e.loopRangeOffsets.length,n&&n.thisEdges||d(this)),s=d(e),l=!0,u=!1,c=void 0;try{for(var f,p=(0,a.default)(s);!(l=(f=p.next()).done);l=!0){var m=f.value,v={x:m.x+t,y:m.y,deltaX:m.deltaX,deltaY:m.deltaY},g=(m.y,m.y+m.deltaY),y={x:v.x,y:g},x=!0,b=!1,w=void 0;try{for(var _,M=(0,a.default)(o);!(x=(_=M.next()).done);x=!0){var S=_.value;y.y>=S.y&&v.y<=S.y+S.deltaY&&(i=h(v,S,i=h(y,S,i=h(S,v,i))))}}catch(e){b=!0,w=e}finally{try{!x&&M.return&&M.return()}finally{if(b)throw w}}}}catch(e){u=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(u)throw c}}return n&&(n.thisEdges=s),t-(1.01*i+r)},translateShape:function(e){for(var t=this.positions.length,r=new o.Vector3,n=0;n<t;++n)this.positions.getAt(n,r),r.add(e),this.positions.setAt(n,r)},bevelShapeSet:function(e,t,r,n,a,l){var u=this,c=e*e*a*a,f=Math.cos(l*o.Math.DEG2RAD),h=new o.Vector3,d=new o.Vector3,v=new o.Vector3,g=new o.Vector3,y=new o.Vector3,x=new o.Vector3,b=void 0,w=u.bevelSmoothingGroups,_=[],M=30-(0,i.default)(m.Bevel),S=this.loopRangeOffsets.length-1,T=[],E=[],P=null;P=n===p.Extended?function(e){var t=1/e;return function(e){var r=e*t;return{offset:Math.sqrt(r),height:r}}}(r):function(e){var t=Math.PI/e;return function(e){var r=e*t;return{offset:Math.sin(r),height:.5-.5*Math.cos(r)}}}(r);for(var A=0;A<=r;++A){var C=P(A),R=C.offset,I=C.height;T.push(-I*t),E.push(R)}var O=this.positions.length,L=new s.default(o.Vector3,O*(r+1)),D=[],N=this.loopRangeOffsets[0],V=N,F=void 0,B=void 0;function U(t){B=y.dot(v);var n=e/(1+B),i=-n*(v.y+y.y),a=n*(v.x+y.x),o=i*i+a*a;if(o>c){var s=Math.sqrt(c/o);i*=s,a*=s}for(var l=0;l<=r;++l){var u=E[l];x.x=d.x+u*i,x.y=d.y+u*a,x.z=T[l],L.setAt(t,x),t+=O}}function k(){u.positions.getAt(u.loopValueIndices[V-1],h);var e=u.loopValueIndices[N];u.positions.getAt(e,d),v.subVectors(d,h).normalize();var t=[],r=!1,n=!0;b=m.Bevel;for(var i=0,a=N+1;a<V;++a){var o=u.loopValueIndices[a];u.positions.getAt(o,g),y.subVectors(g,d).normalize(),U(e),B<f?(i===M&&(i=1),b=m.Bevel<<i++,n=!1):(a===N+1&&(r=!0),n&&t.push(o-1)),_[o-1]=b,F=v,v=y,y=F,F=d,d=g,g=F,e=o}if(u.positions.getAt(N,g),y.subVectors(g,d).normalize(),U(e),B<f?(i===M&&(i=1),b=m.Bevel<<i++):n&&t.push(e),_[e]=b,r&&b!==m.Bevel)for(var s=0;s<t.length;s++)_[t[s]]=b}function z(){for(var e=u.loopValueIndices[V-1],t=u.loopValueIndices[N],n=N;n<V;){for(var i=0,a=O,o=0;o<r;++o)D.push(e+i),D.push(t+i),D.push(t+a),w.push(_[e]),D.push(e+i),D.push(t+a),D.push(e+a),w.push(_[e]),i=a,a+=O;e=t,++n,t=u.loopValueIndices[n]}}for(var G=0;G<S;++G){var j=this.holeOffsets[G],H=N,W=this.loopRangeOffsets[G+1];W-N;for(var X=0;X<j.length;++X)V=H+j[X],k(),z(),N=V;V=W,k(),z(),N=V}this.positions=L,this.bevelSegments=D,this.backFaceOffsets=r*O},bend:function(e){var t,r=new o.Vector3,n=(new o.Vector3).set(0,0,-90),i=this,s=function(e,t){for(var n=e;n<t;++n)i.positions.getAt(n,r),r.x<u?u=r.x:r.x>c&&(c=r.x)};this.positions.getAt(0,r);var u=r.x,c=r.x;this.ringOffsets.length?(s(1,this.ringOffsets[0].start),s(this.ringOffsets[0].until+1,this.ringOffsets[1].start),s(this.ringOffsets[1].until+1,this.positions.length)):s(1,this.positions.length),t=-.5*(c-u),r.set(t,0,0),(0,l.bendVertices)(this.positions,"Z",e,n,r,!0);var f=!0,h=!1,d=void 0;try{for(var p,m=(0,a.default)(this.ringOffsets);!(f=(p=m.next()).done);f=!0){for(var v=p.value,g=0,y=0,x=v.start;x<v.middle;++x)this.positions.getAt(x,r),g+=r.x,y+=r.y;var b=1/(v.middle-v.start);g*=b,y*=b,r.z=0;for(var w=v.start,_=2*Math.PI/(v.middle-v.start),M=0;w<v.middle;++w,M+=_)r.x=g+Math.cos(M)*v.outerRadius,r.y=y-Math.sin(M)*v.outerRadius,this.positions.setAt(w,r);for(var S=2*Math.PI/(v.until-v.middle),T=0;w<v.until;++w,T+=S)r.x=g+Math.cos(T)*v.innerRadius,r.y=y+Math.sin(T)*v.innerRadius,this.positions.setAt(w,r)}}catch(e){h=!0,d=e}finally{try{!f&&m.return&&m.return()}finally{if(h)throw d}}}},v.fromPath=function(e,t,r,n,i){for(var a=[0],l=[],c=[],h=[],d=Math.max(Math.floor(.25*t),2),p=0,m=0,y=new o.Box3,x=null,b=0;b<e.commands.length;++b){var w=e.commands[b];if("Q"===w.type){p+=t;for(var _=e.commands[b-1],M={x:w.x1,y:w.y1},S=w,T=1;T<=t;++T){var E=g(_,M,S,T/t),P=new o.Vector3(E.x,r-E.y,0).multiplyScalar(1/72);x&&x.x===P.x&&x.y===P.y?--p:(x=P,l.push(m),y.expandByPoint(P),c.push(P),++m)}}else if("L"===w.type){p+=d;for(var A=e.commands[b-1],C={x:.5*(w.x+A.x),y:.5*(w.y+A.y)},R=w,I=1;I<=d;++I){var O=g(A,C,R,I/d),L=new o.Vector3(O.x,r-O.y,0).multiplyScalar(1/72);x&&x.x===L.x&&x.y===L.y?--p:(x=L,l.push(m),y.expandByPoint(L),c.push(L),++m)}}else if("Z"!==w.type){var D=new o.Vector3(w.x,r-w.y,0).multiplyScalar(1/72);x&&x.x===D.x&&x.y===D.y||(++p,x=D,l.push(m),y.expandByPoint(D),c.push(D),++m)}else--p,--m,c.pop(),l.pop(),a.push(p),h.push(y),y=new o.Box3}var N=[];if(i){i.innerRadius/=72,i.outerRadius/=72,i.innerRadius>=i.outerRadius&&(i.innerRadius=i.outerRadius);for(var V=(new o.Box3).copy(h[0]),F=1;F<h.length;++F)V.union(h[F]);var B=V.getSize(),U=Math.min(B.x,B.y),k=i.xPosition<0?V.min.x-U:V.max.x+U,z=.5*((V.min.y-U)*(1-i.yPosition)+(V.max.y+U)*(1+i.yPosition)),G=Math.round(t*(i.outerRadius/i.innerRadius)),j={};N.push(j);var H=4*G;j.start=p,j.middle=p+H,j.outerRadius=i.outerRadius,p+=H;for(var W=Math.PI/(2*G),X=0,q=0;q<H;++q)c.push(new o.Vector3(k+Math.cos(X)*i.outerRadius,z-Math.sin(X)*i.outerRadius,0)),l.push(m),++m,X+=W;a.push(p),h.push(new o.Box3(new o.Vector3(k-i.outerRadius,z-i.outerRadius,0),new o.Vector3(k+i.outerRadius,z+i.outerRadius,0)));var Y=4*t;j.until=p+Y,j.innerRadius=i.innerRadius,p+=Y;for(var Z=Math.PI/(2*t),J=0,Q=0;Q<Y;++Q)c.push(new o.Vector3(k+Math.cos(J)*i.innerRadius,z+Math.sin(J)*i.innerRadius,0)),l.push(m),++m,J+=Z;a.push(p),h.push(new o.Box3(new o.Vector3(k-i.innerRadius,z-i.innerRadius,0),new o.Vector3(k+i.innerRadius,z+i.innerRadius,0)))}for(var K={loopRangeOffsets:new Uint32Array(a),loopValueIndices:new Uint32Array(l),positions:new s.default(o.Vector3,c.length),holeOffsets:[],bevelSegments:[],backFaceOffsets:0,bevelSmoothingGroups:[],ringOffsets:N},$=0;$<c.length;++$)K.positions.setAt($,c[$]);var ee=new Array(a.length-1).fill(-1);!function(e,t,r,n){for(var i=new o.Vector3,a=t.length,s=0;s<a;++s)if(t[s]){for(var l=n[s],u=-1,c=-1,f=0;f<a;++f)if(!t[f]){var h=n[f];if(h.containsBox(l)){h.getSize(i);var d=i.x*i.y;(-1===u||d<c)&&(u=f,c=d)}}r[s]=u}}(0,function(e){for(var t=e.loopRangeOffsets.length-1,r=new Array(t),n=new o.Vector3,i=new o.Vector3,a=new o.Vector3,s=new o.Vector3,l=new o.Vector3,c=e.loopRangeOffsets[0],f=0;f<t;++f){var h=e.loopRangeOffsets[f+1];(0,u.computeFaceNormal)(e.positions,e.loopValueIndices,c,h,!0,l,n,i,a,s),r[f]=l.z>0,c=h}return r}(K),ee,h);var te=function(e,t,r){for(var n=t.length,i=new o.Vector3,a=[0],l=[],u=new s.default(o.Vector3,e.positions.length),c=[],f=0,h=0,d=r[0].min.y,p=0;p<n;++p)if(-1===t[p]){for(var m=[],v=f,g=e.loopRangeOffsets[p],y=e.loopRangeOffsets[p+1],x=g;x<y;++x)e.positions.getAt(x,i),u.setAt(f,i),l.push(f),++f;for(var b=0;b<n;++b)if(t[b]===p){m.push(f-v);for(var w=e.loopRangeOffsets[b],_=e.loopRangeOffsets[b+1],M=w;M<_;++M)e.positions.getAt(M,i),u.setAt(f,i),l.push(f),++f}var S=r[p];c.push(S);var T=S.min.y;T<d&&(d=T,h=a.length-1),a.push(f),e.holeOffsets.push(m)}e.loopRangeOffsets=new Uint32Array(a),e.loopValueIndices=new Uint32Array(l),e.positions=u;for(var E=0;E<c.length;++E)r[E]=c[E];return h}(K,ee,h);return void 0!==n&&K.loopRangeOffsets.length>2&&function(e,t,r,n,i){var a=e.loopRangeOffsets[t],s=f(e,a,t),l=new o.Vector3,u=new o.Vector3,c=null,h=null;h=i?function(){var e=l.distanceToSquared(u),t=0;return l.y<c.min.y?t=c.min.y-l.y:l.y>c.max.y&&(t=l.y-c.max.y),e+t*t}:function(){var e=l.distanceToSquared(u),t=0;return l.x<c.min.x?t=c.min.x-l.x:l.x>c.max.x&&(t=l.x-c.max.x),e+t*t};for(var d=e.loopRangeOffsets.length-1,p=0;p<d;++p)if(p!==t){var m=e.loopRangeOffsets[p],v=f(e,m,p);c=n[p];for(var g=1e9,y={anchorIndex:-1,testIndex:-1},x=a;x<s;++x){e.positions.getAt(x,l);for(var b=m;b<v;++b){e.positions.getAt(b,u);var w=h();w<g&&(y.anchorIndex=x,y.testIndex=b,g=w)}}e.positions.getAt(y.anchorIndex,l),e.positions.getAt(y.testIndex,u);var _=l.sub(u).length();l.multiplyScalar((_+0)/_),v=e.loopRangeOffsets[p+1];for(var M=m;M<v;++M)e.positions.getAt(M,u),u.add(l),e.positions.setAt(M,u)}}(K,te,0,h,!1),new v(K)},v.mergeShapeSets=function(e,t){var r=1,i=0,l=[],u=!0,c=!1,f=void 0;try{for(var h,d=(0,a.default)(e);!(u=(h=d.next()).done);u=!0){var p=h.value;r+=p.loopRangeOffsets.length-1,i+=p.loopValueIndices.length}}catch(e){c=!0,f=e}finally{try{!u&&d.return&&d.return()}finally{if(c)throw f}}for(var m={loopRangeOffsets:new Uint32Array(r),loopValueIndices:new Uint32Array(i),positions:new s.default(o.Vector3,i),holeOffsets:[],bevelSegments:[],backFaceOffsets:0,bevelSmoothingGroups:[],ringOffsets:l},g=0,y=0,x=0,b=0,w=new o.Vector3,_=0;_<e.length;++_){for(var M,S=e[_],T=t[_],E=S.loopValueIndices.length,P=S.loopRangeOffsets.length-1,A=0;A<P;++A,++x)m.loopRangeOffsets[x]=S.loopRangeOffsets[A]+g;var C=!0,R=!1,I=void 0;try{for(var O,L=(0,a.default)(S.ringOffsets);!(C=(O=L.next()).done);C=!0){var D=O.value;l.push({start:D.start+y,middle:D.middle+y,until:D.until+y,outerRadius:D.outerRadius,innerRadius:D.innerRadius})}}catch(e){R=!0,I=e}finally{try{!C&&L.return&&L.return()}finally{if(R)throw I}}for(var N=0;N<E;++N,++b)m.loopValueIndices[b]=S.loopValueIndices[N]+y,S.positions.getAt(N,w),w.add(T),m.positions.setAt(b,w);(M=m.holeOffsets).push.apply(M,(0,n.default)(S.holeOffsets)),y+=E,g+=E}return m.loopRangeOffsets[x]=i,new v(m)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONVEXITY=void 0;var n=s(r(89)),i=s(r(51));t.default=function(e){for(var t=e.faceRangeOffsets,r=t.length-1,n=e.positions.faceValueIndices,i=e.positions.values,s=[],l=new a.Vector3,c=new a.Vector3,f=new Int8Array(r),h=t[0],d=0;d<r;d++){var p=t[d+1],m=p-h;f[d]=u(i,n,h,m,s,l,c),h=p}return new o.default(e,{faceConvexity:f})};var a=r(0),o=s(r(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.CONVEXITY={INVALID_MESH:-1,FAN_TRIANGULATION:0,PROJ_XY:1,PROJ_XZ:2,PROJ_YZ:3};function u(e,t,r,o,s,u,c){for(var f=0,h=0,d=null;s.length<o;)s.push(new a.Vector3);for(var p=0;p<o;p++)e.getAt(t[r+p],s[p]);for(var m=[["x","y"],["x","z"],["y","z"]],v=0;v<3;v++){var g=(0,i.default)(m[v],2),y=g[0],x=g[1];u.copy(s[1]).sub(s[0]);for(var b=2;b<o;b++)if(c.copy(u),u.copy(s[b]).sub(s[0]),0!==(h=(0,n.default)(u[y]*c[x]-u[x]*c[y]))){if(h===-f){switch(v){case 0:d=l.PROJ_XY;break;case 1:d=l.PROJ_XZ;break;case 2:d=l.PROJ_YZ}f=null;break}f=h}if(f)return l.FAN_TRIANGULATION}return d||l.INVALID_MESH}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.falloffFunctionPresets=void 0;var n,i,a=r(18),o=(n=a)&&n.__esModule?n:{default:n};t.default=function(e,t,r){var n=new Float32Array(e.length);return l[r](e,t,n),n};var s=t.falloffFunctionPresets={sinusoidal:0,linear:1};var l=(i={},(0,o.default)(i,s.sinusoidal,function(e,t,r){for(var n=r.length,i=0;i<n;++i){var a=e[i];r[i]=e[i]<=t?1-a*a/(t*t)*(3-2*a/t):0}}),(0,o.default)(i,s.linear,function(e,t,r){for(var n=r.length,i=0;i<n;++i){var a=e[i];r[i]=a<=t?1-a/t:0}}),i)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i,a,o){var s=[e],l=[new n.Matrix4];if(t<=1)return{meshArray:s,transforms:l};for(var u=1;u<t;++u)s.push(e);var c=(new n.Matrix4).makeRotationFromQuaternion(i),f=(new n.Matrix4).makeScale(a.x,a.y,a.z).multiply(c),h=new n.Matrix4;o&&o.isMatrix4?h.getInverse(o):o=new n.Matrix4;for(var d=new n.Vector3,p=new n.Matrix4,m=new n.Matrix4,v=1;v<t;++v){d.add(r),p.makeTranslation(d.x,d.y,d.z),m.multiply(f);var g=new n.Matrix4;g.multiply(h),g.multiply(p),g.multiply(m),g.multiply(o),l.push(g)}return{meshArray:s,transforms:l}};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i,a){var o=(new n.Vector3).copy(a),s=(new n.Vector3).copy(e).multiplyScalar(Math.PI/180),l=(new n.Euler).setFromVector3(s,t),u=(new n.Matrix4).makeRotationFromEuler(l),c=void 0;1===r&&(c=(new n.Matrix4).makeRotationY(Math.PI/2),u.multiply(c));2===r&&(c=(new n.Matrix4).makeRotationX(Math.PI/2),u.multiply(c));o.applyMatrix4(u).normalize(),Math.abs(o.x)<1e-4&&(o.x=0);Math.abs(o.y)<1e-4&&(o.y=0);Math.abs(o.z)<1e-4&&(o.z=0);return(new n.Plane).setFromNormalAndCoplanarPoint(o,i)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.positions.faceValueIndices),s=r.length,l=e.positions.values,u=l.length,c=new i.default(n.Vector3,u),f=0,h=new Uint32Array(u),d=0;d<s;d++)h[r[d]]=1;for(var p=0,m=new n.Vector3,v=function(e,t){h[e]=p,l.getAt(e,m),t.setAt(p,m),p++},g=0;g<u;++g)1===h[g]&&(v(g,c),f++);for(var y=0;y<s;y++)r[y]=h[r[y]];t&&console.log(u+" values reduced to "+f+", unused values removed: "+(u-f));if(u===f)return e;var x=new i.default(n.Vector3,f);x.fromArray(c.toArray());var b=new o.default({faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:r,values:x});return e.positions=b,new a.default(e)};var n=r(0),i=s(r(3)),a=s(r(5)),o=s(r(7));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e||!t)return e;var r=e.faceRangeOffsets,l=e.positions.faceValueIndices,u=e.positions.values,c=new Uint32Array(e.positions.faceValueIndices.length);if(r.length-1!==t.length)return console.error("Number of smoothing groups does not match number of faces: ",r.length-1,t.length),e;var f=e.positions.valueAdjacency,h=e.positions.faceFaceAdjacency,d=0;function p(e,t,n){for(var i=[],a=r[t];a<r[t+1];a++)if(i.push(l[a]),l[a]===e)return void(c[a]=n);console.error("index "+e+" is not on face "+t,i)}for(var m=0;m<u.length;m++){for(var v=f.getNumFacesForVertex(m),g=[],y=[],x=0;x<v;x++)g.push(f.getFaceForVertexId(m,x)),y.push(-1);for(var b=0;b<g.length;b++)if(!(y[b]>-1)){var w=g[b],_=h.adjacentFacesOnVertex(g[b],m),M=[];M.push(w);for(var S=w,T=_[0],E=-1,P=0;P<_.length;P++){for(var A=0;A<g.length&&!(T===w||y[g.indexOf(T)]>-1||0==(t[S]&t[T]));A++){M.push(T);var C=h.adjacentFacesOnVertex(T,m);if(C.length<2)break;E=C[0]===S?C[1]:C[0],S=T,T=E}S=w,T=_[1],E=-1}for(var R=0;R<M.length;R++)p(m,M[R],d),y[g.indexOf(M[R])]=d;M.length>0&&d++}}var I=new o.default({faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:c,values:new i.default(n.Vector3,d)}),O=new a.default(e);return O.normalMap=I,(0,s.recalculateNormalsFromConnectivity)(O)};var n=r(0),i=l(r(3)),a=l(r(5)),o=l(r(7)),s=r(40);function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(89));t.default=function(e,t,r,i,o){var c=o?new Uint32Array(e.faceRangeOffsets.length-1):null;if(o){var f=o.indices,p=f.length;if(0===p)return e;for(var m=0;m<p;++m){var v=f[m];c[v]=1}}var g=e.positions.edgeVertexAdjacency,y=e.positions,x=y.values,b=function(e,t){for(var r=e.length,i=new l.Vector3,a=new Float32Array(r),o=0;o<r;++o)e.getAt(o,i),a[o]=(0,n.default)(t.distanceToPoint(i))||1;return a}(x,t),w=function(e,t,r,n){for(var i=e.getNumEdges(),a=new Uint32Array(2),o=new Float32Array(i),s=new l.Line3,u=0;u<i;++u){e.getVerticesForEdge(u,a);var c=a[0],f=a[1],d=r[c],p=r[f];d===p?o[u]=2*d:(n.getAt(c,s.start),n.getAt(f,s.end),o[u]=h(t,s),o[u]>=1&&(o[u]=1),o[u]<=0&&(o[u]=0))}return o}(g,t,b,x),_=new s.default,M=new Uint32Array(e.faceRangeOffsets.length-1),S=[];if(!i||r){if(_.positions=d(y,w,b,g,y,c,null,M),_.faceRangeOffsets=_.positions.faceRangeOffsets,e.normalMap){var T=e.normalMap;_.normalMap=d(T,w,b,g,y,c,_.faceRangeOffsets)}if(e.uvMaps){for(var E=new a.default,P=0;P<e.uvMaps.length;P++){var A=e.uvMaps.namesByIndex[P];E.set(A,d(e.uvMaps.byName[A],w,b,g,y,c,_.faceRangeOffsets))}_.uvMaps=E}if(e.materialIds)for(var C=0;C<M.length;C++)M[C]>0&&S.push(e.materialIds[C]);if(!r){var R=new s.default(_);return S.length&&(R.materialIds=S),R}}var I=new s.default;if(r||i){for(var O=0;O<w.length;++O)(w[O]<-1.5||w[O]>1.5)&&(w[O]=-1*w[O]);for(var L=0;L<b.length;++L)b[L]=-1*b[L];if(I.positions=d(y,w,b,g,y,c,null,M),I.faceRangeOffsets=I.positions.faceRangeOffsets,e.normalMap){var D=e.normalMap;I.normalMap=d(D,w,b,g,y,c,I.faceRangeOffsets)}if(e.uvMaps){for(var N=new a.default,V=0;V<e.uvMaps.length;V++){var F=e.uvMaps.namesByIndex[V];N.set(F,d(e.uvMaps.byName[F],w,b,g,y,c,I.faceRangeOffsets))}I.uvMaps=N}if(e.materialIds)for(var B=0;B<M.length;B++)M[B]>0&&S.push(e.materialIds[B]);if(r){var U=[_,I],k=(0,u.default)(U,null,null);return S.length&&(k.materialIds=S),k}if(i){var z=new s.default(I);return S.length&&(z.materialIds=S),z}}var G=new s.default(_);S.length&&(G.materialIds=S);return G};var i=c(r(3)),a=c(r(14)),o=c(r(7)),s=c(r(5)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),u=c(r(113));c(r(77));function c(e){return e&&e.__esModule?e:{default:e}}var f,h=(f=new l.Vector3,function(e,t){var r=t.delta(f),n=e.normal.dot(r);return 0===n?0===e.distanceToPoint(t.start)?0:-2:-(t.start.dot(e.normal)+e.constant)/n});function d(e,t,r,n,a,s,l,u){for(var c=a.faceValueIndices,f=e.edgeVertexAdjacency,h=f.getNumEdges(),d=e.values,p=d.type,m=d.length,v=e.faceRangeOffsets,g=v.length-1,y=e.faceValueIndices,x=y.length,b=new Float32Array(h),w=new Float32Array(2*m),_=new Uint32Array(g+1),M=new Uint32Array(g+1),S=new Uint32Array(2*x),T=new i.default(p,2*m),E=0,P=0,A=0,C=0,R=new p,I=new p,O=new p,L=new p,D=0;D<g;++D){var N=v[D],V=v[D+1]-N;if(s&&1!==s[D]){for(var F=y[N],B=y[N+1%V],U=0;U<V;++U){var k=F;F=B,B=y[N+(U+2)%V],0===w[k]?(d.getAt(k,R),T.setAt(A,R),S[P]=A,w[k]=A+1,++P,++A):(S[P]=w[k]-1,++P)}++C,_[++E]=P}else{for(var z=c[N],G=c[N+1%V],j=A,H=P,W=new Uint32Array(V),X=0;X<V;++X){var q=z;z=G,G=c[N+(X+2)%V];var Y=n.findEdgeId(q,z),Z=t[Y],J=r[q];if(1===J&&(M[D]=1|M[D]),-1===J&&(M[D]=2|M[D]),Z>=0){var Q=y[N+X%V];if(d.getAt(Q,R),J>=0&&(0===w[Q]?(T.setAt(A,R),S[P]=A,w[Q]=A+1,W[X]=Q,++P,++A):(S[P]=w[Q]-1,++P)),Z>=0&&Z<=1){var K=y[N+(X+1)%V],$=0;if(0===b[$=l?f.findEdgeId(Q,K):Y]){var ee=Q,te=K;if(z<q){var re=te;te=ee,ee=re}d.getAt(ee,I),d.getAt(te,O);var ne=t[Y],ie=1-ne;I.multiplyScalar(ie),O.multiplyScalar(ne),L.addVectors(I,O),T.setAt(A,L),S[P]=A,b[$]=A+1,++P,++A}else S[P]=b[$]-1,++P}}}if(2===M[D]){A=j,P=H;for(var ae=0;ae<V;++ae)w[W[ae]]=0}else++C;_[++E]=P}}var oe=new Uint32Array(C+1),se=new Uint32Array(P),le=new i.default(p,A);w.fill(-1);for(var ue=0,ce=0,fe=0,he=0;he<E;++he){var de=_[he],pe=_[he+1]-de;if(u&&(u[he]=pe),2!==M[he]){l||(oe[++ue]=oe[ue-1]+pe);for(var me=S[de],ve=S[de+1%pe],ge=0;ge<pe;++ge){var ye=me;me=ve,ve=S[de+(ge+2)%pe],-1===w[ye]?(w[ye]=ce,se[fe]=ce,T.getAt(ye,R),le.setAt(ce,R),++ce,++fe):(se[fe]=w[ye],++fe)}}}l||(l=oe);var xe={faceRangeOffsets:l,faceValueIndices:se,values:le};return new o.default(xe)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,s,l,u,c){e=void 0!==e?e:20,t=void 0!==t?t:20,r=void 0!==r?r:100,l=l||!1,o=Math.max(1,Math.floor(o||8)),s=Math.max(1,Math.floor(s||8)),u=n.Math.clamp(u||0,0,2*Math.PI),c=n.Math.clamp(c||2*Math.PI,0,2*Math.PI-u);var f=r/s,h=r/2,d=(e-t)/r,p=void 0,m=void 0;l?(p=new i.default(n.Vector3,s+1),m=new i.default(n.Vector3,s+1)):(p=new i.default(n.Vector3,s+1+4),m=new i.default(n.Vector3,s+1+4));var v=new n.Vector3,g=new n.Vector3(0,-1,0);l||(v.set(0,-1*h,0),p.setAt(0,v),m.setAt(0,g),v.set(0,-1*h,t),p.setAt(1,v),m.setAt(1,g));for(var y=0,x=s;y<=x;y++){v.set(0,y*f-h,d*y*f+t),0===e&&y===x?g.set(0,1,0):0===t&&0===y?g.set(0,-1,0):g.set(0,0,1).applyAxisAngle(new n.Vector3(1,0,0),Math.atan(d));var b=l?y:y+2;p.setAt(b,v),m.setAt(b,g)}l||(g.set(0,1,0),v.set(0,1*h,e),p.setAt(s+1+2,v),m.setAt(s+1+2,g),v.set(0,1*h,0),p.setAt(s+1+3,v),m.setAt(s+1+3,g));var w=o<3?3:o;return(0,a.default)(p,m,w,u,c,l)};var n=r(0),i=o(r(3)),a=o(r(573));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(r(13));t.default=function(e,t,r,p){if(0===r)return(0,f.default)(e,p);for(var m=new i.Vector3,v=[0],g=r/t,y=-g,x=0;x<t;++x,y-=g)v.push(y);for(var b=e.positions.length,w=new a.default(i.Vector3,b*(t+1)),_=0;_<b;++_){e.positions.getAt(_,m);for(var M=_,S=0;S<=t;++S)m.z=v[S],w.setAt(M,m),M+=b}for(var T=e.loopRangeOffsets.length-1,E=[0],P=[],A=0,C=b*t,R=e.loopRangeOffsets[0],I=0;I<T;++I){for(var O=e.loopRangeOffsets[I+1],L=(0,h.extractVertices)(e,R,O),D=(0,c.default)(L,e.holeOffsets[I],3),N=D.length,V=0;V<N;V+=3){var F=e.loopValueIndices[D[V]+R],B=e.loopValueIndices[D[V+1]+R],U=e.loopValueIndices[D[V+2]+R];A+=3,E.push(A),r>=0?(P.push(F),P.push(B),P.push(U)):(P.push(F),P.push(U),P.push(B)),p&&(A+=3,E.push(A),r>=0?(P.push(F+C),P.push(U+C),P.push(B+C)):(P.push(F+C),P.push(B+C),P.push(U+C)))}R=O}for(var k=function(){for(var n=e.loopValueIndices[z],i=z+1;i<G;++i){for(var a=e.loopValueIndices[i],o=0,s=b,l=0;l<t;++l)A+=3,E.push(A),r>=0?(P.push(n+o),P.push(a+o),P.push(n+s)):(P.push(n+o),P.push(n+s),P.push(a+o)),A+=3,E.push(A),r>=0?(P.push(a+o),P.push(a+s),P.push(n+s)):(P.push(a+o),P.push(n+s),P.push(a+s)),o=s,s+=b;n=a}},z=e.loopRangeOffsets[0],G=0,j=0;j<T;++j){var H=z,W=!0,X=!1,q=void 0;try{for(var Y,Z=(0,n.default)(e.holeOffsets[j]);!(W=(Y=Z.next()).done);W=!0){var J=Y.value;G=J+H,k(),z=G}}catch(e){X=!0,q=e}finally{try{!W&&Z.return&&Z.return()}finally{if(X)throw q}}G=e.loopRangeOffsets[j+1],k(),z=G}var Q=new Uint32Array(E),K=new Uint32Array(P),$=l.default.fromData(Q,K,w),ee={faceRangeOffsets:Q,positions:$,uvMaps:new o.default,colorMaps:new o.default};return(0,d.applyUVMap)((0,u.autoSmooth)(new s.default(ee),80),{uvProjectionMode:d.UVMapType.Planar,alignmentAxis:d.UVAxisType.Z,autoFit:!0,center:m})};var i=r(0),a=p(r(3)),o=p(r(14)),s=p(r(5)),l=p(r(7)),u=r(40),c=p(r(191)),f=p(r(196)),h=r(115),d=r(114);function p(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(13));t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e5,l=[],c=0,f=!0,h=!1,d=void 0;try{for(var p,m=(0,n.default)(e);!(f=(p=m.next()).done);f=!0){var v=p.value;c+=v.length,v.reverse()}}catch(e){h=!0,d=e}finally{try{!f&&m.return&&m.return()}finally{if(h)throw d}}var g=new a.default(i.Vector3,c),y=[0],x=[],b=[],w=[],_=0,M=!0,S=!1,T=void 0;try{for(var E,P=(0,n.default)(e);!(M=(E=P.next()).done);M=!0){var A=E.value,C=new i.Box3,R=_,I=!0,O=!1,L=void 0;try{for(var D,N=(0,n.default)(A);!(I=(D=N.next()).done);I=!0){var V=D.value;u.set(V.X/r,V.Y/r,0),C.expandByPoint(u),g.setAt(_,u),x.push(_),++_}}catch(e){O=!0,L=e}finally{try{!I&&N.return&&N.return()}finally{if(O)throw L}}x.push(R),y.push(x.length),l.push(C),b.push(w)}}catch(e){S=!0,T=e}finally{try{!M&&P.return&&P.return()}finally{if(S)throw T}}var F={loopRangeOffsets:new Uint32Array(y),loopValueIndices:new Uint32Array(x),positions:g,holeOffsets:b},B=(0,o.findHoles)(F),U=!1,k=!0,z=!1,G=void 0;try{for(var j,H=(0,n.default)(B);!(k=(j=H.next()).done);k=!0){var W=j.value;if(W){U=!0;break}}}catch(e){z=!0,G=e}finally{try{!k&&H.return&&H.return()}finally{if(z)throw G}}if(U){var X=new Array(F.loopRangeOffsets.length-1).fill(-1);(0,o.putHolesInLoops)(F,B,X,l),(0,o.convertLoopsToFaces)(F,X,l)}return new s.default(F)};var i=r(0),a=l(r(3)),o=r(115),s=l(r(21));function l(e){return e&&e.__esModule?e:{default:e}}var u=new i.Vector3},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(13));t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e5,i=arguments[3];t&&(e=(0,a.default)(e,t));for(var o=e.loopRangeOffsets.length-1,l=i||0,u=void 0!==i?i+1:o,c=[],f=e.loopRangeOffsets[l],h=null;l<u;++l){var d=f,p=!0,m=!1,v=void 0;try{for(var g,y=(0,n.default)(e.holeOffsets[l]);!(p=(g=y.next()).done);p=!0){var x=g.value;h=x+d;for(var b=[],w=f;w<h;++w)e.positions.getAt(e.loopValueIndices[w],s),b.push({X:s.x*r,Y:s.y*r});b.reverse(),c.push(b),f=h}}catch(e){m=!0,v=e}finally{try{!p&&y.return&&y.return()}finally{if(m)throw v}}h=e.loopRangeOffsets[l+1];for(var _=[],M=f;M<h;++M)e.positions.getAt(e.loopValueIndices[M],s),_.push({X:s.x*r,Y:s.y*r});_.reverse(),c.push(_),f=h}return c};var i=r(0),a=o(r(116));function o(e){return e&&e.__esModule?e:{default:e}}var s=new i.Vector3},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var o=new a.default(n.Vector3,t),s=new Uint32Array(t+1),l=new Uint32Array([0,s.length]);r=r||Math.PI/2;for(var u=2*Math.PI,c=0;c<t;c++){var f=r+c/t*u,h=new n.Vector3(e*Math.cos(f),-e*Math.sin(f),0);o.setAt(c,h),s[c]=c}return s[t]=0,new i.default({positions:o,loopValueIndices:s,loopRangeOffsets:l,holeOffsets:[[]]})};var n=r(0),i=o(r(21)),a=o(r(3));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(r(6)),i=f(r(2));t.initManipulators=function(e,t,r){r.parentNode.parentNode;var f={width:0,height:0},y=[],x={},b=!1,w=void 0,_=!1,M=!1;function S(e){return b&&(b.lastMove=new Date),e}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){if(x[e]){for(var n,i,a,o=y.length-1;o>=0;o--)if(n=y[o],i=n.tool,n.enabled&&i[e])if(a=i[e].call(n,r),t.findFirst){if(!1!==a)break}else if(t.onlyOneHandler&&a)break;return a}}}function E(e){var r={rect:f,clientX:e.offsetX,clientY:e.offsetY,deltaX:e.movementX,deltaY:e.movementY,originalEvent:e,which:e.which,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey},n=r.clientX/(f.width/2)-1,i=-(r.clientY/(f.height/2)-1);return r.eventRay=t&&t.getCameraMouseRay({x:n,y:i}),r}function P(e){var t=new l.Vector3(0,0,-1).applyQuaternion(e.quaternion),r=new o.Raycaster(e.position,t);return{rect:f,eventRay:r,position:e.position,quaternion:e.quaternion,which:e.which,originalEvent:e,name:"controller"}}function A(e){if(!e.touches||!e.touches.length)return e;var t=e.srcElement||e.target,r=t.getBoundingClientRect();return{which:1,rect:f,clientX:e.touches[0].clientX-r.left,clientY:e.touches[0].clientY-r.top,isTouch:!0,originalEvent:e}}a.default.on(T("dragenter"),h(r,"dragenter")),a.default.on(T("dragover"),h(r,"dragover")),a.default.on(T("dragleave"),h(r,"dragleave")),a.default.on(T("dblclick"),h(r,"dblclick"));var C={};a.default.on(function(e){C[e.key]||(T("keydown")(e),C[e.key]=setInterval(function(){return T("keyheld")(e)},17))},h(r,"keydown")),a.default.on(function(e){C[e.key]&&(clearInterval(C[e.key]),delete C[e.key]),T("keyup")(e)},h(r,"keyup"));h(r,"click",E);var R=h(r,"mousedown",E),I=h(r,"mousemove",E),O=h(window,"mouseup",E),L=a.default.stream(),D=a.default.stream();function N(e){var r=t.externals.vrControls,n=e.position.clone(),i=e.quaternion.clone();return n.applyQuaternion(r.rotationalOffset).add(r.offset),i.premultiply(r.rotationalOffset),{which:e.which,position:n,quaternion:i}}var V=a.default.stream(),F=a.default.stream(),B=a.default.map(N,V),U=a.default.map(N,F),k=a.default.stream(),z=a.default.map(P,B),G=a.default.map(P,U),j=d(r,"touchstart",(0,s.compose)((0,s.filter)(p),(0,s.map)(A))),H=h(r,"touchend",A);a.default.on(function(t){if(v)return;if(t.originalEvent.target.focus(),T("mousedown")(t),_={start:new Date,event:t},!(w=T("drag",{findFirst:!0})(t)))return;b={lastMove:new Date};var r=null,n=null;L=d(window,"mousemove",(0,s.compose)((0,s.map)(S),(0,s.map)(function(e){e.preventDefault();var t={_t:new Date,rect:f,clientX:e.offsetX,clientY:e.offsetY,originalEvent:e,which:e.which,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};void 0===e.movementX?(t.deltaX=null===r?0:e.clientX-r,t.deltaY=null===r?0:e.clientY-n):(t.deltaX=e.movementX,t.deltaY=e.movementY);return r=e.clientX,n=e.clientY,t}))),D.end(!0),(D=w.momentum?g(e,L):L).map(w.handle)},R),a.default.on(function(t){if(T("mousedown")(t),M={start:new Date,event:t},!(w=T("drag",{findFirst:!0})(t)))return;b={lastMove:new Date},L=a.default.map(P,k),D.end(!0),(D=w.momentum?g(e,L):L).map(w.handle)},z),a.default.on(function(t){if(v=!0,T("mousedown")(t),_={start:new Date,event:t},w=T("drag",{findFirst:!0})(t)){b={lastMove:new Date};var n=t.clientX,a=t.clientY;L=d(r,"touchmove",(0,s.compose)((0,s.filter)(p),(0,s.map)(S),(0,s.map)(A),(0,s.map)(function(e){w.allowDefault||e.originalEvent.preventDefault();var t=(0,i.default)(e,{_t:new Date,deltaX:e.clientX-n,deltaY:e.clientY-a});return n=e.clientX,a=e.clientY,t}))),D.end(!0),(D=w.momentum?g(e,L):L).map(w.handle)}},j);var W=a.default.merge(H,O);a.default.on(function(e){b&&(L.end(!0),w.end&&w.end(),new Date-b.lastMove>200&&D.end(!0));if(T("mouseup")(e),_&&new Date-_.start<300){var t=Math.abs(e.clientX-_.event.clientX),r=Math.abs(e.clientY-_.event.clientY);isNaN(t)?T("click")(_.event):t<=5&&r<=5&&T("click")(e)}b=!1,_=!1},W),a.default.on(function(e){b&&(L.end(!0),D.end(!0),w.end&&w.end());T("mouseup")(e),M&&new Date-M.start<300&&T("click")(M.event);b=!1,M=!1},G),a.default.on(T("hover"),a.default.transduce((0,s.filter)(function(){return!b&&x.hover}),I));var X=T("scroll",{onlyOneHandler:!0});function q(e){return e.preventDefault(),{a:{x:e.touches[0].clientX,y:e.touches[0].clientY},b:{x:e.touches[1].clientX,y:e.touches[1].clientY}}}h(r,"wheel",function(e){if(x.scroll){var t=0;if(e.wheelDelta)if(e.wheelDelta%120==0)t=e.wheelDelta/120;else if(e.wheelDelta%180==0)t=e.wheelDelta/180;else{var r=Math.abs(e.deltaY)>100?200:10;t=-e.deltaY/(Math.abs(e.wheelDelta)||r)*3}else{var n=e.deltaY?e.deltaY:e.detail;t=-(n%3?n%3:n/3)}var i=X({delta:t,originalEvent:e});i&&e.preventDefault()}});var Y=(Z=function(e){var t=e,n=d(r,"touchmove",(0,s.compose)((0,s.filter)(m),(0,s.map)(q),(0,s.map)(function(e){var r={pinchX:e.b.x-t.b.x-(e.a.x-t.a.x),pinchY:t.a.y-e.a.y-(t.b.y-e.b.y),dragX:(e.a.x-t.a.x+(e.b.x-t.b.x))/2,dragY:(e.a.y-t.a.y+(e.b.y-t.b.y))/2,a:e.a,b:e.b};return t=e,r})));return a.default.endsOn(H,n),n},J=d(r,"touchstart",(0,s.compose)((0,s.filter)(m),(0,s.map)(q))),a.default.combine(function(e,t){a.default.map(t,Z(e()))},[J]));var Z,J;a.default.on(function(e){var t=e.pinchX,r=e.pinchY,n=e.dragX,i=e.dragY,a=e.a,o=e.b;Math.abs(t)+Math.abs(r)>Math.abs(n)+Math.abs(i)?T("pinch")({deltaX:a.x>o.x?-t:t,deltaY:a.y>o.y?r:-r}):T("swipe")({deltaX:n,deltaY:i})},Y);var Q={};function K(t){if(x.nodeenter||x.nodeleave){var r=t.map(function(e){var t=new l.Vector3(0,0,-1).applyQuaternion(e.orientation);return new l.Ray(e.position,t)}),n=(0,u.filter)(e,{plug:"Properties",properties:{interactive:!0}}).map(function(t){return{id:t[0],box:(0,u.getNodeBoundingBox)(e,t[0])}}),i=r.map(function(e,t){var r=n.reduce(function(t,r){var n=e.intersectBox(r.box),i=n?n.distanceTo(e.origin):1/0;return i<t.distance?{id:r.id,distance:i}:t},{id:null,distance:1/0});return{index:t,nodeId:r.id,distance:r.distance}});i.forEach(function(e){var r=t[e.index],n=r.id+r.index,i=Q[n];e.distance=e.distance!==1/0?e.distance:0,T("stylusupdate")({state:r,inter:e}),e.nodeId!==i&&(i&&T("nodeleave")(i),e.nodeId&&T("nodeenter")(e.nodeId),Q[n]=e.nodeId)})}}var $=void 0;var ee=a.default.stream(),te=0;e.addTimer("mmtimer",function(){(te+=1)>6&&(ee(10),te=0)});var re=(oe=ee,se=I,a.default.combine(function(){return se()},[oe])),ne=(ae=void 0,function(e){return e!==ae&&(ae=e,!0)}),ie=void 0;var ae;var oe,se;return a.default.on(function(t){if((x.nodeenter||x.nodeleave)&&ne(t)){var r=(0,c.filterInteractiveBoxesFromPosition)(e,t)[0];r!==ie&&(ie&&T("nodeleave")(ie),r&&T("nodeenter")(r),ie=r)}},re),{resize:function(e){f=e},frameUpdate:function(r){var n=function(){var e=t.externals.zSpaceEffect;if(!e)return[];e.getZSpace().zspaceUpdate();var r=e.stylusUpdate(t.camera,B,U,k);if(r){var n={id:"zSpace Stylus",index:0,position:r.position,orientation:r.quaternion};return[n]}}();n&&n.length&&K(n);var i=function(){var e=t.externals.controllers,r=t.externals.vrControls;if(r&&e&&x.controllerupdate){var n=e.filter(function(e){return e.update(V,F),!!e.getGamepad()}).map(function(e){var t=e.getGamepad(),n=e.position.clone(),i=e.quaternion.clone();return n.applyQuaternion(r.rotationalOffset).add(r.offset),i.premultiply(r.rotationalOffset),k({which:0,position:n,quaternion:i}),{id:t.id,index:t.index,position:n,orientation:i,buttons:t.buttons,axes:t.axes}});return n.length&&T("controllerupdate")({states:n}),n}}();i&&i.length?K(i):r===c.RENDER_MODES.vr&&function(){if(x.nodeenter||x.nodeleave){var t=(0,c.filterInteractiveBoxesFromCenter)(e)[0];t!==$&&($&&T("nodeleave")($),t&&T("nodeenter")(t),$=t)}}()},updateTools:function(e){x={},(y=e).forEach(function(e){(0,n.default)(e.tool).forEach(function(e){return x[e]=!0})})}}};var a=f(r(642)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),s=r(636),l=r(0),u=r(4),c=r(8);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){var n=a.default.stream();return e.addEventListener(t,n),r?a.default.map(r,n):n}function d(e,t,r){var n=a.default.stream();return e.addEventListener(t,n),a.default.transduce(r,n)}function p(e){return e.touches&&1===e.touches.length}function m(e){return e.touches&&2===e.touches.length}var v=!1;function g(e,t){var r=a.default.stream();e.addTimer("momentum",r);var n=new Date,i=new l.Vector2(0,0),o=new l.Vector2(0,0),u=a.default.transduce((0,s.filter)(function(n){return!((o?o.length():1)<.1&&t.end())||(e.killTimer("momentum"),r.end(!0),!1)}),r);return a.default.combine(function(e,t){var r=e(),a=new l.Vector2(r.deltaX,r.deltaY),s=t(),u=r._t!==n;n=r._t;var c=u?a:i.clone(),f=s<30?.1:Math.min(s/30*.1,1);return{deltaX:(o=c.multiplyScalar(f).add(o.multiplyScalar(1-f))).x,deltaY:o.y}},[t,u])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLATFORMS=void 0;var n=T(r(79)),i=T(r(6)),a=T(r(13)),o=T(r(2));t.default=function(e,t){return(0,u.createTranslator)(e,C,t)};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),l=T(r(31)),u=r(631),c=r(199),f=r(300),h=r(19),d=r(8),p=r(25),m=r(4),v=r(39),g=r(90),y=T(r(632)),x=T(r(633)),b=T(r(600)),w=T(r(617)),_=T(r(599)),M=r(59),S=r(10);function T(e){return e&&e.__esModule?e:{default:e}}var E=l.default.isMobile,P=l.default.isMac,A=t.PLATFORMS={server:"server",desktop:"desktop",mobile:"mobile"};function C(e,t){var r={scene:null,deviceTracking:null,camera:null,renderer:null,hasLight:!1,reflectiveFloor:null,loaded:!1,rect:new s.Vector2(400,300),toneMapping:null,selection:{}},u=new s.Scene;r.scene=u;var T=(0,_.default)(e,u);r.nodeTranslator=T;var C=(0,w.default)(r);r.reflectiveFloor=C;var R=new s.CombinedCamera(1,1,75,.1,1e3);r.camera=R,u.add(R);var I=new s.DirectionalLight(16777215,1);R.add(I);var O={antialias:!1,precision:"highp",alpha:!0,preserveDrawingBuffer:!0};t&&(O.canvas={style:{},addEventListener:function(){}},O.context=t);var L=new s.WebGLRenderer(O);r.renderer=L,L.setClearColor(16777215),L.autoResizeTextures=!1,L.gammaInput=!0,L.gammaOutput=!0,L.toneMapping=s.ReinhardToneMapping,L.physicallyCorrectLights=!0,L.shadowMap.enabled=!0,L.shadowMap.type=s.BasicShadowMap;var D=window.devicePixelRatio;L.setPixelRatio(D),L.isMobile=E,L.isMac=P;var N=null,V=null,F=[],B=null;r.toneMapping=L.toneMapping;var U=void 0,k=(0,o.default)({},l.default),z={},G={};var j=!!t,H=(0,b.default)(e,u,L,R,j,256,256,r);r.passManager=H;var W=H.composer,X=H.passes,q=H.passControl,Y=new s.ParallaxBarrierEffect(L);function Z(t,n){var i=(0,d.getRenderingMode)(e);if(D=window.devicePixelRatio,N&&i!==d.RENDER_MODES.vr){var a=N.parentNode.getBoundingClientRect();t=t/D||a.width,n=n/D||a.height,L.setPixelRatio(D)}else i===d.RENDER_MODES.vr&&(t=window.innerWidth,n=window.innerHeight,k.vrEffect.setSize(t,n));if(i===d.RENDER_MODES.lenticular&&Y.setSize(t,n),!(t<10||n<10)){if(r.rect.set(t,n),i!==d.RENDER_MODES.vr){var o=r.rect.x/r.rect.y;e.dispatch((0,d.setRect)(r.rect));var s=(0,S.getCameraController)(e);s.id&&e.dispatch((0,m.set)({id:s.id,plug:"Camera",property:"aspectRatio"},o)),L.setSize(r.rect.width,r.rect.height)}i===d.RENDER_MODES.zSpace&&k.zSpaceEffect.setSize(window.innerWidth,window.innerHeight),r.reflectiveFloor.setRenderSize(r.rect.width,r.rect.height),B&&B.resize(r.rect),n&&0!==n&&(R.aspect=t/n,R.updateProjectionMatrix()),H.resize(t,n,D)}}Y.setSize(256,256),e.dispatch((0,d.setThree)({scene:u,camera:R,renderer:L,THREE:s,composer:W}));var J=!1;function Q(t){t?U=(0,x.default)(e,k):(window.removeEventListener("deviceorientation",U),U=null)}var K=null,$=-1;function ee(){var t,i,o,l,c,f=(0,d.getRenderingMode)(e);if(K&&clearTimeout(K),t=Date.now(),$>0?t-$:-1,$=t,I.visible=!r.hasLight,i="deviceTracking",o=Q,l=e.getIn(["player",i]),r[i]!==l&&(o(l,r[i]),r[i]=l),B&&(c=(0,p.getCommands)(e),F!==(0,p.getTools)(e)&&(F=(0,p.getTools)(e),B.updateTools(F.map(function(e){return c[e]}).toArray())),function(){var t=(0,p.getCommands)(e),r=(0,p.getActiveCommandsWithWidgets)(e);T.getNodes().widgets.children.forEach(function(e){r[e.name]||function(e,t,r,n){var i=e.widget;i&&i.remove&&i.remove.call(e,t);T.getNodes().widgets.remove(t),delete T.getNodes()[n]}(t[e.name],e,e.name,"widgetsRoot-"+e.name)}),(0,n.default)(r).forEach(function(e){var t=e.name,r=e.widget,n="widgetsRoot-"+t;T.getNodes()[n]||function(e,t,r){T.getNodes()[r]=new s.Object3D,T.getNodes()[r].name=t,T.getNodes().widgets.add(T.getNodes()[r]),!1!==e.options.displayGizmo&&e.widget.draw.call(e,T.getNodes()[r])}(e,t,n),r&&r.position&&r.position.call(e,T.getNodes()[n])})}(),B.frameUpdate(f)),H.updateOutlineHighlights(),H.checkEnableRefractivePass(),function(){var t=G,r={};for(var n in(0,v.getGhosters)(e).forEach(function(e){var n=!0,i=!1,o=void 0;try{for(var s,l=(0,a.default)(e.selectedIds);!(n=(s=l.next()).done);n=!0){var u=s.value,c=T.getGeometry(u,M.SUB_OBJECT_TYPES.Face);c&&c.material&&(r[u]=t[u]||{transparent:c.material.transparent,opacity:c.material.opacity},c.material.transparent=!0,c.material.opacity=e.opacity)}}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}}),t)if(!r[n]){var i=T.getGeometry(n,M.SUB_OBJECT_TYPES.Face);i&&i.material&&(i.material.transparent=t[n].transparent,i.material.opacity=t[n].opacity)}G=r}(),r.reflectiveFloor.isActive()&&(L.setClearColor(X.opaquePass.clearColor,X.opaquePass.clearAlpha),r.reflectiveFloor.render(L,R,r.rect.width,r.rect.height)),r.hasPlaneShadow&&u.getObjectByName("Objects").traverseVisible(function(e){e.isPlanarShadow&&e.shadowPlane&&e.shadowPlane.update(L,u,function(e){var t=T.getNodes()[e.userData.nodeId];return t.userData.isPolyMesh&&t.userData.castShadow})}),f===d.RENDER_MODES.normal){L.setClearColor(16777215),j?q(d.RENDER_MODES.high,A.server):q(d.RENDER_MODES.normal);var h=e.numRendersRemaining();if(h+1>0&&X.traaPass.enabled){X.traaPass.staticMode=h+1<X.cameraJitter.numJitterSamples;var m=u.boundingBox(!0);R.fitClipPlanes(m),R.updateProjectionMatrix();var g=1;g=window.devicePixelRatio,X.cameraJitter.advance(r.rect.x*g,r.rect.y*g,R),X.traaPass.staticMode&&u.traverseVisible(function(e){e.isLight&&e.shadow&&e.shadow.advance&&e.shadow.advance()})}W.render()}else if(f===d.RENDER_MODES.vr){if(q(d.RENDER_MODES.vr),!k.vrEffect)throw new Error("Expect vr mode to initialize vrEffect");W.vrRender(k.vrEffect,u,R,!0)}else if(f===d.RENDER_MODES.zSpace){if(q(d.RENDER_MODES.zSpace),!k.zSpaceEffect)throw new Error("Expect ZSpace mode to initialize zSpaceEffect");k.zSpaceEffect.composerRender(W,u,R)}}function te(t){var r=t===(0,h.getSceneId)(e)?u:T.getNodes()[t];return(0,y.default)(r)}function re(e){var t=new s.Raycaster;return t.setFromCamera(e,R),t}function ne(e,t){var r=e.geometry;if(r&&!(r.isBufferGeometry?!!r.attributes.position.array:!!r.vertices))return!1;if(e.isLine||e.isLineSegments||e.isPoints){r.boundingBox||r.computeBoundingBox();var n=r.boundingBox.clone().applyMatrix4(e.matrixWorld).getBoundingSphere().radius,i=e.getWorldPosition(),a=R.getWorldDirection().negate(),o=(new s.Plane).setFromNormalAndCoplanarPoint(a,i).distanceToPoint(R.getWorldPosition()),l=2*n/(2*Math.tan(R.fov/2*Math.PI/180)*o);t.params.Points.threshold=.02/l,t.linePrecision=.01/l}var u,c=t.intersectObject(e);if(c.length>0){var f=(u=e).isLine||u.isLineSegments?M.SUB_OBJECT_TYPES.Edge:u.isMesh?M.SUB_OBJECT_TYPES.Face:u.isPoints?M.SUB_OBJECT_TYPES.Vertex:null;return e.name===M.SUB_OBJECT_TYPES.Vertex&&c.sort(function(e,t){return e.distanceToRay-t.distanceToRay}),c.forEach(function(t){t.faceIndex>=0&&e.userData.triangulation&&(t.index=e.userData.triangulation.mapTriangulationFaceId[t.faceIndex]),e.isLineSegments&&null!==t.index&&null!==t.index&&(t.index/=2),t.subObjectType=f}),{id:e.userData.nodeId,node:e,data:c}}return!1}return{attach:function(t){N!==t&&((N=t).insertBefore(L.domElement,N.firstChild),V=N.parentElement,e.dispatch((0,d.setPlayerElement)(V,L.domElement)),Z(),J=!0)},isAttached:function(){return J},resize:Z,preTranslate:function(){var t=(0,S.getCameraController)(e);!function(){var t=(0,v.getSubObjectHighlighters)(e);r.selection={},t.forEach(function(e){var t=e.selection,n=t.ids[0],i=t.subObjectSelection;n&&i&&(r.selection[n]||(r.selection[n]={}),r.selection[n][i.type]||(r.selection[n][i.type]={}),r.selection[n][i.type].selected=i.indices)});var n=(0,p.getCommand)(e,"select");if(n){var i=n.getState();r.selection[i.selectedId]&&(r.selection[i.selectedId][i.type]||(r.selection[i.selectedId][i.type]={}),r.selection[i.selectedId][i.type].hover=i.hoverIndex)}}(),t.id&&t.getWorldTransform(e)},translate:function(e,t,n,i){T.translate(e,t,n,i,r)},deleteNode:function(e){T.deleteNode(e)},raycastSelect:function(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=[];n=n||re(t);var o=u;if(i.nodes)i.nodes.filter(function(t){return(0,m.isVisible)(e,t)}).map(function(e){return T.getTranslationRoot(e)}).forEach(function(e){e&&e.traverseVisible(function(e){var t=ne(e,n);t&&a.push(t)})});else{var s=T.getNodes();if((0,g.isUuid)(r)&&s[r]?o=s[r]:(r||(r="Objects"),o=u.children.find(function(e){return"Group"===e.type&&e.name===r})),!o)return[];var l=o.userData&&o.userData.nodeId;if(l&&!(0,m.isVisible)(e,l))return[];var c=e.get("sceneGraph");o.traverseVisible(function(t){var r=t.userData&&t.userData.nodeId,o=r&&c.nodes[r]&&function(t,r,n){if("Objects"===r)return!1;var i=(0,m.get)(e,{id:t,evalPlug:"Properties"});return!(n.layer&&n.layer!==i.layer||n.filter&&"function"==typeof n.filter&&!n.filter(t)||!1===i.selectable)}(r,c.nodes[r].type,i)&&ne(t,n);o&&a.push(o)})}return a.sort(function(e,t){return e.data[0].distance-t.data[0].distance}),a},getCameraMouseRay:re,getNodeBoundingBox:te,getNodeListBoundingBox:function(t){var r=(new s.Box3).makeEmpty();return t.forEach(function(t){var n=t===(0,h.getSceneId)(e)?(0,y.default)(u):te(t);r.union(n)}),r},getThreeObject:function(e,t){return t?T.getGeometry(e,M.SUB_OBJECT_TYPES[t]):T.getNodes()[e]},postTranslate:ee,onLoad:function(){return!!V&&(r.loaded=!0,t||(B=(0,f.initManipulators)(e,this,L.domElement)).resize(r.rect),T.getNodes().widgets=new s.Object3D,T.getNodes().widgets.name="Widgets",u.add(T.getNodes().widgets),u.userData.nodeId=(0,h.getSceneId)(e),!0)},getAnnotations:function(){return T.getAnnotations()},getContext:function(){return L.getContext()},reset:function(){(0,c.clearGeometryCache)(),r=(0,o.default)(r,{loaded:!1}),T.reset(),(0,i.default)(z).forEach(function(e){return delete z[e]}),u.userData.nodeId=(0,h.getSceneId)(e)},scene:u,camera:R,renderer:L,composer:W,externals:k,textureCache:z,passControl:q,getThreeNode:function(e){return T.getNodes()[e]},indexRender:function(e){L.toneMapping=e?s.NoToneMapping:r.toneMapping,L.gammaInput=!e,L.gammaOutput=!e,L.autoClear=!e,X.indexPass.enabled=e,X.indexPass.switchMaterial(),ee()},getAllPasses:function(){return X}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moveNodeOnPlane=t.moveNodeOnObjects=void 0;var n=m(r(320)),i=m(r(79)),a=m(r(6));t.default=function(e,t){var r={activeAxis:!1,cursorTransform:null,attachInfo:null,parentTransform:null,moved:!1,modelInitState:null,offset:{}};return{label:"Move Node",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{displayGizmo:!0,mode:"free",plane:{normal:{x:0,y:1,z:0},constant:0},surfaceNodeIds:[],onChange:void 0,onEnd:void 0,shouldMove:void 0,updatePosition:void 0,keepOffset:!0},initNode:function(t){r.moved=!1,r.nodeId=t,r.originalWorldTransform=(0,l.getWorldTransform)(e,t),r.cursorTransform=null,r.attachInfo=function(e,t,r){if(!r||!r.models)return;var n=r.models.find(function(e){var r=e.modelId;return r===t});if(!n)return;var i=[];if(n.attachPoints.forEach(function(r){if(U(e,r.attachNodeId,t)){var n=r.anchorNodeIds.filter(function(r){return!U(e,r,t)});if(n.length){var a=n.map(function(t){return{translation:(0,d.default)((0,l.getWorldTransform)(e,t)).translation,id:t}});i.push({attachNodeId:r.attachNodeId,anchors:a,withRotation:r.withRotation,attachDistance:r.attachDistance,realtimeRotation:r.realtimeRotation})}}}),i.length)return{modelId:t,attachPoints:i,ghost:n.ghost,required:r.required,alwaysAttach:r.alwaysAttach||!1}}(e,t,this.options.attach);var n=(0,l.get)(e,{id:t,plug:"Transform",property:"rotation"}),a=(0,l.get)(e,{id:t,plug:"Transform",property:"rotateOrder"}),s=(new o.Euler).setFromVector3((new o.Vector3).copy(n).multiplyScalar(v/180),a),u=(new o.Matrix4).makeRotationFromEuler(s);r.modelInitState={rotation:n,rotationOrder:a,rotationMatrix:u},r.attachInfo&&r.attachInfo.ghost&&function(e,t){var r=t.attachInfo,n=r.ghost,a=r.modelId,o=r.attachPoints,s=t.attachInfo.clones={},u="string"!=typeof n;u&&(t.attachInfo.ghoster=e.dispatch((0,c.addGhoster)()));o.forEach(function(r){var o=r.anchors,c=r.attachNodeId,f=r.withRotation;o.forEach(function(r){r.translation;var o=r.id;e.dispatch((0,l.clone)({from:a,includeParent:!0})).then(function(r){var h=r[a];if(s[h]=r,!u){var d=(0,l.find)(e,{from:h,name:n});if(d){var p=(0,l.filter)(e,{from:d,includeParent:!0}),m=(0,l.filter)(e,{from:h,type:"PolyMesh"}).filter(function(e){return!p.includes(e)});p.forEach(function(t){e.dispatch((0,l.set)({id:t,plug:"Properties",property:"visible"},!0))}),m.forEach(function(t){e.dispatch((0,l.set)({id:t,plug:"Properties",property:"visible"},!1))})}}var v=(0,l.getAttachTransform)(e,o,h,c,f);C(e,v,h,{}),u&&t.attachInfo.ghoster.selectionSet.add((0,i.default)(r))})})})}(e,r);var f=(0,l.find)(e,{id:t,parent:!0});r.parentTransform=(0,l.getWorldTransform)(e,f)||new o.Matrix4},clearState:function(){["nodeId","originalWorldTransform","cursorTransform","modelInitState","attachInfo","attached"].forEach(function(e){return r[e]=null}),r.offset={}},moveNode:function(t){"CANVAS"===t.originalEvent.target.nodeName&&"claraplayer"===t.originalEvent.target.parentNode.parentNode.className&&("plane"===this.options.mode?B(e,t,r,this.options):"surface"===this.options.mode?L(e,t,r,this.options):R(e,t,r,this.firstInter,this.options))},finishMoveNode:function(t){if(r.attachInfo){var n=r.attachInfo,i=n.clones,s=n.ghoster,l=n.required;if(i&&((0,a.default)(i).forEach(function(t){e.dispatch((0,u.deleteNode)(t))}),r.attachInfo.clones={},s&&e.dispatch((0,c.removeGhoster)(s.id))),l&&!r.attached){var f=new o.Vector3;f.setFromMatrixPosition(r.originalWorldTransform),I(e,r.nodeId,f)}}"function"==typeof this.options.onEnd&&this.options.onEnd(t,r),this.clearState()},tool:{hover:function(e){this.active&&(r.activeAxis=(0,f.highlightAxis)(t,e,r.activeAxis),r.nodeId&&this.moveNode(e))},mousedown:function(t){if("controller"===t.name){var n=(0,p.getOffsetFromFirstIntersect)(e,t);if(!n)return;this.firstInter=n}var i=(0,c.getSelectedNodes)(e)[0];if(this.options.keepOffset&&i){r.offset.vectorOffset=function(e,t,r){var n=(0,c.getSelectedNodes)(e)[0],i=new o.Vector3;if(!n)return i;var a=void 0;if(t.eventRay)a=t.eventRay.ray;else{var s=O(e,t);a=e.getTranslator().getCameraMouseRay(s).ray}if(r.plane){var u=r.plane,f=new o.Plane,h=new o.Vector3,d=u.normal;if(h.set(d.x,d.y,d.z),f.set(h,u.constant),!a.intersectsPlane(f))return;a.intersectPlane(f,i)}var p=(0,l.getWorldTransform)(e,n),m=(new o.Vector3).setFromMatrixPosition(p);return i.sub(m)}(e,t,this.options);var a=O(e,t),u=function(e,t){var r=(0,l.getScreenPosition)(e,t);return O(e,r)}(e,i);r.offset.ndcOffset={x:u.x-a.x,y:u.y-a.y},r.offset.cameraTranslation=(new o.Vector3).setFromMatrixPosition((0,s.getCameraWorldTransform)(e));var f=(new o.Vector3).setFromMatrixPosition((0,l.getWorldTransform)(e,i));r.offset.initCameraNodeDistance=f.sub(r.offset.cameraTranslation).length()}r.nodeId&&this.finishMoveNode(t)},mouseup:function(e){"controller"===e.name&&(this.firstInter=null),r.nodeId&&this.finishMoveNode(e)},drag:function(t){if(1!==t.which||!this.active||t.metaKey)return!1;if(!r.nodeId){var n=(0,c.getSelectedNodes)(e)[0];if(!r.activeAxis&&!k(e,t,n))return!1;var i=this;return this.initNode(n),{momentum:!1,handle:function(e){i.moveNode(e)},end:function(e){i.finishMoveNode(e)}}}}},widget:{draw:function(t){t.add((0,f.drawMoveGizmo)());var r=(0,f.getViewScale)(e);t.scale.set(r,r,r)},position:function(t){var r=(0,c.getSelectedNodes)(e);if(r.length){t.visible=!0;var n=r[0],i=(0,l.getWorldTransform)(e,n),a=new o.Vector3;a.setFromMatrixPosition(i),t.position.set(a.x,a.y,a.z);var s=(0,f.getViewScale)(e);t.scale.set(s,s,s)}else t.visible=!1}}}},t.moveNodeFree=R,t.dragOnSelectedNode=k;var o=r(0),s=(m(r(118)),r(8)),l=r(4),u=r(10),c=r(39),f=r(200),h=m(r(306)),d=m(r(42)),p=r(201);function m(e){return e&&e.__esModule?e:{default:e}}var v=Math.PI,g=Math.sin,y=(new o.Matrix4,new o.Matrix4,new o.Matrix4,new o.Matrix4),x=(new o.Vector3,new o.Vector3);var b,w,_,M,S,T,E,P,A=(b=new o.Vector3,w=new o.Quaternion,_=new o.Matrix4,M=new o.Matrix4,S=new o.Vector3,T=new o.Quaternion,E=new o.Vector3,P=new o.Vector3,function(e,t,r,i){var a=i.attachPoints,u=i.required,c=i.alwaysAttach;(0,l.getWorldTransform)(e,r).decompose(b,w,E),M.getInverse(_.makeRotationFromQuaternion(w));var f=a.map(function(r){var n=r.attachNodeId,i=r.anchors,a=r.realtimeRotation;return(0,l.getWorldTransform)(e,n).decompose(S,T,E),a||(P.subVectors(S,b),P.applyMatrix4(M).applyMatrix4(t.modelInitState.rotationMatrix),S.addVectors(b,P)),i.map(function(e){var t=e.translation;return(new o.Vector3).subVectors(S,t).length()})}).map(function(e){var t=0,r=n.default;return e.forEach(function(e,n){e<r&&(r=e,t=n)}),{idx:t,min:r}}),h=0;f.forEach(function(e,t){e.idx,e.min,f[t].min<f[h].min&&(h=t)},0);var d=a[h].attachDistance||function(e){var t=(0,s.getCamera)(e),r=(0,s.getCameraWorldTransform)(e),n=new o.Vector3,i=new o.Quaternion,a=new o.Vector3;r.decompose(n,i,a);var u=(0,s.getBoundingBox)(e).getBoundingSphere(),c=(0,l.get)(e,{id:t,plug:"Camera",property:"fieldOfView"}),f=n.distanceTo(u.center),h=(new o.Vector3).subVectors(u.center,n),d=new o.Vector3(0,0,-1).applyQuaternion(i).angleTo(h);return f*Math.cos(d)*Math.tan(c/2*Math.PI/180)*.1}(e),p=a[h].anchors[f[h].idx].id,m=a[h].attachNodeId,v=a[h].withRotation;return f[h].min<d?{attach:!0,anchorNodeId:p,modelAttachNodeId:m,withRotation:v}:{attach:c,anchorNodeId:p,modelAttachNodeId:m,withRotation:v&&u}});function C(e,t,r,n,i){var a={id:r,plug:"Transform",property:"translation"},o={id:r,plug:"Transform",property:"rotation"};if(t){var s=t.translation,u=t.rotation;i&&(n.cursorTransform=i),s&&e.dispatch((0,l.set)(a,s)),e.dispatch((0,l.set)(o,u||n.modelInitState.rotation))}else n.modelInitState.rotation&&e.dispatch((0,l.set)(o,n.modelInitState.rotation)),n.cursorTransform&&(n.cursorTransform=null)}function R(e,t,r,n,i){var a=i.onChange,u=i.shouldMove,c=i.updatePosition,f=t.deltaX,d=t.deltaY,p=r.activeAxis,m=r.attachInfo,y=r.nodeId,b=r.moved,w=(0,s.getCameraWorldTransform)(e),_=(0,l.getWorldTransform)(e,y);if(_){r.cursorTransform&&_.copy(r.cursorTransform);var M=(new o.Vector3).setFromMatrixPosition(_);if(x.copy((0,h.default)(e,y,f,d)),p){var S=new o.Vector3(0,0,0);S[p]=1;var T=(new o.Vector3).setFromMatrixPosition(w).sub(M),E=new o.Vector3(0,0,0),P=(new o.Plane).setFromCoplanarPoints(T,S,E);x.projectOnPlane(P.normal);var A=(new o.Vector3).subVectors(x,T);x.projectOnVector(S).normalize();var C=T.angleTo(x),R=v-T.angleTo(A),O=v-C-R,L=T.length()*g(R)/g(O);x.multiplyScalar(L)}if(t.eventRay&&n){var N=n.inter,V=n.offset,F=t.eventRay.ray,B=(new o.Vector3).copy(F.origin).addScaledVector(F.direction,N.distance);M.addVectors(B,V)}else M.add(x);("function"!=typeof u||u(t,M))&&("function"==typeof c&&c(M),b||(r.moved=!0),I(e,y,M),m&&D(e,y,r,m),"function"==typeof a&&a(t,void 0,r))}}function I(e,t,r){!function(e,t,r){var n=(0,l.find)(e,{id:t,parent:!0}),i=(0,l.getWorldTransform)(e,n);i&&(y.getInverse(i,!0),r.applyMatrix4(y))}(e,t,r),e.dispatch((0,l.set)({id:t,plug:"Transform",property:"translation"},r))}function O(e,t){var r=t.x||t.clientX,n=t.y||t.clientY,i=(0,s.getRect)(e);return{x:2*r/i.width-1,y:-2*n/i.height+1}}var L=t.moveNodeOnObjects=function(){new o.Quaternion;var e=new o.Vector3;return function(t,r,n,i){var a=i.surfaceNodeIds,o=i.onChange,s=i.shouldMove,u=i.updatePosition,c=n.nodeId,f=n.moved,h=O(t,r);e.setFromMatrixPosition((0,l.getWorldTransform)(t,c));var d=e.sub(n.offset.cameraTranslation).length();n.offset.ndcOffset&&(h.x+=n.offset.ndcOffset.x*n.offset.initCameraNodeDistance/d,h.y+=n.offset.ndcOffset.y*n.offset.initCameraNodeDistance/d);var p=t.getTranslator().raycastSelect(h,"Objects",r.eventRay),m=(0,l.filter)(t,{from:{id:c}}),v=p.find(function(e){return a.findIndex(function(t){return t===e.id&&t!==c&&m.indexOf(t)<0})>=0});if(v){var g=v.data[0].point;("function"!=typeof s||s(r,g,v.data))&&("function"==typeof u&&u(g,v.data),f||(n.moved=!0),I(t,c,g),"function"==typeof o&&o(r,v.data,n))}}}();function D(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.parentTransform,o=i.moveOnPlane,s=A(e,r,t,n),u=s&&(s.attach||s.withRotation)&&(0,l.getAttachTransform)(e,s.anchorNodeId,t,s.modelAttachNodeId,s.withRotation);if(u){if(o){var c=u.translation.clone().applyMatrix4(a);Math.abs(o.distanceToPoint(c))>.001&&(u.translation=void 0,u.rotation=void 0)}!s.attach&&s.withRotation&&(u.translation=void 0)}r.attached=s.attach?s:null,C(e,u,t,r)}var N,V,F,B=t.moveNodeOnPlane=(N=new o.Vector3,new o.Quaternion,V=new o.Plane,F=new o.Vector3,function(e,t,r,n){var i=n.plane,a=n.onChange,o=n.shouldMove,s=n.updatePosition,l=r.attachInfo,u=r.parentTransform,c=r.nodeId,f=r.moved,h=i.normal;F.set(h.x,h.y,h.z),V.set(F,i.constant);var d=void 0;if(t.eventRay)d=t.eventRay.ray;else{var p=O(e,t);d=e.getTranslator().getCameraMouseRay(p).ray}d.intersectsPlane(V)&&(d.intersectPlane(V,N),r.offset&&r.offset.vectorOffset&&N.sub(r.offset.vectorOffset),("function"!=typeof o||o(t,N))&&("function"==typeof s&&s(N),I(e,c,N),f||(r.moved=!0),l&&D(e,c,r,l,{parentTransform:u,moveOnPlane:V}),"function"==typeof a&&a(t,void 0,r)))});function U(e,t,r){if(!t||!r)return!1;for(;t;){if(t===r)return!0;t=(0,l.find)(e,{id:t,parent:!0})}return!1}function k(e,t,r){for(var n=(0,s.filterNodesFromPosition)(e,t),i=0;i<n.length;i+=1)if("controller"!==t.name){if(U(e,n[i],r))return!0}else r===n[i]&&(result=!0);return!1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=!1;return{label:"Scale Node",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{onChange:void 0,onEnd:void 0},tool:{hover:function(e){this.active&&(r=(0,s.highlightAxis)(t,e,r))},drag:function(t){if(1!==t.which||!this.active||t.metaKey)return!1;var n=this;return{momentum:!1,handle:function(t){g(e,t,r),"function"==typeof n.options.onChange&&n.options.onChange(t)},end:function(){"function"==typeof n.options.onEnd&&n.options.onEnd(t)}}}},widget:{draw:function(t){t.add((0,s.drawScaleGizmo)());var r=(0,s.getViewScale)(e);t.scale.set(r,r,r)},position:function(t){var r=(0,o.getSelectedNodes)(e);if(r.length){t.visible=!0;var i=r[0],l=(0,a.getWorldTransform)(e,i),u=new n.Vector3;u.setFromMatrixPosition(l),t.position.set(u.x,u.y,u.z);var c=(0,s.getViewScale)(e);t.scale.set(c,c,c)}else t.visible=!1}}}},t.scaleNode=g;var n=r(0),i=r(8),a=r(4),o=(r(10),r(39)),s=r(200),l=c(r(306)),u=c(r(305));function c(e){return e&&e.__esModule?e:{default:e}}var f=Math.max,h=Math.pow,d=Math.PI,p=Math.sin,m=Math.min,v=(Math.sqrt,1e-6);function g(e,t,r){var s=(0,i.getRect)(e),c=(0,o.getSelectedNodes)(e);if(c.length){var g=c[0],y=(0,a.get)(e,{id:g,plug:"Transform",property:"scale"});if(y){var x=f((0,u.default)(e,g),v)||v,b=t.delta||t.deltaX/30-t.deltaY/30,w=f(m(2*b/s.y/x,.001),-.001),_=h(2,100*w),M=(0,a.getWorldTransform)(e,g),S=(new n.Vector3).setFromMatrixPosition(M),T=(new n.Vector3).copy(y),E=(0,i.getCameraWorldTransform)(e);if(r){var P=new n.Vector3(0,0,0);P[r]=1;var A=(0,l.default)(e,g,t.deltaX,t.deltaY);A.projectOnVector(P);var C=(new n.Vector3).setFromMatrixPosition(E).sub(S),R=new n.Vector3(0,0,0),I=(new n.Plane).setFromCoplanarPoints(C,P,R);A.projectOnPlane(I.normal);var O=(new n.Vector3).subVectors(A,C);A.projectOnVector(P).normalize();var L=C.angleTo(A),D=d-C.angleTo(O),N=d-L-D,V=C.length()*p(D)/p(N);A.multiplyScalar(V),P.set(1,1,1),P[r]=1+2*A[r]/T[r],T.multiply(P)}else{var F=f(T.length(),v);T.setLength(F*_)}e.dispatch((0,a.set)({id:g,plug:"Transform",property:"scale"},T))}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateSphericalRotation=b,t.default=function(e,t){return{label:"Orbit",active:!0,enabled:!0,display:{playerTools:!0},options:{touchVerticalDefault:!1,turnTable:!1,mobileOnly:!1,momentum:!0},tool:{drag:function(t){if(1!==t.which||!this.active&&!t.metaKey)return!1;var r=this.options,a=r.touchVerticalDefault,u=r.turnTable,m=r.mobileOnly;return{momentum:this.options.momentum,allowDefault:!0,handle:function(t){var r=t.deltaX,v=t.deltaY,g=t.isTouch,y=t.originalEvent;if(!(g&&a&&Math.abs(v)>Math.abs(r))){y&&y.preventDefault&&y.preventDefault();var x=(0,s.getCamera)(e),w=(0,h.getCameraController)(e),_=w.getWorldTransform(e),M=(0,c.default)(e,x),S=(0,f.getOrbitMode)(e,x);if("nodeRotate"===S){var T=(0,f.getNodeRotateProperties)(e,x),E=T.targetId,P=T.axis,A=T.fixedAzimuth,C=T.gyroscope;E?(0,d.rotateNode)(e,{deltaX:r,deltaY:v},P,null,E,{gyroscope:C}):console.warn("Warning: Orbit target is null for node rotate orbit mode."),r=0,v=A?0:v}else u&&(v=m?i.isMobile?0:v:0);b(e,x,_,M,new n.Vector2(r,v)),(0,p.default)(e,x,_);var R=(0,l.get)(e,{id:x,evalPlug:"Transform"}).target;e.dispatch((0,h.merge)([x,"Transform",0],(0,o.default)(_))),R||e.dispatch((0,h.merge)([h.virtualTargetId,"Transform",0],(0,o.default)(M)))}}}}}}};var n=r(0),i=r(31),a=m(r(147)),o=m(r(42)),s=r(8),l=r(4),u=m(r(119)),c=m(r(65)),f=r(117),h=r(10),d=r(202),p=m(r(146));function m(e){return e&&e.__esModule?e:{default:e}}Math.tan,Math.cos,Math.atan;var v=Math.acos,g=Math.min,y=(Math.max,Math.pow,Math.PI),x=Math.sqrt;function b(e,t,r,n,i){var a=(0,l.get)(e,{scene:!0,evalPlug:"Player"}),o=(0,l.get)(e,{id:t,evalPlug:"Camera"}),u=(0,s.getRect)(e);(({trackball:T,firstPerson:E})[(0,f.getOrbitMode)(e,t)]||S)(e,a,t,o,n,r,u,i)}var w=new n.Vector3,_=new n.Vector3,M=new n.Vector3;new n.Spherical,new n.Spherical,new n.Matrix4,new n.Matrix4;function S(e,t,r,i,o,c,d,p){var m=p.x,g=p.y,x=(0,h.getCameraController)(e),b=(0,l.getWorldTransform)(e,h.virtualPivotId);M.setFromMatrixPosition(b);var S=(0,f.getConstrainCameraY)(e,r);_.setFromMatrixPosition(o).sub(M),w.setFromMatrixPosition(c).sub(M);var T=(new n.Spherical).setFromVector3(w),E=(new n.Spherical).setFromVector3(_),P=2*y*(-m/d.x);T.theta+=P,E.theta+=P,T.makeSafe(),E.makeSafe(),_.setFromSpherical(E).add(M),w.setFromSpherical(T).add(M).sub(_),T.setFromVector3(w);var A=2*y*(-g/d.y);T.phi+=A;var C=void 0;C=_.y/w.length()<=1&&S?v(-_.y/w.length()):y,T.phi=(0,a.default)(T.phi,.001,C-.001);var R={orbitLimit:!1},I=(0,s.getCameraAttrs)(e).toJS();if((I.maxPolarOffset||I.minPolarOffset||I.maxAzimuthOffset||I.minAzimuthOffset)&&(R.orbitLimit=!0,R.maxPolarOffset=I.maxPolarOffset||90,R.minPolarOffset=I.minPolarOffset||90,R.maxAzimuthOffset=I.maxAzimuthOffset||180,R.minAzimuthOffset=I.minAzimuthOffset||R.minAzimuthOffset),R.orbitLimit){var O=x.initSphericalCamera.phi-R.maxPolarOffset/180*Math.PI,L=x.initSphericalCamera.phi+R.minPolarOffset/180*Math.PI,D=x.initSphericalCamera.theta+R.maxAzimuthOffset/180*Math.PI,N=x.initSphericalCamera.theta-R.minAzimuthOffset/180*Math.PI;T.phi=(0,a.default)(T.phi,O,L),T.theta=(0,a.default)(T.theta,N,D);var V=x.initSphericalTarget.phi-R.maxPolarOffset/180*Math.PI,F=x.initSphericalTarget.phi+R.minPolarOffset/180*Math.PI,B=x.initSphericalTarget.theta+R.maxAzimuthOffset/180*Math.PI,U=x.initSphericalTarget.theta-R.minAzimuthOffset/180*Math.PI;E.phi=(0,a.default)(E.phi,V,F),E.theta=(0,a.default)(E.theta,U,B),E.makeSafe(),_.setFromSpherical(E).add(M)}if(T.makeSafe(),w.setFromSpherical(T).add(_),x.radiusConstraint){var k=x.radiusConstraint,z=k.maxBoundingSphere,G=k.minBoundingSphere,j=(new n.Vector3).subVectors(_,w);if(G.containsPoint(w)){var H=new n.Ray(w,j.multiplyScalar(-1)).intersectSphere(G).addScaledVector(j,.001);w.copy(H)}else if(!z.containsPoint(w)){var W=new n.Ray(w,j).intersectSphere(z).addScaledVector(j,.001);w.copy(W)}}c.setPosition(w),o.setPosition(_),(0,u.default)(c,o,x.upPosition)}function T(e,t,r,i,a,o,s,c){var f=c.x,d=c.y,p=(0,h.getCameraController)(e),m=g(s.x,s.y),v=(0,l.getWorldTransform)(e,h.virtualPivotId),y=(new n.Vector3).setFromMatrixPosition(v),b=(new n.Vector3).set(-2*f/m,2*d/m,0);if(b.length()>1&&b.normalize(),0!==b.x||0!==b.y){var M=b.length();b.transformDirection(o).multiplyScalar(M),w.setFromMatrixPosition(o).sub(y),_.setFromMatrixPosition(a).sub(y);var S=(new n.Vector3).copy(w).normalize(),T=x(1-b.lengthSq());b.addScaledVector(S,T).normalize();var E=(new n.Vector3).crossVectors(S,b).normalize(),P=S.angleTo(b),A=(new n.Quaternion).setFromAxisAngle(E,P);if(w.applyQuaternion(A).add(y),_.applyQuaternion(A).add(y),p.upPosition.applyQuaternion(A),p.radiusConstraint){var C=p.radiusConstraint,R=C.maxBoundingSphere,I=C.minBoundingSphere,O=(new n.Vector3).subVectors(_,w);if(I.containsPoint(w)){var L=new n.Ray(w,(new n.Vector3).copy(O).multiplyScalar(-1)).intersectSphere(I).addScaledVector(O,-.001);w.copy(L)}else if(!R.containsPoint(w)){var D=new n.Ray(w,O).intersectSphere(R).addScaledVector(O,.001);w.copy(D)}if(!I.containsPoint(_)){var N=(new n.Vector3).crossVectors(O,p.upPosition),V=I.clampPoint(_),F=(new n.Vector3).subVectors(V,_);V.addScaledVector(F,.001),p.upPosition.crossVectors(N,O.subVectors(V,w)).normalize(),_.copy(V)}}o.setPosition(w),a.setPosition(_),(0,u.default)(o,a,p.upPosition)}}function E(e,t,r,i,a,o,s,l){var c=l.x,f=l.y,d=(0,h.getCameraController)(e);w.setFromMatrixPosition(o),_.setFromMatrixPosition(a).sub(w);var p=(new n.Spherical).setFromVector3(_),m=2*y*(-c/s.x);p.theta+=m;var v=2*y*(f/s.y);p.phi+=v,p.makeSafe(),_.setFromSpherical(p).add(w),a.setPosition(_),(0,u.default)(o,a,d.upPosition)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,a.getThreeCamera)(e);(0,i.getWorldTransform)(e,t);o.setFromMatrixPosition(r.matrix);var n=e.getTranslator().getNodeBoundingBox(t).getBoundingSphere(u).radius;return l.subVectors(o,s),l.z=-l.length(),l.y=n,l.x=0,l.applyMatrix4(r.projectionMatrix),l.z=0,l.length()};var n=r(0),i=r(4),a=r(8),o=new n.Vector3,s=new n.Vector3,l=new n.Vector3,u=new n.Sphere},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){var i=(0,s.getCamera)(e),a=(0,s.getCameraWorldTransform)(e),v=(0,o.default)((0,l.get)(e,{id:i,evalPlug:"Camera"}));u.getInverse(a,!0),c.copy(v).multiply(u);var g=(0,l.getWorldTransform)(e,t);if(!g)return;var y=(0,s.getRect)(e);(0,l.getWorldTransform)(e,(0,l.find)(e,{id:t,parent:!0}));return h.setFromMatrixPosition(g),p.set(r,-n).divide(y).multiplyScalar(2),d.copy(h).applyMatrix4(c),d.x=0,d.y=0,m.set(p.x,p.y,d.z),f.getInverse(c,!0),d.applyMatrix4(f),m.applyMatrix4(f).sub(d),m};var n,i=r(0),a=r(118),o=(n=a)&&n.__esModule?n:{default:n},s=r(8),l=r(4);var u=new i.Matrix4,c=new i.Matrix4,f=new i.Matrix4,h=new i.Vector3,d=new i.Vector3,p=new i.Vector2,m=new i.Vector3},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function r(t){var r=t.delta,n=t.deltaX,i=t.deltaY,s=void 0!==r?r:n/30+-i/30,l=(0,o.getCamera)(e),c=(0,u.getCameraController)(e).getWorldTransform(e),f=function(e,t){var r=(0,o.getRect)(e),n=t/r.y;return v(2,100*n)}(e,-s);w(e,f,l,c),(0,d.default)(e,l,c),e.dispatch((0,u.merge)([l,"Transform",0],(0,a.default)(c)))}return{label:"Zoom",enabled:!0,display:{playerTools:!0},options:{slider:void 0,momentum:!0},tool:{drag:function(e){return!(!this.active&&!e.ctrlKey||this.options.slider)&&{momentum:this.options.momentum,handle:function(e){var t={delta:void 0!==e.delta?e.delta:e.deltaX/30+-e.deltaY/30};r(t)}}},pinch:function(e){if(this.options.slider)return!1;r(e)},scroll:function(t){var n=!1;return["orbit","pan","zoom"].forEach(function(t){n=n||(0,s.isCommandActive)(e,t)}),!(this.options.slider||!n)&&(r(t),!0)}}}},t.updateZoom=w;var n=r(0),i=p(r(147)),a=p(r(42)),o=r(8),s=r(25),l=r(4),u=r(10),c=p(r(119)),f=p(r(65)),h=r(117),d=p(r(146));function p(e){return e&&e.__esModule?e:{default:e}}var m=Math.max,v=Math.pow,g=1e-6,y=new n.Vector3,x=new n.Vector3,b=new n.Vector3;function w(e,t,r,a){var o=(0,l.get)(e,{id:r,evalPlug:"Camera"}),s=(0,f.default)(e,r),d=(0,u.getCameraController)(e);if("Perspective"===o.projection){y.setFromMatrixPosition(a),x.setFromMatrixPosition(s),b.copy(y).sub(x);var p=m(b.length(),g),v=p*t;if(d.radiusConstraint){var w=d.radiusConstraint,_=w.maxBoundingSphere,M=w.minBoundingSphere,S=(new n.Vector3).copy(b).normalize(),T=(new n.Vector3).copy(S).multiplyScalar(-1),E=new n.Ray(y,T),P=new n.Ray(y,S),A=new n.Vector3,C=new n.Vector3;E.intersectSphere(M,A),P.intersectSphere(_,C);var R=A.sub(x).length(),I=_.radius===1/0?1/0:C.sub(x).length();v=(0,i.default)(v,R+.001,I-.001)}b.multiplyScalar(v/p),y.copy(x).add(b),y.y<0&&(0,h.getConstrainCameraY)(e,r)&&"trackball"!==(0,h.getOrbitMode)(e,r)&&(y.y=0),a.setPosition(y),(0,c.default)(a,s,d.upPosition)}else if("Orthographic"===o.projection){var O=(0,l.get)(e,{id:r,plug:"Camera",property:"orthoZoom"});e.dispatch((0,l.set)({id:r,plug:"Camera",property:"orthoZoom"},O*t))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i,a,o){var s=new n.BufferGeometry,l=new n.BufferAttribute(e,3);s.addAttribute("position",l);var u=new Float32Array(e.length);if(i)for(var c=0;c<u.length;c+=3)u[c]=i.r,u[c+1]=i.g,u[c+2]=i.b;if(a)for(var f=0;f<t.length;f++)u[3*t[f]]=a.r,u[3*t[f]+1]=a.g,u[3*t[f]+2]=a.b;r>=0&&o&&(u[3*r]=o.r,u[3*r+1]=o.g,u[3*r+2]=o.b);var h=new n.BufferAttribute(u,3);return s.addAttribute("color",h),s};var n=r(9)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.dispatch((0,i.merge)([t,"Transform",0],(0,o.default)(r,n)))};var n,i=r(10),a=r(42),o=(n=a)&&n.__esModule?n:{default:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){this.offset=new n.Vector3(0,0,0),this.rotationalOffset=new n.Quaternion(0,0,0,1),this.threeVRControls=new n.VRControls(e,t),this.setOffset=function(e){this.offset.copy(e)},this.setRotationalOffset=function(e){this.rotationalOffset.copy(e)},this.update=function(){this.threeVRControls.update(),e.quaternion.premultiply(this.rotationalOffset),e.position.applyQuaternion(this.rotationalOffset),e.position.add(this.offset)},this.setStanding=function(e){this.threeVRControls.standing=e},this.resetPose=function(){var e=this.threeVRControls.getVRDisplay();e&&e.resetPose&&this.threeVRControls.resetPose()},this.getStandingMatrix=function(){return this.threeVRControls.getStandingMatrix()},this.setUserHeight=function(e){this.threeVRControls.userHeight=Number(e)}};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=x(r(319)),i=x(r(2)),a=x(r(47)),o=x(r(58));t.initCamera=N,t.frameSphere=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r=r||(0,f.getCameraController)(e).id;var i=(0,l.get)(e,{id:r,evalPlug:"Camera"}),a=(0,l.getWorldTransform)(e,r),o=(0,p.default)(e,r),u=new s.Vector3,c=new s.Quaternion,h=new s.Vector3,d=new s.Vector3;a.decompose(u,c,d),h.setFromMatrixPosition(o);var x=(0,f.getCameraController)(e);o.setPosition(t.center),n>k&&console.warn("Clamping padding to",k);var b=Math.min(n,k),w=t.radius/(1-b);if("Perspective"===i.projection){var _=i.aspectRatio>=1?Math.PI*i.fieldOfView/360:Math.atan(i.aspectRatio*Math.tan(Math.PI*i.fieldOfView/360)),M=w/Math.sin(_);u.sub(t.center),u.normalize().multiplyScalar(M).add(t.center)}else{var S=i.orthoHeight/2,T=S*Math.min(i.aspectRatio,1),E=w/T;e.dispatch((0,l.set)({id:r,plug:"Camera",property:"orthoZoom"},E))}if(r===(0,f.getCameraController)(e).id&&"trackball"===(0,v.getOrbitMode)(e,r)){var P=new s.Vector3(0,0,-1).applyQuaternion(c).normalize(),A=(new s.Vector3).subVectors(t.center,u).normalize(),C=(new s.Quaternion).setFromUnitVectors(P,A);x.upPosition.applyQuaternion(C)}a.compose(u,c,d),(0,m.default)(a,o,W(e,r)),(0,y.default)(e,r,a),e.dispatch((0,f.merge)([r,"Transform",0],(0,g.default)(a))),e.dispatch((0,f.merge)([f.virtualTargetId,"Transform",0],(0,g.default)(o)))},t.frameGeometry=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;i>k&&console.warn("Clamping padding to",k);var a=Math.min(i,k);r=r||(0,f.getCameraController)(e).id;var o=(0,l.get)(e,{id:r,evalPlug:"Camera"}),u=Math.atan(o.aspectRatio*Math.tan(Math.PI*o.fieldOfView/360)),c=Math.PI*o.fieldOfView/360,h=Math.tan(u),d=Math.tan(c),p=e.get("sceneGraph"),x=p.evaluatedNodes,b=p.nodes,w=(0,l.getWorldTransform)(e,r);if(n){var _=(new s.Box3).makeEmpty();t.forEach(function(t){return _.union((0,l.getNodeBoundingBox)(e,t))});var M=new s.Vector3;_.getCenter(M);var S=(new s.Matrix4).setPosition(M);if(r===(0,f.getCameraController)(e).id&&"trackball"===(0,v.getOrbitMode)(e,r)){var T=new s.Vector3,E=new s.Quaternion,P=new s.Vector3;w.decompose(T,E,P);var A=new s.Vector3(0,0,-1).applyQuaternion(E).normalize(),C=(new s.Vector3).subVectors(M,T).normalize(),R=(new s.Quaternion).setFromUnitVectors(A,C),I=(0,f.getCameraController)(e);I.upPosition.applyQuaternion(R)}(0,m.default)(w,S,W(e,r)),e.dispatch((0,f.merge)([f.virtualTargetId,"Transform",0],(0,g.default)(S)))}var O=(new s.Matrix4).getInverse(w);if("Perspective"===o.projection){for(var L=function(e,t){for(var r=0;r<e.length;++r){e.getAt(r,N),N.applyMatrix4(t);var n=Math.abs(N.x/N.y)>o.aspectRatio,i=n?N.x:N.y;i/=1-a;var s=n?h:d,l=Math.abs(i/s),u=N.z+l;D=Math.max(D,u)}},D=-1/0,N=new s.Vector3,V=new s.Matrix4,F=0;F<t.length;++F){var B=t[F];V.multiplyMatrices(O,(0,l.getWorldTransform)(e,B));var U=b[B],z=x[B],G=void 0;if("PolyMesh"===U.type)G=z.PolyMesh.mesh.positions.values;else{if("Shape"!==U.type)return void console.error("Framing geometry: Unexpected node type",U.type);G=z.Shape.shape.positions}L(G,V)}var j=new s.Vector3(0,0,1).transformDirection(w).multiplyScalar(D),H=(new s.Matrix4).makeTranslation(j.x,j.y,j.z);w.premultiply(H)}else{for(var X=function(e,t){for(var r=0;r<e.length;++r){e.getAt(r,Y),Y.applyMatrix4(t);var n=Math.abs(Y.x/Y.y)>o.aspectRatio,i=n?Math.abs(Y.x):Math.abs(Y.y);i/=1-a,q=Math.max(q,n?i/(o.orthoHeight/2*o.aspectRatio):i/(o.orthoHeight/2))}},q=-1/0,Y=new s.Vector3,Z=new s.Matrix4,J=0;J<t.length;++J){var Q=t[J];Z.multiplyMatrices(O,(0,l.getWorldTransform)(e,Q));var K=b[Q],$=x[Q],ee=void 0;if("PolyMesh"===K.type)ee=$.PolyMesh.mesh.positions.values;else{if("Shape"!==K.type)return void console.error("Framing geometry: Unexpected node type",K.type);ee=$.Shape.shape.positions}X(ee,Z)}e.dispatch((0,l.set)({id:r,plug:"Camera",property:"orthoZoom"},q))}(0,y.default)(e,r,w),e.dispatch((0,f.merge)([r,"Transform",0],(0,g.default)(w)))};var s=r(0),l=r(4),u=r(19),c=r(8),f=r(10),h=x(r(309)),d=x(r(147)),p=x(r(65)),m=x(r(119)),v=r(117),g=x(r(42)),y=(r(304),x(r(146)));function x(e){return e&&e.__esModule?e:{default:e}}var b=1e-6,w=s.Math.degToRad,_=(s.Math.radToDeg,Math.tan),M=Math.min,S=Math.max,T=Math.PI,E=new s.Vector3,P=new s.Vector3,A=new s.Vector3,C=new s.Spherical,R=new s.Matrix4,I=new s.Quaternion,O=function(){function e(){(0,a.default)(this,e),this.cameraData=null,this.cameraProperties=null,this.fromCameraId=null,this.id=null,this.initWithReset=!0,this.lookAtTarget=null,this.maxZoom=null,this.needsInit=!1,this.needsAngleAndRadius=!1,this.needsToLook=!1,this.node=null,this.playerData=null,this.radiusConstraint=null,this.orbitTarget=null,this.orbitTargetChanged=!1,this.targetWorldTransform=null,this.transformChanged=!1,this.nodeList=null,this.upPosition=new s.Vector3(0,1,0),this.useTarget=!0,this.worldTransform=null,this.initSphericalCamera=null,this.initSphericalTarget=null}return(0,o.default)(e,[{key:"setActiveCamera",value:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t!==this.id){this.id=t,this.node=r;var i=e.get("sceneGraph").evaluatedNodes[t];this.setCameraData(e,i.Camera),this.setCameraProperties(e,i.Properties),this.needsInit=!0,this.initWithReset=n,this.initSphericalCamera=null,this.initSphericalTarget=null}}},{key:"initFromCamera",value:function(e,t){t!==this.id&&(this.fromCameraId=t||f.virtualCameraId,this.needsInit=!0,this.initSphericalCamera=null,this.initSphericalTarget=null)}},{key:"_setLookAtTarget",value:function(e,t){t!==this.lookAtTarget&&(t!==this.lookAtTarget&&this.lookAtTarget&&!t&&(0,h.default)(e,f.virtualTargetId,this.targetWorldTransform),this.lookAtTarget=t,this.targetWorldTransform=(0,l.getWorldTransform)(e,t||f.virtualTargetId),t&&this.setOrbitTarget(t))}},{key:"_copyCamera",value:function(e,t){var r=e.get("sceneGraph"),n=r.nodes[t],a=r.evaluatedNodes[t],o=r.evaluatedNodes[this.id];this.node.plugs=(0,f.initNode)(n).plugs,this.setCameraData(e,a.Camera),this.setCameraProperties(e,a.Properties),o.Camera=(0,i.default)({},a.Camera),o.Properties=(0,i.default)({},a.Properties),o.Transform=(0,i.default)({},a.Transform)}},{key:"_applyCurrentAspectRatio",value:function(e){var t=(0,c.getRect)(e),r=t.x/t.y;this.node.plugs.Camera[0].aspectRatio=r,this.cameraData.aspectRatio=r,e.get("sceneGraph").evaluatedNodes[this.id].Camera=this.cameraData}},{key:"_initCamera",value:function(e){var t=this.fromCameraId||this.id;this.fromCameraId&&(this._copyCamera(e,this.fromCameraId),this.fromCameraId=null),this._applyCurrentAspectRatio(e);var r=N(e,t,this.initWithReset),n=r.cameraWorldTransform,i=r.lookAtTransform,a=r.lookAtTarget,o=r.upPosition,s=r.pivotWorldTransform,l=r.orbitTarget,u=r.radiusConstraint,c=r.nearClip,d=r.farClip;this.worldTransform=n,this.targetWorldTransform=i,(0,h.default)(e,f.virtualTargetId,i),this.setOrbitTarget(l),(0,h.default)(e,f.virtualPivotId,s),this.lookAtTarget=a,this.upPosition.copy(o),this.radiusConstraint=u,c&&d&&(this.node.plugs.Camera[0].nearClip=c,this.node.plugs.Camera[0].farClip=d,this.cameraData.nearClip=c,this.cameraData.farClip=d),this.needsInit=!1,this.needsAngleAndRadius=!1,this.needsRadiusConstraint=!1,this.initWithReset=!0,this._markForTranslation(e,"Camera")}},{key:"setCameraData",value:function(e,t){this.cameraData=t}},{key:"setCameraProperties",value:function(e,t){var r=this.cameraProperties;this.needsRadiusConstraint=this.needsRadiusConstraint||!r||t.constrainCameraSphere!==r.constrainCameraSphere||r.maxZoom!==t.maxZoom||r.minZoom!==t.minZoom,(0,l.get)(e,{id:(0,u.getSceneId)(e),plug:"Player",property:"overrideNavigation"})||this.setOrbitTarget(t.orbitTarget),this.cameraProperties=t}},{key:"setPlayerData",value:function(e,t){var r=this.playerData;(!r||r.camera!==t.camera)&&this.initFromCamera(e,t.camera),t.overrideNavigation?this.setOrbitTarget(t.orbitTarget):this.setOrbitTarget(this.cameraProperties&&this.cameraProperties.orbitTarget),this.playerData=t}},{key:"setWorldTransform",value:function(e,t){this.worldTransform=t,this.transformChanged=!0}},{key:"setCameraAttrs",value:function(e){this.id&&((void 0!==e.polarAngle||void 0!==e.azimuthAngle||void 0!==e.boundingRadius||e.floorAlign||e.centerAlign)&&(this.needsAngleAndRadius=!0),this.cameraProperties.constrainCameraSphere||(e.maxZoom?this.needsRadiusConstraint=!0:this.radiusConstraint=null))}},{key:"setConstrainNodeList",value:function(e){this.nodeList=e,this.needsRadiusConstraint=!0}},{key:"setOrbitTarget",value:function(e){this.orbitTarget!==e&&e!==f.virtualPivotId&&(this.orbitTarget=e,this.orbitTargetChanged=!0)}},{key:"setOrbitTargetWorldTransform",value:function(e){this.orbitTargetChanged=!0}},{key:"setTargetWorldTransform",value:function(e){this.targetWorldTransform=e}},{key:"_markForTranslation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Transform",r=e.get("sceneGraph");r.nodes[this.id]._v+=1,r.evaluatedNodes[this.id]._v+=1,r.evaluatedNodes[this.id][t]._v+=1}},{key:"getWorldTransform",value:function(e){if(this.needsInit)this._initCamera(e),this.transformChanged=!0;else{var t=(0,l.getWorldTransform)(e,this.id);t.equals(this.worldTransform)||this.setWorldTransform(e,t)}if(this.orbitTarget){var r=(0,l.getWorldTransform)(e,this.orbitTarget),n=(0,l.getWorldTransform)(e,f.virtualPivotId),a=(new s.Vector3).setFromMatrixPosition(r),o=(new s.Vector3).setFromMatrixPosition(n);a.equals(o)||this.setOrbitTargetWorldTransform(r)}this.orbitTargetChanged&&(this.orbitTarget?(0,h.default)(e,f.virtualPivotId,(0,l.getWorldTransform)(e,this.orbitTarget),!1):D(e,this.id),this.orbitTargetChanged=!1);var u=(0,c.getCameraAttrs)(e).toJS();if(this.needsAngleAndRadius){var d=this.orbitTarget?(0,l.getWorldTransform)(e,this.orbitTarget):null;F(e,u,this.worldTransform,d,(0,l.get)(e,{id:this.id,plug:"Camera",property:"fieldOfView"}),this.id),this.lookAtTarget||(d=(0,l.getWorldTransform)(e,this.orbitTarget||f.virtualPivotId),this.targetWorldTransform=d,(0,h.default)(e,f.virtualTargetId,d)),this.needsToLook=!0,this.needsAngleAndRadius=!1,this.transformChanged=!0}if(this.needsRadiusConstraint){var p=u.maxZoom,x=u.minZoom;this.cameraProperties.constrainCameraSphere&&(p=this.cameraProperties.maxZoom,x=this.cameraProperties.minZoom),this.radiusConstraint=B(e,x,p,this.id,this.nodeList),U(e,this.id,this.radiusConstraint,this.worldTransform,this.targetWorldTransform,!this.lookAtTarget),this.lookAtTarget||(0,h.default)(e,f.virtualTargetId,this.targetWorldTransform),this.needsToLook=!0,this.needsRadiusConstraint=!1,this.transformChanged=!0}var b=(0,l.get)(e,{id:this.id,evalPlug:"Transform"});this._setLookAtTarget(e,b.targetId);var w=(0,c.getRenderingMode)(e);if(this.useTarget&&this.lookAtTarget&&w!==c.RENDER_MODES.vr&&!(0,c.isDeviceTracking)(e)&&("trackball"===(0,v.getOrbitMode)(e,this.id)&&(E.setFromMatrixPosition(this.worldTransform),P.set(0,0,-1).transformDirection(this.worldTransform),A.setFromMatrixPosition(this.targetWorldTransform).sub(E).normalize(),I.setFromUnitVectors(A,P),this.upPosition.applyQuaternion(I)),this.needsToLook=!0),this.needsToLook&&((0,m.default)(this.worldTransform,this.targetWorldTransform,this.upPosition),this.needsToLook=!1,this.transformChanged=!0),this.transformChanged){var _=this.worldTransform.clone();(0,y.default)(e,this.id,_),(0,i.default)(this.node.plugs.Transform[0],(0,g.default)(_)),e.get("sceneGraph").evaluatedNodes[this.id].Transform.transform=_,this._markForTranslation(e),this.transformChanged=!1}if(!this.initSphericalCamera){var M=new s.Vector3,S=new s.Vector3,T=new s.Vector3,C=(0,l.getWorldTransform)(e,f.virtualPivotId);T.setFromMatrixPosition(C),S.setFromMatrixPosition(this.targetWorldTransform).sub(T),M.setFromMatrixPosition(this.worldTransform).sub(T),this.initSphericalCamera=(new s.Spherical).setFromVector3(M),this.initSphericalTarget=(new s.Spherical).setFromVector3(S)}return this.worldTransform.clone()}}]),e}();function L(e,t){var r=(0,c.getBoundingBox)(e,t).getCenter();return((0,n.default)(r.x)||(0,n.default)(r.y)||(0,n.default)(r.z))&&r.set(0,0,0),r}function D(e,t){var r=L(e,t);(0,h.default)(e,f.virtualPivotId,(new s.Matrix4).makeTranslation(r.x,r.y,r.z))}function N(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=(0,v.getOrbitMode)(e,t),i=(0,l.getWorldTransform)(e,t),a=(0,l.get)(e,{id:t,evalPlug:"Transform",property:"targetId"}),o=(0,v.getOrbitTarget)(e,t)||a,u=null;if(o)u=(0,l.getWorldTransform)(e,o);else{var h=L(e,t);u=(new s.Matrix4).makeTranslation(h.x,h.y,h.z)}var p=null;if(t===f.virtualCameraId&&r)a||(p=u);else if(a)p=(0,l.getWorldTransform)(e,a);else{var g=(new s.Vector3).setFromMatrixPosition(i),y=u.clone(),x=(new s.Vector3).setFromMatrixPosition(y),b=new s.Ray(new s.Vector3(0,0,0),new s.Vector3(0,0,-1)).applyMatrix4(i);(x=b.closestPointToPoint(x)).equals(g)&&x.addScaledVector(b.direction,.01),y.setPosition(x),p=y}var w=(0,c.getCameraAttrs)(e).toJS();t===f.virtualCameraId&&r&&(null==w.azimuthAngle&&(w.azimuthAngle=45),null==w.polarAngle&&(w.polarAngle=20),null==w.boundingRadius&&(w.boundingRadius=1)),F(e,w,i,o?u:null,(0,l.get)(e,{id:t,plug:"Camera",property:"fieldOfView"}),t)&&(o||(u=(0,l.getWorldTransform)(e,f.virtualPivotId)),a||(p=u)),(0,v.getConstrainCameraY)(e,t)&&"gyroscope"===n&&function(e,t,r){var n=(new s.Vector3).setFromMatrixPosition(r),i=(new s.Vector3).setFromMatrixPosition(t).sub(n),a=(new s.Spherical).setFromVector3(i),o=T;n.y/i.length()<=1&&(o=Math.acos(-n.y/i.length()));a.phi=(0,d.default)(a.phi,.001,o-.001),a.makeSafe(),i.setFromSpherical(a).add(n),t.setPosition(i)}(0,i,u);var _=(0,c.getCameraAttrs)(e).get("maxZoom"),M=(0,c.getCameraAttrs)(e).get("minZoom")||1,S=(0,l.get)(e,{id:t,evalPlug:"Properties"}),E=null;(_||S.constrainCameraSphere)&&(S.constrainCameraSphere&&(_=S.maxZoom,M=S.minZoom),E=B(e,M,_,t)),U(e,t,E,i,p,!a);var P=null,A=null;if(t===f.virtualCameraId&&r){var R=(0,c.getBoundingBox)(e,t),I=new s.Sphere;R.getBoundingSphere(I),P=Math.min(.25*(C.radius-I.radius),.1),A=Math.max(10*(C.radius-I.radius),5e4)}var O=new s.Vector3(0,1,0);if("trackball"===n){O.transformDirection(i);var D=(new s.Vector3).setFromMatrixPosition(i),N=(new s.Vector3).subVectors(D,p).normalize(),V=new s.Plane(N,0);O.copy(V.projectPoint(O).normalize())}return(0,m.default)(i,p,O),{cameraWorldTransform:i,lookAtTransform:p,upPosition:O,pivotWorldTransform:u,lookAtTarget:a,orbitTarget:o,radiusConstraint:E,nearClip:P,farClip:A}}function V(e,t,r,n,i){(0,u.getSceneId)(e);var a=(0,l.get)(e,{id:t,plug:"Properties",property:"frameLayer"}),o=i?n?r.getBoundingSphere().center.clone().setY(r.min.y):new s.Vector3(0,r.min.y,0):r.getBoundingSphere().center.clone(),c={},f=(0,l.find)(e,{name:"Objects"});var h=""!==a?{layer:a}:{};for(var d in(0,l.filter)(e,{from:{name:"Objects"},type:"PolyMesh",plug:"Properties",properties:h}).forEach(function(t){!function t(r){var n=e.get("sceneGraph").nodes[r],i=n&&n.parent;i===f?c[r]=!0:t(i)}(t[0])}),c){var p=(0,l.get)(e,{id:d,plug:"Transform",property:"translation"}),m=(new s.Vector3).subVectors(p,o);e.dispatch((0,l.set)({id:d,plug:"Transform",property:"translation"},m))}}function F(e,t,r,n,i,a){var o=t.polarAngle,s=t.azimuthAngle,u=t.boundingRadius,h=t.floorAlign,p=t.centerAlign,m=(0,c.getBoundingBox)(e,a),v=h||p;if(v&&(V(e,a,m,p,h),(0,f.getEvalSceneGraph)(e),m=(0,c.getBoundingBox)(e,a)),D(e,a),n=n||(0,l.getWorldTransform)(e,f.virtualPivotId),!v&&null==s&&null==o&&null==u)return!1;if(R.getInverse(n,!0),E.setFromMatrixPosition(r).applyMatrix4(R),C.setFromVector3(E),null!=s&&(C.theta=w(s)),null!=o){C.phi=w(90-o);var g=T,y=0,x=T;y=S(y||0,0),x=M(x||T,g),C.phi=(0,d.default)(C.phi,y,x)}if(null!=u){var b=u*m.getBoundingSphere().radius;C.radius=(b<=0||b===1/0?1:b)/_(w(.5*i))}return C.makeSafe(),E.setFromSpherical(C),C.setFromVector3(E),E.applyMatrix4(n),r.setPosition(E),!0}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=arguments[3],i=arguments[4];if(r<=1)return null;var a=void 0;if(i&&i.length?(a=(new s.Box3).makeEmpty(),i.forEach(function(t){return a.union((0,l.getNodeBoundingBox)(e,t))})):a=(0,c.getBoundingBox)(e,n),a.isEmpty())return null;var o=new s.Sphere;a.getBoundingSphere(o);var u=new s.Sphere(o.center,o.radius*r);return o.set(o.center,o.radius*t),{minBoundingSphere:o,maxBoundingSphere:u}}function U(e,t,r,n,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(r){var o=r.minBoundingSphere,l=r.maxBoundingSphere;A.setFromMatrixPosition(i),E.setFromMatrixPosition(n);var u=l.clampPoint(E);if(n.setPosition(u),a){var c=o.clampPoint(A);i.setPosition(c)}var f=new s.Vector3,h=new s.Vector3,p=new s.Vector3;f.setFromMatrixPosition(n),h.setFromMatrixPosition(i),p.copy(f).sub(h);var m=S(p.length(),b),v=m,g=(new s.Vector3).copy(p).normalize(),y=(new s.Vector3).copy(g).multiplyScalar(-1),x=new s.Ray(f,y),w=new s.Ray(f,g),_=(new s.Vector3).copy(f),M=(new s.Vector3).copy(f);x.intersectSphere(o,_),w.intersectSphere(l,M);var T=_.sub(h).length(),P=l.radius===1/0?1/0:M.sub(h).length();v=(0,d.default)(v,T+.001,P-.001),p.multiplyScalar(v/m),f.copy(h).add(p),n.setPosition(f)}}t.default=O;var k=.99;var z=new s.Vector3,G=new s.Vector3,j=new s.Vector3,H=new s.Vector3(0,1,0);function W(e,t){var r=(0,f.getCameraController)(e);return t===r.id?r.upPosition:"trackball"!==(0,l.get)(e,{id:t,evalPlug:"Properties"}).orbitMode?H:((0,l.getWorldTransform)(e,t).extractBasis(z,G,j),G)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(30)),i=s(r(51));t.clearCache=function(){l={}},t.default=function(e){return function(t,r){var s=r.types,p=r.url,m=r.fireAndForget,v=r.successPayload,g=r.payload,y=r.queryKey,x=r.ignoreCache,b=r.method,w=r.contentType,_=r.body,M=r.files,S=r.success,T=r.failure,E=r.decompress,P=r.onReadyStateChange,A=r.withCredentials,C=r.ignoreErrorMessage,R=r.responseURL,I=Array.isArray(p)?p:[p];w||(w="json");var O=s||["IGN","IGN","IGN"],L=(0,i.default)(O,3),D=L[0],N=L[1],V=L[2];if(y){if(l[y])return m?l[y]:n.default.resolve(l[y]);if(u[y])return m?(u[y].push({payload:g,store:t}),void t.dispatch({type:D,payload:g})):new o.default.Promise(function(e,r){u[y].push({payload:g,store:t,resolve:e,reject:r}),t.dispatch({type:D,payload:g})});u[y]=[{payload:g,store:t}]}t.dispatch({type:D,payload:g});var F=new o.default.Promise(function(r,n){var i,o={queryKey:y,payload:g,successType:N,success:S,failureType:V,failure:T};function s(e,r){d();var i=r||o,a=i.failureType,s=i.failure,l=i.queryKey,c=i.payload;l?(u[l].forEach(function(t){var r=t.payload,n=t.store,i=t.reject;n.dispatch({type:a,payload:r,error:e,ignoreErrorMessage:C}),i&&i(e)}),delete u[l]):t.dispatch({type:a,payload:c,error:e,ignoreErrorMessage:C}),s&&s(e),n(e)}function p(e,n){var i=n||o,a=i.successType,s=(i.sucess,i.queryKey),c=i.payload;s?(x||(l[s]=e),u[s].forEach(function(t){var r=t.payload,n=t.store,i=t.resolve;n.dispatch({type:a,payload:m||v?r:e,response:e}),i&&i(e)}),delete u[s]):t.dispatch({type:a,payload:m||v?c:e,response:e}),S&&S(e),r(e)}function O(e){d(),E?(0,a.lzmaDecompressor)(e,o,p,s):p(e)}i=function(){return e(I[0],I.slice(1),O,s,{contentType:w,method:b,body:_,files:M,onReadyStateChange:P,withCredentials:A,responseURL:R})},0,f>=c?h.push(i):(f+=1,i())});return m&&F.catch(function(e){console.error(e)}),m?null:F}};var a=r(651),o=s(r(248));function s(e){return e&&e.__esModule?e:{default:e}}var l={},u={};var c=15,f=0,h=[];function d(){f-=1,h.length&&f<c&&(f+=1,h.shift()())}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(2));t.default=function(e,t){return(0,i.default)(function(t,r){var i=(0,n.default)({},o(e.dispatch,t.actions||{}),s(e,t.selectors||{}));return t.private&&(i._=(0,n.default)({},o(e.dispatch,t.private.actions||{}),s(e,t.private.selectors||{}))),i},t)};var i=a(r(136));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return(0,i.default)(function(t){return function(){return e(t.apply(void 0,arguments))}},t)}function s(e,t){return(0,i.default)(function(t){return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.apply(void 0,[e].concat(n))}},t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.dispatch;return function(r){if("function"==typeof r)return r(e);if(!function(e){return(0,i.default)(e)&&void 0!==e.type}(r)||!(0,n.default)(r.payload)||r.error)return t(r);var a=r.type,u=r.payload,c=r.meta;return t({type:a+"_"+o,meta:c}),u.then(function(e){return t({type:a+"_"+s,payload:e,meta:c})},function(e){return t({type:a+"_"+l,payload:u,error:e,meta:c})})}};var n=a(r(649)),i=a(r(315));function a(e){return e&&e.__esModule?e:{default:e}}var o="PENDING",s="FULFILLED",l="REJECTED"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(177)),i=a(r(33));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){if(!e||"object"!==(void 0===e?"undefined":(0,i.default)(e)))return!1;var t="function"==typeof e.constructor?(0,n.default)(e):Object.prototype;if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&o(r)===s};var o=function(e){return Function.prototype.toString.call(e)},s=o(Object)},function(e,t,r){e.exports={default:r(663),__esModule:!0}},function(e,t,r){e.exports={default:r(668),__esModule:!0}},function(e,t,r){e.exports={default:r(669),__esModule:!0}},function(e,t,r){e.exports={default:r(670),__esModule:!0}},function(e,t,r){e.exports={default:r(671),__esModule:!0}},function(e,t,r){e.exports={default:r(672),__esModule:!0}},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}},function(e,t,r){(function(t){!function(){"use strict";e.exports=function(e){return(e instanceof t?e:new t(e.toString(),"binary")).toString("base64")}}()}).call(t,r(57).Buffer)},function(e,t,r){"use strict";var n=r(34),i=r(12),a=r(80),o=r(69),s=r(70),l=r(152),u=r(91),c=r(148),f=r(27),h=r(126),d=r(53).f,p=r(207)(0),m=r(52);e.exports=function(e,t,r,v,g,y){var x=n[e],b=x,w=g?"set":"add",_=b&&b.prototype,M={};return m&&"function"==typeof b&&(y||_.forEach&&!o(function(){(new b).entries().next()}))?(b=t(function(t,r){c(t,b,e,"_c"),t._c=new x,void 0!=r&&u(r,g,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in _&&(!y||"clear"!=e)&&s(b.prototype,e,function(r,n){if(c(this,b,e),!t&&y&&!f(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i})}),y||d(b.prototype,"size",{get:function(){return this._c.size}})):(b=v.getConstructor(t,e,g,w),l(b.prototype,r),a.NEED=!0),h(b,e),M[e]=b,i(i.G+i.W+i.F,M),y||v.setStrong(b,e,g),b}},function(e,t,r){var n=r(34).document;e.exports=n&&n.documentElement},function(e,t,r){e.exports=!r(52)&&!r(69)(function(){return 7!=Object.defineProperty(r(209)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(92),i=r(28)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},function(e,t,r){var n=r(123);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(48);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},function(e,t,r){var n=r(28)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:r=!0}},a[n]=function(){return o},e(a)}catch(e){}return r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){"use strict";var n=r(93),i=r(214),a=r(124),o=r(94),s=r(211),l=Object.assign;e.exports=!l||r(69)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=n})?function(e,t){for(var r=o(e),l=arguments.length,u=1,c=i.f,f=a.f;l>u;)for(var h,d=s(arguments[u++]),p=c?n(d).concat(c(d)):n(d),m=p.length,v=0;m>v;)f.call(d,h=p[v++])&&(r[h]=d[h]);return r}:l},function(e,t,r){var n=r(53),i=r(48),a=r(93);e.exports=r(52)?Object.defineProperties:function(e,t){i(e);for(var r,o=a(t),s=o.length,l=0;s>l;)n.f(e,r=o[l++],t[r]);return e}},function(e,t,r){var n=r(335),i=r(210).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(66),i=r(75),a=r(681)(!1),o=r(216)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),l=0,u=[];for(r in s)r!=o&&n(s,r)&&u.push(r);for(;t.length>l;)n(s,r=t[l++])&&(~a(u,r)||u.push(r));return u}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(48),i=r(27),a=r(213);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var n=r(12),i=r(122),a=r(60),o=r(91);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,l=arguments[1];return i(this),(t=void 0!==l)&&i(l),void 0==e?new this:(r=[],t?(n=0,s=a(l,arguments[2],2),o(e,!1,function(e){r.push(s(e,n++))})):o(e,!1,r.push,r),new this(r))}})}},function(e,t,r){"use strict";var n=r(12);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){"use strict";var n=r(34),i=r(11),a=r(53),o=r(52),s=r(28)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];o&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(48),i=r(122),a=r(28)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||void 0==(r=n(o)[a])?t:i(r)}},function(e,t,r){"use strict";var n=r(85),i=r(105),a=r(35);e.exports=[].copyWithin||function(e,t){var r=n(this),o=a(r.length),s=i(e,o),l=i(t,o),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?o:i(u,o))-l,o-s),f=1;for(l<s&&s<l+c&&(f=-1,l+=c-1,s+=c-1);c-- >0;)l in r?r[s]=r[l]:delete r[s],s+=f,l+=f;return r}},function(e,t,r){"use strict";var n=r(29).f,i=r(130),a=r(103),o=r(61),s=r(98),l=r(159),u=r(352),c=r(353),f=r(162),h=r(45),d=r(129).fastKey,p=r(106),m=h?"_s":"size",v=function(e,t){var r,n=d(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,u){var c=e(function(e,n){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=n&&l(n,r,e[u],e)});return a(c.prototype,{clear:function(){for(var e=p(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=p(this,t),n=v(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[m]--}return!!n},forEach:function(e){p(this,t);for(var r,n=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(p(this,t),e)}}),h&&n(c.prototype,"size",{get:function(){return p(this,t)[m]}}),c},def:function(e,t,r){var n,i,a=v(e,t);return a?a.v=r:(e._l=a={i:i=d(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[m]++,"F"!==i&&(e._i[i]=a)),e},getEntry:v,setStrong:function(e,t,r){u(e,t,function(e,r){this._t=p(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))},r?"entries":"values",!r,!0),f(t)}}},function(e,t,r){"use strict";var n=r(103),i=r(129).getWeak,a=r(15),o=r(17),s=r(98),l=r(159),u=r(127),c=r(46),f=r(106),h=u(5),d=u(6),p=0,m=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},g=function(e,t){return h(e.a,function(e){return e[0]===t})};v.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var r=g(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,a){var u=e(function(e,n){s(e,u,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=n&&l(n,r,e[a],e)});return n(u.prototype,{delete:function(e){if(!o(e))return!1;var r=i(e);return!0===r?m(f(this,t)).delete(e):r&&c(r,this._i)&&delete r[this._i]},has:function(e){if(!o(e))return!1;var r=i(e);return!0===r?m(f(this,t)).has(e):r&&c(r,this._i)}}),u},def:function(e,t,r){var n=i(a(t),!0);return!0===n?m(e).set(t,r):n[e._i]=r,e},ufstore:m}},function(e,t,r){var n=r(16).document;e.exports=n&&n.documentElement},function(e,t,r){e.exports=!r(45)&&!r(24)(function(){return 7!=Object.defineProperty(r(228)("div"),"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(99);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(17),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},function(e,t,r){var n=r(17),i=r(99),a=r(20)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},function(e,t,r){var n=r(15);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},function(e,t,r){"use strict";var n=r(101),i=r(1),a=r(72),o=r(54),s=r(46),l=r(100),u=r(740),c=r(104),f=r(132),h=r(20)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,m,v,g,y){u(r,t,m);var x,b,w,_=function(e){if(!d&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},M=t+" Iterator",S="values"==v,T=!1,E=e.prototype,P=E[h]||E["@@iterator"]||v&&E[v],A=P||_(v),C=v?S?_("entries"):A:void 0,R="Array"==t&&E.entries||P;if(R&&(w=f(R.call(new e)))!==Object.prototype&&w.next&&(c(w,M,!0),n||s(w,h)||o(w,h,p)),S&&P&&"values"!==P.name&&(T=!0,A=function(){return P.call(this)}),n&&!y||!d&&!T&&E[h]||o(E,h,A),l[t]=A,l[M]=p,v)if(x={values:S?A:_("values"),keys:g?A:_("keys"),entries:C},y)for(b in x)b in E||a(E,b,x[b]);else i(i.P+i.F*(d||T),t,x);return x}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,r){"use strict";var n=r(81);e.exports.f=function(e){return new function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)}(e)}},function(e,t,r){"use strict";var n=r(102),i=r(161),a=r(133),o=r(85),s=r(231),l=Object.assign;e.exports=!l||r(24)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=n})?function(e,t){for(var r=o(e),l=arguments.length,u=1,c=i.f,f=a.f;l>u;)for(var h,d=s(arguments[u++]),p=c?n(d).concat(c(d)):n(d),m=p.length,v=0;m>v;)f.call(d,h=p[v++])&&(r[h]=d[h]);return r}:l},function(e,t,r){var n=r(46),i=r(62),a=r(225)(!1),o=r(236)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),l=0,u=[];for(r in s)r!=o&&n(s,r)&&u.push(r);for(;t.length>l;)n(s,r=t[l++])&&(~a(u,r)||u.push(r));return u}},function(e,t,r){var n=r(102),i=r(62),a=r(133).f;e.exports=function(e){return function(t){for(var r,o=i(t),s=n(o),l=s.length,u=0,c=[];l>u;)a.call(o,r=s[u++])&&c.push(e?[r,o[r]]:o[r]);return c}}},function(e,t,r){var n=r(131),i=r(161),a=r(15),o=r(16).Reflect;e.exports=o&&o.ownKeys||function(e){var t=n.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},function(e,t,r){var n=r(35),i=r(361),a=r(82);e.exports=function(e,t,r,o){var s=String(a(e)),l=s.length,u=void 0===r?" ":String(r),c=n(t);if(c<=l||""==u)return s;var f=c-l,h=i.call(u,Math.ceil(f/u.length));return h.length>f&&(h=h.slice(0,f)),o?h+s:s+h}},function(e,t,r){"use strict";var n=r(84),i=r(82);e.exports=function(e){var t=String(i(this)),r="",a=n(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},function(e,t,r){var n=r(84),i=r(35);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length!");return r}},function(e,t,r){"use strict";var n=r(16),i=r(45),a=r(101),o=r(241),s=r(54),l=r(103),u=r(24),c=r(98),f=r(84),h=r(35),d=r(362),p=r(131).f,m=r(29).f,v=r(224),g=r(104),y="prototype",x="Wrong index!",b=n.ArrayBuffer,w=n.DataView,_=n.Math,M=n.RangeError,S=n.Infinity,T=b,E=_.abs,P=_.pow,A=_.floor,C=_.log,R=_.LN2,I=i?"_b":"buffer",O=i?"_l":"byteLength",L=i?"_o":"byteOffset";function D(e,t,r){var n,i,a,o=Array(r),s=8*r-t-1,l=(1<<s)-1,u=l>>1,c=23===t?P(2,-24)-P(2,-77):0,f=0,h=e<0||0===e&&1/e<0?1:0;for((e=E(e))!=e||e===S?(i=e!=e?1:0,n=l):(n=A(C(e)/R),e*(a=P(2,-n))<1&&(n--,a*=2),(e+=n+u>=1?c/a:c*P(2,1-u))*a>=2&&(n++,a/=2),n+u>=l?(i=0,n=l):n+u>=1?(i=(e*a-1)*P(2,t),n+=u):(i=e*P(2,u-1)*P(2,t),n=0));t>=8;o[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;s>0;o[f++]=255&n,n/=256,s-=8);return o[--f]|=128*h,o}function N(e,t,r){var n,i=8*r-t-1,a=(1<<i)-1,o=a>>1,s=i-7,l=r-1,u=e[l--],c=127&u;for(u>>=7;s>0;c=256*c+e[l],l--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=t;s>0;n=256*n+e[l],l--,s-=8);if(0===c)c=1-o;else{if(c===a)return n?NaN:u?-S:S;n+=P(2,t),c-=o}return(u?-1:1)*n*P(2,c-t)}function V(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function F(e){return[255&e]}function B(e){return[255&e,e>>8&255]}function U(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function k(e){return D(e,52,8)}function z(e){return D(e,23,4)}function G(e,t,r){m(e[y],t,{get:function(){return this[r]}})}function j(e,t,r,n){var i=d(+r);if(i+t>e[O])throw M(x);var a=e[I]._b,o=i+e[L],s=a.slice(o,o+t);return n?s:s.reverse()}function H(e,t,r,n,i,a){var o=d(+r);if(o+t>e[O])throw M(x);for(var s=e[I]._b,l=o+e[L],u=n(+i),c=0;c<t;c++)s[l+c]=u[a?c:t-c-1]}if(o.ABV){if(!u(function(){b(1)})||!u(function(){new b(-1)})||u(function(){return new b,new b(1.5),new b(NaN),"ArrayBuffer"!=b.name})){for(var W,X=(b=function(e){return c(this,b),new T(d(e))})[y]=T[y],q=p(T),Y=0;q.length>Y;)(W=q[Y++])in b||s(b,W,T[W]);a||(X.constructor=b)}var Z=new w(new b(2)),J=w[y].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||l(w[y],{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},!0)}else b=function(e){c(this,b,"ArrayBuffer");var t=d(e);this._b=v.call(Array(t),0),this[O]=t},w=function(e,t,r){c(this,w,"DataView"),c(e,b,"DataView");var n=e[O],i=f(t);if(i<0||i>n)throw M("Wrong offset!");if(i+(r=void 0===r?n-i:h(r))>n)throw M("Wrong length!");this[I]=e,this[L]=i,this[O]=r},i&&(G(b,"byteLength","_l"),G(w,"buffer","_b"),G(w,"byteLength","_l"),G(w,"byteOffset","_o")),l(w[y],{getInt8:function(e){return j(this,1,e)[0]<<24>>24},getUint8:function(e){return j(this,1,e)[0]},getInt16:function(e){var t=j(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=j(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return V(j(this,4,e,arguments[1]))},getUint32:function(e){return V(j(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return N(j(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return N(j(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){H(this,1,e,F,t)},setUint8:function(e,t){H(this,1,e,F,t)},setInt16:function(e,t){H(this,2,e,B,t,arguments[2])},setUint16:function(e,t){H(this,2,e,B,t,arguments[2])},setInt32:function(e,t){H(this,4,e,U,t,arguments[2])},setUint32:function(e,t){H(this,4,e,U,t,arguments[2])},setFloat32:function(e,t){H(this,4,e,z,t,arguments[2])},setFloat64:function(e,t){H(this,8,e,k,t,arguments[2])}});g(b,"ArrayBuffer"),g(w,"DataView"),s(w[y],o.VIEW,!0),t.ArrayBuffer=b,t.DataView=w},function(e,t,r){t.f=r(20)},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";(function(t,n){var i=r(164);e.exports=x;var a,o=r(365);x.ReadableState=y;r(163).EventEmitter;var s=function(e,t){return e.listeners(t).length},l=r(369),u=r(249).Buffer,c=t.Uint8Array||function(){};var f=r(135);f.inherits=r(107);var h=r(871),d=void 0;d=h&&h.debuglog?h.debuglog("stream"):function(){};var p,m=r(841),v=r(368);f.inherits(x,l);var g=["error","close","destroy","pause","resume"];function y(e,t){a=a||r(87),e=e||{},this.objectMode=!!e.objectMode,t instanceof a&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(250).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function x(e){if(a=a||r(87),!(this instanceof x))return new x(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function b(e,t,r,n,i){var a,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,S(e)}(e,o)):(i||(a=function(e,t){var r;n=t,u.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?w(e,o,t,!1):E(e,o)):w(e,o,t,!1))):n||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function w(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&S(e)),E(e,t)}Object.defineProperty(x.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),x.prototype.destroy=v.destroy,x.prototype._undestroy=v.undestroy,x.prototype._destroy=function(e,t){this.push(null),t(e)},x.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),b(this,e,t,!1,r)},x.prototype.unshift=function(e){return b(this,e,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(e){return p||(p=r(250).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var _=8388608;function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=_?e=_:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i(T,e):T(e))}function T(e){d("emit readable"),e.emit("readable"),R(e)}function E(e,t){t.readingMore||(t.readingMore=!0,i(P,e,t))}function P(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function A(e){d("readable nexttick read 0"),e.read(0)}function C(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function I(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=u.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,o),0===(e-=o)){o===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i(L,t,e))}function L(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function D(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}x.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):S(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&O(this),null;var n,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),t.ended||t.reading?d("reading or ended",i=!1):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(r,t))),null===(n=e>0?I(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&O(this)),null!==n&&this.emit("data",n),n},x.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},x.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,d("pipe count=%d opts=%j",a.pipesCount,t);var l=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:x;function u(t,n){d("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,d("cleanup"),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("drain",f),e.removeListener("error",v),e.removeListener("unpipe",u),r.removeListener("end",c),r.removeListener("end",x),r.removeListener("data",m),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function c(){d("onend"),e.end()}a.endEmitted?i(l):r.once("end",l),e.on("unpipe",u);var f=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,R(e))}}(r);e.on("drain",f);var h=!1;var p=!1;function m(t){d("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==D(a.pipes,e))&&!h&&(d("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function v(t){d("onerror",t),x(),e.removeListener("error",v),0===s(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",y),x()}function y(){d("onfinish"),e.removeListener("close",g),x()}function x(){d("unpipe"),r.unpipe(e)}return r.on("data",m),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",v),e.once("close",g),e.once("finish",y),e.emit("pipe",r),a.flowing||(d("pipe resume"),r.resume()),e},x.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,r);return this}var o=D(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},x.prototype.on=function(e,t){var r=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):i(A,this))}return r},x.prototype.addListener=x.prototype.on,x.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i(C,e,t))}(this,e)),this},x.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},x.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",function(){if(d("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){(d("wrapped data"),t.decoder&&(i=t.decoder.write(i)),!t.objectMode||null!==i&&void 0!==i)&&((t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause())))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<g.length;a++)e.on(g[a],n.emit.bind(n,g[a]));return n._read=function(t){d("wrapped _read",t),r&&(r=!1,e.resume())},n},x._fromList=I}).call(t,r(49),r(88))},function(e,t,r){"use strict";e.exports=o;var n=r(87),i=r(135);function a(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r);i(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function o(e){if(!(this instanceof o))return new o(e);n.call(this,e),this._transformState=new a(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){s(t,e,r)}):s(t)})}function s(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(107),i.inherits(o,n),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},function(e,t,r){"use strict";var n=r(164);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;a||o?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n(i,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){e.exports=r(163).EventEmitter},function(e,t,r){(function(t){!function(t){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag",u="object"==typeof e,c=t.regeneratorRuntime;if(c)u&&(e.exports=c);else{(c=t.regeneratorRuntime=u?e.exports:{}).wrap=b;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",m={},v={};v[o]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==n&&i.call(y,o)&&(v=y);var x=S.prototype=_.prototype=Object.create(v);M.prototype=x.constructor=S,S.constructor=M,S[l]=M.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===M||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(x),e},c.awrap=function(e){return{__await:e}},T(E.prototype),E.prototype[s]=function(){return this},c.AsyncIterator=E,c.async=function(e,t,r,n){var i=new E(b(e,t,r,n));return c.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},T(x),x[l]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=I,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=r),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),m}}}function b(e,t,r,n){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),o=new R(n||[]);return a._invoke=function(e,t,r){var n=f;return function(i,a){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw a;return O()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=P(o,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var l=w(e,t,r);if("normal"===l.type){if(n=r.done?p:h,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=p,r.method="throw",r.arg=l.arg)}}}(e,r,o),a}function w(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function _(){}function M(){}function S(){}function T(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function E(e){function r(t,n,a,o){var s=w(e[t],e,n);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(e){r("next",e,a,o)},function(e){r("throw",e,a,o)}):Promise.resolve(u).then(function(e){l.value=e,a(l)},o)}o(s.arg)}var n;"object"==typeof t.process&&t.process.domain&&(r=t.process.domain.bind(r)),this._invoke=function(e,t){function i(){return new Promise(function(n,i){r(e,t,n,i)})}return n=n?n.then(i,i):i()}}function P(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,P(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=w(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}return{next:O}}function O(){return{value:r,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,r(49))},function(e,t,r){"use strict";t.a=a;var n=r(374),i=r(372);function a(e,t,a){var o,s,l,u={};if(void 0!==a?(u=t,i.a(a)?o=a:i.b(a)?s=a:a&&a.sel&&(o=[a])):void 0!==t&&(i.a(t)?o=t:i.b(t)?s=t:t&&t.sel?o=[t]:u=t),void 0!==o)for(l=0;l<o.length;++l)i.b(o[l])&&(o[l]=r.i(n.b)(void 0,void 0,void 0,o[l],void 0));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||function e(t,r,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==r)for(var i=0;i<r.length;++i){var a=r[i].data;void 0!==a&&e(a,r[i].children,r[i].sel)}}(u,o,e),r.i(n.b)(e,u,o,s,void 0)}},function(e,t,r){"use strict";r.d(t,"a",function(){return n}),t.b=function(e){return"string"==typeof e||"number"==typeof e};var n=Array.isArray},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(e,t){var o,s,p={},m=void 0!==t?t:a.a;for(o=0;o<d.length;++o)for(p[d[o]]=[],s=0;s<e.length;++s){var v=e[s][d[o]];void 0!==v&&p[d[o]].push(v)}function g(e,t){return function(){if(0==--t){var r=m.parentNode(e);m.removeChild(r,e)}}}function y(e,t){var r,n=e.data;void 0!==n&&u(r=n.hook)&&u(r=r.init)&&(r(e),n=e.data);var a=e.children,o=e.sel;if("!"===o)l(e.text)&&(e.text=""),e.elm=m.createComment(e.text);else if(void 0!==o){var s=o.indexOf("#"),f=o.indexOf(".",s),h=s>0?s:o.length,d=f>0?f:o.length,v=-1!==s||-1!==f?o.slice(0,Math.min(h,d)):o,g=e.elm=u(n)&&u(r=n.ns)?m.createElementNS(r,v):m.createElement(v);for(h<d&&g.setAttribute("id",o.slice(h+1,d)),f>0&&g.setAttribute("class",o.slice(d+1).replace(/\./g," ")),r=0;r<p.create.length;++r)p.create[r](c,e);if(i.a(a))for(r=0;r<a.length;++r){var x=a[r];null!=x&&m.appendChild(g,y(x,t))}else i.b(e.text)&&m.appendChild(g,m.createTextNode(e.text));u(r=e.data.hook)&&(r.create&&r.create(c,e),r.insert&&t.push(e))}else e.elm=m.createTextNode(e.text);return e.elm}function x(e,t,r,n,i,a){for(;n<=i;++n){var o=r[n];null!=o&&m.insertBefore(e,y(o,a),t)}}function b(e){var t,r,n=e.data;if(void 0!==n){for(u(t=n.hook)&&u(t=t.destroy)&&t(e),t=0;t<p.destroy.length;++t)p.destroy[t](e);if(void 0!==e.children)for(r=0;r<e.children.length;++r)null!=(t=e.children[r])&&"string"!=typeof t&&b(t)}}function w(e,t,r,n){for(;r<=n;++r){var i=void 0,a=void 0,o=void 0,s=t[r];if(null!=s)if(u(s.sel)){for(b(s),a=p.remove.length+1,o=g(s.elm,a),i=0;i<p.remove.length;++i)p.remove[i](s,o);u(i=s.data)&&u(i=i.hook)&&u(i=i.remove)?i(s,o):o()}else m.removeChild(e,s.elm)}}function _(e,t,r){var n,i;u(n=t.data)&&u(i=n.hook)&&u(n=i.prepatch)&&n(e,t);var a=t.elm=e.elm,o=e.children,s=t.children;if(e!==t){if(void 0!==t.data){for(n=0;n<p.update.length;++n)p.update[n](e,t);u(n=t.data.hook)&&u(n=n.update)&&n(e,t)}l(t.text)?u(o)&&u(s)?o!==s&&function(e,t,r,n){var i,a,o,s,u=0,c=0,d=t.length-1,p=t[0],v=t[d],g=r.length-1,b=r[0],M=r[g];for(;u<=d&&c<=g;)null==p?p=t[++u]:null==v?v=t[--d]:null==b?b=r[++c]:null==M?M=r[--g]:f(p,b)?(_(p,b,n),p=t[++u],b=r[++c]):f(v,M)?(_(v,M,n),v=t[--d],M=r[--g]):f(p,M)?(_(p,M,n),m.insertBefore(e,p.elm,m.nextSibling(v.elm)),p=t[++u],M=r[--g]):f(v,b)?(_(v,b,n),m.insertBefore(e,v.elm,p.elm),v=t[--d],b=r[++c]):(void 0===i&&(i=h(t,u,d)),l(a=i[b.key])?(m.insertBefore(e,y(b,n),p.elm),b=r[++c]):((o=t[a]).sel!==b.sel?m.insertBefore(e,y(b,n),p.elm):(_(o,b,n),t[a]=void 0,m.insertBefore(e,o.elm,p.elm)),b=r[++c]));(u<=d||c<=g)&&(u>d?(s=null==r[g+1]?null:r[g+1].elm,x(e,s,r,c,g,n)):w(e,t,u,d))}(a,o,s,r):u(s)?(u(e.text)&&m.setTextContent(a,""),x(a,null,s,0,s.length-1,r)):u(o)?w(a,o,0,o.length-1):u(e.text)&&m.setTextContent(a,""):e.text!==t.text&&m.setTextContent(a,t.text),u(i)&&u(n=i.postpatch)&&n(e,t)}}return function(e,t){var i,a,o,s=[];for(i=0;i<p.pre.length;++i)p.pre[i]();for(function(e){return void 0!==e.sel}(e)||(e=function(e){var t=e.id?"#"+e.id:"",i=e.className?"."+e.className.split(" ").join("."):"";return r.i(n.a)(m.tagName(e).toLowerCase()+t+i,{},[],void 0,e)}(e)),f(e,t)?_(e,t,s):(a=e.elm,o=m.parentNode(a),y(t,s),null!==o&&(m.insertBefore(o,t.elm,m.nextSibling(a)),w(o,[e],0,0))),i=0;i<s.length;++i)s[i].data.hook.insert(s[i]);for(i=0;i<p.post.length;++i)p.post[i]();return t}};var n=r(374),i=r(372),a=r(850),o=r(371);r.d(t,"h",function(){return o.a});var s=r(851);function l(e){return void 0===e}function u(e){return void 0!==e}r.d(t,"thunk",function(){return s.a});var c=r.i(n.a)("",{},[],void 0,void 0);function f(e,t){return e.key===t.key&&e.sel===t.sel}function h(e,t,r){var n,i,a,o={};for(n=t;n<=r;++n)null!=(a=e[n])&&void 0!==(i=a.key)&&(o[i]=n);return o}var d=["create","update","remove","destroy","pre","post"]},function(e,t,r){"use strict";function n(e,t,r,n,i){return{sel:e,data:t,children:r,text:n,elm:i,key:void 0===t?void 0:t.key}}t.b=n,t.a=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="http://www.w3.org/1999/xlink",i="http://www.w3.org/XML/1998/namespace",a=58,o=120;function s(e,t){var r,s=t.elm,l=e.data.attrs,u=t.data.attrs;if((l||u)&&l!==u){for(r in l=l||{},u=u||{}){var c=u[r];l[r]!==c&&(!0===c?s.setAttribute(r,""):!1===c?s.removeAttribute(r):r.charCodeAt(0)!==o?s.setAttribute(r,c):r.charCodeAt(3)===a?s.setAttributeNS(i,r,c):r.charCodeAt(5)===a?s.setAttributeNS(n,r,c):s.setAttribute(r,c))}for(r in l)r in u||s.removeAttribute(r)}}t.attributesModule={create:s,update:s},t.default=t.attributesModule},function(e,t,r){"use strict";function n(e,t){var r,n,i=t.elm,a=e.data.class,o=t.data.class;if((a||o)&&a!==o){for(n in a=a||{},o=o||{},a)o[n]||i.classList.remove(n);for(n in o)(r=o[n])!==a[n]&&i.classList[r?"add":"remove"](n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.classModule={create:n,update:n},t.default=t.classModule},function(e,t,r){"use strict";function n(e,t){var r=e.type,n=t.data.on;n&&n[r]&&function e(t,r,n){if("function"==typeof t)t.call(r,n,r);else if("object"==typeof t)if("function"==typeof t[0])if(2===t.length)t[0].call(r,t[1],n,r);else{var i=t.slice(1);i.push(n),i.push(r),t[0].apply(r,i)}else for(var a=0;a<t.length;a++)e(t[a])}(n[r],t,e)}function i(e,t){var r,i=e.data.on,a=e.listener,o=e.elm,s=t&&t.data.on,l=t&&t.elm;if(i!==s){if(i&&a)if(s)for(r in i)s[r]||o.removeEventListener(r,a,!1);else for(r in i)o.removeEventListener(r,a,!1);if(s){var u=t.listener=e.listener||function e(t){n(t,e.vnode)};if(u.vnode=t,i)for(r in s)i[r]||l.addEventListener(r,u,!1);else for(r in s)l.addEventListener(r,u,!1)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.eventListenersModule={create:i,update:i,destroy:i},t.default=t.eventListenersModule},function(e,t,r){"use strict";function n(e,t){var r,n,i=t.elm,a=e.data.props,o=t.data.props;if((a||o)&&a!==o){for(r in a=a||{},o=o||{},a)o[r]||delete i[r];for(r in o)n=o[r],a[r]===n||"value"===r&&i[r]===n||(i[r]=n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.propsModule={create:n,update:n},t.default=t.propsModule},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,i=function(e){n(function(){n(e)})},a=!1;function o(e,t,r){i(function(){e[t]=r})}function s(e,t){var r,n,i=t.elm,a=e.data.style,s=t.data.style;if((a||s)&&a!==s){a=a||{},s=s||{};var l="delayed"in a;for(n in a)s[n]||("-"===n[0]&&"-"===n[1]?i.style.removeProperty(n):i.style[n]="");for(n in s)if(r=s[n],"delayed"===n&&s.delayed)for(var u in s.delayed)r=s.delayed[u],l&&r===a.delayed[u]||o(i.style,u,r);else"remove"!==n&&r!==a[n]&&("-"===n[0]&&"-"===n[1]?i.style.setProperty(n,r):i.style[n]=r)}}t.styleModule={pre:function(){a=!1},create:s,update:s,destroy:function(e){var t,r,n=e.elm,i=e.data.style;if(i&&(t=i.destroy))for(r in t)n.style[r]=t[r]},remove:function(e,t){var r=e.data.style;if(r&&r.remove){a||(getComputedStyle(document.body).transform,a=!0);var n,i=e.elm,o=0,s=r.remove,l=0,u=[];for(n in s)u.push(n),i.style[n]=s[n];for(var c=getComputedStyle(i)["transition-property"].split(", ");o<c.length;++o)-1!==u.indexOf(c[o])&&l++;i.addEventListener("transitionend",function(e){e.target===i&&--l,0===l&&t()})}else t()}},t.default=t.styleModule},function(e,t){(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),t.normalize=function(e){return e.toLowerCase()},t.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.stripPrefix=function(t){return t.replace(e,"")},t.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},t.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}).call(this)},function(e,t){(function(){e.exports=function(){function e(e,t,r){if(this.options=e.options,this.stringify=e.stringify,null==t)throw new Error("Missing attribute name of element "+e.name);if(null==r)throw new Error("Missing attribute value for attribute "+t+" of element "+e.name);this.name=this.stringify.attName(t),this.value=this.stringify.attValue(r)}return e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(e){return this.options.writer.set(e).attribute(this)},e}()}).call(this)},function(e,t){(function(){var t=function(e,t){return function(){return e.apply(t,arguments)}},r={}.hasOwnProperty;e.exports=function(){function e(e){var n,i,a;for(n in this.assertLegalChar=t(this.assertLegalChar,this),e||(e={}),this.noDoubleEncoding=e.noDoubleEncoding,i=e.stringify||{})r.call(i,n)&&(a=i[n],this[n]=a)}return e.prototype.eleName=function(e){return e=""+e||"",this.assertLegalChar(e)},e.prototype.eleText=function(e){return e=""+e||"",this.assertLegalChar(this.elEscape(e))},e.prototype.cdata=function(e){return e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e)},e.prototype.comment=function(e){if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return""+e||""},e.prototype.attName=function(e){return""+e||""},e.prototype.attValue=function(e){return e=""+e||"",this.attEscape(e)},e.prototype.insTarget=function(e){return""+e||""},e.prototype.insValue=function(e){if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return e},e.prototype.xmlVersion=function(e){if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-]|-)*$/))throw new Error("Invalid encoding: "+e);return e},e.prototype.xmlStandalone=function(e){return e?"yes":"no"},e.prototype.dtdPubID=function(e){return""+e||""},e.prototype.dtdSysID=function(e){return""+e||""},e.prototype.dtdElementValue=function(e){return""+e||""},e.prototype.dtdAttType=function(e){return""+e||""},e.prototype.dtdAttDefault=function(e){return null!=e?""+e||"":e},e.prototype.dtdEntityValue=function(e){return""+e||""},e.prototype.dtdNData=function(e){return""+e||""},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(e){var t;if(t=e.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+e+" at index "+t.index);return e},e.prototype.elEscape=function(e){var t;return t=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},e.prototype.attEscape=function(e){var t;return t=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},e}()}).call(this)},function(e,t){(function(){var t={}.hasOwnProperty;e.exports=function(){function e(e){var r,n,i,a,o,s,l,u,c;for(r in e||(e={}),this.pretty=e.pretty||!1,this.allowEmpty=null!=(n=e.allowEmpty)&&n,this.pretty?(this.indent=null!=(i=e.indent)?i:"  ",this.newline=null!=(a=e.newline)?a:"\n",this.offset=null!=(o=e.offset)?o:0,this.dontprettytextnodes=null!=(s=e.dontprettytextnodes)?s:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=null!=(l=e.spacebeforeslash)?l:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,u=e.writer||{})t.call(u,r)&&(c=u[r],this[r]=c)}return e.prototype.set=function(e){var r,n,i;for(r in e||(e={}),"pretty"in e&&(this.pretty=e.pretty),"allowEmpty"in e&&(this.allowEmpty=e.allowEmpty),this.pretty?(this.indent="indent"in e?e.indent:"  ",this.newline="newline"in e?e.newline:"\n",this.offset="offset"in e?e.offset:0,this.dontprettytextnodes="dontprettytextnodes"in e?e.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in e?e.spacebeforeslash:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,n=e.writer||{})t.call(n,r)&&(i=n[r],this[r]=i);return this},e.prototype.space=function(e){var t;return this.pretty&&(t=(e||0)+this.offset+1)>0?new Array(t).join(this.indent):""},e}()}).call(this)},function(e,t,r){"use strict";e.exports=r(534).default},,function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(30),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,r){return function n(i,o){try{var s=t[i](o),l=s.value}catch(e){return void r(e)}if(!s.done)return a.default.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})}}},function(e,t,r){e.exports=r(845)},function(e,t,r){r(95),r(701),e.exports=r(11).Array.from},function(e,t,r){r(96),r(95),e.exports=r(699)},function(e,t,r){r(96),r(95),e.exports=r(700)},function(e,t,r){r(712),e.exports=r(11).Object.assign},function(e,t,r){r(713);var n=r(11).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){r(715);var n=r(11).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){r(717),e.exports=r(11).Object.getPrototypeOf},function(e,t,r){r(718),e.exports=r(11).Object.keys},function(e,t,r){r(720),e.exports=r(11).Object.setPrototypeOf},function(e,t,r){r(399),r(156),r(729),r(730),e.exports=r(11).Symbol},function(e,t,r){r(95),r(96),e.exports=r(222).f("iterator")},function(e,t,r){"use strict";var n=r(34),i=r(66),a=r(52),o=r(12),s=r(215),l=r(80).KEY,u=r(69),c=r(217),f=r(126),h=r(154),d=r(28),p=r(222),m=r(221),v=r(688),g=r(328),y=r(48),x=r(75),b=r(220),w=r(125),_=r(151),M=r(694),S=r(257),T=r(53),E=r(93),P=S.f,A=T.f,C=M.f,R=n.Symbol,I=n.JSON,O=I&&I.stringify,L=d("_hidden"),D=d("toPrimitive"),N={}.propertyIsEnumerable,V=c("symbol-registry"),F=c("symbols"),B=c("op-symbols"),U=Object.prototype,k="function"==typeof R,z=n.QObject,G=!z||!z.prototype||!z.prototype.findChild,j=a&&u(function(){return 7!=_(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=P(U,t);n&&delete U[t],A(e,t,r),n&&e!==U&&A(U,t,n)}:A,H=function(e){var t=F[e]=_(R.prototype);return t._k=e,t},W=k&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},X=function(e,t,r){return e===U&&X(B,t,r),y(e),t=b(t,!0),y(r),i(F,t)?(r.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),r=_(r,{enumerable:w(0,!1)})):(i(e,L)||A(e,L,w(1,{})),e[L][t]=!0),j(e,t,r)):A(e,t,r)},q=function(e,t){y(e);for(var r,n=v(t=x(t)),i=0,a=n.length;a>i;)X(e,r=n[i++],t[r]);return e},Y=function(e){var t=N.call(this,e=b(e,!0));return!(this===U&&i(F,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(F,e)||i(this,L)&&this[L][e])||t)},Z=function(e,t){if(e=x(e),t=b(t,!0),e!==U||!i(F,t)||i(B,t)){var r=P(e,t);return!r||!i(F,t)||i(e,L)&&e[L][t]||(r.enumerable=!0),r}},J=function(e){for(var t,r=C(x(e)),n=[],a=0;r.length>a;)i(F,t=r[a++])||t==L||t==l||n.push(t);return n},Q=function(e){for(var t,r=e===U,n=C(r?B:x(e)),a=[],o=0;n.length>o;)!i(F,t=n[o++])||r&&!i(U,t)||a.push(F[t]);return a};k||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===U&&t.call(B,r),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),j(this,e,w(1,r))};return a&&G&&j(U,e,{configurable:!0,set:t}),H(e)}).prototype,"toString",function(){return this._k}),S.f=Z,T.f=X,r(334).f=M.f=J,r(124).f=Y,r(214).f=Q,a&&!r(150)&&s(U,"propertyIsEnumerable",Y,!0),p.f=function(e){return H(d(e))}),o(o.G+o.W+o.F*!k,{Symbol:R});for(var K="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),$=0;K.length>$;)d(K[$++]);for(var ee=E(d.store),te=0;ee.length>te;)m(ee[te++]);o(o.S+o.F*!k,"Symbol",{for:function(e){return i(V,e+="")?V[e]:V[e]=R(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in V)if(V[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!k,"Object",{create:function(e,t){return void 0===t?_(e):q(_(e),t)},defineProperty:X,defineProperties:q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:J,getOwnPropertySymbols:Q}),I&&o(o.S+o.F*(!k||u(function(){var e=R();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!W(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return"function"==typeof(t=n[1])&&(r=t),!r&&g(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,O.apply(I,n)}}}),R.prototype[D]||r(70)(R.prototype,D,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t,r){(function(t){e.exports=function(e){var r=[];return r.toString=function(){return this.map(function(r){var n=function(e,r){var n=e[1]||"",i=e[3];if(!i)return n;if(r){var a=(s=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+new t(JSON.stringify(s)).toString("base64")+" */"),o=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(o).concat([a]).join("\n")}var s;return[n].join("\n")}(r,e);return r[2]?"@media "+r[2]+"{"+n+"}":n}).join("")},r.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(n[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&n[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),r.push(o))}},r}}).call(t,r(57).Buffer)},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return n.exec(e).slice(1)};function a(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var o=i>=0?arguments[i]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,n="/"===o.charAt(0))}return t=r(a(t.split("/"),function(e){return!!e}),!n).join("/"),(n?"/":"")+t||"."},t.normalize=function(e){var n=t.isAbsolute(e),i="/"===o(e,-1);return(e=r(a(e.split("/"),function(e){return!!e}),!n).join("/"))||n||(e="."),e&&i&&(e+="/"),(n?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(a(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=n(e.split("/")),a=n(r.split("/")),o=Math.min(i.length,a.length),s=o,l=0;l<o;l++)if(i[l]!==a[l]){s=l;break}var u=[];for(l=s;l<i.length;l++)u.push("..");return(u=u.concat(a.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},t.basename=function(e,t){var r=i(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return i(e)[3]};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(t,r(88))},function(e,t){var r={},n=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},i=n(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),a=n(function(){return document.head||document.getElementsByTagName("head")[0]}),o=null,s=0,l=[];function u(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=r[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(p(i.parts[o],t))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(p(i.parts[o],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function c(e){for(var t=[],r={},n=0;n<e.length;n++){var i=e[n],a=i[0],o={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(o):t.push(r[a]={id:a,parts:[o]})}return t}function f(e,t){var r=a(),n=l[l.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),l.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function h(e){e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function d(e){var t=document.createElement("style");return t.type="text/css",f(e,t),t}function p(e,t){var r,n,i;if(t.singleton){var a=s++;r=o||(o=d(t)),n=g.bind(null,r,a,!1),i=g.bind(null,r,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return t.rel="stylesheet",f(e,t),t}(t),n=function(e,t){var r=t.css,n=t.sourceMap;n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var i=new Blob([r],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(i),a&&URL.revokeObjectURL(a)}.bind(null,r),i=function(){h(r),r.href&&URL.revokeObjectURL(r.href)}):(r=d(t),n=function(e,t){var r=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){h(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");void 0===(t=t||{}).singleton&&(t.singleton=i()),void 0===t.insertAt&&(t.insertAt="bottom");var n=c(e);return u(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var o=n[a];(s=r[o.id]).refs--,i.push(s)}e&&u(c(e),t);for(a=0;a<i.length;a++){var s;if(0===(s=i[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete r[s.id]}}}};var m,v=(m=[],function(e,t){return m[e]=t,m.filter(Boolean).join("\n")});function g(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=v(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}},function(e,t,r){(function(){"use strict";var e,n,i,a,o={}.hasOwnProperty;n=r(252),e=r(864),i=r(865),a=r(380),t.defaults=n.defaults,t.processors=a,t.ValidationError=function(e){function t(e){this.message=e}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,Error),t}(),t.Builder=e.Builder,t.Parser=i.Parser,t.parseString=i.parseString}).call(this)},function(e,t,r){(function(t){!function(r){"use strict";var n=r.atob;function i(e){if("function"==typeof n)return n(e);if("function"==typeof t)return new t(e,"base64").toString("binary");if("object"==typeof r.base64js){var i=r.base64js.b64ToByteArray(e);return Array.prototype.map.call(i,function(e){return String.fromCharCode(e)}).join("")}throw new Error("you're probably in an ios webworker. please include use beatgammit's base64-js")}r.atob=i,e.exports=i}(window)}).call(t,r(57).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={line:function(e,t,r,n,i){e.beginPath(),e.moveTo(t,r),e.lineTo(n,i),e.stroke()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(109)),i=c(r(414)),a=r(139),o=c(r(180)),s=c(r(409)),l=r(277),u=c(r(407));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){(e=e||{}).empty||((0,l.checkArgument)(e.familyName,"When creating a new Font object, familyName is required."),(0,l.checkArgument)(e.styleName,"When creating a new Font object, styleName is required."),(0,l.checkArgument)(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),(0,l.checkArgument)(e.ascender,"When creating a new Font object, ascender is required."),(0,l.checkArgument)(e.descender,"When creating a new Font object, descender is required."),(0,l.checkArgument)(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||e.familyName+e.styleName},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new o.default.GlyphSet(this,e.glyphs||[]),this.encoding=new a.DefaultEncoding(this),this.substitution=new s.default(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new u.default(this):void 0}})}f.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},f.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},f.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},f.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var r=[],n=0;n<e.length;n+=1){var i=e[n];r.push(this.charToGlyphIndex(i))}var a=r.length;if(t.features){var o=t.script||this.substitution.getDefaultScriptName(),s=[];t.features.liga&&(s=s.concat(this.substitution.getFeature("liga",o,t.language))),t.features.rlig&&(s=s.concat(this.substitution.getFeature("rlig",o,t.language)));for(var l=0;l<a;l+=1)for(var u=0;u<s.length;u++){for(var c=s[u],f=c.sub,h=f.length,d=0;d<h&&f[d]===r[l+d];)d++;d===h&&(r.splice(l,h,c.by),a=a-h+1)}}for(var p=new Array(a),m=this.glyphs.get(0),v=0;v<a;v+=1)p[v]=this.glyphs.get(r[v])||m;return p},f.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},f.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},f.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},f.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.getGposKerningValue;return r?r(e,t):this.kerningPairs[e+","+t]||0},f.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},f.prototype.forEachGlyph=function(e,t,r,n,i,a){t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:72,i=i||this.defaultRenderOptions;for(var o=1/this.unitsPerEm*n,s=this.stringToGlyphs(e,i),l=0;l<s.length;l+=1){var u=s[l];if(a.call(this,u,t,r,n,i),u.advanceWidth&&(t+=u.advanceWidth*o),i.kerning&&l<s.length-1)t+=this.getKerningValue(u,s[l+1])*o;i.letterSpacing?t+=i.letterSpacing*n:i.tracking&&(t+=i.tracking/1e3*n)}return t},f.prototype.getPath=function(e,t,r,i,a){var o=new n.default;return this.forEachGlyph(e,t,r,i,a,function(e,t,r,n){var i=e.getPath(t,r,n,a,this);o.extend(i)}),o},f.prototype.getPaths=function(e,t,r,n,i){var a=[];return this.forEachGlyph(e,t,r,n,i,function(e,t,r,n){var o=e.getPath(t,r,n,i,this);a.push(o)}),a},f.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,function(){})},f.prototype.draw=function(e,t,r,n,i,a){this.getPath(t,r,n,i,a).draw(e)},f.prototype.drawPoints=function(e,t,r,n,i,a){this.forEachGlyph(t,r,n,i,a,function(t,r,n,i){t.drawPoints(e,r,n,i)})},f.prototype.drawMetrics=function(e,t,r,n,i,a){this.forEachGlyph(t,r,n,i,a,function(t,r,n,i){t.drawMetrics(e,r,n,i)})},f.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},f.prototype.validate=function(){var e=[],t=this;function r(t,r){t||e.push(r)}function n(e){var n=t.getEnglishName(e);r(n&&n.trim().length>0,"No English "+e+" specified.")}n("fontFamily"),n("weightName"),n("manufacturer"),n("copyright"),n("version"),r(this.unitsPerEm>0,"No unitsPerEm specified.")},f.prototype.toTables=function(){return i.default.fontToTable(this)},f.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},f.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e[n];return t},f.prototype.download=function(e){var t=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+n+".otf";var i=this.toArrayBuffer();if((0,l.isBrowser)())window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,i.byteLength,function(t){t.root.getFile(e,{create:!0},function(e){e.createWriter(function(t){var r=new DataView(i),n=new Blob([r],{type:"font/opentype"});t.write(n),t.addEventListener("writeend",function(){location.href=e.toURL()},!1)})})},function(e){throw new Error(e.name+": "+e.message)});else{var a=r(254),o=(0,l.arrayBufferToNodeBuffer)(i);a.writeFileSync(e,o)}},f.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},f.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},f.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900},t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(655)),i=s(r(206)),a=s(r(205)),o=s(r(89));function s(e){return e&&e.__esModule?e:{default:e}}var l=void 0,u=void 0,c=void 0,f=void 0;function h(e){this.font=e,this._fpgmState=this._prepState=void 0,this._errorState=0}function d(e){return e}function p(e){return(0,o.default)(e)*Math.round(Math.abs(e))}function m(e){return(0,o.default)(e)*Math.round(Math.abs(2*e))/2}function v(e){return(0,o.default)(e)*(Math.round(Math.abs(e)+.5)-.5)}function g(e){return(0,o.default)(e)*Math.ceil(Math.abs(e))}function y(e){return(0,o.default)(e)*Math.floor(Math.abs(e))}var x=function(e){var t=this.srPeriod,r=this.srPhase,n=this.srThreshold,i=1;return e<0&&(e=-e,i=-1),e+=n-r,e=(0,a.default)(e/t)*t,e+=r,i>0&&e<0?r:i<0&&e>0?-r:e*i},b={x:1,y:0,axis:"x",distance:function(e,t,r,n){return(r?e.xo:e.x)-(n?t.xo:t.x)},interpolate:function(e,t,r,n){var i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0;if(!n||n===this)return i=e.xo-t.xo,a=e.xo-r.xo,l=t.x-t.xo,u=r.x-r.xo,0===(c=(o=Math.abs(i))+(s=Math.abs(a)))?void(e.x=e.xo+(l+u)/2):void(e.x=e.xo+(l*s+u*o)/c);i=n.distance(e,t,!0,!0),a=n.distance(e,r,!0,!0),l=n.distance(t,t,!1,!0),u=n.distance(r,r,!1,!0),0!==(c=(o=Math.abs(i))+(s=Math.abs(a)))?b.setRelative(e,e,(l*s+u*o)/c,n,!0):b.setRelative(e,e,(l+u)/2,n,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,r,n,i){if(n&&n!==this){var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+r*n.x,l=o+r*n.y;e.x=s+(e.y-l)/n.normalSlope}else e.x=(i?t.xo:t.x)+r},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},w={x:0,y:1,axis:"y",distance:function(e,t,r,n){return(r?e.yo:e.y)-(n?t.yo:t.y)},interpolate:function(e,t,r,n){var i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0;if(!n||n===this)return i=e.yo-t.yo,a=e.yo-r.yo,l=t.y-t.yo,u=r.y-r.yo,0===(c=(o=Math.abs(i))+(s=Math.abs(a)))?void(e.y=e.yo+(l+u)/2):void(e.y=e.yo+(l*s+u*o)/c);i=n.distance(e,t,!0,!0),a=n.distance(e,r,!0,!0),l=n.distance(t,t,!1,!0),u=n.distance(r,r,!1,!0),0!==(c=(o=Math.abs(i))+(s=Math.abs(a)))?w.setRelative(e,e,(l*s+u*o)/c,n,!0):w.setRelative(e,e,(l+u)/2,n,!0)},normalSlope:0,setRelative:function(e,t,r,n,i){if(n&&n!==this){var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+r*n.x,l=o+r*n.y;e.y=l+n.normalSlope*(e.x-s)}else e.y=(i?t.yo:t.y)+r},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function _(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,(0,i.default)(this)}function M(e,t){var r=Math.sqrt(e*e+t*t);return t/=r,1===(e/=r)&&0===t?b:0===e&&1===t?w:new _(e,t)}function S(e,t,r,i){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=r,this.onCurve=i,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,(0,n.default)(this)}(0,i.default)(b),(0,i.default)(w),_.prototype.distance=function(e,t,r,n){return this.x*b.distance(e,t,r,n)+this.y*w.distance(e,t,r,n)},_.prototype.interpolate=function(e,t,r,n){var i,a,o,s,l,u,c;o=n.distance(e,t,!0,!0),s=n.distance(e,r,!0,!0),i=n.distance(t,t,!1,!0),a=n.distance(r,r,!1,!0),0!==(c=(l=Math.abs(o))+(u=Math.abs(s)))?this.setRelative(e,e,(i*u+a*l)/c,n,!0):this.setRelative(e,e,(i+a)/2,n,!0)},_.prototype.setRelative=function(e,t,r,n,i){n=n||this;var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+r*n.x,l=o+r*n.y,u=n.normalSlope,c=this.slope,f=e.x,h=e.y;e.x=(c*f-u*s+l-h)/(c-u),e.y=c*(e.x-f)+h},_.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},S.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},S.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var T=(0,i.default)(new S(0,0)),E={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function P(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=b,this.round=p}}function A(e){for(var t=e.tZone=new Array(e.gZone.length),r=0;r<t.length;r++)t[r]=new S(0,0)}function C(e,t){var r=e.prog,n=e.ip,i=1,a=void 0;do{if(88===(a=r[++n]))i++;else if(89===a)i--;else if(64===a)n+=r[n+1]+1;else if(65===a)n+=2*r[n+1]+1;else if(a>=176&&a<=183)n+=a-176+1;else if(a>=184&&a<=191)n+=2*(a-184+1);else if(t&&1===i&&27===a)break}while(i>0);e.ip=n}function R(e,r){t.DEBUG&&console.log(r.step,"SVTCA["+e.axis+"]"),r.fv=r.pv=r.dpv=e}function I(e,r){t.DEBUG&&console.log(r.step,"SPVTCA["+e.axis+"]"),r.pv=r.dpv=e}function O(e,r){t.DEBUG&&console.log(r.step,"SFVTCA["+e.axis+"]"),r.fv=e}function L(e,r){var n=r.stack,i=n.pop(),a=n.pop(),o=r.z2[i],s=r.z1[a];t.DEBUG&&console.log("SPVTL["+e+"]",i,a);var l=void 0,u=void 0;e?(l=o.y-s.y,u=s.x-o.x):(l=s.x-o.x,u=s.y-o.y),r.pv=r.dpv=M(l,u)}function D(e,r){var n=r.stack,i=n.pop(),a=n.pop(),o=r.z2[i],s=r.z1[a];t.DEBUG&&console.log("SFVTL["+e+"]",i,a);var l=void 0,u=void 0;e?(l=o.y-s.y,u=s.x-o.x):(l=s.x-o.x,u=s.y-o.y),r.fv=M(l,u)}function N(e){t.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function V(e,r){var n=r.stack.pop(),i=r.z0[n],a=r.fv,o=r.pv;t.DEBUG&&console.log(r.step,"MDAP["+e+"]",n);var s=o.distance(i,T);e&&(s=r.round(s)),a.setRelative(i,T,s,o),a.touch(i),r.rp0=r.rp1=n}function F(e,r){var n=r.z2,i=n.length-2,a=void 0,o=void 0,s=void 0;t.DEBUG&&console.log(r.step,"IUP["+e.axis+"]");for(var l=0;l<i;l++)a=n[l],e.touched(a)||(o=a.prevTouched(e))!==a&&(o===(s=a.nextTouched(e))&&e.setRelative(a,a,e.distance(o,o,!1,!0),e,!0),e.interpolate(a,o,s,e))}function B(e,r){for(var n=r.stack,i=e?r.rp1:r.rp2,a=(e?r.z0:r.z1)[i],o=r.fv,s=r.pv,l=r.loop,u=r.z2;l--;){var c=n.pop(),f=u[c],h=s.distance(a,a,!1,!0);o.setRelative(f,f,h,s),o.touch(f),t.DEBUG&&console.log(r.step,(r.loop>1?"loop "+(r.loop-l)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",c)}r.loop=1}function U(e,r){var n=r.stack,i=e?r.rp1:r.rp2,a=(e?r.z0:r.z1)[i],o=r.fv,s=r.pv,l=n.pop(),u=r.z2[r.contours[l]],c=u;t.DEBUG&&console.log(r.step,"SHC["+e+"]",l);var f=s.distance(a,a,!1,!0);do{c!==a&&o.setRelative(c,c,f,s),c=c.nextPointOnContour}while(c!==u)}function k(e,r){var n=r.stack,i=e?r.rp1:r.rp2,a=(e?r.z0:r.z1)[i],o=r.fv,s=r.pv,l=n.pop();t.DEBUG&&console.log(r.step,"SHZ["+e+"]",l);var u=void 0;switch(l){case 0:u=r.tZone;break;case 1:u=r.gZone;break;default:throw new Error("Invalid zone")}for(var c=void 0,f=s.distance(a,a,!1,!0),h=u.length-2,d=0;d<h;d++)(c=u[d])!==a&&o.setRelative(c,c,f,s)}function z(e,r){var n=r.stack,i=n.pop()/64,a=n.pop(),o=r.z1[a],s=r.z0[r.rp0],l=r.fv,u=r.pv;l.setRelative(o,s,i,u),l.touch(o),t.DEBUG&&console.log(r.step,"MSIRP["+e+"]",i,a),r.rp1=r.rp0,r.rp2=a,e&&(r.rp0=a)}function G(e,r){var n=r.stack,i=n.pop(),a=n.pop(),o=r.z0[a],s=r.fv,l=r.pv,u=r.cvt[i];e&&(u=r.round(u)),t.DEBUG&&console.log(r.step,"MIAP["+e+"]",i,"(",u,")",a),s.setRelative(o,T,u,l),0===r.zp0&&(o.xo=o.x,o.yo=o.y),s.touch(o),r.rp0=r.rp1=a}function j(e,r){var n=r.stack,i=n.pop(),a=r.z2[i];t.DEBUG&&console.log(r.step,"GC["+e+"]",i),n.push(64*r.dpv.distance(a,T,e,!1))}function H(e,r){var n=r.stack,i=n.pop(),a=n.pop(),o=r.z1[i],s=r.z0[a],l=r.dpv.distance(s,o,e,e);t.DEBUG&&console.log(r.step,"MD["+e+"]",i,a,"->",l),r.stack.push(Math.round(64*l))}function W(e,r){var n=r.stack,i=n.pop(),a=r.fv,o=r.pv,s=r.ppem,l=r.deltaBase+16*(e-1),u=r.deltaShift,c=r.z0;t.DEBUG&&console.log(r.step,"DELTAP["+e+"]",i,n);for(var f=0;f<i;f++){var h=n.pop(),d=n.pop();if(l+((240&d)>>4)===s){var p=(15&d)-8;p>=0&&p++,t.DEBUG&&console.log(r.step,"DELTAPFIX",h,"by",p*u);var m=c[h];a.setRelative(m,m,p*u,o)}}}function X(e,r){var n=r.stack,i=n.pop();t.DEBUG&&console.log(r.step,"ROUND[]"),n.push(64*r.round(i/64))}function q(e,r){var n=r.stack,i=n.pop(),a=r.ppem,o=r.deltaBase+16*(e-1),s=r.deltaShift;t.DEBUG&&console.log(r.step,"DELTAC["+e+"]",i,n);for(var l=0;l<i;l++){var u=n.pop(),c=n.pop();if(o+((240&c)>>4)===a){var f=(15&c)-8;f>=0&&f++;var h=f*s;t.DEBUG&&console.log(r.step,"DELTACFIX",u,"by",h),r.cvt[u]+=h}}}function Y(e,r){var n=r.stack,i=n.pop(),a=n.pop(),o=r.z2[i],s=r.z1[a];t.DEBUG&&console.log("SDPVTL["+e+"]",i,a);var l=void 0,u=void 0;e?(l=o.y-s.y,u=s.x-o.x):(l=s.x-o.x,u=s.y-o.y),r.dpv=M(l,u)}function Z(e,r){var n=r.stack,i=r.prog,a=r.ip;t.DEBUG&&console.log(r.step,"PUSHB["+e+"]");for(var o=0;o<e;o++)n.push(i[++a]);r.ip=a}function J(e,r){var n=r.ip,i=r.prog,a=r.stack;t.DEBUG&&console.log(r.ip,"PUSHW["+e+"]");for(var o=0;o<e;o++){var s=i[++n]<<8|i[++n];32768&s&&(s=-(1+(65535^s))),a.push(s)}r.ip=n}function Q(e,r,n,i,a,o){var s,l,u=o.stack,c=e&&u.pop(),f=u.pop(),h=o.rp0,d=o.z0[h],p=o.z1[f],m=o.minDis,v=o.fv,g=o.dpv,y=void 0,x=void 0;l=(y=s=g.distance(p,d,!0,!0))>=0?1:-1,y=Math.abs(y),e&&(x=o.cvt[c],i&&Math.abs(y-x)<o.cvCutIn&&(y=x)),n&&y<m&&(y=m),i&&(y=o.round(y)),v.setRelative(p,d,l*y,g),v.touch(p),t.DEBUG&&console.log(o.step,(e?"MIRP[":"MDRP[")+(r?"M":"m")+(n?">":"_")+(i?"R":"_")+(0===a?"Gr":1===a?"Bl":2===a?"Wh":"")+"]",e?c+"("+o.cvt[c]+","+x+")":"",f,"(d =",s,"->",l*y,")"),o.rp1=o.rp0,o.rp2=f,r&&(o.rp0=f)}h.prototype.exec=function(e,r){if("number"!=typeof r)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var n=this.font,i=this._prepState;if(!i||i.ppem!==r){var a=this._fpgmState;if(!a){P.prototype=E,(a=this._fpgmState=new P("fpgm",n.tables.fpgm)).funcs=[],a.font=n,t.DEBUG&&(console.log("---EXEC FPGM---"),a.step=-1);try{u(a)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}P.prototype=a,(i=this._prepState=new P("prep",n.tables.prep)).ppem=r;var o=n.tables.cvt;if(o)for(var s=i.cvt=new Array(o.length),l=r/n.unitsPerEm,f=0;f<o.length;f++)s[f]=o[f]*l;else i.cvt=[];t.DEBUG&&(console.log("---EXEC PREP---"),i.step=-1);try{u(i)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(this._errorState>1))try{return c(e,i)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},c=function(e,r){var n=r.ppem/r.font.unitsPerEm,i=n,a=e.components,o=void 0,s=void 0,l=void 0;if(P.prototype=r,a){var c=r.font;s=[],o=[];for(var h=0;h<a.length;h++){var d=a[h],p=c.glyphs.get(d.glyphIndex);l=new P("glyf",p.instructions),t.DEBUG&&(console.log("---EXEC COMP "+h+"---"),l.step=-1),f(p,l,n,i);for(var m=Math.round(d.dx*n),v=Math.round(d.dy*i),g=l.gZone,y=l.contours,x=0;x<g.length;x++){var b=g[x];b.xTouched=b.yTouched=!1,b.xo=b.x=b.x+m,b.yo=b.y=b.y+v}var w=s.length;s.push.apply(s,g);for(var _=0;_<y.length;_++)o.push(y[_]+w)}e.instructions&&!l.inhibitGridFit&&((l=new P("glyf",e.instructions)).gZone=l.z0=l.z1=l.z2=s,l.contours=o,s.push(new S(0,0),new S(Math.round(e.advanceWidth*n),0)),t.DEBUG&&(console.log("---EXEC COMPOSITE---"),l.step=-1),u(l),s.length-=2)}else l=new P("glyf",e.instructions),t.DEBUG&&(console.log("---EXEC GLYPH---"),l.step=-1),f(e,l,n,i),s=l.gZone;return s},f=function(e,r,n,i){for(var a=e.points||[],o=a.length,s=r.gZone=r.z0=r.z1=r.z2=[],l=r.contours=[],c=void 0,f=0;f<o;f++)c=a[f],s[f]=new S(c.x*n,c.y*i,c.lastPointOfContour,c.onCurve);for(var h=void 0,d=void 0,p=0;p<o;p++)c=s[p],h||(h=c,l.push(p)),c.lastPointOfContour?(c.nextPointOnContour=h,h.prevPointOnContour=c,h=void 0):(d=s[p+1],c.nextPointOnContour=d,d.prevPointOnContour=c);if(!r.inhibitGridFit&&(s.push(new S(0,0),new S(Math.round(e.advanceWidth*n),0)),u(r),s.length-=2,t.DEBUG)){console.log("FINISHED GLYPH",r.stack);for(var m=0;m<o;m++)console.log(m,s[m].x,s[m].y)}},u=function(e){var r=e.prog;if(r){var n=r.length,i=void 0;for(e.ip=0;e.ip<n;e.ip++){if(t.DEBUG&&e.step++,!(i=l[r[e.ip]]))throw new Error("unknown instruction: 0x"+Number(r[e.ip]).toString(16));i(e)}}},l=[R.bind(void 0,w),R.bind(void 0,b),I.bind(void 0,w),I.bind(void 0,b),O.bind(void 0,w),O.bind(void 0,b),L.bind(void 0,0),L.bind(void 0,1),D.bind(void 0,0),D.bind(void 0,1),function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,i),e.pv=e.dpv=M(i,n)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,i),e.fv=M(i,n)},function(e){var r=e.stack,n=e.pv;t.DEBUG&&console.log(e.step,"GPV[]"),r.push(16384*n.x),r.push(16384*n.y)},function(e){var r=e.stack,n=e.fv;t.DEBUG&&console.log(e.step,"GFV[]"),r.push(16384*n.x),r.push(16384*n.y)},function(e){e.fv=e.pv,t.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var r=e.stack,n=r.pop(),i=r.pop(),a=r.pop(),o=r.pop(),s=r.pop(),l=e.z0,u=e.z1,c=l[n],f=l[i],h=u[a],d=u[o],p=e.z2[s];t.DEBUG&&console.log("ISECT[], ",n,i,a,o,s);var m=c.x,v=c.y,g=f.x,y=f.y,x=h.x,b=h.y,w=d.x,_=d.y,M=(m-g)*(b-_)-(v-y)*(x-w),S=m*y-v*g,T=x*_-b*w;p.x=(S*(x-w)-T*(m-g))/M,p.y=(S*(b-_)-T*(v-y))/M},function(e){e.rp0=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP0[]",r),e.zp0=r,r){case 0:e.tZone||A(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP1[]",r),e.zp1=r,r){case 0:e.tZone||A(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP2[]",r),e.zp2=r,r){case 0:e.tZone||A(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZPS[]",r),e.zp0=e.zp1=e.zp2=r,r){case 0:e.tZone||A(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),t.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){t.DEBUG&&console.log(e.step,"RTG[]"),e.round=p},function(e){t.DEBUG&&console.log(e.step,"RTHG[]"),e.round=v},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SMD[]",r),e.minDis=r/64},function(e){t.DEBUG&&console.log(e.step,"ELSE[]"),C(e,!1)},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"JMPR[]",r),e.ip+=r-1},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SCVTCI[]",r),e.cvCutIn=r/64},void 0,void 0,function(e){var r=e.stack;t.DEBUG&&console.log(e.step,"DUP[]"),r.push(r[r.length-1])},N,function(e){t.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"SWAP[]"),r.push(n),r.push(i)},function(e){var r=e.stack;t.DEBUG&&console.log(e.step,"DEPTH[]"),r.push(r.length)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"CINDEX[]",n),r.push(r[r.length-n])},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"MINDEX[]",n),r.push(r.splice(r.length-n,1)[0])},void 0,void 0,void 0,function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"LOOPCALL[]",n,i);var a=e.ip,o=e.prog;e.prog=e.funcs[n];for(var s=0;s<i;s++)u(e),t.DEBUG&&console.log(++e.step,s+1<i?"next loopcall":"done loopcall",s);e.ip=a,e.prog=o},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"CALL[]",r);var n=e.ip,i=e.prog;e.prog=e.funcs[r],u(e),e.ip=n,e.prog=i,t.DEBUG&&console.log(++e.step,"returning from",r)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var r=e.stack,n=e.prog,i=e.ip,a=r.pop(),o=i;for(t.DEBUG&&console.log(e.step,"FDEF[]",a);45!==n[++i];);e.ip=i,e.funcs[a]=n.slice(o+1,i)},void 0,V.bind(void 0,0),V.bind(void 0,1),F.bind(void 0,w),F.bind(void 0,b),B.bind(void 0,0),B.bind(void 0,1),U.bind(void 0,0),U.bind(void 0,1),k.bind(void 0,0),k.bind(void 0,1),function(e){for(var r=e.stack,n=e.loop,i=e.fv,a=r.pop()/64,o=e.z2;n--;){var s=r.pop(),l=o[s];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-n)+": ":"")+"SHPIX[]",s,a),i.setRelative(l,l,a),i.touch(l)}e.loop=1},function(e){for(var r=e.stack,n=e.rp1,i=e.rp2,a=e.loop,o=e.z0[n],s=e.z1[i],l=e.fv,u=e.dpv,c=e.z2;a--;){var f=r.pop(),h=c[f];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"IP[]",f,n,"<->",i),l.interpolate(h,o,s,u),l.touch(h)}e.loop=1},z.bind(void 0,0),z.bind(void 0,1),function(e){for(var r=e.stack,n=e.rp0,i=e.z0[n],a=e.loop,o=e.fv,s=e.pv,l=e.z1;a--;){var u=r.pop(),c=l[u];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"ALIGNRP[]",u),o.setRelative(c,i,0,s),o.touch(c)}e.loop=1},function(e){t.DEBUG&&console.log(e.step,"RTDG[]"),e.round=m},G.bind(void 0,0),G.bind(void 0,1),function(e){var r=e.prog,n=e.ip,i=e.stack,a=r[++n];t.DEBUG&&console.log(e.step,"NPUSHB[]",a);for(var o=0;o<a;o++)i.push(r[++n]);e.ip=n},function(e){var r=e.ip,n=e.prog,i=e.stack,a=n[++r];t.DEBUG&&console.log(e.step,"NPUSHW[]",a);for(var o=0;o<a;o++){var s=n[++r]<<8|n[++r];32768&s&&(s=-(1+(65535^s))),i.push(s)}e.ip=r},function(e){var r=e.stack,n=e.store;n||(n=e.store=[]);var i=r.pop(),a=r.pop();t.DEBUG&&console.log(e.step,"WS",i,a),n[a]=i},function(e){var r=e.stack,n=e.store,i=r.pop();t.DEBUG&&console.log(e.step,"RS",i);var a=n&&n[i]||0;r.push(a)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"WCVTP",n,i),e.cvt[i]=n/64},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"RCVT",n),r.push(64*e.cvt[n])},j.bind(void 0,0),j.bind(void 0,1),void 0,H.bind(void 0,0),H.bind(void 0,1),function(e){t.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){t.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"LT[]",n,i),r.push(i<n?1:0)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"LTEQ[]",n,i),r.push(i<=n?1:0)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"GT[]",n,i),r.push(i>n?1:0)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"GTEQ[]",n,i),r.push(i>=n?1:0)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"EQ[]",n,i),r.push(n===i?1:0)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"NEQ[]",n,i),r.push(n!==i?1:0)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"ODD[]",n),r.push((0,a.default)(n)%2?1:0)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"EVEN[]",n),r.push((0,a.default)(n)%2?0:1)},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"IF[]",r),r||(C(e,!0),t.DEBUG&&console.log(e.step,"EIF[]"))},function(e){t.DEBUG&&console.log(e.step,"EIF[]")},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"AND[]",n,i),r.push(n&&i?1:0)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"OR[]",n,i),r.push(n||i?1:0)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"NOT[]",n),r.push(n?0:1)},W.bind(void 0,1),function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SDB[]",r),e.deltaBase=r},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SDS[]",r),e.deltaShift=Math.pow(.5,r)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"ADD[]",n,i),r.push(i+n)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"SUB[]",n,i),r.push(i-n)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"DIV[]",n,i),r.push(64*i/n)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"MUL[]",n,i),r.push(i*n/64)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"ABS[]",n),r.push(Math.abs(n))},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"NEG[]",n),r.push(-n)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"FLOOR[]",n),r.push(64*Math.floor(n/64))},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"CEILING[]",n),r.push(64*Math.ceil(n/64))},X.bind(void 0,0),X.bind(void 0,1),X.bind(void 0,2),X.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"WCVTF[]",n,i),e.cvt[i]=n*e.ppem/e.font.unitsPerEm},W.bind(void 0,2),W.bind(void 0,3),q.bind(void 0,1),q.bind(void 0,2),q.bind(void 0,3),function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=x;var n=void 0;switch(192&r){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*n},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=x;var n=void 0;switch(192&r){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*n},void 0,void 0,function(e){t.DEBUG&&console.log(e.step,"ROFF[]"),e.round=d},void 0,function(e){t.DEBUG&&console.log(e.step,"RUTG[]"),e.round=g},function(e){t.DEBUG&&console.log(e.step,"RDTG[]"),e.round=y},N,N,void 0,void 0,void 0,void 0,void 0,function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANCTRL[]",r)},Y.bind(void 0,0),Y.bind(void 0,1),function(e){var r=e.stack,n=r.pop(),i=0;t.DEBUG&&console.log(e.step,"GETINFO[]",n),1&n&&(i=35),32&n&&(i|=4096),r.push(i)},void 0,function(e){var r=e.stack,n=r.pop(),i=r.pop(),a=r.pop();t.DEBUG&&console.log(e.step,"ROLL[]"),r.push(i),r.push(n),r.push(a)},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"MAX[]",n,i),r.push(Math.max(i,n))},function(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"MIN[]",n,i),r.push(Math.min(i,n))},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANTYPE[]",r)},function(e){var r=e.stack.pop(),n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"INSTCTRL[]",r,n),r){case 1:return void(e.inhibitGridFit=!!n);case 2:return void(e.ignoreCvt=!!n);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Z.bind(void 0,1),Z.bind(void 0,2),Z.bind(void 0,3),Z.bind(void 0,4),Z.bind(void 0,5),Z.bind(void 0,6),Z.bind(void 0,7),Z.bind(void 0,8),J.bind(void 0,1),J.bind(void 0,2),J.bind(void 0,3),J.bind(void 0,4),J.bind(void 0,5),J.bind(void 0,6),J.bind(void 0,7),J.bind(void 0,8),Q.bind(void 0,0,0,0,0,0),Q.bind(void 0,0,0,0,0,1),Q.bind(void 0,0,0,0,0,2),Q.bind(void 0,0,0,0,0,3),Q.bind(void 0,0,0,0,1,0),Q.bind(void 0,0,0,0,1,1),Q.bind(void 0,0,0,0,1,2),Q.bind(void 0,0,0,0,1,3),Q.bind(void 0,0,0,1,0,0),Q.bind(void 0,0,0,1,0,1),Q.bind(void 0,0,0,1,0,2),Q.bind(void 0,0,0,1,0,3),Q.bind(void 0,0,0,1,1,0),Q.bind(void 0,0,0,1,1,1),Q.bind(void 0,0,0,1,1,2),Q.bind(void 0,0,0,1,1,3),Q.bind(void 0,0,1,0,0,0),Q.bind(void 0,0,1,0,0,1),Q.bind(void 0,0,1,0,0,2),Q.bind(void 0,0,1,0,0,3),Q.bind(void 0,0,1,0,1,0),Q.bind(void 0,0,1,0,1,1),Q.bind(void 0,0,1,0,1,2),Q.bind(void 0,0,1,0,1,3),Q.bind(void 0,0,1,1,0,0),Q.bind(void 0,0,1,1,0,1),Q.bind(void 0,0,1,1,0,2),Q.bind(void 0,0,1,1,0,3),Q.bind(void 0,0,1,1,1,0),Q.bind(void 0,0,1,1,1,1),Q.bind(void 0,0,1,1,1,2),Q.bind(void 0,0,1,1,1,3),Q.bind(void 0,1,0,0,0,0),Q.bind(void 0,1,0,0,0,1),Q.bind(void 0,1,0,0,0,2),Q.bind(void 0,1,0,0,0,3),Q.bind(void 0,1,0,0,1,0),Q.bind(void 0,1,0,0,1,1),Q.bind(void 0,1,0,0,1,2),Q.bind(void 0,1,0,0,1,3),Q.bind(void 0,1,0,1,0,0),Q.bind(void 0,1,0,1,0,1),Q.bind(void 0,1,0,1,0,2),Q.bind(void 0,1,0,1,0,3),Q.bind(void 0,1,0,1,1,0),Q.bind(void 0,1,0,1,1,1),Q.bind(void 0,1,0,1,1,2),Q.bind(void 0,1,0,1,1,3),Q.bind(void 0,1,1,0,0,0),Q.bind(void 0,1,1,0,0,1),Q.bind(void 0,1,1,0,0,2),Q.bind(void 0,1,1,0,0,3),Q.bind(void 0,1,1,0,1,0),Q.bind(void 0,1,1,0,1,1),Q.bind(void 0,1,1,0,1,2),Q.bind(void 0,1,1,0,1,3),Q.bind(void 0,1,1,1,0,0),Q.bind(void 0,1,1,1,0,1),Q.bind(void 0,1,1,1,0,2),Q.bind(void 0,1,1,1,0,3),Q.bind(void 0,1,1,1,1,0),Q.bind(void 0,1,1,1,1,1),Q.bind(void 0,1,1,1,1,2),Q.bind(void 0,1,1,1,1,3)],t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(26),a=(n=i)&&n.__esModule?n:{default:n};function o(e,t){for(var r=0,n=e.length-1;r<=n;){var i=r+n>>>1,a=e[i].tag;if(a===t)return i;a<t?r=i+1:n=i-1}return-r-1}function s(e,t){this.font=e,this.tableName=t}s.prototype={searchTag:o,binSearch:function(e,t){for(var r=0,n=e.length-1;r<=n;){var i=r+n>>>1,a=e[i];if(a===t)return i;a<t?r=i+1:n=i-1}return-r-1},getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,r=0;r<e.scripts.length;r++){var n=e.scripts[r].tag;if("DFLT"===n)return n;"latn"===n&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var r=this.getTable(t);if(r){e=e||"DFLT";var n=r.scripts,i=o(r.scripts,e);if(i>=0)return n[i].script;if(t){var a={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return n.splice(-1-i,0,a),a.script}}},getLangSysTable:function(e,t,r){var n=this.getScriptTable(e,r);if(n){if(!t||"dflt"===t||"DFLT"===t)return n.defaultLangSys;var i=o(n.langSysRecords,t);if(i>=0)return n.langSysRecords[i].langSys;if(r){var a={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return n.langSysRecords.splice(-1-i,0,a),a.langSys}}},getFeatureTable:function(e,t,r,n){var i=this.getLangSysTable(e,t,n);if(i){for(var o=void 0,s=i.featureIndexes,l=this.font.tables[this.tableName].features,u=0;u<s.length;u++)if((o=l[s[u]]).tag===r)return o.feature;if(n){var c=l.length;return a.default.assert(0===c||r>=l[c-1].tag,"Features must be added in alphabetical order."),o={tag:r,feature:{params:0,lookupListIndexes:[]}},l.push(o),s.push(c),o.feature}}},getLookupTables:function(e,t,r,n,i){var a=this.getFeatureTable(e,t,r,i),o=[];if(a){for(var s=void 0,l=a.lookupListIndexes,u=this.font.tables[this.tableName].lookups,c=0;c<l.length;c++)(s=u[l[c]]).lookupType===n&&o.push(s);if(0===o.length&&i){s={lookupType:n,lookupFlag:0,subtables:[],markFilteringSet:void 0};var f=u.length;return u.push(s),l.push(f),[s]}}return o},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],r=e.ranges,n=0;n<r.length;n++)for(var i=r[n],a=i.start,o=i.end,s=a;s<=o;s++)t.push(s);return t}},t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(26)),i=a(r(408));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){i.default.call(this,e,"gsub")}function s(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function l(e,t,r){for(var n=e.subtables,i=0;i<n.length;i++){var a=n[i];if(a.substFormat===t)return a}if(r)return n.push(r),r}o.prototype=i.default.prototype,o.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},o.prototype.getSingle=function(e,t,r){for(var n=[],i=this.getLookupTables(t,r,e,1),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++){var l=o[s],u=this.expandCoverage(l.coverage),c=void 0;if(1===l.substFormat){var f=l.deltaGlyphId;for(c=0;c<u.length;c++){var h=u[c];n.push({sub:h,by:h+f})}}else{var d=l.substitute;for(c=0;c<u.length;c++)n.push({sub:u[c],by:d[c]})}}return n},o.prototype.getAlternates=function(e,t,r){for(var n=[],i=this.getLookupTables(t,r,e,3),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++)for(var l=o[s],u=this.expandCoverage(l.coverage),c=l.alternateSets,f=0;f<u.length;f++)n.push({sub:u[f],by:c[f]});return n},o.prototype.getLigatures=function(e,t,r){for(var n=[],i=this.getLookupTables(t,r,e,4),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++)for(var l=o[s],u=this.expandCoverage(l.coverage),c=l.ligatureSets,f=0;f<u.length;f++)for(var h=u[f],d=c[f],p=0;p<d.length;p++){var m=d[p];n.push({sub:[h].concat(m.components),by:m.ligGlyph})}return n},o.prototype.addSingle=function(e,t,r,i){var a=l(this.getLookupTables(r,i,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});n.default.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var o=t.sub,s=this.binSearch(a.coverage.glyphs,o);s<0&&(s=-1-s,a.coverage.glyphs.splice(s,0,o),a.substitute.splice(s,0,0)),a.substitute[s]=t.by},o.prototype.addAlternate=function(e,t,r,i){var a=l(this.getLookupTables(r,i,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});n.default.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var o=t.sub,s=this.binSearch(a.coverage.glyphs,o);s<0&&(s=-1-s,a.coverage.glyphs.splice(s,0,o),a.alternateSets.splice(s,0,0)),a.alternateSets[s]=t.by},o.prototype.addLigature=function(e,t,r,i){var a=this.getLookupTables(r,i,e,4,!0)[0],o=a.subtables[0];o||(o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},a.subtables[0]=o),n.default.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);var l=t.sub[0],u=t.sub.slice(1),c={ligGlyph:t.by,components:u},f=this.binSearch(o.coverage.glyphs,l);if(f>=0){for(var h=o.ligatureSets[f],d=0;d<h.length;d++)if(s(h[d].components,u))return;h.push(c)}else f=-1-f,o.coverage.glyphs.splice(f,0,l),o.ligatureSets.splice(f,0,[c])},o.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r)}},o.prototype.add=function(e,t,r,n){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,n);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,r,n):this.addAlternate(e,t,r,n);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,n)}},t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(38)),i=s(r(26)),a=s(r(22)),o=s(r(32));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r=(0,n.default)(e),i=256;for(var a in t){var o=parseInt(a);if(o&&!(o<256)){if((0,n.default)(t[a])===r)return o;i<=o&&(i=o+1)}}return t[i]=e,i}function u(e,t,r){var n=l(t.name,r);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:n}]}function c(e,t,r){var n={},i=new a.default.Parser(e,t);return n.tag=i.parseTag(),n.minValue=i.parseFixed(),n.defaultValue=i.parseFixed(),n.maxValue=i.parseFixed(),i.skip("uShort",1),n.name=r[i.parseUShort()]||{},n}function f(e,t,r,n){for(var i=[{name:"nameID_"+e,type:"USHORT",value:l(t.name,n)},{name:"flags_"+e,type:"USHORT",value:0}],a=0;a<r.length;++a){var o=r[a].tag;i.push({name:"axis_"+e+" "+o,type:"FIXED",value:t.coordinates[o]<<16})}return i}function h(e,t,r,n){var i={},o=new a.default.Parser(e,t);i.name=n[o.parseUShort()]||{},o.skip("uShort",1),i.coordinates={};for(var s=0;s<r.length;++s)i.coordinates[r[s].tag]=o.parseFixed();return i}t.default={make:function(e,t){var r=new o.default.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);r.offsetToData=r.sizeOf();for(var n=0;n<e.axes.length;n++)r.fields=r.fields.concat(u(n,e.axes[n],t));for(var i=0;i<e.instances.length;i++)r.fields=r.fields.concat(f(i,e.instances[i],e.axes,t));return r},parse:function(e,t,r){var n=new a.default.Parser(e,t),o=n.parseULong();i.default.argument(65536===o,"Unsupported fvar table version.");var s=n.parseOffset16();n.skip("uShort",1);for(var l=n.parseUShort(),u=n.parseUShort(),f=n.parseUShort(),d=n.parseUShort(),p=[],m=0;m<l;m++)p.push(c(e,t+s+m*u,r));for(var v=[],g=t+s+l*u,y=0;y<f;y++)v.push(h(e,g+y*d,p,r));return{axes:p,instances:v}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(26)),i=a(r(22));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var r=new i.default.Parser(e,t),n=r.parseUShort(),a=[],o=0;o<n;o++)a[r.parseTag()]={offset:r.parseUShort()};return a}function s(e,t){var r=new i.default.Parser(e,t),n=r.parseUShort();if(1===n){var a=r.parseUShort(),o=r.parseUShort(),s=r.parseUShortList(o);return function(e){return s[e-a]||0}}if(2===n){for(var l=r.parseUShort(),u=[],c=[],f=[],h=0;h<l;h++)u[h]=r.parseUShort(),c[h]=r.parseUShort(),f[h]=r.parseUShort();return function(e){for(var t=0,r=u.length-1;t<r;){var n=t+r+1>>1;e<u[n]?r=n-1:t=n}return u[t]<=e&&e<=c[t]&&f[t]||0}}}function l(e,t){var r=new i.default.Parser(e,t),n=r.parseUShort(),a=function(e,t){var r=new i.default.Parser(e,t),n=r.parseUShort(),a=r.parseUShort();if(1===n)return r.parseUShortList(a);if(2===n){for(var o=[];a--;)for(var s=r.parseUShort(),l=r.parseUShort(),u=r.parseUShort(),c=s;c<=l;c++)o[u++]=c;return o}}(e,t+r.parseUShort()),o=r.parseUShort(),l=r.parseUShort(),u=void 0;if(4===o&&0===l){var c={};if(1===n){for(var f=r.parseUShort(),h=[],d=r.parseOffset16List(f),p=0;p<f;p++){var m=d[p],v=c[m];if(!v){v={},r.relativeOffset=m;for(var g=r.parseUShort();g--;){var y=r.parseUShort();o&&(u=r.parseShort()),l&&r.parseShort(),v[y]=u}}h[a[p]]=v}return function(e,t){var r=h[e];if(r)return r[t]}}if(2===n){for(var x=r.parseUShort(),b=r.parseUShort(),w=r.parseUShort(),_=r.parseUShort(),M=s(e,t+x),S=s(e,t+b),T=[],E=0;E<w;E++)for(var P=T[E]=[],A=0;A<_;A++)o&&(u=r.parseShort()),l&&r.parseShort(),P[A]=u;for(var C={},R=0;R<a.length;R++)C[a[R]]=1;return function(e,t){if(C[e]){var r=M(e),n=S(t),i=T[r];return i?i[n]:void 0}}}}}function u(e,t){var r=new i.default.Parser(e,t),n=r.parseUShort(),a=r.parseUShort(),o=16&a,s=r.parseUShort(),u=r.parseOffset16List(s),c={lookupType:n,lookupFlag:a,markFilteringSet:o?r.parseUShort():-1};if(2===n){for(var f=[],h=0;h<s;h++){var d=l(e,t+u[h]);d&&f.push(d)}c.getKerningValue=function(e,t){for(var r=f.length;r--;){var n=f[r](e,t);if(void 0!==n)return n}return 0}}return c}t.default={parse:function(e,t,r){var a=new i.default.Parser(e,t),s=a.parseFixed();n.default.argument(1===s,"Unsupported GPOS table version."),o(e,t+a.parseUShort()),o(e,t+a.parseUShort());var l=a.parseUShort();a.relativeOffset=l;for(var c=a.parseUShort(),f=a.parseOffset16List(c),h=t+l,d=0;d<c;d++){var p=u(e,h+f[d]);2!==p.lookupType||r.getGposKerningValue||(r.getGposKerningValue=p.getKerningValue)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(26)),i=a(r(22));function a(e){return e&&e.__esModule?e:{default:e}}t.default={parse:function(e,t){var r=new i.default.Parser(e,t),a=r.parseUShort();if(0===a)return function(e){var t={};e.skip("uShort");var r=e.parseUShort();n.default.argument(0===r,"Unsupported kern sub-table version."),e.skip("uShort",2);var i=e.parseUShort();e.skip("uShort",3);for(var a=0;a<i;a+=1){var o=e.parseUShort(),s=e.parseUShort(),l=e.parseShort();t[o+","+s]=l}return t}(r);if(1===a)return function(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var r=255&e.parseUShort();if(e.skip("uShort"),0===r){var n=e.parseUShort();e.skip("uShort",3);for(var i=0;i<n;i+=1){var a=e.parseUShort(),o=e.parseUShort(),s=e.parseShort();t[a+","+o]=s}}return t}(r);throw new Error("Unsupported kern table version ("+a+").")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(22),a=(n=i)&&n.__esModule?n:{default:n};t.default={parse:function(e,t,r,n){for(var i=new a.default.Parser(e,t),o=n?i.parseUShort:i.parseULong,s=[],l=0;l<r+1;l+=1){var u=o.call(i);n&&(u*=2),s.push(u)}return s}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(r(6)),i=y(r(26)),a=y(r(32)),o=y(r(265)),s=y(r(264)),l=y(r(268)),u=y(r(269)),c=y(r(270)),f=y(r(271)),h=y(r(272)),d=y(r(274)),p=y(r(275)),m=y(r(276)),v=y(r(267)),g=y(r(273));function y(e){return e&&e.__esModule?e:{default:e}}function x(e){return Math.log(e)/Math.log(2)|0}function b(e){for(;e.length%4!=0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%=Math.pow(2,32)}function w(e,t,r,n){return new a.default.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==n?n:0}])}function _(e){var t=new a.default.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var r=Math.pow(2,x(t.numTables));t.searchRange=16*r,t.entrySelector=x(r),t.rangeShift=16*t.numTables-t.searchRange;for(var n=[],o=[],s=t.sizeOf()+w().sizeOf()*t.numTables;s%4!=0;)s+=1,o.push({name:"padding",type:"BYTE",value:0});for(var l=0;l<e.length;l+=1){var u=e[l];i.default.argument(4===u.tableName.length,"Table name"+u.tableName+" is invalid.");var c=u.sizeOf(),f=w(u.tableName,b(u.encode()),s,c);for(n.push({name:f.tag+" Table Record",type:"RECORD",value:f}),o.push({name:u.tableName+" table",type:"RECORD",value:u}),s+=c,i.default.argument(!isNaN(s),"Something went wrong calculating the offset.");s%4!=0;)s+=1,o.push({name:"padding",type:"BYTE",value:0})}return n.sort(function(e,t){return e.value.tag>t.value.tag?1:-1}),t.fields=t.fields.concat(n),t.fields=t.fields.concat(o),t}function M(e,t,r){for(var n=0;n<t.length;n+=1){var i=e.charToGlyphIndex(t[n]);if(i>0)return e.glyphs.get(i).getMetrics()}return r}t.default={make:_,fontToTable:function(e){for(var t=[],r=[],i=[],a=[],y=[],x=[],w=[],S=void 0,T=0,E=0,P=0,A=0,C=0,R=0;R<e.glyphs.length;R+=1){var I=e.glyphs.get(R),O=0|I.unicode;if(isNaN(I.advanceWidth))throw new Error("Glyph "+I.name+" ("+R+"): advanceWidth is not a number.");(S>O||void 0===S)&&O>0&&(S=O),T<O&&(T=O);var L=p.default.getUnicodeRange(O);if(L<32)E|=1<<L;else if(L<64)P|=1<<L-32;else if(L<96)A|=1<<L-64;else{if(!(L<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");C|=1<<L-96}if(".notdef"!==I.name){var D=I.getMetrics();t.push(D.xMin),r.push(D.yMin),i.push(D.xMax),a.push(D.yMax),x.push(D.leftSideBearing),w.push(D.rightSideBearing),y.push(I.advanceWidth)}}var N={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,i),yMax:Math.max.apply(null,a),advanceWidthMax:Math.max.apply(null,y),advanceWidthAvg:function(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}(y),minLeftSideBearing:Math.min.apply(null,x),maxLeftSideBearing:Math.max.apply(null,x),minRightSideBearing:Math.min.apply(null,w)};N.ascender=e.ascender,N.descender=e.descender;var V=l.default.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:N.xMin,yMin:N.yMin,xMax:N.xMax,yMax:N.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),F=u.default.make({ascender:N.ascender,descender:N.descender,advanceWidthMax:N.advanceWidthMax,minLeftSideBearing:N.minLeftSideBearing,minRightSideBearing:N.minRightSideBearing,xMaxExtent:N.maxLeftSideBearing+(N.xMax-N.xMin),numberOfHMetrics:e.glyphs.length}),B=h.default.make(e.glyphs.length),U=p.default.make({xAvgCharWidth:Math.round(N.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:S,usLastCharIndex:T,ulUnicodeRange1:E,ulUnicodeRange2:P,ulUnicodeRange3:A,ulUnicodeRange4:C,fsSelection:e.tables.os2.fsSelection,sTypoAscender:N.ascender,sTypoDescender:N.descender,sTypoLineGap:0,usWinAscent:N.yMax,usWinDescent:Math.abs(N.yMin),ulCodePageRange1:1,sxHeight:M(e,"xyvw",{yMax:Math.round(N.ascender/2)}).yMax,sCapHeight:M(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",N).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),k=c.default.make(e.glyphs),z=o.default.make(e.glyphs),G=e.getEnglishName("fontFamily"),j=e.getEnglishName("fontSubfamily"),H=G+" "+j,W=e.getEnglishName("postScriptName");W||(W=G.replace(/\s/g,"")+"-"+j);var X={};for(var q in e.names)X[q]=e.names[q];X.uniqueID||(X.uniqueID={en:e.getEnglishName("manufacturer")+":"+H}),X.postScriptName||(X.postScriptName={en:W}),X.preferredFamily||(X.preferredFamily=e.names.fontFamily),X.preferredSubfamily||(X.preferredSubfamily=e.names.fontSubfamily);var Y=[],Z=d.default.make(X,Y),J=Y.length>0?f.default.make(Y):void 0,Q=m.default.make(),K=s.default.make(e.glyphs,{version:e.getEnglishName("version"),fullName:H,familyName:G,weightName:j,postScriptName:W,unitsPerEm:e.unitsPerEm,fontBBox:[0,N.yMin,N.ascender,N.advanceWidthMax]}),$=e.metas&&(0,n.default)(e.metas).length>0?g.default.make(e.metas):void 0,ee=[V,F,B,U,Z,z,Q,K,k];J&&ee.push(J),e.tables.gsub&&ee.push(v.default.make(e.tables.gsub)),$&&ee.push($);for(var te=_(ee),re=b(te.encode()),ne=te.fields,ie=!1,ae=0;ae<ne.length;ae+=1)if("head table"===ne[ae].name){ne[ae].value.checkSumAdjustment=2981146554-re,ie=!0;break}if(!ie)throw new Error("Could not find head table with checkSum to adjust.");return te},computeCheckSum:b}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(108));t.getAnnotationProperties=function(e,t){var r=(0,o.getRect)(e),i=t.position(e),a=i.position,s=i.normal,c=i.alpha;if(!a)return!1;var f=r.width*a.x,h=r.height*a.y,d=!(f<0||f>r.width-24||h<0||h>r.height-24)&&function(e,t){if(!t.visible)return!1;var r=(0,u.getSceneId)(e);if("Enable"!==(0,l.get)(e,{id:r,plug:"Properties",property:"hierarchyVisibility"}))return t.visible;var n=(0,l.find)(e,{id:t.id,parent:!0}),i=(0,l.find)(e,{from:r,type:"Objects",shallow:!0});for(;n&&n!==i;){var a=(0,l.get)(e,{id:n,plug:"Properties",property:"visible"});if(!1===a)return!1;n=(0,l.find)(e,{id:n,parent:!0})}return!0}(e,t);return(0,n.default)({},t.annotation,{id:t.id,alpha:c,normal:s,position:a,top:r.height-h,right:r.width-f,bottom:h,left:f,visible:d})},t.default=function(e){var t=(0,o.getRect)(e);return function(r){var n=r.id,a=r.text,o=r.left,u=r.bottom,d=r.visible,p=r.position,m=(r.normal,r.alpha),v=r.multiline,g=r.customCss,y=r.image;if(void 0===p)return(0,i.default)("span");var x="Image"===r.format&&y&&(0,c.getImageUrl)(e,y.originalAsset),b=(0,s.getAnnotationProperties)(e,n,r.open),w=b.get("open"),_=b.get("pinned"),M=p.y>.5?"top":"bottom",S=p.x<.5?"left":"right";function T(t){t.target&&"A"===t.target.nodeName?t.target.target="_blank":(t.preventDefault(),e.dispatch((0,s.setAnnotationProperties)(n,{open:!_||!w,pinned:!_})))}var E=[(0,i.default)("div.annotation-icon",{key:"icon",class:{"annotation-open":w,"annotation-closed":!w}})];if(w&&x){return(0,i.default)("div",{key:"image"+n,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3},on:{click:T}},[(0,i.default)("div",{style:{position:"absolute",top:"2em",right:"2em",width:"4em"}},[(0,h.cross)({})]),(0,i.default)("img",{key:"image",style:{maxWidth:"100%",flex:"0 0 auto"},attrs:{src:x}})])}if(w&&!x){var P={maxHeight:t.height/2-50+"px",width:Math.min(t.width/2-50,450)+"px"},A=a.replace(/IMAGENODEURL\:\"([^\"]*)\"/g,function(t,r){var n=(0,l.get)(e,{name:r,evalPlug:"Image",type:"Image"});return n?(0,c.getImageUrl)(e,n.originalAsset):""});v&&(A=A.replace(/\<br\>/g,"\n\n")),A=(0,f.default)(A),E.push((0,i.default)("div.annotation.annotation-"+S+".annotation-"+M+".annotation-"+n,{style:{delayed:{opacity:1},remove:{opacity:0}}},["left"===S&&(0,i.default)("div.arrow.arrow-"+S+".arrow-"+M,{key:S}),(0,i.default)("div.annotation-text",{key:"text",style:P,on:{click:T},props:{innerHTML:A}}),"right"===S&&(0,i.default)("div.arrow.arrow-"+S+".arrow-"+M,{key:S})].filter(function(e){return!!e})))}return g&&E.push((0,i.default)("style",{props:{innerHTML:g.replace(/ID/g,n)}})),(0,i.default)("div",{key:n,style:{visibility:d?"visible":"hidden",opacity:m,position:"absolute",left:Math.round(o)+"px",bottom:Math.round(u)+"px"},on:{click:T,mouseover:function(t){_||x||e.dispatch((0,s.setAnnotationProperties)(n,{open:!0}))},mouseout:function(t){_||x||e.dispatch((0,s.setAnnotationProperties)(n,{open:!1}))}}},E)}};var i=d(r(37)),a=r(36),o=r(8),s=r(140),l=r(4),u=r(19),c=r(23),f=d(r(838)),h=r(110);function d(e){return e&&e.__esModule?e:{default:e}}f.default.setOptions({sanitize:!0});(0,a.Map)({open:!1,pinned:!1})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(6));t.default=function(e){var t=e.getTranslator(),r=(0,l.isSceneRendered)(e),c=(0,u.getCustomAnnotationFunction)(e),h=(0,u.getCustomOverlayFunction)(e),d=t?t.getAnnotations():{},p=(0,n.default)(d).map(function(t){return(0,o.getAnnotationProperties)(e,d[t])}).filter(function(e){return!!e});function m(t){var r=(0,l.isSceneLoaded)(e);c&&r&&p.forEach(function(e){return c(e,t.elm)}),h&&r&&h(t.elm)}var v=c||h?[(0,i.default)("div.annotations",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},hook:{insert:m,update:m}})]:p.map((0,s.default)(e));return(0,i.default)("div",{style:{position:"relative",display:r?"block":"none"},on:{contextmenu:f},hook:{update:function(e){return t&&t.attach(e.elm)},insert:function(e){function t(){var t=e.getTranslator();t&&("safari"===a.default.name?setTimeout(function(){t.resize()},50):t.resize())}return function(e){return window.addEventListener("resize",t)}}(e)}},v)};var i=c(r(37)),a=c(r(31)),o=r(415),s=c(o),l=r(19),u=r(140);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){e.preventDefault()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)("div",{key:"error",style:i.default.absoluteMaxCentered},[(0,n.default)("div",{style:{flex:"0 0 100%"}},(0,a.getErrors)(e).map(function(e){return(0,n.default)("h2",e)}).toArray())])};var n=o(r(37)),i=o(r(182)),a=r(19);function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,l.getScenePhase)(e),r=(0,l.getSceneId)(e);t===l.SCENE_PHASES.RENDERING?e.dispatch((0,l.markPreloaded)(r)):t===l.SCENE_PHASES.PRELOADED&&e.dispatch((0,l.markRenderedScene)(r));return(0,a.default)("canvas",{style:{position:"absolute",left:"0",top:"0",right:"0",bottom:"0",pointerEvents:"none"},hook:{insert:function(e){function t(e){return function(t){var r=e.elm.parentElement.getBoundingClientRect();e.elm.width=r.width,e.elm.height=r.height}}return function(r){e.dispatch((0,s.setCommandOptions)("imageRotate",{canvas:r.elm})),window.addEventListener("resize",t(r)),t(r)(),e.dispatch((0,o.setPlayerElement)(r.elm.parentElement,r.elm))}}(e)}})};var n,i=r(37),a=(n=i)&&n.__esModule?n:{default:n},o=r(8),s=r(25),l=r(19)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(6));t.hoverStyle=h,t.default=function(e){var t=(0,s.getCommands)(e,"playerTools"),r=(0,o.getActiveColor)(e);var c=[h(e,"div.claraplayer"),(0,i.default)("ul.tools",{style:{position:"relative",bottom:"0",left:"0",listStyleType:"none",padding:"0 5px",margin:"0",zIndex:(0,o.isVRMode)(e)?2147483647:"inherit"}},[(0,i.default)("li",[a.glowFilter()])].concat((0,n.default)(t).map(function(n){var l,u=t[n],c=u.isActive?u.isActive(e):u.active,f=u.active&&u.activeLabel?u.activeLabel:u.label,h=a[u.options.icon||n],d=[];return"function"==typeof h?d.push(h({width:34,height:34,title:f},{active:c,activeColor:r})):d.push((0,i.default)("span",{style:{color:c?r:"#fff",textShadow:"1px 1px 1px #333",position:"relative",top:"10px"}},f)),"zoom"===n&&u.options.slider?(0,i.default)("li"):(0,i.default)("li"+(c?".active":""),{attrs:{title:f},on:{click:(l=n,function(t){e.dispatch((0,s.runCommand)(l));var r=(0,o.getCanvasElement)(e);r&&r.focus()})},style:{cursor:"pointer",float:"left",borderRadius:"5px",padding:"5px",boxSizing:"border-box",pointerEvents:"auto"}},d)})))],f=(0,l.default)(e);f&&c.push(f);t.zoom&&t.zoom.options.slider&&c.push((0,u.default)(e));return(0,i.default)("span",{style:{position:"absolute",left:"5px",right:"5px",bottom:"5px",display:"flex",flexWrap:"nowrap",height:"54px",pointerEvents:"none"}},c)};var i=c(r(37)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(110)),o=r(8),s=r(25),l=c(r(423)),u=c(r(426));function c(e){return e&&e.__esModule?e:{default:e}}var f=!!("ontouchstart"in window)||window.navigator.msMaxTouchPoints>0;function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=(0,o.getHoverColor)(e),n=f?"":"\n"+t+" ul.tools li:not(.active):hover svg path {\n  fill: "+r+";\n}\n";return(0,i.default)("style",{props:{innerHTML:n}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){var i={width:"0",height:"100%",position:"absolute",left:t+"%",top:"0",pointerEvents:"auto",cursor:"pointer"},o={boxSizing:"border-box",position:"absolute",zIndex:"1070",display:"block",visibility:"visible",fontSize:"12px",fontWeight:"normal",lineHeight:"1.4",top:"-32px",left:"-25px",width:"50px",height:"22px",marginTop:"-3px",padding:"5px 0",opacity:"1"};n||(o.opacity="0",o.transition="opacity 0.15s linear");function s(e){e.stopPropagation()}return(0,a.default)("div.marker",{style:i,on:{mousedown:s,touchstart:s}},[(0,a.default)("div.tooltip",{style:o},[(0,a.default)("div.tooltip-arrow",{style:{boxSizing:"border-box",position:"absolute",width:"0",height:"0",bottom:"-10px",left:"50%",marginLeft:"-5px",borderWidth:"5px 5px 0",borderTopColor:"#000000",borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderStyle:"solid"}}),(0,a.default)("div.tooltip-inner",{style:{maxWidth:"200px",padding:"3px 8px",color:"#ffffff",textAlign:"center",textDecoration:"none",backgroundColor:"#000000",borderRadius:"4px",boxShadow:"#000 0 0 5px",margin:"0 auto",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"}},(r*t/1e5).toFixed(1))])])};var n,i=r(37),a=(n=i)&&n.__esModule?n:{default:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=A(r(2));t.default=function(e,t){var r=t.isFlex,i=t.isRelative,o=t.hasWebGL,s=(0,w.isSceneRendered)(e),l=(0,_.getConfigurators)(e),u=(0,x.getRenderingMode)(e)===x.RENDER_MODES.nowebgl,c=e.getIn(["sceneIO","id"]),M=!(!c||s&&!u||!(0,x.shouldDisplayThumbnail)(e))&&(0,x.getThumbnailURL)(e,c),E=[],A=e.getIn(["player","fullscreenBackgroundColor"]),R=(0,n.default)({},d.default.player,{backgroundImage:M?"url("+M+")":"none",backgroundRepeat:"no-repeat",backgroundSize:"auto 100%",backgroundPosition:"center",position:r||i?"absolute":"relative",boxSizing:"border-box",backgroundColor:(0,x.isFullscreen)(e)?A:"transparent",overflow:"hidden"});if((0,w.numErrors)(e))E.push((0,p.default)(e));else if(E.push(u?(0,h.default)(e):(0,f.default)(e,"player")),s){E.push((0,m.default)(e));var I=(0,b.get)(e,{scene:!0,evalPlug:"Player"});if(I.showThreekitLogo){var O=(0,x.getRect)(e),L=O.width<450,D={display:"block",position:"absolute",right:"0.5em",width:"15em",height:"auto"};L?D.top="0em":D.bottom="0em",E.push((0,a.default)("a",{attrs:{target:"_blank",href:"https://threekit.com/"}},[(0,P.threekit)(D)]))}(0,x.shouldDisplayVrSettings)(e)?E.push((0,g.default)(e)):E.push(""),l.forEach(function(t){var r=t.form,n=t.el,i=t.panel,o=t.id;if(r){var s=(0,_.getForm)(e,r,{id:o,fieldType:"all"});E.push((0,v.default)(e,s)),n&&(n.classList&&n.classList.add("clara"),C(e,n,s,!0,o)),i&&E.push((0,a.default)("div.configurator.clara",{hook:{update:function(t){var r=t.elm;C(e,r,s,!1,o)},insert:function(t){var r=t.elm;C(e,r,s,!1,o)}}},""))}})}else(o||u)&&E.push((0,y.default)(e));return(0,a.default)("div.claraplayer",{style:R,hook:{insert:function(e,t){return function(r){if([["webkitfullscreenchange","webkitIsFullScreen"],["mozfullscreenchange","mozFullScreen"],["MSFullscreenChange","msFullscreenElement"]].forEach(function(t){document.addEventListener(t[0],function(){e.dispatch((0,x.setFullscreen)(!!document[t[1]]))})}),t){var n=(0,S.initManipulators)(e,null,r.elm);n.resize(r.elm.getBoundingClientRect()),e.dispatch((0,T.setManipulators)(n)),(0,T.updateManipulatorsTools)(e)}}}(e,u)}},E)};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(373)),a=A(r(37)),o=A(r(376)),s=A(r(378)),l=A(r(375)),u=A(r(379)),c=A(r(377)),f=A(r(416)),h=A(r(418)),d=A(r(182)),p=A(r(417)),m=A(r(419)),v=A(r(424)),g=A(r(425)),y=A(r(422)),x=r(8),b=r(4),w=r(19),_=r(74),M=r(184),S=r(300),T=r(25);r(856);var E,P=r(110);function A(e){return e&&e.__esModule?e:{default:e}}function C(e,t,r,n,i){E?E(e,t,r,n,i):e.dispatch((0,M.load)("configuratorui")).then(function(e){return E=e,e})}i.init([o.default,s.default,l.default,u.default,c.default])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(108));t.circleProgress=g,t.linearProgress=y,t.noProgress=x,t.default=function(e){var t=(0,o.loadingProgress)(e),r=(0,a.getProgressBar)(e);return f(e,t),(b[r]||g)(e,t)};var i=l(r(37)),a=r(8),o=r(19),s=l(r(182));function l(e){return e&&e.__esModule?e:{default:e}}var u,c,f="undefined"==typeof performace?function(){}:function(e,t){u&&c||(u||(u=(new Date).getTime()-performance.timing.navigationStart),t<1||(c=(new Date).getTime()-performance.timing.navigationStart,console.log("Page loaded in "+u+"ms and rendered in "+c+"ms")))};var h={flex:"0 0 25%"},d=85*Math.PI*2,p={r:85,cx:100,cy:100,fill:"transparent","stroke-dasharray":d,"stroke-dashoffset":"0","stroke-width":"1em",stroke:"#eee"},m={r:85,cx:100,cy:100,fill:"transparent",stroke:"#646766",transition:"stroke-dashoffset 1s linear","stroke-width":"1em","stroke-dashoffset":d,"stroke-dasharray":d},v={height:"100%",width:"100%",viewport:"0 0 100 100",viewBox:"0 0 200 200"};function g(e,t){var r=d*(1-t);return(0,i.default)("div",{style:(0,n.default)({},s.default.absoluteMaxCentered,{backgroundColor:"transparent",boxSizing:"border-box"})},[(0,i.default)("div",{style:h},[(0,i.default)("svg",{attrs:v},[(0,i.default)("circle",{attrs:p}),(0,i.default)("circle",{props:{id:"bar"},attrs:(0,n.default)({},m,{"stroke-dashoffset":r})})])])])}function y(e,t){return(0,i.default)("div",{style:{position:"absolute",left:"0",right:"0",bottom:"0",height:"4px",backgroundColor:"transparent",boxSizing:"border-box"}},[(0,i.default)("div",{style:{width:100*t+"%",backgroundImage:"linear-gradient(to bottom, #0b1a24 0%, #88b9d9 100%)",height:"100%"}},[])])}function x(e){return(0,i.default)("div","")}var b={default:g,circle:g,line:y,none:x}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.getActiveColor)(e),r=(0,o.getHoverColor)(e),l={width:34,height:34,title:"play"},h={active:!1,activeColor:t},d=(0,s.getTimelineAnimation)(e);if(!d)return null;var p=d.start,m=d.duration/Math.abs(d.playSpeed),v=100*Math.max(Math.min(((0,s.getTime)(e)-p)/m,1),0),g={backgroundColor:t,width:"calc("+v+"% - 2px)",height:"6px",position:"absolute",left:"1px",top:"1px",cursor:"pointer"},y="\n    div.claraplayer div div svg:hover path {\n    fill: "+r+";\n  }";function x(t){f=!0,c&&window.clearTimeout(c),c=window.setTimeout(function(){f=!1,e.dispatch({type:"POKE"})},2e3),null!==u&&(window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",b),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",b));var r=!!t.touches,n=r?t.touches[0].clientX:t.clientX,i="ruler"===t.target.className?t.target:t.target.parentNode,a=i.getBoundingClientRect(),o=(n-a.left)/a.width*m+p;e.dispatch((0,s.setTime)(o)),u=function(t,r){var n=t.width,i=t.left;return function(t){f=!0,c&&window.clearTimeout(c),c=window.setTimeout(function(){f=!1,e.dispatch({type:"POKE"})},2e3);var a=r?t.touches[0].pageX:t.pageX,o=Math.max(Math.min((a-i)/n,1),0),l=o*m+p;e.dispatch((0,s.setTime)(l))}}(a,r),r?(window.addEventListener("touchmove",u),window.addEventListener("touchend",b)):(window.addEventListener("mousemove",u),window.addEventListener("mouseup",b))}function b(e){window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",b),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",b),u=null}var w=(0,s.isPlaying)(e)?(0,i.pause)(l,h):(0,i.play)(l,h),_=(0,s.isPlaying)(e)?function(){return e.dispatch((0,s.stopPlaying)())}:function(){return e.dispatch((0,s.startPlaying)())};return(0,n.default)("div",{style:{flex:"1 1 auto",position:"relative",bottom:"0",right:"0",borderRadius:"5px",padding:"0 20px",pointerEvents:"auto"}},[(0,n.default)("style",{props:{innerHTML:y}}),(0,n.default)("div.ruler",{style:{boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, 0.2)",border:"1px solid #ccc",position:"relative",top:"17px",left:"56px",height:"10px",width:"calc(100% - 55px)",cursor:"pointer"},on:{mousedown:x,touchstart:x}},[(0,n.default)("div.played",{style:g}),(0,a.default)(e,v,m,f)]),(0,n.default)("div",{style:{position:"relative",display:"inline-block",verticalAlign:"middle",top:"-5px",cursor:"pointer"},on:{click:_}},[w])])};var n=l(r(37)),i=r(110),a=l(r(420)),o=r(8),s=r(68);function l(e){return e&&e.__esModule?e:{default:e}}var u=null,c=null,f=!1},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(108));t.default=function(e,t){var r=(0,a.getProductTour)(e);if(r)return p(e,r,t);if(!1!==r&&t)for(var n=0;n<t.fields.length;n++){var o=t.fields[n];if("Product Tour"===o.displayAs)return p(e,o.attribute,t)}return(0,i.default)("div",{style:{pointerEvents:"none"}})};var i=o(r(37)),a=r(74);function o(e){return e&&e.__esModule?e:{default:e}}var s=0,l={left:"10px"},u={right:"10px"},c={position:"absolute",top:"50%",height:"50px",width:"50px",borderRadius:"50%",backgroundColor:"rgba(100, 100, 100, 0.6)",cursor:"pointer",pointerEvents:"auto",marginTop:"-25px"},f={position:"absolute",top:"13px",width:0,height:0,borderStyle:"solid",outline:"none"},h={borderWidth:"12px 24px 12px 0",borderColor:"transparent white transparent transparent"},d={borderWidth:"12px 0 12px 24px",borderColor:"transparent transparent transparent white"},p=function(e,t,r){var o=(0,a.getFormState)(e,{id:r.nodeId}),p=o&&o.optionsVisible&&o.optionsVisible[t.id],m=t.values||[];p&&(m=m.filter(function(e){return p[e]}));var v=function(r){return function(){(s=((s=m.indexOf((0,a.getConfiguration)(e,{all:!0})[t.name])||0)+r)%m.length)<0&&(s=m.length-1),e.dispatch((0,a.executeAttribute)(t.name,m[s]))}},g=(0,n.default)({},c,l),y=(0,n.default)({},f,h,l),x=(0,n.default)({},c,u),b=(0,n.default)({},f,d,u);return(0,i.default)("div",{style:{height:"100%",width:"100%",pointerEvents:"none"}},[(0,i.default)("div",{style:g,on:{click:v(-1)}},[(0,i.default)("div",{style:y})]),(0,i.default)("div",{style:x,on:{click:v(1)}},[(0,i.default)("div",{style:b})])])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(108)),i=u(r(320));t.default=function(e){var t=b(),r=1.1*_>w,i=!0;w&&_&&r&&(i=i&&w>M);var u=r?f:h;function T(e,t,r,i,o){for(var s=[],l=t;l<=r;l++)s.push((0,a.default)("option",{attrs:{selected:l===o},style:p},l+""));return(0,a.default)("div",{style:{margin:"10px"}},[(0,a.default)("select",{style:(0,n.default)({},p,{width:"12vw",height:"42px",backgroundColor:"#d6d6d6"}),on:{change:e}},s),(0,a.default)("p",{style:(0,n.default)({},p,{display:"inline",marginLeft:"10px"})},i)])}return(0,a.default)("div",{style:c,hook:{insert:function(e){return S(e)},update:function(e,t){return S(t)}}},[(0,a.default)("div",{style:(0,n.default)({},u,{flex:2})},[(0,a.default)("div",{style:f},[(0,a.default)("p",{style:p},"Put on your headset."),(0,a.default)("div",{style:{position:"relative",width:"24vw",paddingBottom:"24vw"}},[(0,l.vrHeadSet)({},v)])]),i?(0,a.default)("div",{style:f},[(0,a.default)("p",{style:p},"Enter your height:"),(0,a.default)("div",{style:{position:"relative",width:"38vw",paddingBottom:"24vw"}},[(0,a.default)("div",{style:v},[(0,a.default)("div",{style:(0,n.default)({},f,{alignItems:"flex-start"})},[T(function(e){return t=Number(e.target.value),void(y=t);var t},4,9,"Feet",t.userHeightFeet),T(function(e){return t=Number(e.target.value),void(x=t);var t},0,11,"Inches",t.userHeightInches)])])])]):""]),(0,a.default)("div",{style:d},[(0,a.default)("div",{style:g},[(0,a.default)("div",{style:(0,n.default)({},m,{backgroundColor:"transparent",cursor:"none",display:"flex",alignItems:"flex-end"})},[(0,a.default)("a",{style:{color:"black",bottom:"0",marginLeft:"10px"},on:{click:function(){e.dispatch((0,o.deactivateCommand)("vrSettings")),e.dispatch((0,s.displayVrSettings)(!1))}}},"Cancel")])]),(0,a.default)("div",{style:g},[r?(0,a.default)("div",{style:{flex:1}}):"",(0,a.default)("button",{style:m,on:{click:function(){e.dispatch((0,o.setCommandOptions)("vrMode",b())),e.dispatch((0,o.activateCommand)("vrMode")),e.dispatch((0,s.displayVrSettings)(!1))}}},"Enter VR")]),(0,a.default)("div",{style:g})])])};var a=u(r(37)),o=r(25),s=r(8),l=r(110);function u(e){return e&&e.__esModule?e:{default:e}}var c={position:"absolute",display:"flex",flexDirection:"column",left:"0",top:"0",height:"100%",width:"100%",backgroundColor:"#98989a",zIndex:i.default},f={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",flex:1,width:"100%",height:"100%"},h={display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",flex:1,height:"100%"},d={flex:1,display:"flex",flexDirection:"row",alignItems:"center",height:"100%",position:"relative"},p={fontFamily:"sans-serif",color:"#000000",fontSize:"20px"},m=(0,n.default)({},p,{color:"lightgray",flex:1,backgroundColor:"black",backgroundRepeat:"no-repeat",borderRadius:"8px",border:"none",cursor:"pointer",overflow:"hidden",outline:"none",width:"100%",height:"100%"}),v={position:"absolute",top:"0",left:"0",bottom:"0",right:"0",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row"},g={height:"80%",width:"100%",display:"flex",flexDirection:"column",flex:1,alignContent:"center",justifyContent:"center"},y=null,x=null;function b(){return{userHeightFeet:null===y?5:Number(y),userHeightInches:null===x?11:Number(x)}}var w=0,_=0,M=350;function S(e){var t=e.elm.getBoundingClientRect(),r=t.width,n=t.height;w=r,_=n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(r(654));t.default=function(e){var t=(0,c.getCommands)(e,"playerTools").zoom.options.slider,r=t.minZoom,n=t.maxZoom;g&&x===r&&b===n||(x="number"==typeof r&&r<=1?r:.1,b="number"==typeof n&&n>=1?n:10,g=d(x),y=d(b));var f=(0,a.getCamera)(e),w=(0,o.getWorldTransform)(e,f),_=function(t){var r=h(10,t.target.valueAsNumber),n=v/r;(0,u.updateZoom)(e,n,f,w),e.dispatch((0,l.merge)([f,"Transform",0],(0,s.default)(w))),v=r};return(0,i.default)("div",{style:p},[(0,i.default)("input",{style:m,props:{type:"range",min:g,max:y,step:"any",defaultValue:"0",title:"Zoom"},on:{input:_,change:_}})])};var i=f(r(37)),a=r(8),o=r(4),s=f(r(42)),l=r(10),u=r(307),c=r(25);function f(e){return e&&e.__esModule?e:{default:e}}var h=Math.pow,d=n.default,p={position:"relative",display:"flex",alignItems:"center",pointerEvents:"auto",width:"200px",top:"-5px"},m={cursor:"pointer",marginLeft:"10px"},v=1,g=void 0,y=void 0,x=void 0,b=void 0},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(30)),i=d(r(2)),a=d(r(6));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.fetchApi)throw new Error('Expect a "fetchApi" function');var t=e.fetchApi,r=e.subscribe,d=e.translator,p=e.makeErrorsFatal,m=(0,i.default)({},l.default,e.modules||{}),v=(0,f.default)(function(e){return(0,a.default)(e).reduce(function(t,r){return e[r].reducer&&(t[r]=e[r].reducer),t},{})}(m),s.default,{makeErrorsFatal:p});v.setApi(t);var g=(0,i.default)({_store:v,deps:{THREE:c}},(0,o.default)(),(0,h.default)(v,m));g.waitFor=function(e){return new n.default(function(t){g.once(e,t)})},v.api=g,v.subscribe(function(e){r&&r(),e.length&&e.forEach(function(e){g.emit(e.type,e.args)}),g.emit("change")}),d&&v.setTranslator(d,v);var y=v.getTranslator();return v.dispatch((0,u.setApi)(g)),(0,a.default)(e.commands||{}).forEach(function(t){var r=e.commands[t];g.commands.addCommand("function"==typeof r?r(v,y):r,t)}),g};var o=d(r(643)),s=d(r(314)),l=d(r(432)),u=r(279),c=(d(u),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0))),f=d(r(648)),h=d(r(313));function d(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(6)),i=d(r(38)),a=d(r(2));t.default=function(e){var t=e._store;return function(r){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=new Date;if(d.useQueryParams){var m=o.default.parse(location.search);(0,a.default)(d,m)}if(t.dispatch((0,f.initializeAutoRotate)()),(0,s.isTruthy)(d.nowebgl)&&(t.dispatch((0,u.setRenderMode)(u.RENDER_MODES.nowebgl)),e.commands.getTools().forEach(e.player.removeTool),e.player.removeTool("vrSettings"),e.player.removeTool("fullscreen"),e.player.removeTool("home")),(0,s.isTruthy)(d.thumbnail,!0)&&!(0,s.isTruthy)(d.hideThumbnail)||e.player.displayThumbnail(!1),d.buildup&&e.sceneIO.preloadCommand(function(){return e.dynamicModules.whenLoaded("steelcase").then(function(e){if(e)return e.buildupFromUrl(d.buildup,d.nullMaterial,{autoOIT:(0,s.isTruthy)(d.autoOIT,!0),subd:(0,s.isTruthy)(d.subd),shadow:d.shadow}).then(function(e){var n=(0,i.default)({name:"buildup",type:"clientJob",data:{buildup:d.buildup,nullMaterial:d.nullMaterial,renderJobId:d.jobId},status:e.status,result:e.data,error:e.err});return t.callApi({method:"POST",url:"https://clara.io/api/scenes/"+r+"/clientJob",body:n})})}).then(function(){(0,s.isTruthy)(d.singleSideTransparent)&&(0,h.singleSideTransparent)(e)})}),e.sceneIO.preloadCommand(function(){(0,s.isTruthy)(d.subd)&&!d.buildup&&(0,h.subd)(e),(0,s.isTruthy)(d.singleSideTransparent)&&(0,h.singleSideTransparent)(e);var t=d["configurator.form"],r=(0,s.parseQueryArg)(d["configurator.show"]),n=d["configurator.preset"],i=d["configurator.configurations"];i=i&&JSON.parse(i)||d.configurations;var a=d["configurator.configuration"];return a=a&&JSON.parse(a)||d.configuration,(0,l.default)(e,{configurations:i,configuration:a,panel:r,form:t,preset:n}).then(function(t){return t&&e.player.showTool("configurator"),(0,s.isTruthy)(d.nowebgl)?(0,c.default)(e):i&&e.player.displayThumbnail(!0,{configurations:i}),t})}),e.on("preloaded",function(){var t={};["polarAngle","azimuthAngle","boundingRadius","maxZoom","maxPolarOffset","minPolarOffset","maxAzimuthOffset","minAzimuthOffset"].forEach(function(e){null==d[e]||""===d[e]||isNaN(d[e])||(t[e]=Number(d[e]))}),["floorAlign","centerAlign"].forEach(function(e){t[e]=(0,s.isTruthy)(d[e])}),(0,n.default)(t).length&&e.player.setCameraAttrs(t)}),e.on("rendered",function(){console.log("Player "+e.version+" is loaded and ready",new Date-p),(0,s.isTruthy)(d.indexRender)&&(0,h.indexRender)(e),e.scene.getWarnings().forEach(function(e){console.warn(e.type+": '"+e.name+"', "+e.id),e.warnings.forEach(function(e){return console.warn("  - "+e)})})}),!r||36!==r.length)throw e.sceneIO.reportError("Invalid sceneId"),new Error("Required sceneId to be a uuid");d.setupCommand&&e.sceneIO.preloadCommand(e.plugins.getSetupCommand(d.setupCommand,d.setupData)),"undefined"!=typeof claraPlayerExternal?(claraPlayerExternal.content&&e.sceneIO.loadScene(r,claraPlayerExternal.content,new Date-p).then(function(){e.sceneIO.useScene(r),delete claraPlayerExternal.content}),claraPlayerExternal.error&&e.sceneIO.reportError(claraPlayerExternal.error)):e.sceneIO.fetchAndUse(r,d.published,{waitForPublish:d.waitForPublish}).then(function(){});var v=!(0,s.isTruthy)(d.tools,!0);["orbit","pan","zoom","home","fullscreen","vrMode","vrSettings","nodeRotate","nodeMove","nodeScale","select"].forEach(function(t){if(v)return e.player.removeTool(t);var r=d["tools."+t],n=(0,s.parseQueryArg)(r);void 0!=n&&"hide"!==r&&e.player[n?"showTool":"removeTool"](t),"hide"!==d.tools&&"hide"!==r||e.player.hideTool(t)})}};var o=d(r(245)),s=r(640),l=d(r(641)),u=r(8),c=d(r(439)),f=r(68),h=r(639);function d(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(47)),i=c(r(58)),a=c(r(64)),o=r(39),s=r(4),l=r(90),u=c(r(59));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,n.default)(this,e),this.id=(0,a.default)(),this._store=t,this._ids=this._toIds(r),this._subObjectSelection=new u.default(t,{})}return(0,i.default)(e,[{key:"_touch",value:function(){this._store.dispatch((0,o.touchSelectionSet)(this))}},{key:"_toIds",value:function(e){return e?Array.isArray(e)?e.filter(l.isUuid):(0,l.isUuid)(e)?[e]:(0,s.filter)(this._store,e,{onlyNode:!0}):[]}},{key:"add",value:function(e){var t,r;this._ids=(t=this._ids.concat(this._toIds(e)),r={},t.filter(function(e){return!r[e]&&(r[e]=!0)})),this._subObjectSelection.clear(),this._touch()}},{key:"set",value:function(e){this.clear(),this.add(e)}},{key:"remove",value:function(e){this._remove(e),this._touch()}},{key:"_remove",value:function(e){var t=this._toIds(e);this._ids=this._ids.filter(function(e){return!t.includes(e)}),!this._ids.length&&this._subObjectSelection&&this._subObjectSelection._clear()}},{key:"includes",value:function(e){var t=this._toIds(e);if(!t.length)return!1;for(var r=0;r<t.length;r++)if(!this._ids.includes(t[r]))return!1;return!0}},{key:"toggle",value:function(e){var t=this._toIds(e);this._ids=this._ids.filter(function(e){var r=t.indexOf(e);return-1!==r&&t.splice(r,1),-1===r}),this._ids=this._ids.concat(t),this._subObjectSelection.clear(),this._touch()}},{key:"setSubObjectSelection",value:function(e){1===this._ids.length?e?(this._subObjectSelection._setNodeId(this._ids[0]),e.type&&this._subObjectSelection.setType(e.type),this._subObjectSelection.setIndices(e.indices),this._touch()):this._subObjectSelection.clear():console.warn("SubObjectSelection requires a SelectionSet with a single node selected")}},{key:"clear",value:function(){this._ids=[],this._subObjectSelection.clear(),this._touch()}},{key:"destroy",value:function(){this._store.dispatch((0,o.removeSelectionSet)(this.id)),this.removeSubObjectSelection()}},{key:"ids",get:function(){return this._ids}},{key:"subObjectSelection",get:function(){return 1!==this._ids.length||this._ids[0]!==this._subObjectSelection.nodeId?null:{type:this._subObjectSelection.type,indices:this._subObjectSelection.getIndices()}}}]),e}();t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ghoster=t.Highlighter=void 0;var n=c(r(121)),i=c(r(6)),a=c(r(47)),o=c(r(58)),s=c(r(64)),l=r(0),u=r(39);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=function(){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var i in(0,a.default)(this,t),this.id=(0,s.default)(),this._store=r,this._properties={},e)this._properties[i]=n[i]||e[i].default;this._selectionSet=n.selectionSet||r.dispatch((0,u.createSelectionSet)())}return(0,o.default)(t,[{key:"_touch",value:function(){this._store.dispatch((0,u.touchSelectionUI)(this))}},{key:"setSelectionSet",value:function(e){this._selectionSet=e,this._touch()}},{key:"selectedIds",get:function(){return this._selectionSet?this._selectionSet.ids:[]}},{key:"selectionSet",get:function(){return this._selectionSet}}]),t}();return(0,i.default)(e).forEach(function(r){(0,n.default)(t.prototype,r,{get:function(){return e[r].get(this._properties[r])}});var i="set"+r[0].toUpperCase()+r.slice(1);t.prototype[i]=function(e){this._properties[r]=e,this._touch()}}),t}var h=f({thickness:{default:1,get:function(e){return e}},color:{default:"#00ff00",get:function(e){return new l.Color(e)}}}),d=f({opacity:{default:.25,get:function(e){return e}}});t.Highlighter=h,t.Ghoster=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(47)),i=s(r(58)),a=s(r(64)),o=r(39);function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.default)(this,e),this.id=(0,a.default)(),this._store=t,this._color=r.color||{r:1,g:0,b:0},this._highlightColor=r.highlightColor||{r:0,g:1,b:0},this._selectedColor=r.selectedColor||{r:0,g:0,b:1},this._selection=r.selection}return(0,i.default)(e,[{key:"_touch",value:function(){this._store.dispatch((0,o.touchSelectionUI)(this))}},{key:"setSelection",value:function(e){this._selection=e,this._touch()}},{key:"setColors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.color&&(this._color=e.color),e.highlightColor&&(this._highlightColor=e.highlightColor),e.selectedColor&&(this._selectedColor=e.selectedColor),this._touch()}},{key:"selection",get:function(){return this._selection}},{key:"color",get:function(){return this._color}},{key:"highlightColor",get:function(){return this._highlightColor}},{key:"selectedColor",get:function(){return this._selectedColor}}]),e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(r(68)),i=m(r(140)),a=m(r(23)),o=m(r(74)),s=m(r(25)),l=m(r(8)),u=m(r(279)),c=m(r(10)),f=m(r(19)),h=m(r(4)),d=m(r(39)),p=m(r(184));function m(e){return e&&e.__esModule?e:{default:e}}var v={animation:n.default,annotations:i.default,assets:a.default,commands:s.default,configuration:o.default,dynamicModules:p.default,scene:h.default,sceneIO:f.default,sceneGraph:c.default,selection:d.default,player:l.default,plugins:u.default};t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(6)),i=o(r(13));t.default=function(e,t,r){var o=e.objects,s=e.activeSceneId,l=(0,a.default)(o),u={};if(r&&t.root===r.root)return u;u[t.root]=o[t.root];var c=l(t.root),f=r&&l(r.root);c.heirarchy!==f.heirarchy&&(u[c.heirarchy]=o[c.heirarchy]);c.references!==f.references&&(u[c.references]=o[c.references]);var h=l(c.heirarchy),d=f&&l(f.heirarchy);return function e(t,r,a){if(r!==a){u[r]=o[r];var s=l(r),c=a&&l(a),f=h[t]||[],p=d&&d[t]||[];!function(e,t){if(e!==t){u[e]=o[e];var r=l(e),a=t&&l(t),s=!0,c=!1,f=void 0;try{for(var h,d=(0,i.default)((0,n.default)(r));!(s=(h=d.next()).done);s=!0){var p=h.value,m=a&&a[p]||[],v=!0,g=!1,y=void 0;try{for(var x,b=(0,i.default)(r[p]);!(v=(x=b.next()).done);v=!0){var w=x.value;-1===m.indexOf(w)&&(u[w]=o[w])}}catch(e){g=!0,y=e}finally{try{!v&&b.return&&b.return()}finally{if(g)throw y}}}}catch(e){c=!0,f=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw f}}}}(s.plugs,c&&c.plugs),f.forEach(function(t,r){var n=p.indexOf(t);e(t,s.children[r],c&&c.children[n])})}}(s,c.content,f&&f.content),function(e,t){if(e!==t){u[e]=o[e];var r=l(e),i=t?l(t):{};(0,n.default)(r).forEach(function(e){var t=r[e];i[e]!==t&&(u[t]=o[t])})}}(c.files,f&&f.files),u};var a=o(r(185));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(6)),i=o(r(13));t.default=function(e,t,r,o,s){var l=(0,a.default)(e.objects),u=l(t.root),c=r&&l(r.root),f=o&&l(o.root),h=l(u.references),d=c?l(c.references):{},p=f?l(f.references):{},m=!0,v=!1,g=void 0;try{for(var y,x=(0,i.default)((0,n.default)(h));!(m=(y=x.next()).done);m=!0){var b=y.value;s(JSON.parse(b),h[b])}}catch(e){v=!0,g=e}finally{try{!m&&x.return&&x.return()}finally{if(v)throw g}}var w=!0,_=!1,M=void 0;try{for(var S,T=(0,i.default)((0,n.default)(p));!(w=(S=T.next()).done);w=!0){var b=S.value;p[b]!==h[b]&&s(JSON.parse(b),h[b])}}catch(e){_=!0,M=e}finally{try{!w&&T.return&&T.return()}finally{if(_)throw M}}var E=!0,P=!1,A=void 0;try{for(var C,R=(0,i.default)((0,n.default)(d));!(E=(C=R.next()).done);E=!0){var b=C.value;h[b]||p[b]||s(JSON.parse(b),null)}}catch(e){P=!0,A=e}finally{try{!E&&R.return&&R.return()}finally{if(P)throw A}}};var a=o(r(185));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(2)),i=s(r(6)),a=s(r(13));t.default=function(e,t,r,s,c){var f=c.changeNode,h=c.addNode,d=c.deleteNode,p=c.addFile,m=(c.removeFile,e.activeSceneId),v=(e.objects,e.nodes),g=(0,o.default)(e.objects),y=g(t.root),x=r&&g(r.root),b=s&&g(s.root),w=g(y.heirarchy),_=(g(y.references),x&&g(x.heirarchy)),M=(x&&g(x.references),b&&g(b.heirarchy));b&&g(b.references);(function e(t,r,n,o,s){if(o===n){if(!s)return;if(s===n)return}var c=w[t]||[];var p=_&&_[t]||[];var m=M&&M[t]||[];var y=g(n);var x=o&&g(o);var b=s&&g(s);l(y.children.length===c.length,"Expected heirarchy to match content: "+t);b&&l(b.children.length===m.length,"Expected heirarchy to match content: "+t);x&&l(x.children.length===p.length,"Expected heirarchy to match content: "+t);v[t];if(x)!function(e,t,r,n){if(t.plugs===r.plugs){if(!n)return;if(n.plugs===t.plugs)return}var o=g(t.plugs),s=g(r.plugs),l=n&&g(n.plugs),c={},h=!0,d=!1,p=void 0;try{for(var m,v=function(){var e=m.value,t=u(function(t,r){return s[e][r]===t},o[e]);t||(c[e]=o[e].map(g)),l&&u(function(t,r){return s[e][r]===t},o[e])&&(c[e]=l[e].map(g))},y=(0,a.default)((0,i.default)(o));!(h=(m=y.next()).done);h=!0)v()}catch(e){d=!0,p=e}finally{try{!h&&y.return&&y.return()}finally{if(d)throw p}}f({id:e,plugs:c})}(t,y,x,b);else{var S=g(y.plugs),T={},E=!0,P=!1,A=void 0;try{for(var C,R=(0,a.default)((0,i.default)(S));!(E=(C=R.next()).done);E=!0){var I=C.value;T[I]=S[I].map(function(e){var t=g(e);return[t.type,t,t.name]})}}catch(e){P=!0,A=e}finally{try{!E&&R.return&&R.return()}finally{if(P)throw A}}h({id:t,parent:r,plugs:T,children:[],name:y.name,type:y.type})}c.forEach(function(r,n){var i=p.indexOf(r),a=m.indexOf(r);e(r,t,y.children[n],x&&x.children[i],b&&b.children[a])});m.forEach(function(r,n){var i=c.indexOf(r),a=p.indexOf(r);-1===i&&e(r,t,b.children[n],x&&x.children[a])});p.forEach(function(e,t){-1!==c.indexOf(e)||m&&-1!==m.indexOf(e)||d(e)})})(m,null,y.content,x&&x.content,b&&b.content),S=y.files,T=x&&x.files,E=b&&b.files,P=g(S),A=T?g(T):{},C=E?g(E):{},(0,i.default)(P).forEach(function(e){if(A[e]){if(A[e]!==P[e])throw new Error("Update file")}else p((0,n.default)({id:e},g(P[e])))}),(0,i.default)(C).forEach(function(e){if(A[e]){if(A[e]!==C[e])throw new Error("Update file")}else p(g(C[e]))});var S,T,E,P,A,C};var o=s(r(185));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new Error("assertion failure: "+t)}function u(e,t){for(var r=0;r<t.length;r++)if(!e(t[r],r))return!1;return!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(51)),i=d(r(2)),a=d(r(6)),o=d(r(13)),s=d(r(38));t.updateReferenceList=p,t.updateReference=m,t.evaluateSceneGraph=function(e,t,r){var s=t.activeSceneId,d=t.cameraController,v=r.skipEvaluation,g=(0,a.default)(t.nodes),y=(0,a.default)(t.evaluatedNodes),x=t.nodeReferences,b=x.from,w=(x.to,!t.loaded&&(0,u.isSceneLoaded)(e));t.loaded||(t.loaded=w);var _={},M={},S={},T={},E={};function P(e,r){if(T[e]&&!E[e])throw console.error("Circular reference, updating",t.nodes[e].name),new Error("Circular reference: "+e);M[e]&&!T[e]&&R(e,M[e]);var n=E[e]||t.evaluatedNodes[e];return r&&(n=n&&n[r]),n}function A(r){var n=new l.Box3;(0,h.traverseHierarchy)(e,r,!0,function(e){var i=function(e){var t=e.PolyMesh?e.PolyMesh.mesh:e.Shape?e.Shape.shape:null,r=new l.Box3;t&&r.copy(t.boundingBox);return r}(P(e)),a=function e(r,n){var i=P(r,"Transform");if(!i||r===n)return null;var a=i.transform;var o=t.nodes[r]&&t.nodes[r].parent;var s=o&&e(o,n);return s?(new l.Matrix4).copy(s).multiply(a):(new l.Matrix4).copy(a)}(e,r);i.applyMatrix4(a),n.union(i)});var i=C(r)||new l.Matrix4;return n.applyMatrix4(i),n}function C(e){if(t.worldTransformReferences[e]=!0,_[e])return _[e];!0!==M[e]&&"Transform"!==M[e]||T[e]||R(e,M[e]);var r=P(e,"Transform");if(!r)return null;var n=t.nodes[e],i=n&&n.parent,a=i&&C(i);return _[e]=a?(new l.Matrix4).copy(a).multiply(r.transform):(new l.Matrix4).copy(r.transform),_[e]}function R(n,l){var u=t.nodes[n];if(u){var h=t.evaluatedNodes[n];if(!h){h=t.evaluatedNodes[n]={name:u.name,_ev:0,plugs:[]},u.plugs.Properties&&h.plugs.push("Properties"),u.plugs.Transform&&h.plugs.push("Transform");var g=!0,y=!1,x=void 0;try{for(var b,w=(0,o.default)((0,a.default)(u.plugs));!(g=(b=w.next()).done);g=!0){var _=b.value;"Properties"!==_&&"Transform"!==_&&h.plugs.push(_)}}catch(e){y=!0,x=e}finally{try{!g&&w.return&&w.return()}finally{if(y)throw x}}}E[n]=h,T[n]=!0;var S=0,R=!0,I=!1,O=void 0;try{for(var L,D=(0,o.default)(h.plugs);!(R=(L=D.next()).done);R=!0){var N=L.value;!0!==l&&l!==N||V(N),S+=h[N]._v}}catch(e){I=!0,O=e}finally{try{!R&&D.return&&D.return()}finally{if(I)throw O}}h._v=u._v,h._ev=S,delete T[n],delete M[n]}function V(l){var g=this,y=u.plugs[l],x=h[l],b=x?x._v:0;h[l]=y.reduce(function(y,b,w){if(!1===b.active)return y;var _=(0,f.lookupOperator)(l,b.type,[]),M=!0,S=!1,T=void 0;try{for(var E,R=(0,o.default)(_.fileReferenceKeys);!(M=(E=R.next()).done);M=!0){var I=E.value;m(null,t.fileReferences,n,l,w,I,b)}}catch(e){S=!0,T=e}finally{try{!M&&R.return&&R.return()}finally{if(S)throw T}}var O={},L=!0,D=!1,N=void 0;try{for(var V,F=(0,o.default)(_.nodeReferenceKeys);!(L=(V=F.next()).done);L=!0){var B=V.value;m(t,t.nodeReferences,n,l,w,B,b),b[B]&&!v&&(O[B+"Evaluated"]=P(b[B]))}}catch(e){D=!0,N=e}finally{try{!L&&F.return&&F.return()}finally{if(D)throw N}}var U=!0,k=!1,z=void 0;try{for(var G,j=(0,o.default)((0,a.default)(_.plugReferences));!(U=(G=j.next()).done);U=!0){var H=G.value;m(t,t.nodeReferences,n,l,w,H,b,_.plugReferences[H]),b[H]&&!v&&(O[H]=P(b[H],_.plugReferences[H]))}}catch(e){k=!0,z=e}finally{try{!U&&j.return&&j.return()}finally{if(k)throw z}}var W=!0,X=!1,q=void 0;try{for(var Y,Z=(0,o.default)(_.nodeReferenceListKeys);!(W=(Y=Z.next()).done);W=!0){var J=Y.value;p(t.nodeReferences,n,l,w,J,b[J])}}catch(e){X=!0,q=e}finally{try{!W&&Z.return&&Z.return()}finally{if(X)throw q}}return _.environment&&(m(t,t.nodeReferences,n,l,w,"environment",{environment:s},"Environment"),v||(O.environment=P(s,"Environment"))),_.hierarchyVisible&&(m(t,t.nodeReferences,n,l,w,"hierarchyVisibility",{hierarchyVisibility:s},"Properties"),v||(O.sceneProperties=P(s,"Properties"))),_.selfTransform&&(v||m(t,t.nodeReferences,n,l,w,"selfTransform",{selfTransform:n},"Transform")),_.selfProperties&&(v||m(t,t.nodeReferences,n,l,w,"selfProperties",{selfProperties:n},"Properties")),v?y:_.update((0,i.default)({},b,O),y,{cameraController:d,sceneId:s,node:u,store:e,properties:h.Properties,transform:h.Transform,getBoundingBox:A,getWorldTransform:C,getCameraWorldTransform:function(r){return t.cameraReferences[r]=!0,C((0,c.getCamera)(e))}.bind(g,n),previousResult:x,loaded:t.loaded,forceFetchAssets:r.forceFetchAssets})},{}),h[l]._v=b+1}}var I=!0,O=!1,L=void 0;try{for(var D,N=(0,o.default)(g);!(I=(D=N.next()).done);I=!0){var V=D.value;t.evaluatedNodes[V]&&t.evaluatedNodes[V]._v===t.nodes[V]._v||(t.nodes[V]._changedPlug&&t.evaluatedNodes[V]?(M[V]=t.nodes[V]._changedPlug,delete t.nodes[V]._changedPlug):M[V]=!0)}}catch(e){O=!0,L=e}finally{try{!I&&N.return&&N.return()}finally{if(O)throw L}}function F(e,r){r&&(M[r]?M[e]=!!M[e]||"Transform":F(e,t.nodes[r].parent))}var B=!0,U=!1,k=void 0;try{for(var z,G=(0,o.default)((0,a.default)(t.worldTransformReferences));!(B=(z=G.next()).done);B=!0){var j=z.value;!0!==M[j]&&"Transform"!==M[j]&&F(j,t.nodes[j].parent)}}catch(e){U=!0,k=e}finally{try{!B&&G.return&&G.return()}finally{if(U)throw k}}if(M[(0,c.getCamera)(e)]){var H=!0,W=!1,X=void 0;try{for(var q,Y=(0,o.default)((0,a.default)(t.cameraReferences));!(H=(q=Y.next()).done);H=!0){var Z=q.value;M[Z]=!0}}catch(e){W=!0,X=e}finally{try{!H&&Y.return&&Y.return()}finally{if(W)throw X}}}var J=!0,Q=!1,K=void 0;try{for(var $,ee=(0,o.default)(y);!(J=($=ee.next()).done);J=!0){var te=$.value;t.nodes[te]||(S[te]=!0)}}catch(e){Q=!0,K=e}finally{try{!J&&ee.return&&ee.return()}finally{if(Q)throw K}}if(w){var re=!0,ne=!1,ie=void 0;try{for(var ae,oe=(0,o.default)(g);!(re=(ae=oe.next()).done);re=!0){var se=ae.value,le=t.evaluatedNodes[se];le&&le.Properties&&le.Properties.prefetch&&(M[se]=!!M[se]||t.nodes[se].type)}}catch(e){ne=!0,ie=e}finally{try{!re&&oe.return&&oe.return()}finally{if(ne)throw ie}}}function ue(e,t){if(b[e]){var r=!0,i=!1,s=void 0;try{for(var l,u=(0,o.default)((0,a.default)(b[e]));!(r=(l=u.next()).done);r=!0){var c=l.value,f=b[e][c],h=JSON.parse(c),d=(0,n.default)(h,4),p=d[0],m=d[1];d[2],d[3];t&&!0!==f&&f!==t||(M[p]?M[p]!==m&&!0!==M[p]&&(M[p]=!0,ue(p,m)):(M[p]=m,ue(p,m)))}}catch(e){i=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw s}}}}var ce=!0,fe=!1,he=void 0;try{for(var de,pe=(0,o.default)((0,a.default)(M));!(ce=(de=pe.next()).done);ce=!0){var me=de.value,ve=!0!==M[me]&&M[me];b[me]&&ue(me,ve)}}catch(e){fe=!0,he=e}finally{try{!ce&&pe.return&&pe.return()}finally{if(fe)throw he}}var ge=!0,ye=!1,xe=void 0;try{for(var be,we=(0,o.default)((0,a.default)(S));!(ge=(be=we.next()).done);ge=!0){var _e=be.value;delete t.evaluatedNodes[_e]}}catch(e){ye=!0,xe=e}finally{try{!ge&&we.return&&we.return()}finally{if(ye)throw xe}}var Me=!0,Se=!1,Te=void 0;try{for(var Ee,Pe=(0,o.default)((0,a.default)(M));!(Me=(Ee=Pe.next()).done);Me=!0){var Ae=Ee.value;M[Ae]&&R(Ae,M[Ae])}}catch(e){Se=!0,Te=e}finally{try{!Me&&Pe.return&&Pe.return()}finally{if(Se)throw Te}}t._ev=t._v};var l=r(0),u=r(19),c=r(8),f=r(111),h=r(10);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,n,i,l){var u=e.from,c=e.to,f=(0,s.default)([t,r,n,i]),h=c[f];if(h){var d=!0,p=!1,m=void 0;try{for(var v,g=(0,o.default)(h);!(d=(v=g.next()).done);d=!0){var y=v.value;-1===l.indexOf(y)&&(delete u[y][f],(0,a.default)(u[y]).length||delete u[y])}}catch(e){p=!0,m=e}finally{try{!d&&g.return&&g.return()}finally{if(p)throw m}}}var x=!0,b=!1,w=void 0;try{for(var _,M=(0,o.default)(l);!(x=(_=M.next()).done);x=!0){var S=_.value;u[S]||(u[S]={}),u[S][f]=!0}}catch(e){b=!0,w=e}finally{try{!x&&M.return&&M.return()}finally{if(b)throw w}}c[f]=l}function m(e,t,r,n,i,o,l,u){var c=t.from,f=t.to,h=l[o];h&&e&&!e.nodes[h]&&(console.warn("No reference to:",h,"from",r,n,i,o),l[o]=h=null);var d=(0,s.default)([r,n,i,o]),p=f[d];p?p!==h&&(delete c[p][d],h?(c[h]||(c[h]={}),c[h][d]=u||!0,f[d]=h):((0,a.default)(c[p]).length||delete c[p],delete f[d])):h&&(c[h]||(c[h]={}),c[h][d]=u||!0,f[d]=h)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(13)),i=c(r(38)),a=c(r(6));t.default=function(e){var t=e.get("sceneGraph"),r=t.refs.HEAD,o=t.objects,c=(t.history,t.syncedNodes,t.activeSceneId),h=((0,a.default)(t.nodes),(0,a.default)(t.evaluatedNodes),{}),d={};function p(e){var t=(0,i.default)(e),r=f.digest(t);return o[r]||(h[r]=t),r}var m=function e(r){var i=t.nodes[r];if(!i)return;d[r]=i.children;var o=i.children.map(e);var s={children:o,name:i.name,type:i.type};var l={};var c=!0;var f=!1;var h=void 0;try{for(var m,v=function(){var e=m.value;l[e]=i.plugs[e].map(function(t){var r=(0,u.lookupOperator)(e,t.type,[]),n=r.contentExport(t),i=p(n);return i})},g=(0,n.default)((0,a.default)(i.plugs));!(c=(m=g.next()).done);c=!0)v()}catch(e){f=!0,h=e}finally{try{!c&&g.return&&g.return()}finally{if(f)throw h}}s.plugs=p(l);var y=p(s);i._hash=y;i._sv=i._v;return y}(c),v=p(d),g={},y=(0,a.default)(t.nodeReferences.to);y.sort();var x=!0,b=!1,w=void 0;try{for(var _,M=(0,n.default)(y);!(x=(_=M.next()).done);x=!0){var S=_.value,T=JSON.parse(S);l.virtualNodes[T[0]]||"Material"===T[1]&&"environment"===T[3]||(g[S]=t.nodeReferences.to[S])}}catch(e){b=!0,w=e}finally{try{!x&&M.return&&M.return()}finally{if(b)throw w}}var E=(0,a.default)(t.fileReferences.to);E.sort();var P={};E.forEach(function(r){var n=t.fileReferences.to[r];g[r]=n;var i=(0,s.getFile)(e,n),a=i.name,o=i.hash,l=i.type,u=i.suffix;o&&(P[n]=p({name:a,hash:o,type:l,suffix:u}))});var A=p(g),C=p(P),R={root:p({heirarchy:v,references:A,content:m,files:C}),parents:r?[r]:[],createdAt:new Date,author:"wvl",message:"Version: "+t._v},I=p(R);return{commit:R,commitHash:I,objects:h}};var o=c(r(847)),s=r(23),l=r(10),u=r(111);function c(e){return e&&e.__esModule?e:{default:e}}var f=new o.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={linear:function(e,t,r,n){return(r-t)*e/n+t},easeInQuad:function(e,t,r,n){return(r-t)*(e/=n)*e+t},easeOutQuad:function(e,t,r,n){return-(r-t)*(e/=n)*(e-2)+t},easeInOutQuad:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,r,n){return(r-t)*(e/=n)*e*e+t},easeOutCubic:function(e,t,r,n){return(r-t)*((e=e/n-1)*e*e+1)+t},easeInOutCubic:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,r,n){return(r-t)*(e/=n)*e*e*e+t},easeOutQuart:function(e,t,r,n){return-(r-t)*((e=e/n-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,r,n){return(r-t)*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,r,n){return(r-t)*((e=e/n-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,r,n){var i=r-t;return-i*Math.cos(e/n*(Math.PI/2))+i+t},easeOutSine:function(e,t,r,n){return(r-t)*Math.sin(e/n*(Math.PI/2))+t},easeInOutSine:function(e,t,r,n){return-(r-t)/2*(Math.cos(Math.PI*e/n)-1)+t},easeInExpo:function(e,t,r,n){var i;return null!==(i=0===e)?i:{b:(r-t)*Math.pow(2,10*(e/n-1))+t}},easeOutExpo:function(e,t,r,n){var i;return null!==(i=e===n)?i:t+{c:(r-t)*(1-Math.pow(2,-10*e/n))+t}},easeInOutExpo:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,r,n){return-(r-t)*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,r,n){return(r-t)*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOutCirc:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,r,n){var i,a,o,s=r-t;return o=1.70158,a=0,i=s,0===e||(e/=n),a||(a=.3*n),i<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/a)+t},easeOutElastic:function(e,t,r,n){var i,a,o,s=r-t;return o=1.70158,a=0,i=s,0===e||(e/=n),a||(a=.3*n),i<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*e)*Math.sin((e*n-o)*(2*Math.PI)/a)+s+t},easeInOutElastic:function(e,t,r,n){var i,a,o,s=r-t;return o=1.70158,a=0,i=s,0===e||(e/=n/2),a||(a=n*(.3*1.5)),i<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/a)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/a)*.5+s+t},easeInBack:function(e,t,r,n,i){return void 0===i&&(i=1.70158),(r-t)*(e/=n)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,r,n,i){return void 0===i&&(i=1.70158),(r-t)*((e=e/n-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,r,n,i){var a=r-t;return void 0===i&&(i=1.70158),(e/=n/2)<1?a/2*(e*e*((1+(i*=1.525))*e-i))+t:a/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:function(e,t,r,i){var a=r-t;return a-n.easeOutBounce(i-e,0,a,i)+t},easeOutBounce:function(e,t,r,n){var i=r-t;return(e/=n)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,r,i){var a=r-t;return e<i/2?.5*n.easeInBounce(2*e,0,a,i)+t:.5*n.easeOutBounce(2*e-i,0,a,i)+.5*a+t}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(38)),i=u(r(2));t.default=function(e){var t=e._store,r=(0,a.getImageOptions)(t),u=!!r.clip||!!r.clipId,f=e.sceneIO.getSceneId(),d=void 0,p=void 0,m=0,v=[],g=void 0,y=!1;function x(e){d=(p=e).getContext("2d")}function b(){if(v.length&&d){e.player.displayThumbnail(!1);var t=Math.round(m*(v.length-1)),r=v[t];if(r){if(g!==r||y){d.clearRect(0,0,p.width,p.height);var n=h(p.width,p.height,r.naturalWidth,r.naturalHeight),i=n.offsetX,a=n.offsetY,o=n.width,s=n.height;d.drawImage(r,i,a,o,s)}g=r,y=!1}else console.log("No image for idx",t,m,v.length)}}function w(){var h=(0,a.getConfiguration)(t),p=(0,i.default)(c,r,{configuration:(0,n.default)(h)});if(u){t.dispatch((0,s.markRenderingScene)());var m=(0,i.default)({},p,{format:"jpeg-frames",cache:"true"});t.callApi({url:"https://clara.io/api/scenes/"+f+"/render?"+l.default.stringify(m),format:"json"}).then(function(r){var n=r.urls;e.player.displayThumbnail(!0,{url:n[0]}),function(e,r){for(var n=[],i=0,a=0;a<e.length;a++){var o=new Image;o.onload=function(){i+=1,t.dispatch((0,s.markExternalProgress)((1+i/e.length)/2)),i===e.length&&(v=n,t.dispatch((0,s.markRenderedScene)()),r())},o.src=e[a],n[a]=o}}(n,function(){if(!d){var e=(0,o.getCommand)(t,"imageRotate");e.options.canvas&&x(e.options.canvas)}b()})})}else e.player.displayThumbnail(!0,p),t.dispatch((0,s.markExternalProgress)(1)),t.dispatch((0,s.markRenderedScene)())}e.player.addTool({options:{},drag:function(e){return!!this.options.canvas&&(d||x(this.options.canvas),{momentum:!0,handle:function(e){var r=t.getIn(["player","playerElement"]).getBoundingClientRect(),n=e.deltaX/r.width;m=(m+n+1)%1,b()}})}},"imageRotate"),(0,o.updateManipulatorsTools)(t),e.configuration.onChange(w),w()};var a=r(74),o=r(25),s=r(19),l=u(r(245));function u(e){return e&&e.__esModule?e:{default:e}}var c={width:800,height:600,renderer:"webgl"};function f(e){return function(t,r,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.5,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,l=n/i,u=t/r,c=t*a,f=r*a;return(e?l>u:l<u)?f=c/l:c=f*l,{width:c,height:f,offsetX:(t-c)*o,offsetY:(r-f)*s}}}var h=f(!0);f(!1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2),a=(n=i)&&n.__esModule?n:{default:n};var o={schema:{format:{type:"Options",labels:["Text","Image"],values:["Text","Image"],defaultValue:"Text"},useText:{type:"Boolean",label:"Use Custom Text",defaultValue:!1,animatable:!1},text:{type:"String",label:"Custom Text",defaultValue:"Annotation Text",animatable:!1},customCss:{type:"String",label:"Custom css",defaultValue:"",animatable:!1},image:{type:"Plug",label:"Image",plug:"Image"},open:{type:"Boolean",label:"Open by default",defaultValue:!1,animatable:!1},limitVisilibility:{type:"Boolean",label:"Limit Visibility",defaultValue:!1,animatable:!1},visibilityAngle:{type:"Number",label:"Visibility Angle",defaultValue:180,step:5,minValue:10,maxValue:360,animatable:!1},directionMode:{label:"Direction Mode",type:"Options",labels:["Manual","Away From Origin"],values:["manual","awayFromOrigin"],defaultValue:"manual"},directionAxis:{label:"Direction",type:"Options",labels:["XAxis","YAxis","ZAxis"],values:["x","y","z"],defaultValue:"z"},directionTarget:{type:"Node",label:"Direction Target"},multiline:{type:"Boolean",label:"Allow Multiline",defaultValue:!1,animatable:!1}},update:function(e,t,r){var n=r.node;(0,a.default)(t,e),e.useText||(t.text=n.name)}};t.default={Annotation:o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(2)),i=a(r(6));function a(e){return e&&e.__esModule?e:{default:e}}var o={"-1":"[ Custom ]",35:"35mm",70:"IMAX"},s={values:[0,1],labels:["Field of View","Focal Length"]},l={schema:{targeted:{label:"Enable Look Target",type:"Boolean",defaultValue:!1},focalDepthEnabled:{label:"Use Focal Depth",type:"Boolean",defaultValue:!1},focalDepth:{label:"Focal Depth",type:"Number",defaultValue:100,minValue:.001,animatable:!0,hidden:!0},axisDirection:{type:"Object",hidden:!0},zoomAxis:{type:"Object",hidden:!0},projection:{label:"Projection",type:"Options",defaultValue:"Perspective",values:["Perspective","Orthographic"]},viewCtrl:{type:"Options",defaultValue:0,values:s.values,labels:s.labels,label:"View Control"},fieldOfView:{label:"Field of View",type:"Number",defaultValue:45,minValue:5,maxValue:179,animatable:!0},orthoHeight:{label:"Orthographic Height",type:"Number",defaultValue:1,minValue:0,maxValue:1e4,step:.1,animatable:!0},focalLength:{label:"Focal Length (mm)",type:"Number",defaultValue:40,minValue:1,maxValue:400,step:1,animatable:!0},filmSizeBox:{type:"Options",defaultValue:"35",values:(0,i.default)(o),labels:o,label:"Film Size"},customFilmSize:{label:"Custom Film Size (mm)",type:"Number",defaultValue:35,step:.1,minValue:1,maxValue:1e3},fStop:{label:"F-Stop",type:"Number",defaultValue:2.8,minValue:.7,maxValue:32,step:.1},filmOffset:{label:"Film Offset (mm)",type:"Vec2",defaultValue:{x:0,y:0},minValue:-1e3,step:1,maxValue:1e3},aspectRatio:{label:"Aspect Ratio",type:"Number",defaultValue:16/9,step:.01,minValue:.01,maxValue:10},nearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.1,minValue:1e-4},farClip:{label:"Far Clip",type:"Number",defaultValue:5e4,step:1,minValue:1e-4,maxValue:1e6},orthoZoom:{label:"Ortho Zoom",type:"Number",defaultValue:1,minValue:.01,step:.1},targetDistance:{label:"Distance to Target",type:"Number",defaultValue:5,minValue:.01},target:{label:"Virtual Target",type:"Vec3",defaultValue:{x:0,y:0,z:0},hidden:!0},showFrustum:{label:"Show Frustum",type:"Boolean",defaultValue:!1},frustumColor:{label:"Frustum Color",type:"Color",defaultValue:{r:1,g:.78,b:0},animatable:!0},showClipping:{label:"Show Clipping",type:"Boolean",defaultValue:!1},showTarget:{label:"Show Virtual Target",type:"Boolean",defaultValue:!1}},update:function(e,t,r){var i=r.cameraController,a=r.store,o=r.node;(0,n.default)(t,e);var s=e.filmSizeBox;t.filmSize=-1===s?e.customFilmSize:parseFloat(s),o.id===i.id&&i.setCameraData(a,t)}};t.default={Camera:l}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={values:[0,1,2,3,4],labels:["Default","Color","Image","CubeMap","EnvironmentMap"]},i={schema:{ambientLight:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0}},environmentMap:{label:"Environment Map",type:"Plug",plug:"Material"},backgroundStyle:{label:"Style",type:"Options",defaultValue:0,values:n.values,labels:n.labels},backgroundColor:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0}},backgroundOpacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1},background:{label:"Image",type:"Plug",plug:"Image"},cubeMapBlurring:{label:"CubeMap Blur",type:"Number",defaultValue:0,minValue:0,maxValue:10,step:.5,animatable:!0},cubeMap:{label:"CubeMap",type:"Plug",plug:"Material"}}};t.default={Environment:i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(23),a=r(323);(n=a)&&n.__esModule;var o={schema:{fontAsset:{type:"File",hidden:!0}},update:function(e,t,r){var n=r.store;return t.getFont=function(){return n.hasApi()&&n.dispatch((0,i.getOrFetchFont)(e.fontAsset))},t.getDataUrl=function(){var t=(0,i.getUrl)(n,e.fontAsset),r=t.split("filename=").pop(),a=r.split(".")[0],o=r.split(".").pop(),s=n.dispatch((0,i.getOrFetchBinary)(e.fontAsset));if(s){for(var l="",u=new Uint8Array(s),c=u.byteLength,f=0;f<c;f++)l+=String.fromCharCode(u[f]);return{dataUrl:"data:application/x-font-"+o+";base64,"+window.btoa(l),url:t,fontName:a,format:o}}return null},t}};t.default={Font:o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={values:[0,1,2,3,4,5,6,7],labels:["[ Custom ]","HD 720","HD 1080","640x480","Full 1024","1k Square","2k Square","Retina"]},i={schema:{res:{label:"Resolution",type:"Options",defaultValue:"1",values:n.values,labels:n.labels},res_w:{label:"Custom Width",type:"Number",defaultValue:1280,minValue:100,isInteger:!0},res_h:{label:"Custom Height",type:"Number",defaultValue:720,minValue:100,isInteger:!0},output_dir:{label:"Output directory",type:"Text"},curPass:{label:"Current Pass",type:"Node"},frm_start:{label:"Start Frame",type:"Number",defaultValue:1},frm_last:{label:"Last Frame",type:"Number",defaultValue:24},frm_by:{label:"By Frame",type:"Number",defaultValue:1},ren_start:{label:"Start number",type:"Number",defaultValue:1,isInteger:!0},ren_by:{label:"By Frame",type:"Number",defaultValue:1,isInteger:!0},frm_pad:{label:"Frame padding",type:"Number",defaultValue:1,minValue:0,maxValue:10,isInteger:!0}}};t.default={GeneralRenderer:i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2),a=(n=i)&&n.__esModule?n:{default:n};var o={selfTransform:!0,schema:{helperType:{label:"type",type:"String",defaultValue:"Dimension"},color:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0}},source:{label:"Source Node",type:"Node"},target:{label:"Target Node",type:"Node"},lineWidth:{label:"Line Width",type:"Number",defaultValue:1,minValue:0,maxValue:10},endType:{label:"Ends Type",type:"Options",values:[0,1,2,3],labels:["None","Half Line","Line","Arrow"],defaultValue:0},endWidth:{label:"End Width",type:"Number",defaultValue:.1,minValue:.01,maxValue:10,step:.01,animatable:!0},endLength:{label:"End Length",type:"Number",defaultValue:.05,minValue:.01,maxValue:.5,step:.01,animatable:!0}},update:function(e,t,r){var n=r.node,i=r.getWorldTransform;(0,a.default)(t,e);i(n.id)}};t.default={Dimension:o,Billboard:{schema:{helperType:{label:"type",type:"String",defaultValue:"Billboard"},contentType:{label:"Content Type",type:"Options",values:["Texture","Text"],labels:["Texture","Text"],defaultValue:"Text"},image:{label:"Image",type:"Plug",plug:"Image"},text:{label:"Text",type:"Text",defaultValue:"Text"},font:{label:"Font",type:"Options",defaultValue:"serif",values:["sans serif",'"Serif"',"monospace","css","custom"],labels:["Sans Serif","Serif","Monospace","CSS Font","Custom"]},fontFile:{label:"Font File",type:"Plug",plug:"Font"},fontSize:{label:"Font Size",type:"Number",defaultValue:50,minValue:1,step:1},fontColor:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0}},width:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Width"},height:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Height"},scaleX:{label:"Scale X",type:"Number",defaultValue:1,maxValue:10,minValue:.1,step:.1},scaleY:{label:"Scale Y",type:"Number",defaultValue:1,maxValue:10,minValue:.1,step:.1},rotation:{label:"Rotation",type:"Number",defaultValue:0,maxValue:360,minValue:-360,step:1}}},PlanarShadow:{schema:{helperType:{label:"type",type:"String",defaultValue:"PlanarShadow"},resolution:{label:"Resulotion",type:"Options",values:[2048,1024,512],labels:["2048","1024","512"],defaultValue:2048},width:{label:"Plane Size",type:"Number",defaultValue:5,minValue:.1,maxValue:1e4,step:.1,animatable:!0},opacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},maxDistance:{label:"Max Distance",type:"Number",defaultValue:10,minValue:0,maxValue:1e4,step:.1,animatable:!0},lightArea:{label:"Softness",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.01,animatable:!0}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(23),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9));var a={schema:{iesAsset:{type:"File",hidden:!0}},update:function(e,t,r){var a=r.store;return t.getIESProfileTexture=function(){var t=a.hasApi()&&a.dispatch((0,n.getOrFetchText)(e.iesAsset));if(!t)return null;var r=new i.DataTexture(null,360,180,i.LuminanceFormat);r.minFilter=i.LinearFilter,r.magFilter=i.LinearFilter;var o=i.IESLoader.prototype._parseIESData(t);return r.image.data=i.IESLoader.prototype._getIESValues(o),r.needsUpdate=!0,r},t}};t.default={IESProfile:a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(187),i=r(0),a={schema:{width:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Width"},height:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Height"},color:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},opacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},uOffset:{type:"Number",label:"U Offset",defaultValue:0,step:.1,animatable:!0},vOffset:{type:"Number",label:"V Offset",defaultValue:0,step:.1,animatable:!0},scaleMode:{label:"Scale Mode",type:"Options",defaultValue:n.ScaleMode.Tiling,values:[n.ScaleMode.Scale,n.ScaleMode.Tiling],labels:["Scale","Tiling"]},uScale:{type:"Number",label:"U Scale",defaultValue:1,step:.1,animatable:!0},vScale:{type:"Number",label:"V Scale",defaultValue:1,step:.1,animatable:!0},uTile:{type:"Number",label:"U Tile",defaultValue:1,step:.1,animatable:!0},vTile:{type:"Number",label:"V Tile",defaultValue:1,step:.1,animatable:!0},rotation:{type:"Number",label:"Rotation",defaultValue:0,step:.1,animatable:!0},wrapU:{type:"Options",defaultValue:1,values:n.wrapType.values,labels:n.wrapType.labels,label:"U Wrap Style"},wrapV:{type:"Options",defaultValue:1,values:n.wrapType.values,labels:n.wrapType.labels,label:"V Wrap Style"},invert:{type:"Boolean",label:"Invert",defaultValue:!1,animatable:!0},gainPivot:{type:"Number",label:"Gain Pivot",defaultValue:0,step:.1,animatable:!0},gain:{type:"Number",label:"Gain",defaultValue:1,step:.1,animatable:!0},brightness:{type:"Number",label:"Brightness",defaultValue:0,step:.1,animatable:!0},magFilter:{type:"Options",defaultValue:i.LinearFilter,values:n.sampleFilter.values,labels:n.sampleFilter.labels,label:"Magnify Filter"},minFilter:{type:"Options",defaultValue:i.LinearMipMapLinearFilter,values:n.sampleFilter.values,labels:n.sampleFilter.labels,label:"Minify Filter"},generateMipMaps:{label:"Use MipMaps",type:"Boolean",defaultValue:!0},hdrEncoding:{type:"Options",defaultValue:i.RGBM16Encoding,values:n.encodingType.values,labels:n.encodingType.labels,label:"HDR Encoding"},externalId:{type:"String",defaultValue:"",label:"External ID"}},update:function(e,t,r){r.node;var i=r.store,a=e.width,o=e.height,s=e.externalId,l=e.color;l&&(l="rgba("+parseInt(255*l.r)+","+parseInt(255*l.g)+","+parseInt(255*l.b)+","+e.opacity+")"),["uOffset","vOffset","uTile","vTile","rotation","wrapU","wrapV","gain","gainPivot","brightness","magFilter","minFilter","generateMipMaps","hdrEncoding","invert","width","height"].forEach(function(r){t[r]=e[r]}),e.scaleMode===n.ScaleMode.Scale&&(t.uTile=1/e.uScale,t.vTile=1/e.vScale);var u=void 0;""!==s&&((u=document.getElementById(s))||(u=i.createCanvas(a,o),document.body.appendChild(u),u.id=s,u.style.display="none"));var c=function(e,t,r){return e.fillStyle=l,e.fillRect(0,0,a,o),u&&e.drawImage(u,0,0,a,o),!0};return t.canvasOperations?t.canvasOperations.push(c):t.canvasOperations=[c],t}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(186),i={schema:{color:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},opacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},xOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"X",animatable:!0},yOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Y",animatable:!0},width:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Width"},height:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Height"},composition:{label:"Mode",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"source-over"}},update:function(e,t){var r=e.xOffset,i=e.yOffset,a=e.width,o=e.height,s=e.color;s&&(s="rgba("+parseInt(255*s.r)+","+parseInt(255*s.g)+","+parseInt(255*s.b)+","+e.opacity+")");var l=function(t){return t.fillStyle=s,t.globalCompositeOperation=(0,n.getCompatibleBlendMode)(e.composition),t.fillRect(r,i,a,o),!0};return t.canvasOperations?t.canvasOperations.push(l):t.canvasOperations=[l],t}};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(186),i={schema:{startIs:{label:"Start Is",type:"Options",values:["top","left","top-left","bottom-left"],initialValue:"top"},startColor:{label:"Start Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},startOpacity:{label:"Start Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},endColor:{label:"End Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},endOpacity:{label:"End Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},xOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"X",animatable:!0},yOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Y",animatable:!0},width:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Width"},height:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Height"},composition:{label:"Mode",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"source-over"}},update:function(e,t){var r=e.xOffset,i=e.yOffset,a=e.width,o=e.height,s=e.startColor,l=e.endColor;s&&(s="rgba("+parseInt(255*s.r)+","+parseInt(255*s.g)+","+parseInt(255*s.b)+","+e.startOpacity+")"),l&&(l="rgba("+parseInt(255*l.r)+","+parseInt(255*l.g)+","+parseInt(255*l.b)+","+e.endOpacity+")");var u=function(t){var u=void 0;switch(e.startIs){case"top":u=t.createLinearGradient(r,i,r,i+o);break;case"left":u=t.createLinearGradient(r,i,r+a,i);break;case"top-left":u=t.createLinearGradient(r,i,r+a,i+o);break;default:u=t.createLinearGradient(r,i+o,r+a,i)}return u.addColorStop(0,s),u.addColorStop(1,l),t.fillStyle=u,t.globalCompositeOperation=(0,n.getCompatibleBlendMode)(e.composition),t.fillRect(r,i,a,o),!0};return t.canvasOperations?t.canvasOperations.push(u):t.canvasOperations=[u],t}};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i={schema:{fontName:{label:"Font Name",type:"Options",defaultValue:"serif",values:["serif","sans serif","monospace","custom","fontFile"],labels:["Serif","Sans Serif","Monospace","Custom CSS Font","Font File"]},fontCSSSpecifier:{label:"CSS Font Specifer",type:"String",defaultValue:"Times New Roman, Times, serif"},fontFile:{label:"Font File (shown as serif)",type:"Plug",plug:"Font"},text:{label:"Text",type:"String",defaultValue:"Times New Roman, Times, serif"},textNumber:{label:"Text Number",type:"Number",defaultValue:500,minValue:1,maxValue:1e4,step:1,animatable:!0},fontSize:{label:"Font Size",type:"Number",defaultValue:100,minValue:1,maxValue:1e4,step:1,animatable:!0},autoDownsize:{label:"Auto Downsize(only one line)",type:"Boolean",defaultValue:!1,animatable:!0},italic:{label:"Italic",type:"Boolean",defaultValue:!1,animatable:!0},bold:{label:"Bold",type:"Boolean",defaultValue:!1,animatable:!0},justify:{label:"Justify",type:"Boolean",defaultValue:!1,animatable:!0},headSpace:{label:"Head Space",type:"Number",defaultValue:0,minValue:0,maxValue:4096,step:1},endSpace:{label:"End Space",type:"Number",defaultValue:0,minValue:0,maxValue:4096,step:1},multiLine:{label:"Multi-Line",type:"Boolean",defaultValue:!1,animatable:!0},style:{label:"Drawing Style",type:"Options",defaultValue:"solid",values:["solid","outline"]},outlineWidth:{type:"Number",defaultValue:3,minValue:-10,maxValue:100,step:1,label:"Outline Width",animatable:!0},shadow:{label:"Shadow",type:"Boolean",defaultValue:!1,animatable:!0},shadowThickness:{label:"Shadow Thickness",type:"Number",defaultValue:5,minValue:0,maxValue:100,step:1,animatable:!0},shadowColor:{label:"Shadow Color",type:"Color",defaultValue:0,animatable:!0},shadowOffsetX:{label:"Shadow Offset X",type:"Number",defaultValue:0,minValue:-100,maxValue:100,step:1,animatable:!0},shadowOffsetY:{label:"Shadow Offset Y",type:"Number",defaultValue:0,minValue:-100,maxValue:100,step:1,animatable:!0},color:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0},animatable:!0},opacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.01,animatable:!0},windowed:{label:"Windowed",type:"Boolean",defaultValue:!1,animatable:!0},windowBorder:{label:"Display Window Border",type:"Boolean",defaultValue:!0,animatable:!0},windowWidth:{label:"Window Width",type:"Number",defaultValue:256,minValue:0,maxValue:4096,step:1,animatable:!0},windowHeight:{label:"Window Height",type:"Number",defaultValue:256,minValue:0,maxValue:4096,step:1,animatable:!0},windowRelativeWidth:{label:"Relative Window Width",type:"Number",defaultValue:.5,minValue:0,maxValue:1,step:.01,animatable:!0},windowRelativeHeight:{label:"Relative Window Height",type:"Number",defaultValue:.5,minValue:0,maxValue:1,step:.01,animatable:!0},positionX:{type:"Number",defaultValue:256,minValue:-1e3,maxValue:1e4,step:1,label:"Position X",animatable:!0},positionY:{type:"Number",defaultValue:256,minValue:-1e3,maxValue:1e4,step:1,label:"Position Y",animatable:!0},positionXRelative:{type:"Number",defaultValue:.5,minValue:-10,maxValue:10,step:.01,label:"X Relative",animatable:!0},positionYRelative:{type:"Number",defaultValue:.5,minValue:-10,maxValue:10,step:.01,label:"Y Relative",animatable:!0},positionUnit:{label:"Unit",type:"Options",values:["pixel","relative"],initialValue:"absolute"},rotation:{type:"Number",defaultValue:0,minValue:-3600,maxValue:3600,step:1,label:"Rotation",animatable:!0},horizontalAlign:{type:"Options",defaultValue:"center",values:["left","center","right"],label:"Horizontal Align"},verticalAlign:{type:"Options",defaultValue:"middle",values:["top","middle","bottom"],label:"Vertical Align"},svgLabel:{type:"Label",align:"left",defaultValue:"SVG operations are not support by exporters."},curve:{label:"Curve",type:"Boolean",defaultValue:!1,animatable:!0},svgWidth:{label:"SVG Width",type:"Number",defaultValue:100,minValue:0,maxValue:2048,step:1,animatable:!0},svgHeight:{label:"SVG Height",type:"Number",defaultValue:100,minValue:0,maxValue:2048,step:1,animatable:!0},svgPath:{label:"SVG Path",type:"Text",defaultValue:null},svgAlign:{type:"Options",defaultValue:"start",values:["start","middle","end"],label:"SVG Text Align"},pathStartOffset:{type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.01,animatable:!0,label:"Path Start Offset"}},update:function(e,t){var r=e.fontName;switch(r){case"serif":r="Times New Roman, Times, serif";break;case"sans serif":r="Arial, Helvetica, sans-serif";break;case"monospace":r="Courier New, Courier, monospace";break;case"custom":r=e.fontCSSSpecifier}var i=e.text,a=e.fontSize,o=e.textNumber,s=e.autoDownsize,l=e.fontFile,u=e.italic,c=e.bold,f=e.justify,h=e.headSpace,d=e.endSpace,p=e.multiLine,m=e.style,v=e.outlineWidth,g=e.opacity,y=e.positionX,x=e.positionY,b=e.positionXRelative,w=e.positionYRelative,_=e.positionUnit,M=e.horizontalAlign,S=e.verticalAlign,T=e.windowed,E=e.windowBorder,P=e.windowWidth,A=e.windowHeight,C=e.windowRelativeWidth,R=e.windowRelativeHeight,I=e.shadow,O=e.shadowThickness,L=e.shadowOffsetX,D=e.shadowOffsetY,N=e.curve,V=e.svgWidth,F=e.svgHeight,B=e.svgPath,U=e.svgAlign,k=e.pathStartOffset,z=e.color,G=e.shadowColor;z="rgba("+parseInt(255*z.r)+","+parseInt(255*z.g)+","+parseInt(255*z.b)+","+g+")",G="rgba("+parseInt(255*G.r)+","+parseInt(255*G.g)+","+parseInt(255*G.b)+","+g+")";var j=e.rotation*Math.PI/180,H=function(e,t,g,H,q){if(!i.length)return!0;var Y="fontFile"===r&&l&&l.getFont(),Z=void 0;if("fontFile"!==r)return J(r);if(!l)return J("Times New Roman, Times, serif");if(!Y)return!0;if(Y)return N&&(Z=l&&l.getDataUrl()),J(null,!0);function J(l){var J=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Q=y,K=x,$=P,ee=A;"relative"===_&&(Q=b*g.width,K=w*g.height,$=C*g.width,ee=R*g.height),e.fillStyle=z;var te=u?"italic":"normal",re=c?700:400;function ne(t){return J?Y.getAdvanceWidth(t,a):e.measureText(t).width}J||(e.font=te+" "+re+" "+a+"px "+l),e.textAlign=M,e.textBaseline=S,e.translate(Q,K),e.rotate(j),i=i.slice(0,o);var ie=p?i.split(/<br>|\\n|\\r/i):i.split(),ae=[];if(T)for(var oe=!0,se=0;se<ie.length&&oe;se+=1)if(ne(ie[se])<=$)ae.push(ie[se]);else{for(var le="",ue=ie[se].split(" "),ce=0;ce<ue.length&&oe;ce+=1){var fe=le.length?le+" "+ue[ce]:ue[ce];if(ne(fe)>$)if(le.length)ae.push(le),le="",ce-=1;else for(var he=0;he<fe.length&&oe;he+=1)ne(le+fe[he])>$?le.length?(ae.push(le),le="",he-=1):(oe=!1,ae.length=0,console.warn("canvasText window width is less than single char, no text will display.")):le+=fe[he];else le=fe}le.length&&ae.push(le)}else ae=ie;if(T&&E){var de=0,pe=0;switch(S){case"middle":de=-ee/2;break;case"bottom":de=-ee}switch(M){case"center":pe=-$/2;break;case"right":pe=-$}e.beginPath(),e.moveTo(pe,de),e.lineTo(pe,de+ee),e.lineTo(pe+$,de+ee),e.lineTo(pe+$,de),e.lineTo(pe,de),e.stroke()}var me=0,ve=ae.length*a;switch(S){case"middle":me=T&&ve>=ee?-(ee-a)/2:-(ae.length-1)/2*a;break;case"bottom":me=T&&ve>=ee?-(ee-a):-(ae.length-1)*a}function ge(){I&&(e.shadowBlur=O,e.shadowColor=G,e.shadowOffsetX=L,e.shadowOffsetY=D)}var ye="middle"===S?a/2:"top"===S?a:-a/2,xe="center"===M?.5:"left"===M?0:1;if(N&&B){g.svgs||(g.svgs={}),g.svgs[q]||(g.svgs[q]={}),function(r){var i="data:image/svg+xml;charset=utf-8,"+(new XMLSerializer).serializeToString(r);if(g.svgs[q].svgImg&&g.svgs[q].svgData===i){if(g.svgs[q].svgImg){ge();var a=0,o=0;switch(M){case"left":a=0;break;case"center":a=V/2;break;case"right":a=V}switch(S){case"top":o=0;break;case"middle":o=F/2;break;case"bottom":o=F}e.drawImage(g.svgs[q].svgImg,-a,-o)}}else g.svgs[q].svgImg=new Image,g.svgs[q].svgImg.src=i,g.svgs[q].svgData=i,g.svgs[q].svgImg.onload=function(){t.dispatch((0,n.touch)(H))},g.svgs[q].svgImg.onerror=function(e){console.error("Can't load svg image",e)}}(function(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");t.setAttribute("width",V),t.setAttribute("height",F),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("viewBox","0 0 "+V+" "+F);var n=document.createElementNS(e,"path");n.setAttribute("id","TextPath"),n.setAttribute("fill","none"),n.setAttribute("stroke","none"),n.setAttribute("d",B);var i=document.createElementNS(e,"text"),o=document.createElementNS(e,"textPath");o.setAttribute("href","%23TextPath"),o.setAttribute("startOffset",100*k+"%");for(var s=0;s<ae.length;s+=1)o.append(ae[s]);if(i.setAttribute("text-anchor",U),i.setAttribute("font-style",u?"italic":"normal"),i.setAttribute("font-weight",c?"bold":"normal"),i.setAttribute("font-size",a),"outline"===m?(i.setAttribute("fill","rgb(0,0,0,0)"),i.setAttribute("stroke",z),i.setAttribute("stroke-width",v)):i.setAttribute("fill",z),i.appendChild(o),J){if(Z){var l=document.createElementNS(e,"defs"),f=document.createElementNS(e,"style");f.setAttribute("type","text/css");var h=(new DOMParser).parseFromString("<xml></xml>","application/xml").createCDATASection("@font-face {\n                  font-family: '"+Z.fontName+"';\n                  src: url(\""+Z.dataUrl+'");\n                }');f.appendChild(h),l.appendChild(f),t.appendChild(l),i.setAttribute("font-family",Z.fontName)}}else i.setAttribute("font-family",r);return t.appendChild(i),t.appendChild(n),t}())}else{ge();for(var be={},we=(ae.length,0);we<ae.length;we+=1){if(s&&(e.font=W(e,ae[we],a),J))for(;Y.getAdvanceWidth(ae[we],a)>e.canvas.width;)a--;var _e=(e.canvas.width-h-d-ne(ae[we]))/(ae[we].length-1)/a;if(f&&(be.letterSpacing=_e),T&&(we+1)*a>ee)break;if("outline"===m)if(J){var Me=Y.getAdvanceWidth(ae[we],a),Se=Y.getPath(ae[we],0-xe*Me+h,me+ye,a,be);Se&&(Se.fill="rgba(255,255,255,0)",Se.stroke=z,Se.strokeWidth=v,Se.draw(e))}else e.lineWidth=v,e.strokeStyle=z,f?X(e,ae[we],h,me,!0):e.strokeText(ae[we],0,me);else if(J){var Te=Y.getAdvanceWidth(ae[we],a),Ee=Y.getPath(ae[we],0-xe*Te+h,me+ye,a,be);Ee&&(Ee.fill=z,Ee.draw(e))}else e.fillStyle=z,f?X(e,ae[we],h,me,!1):e.fillText(ae[we],0,me);me+=a}}return!0}};function W(e,t,r){if(e.measureText(t).width<e.canvas.width)return e.font;for(var n=e.font;e.measureText(t).width>e.canvas.width;)r--,e.font=n.replace(/\d+px/,r+"px");return e.font}function X(e,t,r,n,i){var a=e.measureText(t).width,o=(e.canvas.width-h-d-a)/(t.length-1);do{var s=t.substr(0,1);t=t.substr(1),i?e.strokeText(s,r,n):e.fillText(s,r,n);var l=0;r+=a-(l=""==t?0:e.measureText(t).width)+o,a=l}while(""!=t)}return t.canvasOperations?t.canvasOperations.push(H):t.canvasOperations=[H],t}};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(187)),i=u(r(447)),a=u(r(186)),o=u(r(448)),s=u(r(449)),l=u(r(450));function u(e){return e&&e.__esModule?e:{default:e}}t.default={Image:n.default,Canvas:i.default,CanvasComposite:a.default,CanvasFill:o.default,CanvasLinearGradient:s.default,CanvasText:l.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={DirectionalLight:{schema:{lightType:{label:"type",type:"String",defaultValue:"DirectionalLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},intensity:{label:"Intensity",type:"Number",defaultValue:.8},sourceAngle:{label:"Source Angle",type:"Number",defaultValue:0,step:.1,minValue:0,maxValue:20},shadow:{label:"Enable",type:"Boolean",defaultValue:!1},autoShadow:{label:"Auto Shadow",type:"Boolean",default:!1},showShadowCamera:{label:"Show Frustum",type:"Boolean",defaultValue:!1},shadowSide:{label:"Side",type:"Options",defaultValue:"back",values:["front","back","double"],labels:["Front","Back","Double"]},shadowBias:{label:"Bias",type:"Number",defaultValue:0},shadowSize:{label:"Map Size",type:"Number",defaultValue:512},shadowCameraSize:{label:"Camera Size",type:"Number",defaultValue:500,minValue:.1},shadowNearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.1},shadowFarClip:{label:"Far Clip",type:"Number",defaultValue:1e3},shadowFrustumColor:{label:"Frustum Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}}}},SpotLight:{schema:{lightType:{label:"type",type:"String",defaultValue:"SpotLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},radius:{label:"Radius",type:"Number",defaultValue:0,minValue:0,step:.01},intensity:{label:"Intensity",type:"Number",defaultValue:.8},distance:{label:"Cutoff Distance",type:"Number",defaultValue:0},coneAngle:{label:"Cone Angle",type:"Number",defaultValue:60},coneFalloff:{label:"Cone Falloff",type:"Number",defaultValue:0},decayExponent:{label:"Decay Exponent",type:"Number",defaultValue:0},shadow:{label:"Enable",type:"Boolean",defaultValue:!1},shadowSide:{label:"Side",type:"Options",defaultValue:"back",values:["front","back","double"],labels:["Front","Back","Double"]},shadowBias:{label:"Bias",type:"Number",defaultValue:-0},shadowSize:{label:"Map Size",type:"Number",defaultValue:512},autoShadow:{label:"Auto Shadow",type:"Boolean",default:!1},shadowNearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.1},shadowFarClip:{label:"Far Clip",type:"Number",defaultValue:1e3},showShadowCamera:{label:"Show Frustum",type:"Boolean",defaultValue:!1},shadowFrustumColor:{label:"Frustum Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},iesProfile:{label:"IES Profile",type:"Plug",defaultValue:null,plug:"IESProfile"}}},PointLight:{schema:{lightType:{label:"type",type:"String",defaultValue:"PointLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},intensity:{label:"Intensity",type:"Number",defaultValue:.8},radius:{label:"Radius",type:"Number",defaultValue:0,minValue:0,step:.01},distance:{label:"Cutoff Distance",type:"Number",defaultValue:0},decayExponent:{label:"Decay Exponent",type:"Number",defaultValue:0},shadow:{label:"Enable",type:"Boolean",defaultValue:!1},shadowSide:{label:"Side",type:"Options",defaultValue:"back",values:["front","back","double"],labels:["Front","Back","Double"]},shadowBias:{label:"Bias",type:"Number",defaultValue:0},shadowSize:{label:"Map Size",type:"Number",defaultValue:512},shadowNearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.5},shadowFarClip:{label:"Far Clip",type:"Number",defaultValue:500},iesProfile:{label:"IES Profile",type:"Plug",defaultValue:null,plug:"IESProfile"}}},HemisphereLight:{schema:{lightType:{label:"type",type:"String",defaultValue:"HemisphereLight"},color:{label:"Sky Color",type:"Color",defaultValue:{r:.2,g:.52,b:1}},gndColor:{label:"Sky Color",type:"Color",defaultValue:{r:1,g:.78,b:.5}},intensity:{label:"Intensity",type:"Number",defaultValue:.6}}},AreaLight:{schema:{lightType:{label:"type",type:"String",defaultValue:"AreaLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},intensity:{label:"Intensity",type:"Number",defaultValue:10},width:{label:"Source Width",type:"Number",defaultValue:1},height:{label:"Source Height",type:"Number",defaultValue:1},shadow:{label:"Enable",type:"Boolean",defaultValue:!1},shadowSide:{label:"Side",type:"Options",defaultValue:"back",values:["front","back","double"],labels:["Front","Back","Double"]},shadowBias:{label:"Bias",type:"Number",defaultValue:0}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(188),i={environment:!0,schema:{baseMap:{label:"Image",type:"Plug",plug:"Image"},baseUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},baseMapTransparent:{label:"Image Transparent",type:"Boolean",defaultValue:!1},baseColor:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},baseFalloff:{label:"Falloff",type:"Boolean",defaultValue:!1},baseFalloffMap:{label:"Image",type:"Plug",plug:"Image"},baseFalloffUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},baseFalloffColor:{label:"Falloff Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94},animatable:!0},renderCategory:{label:"Render Category",type:"Options",values:[n.RenderCategories.AUTO,n.RenderCategories.OPAQUE,n.RenderCategories.TRANSPARENT],labels:["Automatic","Force Opaque","Force Transparent"],defaultValue:n.RenderCategories.AUTO},opacityMap:{label:"Image",type:"Plug",plug:"Image"},opacityUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},opacityFactor:{label:"Factor",type:"Number",defaultValue:1,maxValue:1,minValue:0,step:.01,animatable:!0},opacityFalloffMap:{label:"Image",type:"Plug",plug:"Image"},opacityFalloffUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},opacityFalloffFactor:{label:"Falloff Factor",type:"Number",defaultValue:1,maxValue:1,minValue:0,step:.01,animatable:!0},depthWrite:{label:"Depth Write",type:"Boolean",defaultValue:!0},depthTest:{label:"Depth Test",type:"Boolean",defaultValue:!0},alphaTest:{label:"Alpha Test",type:"Boolean",defaultValue:!1},alphaTestMinimum:{label:"Alpha Test Minimum",type:"Number",defaultValue:0,maxValue:1,minValue:0,step:.01},specularMap:{label:"Image",type:"Plug",plug:"Image"},specularUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},specularColor:{label:"Color",type:"Color",defaultValue:{r:.5,g:.5,b:.5},animatable:!0},roughness:{label:"Roughness",type:"Number",defaultValue:.25,minValue:0,maxValue:1,step:.01,animatable:!0},roughnessMap:{label:"Image",type:"Plug",plug:"Image"},roughnessUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},metallic:{label:"Metallic",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.01,animatable:!0},metallicMap:{label:"Image",type:"Plug",plug:"Image"},metallicUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},clearCoat:{label:"Thickness",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.01,animatable:!0},clearCoatRoughness:{label:"Roughness",type:"Number",defaultValue:.25,minValue:0,maxValue:1,step:.01,animatable:!0},clearCoatBumpMap:{label:"Image",type:"Plug",plug:"Image"},clearCoatBumpUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},clearCoatBumpScale:{label:"Scale Factor",type:"Number",defaultValue:1,minValue:-5,maxValue:5,step:.1,animatable:!0},aoMap:{label:"Image",type:"Plug",plug:"Image"},aoUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},aoMapIntensity:{label:"Factor",type:"Number",defaultValue:1,maxValue:1,minValue:0,step:.01,animatable:!0},lightMap:{label:"Image",type:"Plug",plug:"Image"},lightUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},ambientColor2:{label:"Color",type:"Color",animatable:!0,defaultValue:{r:0,g:0,b:0}},emissiveMap:{label:"Image",type:"Plug",plug:"Image"},emissiveUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},emissiveColor:{label:"Color",type:"Color",animatable:!0,defaultValue:{r:0,g:0,b:0}},emissiveScale:{label:"Scale",type:"Number",defaultValue:1,minValue:0,maxValue:100,step:.1,animatable:!0},emissiveLabel:{type:"Label",align:"right",defaultValue:"Emissive uses the second UV channel."},translucencyColor:{label:"Color",type:"Color",animatable:!0,defaultValue:{r:0,g:0,b:0}},translucencyMap:{label:"Image",type:"Plug",plug:"Image"},translucencyNormalAlpha:{label:"Normal Alpha",type:"Number",defaultValue:.75,minValue:0,maxValue:1,step:.05,animatable:!0},translucencyNormalPower:{label:"Normal Power",type:"Number",defaultValue:2,minValue:.01,maxValue:100,step:.05,animatable:!0},translucencyViewAlpha:{label:"View Alpha",type:"Number",defaultValue:.75,minValue:0,maxValue:1,step:.05,animatable:!0},translucencyViewPower:{label:"View Power",type:"Number",defaultValue:2,minValue:.01,maxValue:100,step:.05,animatable:!0},bumpMap:{label:"Image",type:"Plug",plug:"Image"},bumpUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},bumpScale:{label:"Scale Factor",type:"Number",defaultValue:1,minValue:-5,maxValue:5,step:.1,animatable:!0},displacementMap:{label:"Image",type:"Plug",plug:"Image"},displacementScale:{label:"Scale Factor",type:"Number",defaultValue:1,minValue:-5,maxValue:5,step:.1,animatable:!0},displacementBias:{label:"Offset/Bias",type:"Number",defaultValue:0,step:.1,animatable:!0},normalMap:{label:"Image",type:"Plug",plug:"Image"},normalUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},normalFactor:{label:"Scale Factor",type:"Number",defaultValue:1,minValue:-100,maxValue:100,step:.001,animatable:!0},normalRedFlip:{label:"Red Channel Flip",type:"Boolean",defaultValue:!1},normalGreenFlip:{label:"Green Channel Flip",type:"Boolean",defaultValue:!1},anisotropyLabel:{type:"Label",align:"right",defaultValue:"Anisotropy requires the Tangent operator."},anisotropyMap:{label:"Image",type:"Plug",plug:"Image"},anisotropyUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},anisotropy:{label:"Offset",type:"Number",defaultValue:0,minValue:-1,maxValue:1,step:.025,animatable:!0},anisotropyRotationMap:{label:"Image",type:"Plug",plug:"Image"},anisotropyRotationUVChannel:{label:"UV Channel",type:"Text",defaultValue:"",animatable:!1},anisotropyRotation:{label:"Rotation Offset",type:"Number",defaultValue:0,minValue:-1,maxValue:1,step:.025,animatable:!0},overrideEnvironment:{label:"Override Environment",type:"Boolean",defaultValue:!1},triplanarRepeat:{label:"Repeat",type:"Number",defaultValue:1,step:.1,animatable:!0},triplanarBlend:{label:"Blend",type:"Number",defaultValue:.5,minValue:0,maxValue:1,step:.01,animatable:!0},triplanarEnabledMap:{label:"BaseMap",type:"Boolean",defaultValue:!1},triplanarEnabledNormalMap:{label:"Normal",type:"Boolean",defaultValue:!1},triplanarEnabledBumpMap:{label:"Bump",type:"Boolean",defaultValue:!1},triplanarEnabledRoughnessMap:{label:"Roughness",type:"Boolean",defaultValue:!1}}},a={schema:{imageSourceType:{label:"Image Source Type",type:"Options",values:[n.CubeMapSourceTypes.CUBE,n.CubeMapSourceTypes.LATLONG],labels:["6 Faces","Single Latlong"],defaultValue:n.CubeMapSourceTypes.CUBE},map0:{label:"Map ( x)",type:"Plug",plug:"Image"},map1:{label:"Map (-x)",type:"Plug",plug:"Image"},map2:{label:"Map ( y)",type:"Plug",plug:"Image"},map3:{label:"Map (-y)",type:"Plug",plug:"Image"},map4:{label:"Map ( z)",type:"Plug",plug:"Image"},map5:{label:"Map (-z)",type:"Plug",plug:"Image"},latLongMap:{label:"Lat/Longitude",type:"Plug",plug:"Image"}},update:function(e,t,r){r.node;var i=e.imageSourceType===n.CubeMapSourceTypes.CUBE;t.cubeSource=i,t.maps=[e.map0,e.map1,e.map2,e.map3,e.map4,e.map5],t.latLongMap=e.latLongMap}},o={environment:!0,schema:{ior:{type:"Number",label:"IOR",minValue:1,maxValue:5,defaultValue:1.6,step:.05},transmissive:{type:"Color",label:"Color",defaultValue:16777215},absorptionFactor:{type:"Number",label:"Absorption Factor",defaultValue:2,minValue:0,step:.1},bounces:{type:"Number",label:"Max Internal Bounces",defaultValue:2,minValue:1,maxValue:5,isInteger:!0},boostFactor:{type:"Number",label:"Boost Factor",defaultValue:1,minValue:.5,maxValue:3,step:.05},abbeNumber:{type:"Number",label:"Abbe Number",defaultValue:60,minValue:10,maxValue:100},enableSparkles:{type:"Boolean",label:"Enabled",defaultValue:!1},sparkleCount:{type:"Number",label:"Count",defaultValue:5,minValue:3,maxValue:20,isInteger:!0},mode:{label:"Mode",type:"Options",values:[n.GemMaterialModes.FULL,n.GemMaterialModes.SIMPLE,n.GemMaterialModes.SIMPLE_TWO_LAYER,n.GemMaterialModes.LEGACY],labels:["Full","Simple","Simple (Two Layer)","Legacy"],defaultValue:2},squishFactor:{type:"Vec3",label:"Squish Factor",step:.01,minValue:.001,defaultValue:{x:1,y:1,z:1}}}};t.default={Material:{schema:{color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}}},update:function(e,t){return t.color=e.color}},Physical:i,MaterialReference:{schema:{defaultColor:{label:"Default Color",type:"Color",defaultValue:{r:1,g:1,b:1}},reference:{type:"Plug",plug:"Material",label:"Reference"}},update:function(e,t){t.color=e.defaultColor}},Reference:{schema:{defaultColor:{label:"Default Color",type:"Color",defaultValue:11579568},reference:{type:"Plug",plug:"Material",label:"Reference"}},update:function(e,t){if(e.reference)return e.reference;t.defaultColor=e.defaultColor}},EnvironmentMap:{schema:{thumbnailImage:{label:"Thumbnail",type:"Plug",plug:"Image"},irradianceCubeMap:{label:"Irradiance",type:"Plug",plug:"Material"},specularCubeMap:{label:"Specular",type:"Plug",plug:"Material"},intensity:{label:"Intensity",type:"Number",defaultValue:1,minValue:.001,maxValue:100,step:.1,animatable:!0},giImage:{label:"Global Illumination",type:"Plug",plug:"Image"}}},CubeMap:a,Standard:{schema:{diffuseColor:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}}}},ProxyReference:{schema:{webgl:{type:"Plug",label:"WebGL Material",plug:"Material"},vray:{type:"Plug",label:"VRay Material",plug:"Material"}},update:function(e,t){var r=e.webgl;return r&&(r.vrayMtl=e.vray),r||t}},MultiID:{schema:{defaultColor:{label:"Default Color",type:"Color",defaultValue:{r:.5,g:.5,b:.5}},material0:{type:"Plug",plug:"Material",label:"Material ID 0"},material1:{type:"Plug",plug:"Material",label:"Material ID 1"},material2:{type:"Plug",plug:"Material",label:"Material ID 2"},material3:{type:"Plug",plug:"Material",label:"Material ID 3"},material4:{type:"Plug",plug:"Material",label:"Material ID 4"},material5:{type:"Plug",plug:"Material",label:"Material ID 5"},material6:{type:"Plug",plug:"Material",label:"Material ID 6"},material7:{type:"Plug",plug:"Material",label:"Material ID 7"},material8:{type:"Plug",plug:"Material",label:"Material ID 8"},material9:{type:"Plug",plug:"Material",label:"Material ID 9"},material10:{type:"Plug",plug:"Material",label:"Material ID 10"},material11:{type:"Plug",plug:"Material",label:"Material ID 11"},material12:{type:"Plug",plug:"Material",label:"Material ID 12"},material13:{type:"Plug",plug:"Material",label:"Material ID 13"},material14:{type:"Plug",plug:"Material",label:"Material ID 14"},material15:{type:"Plug",plug:"Material",label:"Material ID 15"},material16:{type:"Plug",plug:"Material",label:"Material ID 16"},material17:{type:"Plug",plug:"Material",label:"Material ID 17"},material18:{type:"Plug",plug:"Material",label:"Material ID 18"},material19:{type:"Plug",plug:"Material",label:"Material ID 19"},material20:{type:"Plug",plug:"Material",label:"Material ID 20"},material21:{type:"Plug",plug:"Material",label:"Material ID 21"},material22:{type:"Plug",plug:"Material",label:"Material ID 22"},material23:{type:"Plug",plug:"Material",label:"Material ID 23"},material24:{type:"Plug",plug:"Material",label:"Material ID 24"},material25:{type:"Plug",plug:"Material",label:"Material ID 25"},material26:{type:"Plug",plug:"Material",label:"Material ID 26"},material27:{type:"Plug",plug:"Material",label:"Material ID 27"},material28:{type:"Plug",plug:"Material",label:"Material ID 28"},material29:{type:"Plug",plug:"Material",label:"Material ID 29"},multiID:{type:"Boolean",label:"Is MultiID",defaultValue:!0}}},"vray/VRmat":{schema:{visMatZipFile:{type:"File",hidden:!0},originalZip:{type:"File",hidden:!0},viewColor:{type:"Color",defaultValue:{r:.94,g:.94,b:.94},label:"Viewport Color"}}},"vray/VisMat":{schema:{visMatZipFile:{type:"File",hidden:!0},originalZip:{type:"File",hidden:!0},viewColor:{type:"Color",defaultValue:{r:.94,g:.94,b:.94},label:"Viewport Color"}}},GemMaterial:o,LineMaterial:{schema:{color:{label:"Color",type:"Color",defaultValue:11579568,animatable:!0},thickness:{label:"Thickness",type:"Number",defaultValue:1,minValue:1,maxValue:10,step:1,animatable:!0}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{activated:{label:"Activated",type:"Boolean",defaultValue:!0},filename:{label:"Filename",type:"Text",defaultValue:null},fileFormat:{label:"File Format",type:"Text",defaultValue:null},over_res:{label:"On",type:"Boolean",defaultValue:!1},over_res_x:{label:"Image Width",type:"Number",defaultValue:1280,isInteger:!0},over_res_y:{label:"Image Height",type:"Number",defaultValue:720,isInteger:!0},render_cam:{type:"Node",label:"Camera",filter:function(e){return"Camera"===e.get("type")}},render_red:{type:"Node",label:"Renderer",filter:function(e){return"Renderer"===e.get("type")}}}};t.default={Pass:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2),a=(n=i)&&n.__esModule?n:{default:n};var o={schema:{showThreekitLogo:{type:"Boolean",defaultValue:!1},autoRotate:{label:"Auto-Rotate Camera",type:"Boolean",defaultValue:!1},autoRotateNode:{label:"Rotate Node",type:"Node"},autoRotateSpeed:{label:"Rotate Speed (seconds)",type:"Number",minValue:1,maxValue:60,defaultValue:12},autoRotateDirection:{label:"Rotate Direction",type:"Options",values:["-","+"],labels:["Clockwise","Counter-clockwise"],defaultValue:"-"},autoRotateResumeTime:{label:"Resume Time (seconds)",type:"Number",minValue:0,maxValue:10,defaultValue:5},camera:{label:"Camera",type:"Node"},constraintCameraY:{label:"Constrain Camera to Positive Y",type:"Boolean",defaultValue:!1},orbitTarget:{label:"Orbit Target",type:"Node"},orbitMode:{label:"Orbit Mode",type:"Options",values:["gyroscope","trackball","firstPerson","nodeRotate"],labels:["Gyropscope","Trackball","First Person","Node Rotate"],defaultValue:"gyroscope"},nodeRotateAxis:{label:"Node Rotation Axis",type:"Options",values:["y","t","g"],labels:["Y","Trackball","Gyroscope"],defaultValue:"y"},fixedAzimuth:{label:"Fixed Camera Azimuth Angle",type:"Boolean",defaultValue:!1},overrideNavigation:{label:"Override Camera Orbit Mode",type:"Boolean",defaultValue:!0},autoFitClipPlanes:{label:"Auto-Adjust Clip Planes",type:"Boolean",defaultValue:!0},vrMode:{label:"VR Mode",type:"Options",values:["firstperson","orbit"],labels:["1st Person","Orbit"],defaultValue:"firstperson"},vrCamera:{label:"VR Camera",type:"Node"},toneMapStyle:{label:"Style",type:"Options",values:["Linear","Reinhard","Cineon","Filmic"],defaultValue:"Filmic"},toneMapExposureGain:{label:"Exposure Gain",type:"Number",defaultValue:1,minValue:0,maxValue:20,step:.1},toneMapWhitePoint:{label:"White Point",type:"Number",defaultValue:1,minValue:0,maxValue:20,step:.1},dofPass:{label:"Enabled",type:"Boolean",defaultValue:!1},dofMaxBlur:{label:"Max Blur",type:"Number",defaultValue:10,minValue:0,maxValue:100,step:.1},aaStyle:{label:"Style",type:"Options",values:["None","FXAA","MSAA","TRAA"],labels:["None","FXAA","MSAA (Best)","TRAA"],defaultValue:"FXAA"},traaJitterLevel:{label:"TRAA Jitter Level",type:"Number",defaultValue:5,minValue:1,maxValue:5,step:1},saoPass:{label:"Enabled",type:"Boolean",defaultValue:!1},saoIntensity:{label:"Intensity",type:"Number",defaultValue:1,minValue:0,maxValue:1e3,step:.1},saoScale:{label:"Scale",type:"Number",defaultValue:24,minValue:0,maxValue:1e3,step:.1},saoPassType:{label:"SAO Type",type:"Options",values:[0,1],labels:["SAO","SAO2"],defaultValue:0},sao2Bias:{label:"SAO Bias",type:"Number",defaultValue:.005,minValue:0,maxValue:.02,step:1e-4},sao2Intensity:{label:"SAO Intensity",type:"Number",defaultValue:.7,minValue:0,maxValue:1,step:.01},sao2Radius:{label:"SAO Radius",type:"Number",defaultValue:.047,minValue:0,maxValue:.5,step:.001},sao2Sharpness:{label:"SAO Sharpness",type:"Number",defaultValue:1.3,minValue:.5,maxValue:5,step:.01},sao2Blur:{label:"SAO Blur",type:"Boolean",defaultValue:!0},ssrQuality:{label:"Quality",type:"Options",values:[0,1,2,3],labels:["Off","Low","Medium","High"],defaultValue:0},bloomPass:{label:"Enabled",type:"Boolean",defaultValue:!1},bloomThreshold:{label:"Luminance Threshold",type:"Number",defaultValue:.9,minValue:0,maxValue:1,step:.1},sparkleTexture:{label:"Image",type:"Plug",plug:"Image"},sparkleSize:{label:"World Size",type:"Number",defaultValue:.05,minValue:0,maxValue:1,step:.001},reflectiveFloor:{label:"Enabled",type:"Boolean",defaultValue:!1},reflectiveFloorWidth:{label:"Width",type:"Number",defaultValue:1,minValue:0,maxValue:1e3,step:1},reflectiveFloorRoughness:{label:"Roughness",type:"Number",defaultValue:0,minValue:0,maxValue:10,step:.1},reflectiveFloorMetallic:{label:"Metallic",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1},reflectiveFloorFade:{label:"Fade",type:"Number",defaultValue:0,minValue:0,maxValue:1e4,step:.1},reflectiveFloorHeight:{label:"Height",type:"Number",defaultValue:0,minValue:-100,maxValue:100,step:.1},reflectiveFloorOpacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1},reflectiveFloorFresnel:{label:"Fresnel Strength",type:"Number",defaultValue:1,minValue:-1,maxValue:1,step:.1},reflectiveFloorExcludeServer:{label:"Exclude on Server",type:"Boolean",defaultValue:!1},configurator:{label:"Configurator",type:"String",hidden:!0,defaultValue:""},gravity:{label:"Gravity",type:"Vec3",step:1,defaultValue:[0,-9.8,0]},shadowType:{label:"Quality",type:"Options",values:[0,1,2,3],labels:["Basic","Medium","High","Ultra"],defaultValue:2},transparencyQuality:{label:"Quality",type:"Options",values:[0,1],labels:["Low","High"],defaultValue:0},singleAnnotationOpen:{label:"Only one annotation open",type:"Boolean",defaultValue:!1},forceDoubleSided:{label:"Force Double Sided",type:"Boolean",defaultValue:!1}},update:function(e,t,r){r.previousResult;var n=r.cameraController,i=r.store,o=r.node,s=r.sceneId;(0,a.default)(t,e),o.id===s&&n.setPlayerData(i,t)}};t.default={Player:o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=o(r(290)),a=o(r(113));function o(e){return e&&e.__esModule?e:{default:e}}var s={selfTransform:!0,schema:{count:{type:"Number",label:"Count",defaultValue:3,step:1,minValue:1},translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:[1,0,0]},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:[0,0,0]},scale:{label:"Scale",type:"Vec3",minValue:1e-4,step:.1,defaultValue:[1,1,1]},pivotType:{label:"Pivot",type:"Options",display:"Dropdown",labels:["None","Node"],values:["None","Node"],defaultValue:"None"},pivotPolyMesh:{label:"Pivot Mesh",type:"Node"}},update:function(e,t,r){var o=r.getWorldTransform,s=r.node,l=r.store;if(!t.mesh)return t;var u=e.count,c=e.translation,f=e.rotation,h=e.scale,d=e.pivotType,p=e.pivotPolyMesh,m=p&&l.get("sceneGraph").evaluatedNodes[p],v=f.clone().multiplyScalar(Math.PI/180),g=(new n.Euler).setFromVector3(v,"ZYX"),y=new n.Matrix4;if("Node"===d&&m){var x=o(m.PolyMesh.id),b=o(s.id);y.getInverse(x,!0).multiply(b)}c=new n.Vector3(c.x,c.y,c.z),f=(new n.Quaternion).setFromEuler(g),h=new n.Vector3(h.x,h.y,h.z);var w=(0,i.default)(t.mesh,u,c,f,h,y),_=w.meshArray,M=w.transforms;return t.mesh=(0,a.default)(_,M),t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),a=r(143),o=(n=a)&&n.__esModule?n:{default:n};var s=o.default.AxisTypes,l={schema:{defaultAxis:{label:"Default Axis",type:"Options",display:"Radio",defaultValue:s.Z,labels:["X","Y","Z"],values:[s.X,s.Y,s.Z]},bendAngle:{label:"Angle",type:"Number",defaultValue:45,step:1,minValue:-360,maxValue:360,animatable:!0},rotation:{label:"Bend Rotation",type:"Vec3",defaultValue:new i.Vector3(0,0,0),animatable:!0},translation:{label:"Bend Pivot",type:"Vec3",defaultValue:new i.Vector3(0,0,0),animatable:!0},fixedEndsEnabled:{label:"Fixed Ends",type:"Boolean",defaultValue:!1,animatable:!1}},update:function(e,t){if(!t.mesh)return t;var r=e.defaultAxis,n=e.bendAngle,i=e.rotation,a=e.translation,s=e.fixedEndsEnabled;return i=i.clone().multiplyScalar(-1),a=a.clone().multiplyScalar(-1),t.mesh=(0,o.default)(t.mesh,r,n,i,a,s),t}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(549),a=(n=i)&&n.__esModule?n:{default:n};var o={label:"Channel",type:"Text",name:"Channel"},s={label:"Weight",type:"Number",name:"Weight",minValue:-1,maxValue:10,step:.05,defaultValue:0};var l={schema:function(e){for(var t={},r=0;r<e;++r)t["chan"+r]=o,t["beta"+r]=s;return t}(16),update:function(e,t){var r=t.mesh;if(!r)return t;for(var n=[],i=[],o=0;o<16;++o){var s=e["chan"+o],l=e["beta"+o];s&&l&&(n.push(s),i.push(l))}return r.blendShapes&&(t.mesh=(0,a.default)(r,n,i)),t}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(286),a=(n=i)&&n.__esModule?n:{default:n};var o={schema:{bsChannel:{label:"Channel",type:"Text",defaultValue:"shape0"},bsShape:{label:"Shape",type:"Plug",plug:"PolyMesh"}},update:function(e,t){var r=t.mesh;if(!r)return t;var n=e.bsChannel,i=e.bsShape.mesh;if(n.length&&i){var o=i.positions.values;if(r.positions.values.length===o.length){var s=r.normalMap.values,l=i.normalMap.values;s&&l&&s.length===l.length||(l=null);var u=r.blendShapes;u||(u=r.blendShapes={}),u[n]=new a.default(o,l,null)}else console.log("The Blend Shape cannot be assigned because the number of vertices does not match with the original shape")}return t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(569),a=(n=i)&&n.__esModule?n:{default:n};var o={selfProperties:!0,schema:{depth:{type:"Number",label:"Depth",defaultValue:1,step:.1,minValue:0,animatable:!0},width:{type:"Number",label:"Width",defaultValue:1,step:.1,minValue:0,animatable:!0},height:{type:"Number",label:"Height",defaultValue:1,step:.1,minValue:0,animatable:!0},depthSegments:{type:"Number",label:"Depth Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0,i18n:{en:{},xn:{label:"XXX"},hn:{label:"DX"}}},widthSegments:{type:"Number",label:"Width Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0},heightSegments:{type:"Number",label:"Height Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0}},update:function(e,t){var r=e.width,n=e.height,i=e.depth,o=e.widthSegments,s=e.heightSegments,l=e.depthSegments;t.mesh=(0,a.default)(r,n,i,o,s,l)}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(288),a=(n=i)&&n.__esModule?n:{default:n};var o={schema:{},update:function(e,t){return t.mesh?(t.mesh=(0,a.default)(t.mesh),t):t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(570),a=(n=i)&&n.__esModule?n:{default:n};var o={selfProperties:!0,schema:{radius:{type:"Number",label:"Radius",defaultValue:.5,minValue:.1,step:.1},height:{type:"Number",label:"Height",defaultValue:1,minValue:.1,step:.1},radiusSegments:{label:"Radial Segments",type:"Integer",defaultValue:12,minValue:4,maxValue:100},heightSegments:{label:"Height Segments",type:"Integer",defaultValue:10,minValue:1,maxValue:100}},update:function(e,t){var r=e.radius,n=e.height,i=e.radiusSegments,o=e.heightSegments;t.mesh=(0,a.default)(r,n,i,o)}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),a=r(195),o=(n=a)&&n.__esModule?n:{default:n};var s={schema:{useX:{label:"X",type:"Boolean",defaultValue:!0},useY:{label:"Y",type:"Boolean",defaultValue:!0},useZ:{label:"Z",type:"Boolean",defaultValue:!0},alignment:{label:"Alignment",type:"Vec3",step:.01,defaultValue:{x:0,y:0,z:0},minValue:-1,maxValue:1}},update:function(e,t){var r=t.mesh;if(!r)return t;var n=r.boundingBox,a=n.getCenter(),s=n.getSize(),l=new i.Vector3,u=e.useX,c=e.useY,f=e.useZ,h=e.alignment;u&&(l.x=-a.x+h.x*s.x/2),c&&(l.y=-a.y+h.y*s.y/2),f&&(l.z=-a.z+h.z*s.z/2);var d=(new i.Matrix4).makeTranslation(l.x,l.y,l.z);return t.mesh=(0,o.default)(r,d),t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(295),a=(n=i)&&n.__esModule?n:{default:n};var o={selfProperties:!0,schema:{base:{type:"Number",label:"Base Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},height:{type:"Number",label:"Height",defaultValue:1,minValue:0,step:.1,animatable:!0},radiusSegments:{label:"Radial Segments",type:"Integer",defaultValue:12,minValue:3,maxValue:200,animatable:!0},heightSegments:{label:"Height Segments",type:"Integer",defaultValue:1,minValue:1,maxValue:200,animatable:!0},openEnded:{label:"Open Base",type:"Boolean",defaultValue:!1,animatable:!0}},update:function(e,t){var r=e.base,n=e.height,i=e.radiusSegments,o=e.heightSegments,s=e.openEnded;t.mesh=(0,a.default)(0,r,n,i,o,s)}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(572),a=(n=i)&&n.__esModule?n:{default:n};var o=8,s=Math.PI/180;var l={schema:function(){for(var e={radius:{type:"Number",label:"Radius",minValue:0,step:.1},segments:{type:"Number",label:"Segments",defaultValue:50,minValue:1,isInteger:!0},phiStart:{type:"Number",label:"Phi Start",defaultValue:0,step:1,minValue:0,maxValue:360},phiLength:{type:"Number",label:"Phi Length",defaultValue:360,step:1,minValue:0,maxValue:360},interpolationType:{type:"Options",label:"Interpolation",display:"Radio",labels:["Linear","Smooth Step"],values:[0,1],defaultValue:1}},t=0;t<o;++t)e["crossSectionNode"+t]={type:"Plug",plug:"PolyMesh",label:"Cross Section "+(t+1)},e["locationAngle"+t]={type:"Number",label:"Angle"+(t+1),defaultValue:0,step:1,minValue:0,maxValue:360};return e}(),update:function(e,t){for(var r=e.radius,n=e.segments,i=e.phiStart,l=e.phiLength,u=e.interpolationType,c=[],f=void 0,h=void 0,d=0;d<o;++d)f=e["crossSectionNode"+d],h=e["locationAngle"+d],f&&f.mesh&&f.mesh.positions.values.length&&!isNaN(h)&&c.push({mesh:f.mesh,locationAngle:h*s});return c.length<1?t:(t.mesh=(0,a.default)(c,r,n,i*s,l*s,u),t)}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(295),a=(n=i)&&n.__esModule?n:{default:n};var o={selfProperties:!0,schema:{radiusTop:{type:"Number",label:"Top Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},radiusBottom:{type:"Number",label:"Bottom Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},height:{type:"Number",label:"Height",defaultValue:1,minValue:0,step:.1,animatable:!0},radiusSegments:{label:"Radial Segments",type:"Integer",defaultValue:24,minValue:3,maxValue:200,animatable:!0},heightSegments:{label:"Height Segments",type:"Integer",defaultValue:1,minValue:1,maxValue:200,animatable:!0},openEnded:{label:"Open Ended",type:"Boolean",defaultValue:!1,animatable:!0}},update:function(e,t){var r=e.radiusTop,n=e.radiusBottom,i=e.height,o=e.radiusSegments,s=e.heightSegments,l=e.openEnded;t.mesh=(0,a.default)(r,n,i,o,s,l)}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(55)),i=o(r(552)),a=o(r(292));function o(e){return e&&e.__esModule?e:{default:e}}var s={schema:{removeOrphans:{label:"Remove Unused Values",type:"Boolean",defaultValue:!0},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"},componentType:{type:"Object",hidden:!0,defaultValue:"Vertex"}},update:function(e,t){if(!t.mesh)return t;var r=e.componentType,o=(0,n.default)(e.indices);return t.mesh=(0,i.default)(t.mesh,o,r),e.removeOrphans&&(0,a.default)(t.mesh),t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(574),a=(n=i)&&n.__esModule?n:{default:n};var o={schema:{radius:{type:"Number",label:"Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},segments:{type:"Integer",label:"Segments",defaultValue:12,minValue:3,maxValue:200,animatable:!0},thetaStart:{label:"Theta Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},thetaLength:{label:"Theta Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0},removeDuplicate:{label:"Remove Duplicate Vertices",type:"Boolean",defaultValue:!1,hidden:!0}},update:function(e,t){var r=e.radius,n=e.segments,i=e.thetaStart,o=e.thetaLength;t.mesh=(0,a.default)(r,n,i,o)}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtrudeTypes=void 0;var n=o(r(55)),i=o(r(557)),a=o(r(77));function o(e){return e&&e.__esModule?e:{default:e}}var s=t.ExtrudeTypes={individualPolygon:1,averageNormal:2,localNormal:3},l={name:"Extrude",schema:{extrudeLength:{label:"Length",type:"Number",step:.01,defaultValue:.2,animatable:!0},extrudeType:{label:"Extrude Type",type:"Options",display:"Dropdown",labels:["Group - Average Normal","Group - Local Normals","Individual Polygons"],values:[s.averageNormal,s.localNormal,s.individualPolygon],defaultValue:2},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"},insetOffset:{label:"Offset",type:"Number",step:.01,defaultValue:0},segments:{label:"Segments",type:"Number",step:1,defaultValue:1,minValue:1}},update:function(e,t){var r=t.mesh;if(!r)return t;var o=e.extrudeLength,s=e.extrudeType,l=e.indices,u=e.insetOffset,c=e.segments;if(!l)return t;var f=new a.default((0,n.default)(l),a.default.Faces);return t.mesh=(0,i.default)(r,s,f,o,u,c),t}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(196),a=(n=i)&&n.__esModule?n:{default:n};var o={schema:{shape:{label:"Shape",type:"Plug",plug:"Shape"}},update:function(e,t){var r=e.shape;return r&&r.shape&&(t.mesh=(0,a.default)(r.shape,!1)),t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(575)),i=s(r(55)),a=s(r(3)),o=r(0);function s(e){return e&&e.__esModule?e:{default:e}}var l={schema:{shape:{label:"Shape",type:"Plug",plug:"Shape"},addBackFaces:{label:"Back faces",type:"Boolean",defaultValue:!0},path:{type:"Object",defaultValue:[]},edgeIndices:{label:"Selection",type:"TextArea",defaultValue:""},useEdgeOrientation:{label:"Relative to Edge Orientation",type:"Boolean",defaultValue:!1}},update:function(e,t){var r=e.shape,s=e.path,l=e.useEdgeOrientation;if(r&&r.shape){var u=e.edgeIndices;u&&(u=(0,i.default)(u));var c=new a.default(o.Vector3,s.length/3,s);t.mesh=(0,n.default)(r.shape,c,u,l)}return t}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(296)),i=r(576),a=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var s={schema:{shape:{label:"Shape",type:"Plug",plug:"Shape"},addBackFaces:{label:"Back faces",type:"Boolean",defaultValue:!0},segments:{type:"Integer",defaultValue:1,minValue:1},extrudeLength:{label:"Length",type:"Number",defaultValue:1},useBevel:{labelname:"Bevel",type:"Boolean",defaultValue:!1},offset:{label:"Offset",type:"Number",defaultValue:1,minValue:0},style:{label:"Style",type:"Options",display:"Dropdown",labels:["Round","Round Both","Extended"],values:[i.ShapeBevelStyles.Round,i.ShapeBevelStyles.RoundBoth,i.ShapeBevelStyles.Extended],defaultValue:i.ShapeBevelStyles.Round},cornerRadius:{label:"Corner Radius",type:"Number",defaultValue:.5,minValue:0}},update:function(e,t){var r=e.shape;if(r&&r.shape){var i=e.addBackFaces,o=e.segments,s=e.extrudeLength;if(e.useBevel){var l=e.offset,u=e.style,c=e.cornerRadius;t.mesh=(0,a.default)(r.shape,o,s,l,u,i,c,75)}else t.mesh=(0,n.default)(r.shape,o,s,i)}return t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={schema:{geometry:{label:"Mesh",plug:"PolyMesh",type:"Plug"}},update:function(e,t){t.mesh=e.geometry&&e.geometry.mesh}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(6)),i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(r(263)),r(0)),a=r(287),o=s(r(5));s(r(113));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){var i=(0,n.default)(e).find(function(t){return e[t].unicode===r});return e[i]&&e[i].advanceWidth?e[i].advanceWidth/t:1}var u={selfProperties:!0,schema:{text:{label:"Text",type:"String",defaultValue:"Text"},curveSegments:{type:"Number",defaultValue:4,minValue:2},font:{label:"Font",type:"Plug",plug:"Font"},fontSize:{label:"Font Size",type:"Number",defaultValue:72,minValue:.1,step:1},compact:{label:"On",type:"Boolean",defaultValue:!1},padding:{label:"Offset",type:"Number",defaultValue:0},bendAngle:{label:"Angle",type:"Number",defaultValue:0,minValue:0,maxValue:90},bevel:{label:"On",type:"Boolean",defaultValue:!1},bevelSegments:{label:"Segments",type:"Integer",defaultValue:1,minValue:1},bevelOffset:{label:"Offset",type:"Number",defaultValue:0,minValue:0},bevelThreshold:{label:"Threshold ratio",type:"Number",defaultValue:2,minValue:1},bevelLength:{label:"Length",type:"Number",defaultValue:0,minValue:0},bevelStyle:{label:"Style",type:"Options",display:"Dropdown",labels:["Round","Extended"],values:[a.ShapeSetBevelStyles.Round,a.ShapeSetBevelStyles.Extended],defaultValue:a.ShapeSetBevelStyles.Round},smoothingAngle:{type:"Number",defaultValue:30,minValue:-180,maxValue:180},addRings:{label:"Add",type:"Boolean",defaultValue:!1},ringPosition:{label:"Position",type:"Number",minValue:-1,maxValue:1,defaultValue:1},ringOuterRadius:{label:"Outer Radius",type:"Number",minValue:.001,defaultValue:10},ringInnerRadius:{label:"Inner Radius",type:"Number",minValue:.001,defaultValue:9}},update:function(e,t,r){r.store;var s=r.properties,u=r.loaded,c=r.forceFetchAssets,f=(s.visible||s.prefetch&&u||c)&&e.font&&e.font.getFont();if(f&&0!==(0,n.default)(f).length){for(var h=e.curveSegments,d=e.fontSize,p=e.addRings,m=e.compact?e.padding:void 0,v=void 0===m?e.text.trim():e.text.replace(/\s+/g,""),g=f.unitsPerEm,y=f.glyphs.glyphs,x=d/72,b=[],w=[],_=0,M=0,S=null,T={thisEdges:null},E=0;E<v.length;++E){var P=!p||0!=E&&E+1!=v.length?void 0:{xPosition:0==E?-1:1,yPosition:e.ringPosition,outerRadius:e.ringOuterRadius,innerRadius:e.ringInnerRadius};if(" "===v.charAt(E))0,_+=l(y,g," ".charCodeAt(0))*x;else{var A=f.getPath(v.charAt(E),0,d,d),C=a.ShapeSet.fromPath(A,h,d,m,P),R=v.charCodeAt(E);if(void 0!==m){var I=0;S&&(I=S.getHorizontalDistance(C,M,m,T)),M=l(y,g,R)*x,_+=I,w.push(new i.Vector3(_,0,0))}else{var O=l(y,g,R)*x;w.push(new i.Vector3(_,0,0)),_+=O}S=C,b.push(C)}}if(b.length){var L=1===b.length?b[0]:a.ShapeSet.mergeShapeSets(b,w);return 0!==e.bendAngle&&L.bend(e.bendAngle),e.bevel&&e.bevelLength&&L.bevelShapeSet(e.bevelOffset,e.bevelLength,e.bevelSegments,e.bevelStyle,e.bevelThreshold,e.smoothingAngle),t.mesh=o.default.fromShapeSet(L),t}}}};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(5)),i=a(r(55));function a(e){return e&&e.__esModule?e:{default:e}}var o={schema:{materialID:{label:"Material ID",type:"Integer",step:1,minValue:0,defaultValue:0},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"},deleteAll:{label:"Delete All",type:"Boolean",defaultValue:!1}},update:function(e,t){if(!t.mesh)return t;var r=e.materialID,a=e.indices,o=e.deleteAll,s=t.mesh,l=void 0;if(o)s.materialIds=null;else{var u=s.faceRangeOffsets,c=(0,i.default)(a);if(c.length<1)return t;l=s.materialIds?new Uint32Array(s.materialIds):new Uint32Array(u.length-1);for(var f=0;f<c.length;++f)l[c[f]]=r}return t.mesh=new n.default(s,{materialIds:l}),t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(199),i=r(23),a=r(40),o={selfProperties:!0,schema:{geometry:{type:"File",label:"PolyMesh Geometry File"}},update:function(e,t,r){r.node;var o=r.store,s=r.properties,l=r.previousResult,u=r.loaded,c=r.forceFetchAssets,f=s.visible,h=e.geometry,d=(f||s.prefetch&&u||c)&&h,p=d&&o.hasApi()&&o.dispatch((0,i.getOrFetchBinary)(d)),m=p&&(0,n.convertToCNSPolyMesh)(p,d);return m&&!m.normalMap&&(m=(0,a.flatNormalMap)(m)),t.mesh=m,t.previousMesh=l&&l.mesh,t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(565),a=(n=i)&&n.__esModule?n:{default:n};var o={schema:{subdivisions:{label:"Subdivisions",type:"Number",defaultValue:1,minValue:0,maxValue:4},smoothByMaterialIds:{label:"Smooth by Material Ids",type:"Boolean",defaultValue:!0}},update:function(e,t){var r=t.mesh,n=void 0!==e.subdivisions?e.subdivisions:1;if(!r)return t;for(var i=0;i<n;i++)r=(0,a.default)(r,e.smoothByMaterialIds);return t.mesh=r,t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(577),a=(n=i)&&n.__esModule?n:{default:n};var o={selfProperties:!0,schema:{width:{label:"Width",type:"Number",defaultValue:4,minValue:0,step:.1,animatable:!0},height:{label:"Height",type:"Number",defaultValue:4,minValue:0,step:.1,animatable:!0},widthSegments:{type:"Number",label:"Width Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0},heightSegments:{type:"Number",label:"Height Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0}},update:function(e,t){var r=e.width,n=e.height,i=e.widthSegments,o=e.heightSegments;t.mesh=(0,a.default)(r,n,i,o)}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(199),i=r(23),a=r(40);var o={selfProperties:!0,schema:{binary:{type:"Binary",label:"Binary Geometry File"},reducedBinary:{type:"Binary",label:"Reduced Binary Geometry File"},operatorDisplay:{type:"Number",defaultValue:1,label:"Operator Display Type"},nbLevel:{type:"Number",defaultValue:1},level0:{type:"Binary",label:"Binary Geometry File"},level1:{type:"Binary",label:"Binary Geometry File"},level2:{type:"Binary",label:"Binary Geometry File"},level3:{type:"Binary",label:"Binary Geometry File"},level4:{type:"Binary",label:"Binary Geometry File"},clientLevel:{type:"Number",defaultValue:.5,minValue:0,maxValue:1,label:"Reduction Level"}},update:function(e,t,r){var o=r.store,s=r.properties,l=r.previousResult,u=r.loaded,c=r.forceFetchAssets,f=s.visible,h=e[function(e,t){return 1===t||1===e?"binary":(t=Math.ceil(t*e))>=e?"binary":t<=0?"level0":"level"+(t-1)}(e.nbLevel,e.clientLevel)],d=(f||s.prefetch&&u||c)&&h&&o.hasApi()&&(0,i.getOrFetchBinary)(h)(o),p=d&&(0,n.convertToCNSPolyMesh)(d,h);p&&!p.normalMap&&(p=(0,a.flatNormalMap)(p)),t.mesh=p,t.previousMesh=l&&l.mesh}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={schema:{source:{label:"Mesh",plug:"PolyMesh",type:"Plug"}},update:function(e,t){t.mesh=e.source&&e.source.mesh}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(578)),i=a(r(5));function a(e){return e&&e.__esModule?e:{default:e}}var o={schema:{phiStart:{type:"Number",label:"Phi Start",defaultValue:0,step:1,minValue:0,maxValue:360},phiLength:{type:"Number",label:"Phi End",defaultValue:360,step:1,minValue:0,maxValue:360},segments:{type:"Number",label:"Segments",defaultValue:50,minValue:1,isInteger:!0},otherPolyMesh:{type:"Node",plug:"PolyMesh",label:"Other PolyMesh"}},update:function(e,t,r){var a=r.getWorldTransform,o=r.node,s=(r.store,e.phiStart),l=e.phiLength,u=e.segments,c=e.otherPolyMesh,f=e.otherPolyMeshEvaluated,h=f&&f.PolyMesh&&f.PolyMesh.mesh;if(!h)return t.mesh=new i.default,t;var d=a(o.id),p=a(c);return t.mesh=(0,n.default)(h,u,s,l,d,p),t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(579)),i=a(r(5));function a(e){return e&&e.__esModule?e:{default:e}}var o=n.default.AxisTypes,s={schema:{referenceNode:{type:"Plug",plug:"PolyMesh",label:"Reference Node"},axis:{type:"Options",label:"Axis",display:"Radio",labels:["X","Y","Z"],values:[o.X,o.Y,o.Z],defaultValue:o.Y},repeats:{type:"Number",label:"Repeats",defaultValue:4,minValue:1,isInteger:!0},radius:{type:"Number",label:"Radius",defaultValue:1,step:.1,minValue:0,animatable:!0},revolutionAngle:{type:"Number",label:"Degrees",defaultValue:360,minValue:0,maxValue:360,step:1,animatable:!0},spacingAngle:{type:"Number",label:"Spacing Angle",defaultValue:0,maxValue:360,step:1,animatable:!0}},update:function(e,t){var r=e.referenceNode,a=e.axis,o=e.repeats,s=e.radius,l=e.revolutionAngle,u=e.spacingAngle;return r&&r.mesh?(t.mesh=(0,n.default)(r.mesh,a,o,s,l,u),t):(t.mesh=new i.default,t)}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(562),a=(n=i)&&n.__esModule?n:{default:n},o=r(0);var s={schema:{center:{label:"Local Center",type:"Vec3",defaultValue:new o.Vector3(0,0,0),step:.01,animatable:!0},rotation:{label:"Local Rotation",type:"Vec3",defaultValue:new o.Vector3(0,0,0),step:1,animatable:!0},shearFactor:{label:"Shear Factor",type:"Number",step:"0.1",defaultValue:"0",animatable:!0},vertexIndices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"}},update:function(e,t){if(!t.mesh)return t;var r=e.center,n=e.rotation,i=e.shearFactor,o=e.vertexIndices;return t.mesh=(0,a.default)(t.mesh,r,n,i,o),t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(2)),i=o(r(7)),a=o(r(5));function o(e){return e&&e.__esModule?e:{default:e}}var s={selfTransform:!0,schema:{boneNodeList:{type:"NodeList",label:"Select Bones",plug:"Bone"},optionalRootBone:{type:"Node",label:"Optional Root Bone",defaultValue:null,filter:function(e){return e.isBone()}}},update:function(e,t,r){var o=r.node,s=r.getWorldTransform,l=s(o.id),u=e.boneNodeList,c=e.optionalRootBone,f=-1;if(0===u.length)return t;var h=u.map(function(e){return s(e)});if(c)for(var d=0,p=u.length;d<p;d++){if(u[d]==c){f=d;break}}var m=t.mesh;t.mesh=function(e,t,r,o){if(!e||!e.skinning)return e;var s=e.skinning.applyTransforms(e.positions.values,t,r,o),l=new i.default({faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:e.positions.faceValueIndices,values:s}),u=(0,n.default)({},e,{positions:l});return new a.default(u)}(m,l,h,f)}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(51)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),a=l(r(294)),o=l(r(77)),s=l(r(291));function l(e){return e&&e.__esModule?e:{default:e}}var u=new i.Vector3(0,0,-1),c={name:"Slice",label:"Slice / Cut",type:"Edit",schema:{center:{label:"Local Center",type:"Vec3",defaultValue:new i.Vector3(0,0,0),step:.01,animatable:!0},rotation:{label:"Local Rotation",type:"Vec3",defaultValue:new i.Vector3(0,0,0),step:1,animatable:!0},_rotationAxis:{label:"Rotation",type:"Vec3",defaultValue:new i.Vector3(0,0,0),step:1,hidden:!0},axis:{label:"Axis",type:"Options",display:"Dropdown",labels:["X","Y","Z"],values:[1,2,3],defaultValue:1},flip:{label:"Flip",type:"Boolean",defaultValue:!1},cut:{label:"Cut",type:"Boolean",defaultValue:!1},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"}},update:function(e,t,r){var i=r.node,l=t.mesh;if(!l)return t;var c=e.center,f=e.rotation,h=e.axis,d=e.flip,p=e.cut,m=e.indices,v=m?function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=[],r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;for(r=0;r<e.length;r++)if(-1!==(s=e[r]).indexOf("-")){var l=s.split("-"),u=(0,n.default)(l,2);for(a=u[0],o=u[1],a=Number(a),o=Number(o),i=a;i<=o;i++)t.push(i)}else t.push(Number(s));return t}(m):null,g=m?new o.default(v,o.default.Faces):null,y=i.plugs.Transform[0].rotateOrder,x=(0,s.default)(f,y,h,c,u);return t.mesh=(0,a.default)(l,x,p,d,g),t}};t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(563),a=(n=i)&&n.__esModule?n:{default:n};var o={schema:{axis:{label:"Direction",type:"Vec3",step:.1,defaultValue:{x:1,y:1,z:0},animatable:!0}},update:function(e,t,r){r.store;var n=e.axis.normalize(),i=t.mesh;t.mesh=(0,a.default)(i,n)}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(554)),i=o(r(195)),a=o(r(77));function o(e){return e&&e.__esModule?e:{default:e}}var s={schema:{overlap:{type:"Number",defaultValue:0,step:.01}},update:function(e,t){if(!t.mesh)return t;for(var r=t.mesh,o=e.overlap,s=l(r,0),u=0,c=[s],f=r,h={x:-1/0,y:-1/0,z:-1/0};s.length;){var d=(0,n.default)(f,u,s,!1).max(h);if(d.lengthSq()<1/0){var p=1+o/d.length();f=(0,i.default)(f,d.multiplyScalar(p),new a.default(s,a.default.Vertices))}h=(0,n.default)(f,u,s,!0).multiplyScalar(-1),s=l(f,++u),c.push(s)}return t.mesh=f,t}};function l(e,t){return e.materialIds.reduce(function(r,n,i){var a=e.faceRangeOffsets[i],o=e.faceRangeOffsets[i+1];if(e.materialIds[i]!==t)return r;for(var s=a;s<o;s++){var l=e.positions.faceValueIndices[s];-1===r.indexOf(l)&&r.push(l)}return r},[])}t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(580),a=(n=i)&&n.__esModule?n:{default:n};var o={selfProperties:!0,schema:{radius:{label:"Radius",type:"Number",defaultValue:.5,minValue:0,step:.1,animatable:!0},widthSegments:{label:"Longitudinal Segments",type:"Integer",defaultValue:24,minValue:3,maxValue:200,step:1,animatable:!0},heightSegments:{label:"Latitudinal Segments",type:"Integer",defaultValue:24,minValue:3,maxValue:200,step:1,animatable:!0},phiStart:{label:"Phi Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},phiLength:{label:"Phi Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0},thetaStart:{label:"Theta Start",type:"Number",defaultValue:0,minValue:0,maxValue:180,step:10,animatable:!0},thetaLength:{label:"Theta Length",type:"Number",defaultValue:180,minValue:0,maxValue:180,step:10,animatable:!0}},update:function(e,t){var r=e.radius,n=e.widthSegments,i=e.heightSegments,o=e.phiStart,s=e.phiLength,l=e.thetaStart,u=e.thetaLength;t.mesh=(0,a.default)(r,n,i,o,s,l,u)}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(564),a=(n=i)&&n.__esModule?n:{default:n};var o=1,s={schema:{axis:{label:"Axis",type:"Options",display:"Radio",defaultValue:o,labels:["X","Y","Z"],values:[o,2,3]},margin:{label:"Margin",type:"Number",defaultValue:0,step:.1,minValue:0,animatable:!0},stretchDistance:{label:"Stretch Distance",type:"Number",defaultValue:0,step:.1,animatable:!0}},update:function(e,t){if(!t.mesh)return t;var r=e.axis,n=e.margin,i=e.stretchDistance;t.mesh=(0,a.default)(t.mesh,["x","y","z"][r-1],n,i)}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),i=o(r(566)),a=o(r(291));function o(e){return e&&e.__esModule?e:{default:e}}var s=new n.Vector3(0,0,1),l={name:"Symmetry",label:"Symmetry / Mirror",schema:{center:{label:"Local Center",type:"Vec3",defaultValue:new n.Vector3(0,0,0),step:.1,animatable:!0},rotation:{label:"Local Rotation",type:"Vec3",defaultValue:new n.Vector3(0,0,0),step:1,animatable:!0},axis:{label:"Axis",type:"Options",display:"Dropdown",labels:["X","Y","Z"],values:[1,2,3],defaultValue:1},flip:{label:"Flip Mirroring",type:"Boolean",defaultValue:!0},slice:{label:"Slice",type:"Boolean",defaultValue:!1},copyMirror:{label:"Copy and Mirror",type:"Boolean",defaultValue:!1}},update:function(e,t,r){var o=r.node,l=t.mesh;if(!l)return t;var u=e.center,c=e.rotation,f=e.axis,h=e.flip,d=e.slice,p=e.copyMirror,m=o.plugs.Transform[0].rotateOrder,v=(new n.Vector3).copy(s);h&&v.negate();var g=(0,a.default)(c,m,f,u,v);return t.mesh=(0,i.default)(l,g,p,d),t}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(551),a=(n=i)&&n.__esModule?n:{default:n};var o={schema:{},update:function(e,t){return t.mesh?(t.mesh=(0,a.default)(t.mesh),t):t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(322)),i=r(0),a=o(r(5));function o(e){return e&&e.__esModule?e:{default:e}}var s=new i.Vector3(1,0,1),l=new i.Vector3(0,1,0),u=new i.Vector3(1,1,1),c={name:"Taper",schema:{amount:{type:"Number",defaultValue:1,step:.1,animatable:!0},curve:{type:"Number",defaultValue:.5,step:.1,minValue:.1,animatable:!0}},update:function(e,t,r){(0,n.default)(r);var i=e.amount,o=e.curve;o&&(o=1/o);for(var c=new a.default(t.mesh),f=c.positions.values,h=0;h<f.length;h++){var d=f.getAt(h),p=d.clone().multiply(l),m=i*Math.pow(p.length(),o),v=s.clone().multiplyScalar(m).add(u);d.multiply(v),f.setAt(h,d)}return t.mesh=c,t}};t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),a=r(581),o=(n=a)&&n.__esModule?n:{default:n};var s={selfProperties:!0,schema:{radius:{label:"Radius",type:"Number",defaultValue:.3,minValue:0,step:.1,animatable:!0},tube:{label:"Tube Radius",type:"Number",defaultValue:.2,minValue:0,step:.1,animatable:!0},radialSegments:{label:"Longitudinal Segments",type:"Integer",defaultValue:24,minValue:3,step:1,animatable:!0},tubularSegments:{label:"Latitudinal Segments",type:"Integer",defaultValue:24,minValue:3,step:1,animatable:!0},phiStart:{label:"Phi Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},phiLength:{label:"Phi Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0},thetaStart:{label:"Theta Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},thetaLength:{label:"Theta Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0}},update:function(e,t){var r=e.radius,n=e.tube,a=e.radialSegments,s=e.tubularSegments,l=e.phiStart,u=e.phiLength,c=e.thetaStart,f=e.thetalength;t.mesh=(0,o.default)(r,n,a,s,i.Math.degToRad(l),i.Math.degToRad(u),i.Math.degToRad(c),i.Math.degToRad(f))}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(145),a=c(r(55)),o=c(r(183)),s=c(r(556)),l=r(289),u=c(r(195));function c(e){return e&&e.__esModule?e:{default:e}}var f={schema:{translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0},animatable:!0,hidden:!0},scale:{label:"Scale",type:"Vec3",minValue:1e-4,step:.1,defaultValue:{x:1,y:1,z:1},animatable:!0,hidden:!0},updateNormals:{label:"Update Normals",type:"Boolean",defaultValue:!0,hidden:!0},centerType:{label:"Center",type:"Options",display:"Dropdown",labels:["Selection Center","World Center","Pivot"],values:["SelectionCenter","WorldCenter","Pivot"],defaultValue:"SelectionCenter"},matrix:{type:"Object",defaultValue:null,hidden:!0},vertexIndices:{label:"Selection",type:"String",defaultValue:""},softSelection:{label:"Soft Selection",type:"Boolean",defaultValue:!1},falloffRadius:{label:"Falloff Radius",type:"Number",step:.1,defaultValue:.1,minValue:0},falloffCurve:{label:"Falloff Curve",type:"Options",display:"Dropdown",labels:["Sinusoidal","Linear"],values:[l.falloffFunctionPresets.sinusoidal,l.falloffFunctionPresets.linear],defaultValue:l.falloffFunctionPresets.sinusoidal}},update:function(e,t,r){var l=r.getWorldTransform,c=r.node,f=t.mesh;if(!f)return t;var h=new n.Matrix4,d=(0,a.default)(e.vertexIndices);if(e.matrix&&e.matrix.elements)h.fromArray(e.matrix.elements);else{var p=e.rotation.clone().multiplyScalar(Math.PI/180),m=(new n.Euler).setFromVector3(p,"ZYX"),v=(new n.Quaternion).setFromEuler(m);h.compose(e.translation,v,e.scale);var g=e.centerType,y=l(c.id);if("SelectionCenter"===g){var x=(0,o.default)(f.positions.values,d),b=(new n.Matrix4).setPosition(x),w=(new n.Matrix4).getInverse(b);h.multiply(w),h.premultiply(b)}else"WorldCenter"===g&&(h.multiply(y),h.premultiply((new n.Matrix4).getInverse(y)))}var _=e.vertexIndices?new i.Selection(d,i.Selection.Vertices):null,M=e.softSelection,S=e.falloffRadius,T=e.falloffCurve,E=void 0,P=void 0;if(M&&S>0){var A=(0,s.default)(f,d,S,T);E=A.softSelectionIndices,P=A.softSelectionWeights,_=_&&new i.Selection(E,i.Selection.Vertices)}t.mesh=(0,u.default)(f,h,_,null,P)}};t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),a=r(55),o=(n=a)&&n.__esModule?n:{default:n},s=r(114);var l={selfTransform:!0,schema:{mWidth:{type:"Number",label:"Width",defaultValue:1,step:.1,minValue:0,animatable:!0},mHeight:{type:"Number",label:"Height",defaultValue:1,step:.1,minValue:0,animatable:!0},mLength:{type:"Number",label:"Length",defaultValue:1,step:.1,minValue:0,animatable:!0},center:{label:"Center",type:"Vec3",step:.1,defaultValue:new i.Vector3(0,0,0),animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,minValue:-360,maxValue:360,defaultValue:new i.Vector3(0,0,0),animatable:!0},uTile:{label:"U Tile",type:"Number",step:.1,defaultValue:1,animatable:!0},vTile:{label:"V Tile",type:"Number",step:.1,defaultValue:1,animatable:!0},uvProjectionMode:{label:"Projection",type:"Options",display:"Radio",values:[s.UVMapType.Planar,s.UVMapType.Box,s.UVMapType.Cylindrical,s.UVMapType.Spherical],labels:["Planar","Box","Cylindrical","Spherical"],defaultValue:s.UVMapType.Planar},xAxis:{label:"Align Local Axis",type:"Options",display:"Radio",values:[s.UVAxisType.X,s.UVAxisType.Y,s.UVAxisType.Z,s.UVAxisType.AverageNormals],labels:["X","Y","Z","Average Normals"],defaultValue:1},uvMapChannel:{label:"UV Channel",type:"String",defaultValue:"default"},autoFit:{label:"Auto Fit",type:"Boolean",default:!1},autoAlign:{label:"Auto Align",type:"Button"},autoFitAlign:{label:"Best Fit",type:"Button"},autoCenter:{label:"Auto Center",type:"Button"},resetUVs:{label:"Reset",type:"Button"},worldRelative:{label:"Project in World Space",type:"Boolean",defaultValue:!1},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"},faceDirection:{label:"Direction",type:"Options",defaultValue:0,labels:["Both","Positive","Negative"],values:[0,1,-1]}},update:function(e,t,r){var n=r.getWorldTransform,a=r.node,l=t.mesh;if(!l)return t;var u={};u.selectedFaces=(0,o.default)(e.indices),u.uTile=e.uTile,u.vTile=e.vTile,u.uvProjectionMode=e.uvProjectionMode,u.alignmentAxis=e.xAxis,u.center=e.center,u.rotation=e.rotation,u.mapChannel=e.uvMapChannel,u.direction=e.faceDirection,u.scale=new i.Vector3(e.mWidth,e.mHeight,e.mLength),u.worldSpace=e.worldRelative,u.worldSpace&&(u.nodeTransform=n(a.id)),u.autoFit=e.autoFit,t.mesh=(0,s.applyUVMap)(l,u)}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=s(r(5)),a=s(r(7)),o=s(r(3));function s(e){return e&&e.__esModule?e:{default:e}}var l=0,u={name:"UVTransform",label:"UV Transform",schema:{rotation:{label:"Rotation",type:"Number",step:.1,minValue:-360,maxValue:360,defaultValue:0,animatable:!0},scaleMode:{label:"Scale Mode",type:"Options",display:"Dropdown",labels:["Scale","Tiling"],values:[l,1],defaultValue:l},tiling:{label:"Tiling",type:"Vec2",step:.1,defaultValue:new n.Vector2(1,1),animatable:!0},scale:{label:"Scale",type:"Vec2",step:.1,defaultValue:new n.Vector2(1,1),animatable:!0},translation:{label:"Translation",type:"Vec2",step:.1,defaultValue:new n.Vector2(0,0),animatable:!0},pivotCenter:{label:"Pivot Center",type:"Vec2",step:.1,defaultValue:new n.Vector2(0,0),animatable:!0},uvMapChannel:{label:"UV Channel",type:"String",defaultValue:"default"}},update:function(e,t){var r=t.mesh;if(!r)return t;var s=e.uvMapChannel||"default",u=r.uvMaps?r.uvMaps.byName[s]:null;if(!u)return t;for(var c=new n.Vector3,f=new n.Vector2,h=new o.default(n.Vector2,u.values.length),d=e.rotation,p=e.scaleMode,m=e.scale,v=e.tiling,g=e.translation,y=e.pivotCenter,x=function(e,t,r,i,a,o){var s=new n.Matrix4;if(s.multiply((new n.Matrix4).makeTranslation(o.x,o.y,0)),s.multiply((new n.Matrix4).makeRotationZ(n.Math.degToRad(e))),r){var l=function(e){return 0==e?1:1/e};s.multiply((new n.Matrix4).makeScale(l(i.x),l(i.y),0))}else s.multiply((new n.Matrix4).makeScale(t.x,t.y,0));return s.multiply((new n.Matrix4).makeTranslation(-o.x,-o.y,0)),s.multiply((new n.Matrix4).makeTranslation(a.x,a.y,0)),s}(d,v,p===l,m,g,y),b=0;b<u.values.length;b++)u.values.getAt(b,f),c.set(f.x,f.y,0),c.applyMatrix4(x),f.set(c.x,c.y),h.setAt(b,f);var w=new i.default(r),_=new a.default({faceRangeOffsets:r.faceRangeOffsets,faceValueIndices:u.faceValueIndices,values:h});w.uvMaps.set(s,_),t.mesh=w}};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(568),a=(n=i)&&n.__esModule?n:{default:n},o=r(40),s=r(0);var l={selfTransform:!0,schema:{uvSource:{label:"Source",type:"Plug",plug:"PolyMesh"},uvSourceChannel:{label:"Source's UV channel",type:"Text",defaultValue:""},useUvSourceWorldSpace:{label:"Use Source's world coordinates",type:"Boolean",defaultValue:!1},extrude:{label:"Extrude",type:"Number",defaultValue:1},useUpVector:{label:"Use Extrude Vector",type:"Boolean",defaultValue:!1},upVector:{label:"Extrude Vector",type:"Vec3",defaultValue:{x:0,y:1,z:0}},overrideBoundingBox:{label:"Override",type:"Boolean",defaultValue:!1},boundingBoxMode:{label:"Mode",type:"Options",display:"Dropdown",labels:["Resize","Relative","Padded"],values:[0,1,2],defaultValue:0},boundingBox:{label:"Dimension",type:"Vec3",defaultValue:{x:0,y:0,z:0},minValue:0},boundingBoxJustification:{label:"Justification",type:"Vec3",defaultValue:{x:.5,y:.5,z:.5},minValue:0,maxVaule:1},warpOffset:{label:"Offset",type:"Vec2",defaultValue:{x:0,y:0},minValue:-1,maxValue:1},rigidity:{label:"Rigidity",type:"Options",labels:["Vertex","Component"],values:[0,1],defaultValue:0}},update:function(e,t,r){var n=r.getWorldTransform,i=r.node;if(t.mesh){var l=e.uvSource;if(l.mesh&&l.mesh.uvMaps.length){var u=null;if(e.useUvSourceWorldSpace){var c=n(i.id),f=n(l.nodeId);c.getInverse(c),u=(new s.Matrix4).multiplyMatrices(c,f)}var h=(0,a.default)(t.mesh,l.mesh,e.warpOffset,e.extrude,e,u,e.uvSourceChannel,e.useUpVector&&e.upVector,e.rigidity);t.mesh=(0,o.autoSmooth)(h,30)}}return t}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=q(r(476)),i=q(r(494)),a=q(r(477)),o=q(r(495)),s=q(r(496)),l=q(r(484)),u=q(r(460)),c=q(r(488)),f=q(r(464)),h=q(r(462)),d=q(r(466)),p=q(r(40)),m=q(r(478)),v=q(r(493)),g=q(r(468)),y=q(r(479)),x=q(r(473)),b=q(r(486)),w=q(r(457)),_=q(r(485)),M=q(r(490)),S=q(r(459)),T=q(r(458)),E=q(r(480)),P=q(r(481)),A=q(r(491)),C=q(r(489)),R=q(r(483)),I=q(r(456)),O=q(r(482)),L=q(r(469)),D=q(r(280)),N=q(r(475)),V=q(r(474)),F=q(r(487)),B=q(r(467)),U=q(r(465)),k=q(r(470)),z=q(r(472)),G=q(r(471)),j=q(r(497)),H=q(r(463)),W=q(r(492)),X=q(r(461));function q(e){return e&&e.__esModule?e:{default:e}}t.default={Array:I.default,BendDeformer:w.default,BlendDeformer:T.default,BlendShape:S.default,Box:u.default,CacheTriangulation:X.default,Capsule:h.default,Center:H.default,Cone:f.default,CrossSectionRevolve:U.default,Cylinder:d.default,DeleteComponent:B.default,Disk:g.default,Extrude:L.default,FromShape:k.default,FromShapeEdgeSweep:G.default,FromShapeWithExtrude:z.default,Instance:x.default,LineText:V.default,MaterialIDs:N.default,Mesh:n.default,MeshSmooth:a.default,Normals:p.default,Plane:m.default,ProxyMesh:y.default,Reference:E.default,Revolve:P.default,SegmentRevolve:O.default,Shear:R.default,Skin:l.default,Slice:_.default,SortFacesByAxis:b.default,Spacing:F.default,Sphere:c.default,Stretch:C.default,Symmetry:M.default,Tangents:A.default,Taper:W.default,Tessellate:D.default,TransformVertices:i.default,Torus:v.default,UVMap:o.default,UVTransform:s.default,UVWarp:j.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2),a=(n=i)&&n.__esModule?n:{default:n};var o=["","Layer 0","Layer 1","Layer 2","Layer 3","Layer 4"],s=[].concat(o);s[0]="All";var l={schema:{visible:{label:"Visible",type:"Boolean",defaultValue:!0},orbitMode:{label:"Orbit Mode",type:"Options",values:["gyroscope","trackball","firstPerson","nodeRotate"],labels:["Gyropscope","Trackball","First Person","NodeRotate"],defaultValue:"gyroscope"},orbitTarget:{label:"Orbit Target",type:"Node"},constraintCameraY:{label:"Constrain Camera to Positive Y",type:"Boolean",defaultValue:!1},nodeRotateAxis:{label:"Node Rotation Axis",type:"Options",values:["y","t","g"],labels:["Y","Trackball","Gyroscope"],defaultValue:"y"},fixedAzimuth:{label:"Fixed Camera Azimuth Angle",type:"Boolean",defaultValue:!1},constrainCameraSphere:{label:"Constrain Camera Within Sphere",type:"Boolean",defaultValue:!1},minZoom:{label:"Minimum Zoom",type:"Number",defaultValue:1,minValue:.1},maxZoom:{label:"Maximum Zoom",type:"Number",defaultValue:5,minValue:1},frameLayer:{label:"Frame Layer",type:"Options",values:o,labels:s,defaultValue:""}},update:function(e,t,r){var n=r.cameraController,i=r.node,o=r.store;(0,a.default)(t,e),i.id===n.id&&n.setCameraProperties(o,t)}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2),a=(n=i)&&n.__esModule?n:{default:n};var o={Annotation:!0,Light:!0,Helper:!0},s={hierarchyVisible:!0,schema:{visible:{label:"Visible",type:"Boolean",defaultValue:!0,animatable:!0},selectable:{label:"Selectable",type:"Boolean",defaultValue:!0}},update:function(e,t,r){var n,i,s=r.node;return(0,a.default)(t,e),t.visible=o[s.type]?e.visible:(n=e.sceneProperties,i=e.visible,!n||"Enable"!==n.hierarchyVisibility||i),t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={schema:{prefetch:{label:"Pre-fetch Image",type:"Boolean",defaultValue:!1}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={schema:{prefetch:{label:"Pre-fetch Material",type:"Boolean",defaultValue:!1},combineTextures:{label:"Combine Material Textures",type:"Boolean",defaultValue:!1}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={schema:{key:{label:"Name",type:"String",defaultValue:""},value:{label:"Value",type:"String",defaultValue:""}},update:function(e,t){return t.metaData||(t.metaData={}),e.key&&(t.metaData[e.key]=e.value),t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={hierarchyVisible:!0,schema:{visible:{label:"Visible",type:"Boolean",defaultValue:!0,animatable:!0},renderable:{label:"Renderable",type:"Boolean",defaultValue:!0},selectable:{label:"Selectable",type:"Boolean",defaultValue:!0},overrideChildSelection:{label:"Override Child Selection",type:"Boolean",defaultValue:!0},configurator:{label:"Configurator",type:"String",hidden:!0,defaultValue:""}},update:function(e,t){var r,n;return t.visible=(r=e.sceneProperties,n=e.visible,!r||"Enable"!==r.hierarchyVisibility||n),t}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["Layer 0","Layer 1","Layer 2","Layer 3","Layer 4"],i={schema:{doubleSided:{label:"Double Sided",type:"Boolean",defaultValue:!1},visible:{label:"Visible",type:"Boolean",defaultValue:!0,animatable:!0},prefetch:{label:"Pre-fetch mesh",type:"Boolean",defaultValue:!1},layer:{label:"Layer",type:"Options",values:n,labels:[].concat(n),defaultValue:n[0]},castShadow:{label:"Cast Shadow",type:"Boolean",defaultValue:!0},receiveShadow:{label:"Receive Shadow",type:"Boolean",defaultValue:!0},discardable:{label:"Discardable",type:"Boolean",defaultValue:!1},interactive:{label:"Interactive",type:"Boolean",defaultValue:!1},selectable:{label:"Selectable",type:"Boolean",defaultValue:!0},walkableInVR:{label:"Walkable",type:"Boolean",defaultValue:!1},vrayObjectId:{label:"Vray ObjectID",type:"Number",defaultValue:1},vrayIgnoreLights:{label:"Vray Igore Lights",type:"Boolean",defaultValue:!1}}};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["Static","Kinematic","Dynamic"],i={schema:{collisionShape:{label:"Collision Shape",type:"Options",display:"Dropdown",values:["Box","Convex","Mesh"],labels:["Bounding Box","Convex Hull","Mesh (Non-Dynamic)"],defaultValue:"Convex"},motionType:{label:"Motion Type",type:"Options",display:"Dropdown",values:n,labels:n,defaultValue:"Dynamic"},mass:{label:"Mass",type:"Number",defaultValue:1,minValue:0,step:1},linearDamping:{label:"Linear Damping",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1},angularDamping:{label:"Angular Damping",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1},linearFactor:{label:"Linear Factor",type:"Vec3",defaultValue:[1,1,1]},angularFactor:{label:"Angular Factor",type:"Vec3",defaultValue:[1,1,1]},linearVelocity:{label:"Linear Velocity",type:"Vec3",defaultValue:[0,0,0]},angularVelocity:{label:"Angular Velocity",type:"Vec3",defaultValue:[0,0,0]},linearSleepingThreshold:{label:"Linear Sleep Threshold",type:"Number",defaultValue:.8,minValue:0,step:.1},angularSleepingThreshold:{label:"Angular Sleep Threshold",type:"Number",defaultValue:1,minValue:0,step:.1},friction:{label:"Friction",type:"Number",defaultValue:.5,minValue:0,step:.1},rollingFriction:{label:"Rolling Friction",type:"Number",defaultValue:0,minValue:0,step:.1},restitution:{label:"Bounce",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1}}};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={schema:{hierarchyVisibility:{label:"Hierarchical Visibility",type:"Options",values:["Enable","Disable"],labels:["Yes","No"]}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={schema:{visible:{label:"Visible",type:"Boolean",defaultValue:!0,animatable:!0},selectable:{label:"Selectable",type:"Boolean",defaultValue:!0},castShadow:{label:"Cast Shadow",type:"Boolean",defaultValue:!0},receiveShadow:{label:"Receive Shadow",type:"Boolean",defaultValue:!0},doubleSided:{label:"Double Sided",type:"Boolean",defaultValue:!1},discardable:{label:"Discardable",type:"Boolean",defaultValue:!1},interactive:{label:"Interactive",type:"Boolean",defaultValue:!1}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(499)),i=d(r(500)),a=d(r(501)),o=d(r(502)),s=d(r(503)),l=d(r(504)),u=d(r(505)),c=d(r(506)),f=d(r(507)),h=d(r(508));function d(e){return e&&e.__esModule?e:{default:e}}t.default={CameraProperties:n.default,Default:i.default,ImageProperties:a.default,MaterialProperties:o.default,MetaData:s.default,ModelProperties:l.default,PolyMeshProperties:u.default,RigidBodyProperties:c.default,SceneProperties:f.default,ShapeProperties:h.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={WebGLRenderer:{schema:{format:{type:"Options",defaultValue:"jpeg",values:["jpeg","png"],labels:["JPEG","PNG"],label:"Output Format"},v2renderer:{type:"Boolean",defaultValue:!1,label:"v2 renderer"}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertSVGToPaths=function(e){return s(e,null)};var n=r(857),i={};i[n.SVGPathData.MOVE_TO]="M",i[n.SVGPathData.LINE_TO]="L",i[n.SVGPathData.CLOSE_PATH]="Z",i[n.SVGPathData.CURVE_TO]="C";var a=/([A-Za-z]+)\(([0-9.\-]+)[,]?([0-9.\-]*)[,]?([0-9.\-]*)[,]?([0-9.\-]*)[,]?([0-9.\-]*)[,]?([0-9.\-]*)\)/;function o(e,t){if(e.$&&e.$.transform)for(var r=e.$.transform.split(" "),n=0;n<r.length;n++){for(var i=a.exec(r[n]),o={type:i[1],parameters:[]},s=2;s<i.length;s++)o.parameters.push(parseFloat(i[s]));t.push(o)}return t}function s(e,t){var r=[];if(t=t||[],e.g&&e.g[0].$&&e.g[0].$.fill){for(var a in t=o(e,t),e.g)r.push(s(e.g[a],t));t.pop(),t.pop()}else if(e.g){for(var l in t=o(e,t),e.g)r=r.concat(s(e.g[l],t));t.pop()}else e.path&&(t=o(e,t),r=r.concat(function(e,t){var r=[];for(var n in e)r=r.concat(s(e[n],t));return r}(e.path,t)),t.pop(),t.pop());if(e.$&&(r=r.concat(s(e.$,t))),e.d){var u=new n.SVGPathData(e.d);u=function(e){for(var t in e.commands){var r=e.commands[t];r.type=i[r.type],r.relative&&(r.type=r.type.toLowerCase()),delete r.relative}return e}(u=function(e,t){for(var r=0;r<t.length;r++){var n=t[t.length-1-r];e[n.type].apply(e,n.parameters)}return e}(u,t)),r=r.concat(u.commands)}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=o(r(590)),a=o(r(21));function o(e){return e&&e.__esModule?e:{default:e}}var s={selfProperties:!0,schema:{count:{type:"Number",label:"Count",defaultValue:3,step:1,minValue:1},translation:{label:"Translation",type:"Vec2",step:.1,defaultValue:[1,0]},rotation:{label:"Rotation",type:"Number",step:1,defaultValue:0},scale:{label:"Scale",type:"Vec2",minValue:1e-4,step:.1,defaultValue:[1,1]}},update:function(e,t){if(!t.shape)return t;var r=e.count,o=e.translation,s=e.rotation,l=e.scale;o=new n.Vector3(o.x,o.y,0),l=new n.Vector3(l.x,l.y,0),s=s*Math.PI/180;var u=(0,i.default)(t.shape,r,o,s,l);return t.shape=a.default.mergeShapeSets(u),t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),a=r(21),o=(n=a)&&n.__esModule?n:{default:n};var s={selfProperties:!0,schema:{shape:{label:"Shape",type:"Plug",plug:"Shape"},position:{type:"Vec2",step:1,defaultValue:[0,0]},direction:{type:"Vec2",step:1,defaultValue:[1,0]},offset:{type:"Number",defaultValue:0}},update:function(e,t){if(t&&t.shape){var r=e.shape,n=e.position,a=e.direction,s=e.offset;if(r&&r.shape){var l=new i.Vector3(n.x,n.y,0),u=new i.Vector3(a.x,a.y,0).normalize(),c=t.shape.getAttachVector(r.shape,l,u,s);if(c){var f=new i.Vector3(0,0,0);t.shape=o.default.mergeShapeSets([t.shape,r.shape],[f,c])}}}return t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),a=r(587),o=(n=a)&&n.__esModule?n:{default:n};var s={selfTransform:!0,schema:{srcA:{type:"Node",plug:"Shape"},srcB:{type:"Node",plug:"Shape"},operation:{label:"Operation",type:"Options",defaultValue:2,values:[0,1,2,3],labels:["A intersection B","A union B","A subtract B","A exclusive or B"]},useWorldSpace:{type:"Boolean",defaultValue:!0}},update:function(e,t,r){var n=r.getWorldTransform,a=r.store,s=r.node,l=e.srcA,u=e.srcB,c=e.operation,f=e.useWorldSpace;if(!u)return t;var h=!1;if(t.shape)h=!0,l=s.id;else if(!l)return t;var d=h?t.shape:a.get("sceneGraph").evaluatedNodes[l].Shape.shape,p=a.get("sceneGraph").evaluatedNodes[u].Shape.shape;if(d&&p){var m=null,v=null;if(f){var g=n(l),y=n(u);h?v=(new i.Matrix4).multiplyMatrices((new i.Matrix4).getInverse(g),y):(m=g,v=y)}t.shape=(0,o.default)(d,p,c,m,v)}return t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),a=r(116),o=(n=a)&&n.__esModule?n:{default:n};var s={schema:{useX:{label:"X",type:"Boolean",defaultValue:!0},useY:{label:"Y",type:"Boolean",defaultValue:!0},useZ:{label:"Z",type:"Boolean",defaultValue:!0},alignment:{label:"Alignment",type:"Vec3",step:.01,defaultValue:{x:0,y:0,z:0},minValue:-1,maxValue:1}},update:function(e,t){var r=t.shape;if(!r)return t;var n=r.boundingBox,a=n.getCenter(),s=n.getSize(),l=new i.Vector3,u=e.useX,c=e.useY,f=e.useZ,h=e.alignment;u&&(l.x=-a.x+h.x*s.x/2),c&&(l.y=-a.y+h.y*s.y/2),f&&(l.z=-a.z+h.z*s.z/2);var d=(new i.Matrix4).makeTranslation(l.x,l.y,l.z);return t.shape=(0,o.default)(r,d),t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(585),a=(n=i)&&n.__esModule?n:{default:n};var o={selfProperties:!0,schema:{radius:{type:"Number",defaultValue:1,minValue:0},segments:{type:"Number",defaultValue:64,minValue:3}},update:function(e,t){var r=e.radius,n=e.segments;return t.shape=new a.default(r,n),t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(588),a=r(21);(n=a)&&n.__esModule;var o={schema:{areaThreshold:{type:"Number",defaultValue:.001,maxValue:1,minValue:0},areaMode:{type:"Options",display:"Dropdown",labels:["Geometry","Bounding Box"],values:["geometry","boundingBox"],defaultValue:"boundingBox"}},update:function(e,t){var r=e.areaThreshold,n=e.areaMode,a=t.shape;return a&&(t.shape=(0,i.removeLoopsByRelativeArea)(a,r,n)),t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=o(r(21)),a=o(r(3));function o(e){return e&&e.__esModule?e:{default:e}}var s={selfProperties:!0,schema:{vertices:{type:"Object",defaultValue:[]},closeLoop:{type:"Boolean",defaultValue:!1}},update:function(e,t){var r=e.vertices,o=e.closeLoop;if(r.length){for(var s=new a.default(n.Vector3,null,new Float32Array(r)),l=r.length/3,u=o?l+1:l,c=new Uint32Array(u),f=0;f<l;++f)c[f]=f;o&&(c[c.length-1]=0);var h=new Uint32Array([0,u]),d=new i.default({positions:s,loopValueIndices:c,holeOffsets:[[]],loopRangeOffsets:h});return t.shape=d,t}}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JOIN_TYPE=void 0;var n,i=r(591),a=(n=i)&&n.__esModule?n:{default:n};var o=t.JOIN_TYPE={SQUARE:0,ROUND:1,MITER:2},s={selfProperties:!0,schema:{offset:{type:"Number",defaultValue:0},mergeLoops:{type:"Boolean",defaultValue:!0},joinType:{label:"Join Type",type:"Options",defaultValue:2,values:[o.SQUARE,o.ROUND,o.MITER],labels:["Square","Round","Miter"]},arcTolerance:{type:"Number",defaultValue:.001,minValue:25e-7}},update:function(e,t){if(t&&t.shape){var r=e.offset,n=e.mergeLoops,i=e.joinType,o=e.arcTolerance;r&&(t.shape=(0,a.default)(t.shape,r,{mergeLoops:n,joinType:i,tolerance:o}))}return t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(299),a=(n=i)&&n.__esModule?n:{default:n};var o={selfProperties:!0,schema:{radius:{type:"Number",defaultValue:1,minValue:0},segments:{type:"Number",defaultValue:5,minValue:3}},update:function(e,t){var r=e.radius,n=e.segments;return t.shape=(0,a.default)(r,n),t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(586),a=(n=i)&&n.__esModule?n:{default:n};var o={selfProperties:!0,schema:{width:{type:"Number",defaultValue:1},height:{type:"Number",defaultValue:1}},update:function(e,t){var r=e.width,n=e.height;return t.shape=new a.default(r,n),t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={schema:{source:{label:"Shape",plug:"Shape",type:"Plug"}},update:function(e,t){t.shape=e.source&&e.source.shape}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(21)),i=a(r(593));function a(e){return e&&e.__esModule?e:{default:e}}var o={schema:{width:{type:"Number",defaultValue:1,minValue:0},height:{type:"Number",defaultValue:1,minValue:0},keepAspectRatio:{type:"Boolean",defaultValue:!1}},update:function(e,t){var r=e.width,a=e.height,o=e.keepAspectRatio,s=t.shape;if(s){var l=(0,i.default)(s,r,a,o),u={loopRangeOffsets:s.loopRangeOffsets,loopValueIndices:s.loopValueIndices,positions:l,holeOffsets:s.holeOffsets};t.shape=new n.default(u)}return t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(594),a=(n=i)&&n.__esModule?n:{default:n};var o={selfProperties:!0,schema:{innerRadius:{type:"Number",minValue:0,defaultValue:1},thickness:{type:"Number",minValue:0,defaultValue:.1},segments:{type:"Number",defaultValue:24,minValue:3},startAngle:{type:"Number",defaultValue:0,minValue:0,maxValue:360}},update:function(e,t){var r=e.innerRadius,n=e.thickness,i=e.segments,o=e.startAngle;return t.shape=(0,a.default)(r,r+n,i,o*Math.PI/180),t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=(a(r(21)),a(r(116)));function a(e){return e&&e.__esModule?e:{default:e}}var o={selfProperties:!0,schema:{rotation:{type:"Number",defaultValue:0}},update:function(e,t){var r=e.rotation;if(t&&t.shape&&r){var a=(new n.Matrix4).makeRotationZ(n.Math.degToRad(r));t.shape=(0,i.default)(t.shape,a)}return t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),a=r(21),o=(n=a)&&n.__esModule?n:{default:n},s=r(511),l=r(403);var u={selfProperties:!0,schema:{image:{type:"Plug",plug:"Image"},curveSegments:{type:"Number",defaultValue:4,minValue:2}},update:function(e,t,r){r.store;var n=r.properties,a=r.loaded,u=r.forceFetchAssets,c=(r.node,(n.visible||n.prefetch&&a||u)&&e.image&&e.image.getSVG()),f=void 0;if((0,l.parseString)(c,function(e,t){f=t}),f){var h=(0,s.convertSVGToPaths)(f.svg),d=e.curveSegments,p=[],m=[],v={commands:h[0]},g=o.default.fromPath(v,d,0,void 0,{reverseIndices:!0,lineSegments:1});if(m.push(new i.Vector3(0,0,0)),p.push(g),!p.length)return;var y=1===p.length?p[0]:o.default.mergeShapeSets(p,m);t.shape=y}return t}};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(6)),i=r(0),a=s(r(21)),o=s(r(589));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){var i=(0,n.default)(e).find(function(t){return e[t].unicode===r});return e[i]&&e[i].advanceWidth?e[i].advanceWidth/t:1}var u={selfProperties:!0,schema:{text:{label:"Text",type:"String",defaultValue:"Text"},curveSegments:{type:"Number",defaultValue:4,minValue:2},font:{label:"Font",type:"Plug",plug:"Font"},fontSize:{label:"Font Size",type:"Number",defaultValue:72,minValue:1,step:1},compact:{label:"On",type:"Boolean",defaultValue:!1},overlap:{label:"Offset",type:"Number",defaultValue:0},bendAngle:{label:"Angle",type:"Number",defaultValue:0,minValue:-90,maxValue:90}},update:function(e,t,r){r.store;var s=r.properties,u=r.loaded,c=r.forceFetchAssets,f=(s.visible||s.prefetch&&u||c)&&e.font&&e.font.getFont();if(f&&0!==(0,n.default)(f).length){for(var h=e.curveSegments,d=e.fontSize,p=e.compact?-e.overlap:void 0,m=void 0===p?e.text.trim():e.text.replace(/\s+/g,""),v=f.unitsPerEm,g=f.glyphs.glyphs,y=d/72,x=[],b=[],w=0,_=0,M=null,S=new i.Vector3,T=new i.Vector3(-1,0,0),E=0;E<m.length;++E)if(" "===m.charAt(E))w+=l(g,v," ".charCodeAt(0))*y;else{var P=f.getPath(m.charAt(E),0,d,d),A=a.default.fromPath(P,h,d,p),C=m.charCodeAt(E);if(void 0!==p){var R=0;if(M){S.x=_;var I=M.getAttachVector(A,S,T,p);R=I?I.x:M.boundingBox.max.x}_=l(g,v,C)*y,w+=R,b.push(new i.Vector3(w,0,0))}else{var O=l(g,v,C)*y;b.push(new i.Vector3(w,0,0)),w+=O}M=A,x.push(A)}if(x.length){var L=1===x.length?x[0]:a.default.mergeShapeSets(x,b),D=L;return 0!==e.bendAngle&&(D=(0,o.default)(L,e.bendAngle)),t.shape=D,t}}}};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=s(r(55)),a=s(r(183)),o=s(r(116));function s(e){return e&&e.__esModule?e:{default:e}}var l={schema:{translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0},animatable:!0,hidden:!0},scale:{label:"Scale",type:"Vec3",minValue:1e-4,step:.1,defaultValue:{x:1,y:1,z:1},animatable:!0,hidden:!0},centerType:{label:"Center",type:"Options",display:"Dropdown",labels:["Selection Center","World Center","Pivot"],values:["SelectionCenter","WorldCenter","Pivot"],defaultValue:"SelectionCenter"},matrix:{type:"Object",defaultValue:null,hidden:!0},vertexIndices:{label:"Selection",type:"String",defaultValue:""}},update:function(e,t,r){var s=r.getWorldTransform,l=r.node,u=t.shape;if(!u)return t;var c=new n.Matrix4,f=e.vertexIndices;if(f&&(f=(0,i.default)(f)),e.matrix&&e.matrix.elements)c.fromArray(e.matrix.elements);else{var h=e.rotation.clone().multiplyScalar(Math.PI/180),d=(new n.Euler).setFromVector3(h,"ZYX"),p=(new n.Quaternion).setFromEuler(d);c.compose(e.translation,p,e.scale);var m=e.centerType,v=s(l.id);if("SelectionCenter"===m){var g=(0,a.default)(u.positions,f),y=(new n.Matrix4).setPosition(g),x=(new n.Matrix4).getInverse(y);c.multiply(x),c.premultiply(y)}else"WorldCenter"===m&&(c.multiply(v),c.premultiply((new n.Matrix4).getInverse(v)))}t.shape=(0,o.default)(u,c,f)}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=b(r(512)),i=b(r(513)),a=b(r(514)),o=b(r(515)),s=b(r(516)),l=b(r(518)),u=b(r(519)),c=b(r(520)),f=b(r(521)),h=b(r(522)),d=b(r(524)),p=b(r(525)),m=b(r(526)),v=b(r(527)),g=b(r(528)),y=b(r(523)),x=b(r(517));function b(e){return e&&e.__esModule?e:{default:e}}t.default={Array:n.default,AttachShape:i.default,BooleanShapes:a.default,CenterShape:o.default,Circle:s.default,LineStrip:l.default,OffsetShape:u.default,Polygon:c.default,Rectangle:f.default,Reference:h.default,RingShape:d.default,RotateShape:p.default,SVGShape:m.default,TextShape:v.default,TransformVertices:g.default,ResizeShape:y.default,CleanShape:x.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={Timeline:{schema:{useBufferClips:{label:"Use V2 Clip Format",type:"Boolean",defaultValue:!1}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2),a=(n=i)&&n.__esModule?n:{default:n},o=r(0),s=r(4);var l={schema:{translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0},animatable:!0},scale:{label:"Scale",type:"Vec3",step:.01,defaultValue:{x:1,y:1,z:1},animatable:!0},shear:{label:"Shear",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotateOrder:{label:"Rotate Order",type:"Options",display:"Dropdown",values:["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],defaultValue:"ZYX"},preRotation:{label:"Pre-Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0}},rotateAxis:{label:"Rotate Axis",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0}},rotatePivotOffset:{label:"Rotate Pivot Offset",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}},scalePivotOffset:{label:"Scale Pivot Offset",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}},localRotatePivot:{label:"Local Rotate Pivot",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}},localScalePivot:{label:"Local Scale Pivot",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}}},update:function(e,t,r){var n,i=r.cameraController,a=r.node,l=r.getWorldTransform,u=(r.store,i);t.transform=(0,s.getLocalTransform)(e),a.id===u.lookAtTarget&&u.setTargetWorldTransform((n=a.parent&&l(a.parent))?(new o.Matrix4).copy(n).multiply(t.transform):(new o.Matrix4).copy(t.transform))}},u={schema:{target:{label:"LookAt Target",type:"Plug",plug:"Transform"},orientation:{label:"Orientation",type:"Vec3",defaultValue:{x:0,y:0,z:0},animatable:!0},lookAtAxis:{label:"Look Axis",type:"Options",display:"Dropdown",defaultValue:"Z",labels:["X","Y","Z"],values:["X","Y","Z"]},flipLookAtAxis:{label:"Flip Look Axis",type:"Boolean",defaultValue:!0},upAxis:{label:"Up Axis",type:"Options",display:"Dropdown",defaultValue:2,labels:["X","Y","Z"],values:[1,2,3]},flipUpAxis:{label:"Flip Up Axis",type:"Boolean",defaultValue:!1}},update:function(e,t,r){var n=r.node,i=r.cameraController,l=r.getWorldTransform,u=r.getCameraWorldTransform,c=r.store,f=(r.previousResult,e.target&&e.target.id);if(t.targetId=f,"Camera"===n.type&&n.id===i.id)return(0,a.default)(t,e);var h,d,p=f&&f===(0,s.get)(c,{scene:!0,plug:"Player",property:"camera"})?u():e.target?l(e.target.id):null;if(p&&t.transform){var m=e.orientation,v=e.lookAtAxis,g=e.upAxis,y=e.flipUpAxis,x=e.flipLookAtAxis,b=new o.Matrix4,w=new o.Quaternion,_=(new o.Vector3).setFromMatrixPosition(p),M=(new o.Vector3).setFromMatrixPosition(t.transform),S=(d=y,1===(h=g)?new o.Vector3(d?-1:1,0,0):2===h?new o.Vector3(0,d?-1:1,0):new o.Vector3(0,0,d?-1:1));b.lookAt(M,_,S),w.setFromRotationMatrix(b),w.multiply(function(e,t){var r=new o.Quaternion;return 1===e?r.setFromAxisAngle(new o.Vector3(0,1,0),t?-Math.PI/2:Math.PI/2):2===e?r.setFromAxisAngle(new o.Vector3(1,0,0),t?Math.PI/2:-Math.PI/2):3===e&&r.setFromAxisAngle(new o.Vector3(0,1,0),t?0:Math.PI),r}(v,x)),w.multiply((new o.Quaternion).setFromEuler((new o.Euler).setFromVector3(m.clone().multiplyScalar(Math.PI/180),"ZYX")));var T=l(n.parent);if(T){var E=(new o.Matrix4).getInverse(T),P=(new o.Matrix4).makeRotationFromQuaternion(w),A=(new o.Matrix4).multiplyMatrices(E,P);w.setFromRotationMatrix(A)}var C=new o.Vector3,R=new o.Quaternion,I=new o.Vector3;t.transform.decompose(C,R,I),t.transform.compose(C,w,I)}}},c={schema:{translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0},animatable:!0},scale:{label:"Scale",type:"Vec3",step:.1,defaultValue:{x:1,y:1,z:1},animatable:!0},rotateOrder:{label:"Rotate Order",type:"Options",display:"Dropdown",values:["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],defaultValue:"ZYX"},preRotation:{label:"Pre-Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0}},rotateAxis:{label:"Rotate Axis",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0}}},update:function(e,t,r){r.node;var n=e.translation,i=e.rotation,a=e.scale,s=(e.rotateOrder,e.preRotation),l=e.rotateAxis;0===a.x&&(a.x=1e-7),0===a.y&&(a.y=1e-7),0===a.z&&(a.z=1e-7);var u=(new o.Matrix4).makeTranslation(n.x,n.y,n.z),c=(new o.Vector3).copy(i).multiplyScalar(Math.PI/180),f=(new o.Matrix4).makeRotationFromEuler(new o.Euler(c.x,c.y,c.z,"ZYX")),h=(new o.Matrix4,(new o.Matrix4).makeScale(a.x,a.y,a.z)),d=(new o.Vector3).copy(s).multiplyScalar(Math.PI/180),p=(new o.Matrix4).makeRotationFromEuler(new o.Euler(d.x,d.y,d.z,"ZYX")),m=(new o.Vector3).copy(l).multiplyScalar(Math.PI/180),v=(new o.Matrix4).makeRotationFromEuler(new o.Euler(m.x,m.y,m.z,"ZYX"));t.transform=(new o.Matrix4).multiply(u).multiply(p).multiply(f).multiply(v).multiply(h)}};t.default={Transform:l,BoneTransform:c,LookAt:u}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={vrscene:{schema:{zipFile:{type:"File",hidden:!0},enabled:{type:"Boolean",label:"Enable Vrscene",defaultValue:!1}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(13)),i=l(r(6)),a=l(r(2));t.default=function(e,t){var r=t.withNone,n=(0,o.default)(function(e,t){return(0,o.default)(function(e,r){return u(t,e,r)},e)},e);r&&(n.None={NoOp:u("None",{schema:{}},"NoOp")});return n};var o=l(r(136)),s=l(r(178));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){var l=[],u=[],c=[],f=[],h=[],d={},p=(0,o.default)(function(e,t){var r=s.default[e.type]?(0,a.default)({type:e.type,schema:e},s.default[e.type](e)):{set:function(e){return e}};return r.isFileReference?u.push(t):r.isNodeReference?(f.push(t),c.push(t)):r.isPlugReference?(d[t]=r.isPlugReference,c.push(t)):r.isReferenceList?h.push(t):l.push(t),r},t.schema),m=(0,i.default)(p);return{schema:t.schema,keys:m,referenceKeys:c,fileReferenceKeys:u,nodeReferenceKeys:f,nodeReferenceListKeys:h,plugReferences:d,nonReferenceKeys:l,environment:t.environment,hierarchyVisible:t.hierarchyVisible,selfTransform:t.selfTransform,selfProperties:t.selfProperties,getProperties:function(){return p},typeOf:function(e){return t.schema[e]&&t.schema[e].type},set:function(e,t,r){var n=p[t]?p[t].set(r):r,i=p[t]&&p[t].equals?!p[t].equals(n,e[t]):n!==e[t];return i&&(e[t]=p[t]&&p[t].get?p[t].get(n):n),i},export:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).onlyChanged?(0,i.default)(t).reduce(function(e,r){var n=p[r]?p[r].set():void 0;return(p[r]&&p[r].equals?!p[r].equals(n,t[r]):n!==t[r])&&"name"!==r&&"type"!==r&&(e[r]=t[r]),e},{}):(0,a.default)({},t,{name:r,primitive:e})},contentExport:function(e){var t={},i=!0,a=!1,o=void 0;try{for(var s,u=(0,n.default)(l);!(i=(s=u.next()).done);i=!0){var c=s.value;t[c]=e[c]}}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}return t.type=r,t.name=e.name,t},get:function(e,t){return p[t]&&p[t].get?p[t].get(e[t]):e[t]},init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={type:e,name:arguments[2]||e},i=!0,a=!1,o=void 0;try{for(var s,l=(0,n.default)(m);!(i=(s=l.next()).done);i=!0){var u=s.value;r[u]=p[u].set(t[u])}}catch(e){a=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}return!1===t.active&&(r.active=!1),r},update:function(e,r,n){var i=(t.update?t.update.call(t,e,r,n):(0,a.default)(r,e))||r;return i.nodeId||(i.nodeId=n.node.id),i.id||(i.id=n.node.id),i._v=n.node._v,i}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=M(r(6)),i=M(r(2)),a=M(r(846));r(813),r(818),r(821),r(822),r(816),r(819),r(817),r(820),r(814),r(815),r(757),r(804),r(823),r(824),r(786),r(787),r(788),r(789),r(792),r(790),r(791),r(793),r(794),r(795),r(796),r(798),r(797),r(785),r(812),r(782),r(783),r(784),r(756),r(809),r(807),r(805),r(810),r(811),r(806),r(808),r(799),r(800),r(801),r(803),r(802),r(754),r(755),r(750),r(753),r(752),r(751),r(243),r(776),r(777),r(779),r(778),r(775),r(781),r(780),r(758),r(759),r(760),r(761),r(762),r(763),r(764),r(765),r(766),r(767),r(769),r(768),r(770),r(771),r(772),r(773),r(774),r(825),r(828),r(826),r(827),r(830),r(829),r(833),r(832),r(831),r(370);var o=_(r(373)),s=M(r(37)),l=M(r(376)),u=M(r(378)),c=M(r(375)),f=M(r(379)),h=M(r(377)),d=_(r(0)),p=M(r(646)),m=M(r(313)),v=(M(r(314)),r(10)),g=r(184),y=M(r(427)),x=M(r(421)),b=M(r(428)),w=r(31);function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function M(e){return e&&e.__esModule?e:{default:e}}for(var S=o.init([l.default,u.default,c.default,f.default,h.default]),T={patch:S,h:s.default,THREE:d},E=document.getElementsByTagName("script"),P=0;P<E.length;P++)E[P].src&&E[P].src.match(/claraplayer/)&&(r.p=E[P].src.split(/claraplayer/)[0]);function A(e,t){var o,s;"undefined"==typeof __SERVER_RENDER&&(o="playerv2",(s=document.createElement("script")).innerText=["(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){","(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),","m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)","})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');","ga('create', 'UA-38840155-4', 'auto', '"+o+"');","ga('"+o+".require', 'displayfeatures');","ga('"+o+".send', 'pageview');"].join(""),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(s));var l=void 0,u=void 0;"function"==typeof t?(l=t,u={},console.warn("DEPRECATED: second argument to `claraplayer` should be an options object")):l=(u=t||{}).callback;var c=a.default.init({accessToken:"6eacd7dbf0924b93b92a44b90418bc89",verbose:!1,captureUncaught:!u.devMode,payload:{environment:"cloud",context:"playerv2"}}),f=A.hasWebGL(),h="string"==typeof e?document.getElementById(e):e;h.appendChild(document.createElement("div"));var d=h.getBoundingClientRect();if(!d.height)throw new Error("Player element must have a height");var _=h.children[0],M=window.getComputedStyle(h,null),E="flex"===M.display,P="relative"===M.position,C=void 0,R=(0,y.default)({fetchApi:p.default,makeErrorsFatal:u.makeErrorsFatal,subscribe:function(){I&&!I.getTranslator()&&(0,v.getEvalSceneGraph)(I),C=S(C||_,(0,x.default)(I,{isFlex:E,isRelative:P,parentEl:h,hasWebGL:f}))}}),I=R._store;c&&I.useRollbar(c);var O=(d&&d.width)*d.height*(window&&window.devicePixelRatio);function L(e,t){(0,n.default)(e).forEach(function(r){var n=e[r];R.commands.addCommand("function"==typeof n?n(I,t):n,r)})}if(I.trackEvent("playerv2","Display Window","Display size",Math.round(O)),(0,i.default)(R.deps,T),R.version="2.3.117",l&&l(R),R.initializePlayer=(0,b.default)(R),I.dispatch((0,g.define)("configuratorui",{load:function(){return r.e(0).then(function(e){return r(876).default}.bind(null,r)).catch(r.oe)}})),I.dispatch((0,g.define)("steelcase",{shouldLoad:function(){return"cloud".match(/steelcase/)},load:function(){return r.e(2).then(function(e){var t=r(874);return R.steelcase=(0,m.default)(I,{steelcase:t.default(R)}).steelcase}.bind(null,r)).catch(r.oe)}})),I.dispatch((0,g.define)("editorCommands",{load:function(){return r.e(4).then(function(e){L(r(875).default)}.bind(null,r)).catch(r.oe)}})),f){var D=r(301).default;I.setTranslator(D,I);var N=I.getTranslator();L(r(623).default,N),I.dispatch((0,v.touch)());var V=r(628).default;R.commands.addCommand(V(I,I.getTranslator()),"vrMode");var F=r(629).default;R.commands.addCommand(F(I,I.getTranslator()),"vrSettings"),!w.isIE&&"getVRDisplays"in navigator&&navigator.getVRDisplays().then(function(e){if(e.length)for(var t=0;t<e.length;t++)"ZSpace Display"==e[t].displayName&&r.e(1).then(function(e){var t=r(385).default;R.commands.addCommand(t(I,I.getTranslator()),"zSpaceMode")}.bind(null,r)).catch(r.oe)})}return R}A.deps=T,A.hasWebGL=function(){var e=document.createElement("canvas");return!!e.getContext("webgl")||!!e.getContext("experimental-webgl")},t.default=A},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=s(r(43)),i=s(r(189)),a=s(r(3)),o=s(r(141));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r=e.length,a=n.default.sort(o.default.identity(r),e.newCompareAtIndicesStable()),s=0,l=null,u=e.newCompareAtIndices();if(t)s=n.default.unique(a,u);else{l=new Uint32Array(r);for(var c=0,f=0,h=a[0],d=1;d<r;++d){var p=a[d];if(0!==u(p,h)){for(var m=f;m!==d;++m)l[a[m]]=h;f=d,h=p,++c!==d&&(a[c]=p)}}for(var v=f;v!==r;++v)l[a[v]]=h;s=c+1}var g=new i.default(r).includeFromArray(a,0,s).toIndexArray(s);if(null!==l){var y=a,x=o.default.inverse(g,null,y);o.default.apply(l,x)}this.targetToSourceMap=g,this.sourceToTargetMap=l}l.prototype={constructor:l,compactedValues:function(e){for(var t=this.targetToSourceMap,r=t.length,n=new a.default(e.type,r),i=e.newRangeArray(),o=0;o!==r;++o)e.rangeToArray(t[o],1,i),n.arrayToRange(i,o,1);return n},indices:function(e){return new Uint32Array(this.sourceToTargetMap)},transcribeIndices:function(e){return o.default.apply(e,this.sourceToTargetMap)}}},function(e,t,r){"use strict";function n(e,t){this.ping=new e(t),this.pong=new e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.apply=function(e){new n(e.constructor,e.length).sortRange(e,0,e.length)},n.prototype={constructor:n,sortRange:function(e,t,r){var n=r-t;if(n<=4)n>=2&&this._handleShortRange(e,t,n);else for(var i=e,a=t,o=r,s=this.ping,l=0,u=1,c=2,f=!0;f;){for(var h=(n+u-1)/u>>1,d=a,p=a+c,m=0;m<=1;++m){for(var v=1;v!==h;++v,d+=u,p+=c)for(var g=d+u,y=g,x=i[d],b=i[g],w=!0;w;)if(b<x)if(s[l++]=b,++g===p){for(s[l++]=x;++d!==y;)s[l++]=i[d];w=!1}else b=i[g];else if(s[l++]=x,++d===y){for(s[l++]=b;++g!==p;)s[l++]=i[g];w=!1}else x=i[d];if(0===m)if(h=2,p>o)p=o;else if(p!==o)for(var _=l+c,M=p;M!==o;++M)s[_++]=i[M]}if(s!==e)if(u=c,i=s,a=0,o=n,(c<<=1)<n){var S=this.ping;s=s===S?this.pong:S,l=0}else s=e,l=t;else f=!1}},_handleShortRange:function(e,t,r){var n=e[t],i=e[t+1];switch(r){case 2:i<n&&(e[t]=i,e[t+1]=n);break;case 3:var a=e[t+2];if(i<n){var o=n;n=i,i=o}if(a<i){var s=i;i=a,a=s}if(i<n){var l=n;n=i,i=l}e[t]=n,e[t+1]=i,e[t+2]=a;break;case 4:var u=e[t+2],c=e[t+3];if(i<n){var f=n;n=i,i=f}if(c<u){var h=u;u=c,c=h}if(u<n){var d=n;n=u,u=d}if(c<i){var p=i;i=c,c=p}if(u<i){var m=i;i=u,u=m}e[t]=n,e[t+1]=i,e[t+2]=u,e[t+3]=c}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(89)),i=u(r(2));t.default=p,t.faceFaceIntersection=w;var a=u(r(3)),o=u(r(7)),s=u(r(5)),l=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(r(278)),r(0));function u(e){return e&&e.__esModule?e:{default:e}}function c(){this.faceIndex=-1,this.point=new l.Vector3(1/0,1/0,1/0),this.distance=1/0}c.prototype={constructor:c,set:function(e,t,r){this.faceIndex=e,this.point.copy(t),this.distance=r},isHit:function(){return this.faceIndex>-1}};var f=1e-8,h=3,d=0;function p(e,t){if(t){for(var r=new l.Vector3,n=e.positions.values,i=new a.default(l.Vector3,n.length),u=0;u<n.length;++u)n.getAt(u,r),r.applyMatrix4(t),i.setAt(u,r);for(var c=e.normalMap.values,f=new a.default(l.Vector3,c.length),p=(new l.Matrix3).getNormalMatrix(t),m=0;m<c.length;++m)c.getAt(m,r),r.applyMatrix3(p),f.setAt(m,r);var v=new o.default(e.positions,{values:i}),g=new o.default(e.normalMap,{values:f});e=new s.default(e,{positions:v,normalMap:g})}this.polyMesh=e,this.maxPerLeaf=h,this.buildTree(d)}function m(e,t,r,n){this.polyMesh=t,this.parent=e,this.splitAxis=r,this.boundingBox=x(t,n),this.boundingBoxCenter=this.boundingBox.getCenter(),this.splitPlane=this.createSplitPlane(t,n),this.children=[]}function v(e,t,r){this.polyMesh=t,this.parent=e,this.faceIndices=r,this.boundingBox=x(t,r),this.boundingBoxCenter=this.boundingBox.getCenter()}function g(e,t,r,n,i,a){var o=e.positions,s=o.faceValueIndices,u=o.faceRangeOffsets[t],c=o.faceRangeOffsets[t+1],h=new l.Vector3;S(e.positions,t,h);var d=(new l.Plane).setFromNormalAndCoplanarPoint(h,o.values.getAt(s[u])),p=d.normal.dot(r.direction);if(Math.abs(p)<f)return!1;var m=-(d.normal.dot(r.origin)+d.constant)/p;if(m<n||m>i||m>a.distance)return!1;for(var v=r.at(m,h),g=new l.Triangle,y=u;y<c-2;++y)if(g.set(o.values.getAt(s[u]),o.values.getAt(s[y+1]),o.values.getAt(s[y+2])),g.containsPoint(v))return a.faceIndex=t,a.point=v,a.distance=m,!0;return!1}function y(e,t,r){r=r||f;var n=e.min,i=e.max;return t.x-n.x>=-r&&t.y-n.y>=-r&&t.z-n.z>=-r&&i.x-t.x>=-r&&i.y-t.y>=-r&&i.z-t.z>=-r}function x(e,t,r){for(var n=r||new l.Box3,i=new l.Vector3,a=0;a<t.length;++a)for(var o=e.faceRangeOffsets[t[a]],s=e.faceRangeOffsets[t[a]+1],u=o;u<s;++u)e.positions.values.getAt(e.positions.faceValueIndices[u],i),n.expandByPoint(i);return n}function b(e,t,r,n){var i=e.positions,a=i.faceValueIndices,o=i.faceRangeOffsets[t],s=i.faceRangeOffsets[t+1];(n=n||new l.Vector3).set(1/0,1/0,1/0);for(var u=new l.Vector3,c=new l.Triangle,f=o;f<s-2;++f)c.set(i.values.getAt(a[o]),i.values.getAt(a[f+1]),i.values.getAt(a[f+2])),c.closestPointToPoint(r,u),r.distanceToSquared(u)<r.distanceToSquared(n)&&n.copy(u);return n}function w(e,t,r,i){var a=new l.Line3,o={intersects:!1},s=e.positions,u=s.faceRangeOffsets[t],c=s.faceRangeOffsets[t+1],h=s.edgeVertexAdjacency,d=(new l.Plane).setFromNormalAndCoplanarPoint(S(s,t),s.values.getAt(s.faceValueIndices[u])),p=r.positions,m=p.faceRangeOffsets[i],v=p.faceRangeOffsets[i+1],g=p.edgeVertexAdjacency,y=(new l.Plane).setFromNormalAndCoplanarPoint(S(p,i),p.values.getAt(p.faceValueIndices[m])),x=function(e,t){var r=e.normal.dot(t.normal),n=1-r*r;if(Math.abs(n)<f)return null;var i=new l.Vector3;i.crossVectors(e.normal,t.normal);var a=new l.Vector3,o=new l.Vector3;return a.copy(e.normal).multiplyScalar(t.constant),o.copy(t.normal).multiplyScalar(e.constant),a.sub(o),o.crossVectors(a,i).multiplyScalar(1/i.lengthSq()),i.normalize(),{forward:new l.Ray(o,i),backward:new l.Ray(o,i.clone().negate())}}(d,y);if(!x)return o;for(var b=[{t:1/0},{t:-1/0}],w=new l.Vector3,_=new l.Vector3,M=new l.Vector3,T=void 0,E=void 0,P=u;P<c;++P){T=s.faceValueIndices[P],s.values.getAt(T,w),E=P<c-1?s.faceValueIndices[P+1]:s.faceValueIndices[u],s.values.getAt(E,_);var A=y.distanceToPoint(w),C=y.distanceToPoint(_);if((0,n.default)(A)!==(0,n.default)(C)){a.set(w,_),y.intersectLine(a,M),M.sub(x.forward.origin);var R=h.findEdgeId(T,E),I=M.dot(x.forward.direction);I<b[0].t&&(b[0]={t:I,e:R,fromA:!0}),I>b[1].t&&(b[1]={t:I,e:R,fromA:!0})}}if(!isFinite(b[0].t+b[1].t))return o;for(var O=[{t:1/0},{t:-1/0}],L=m;L<v;++L){T=p.faceValueIndices[L],p.values.getAt(T,w),E=L<v-1?p.faceValueIndices[L+1]:p.faceValueIndices[m],p.values.getAt(E,_);var D=d.distanceToPoint(w),N=d.distanceToPoint(_);if((0,n.default)(D)!==(0,n.default)(N)){a.set(w,_),d.intersectLine(a,M),M.sub(x.forward.origin);var V=g.findEdgeId(T,E),F=M.dot(x.forward.direction);F<O[0].t&&(O[0]={t:F,e:V,fromA:!1}),F>O[1].t&&(O[1]={t:F,e:V,fromA:!1})}}if(isFinite(O[0].t+O[1].t)){var B=b[0].t<O[0].t?b:O,U=B===b?O:b;B[1].t>=U[0].t&&(o.intersects=!0,o.ray=x,o.tmin=U[0],o.tmax=B[1].t<U[1].t?B[1]:U[1])}return o}p.prototype={constructor:p,buildTree:function(e){for(var t=[],r=0;r<this.polyMesh.faceRangeOffsets.length-1;++r)t[r]=r;this.rootNode=new m(null,this.polyMesh,e,t,this.polyMesh.boundingBox),this.rootNode.createChildren(this.polyMesh,t,this.maxPerLeaf)||(this.rootNode=new v(null,this.polyMesh,t))},findNearestNeighbour:function(e){var t=new c;return this.rootNode.findNearestNeighbour(this.polyMesh,e,t),t},raycast:function(e,t,r){var n=new c;return e.intersectsBox(this.rootNode.boundingBox)&&this.rootNode.raycast(this.polyMesh,e,t,r,n),n},intersectsFace:function(e,t){for(var r=e.rootNode;r.children;)r=r.children.find(function(e){return e.getFaceIndices().indexOf(t)>=0});return this.rootNode.intersectFace(e,t,r.boundingBox)||{}}},m.prototype={constructor:m,createChildren:function(e,t,r){var n=[[],[],[]];this.sortFaceIndices(e,t,n);for(var i=this.splitAxis,a=!0;Math.max(n[0].length,n[1].length,n[2].length)===t.length;){if(this.splitAxis=(this.splitAxis+1)%3,i===this.splitAxis){a=!1;break}n[0].length=0,n[1].length=0,n[2].length=0,this.sortFaceIndices(e,t,n)}if(!a)return!1;for(var o=0;o<3;++o){var s=n[o].length<=r;this.children[o]=this.createChild(e,n[o],s),s||this.children[o].createChildren(e,n[o],r)||(this.children[o]=this.createChild(e,n[o],!0))}return!0},createChild:function(e,t,r){return r?new v(this,e,t):new m(this,e,(this.splitAxis+1)%3,t)},sortFaceIndices:function(e,t,r){for(var n=new l.Vector3,i=void 0,a=void 0,o=void 0,s=void 0,u=0;u<t.length;++u){i=e.faceRangeOffsets[t[u]],a=e.faceRangeOffsets[t[u]+1],s=!1,o=!1;for(var c=i;c<a&&(e.positions.values.getAt(e.positions.faceValueIndices[c],n),!(y(this.boundingBox,n,1e-4)&&(s||(s=n.getComponent(this.splitAxis)<this.splitPlane.constant),o||(o=n.getComponent(this.splitAxis)>=this.splitPlane.constant),s&&o)));++c);s&&o?r[1].push(t[u]):s?r[0].push(t[u]):r[2].push(t[u])}},createSplitPlane:function(e,t){for(var r=new l.Vector3,n=1/e.positions.faceValueIndices.length,i=new l.Vector3,a=0;a<t.length;++a)for(var o=e.faceRangeOffsets[t[a]],s=e.faceRangeOffsets[t[a]+1],u=o;u<s;++u)e.positions.values.getAt(e.positions.faceValueIndices[u],r),i.add(r.multiplyScalar(n));var c=i.getComponent(this.splitAxis);return r.set(0,0,0).setComponent(this.splitAxis,1),new l.Plane(r.clone(),c)},getFaceIndices:function(){for(var e=[],t=0;t<3;++t)e=e.concat(this.children[t].getFaceIndices());return e},markFaceIndicesInArray:function(e){for(var t=0;t<3;++t)this.children[t].markFaceIndicesInArray(e)},findNearestNeighbour:function(e,t,r){if(!(this.boundingBox.distanceToPoint(t)>=r.distance)){var n=void 0,i=void 0;t.distanceToSquared(this.children[0].boundingBoxCenter)<t.distanceToSquared(this.children[2].boundingBoxCenter)?(i=0,n=1):(i=2,n=-1);for(var a=0;a<3;++a)this.children[i].findNearestNeighbour(e,t,r),i+=n}},raycast:function(e,t,r,n,i){for(var a=[],o=void 0,s=0;s<3;++s)if(o=t.intersectBox(this.children[s].boundingBox)){var l=o.distanceTo(t.origin);if(l>n)continue;o.childIndex=s,o.distToRayOrigin=l,a.push(o)}a.sort(function(e,t){return e.distToRayOrigin-t.distToRayOrigin});for(var u=0;u<a.length&&a[u].distToRayOrigin<i.distance;++u)this.children[a[u].childIndex].raycast(e,t,r,n,i)},intersectFace:function(e,t,r){if(this.boundingBox.intersectsBox(r))return this.children.reduce(function(n,a){return(0,i.default)(n,a.intersectFace(e,t,r))},{})}},v.prototype={constructor:v,getFaceIndices:function(){return this.faceIndices},markFaceIndicesInArray:function(e){for(var t=0;t<this.faceIndices.length;++t)e[this.faceIndices[t]]=!0},findNearestNeighbour:function(e,t,r){this.faceIndices.length<1||this.boundingBox.distanceToPoint(t)>=r.distance||function(e,t,r,n){for(var i=new l.Vector3,a=new l.Vector3(1/0,1/0,1/0),o=void 0,s=void 0,u=0;u<t.length;++u)b(e,t[u],r,i),r.distanceToSquared(i)<r.distanceToSquared(a)&&(a.copy(i),o=t[u],s=r.distanceTo(i));n.distance>s&&n.set(o,a,s)}(e,this.faceIndices,t,r)},raycast:function(e,t,r,n,i){for(var a=0;a<this.faceIndices.length;++a)g(e,this.faceIndices[a],t,r,n,i)},intersectFace:function(e,t,r){var n=this;return this.faceIndices.reduce(function(r,i){return r[i]=w(n.polyMesh,i,e.polyMesh,t),r[i].intersects||delete r[i],r},{})}};var _,M,S=(_=new l.Vector3,M=new l.Vector3,function(e,t,r){var n=r||new l.Vector3;n.set(0,0,0);for(var i=e.faceRangeOffsets,a=e.faceValueIndices,o=e.values,s=i[t],u=i[t+1]-s,c=a[s],f=a[s+1%u],h=0;h<u;++h){var d=c;c=f,f=a[s+(h+2)%u],o.getAt(d,_),o.getAt(c,M),n.x+=(_.y-M.y)*(_.z+M.z),n.y+=(_.z-M.z)*(_.x+M.x),n.z+=(_.x-M.x)*(_.y+M.y)}return n.normalize(),n})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(47)),i=a(r(58));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t,r){(0,n.default)(this,e),this.start=t,this.end=r}return(0,i.default)(e,[{key:"intersects",value:function(e){return e&&this.start<=e.end&&this.end>=e.start}},{key:"merge",value:function(e){this.start=Math.min(this.start,e.start),this.end=Math.max(this.end,e.end)}},{key:"compare",value:function(e){return this.start>e?1:this.end<e?-1:0}}]),e}(),s=function(){function e(){(0,n.default)(this,e),this.ranges=[],this.sortedIndex=function(e,t){for(var r=0,n=e.length;r<n;){var i=r+n>>>1;e[i].compare(t)<0?r=i+1:n=i}return r}}return(0,i.default)(e,[{key:"add",value:function(e,t){if(t||(t=e),e>t)console.error("Attempting to add invalid range ("+e+","+t+")");else{var r=new o(e,t);if(this.ranges.length){var n=this.sortedIndex(this.ranges,e),i=this.sortedIndex(this.ranges,t);if(i<this.ranges.length&&t>=this.ranges[i].start&&(i+=1),n===i)this.ranges.splice(n,0,r);else{for(var a=r,s=n;s<i;s++)a.merge(this.ranges[s]);this.ranges.splice(n,i-n,a)}}else this.ranges.push(r)}}},{key:"expanded",value:function(){for(var e=[],t=void 0,r=void 0,n=void 0,i=0;i<this.ranges.length;i++){t=(r=this.ranges[i]).end-r.start+1,n=new Array(t);for(var a=0;a<t;++a)n[a]=r.start+a;e=e.concat(n)}return e}}]),e}();t.default=s},function(e,t,r){"use strict";[Uint32Array,Int32Array,Uint8Array,Int8Array].forEach(function(e){e.prototype.fill||Object.defineProperty(e.prototype,"fill",{value:function(e,t,r){t=t||0,r=r||this.length;for(var n=t;n<r;n++)this[n]=e;return this}}),e.prototype.slice||Object.defineProperty(e.prototype,"slice",{value:function(e,t){for(var r=void 0===e?0:e,n=void 0===t?this.length:t,i=n-r,a=new this.constructor(i),o=0;r<n;)a[o]=this[r],++o,++r;return a}}),e.prototype.sort||Object.defineProperty(e.prototype,"sort",{value:function(e){return Array.prototype.sort.call(this,function(t,r){return t!=t&&r!=r?0:t!=t?1:r!=r?-1:void 0!==e?e(t,r):t<r?-1:t>r?1:0})}}),e.from||(e.from=function(t,r,n){var i=e.prototype;if(this.prototype!==i)throw new TypeError("this is not a typed array.");if("function"!=typeof(r=r||function(e){return e}))throw new TypeError("specified argument is not a function");if(!(t=Object(t)).length)return new this(0);for(var a=[],o=0;o<t.length;o++)a.push(t[o]);var s=new this((a=a.map(r,n)).length);for(o=0;o<s.length;o++)s[o]=a[o];return s})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(43)),i=a(r(535));function a(e){return e&&e.__esModule?e:{default:e}}var o={collapsePositions:function(e,t){var r=new i.default(e),n=r.compactedValues(e);return t&&r.transcribeIndices(t),n},collapseMapVertexValues:function(e,t){for(var r=e.positions.updateInverseIndex(),i=(e.faceRangeOffsets,r.faceValueIndices),a=r.faceRangeOffsets,o=-1,s=0,l=r.valueFaceIndexOffsets,u=r.valueFaceIndices,c=t.values,f=c.data,h=c.elementSize,d=t.faceValueIndices,p=0,m=e.getNumFaceVertices();p!==m;++p){var v=i[p],g=d[p],y=g*h;p===s&&(s=a[++o+1]);for(var x=l[v],b=l[v+1],w=x;w!==b;++w){var _=u[w];if(_===o)break;var M=d[r.findValueIndexOffset(_,v)];M!==g&&n.default.rangeEquals(f,y,f,M*h,h)&&(d[p]=M)}}}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n,i=r(44),a=(n=i)&&n.__esModule?n:{default:n};var o=!1;function s(e,t){for(var r=[],n=[],i=new a.default.Iterator(e);i.next();){var s=i.element,l=i.getId();t&&-1===t.indexOf(l)||(r.push(l),n.push({map:s,faceIndices:s.updateInverseIndex().valueFaceIndices,facesOffset:0}))}for(var u=e.getNumFaceVertices(),c=n.length,f=new Uint32Array(u),h=new Uint32Array(u*c),d=0,p=0,m=e.faceRangeOffsets,v=-1,g=0,y=n[c-1],x=y.faceIndices,b=c-2,w=0;w!==u;++w){w===g&&(g=m[++v+1]);for(var _=!0,M=0,S=0;S!==c;++S){var T=(s=(I=n[S]).map).faceValueIndices[w];if(h[d+S]=T,_){var E=s.valueFaceIndexOffsets[T];void 0===E&&(o||(console.warn("GOT INVALID INDICES, using default index of zero to avoid errors, but this may lead to bad looking meshes"),o=!0),E=0);var P=s.valueFaceIndices[E];I.facesOffset=E,_=P!==v}}if(_){var A=y.facesOffset,C=0,R=!0;do{_=R=(C=x[A++])!==v;for(S=b;R&&-1!==S;--S){for(var I,O=(I=n[S]).facesOffset,L=I.faceIndices,D=L[O];D<C;)D=L[++O];D!==C&&(R=!1),D===v?_=!1:I.facesOffset=O}}while(A<x.length&&_&&!R);_=R,M=C}if(_){var N=n[0].map,V=f[N.findValueIndexOffset(M,N.faceValueIndices[w])];f[w]=V}else f[w]=p++,d+=c}this.mesh=e,this.mapIds=r,this.renderIndices=f,this.valueIndices=h.slice(0,d),this.numVertices=p}s.prototype={constructor:s,getMapValues:function(e,t){var r=this.mapIds,n=r.indexOf(e),i=this.numVertices,o=this.valueIndices;if(-1===n)throw Error("Map with id '"+e+"' not found!");var s=a.default.resolveMap(this.mesh,e).values;if(t.length<i)throw Error("Data won't fit!");for(var l=n,u=r.length,c=new t.type,f=0;f!==i;++f){var h=o[l+f*u];t.setAt(f,s.getAt(h,c))}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=r(0);function i(e){this.mesh=e,this.groups=null;for(var t=0,r=e.faceRangeOffsets,n=r[0],i=0,a=1,o=r.length;a<o;++a){var s=r[a],l=s-n;l>=3&&(t+=l-2),i=Math.max(i,l),n=s}this.startFaceIndices=this.getStartFaceIndices(e.positions,i),this.numTriangles=t}i.prototype={constructor:i,getStartFaceIndices:function(e,t){for(var r,i,a,o=this.mesh.faceRangeOffsets,s=this.mesh.faceRangeOffsets.length-1,l=new Uint32Array(s),u=new Float32Array(t),c=e.faceValueIndices,f=e.values,h=new n.Vector3,d=new n.Vector3,p=new n.Vector3,m=new n.Vector3,v=new n.Vector3,g=new n.Vector3,y=new n.Vector3,x=new n.Vector3,b=new n.Vector3,w=0,_=o.length-1;w<_;++w){var M=o[w],S=o[w+1]-M;if(!(S<=3)){var T=c[M+(S-1)],E=c[M],P=c[M+1%S];f.getAt(T,v),f.getAt(E,g),f.getAt(P,y),d.copy(g).sub(v),p.copy(y).sub(g),b.copy(p).cross(d);for(var A=0;A<S;++A){T,T=E,E=P,P=c[M+(A+2)%S],i=m,m=v,v=g,g=y,y=i,f.getAt(P,y),r=h,h=d,d=p,(p=r).copy(y).sub(g),a=x,x=b,(b=a).copy(p).cross(d);var C=x.dot(b);u[A]=C}for(A=0;A<S;++A){C=u[A];var R=u[(A+1)%S];if(C>=0&&R>=0){l[w]=(A+1)%S;break}}}}return l},translateIndices:function(e,t){var r=this.mesh.faceRangeOffsets,n=t.data,i=t.offset,a=t.stride,o=null,s=null,l=null,u=null;if(this.mesh.materialIds){o=this.mesh.materialIds;for(var c=r.length-1,f=(s=new Uint32Array(c),0);f<s.length;f++)s[f]=f;s.sort(function(e,t){return o[e]-o[t]});var h=Math.min(o[s[c-1]]+1,30);l=new Uint32Array(h);for(f=0;f<h;f++)l[f]=n.length;u=new Uint32Array(h)}for(f=0;f<this.startFaceIndices.length;++f){var d=f;s&&(d=s[f]);for(var p=this.startFaceIndices[d],m=r[d],v=r[d+1]-m,g=0;g<v-2;++g){if(o){var y=Math.min(o[d],29);l[y]=Math.min(l[y],i),u[y]=Math.max(u[y],i+2*a)}n[i]=e[m+p],n[i+=a]=e[m+(p+g+1)%v],n[i+=a]=e[m+(p+g+2)%v],i+=a}}if(o){for(f=0;f<u.length;f++)u[f]=u[f]-l[f]+1;this.groups={groupStarts:l,groupCounts:u}}},translateMaterialIds:function(e){for(var t=this.mesh.faceRangeOffsets,r=this.mesh.materialIds,n=t[0],i=1,a=t.length;i<a;++i){for(var o=r[i-1],s=t[i],l=s-n,u=writeIndex+(l>=3?l-2:0)*stride;writeIndex!==u;writeIndex+=stride)outputArray[writeIndex]=o;n=s}},translateToUnindexedValues:function(e,t,r){var n=this.mesh.faceRangeOffsets,i=0,a=e.newRangeArray(1),o=null,s=null,l=null,u=null;if(this.mesh.materialIds){o=this.mesh.materialIds;for(var c=n.length-1,f=(s=new Uint32Array(c),0);f<s.length;f++)s[f]=f;s.sort(function(e,t){return o[e]-o[t]});var h=o[s[c-1]]+1;l=new Uint32Array(h);for(f=0;f<h;f++)l[f]=t.length;u=new Uint32Array(h)}for(f=0;f<this.startFaceIndices.length;++f){var d=f;s&&(d=s[f]);for(var p=this.startFaceIndices[d],m=n[d],v=n[d+1]-m,g=0;g<v-2;++g){if(o){var y=o[d];l[y]=Math.min(l[y],i),u[y]=Math.max(u[y],i+2)}t.arrayToRange(e.rangeToArray(r[m+p],1,a),i,1),t.arrayToRange(e.rangeToArray(r[m+(p+g+1)%v],1,a),i+1,1),t.arrayToRange(e.rangeToArray(r[m+(p+g+2)%v],1,a),i+2,1),i+=3}}if(o){for(f=0;f<u.length;f++)u[f]=u[f]-l[f]+1;this.groups={groupStarts:l,groupCounts:u}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n,i=r(0),a=r(3),o=(n=a)&&n.__esModule?n:{default:n};function s(e){this.positionSkinRange=e.positionSkinRange,this.skinWeights=e.skinWeights,this.skinBoneIndices=e.skinBoneIndices,this.poseSkinToPoseBoneTransform=e.poseSkinToPoseBoneTransform}s.prototype={constructor:s,applyTransforms:function(e,t,r,n){return this.deform(this.createFinalTransforms(t,r,n),e)},createFinalTransforms:function(e,t,r){var n=this.poseSkinToPoseBoneTransform,a=(new i.Matrix4).getInverse(e,!0),o=new Array(n.length);(new i.Matrix4).identity();if(0===n.length)return o;var s=void 0,l=void 0,u=void 0;r>-1&&(s=t[r],l=(new i.Matrix4).getInverse(s,!0),u=(new i.Matrix4).getInverse(n.getAt(r),!0));for(var c=new i.Matrix4,f=new i.Matrix4,h=(new i.Matrix4,0),d=n.length;h<d;h++){var p=t[h];r>-1?(c.multiplyMatrices(l,p),f.multiplyMatrices(u,c)):f.multiplyMatrices(a,p),o[h]=(new i.Matrix4).multiplyMatrices(f,n.getAt(h))}return o},deform:function(e,t){for(var r=this.positionSkinRange,n=this.skinWeights,a=this.skinBoneIndices,s=new o.default(i.Vector3,t.length),l=new i.Vector3,u=new i.Vector3,c=0;c<t.length;c++){t.getAt(c,l),u.multiplyScalar(0);for(var f=r[c];f<r[c+1];f++)t.getAt(c,l),l.applyMatrix4(e[a[f]]),l.multiplyScalar(n[f]),u.addVectors(u,l);r[c+1]-r[c]==0&&u.copy(l),s.setAt(c,u)}return s}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=a(r(536)),i=a(r(43));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){this.polyMap=e,this.edgeHighVertexIndices=null,this.edgePivotRangeOffsets=null,this.edgeVertices=null,this._compactEdgeLowToHighMap(this._buildEdgeLowToHighMap()),this._inverseMapping()}o.prototype={constructor:o,getNumEdges:function(){return this.edgeHighVertexIndices.length},findEdgeId:function(e,t){var r=e,n=t;n<r&&(r=t,n=e);var a=this.edgePivotRangeOffsets;return i.default.binarySearch(this.edgeHighVertexIndices,n,a[r],a[r+1])},getVerticesForEdge:function(e,t){return t?(t[0]=this.edgeVertices[2*e],t[1]=this.edgeVertices[2*e+1],t):{v:this.edgeVertices[2*e],vNext:this.edgeVertices[2*e+1]}},_inverseMapping:function(){for(var e=this.getNumEdges(),t=new Uint32Array(2*e),r=0;r<this.edgePivotRangeOffsets.length-1;r++)for(var n=this.edgePivotRangeOffsets[r],i=this.edgePivotRangeOffsets[r+1],a=n;a<=i;a++){var o=this.edgeHighVertexIndices[a];t[2*a+0]=r,t[2*a+1]=o}this.edgeVertices=t},_buildEdgeLowToHighMap:function(){for(var e=this.polyMap.faceRangeOffsets,t=this.polyMap.faceValueIndices,r=this.polyMap.values.length,n=new Uint32Array(r+2),a=n.subarray(2),o=e[0],s=0,l=1,u=e.length;l!==u;++l){for(var c=e[l],f=t[c-1],h=o;h!==c;++h){var d=t[h],p=++a[d<f?d:f];p>s&&(s=p),f=d}o=c}i.default.accumulate(a);var m=n.subarray(1),v=new Uint32Array(m[r]);o=e[0];for(var g=1,y=e.length;g!==y;++g){for(var x=e[g],b=t[x-1],w=o;w!==x;++w){var _=t[w],M=b,S=_;S<M&&(M=_,S=b),v[m[M]++]=S,b=_}o=x}return this.edgePivotRangeOffsets=n,this.edgeHighVertexIndices=v,s},_compactEdgeLowToHighMap:function(e){for(var t=this.edgePivotRangeOffsets,r=this.edgeHighVertexIndices,a=new n.default(Uint32Array,e),o=this.polyMap.values.length+1,s=0,l=0,u=0,c=1;c!==o;++c){if(l!==(s=t[c])){a.sortRange(r,l,s);var f=r[l];r[u++]=f;for(var h=l+1;h<s;++h){var d=r[h];d!==f&&(r[u++]=d,f=d)}}t[c]=u,l=s}this.edgeHighVertexIndices=i.default.slice(r,0,u),this.edgePivotRangeOffsets=t.subarray(0,o)}}},function(e,t,r){"use strict";function n(e){this.polyMap=e,this.faceEdgeIndices=null,this.edgeFaceCounts=null,this.edgeFaceIndices=null,this._compute()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={constructor:n,getEdgeIdFromFaceValueIndex:function(e){return this.faceEdgeIndices[e]},getNumFacesForEdgeId:function(e){return this.edgeFaceCounts[e]},getFaceForEdgeId:function(e,t){return this.edgeFaceIndices[2*e+t]},checkValidity:function(){for(var e=!0,t=0;t<this.edgeFaceCounts.length;t++)this.edgeFaceCounts[t]>2&&(e=!1);return e},_compute:function(){for(var e=this.polyMap,t=e.edgeVertexAdjacency,r=e.faceRangeOffsets,n=e.faceValueIndices,i=t.edgeHighVertexIndices.length,a=new Uint32Array(i),o=new Uint32Array(2*i),s=new Uint32Array(n.length),l=0;l<r.length-1;l++)for(var u=r[l],c=r[l+1]-u,f=n[u],h=0;h<c;h++){var d=f;f=n[u+(h+1)%c];var p=t.findEdgeId(d,f);s[u+h]=p,o[2*p+a[p]]=l,a[p]++}return this.faceEdgeIndices=s,this.edgeFaceCounts=a,this.edgeFaceIndices=o,this}}},function(e,t,r){"use strict";function n(e){this.polyMap=e,this.faceFaceCounts=null,this.faceFaceIndices=null,this._compute()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={constructor:n,getAdjacentFaces:function(e){for(var t=this.faceFaceCounts[e+1]-this.faceFaceCounts[e],r=new Uint32Array(t),n=this.faceFaceCounts[e],i=0;n<this.faceFaceCounts[e+1];n++,i++)r[i]=this.faceFaceIndices[n];return r},adjacentFacesOnVertex:function(e,t){for(var r=this.getAdjacentFaces(e),n=this.polyMap.faceRangeOffsets,i=this.polyMap.faceValueIndices,a=[],o=0;o<r.length;o++)for(var s=n[r[o]];s<n[r[o]+1];s++)if(i[s]===t){a.push(r[o]);break}return a},_compute:function(){for(var e=this.polyMap.faceRangeOffsets,t=(this.polyMap.faceValueIndices,this.polyMap.faceEdgeAdjacency),r=new Uint32Array(e.length),n=[],i=0;i<e.length-1;i++){for(var a=[],o=e[i];o<e[i+1];o++){var s=t.getEdgeIdFromFaceValueIndex(o);if(t.getNumFacesForEdgeId(s)>1){var l=t.getFaceForEdgeId(s,0);l===i&&(l=t.getFaceForEdgeId(s,1)),a.push(l)}}r[i+1]=r[i]+a.length,n.push.apply(n,a)}return this.faceFaceCounts=r,this.faceFaceIndices=new Uint32Array(n),this}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(13),a=(n=i)&&n.__esModule?n:{default:n};function o(e){this.polymesh=e,this.mapVertexToComponent=null,this.components=null,this._compute()}t.default=o,o.prototype={constructor:o,getNumComponents:function(){return this.components.length},getComponents:function(){return this.components},getComponent:function(e){return this.component[e]},getComponentForVertexId:function(e){return this.components[this.mapVertexToComponent[e]]},getComponentForFaceId:function(e){var t=this.polymesh.faceRangeOffsets[e],r=this.polymesh.positions.faceValueIndices[t];return this.getComponentForVertexId(r)},_compute:function(){for(var e=this.polymesh.positions.valueAdjacency,t=this.polymesh.getNumVertices(),r=new Array(t).fill(-1),n=[],i=0,o=0;o<t;++o)if(-1===r[o]){var s=[o];r[o]=i;for(var l=[o];l.length>0;){var u=l.pop(),c=!0,f=!1,h=void 0;try{for(var d,p=(0,a.default)(e.getAdjacentValues(u));!(c=(d=p.next()).done);c=!0){var m=d.value;-1===r[m]&&(r[m]=i,s.push(m),l.push(m))}}catch(e){f=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(f)throw h}}}s.sort(),n.push(s),++i}this.mapVertexToComponent=r,this.components=n}}},function(e,t,r){"use strict";function n(e){this.polyMap=e,this._compute()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={constructor:n,getNumEdgesForVertex:function(e){var t=this.valueEdgeOffsets[e];return this.valueEdgeOffsets[e+1]-t},getEdgeForVertexId:function(e,t){var r=this.valueEdgeOffsets[e];return this.valueEdgeIndices[r+t]},getEdgeOrderForVertexId:function(e){for(var t=this.getNumEdgesForVertex(e),r=this.polyMap.edgeVertexAdjacency,n=this.polyMap.faceEdgeAdjacency,i=this.polyMap.faceRangeOffsets,a=this.polyMap.faceValueIndices,o=this.getEdgeForVertexId(e,0),s=n.getNumFacesForEdgeId(o,0),l=!1,u=0;!l&&u<t;){var c=this.getEdgeForVertexId(e,u);if(1===n.getNumFacesForEdgeId(c))for(var f=n.getFaceForEdgeId(c,0),h=i[f],d=i[f+1]-h,p=a[h],m=a[h+1],v=0;v<d;++v){var g=p;if(p=m,m=a[h+(v+2)%d],g===e)r.findEdgeId(g,p)===c&&(o=c,s=f,l=!0)}++u}if(!l)for(var y=i[s],x=i[s+1]-y,b=a[y],w=a[y+1],_=0;_<x;++_){var M=b;if(b=w,w=a[y+(_+2)%x],M===e)r.findEdgeId(M,b)!==o&&(s=n.getFaceForEdgeId(o,1))}for(var S=new Uint32Array(t),T=o,E=s,P=0;P<t;++P){S[P]=T;for(var A=i[E],C=i[E+1]-A,R=a[A],I=a[A+1],O=0;O<C;++O){var L=R;if(R=I,I=a[A+(O+2)%C],L===e){var D=a[A+(O+C-1)%C];T=r.findEdgeId(D,L);var N=n.getFaceForEdgeId(T,0);E=E===N&&2===n.getNumFacesForEdgeId(T)?n.getFaceForEdgeId(T,1):N}}}return S},getAdjacentValues:function(e){for(var t=this.polyMap.edgeVertexAdjacency,r=[],n=this.getNumEdgesForVertex(e),i=0;i<n;i++){var a=this.getEdgeForVertexId(e,i),o=t.getVerticesForEdge(a),s=o.v===e?o.vNext:o.v;r.push(s)}return r},getAdjacentFaceValuesIndicesOnFace:function(e,t){var r=[],n=this.polyMap.faceRangeOffsets[t],i=this.polyMap.faceRangeOffsets[t+1];if(i-n<3)return r;var a=e===i-1?n:e+1,o=e===n?i-1:e-1;return r.push(o),r.push(a),r},getNumFacesForVertex:function(e){var t=this.valueFaceOffsets[e];return this.valueFaceOffsets[e+1]-t},getFaceForVertexId:function(e,t){var r=this.valueFaceOffsets[e];return this.valueFaceIndices[r+t]},_compute:function(){for(var e=this.polyMap,t=(e.faceRangeOffsets,e.faceValueIndices,e.edgeVertexAdjacency),r=new Uint32Array(e.values.length),n=new Uint32Array(e.values.length),i=t.getNumEdges(),a=new Uint8Array(i),o=0;o<e.faceRangeOffsets.length-1;o++)for(var s=e.faceRangeOffsets[o],l=e.faceRangeOffsets[o+1]-s,u=e.faceValueIndices[s],c=0;c<l;c++){var f=u;u=e.faceValueIndices[s+(c+1)%l];var h=t.findEdgeId(f,u);r[f]++,0===a[h]&&(a[h]=1,n[f]++,n[u]++)}for(var d=0,p=0,m=new Uint32Array(r.length+1),v=new Uint32Array(n.length+1),g=0;g<r.length;g++)m[g]=d,d+=r[g],r[g]=0,v[g]=p,p+=n[g],n[g]=0;m[r.length]=d,v[n.length]=p;for(var y=new Uint32Array(d),x=new Uint32Array(p),b=0;b<e.faceRangeOffsets.length-1;b++)for(var w=e.faceRangeOffsets[b],_=e.faceRangeOffsets[b+1]-w,M=e.faceValueIndices[w],S=0;S<_;S++){var T=M;M=e.faceValueIndices[w+(S+1)%_];var E=t.findEdgeId(T,M);y[m[T]+r[T]++]=b,1===a[E]&&(a[E]=2,x[v[T]+n[T]++]=E,x[v[M]+n[M]++]=E)}this.valueFaceOffsets=m,this.valueFaceIndices=y,this.valueEdgeOffsets=v,this.valueEdgeIndices=x}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var s=r.length,l=t.length;if(l!==s)return e;e=new a.default(e);var f=o.default.IdPositions,h=new i.default(o.default.resolveMap(e,f)),d=h.values.clone();h.values=d,o.default.assignMap(e,f,h),f=o.default.IdNormals,h=new i.default(o.default.resolveMap(e,f)),d=h.values.clone(),h.values=d,o.default.assignMap(e,f,h);var p=e.positions,m=p.values,v=e.normalMap,g=!!v,y=m.length,x=e.blendShapes;if(!x)return console.log("BLEND DEFORM IGNORED: no blend shape"),e;for(var b=0;b<l;++b){var w=x[t[b]];if(!w)return console.log("BLEND DEFORM IGNORED: missing channel",t[b]),e;if(w.positions.length!==y)return console.log("BLEND DEFORM IGNORED: cannot use channel",t[b],"because the number of vertices doesn't match with the original shape"),e;!g||w.normals&&w.normals.length===v.values.length||(g=!1)}for(var _=u(p),M=u(v),S=0;S<s;++S)c(_,x[t[S]].positions,m,r[S]),g&&c(M,x[t[S]].normals,v.values,r[S],!0);if(e.positions.values=_,g){for(var T=new n.Vector3,E=0,P=M.length;E<P;++E)M.getAt(E,T),T.normalize(),M.setAt(E,T);e.normalMap.values=M}return e};var n=r(0),i=l(r(7)),a=l(r(5)),o=l(r(44)),s=l(r(3));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){for(var t=e.values,r=new n.Vector3,i=t.length,a=new s.default(t.type,i),o=0;o<i;++o)t.getAt(o,r),a.setAt(o,r);return a}function c(e,t,r,i,a){if(i)for(var o=new n.Vector3,s=new n.Vector3,l=new n.Vector3,u=0;u<t.length;++u){e.getAt(u,o),t.getAt(u,l),r&&(r.getAt(u,s),l.sub(s));var c=o.add(l.multiplyScalar(i));a&&0===c.length()||e.setAt(u,c)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=(0,o.default)(e),r=t.positions.values,n=t.positions.faceValueIndices,a=t.getNumFaces(),s=0,l=new i.Vector3,u=new i.Vector3,c=new i.Vector3,f=new i.Vector3,h=0;h<3*a;h+=3)r.getAt(n[h],l),r.getAt(n[h+1],u),r.getAt(n[h+2],c),s+=l.dot(f.crossVectors(u,c))/6;return s};var n,i=r(0),a=r(258),o=(n=a)&&n.__esModule?n:{default:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(2));t.default=function(e,t){var r=new i.Vector3;function u(e,t,n,a,o,s,l,u,c,f,h){var d=e.getAt(t),p=e.getAt(n),m=e.getAt(a),v=o.getAt(s),g=o.getAt(l),y=o.getAt(u),x=p.x-d.x,b=m.x-d.x,w=p.y-d.y,_=m.y-d.y,T=p.z-d.z,E=m.z-d.z,P=g.x-v.x,A=y.x-v.x,C=g.y-v.y,R=y.y-v.y,I=1/(P*R-A*C),O=new i.Vector3((R*x-C*b)*I,(R*w-C*_)*I,(R*T-C*E)*I),L=new i.Vector3((P*b-A*x)*I,(P*_-A*w)*I,(P*E-A*T)*I);M.setAt(c,M.getAt(c,r).add(O)),M.setAt(f,M.getAt(f,r).add(O)),M.setAt(h,M.getAt(h,r).add(O)),S.setAt(c,S.getAt(c,r).add(L)),S.setAt(f,S.getAt(f,r).add(L)),S.setAt(h,S.getAt(h,r).add(L))}e=new o.default(e);var c=s.default.IdPositions,f=new a.default(s.default.resolveMap(e,c)),h=f.values.clone();if(f.values=h,s.default.assignMap(e,c,f),c=s.default.IdNormals,f=new a.default(s.default.resolveMap(e,c)),h=f.values.clone(),f.values=h,s.default.assignMap(e,c,f),!e.normalMap||!e.uvMaps)return;var d=e.uvMaps.byName[t];d||(d=e.uvMaps.byName[e.uvMaps.namesByIndex[0]]);if(!d)return;for(var p=e.faceRangeOffsets,m=e.positions.values,v=e.positions.faceValueIndices,g=d.faceValueIndices,y=d.values,x=e.normalMap.faceValueIndices,b=e.normalMap.values,w=b.length,_=new l.default(i.Vector4,w),M=new l.default(i.Vector3,w),S=new l.default(i.Vector3,w),T=p.length-1,E=0;E<T;++E)for(var P=v.slice(p[E],p[E+1]),A=g.slice(p[E],p[E+1]),C=x.slice(p[E],p[E+1]),R=0;R<P.length-2;++R)u(m,P[R],P[R+1],P[R+2],y,A[R],A[R+1],A[R+2],C[R],C[R+1],C[R+2]);for(var I=new i.Vector3,O=new i.Vector3,L=new i.Vector3,D=0,N=p.length;D<N-1;++D)for(var V=x.slice(p[D],p[D+1]),F=0,B=V.length;F<B;++F){var U=V[F];b.getAt(U,I),M.getAt(U,O);var k=O.clone();k.sub(I.multiplyScalar(I.dot(O))).normalize(),L.crossVectors(b.getAt(U),k);var z=L.dot(S.getAt(U)),G=z<0?-1:1,j=new i.Vector4(k.x,k.y,k.z,G);_.setAt(U,j)}var H=new a.default.fromData(p,x,_);return new o.default((0,n.default)({},e,{tangentMap:H}))};var i=r(0),a=u(r(7)),o=u(r(5)),s=u(r(44)),l=u(r(3));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return u[r](e,t)};var n=o(r(5)),i=o(r(7)),a=o(r(44));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,n){for(var i=e.length-1,a=r.length,o=new Uint32Array(a-t),s=0,l=0,u=0;u<i;++u)if(u!==n[s])for(var c=e[u],f=e[u+1],h=c;h<f;++h)o[l++]=r[h];else s++;return o}function l(e,t){var r={},o=e.faceRangeOffsets,l=function(e,t){for(var r=e.length-1,n=new Uint32Array(r-t.length+1),i=0,a=0,o=0,s=0;s<=r;++s)s!==t[i]?n[a++]=e[s]-o:(i++,o+=e[s+1]-e[s]);return{newFaceRangeOffsets:n,totalFaceValueIndicesRemoved:o}}(o,t),u=l.newFaceRangeOffsets,c=l.totalFaceValueIndicesRemoved;r.faceRangeOffsets=u;for(var f=new a.default.Iterator(e);f.next();){var h=f.getId(),d=a.default.resolveMap(e,h),p=new i.default(d,{faceRangeOffsets:u,faceValueIndices:s(o,c,d.faceValueIndices,t)});a.default.assignMap(r,h,p)}var m=e.materialIds;if(m){for(var v=e.faceRangeOffsets.length-1,g=new Uint32Array(v-t.length),y=0,x=0,b=0;b<v;++b)b!==t[y]?g[x++]=m[b]:y++;r.materialIds=g}return new n.default(r)}var u={Face:l,Edge:function(e,t){return l(e,function(e,t){for(var r=e.positions.faceEdgeAdjacency,n=e.faceRangeOffsets.length-1,i=new Uint8Array(n),a=0,o=t.length,s=0;s<o;++s)for(var l=t[s],u=r.getNumFacesForEdgeId(l),c=0;c<u;++c){var f=r.getFaceForEdgeId(s,c);0===i[f]&&(a++,i[f]=1)}for(var h=new Uint32Array(a),d=0,p=0;p<n;++p)1===i[p]&&(h[d++]=p);return h}(e,t))},Vertex:function(e,t){return l(e,function(e,t){for(var r=e.positions.valueAdjacency,n=e.faceRangeOffsets.length-1,i=new Uint8Array(n),a=0,o=t.length,s=0;s<o;++s)for(var l=t[s],u=r.getNumFacesForVertex(l),c=0;c<u;++c){var f=r.getFaceForVertexId(l,c);0===i[f]&&(a++,i[f]=1)}for(var h=new Uint32Array(a),d=0,p=0;p<n;++p)1===i[p]&&(h[d++]=p);return h}(e,t))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=t||e instanceof o.default&&e.faceValueIndices,n=e instanceof o.default?e.values:e,a=new i.Box3,s=new i.Vector3;if(r)for(var l=0;l<r.length;l++)n.getAt(r[l],s),a.expandByPoint(s);else for(var u=0;u<e.length;u++)n.getAt(u,s),a.expandByPoint(s);return a};var n,i=r(0),a=r(7),o=(n=a)&&n.__esModule?n:{default:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i){var a=e.faceRangeOffsets.length-1,o=new n.Vector3(1/0,1/0,1/0).multiplyScalar(i?1:-1),s=new n.Vector3,l=new n.Vector3(i?1:-1,0,0),u=new n.Ray(s,l),c=new n.Vector3,f=new n.Vector3,h=new n.Vector3,d=new n.Vector3(0,0,0);return r.reduce(function(r,o){e.positions.values.getAt(o,s),u.origin.copy(s);for(var l=0;l<a;l++)if(!(!i&&e.materialIds[l]!==t-1||i&&e.materialIds[l]!==t+1))for(var p=e.faceRangeOffsets[l],m=e.faceRangeOffsets[l+1],v=m-1,g=p;g<m;v=g++){c.set(0,0,0);var y=e.positions.faceValueIndices[v],x=e.positions.faceValueIndices[g];e.positions.values.getAt(y,f),e.positions.values.getAt(x,h);var b=!!u.intersectTriangle(h,f,d,!1,c),w=!1;if(!b){var _=(new n.Vector3).subVectors(h,f),M=(new n.Vector3).subVectors(s,f),S=(new n.Vector3).crossVectors(_,M).dot(u.direction);if(0===Math.abs(S)){var T=u.distanceSqToSegment(f,h,c);w=0===T}}(b||w)&&(c.sub(s),r[i?"min":"max"](c))}return r},o)};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var r=0,n=e.length,i=0;i<n;++i)e[i]>0&&(!t||1!==e[i])&&r++;for(var a=new Uint32Array(r),o=0,s=0;s<n;++s)e[s]>0&&(!t||1!==e[s])&&(a[o++]=s);return a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,s){var l=(0,n.default)(e,t),u=(0,i.default)(l,r,o);return{softSelectionIndices:(0,a.default)(u,s),softSelectionWeights:u}};var n=o(r(558)),i=o(r(289)),a=o(r(555));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,u,c,f){if(!r)return e;var h=r.indices,d=h.length,p=f?Math.ceil(f):1;if(0===d||0!==r.meaning)return e;e.faceRangeOffsets.length;var m=e.faceRangeOffsets,v=e.positions,g=v.faceValueIndices,y=g.length,x=v.values,b=x.length,w=v.edgeVertexAdjacency,_=new n.Vector3,M=new n.Vector3,S=new n.Vector3;function T(e,t){var r=e,i=m[r],a=(m[r+1],g[i]),o=g[i+1],s=g[i+2];x.getAt(a,_),x.getAt(o,M),x.getAt(s,S),M.subVectors(M,_),S.subVectors(S,_);var l=void 0===t?new n.Vector3:t;return l.crossVectors(M,S),l}for(var E={},P={},A=new n.Vector3,C=0;C<d;++C){var R=h[C],I=m[R],O=m[R+1],L=O-I,D=T(R);D.normalize(),A.add(D);for(var N=0;N<L;++N){var V=g[I+N%L],F=g[I+(N+1)%L],B=w.findEdgeId(V,F);x.getAt(F,_),x.getAt(V,M);var U=new n.Vector3;U.subVectors(M,_),U.crossVectors(U,D),U.normalize();var k=E[B];void 0===k?E[B]={edgeId:B,faceId:R,visitedEdgeCount:1,normal:U}:k.visitedEdgeCount++}}function z(e,t,r,n){var i=void 0,a=void 0;return e!==r&&e!==n||(i=e),t!==r&&t!==n||(a=t),void 0!==i&&void 0!==a?-1:void 0!==i?i:void 0!==a?a:void 0}function G(e,t,r,n){for(var i=!1,a=e.edgePairs,o=0;o<a.length;o++){var s=a[o],l=s.e1,u=s.e2,c=z(l,u,t,r);if(void 0!==c){-1===c&&a.splice(o,1);var f=c===t?r:t;c===l&&(s.e1=f),c===u&&(s.e2=f),s.faces.push(n),i=!0;break}}i||a.push({e1:t,e2:r,faces:[n]})}A.normalize();for(var j=0,H=0;H<d;++H)for(var W=h[H],X=m[W],q=m[W+1],Y=q-X,Z=0;Z<Y;++Z){var J=g[X+Z%Y],Q=g[X+(Z+1)%Y],K=0===Z?Y-1:Z-1,$=g[X+K%Y],ee=w.findEdgeId(J,Q),te=w.findEdgeId(J,$);1===E[ee].visitedEdgeCount&&j++;var re=P[J];if(void 0===re){var ne={e1:ee,e2:te,faces:[W]};P[J]={vertexId:J,edgePairs:[ne]}}else G(re,ee,te,W)}var ie=P;for(var ae in P={},ie){var oe=ie[ae];0!==oe.edgePairs.length&&(P[ae]=oe)}function se(e){for(var t=0,r=t+1;r<e.length;r++){var n=e[t],i=e[r],a=z(n.e1,n.e2,i.e1,i.e2);if(void 0!==a){if(-1===a)e.splice(t,1),e.splice(r-1,1);else{var o=a===i.e1?i.e2:i.e1;a===n.e1&&(n.e1=o),a===n.e2&&(n.e2=o),e.splice(r,1)}r=t}r===e.length-1&&(r=++t)}}for(var le in P){var ue=P[le],ce=ue.edgePairs;se(ce)}var fe=[],he=new Uint32Array(m.length+j*p),de=new Uint32Array(y+4*j*p);function pe(e,t){for(var r=[e,t],n={},i=[],a=0;a<2;++a)for(var o=r[a],s=m[o],l=m[o+1],u=l-s,c=0;c<u;++c){var f=g[s+c%u],h=n[f];void 0===h?n[f]={vertexId:f,visitedCount:1}:(h.visitedCount++,h.visitedCount>1&&i.push(h.vertexId))}if(!(i.length<2)){var d=w.findEdgeId(i[0],i[1]);return d}}for(var me=new o.default(n.Vector3),ve=0;ve<b;++ve)x.getAt(ve,_),me.push(_);for(var ge=0;ge<y;++ge)de[ge]=g[ge];for(var ye=0;ye<m.length;++ye)he[ye]=m[ye];for(var xe=b,be=c/p,we=0,_e=0,Me=function(e){return u*Math.sqrt(e)},Se=0;Se<p;++Se)for(var Te in P)for(var Ee=(Se+1)/p,Pe=Me(Ee),Ae=P[Te],Ce=Ae.edgePairs.length,Re=0;Re<Ce;Re++){we=be*(Se+1);var Ie=Ae.vertexId,Oe=Ae.edgePairs[Re].e1,Le=Ae.edgePairs[Re].e2,De=E[Oe].normal,Ne=E[Le].normal;_.addVectors(De,Ne),_.normalize();var Ve=_.dot(De);we=0!==Ve?we/Ve:we;var Fe=E[Oe].faceId,Be=E[Le].faceId;if(Fe!==Be){var Ue=pe(Fe,Be);void 0!==Ue&&(w.getVerticesForEdge(Ue,fe),x.getAt(fe[0],M),x.getAt(fe[1],S),fe[0]===Ie?_.subVectors(S,M):_.subVectors(M,S),_.normalize())}x.getAt(Ie,M);var ke=new n.Vector3;ke.copy(M),ke.addScaledVector(_,we),ke.addScaledVector(A,Pe),me.push(ke),1===Ae.edgePairs.length?Ae.edgePairs[0].vertexIndex=xe:Se===p-1&&(Ae.edgePairs[Re].vertexIndex=xe),xe++,_e++}xe=y;var ze=m.length;function Ge(e,t){if(1==e.edgePairs.length)return e.edgePairs[0].vertexIndex;for(var r=e.edgePairs,n=-1,i=0;i<r.length;i++)for(var a=r[i],o=a.faces,s=0;s<o.length;s++)if(t===o[s])return n=a.vertexIndex;return n}_e/=p;for(var je=0;je<d;++je)for(var He=h[je],We=m[He],Xe=m[He+1],qe=Xe-We,Ye=0;Ye<p;++Ye)for(var Ze=0;Ze<qe;++Ze){var Je=g[We+Ze%qe],Qe=g[We+(Ze+1)%qe],Ke=P[Je],$e=P[Qe];if(void 0!==Ke){var et=Ge(Ke,He);de[We+Ze%qe]=et;var tt=w.findEdgeId(Je,Qe),rt=E[tt];if(void 0!==rt){var nt=rt.visitedEdgeCount;if(!(nt>1)){var it=Ge($e,He);0===Ye?(de[xe++]=Je,de[xe++]=Qe,de[xe++]=it-(p-1)*_e,de[xe++]=et-(p-1)*_e):(de[xe++]=et-(p-Ye)*_e,de[xe++]=it-(p-Ye)*_e,de[xe++]=it-(p-Ye-1)*_e,de[xe++]=et-(p-Ye-1)*_e),he[ze]=he[ze-1]+4,ze++}}}else me.getAt(Je,_),_.addScaledVector(A,u/qe/p),me.setAt(Je,_)}he[ze]=he[ze-1]+4;var at=new a.default,ot=new s.default(n.Vector3,me.length);ot.fromArray(me.toArray());var st={faceRangeOffsets:he,faceValueIndices:de,values:ot};at.faceRangeOffsets=he,at.positions=new i.default(st);var lt=de.length;if(e.normalMap){for(var ut=e.normalMap,ct=ut.faceValueIndices,ft=ut.values,ht=new Uint32Array(ft.length),dt=0;dt<ct.length;++dt)ht[ct[dt]]+=1;for(var pt=new Uint32Array(lt),mt=ft.length,vt=0;vt<y;++vt)pt[vt]=ct[vt];for(var gt=y;gt<lt;++gt)pt[gt]=mt++;var yt=new s.default(n.Vector3,mt),xt={faceRangeOffsets:he,faceValueIndices:pt,values:yt};at.normalMap=new i.default(xt),at.normalMap=(0,l.recalculateNormalsFromConnectivity)(at).normalMap}e.uvMaps;return new a.default(at)};var n=r(0),i=u(r(7)),a=u(r(5)),o=u(r(76)),s=u(r(3)),l=r(40);function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var r=e.positions.values,i=r.length,a=t.length,o=new Float32Array(i),s=new n.Vector3,l=new n.Vector3,u=0;u<i;++u){var c=1/0;r.getAt(u,s);for(var f=0;f<a;++f)r.getAt(t[f],l),c=Math.min(c,s.distanceTo(l));o[u]=c}return o};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){l("positions",e.positions.values,function(e){return!a(e)}),e.normalMap&&l("normalMap",e.normalMap.values,function(e){return!a(e)&&!o(e)});if(e.uvMaps){new n.default;for(var t=0;t<e.uvMaps.length;t++){var r=e.uvMaps.namesByIndex[t];l("uvMap["+r+"]",e.uvMaps.byName[r].values,function(e){return!s(e)})}}return e};i(r(3));var n=i(r(14));i(r(7)),i(r(5));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){return isNaN(e.x)||isNaN(e.y)||isNaN(e.z)},o=function(e){return 0===e.length()},s=function(e){return isNaN(e.x)||isNaN(e.y)},l=function(e,t,r){for(var n=new t.type,i=new t.type,a=0;a<t.length;a++)t.getAt(a,n),r(n)||t.setAt(a,i)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(2)),i=u(r(13)),a=u(r(316));t.default=function(e,t){var r=t||!1,u=new Uint32Array(e.positions.faceRangeOffsets),c=new Uint32Array(e.positions.faceValueIndices),f=new Uint32Array(e.normalMap.faceValueIndices),h=[],d=[];if(e.uvMaps)for(var p=0;p<e.uvMaps.length;p++)h.push(e.uvMaps.namesByIndex[p]),d.push(new Uint32Array(e.uvMaps.byName[h[p]].faceValueIndices));for(var m=0,v=0,g=0,y=0,x=0,b=new a.default,w=1;w<u.length;w++){g=u[w],x=y=g-v,b.clear();for(var _=0;_<y;_++)b.set(c[v+_],v+_);if(1===(x=b.size))r&&y>1&&console.log("Face "+w+" has only 1 unique value. Reducing to a point..."),u[w]=u[w-1]+1,c[m++]=c[v];else{r&&2===y&&console.log("Face "+w+" has only 2 unique values. Reducing to a line..."),u[w]=u[w-1]+x;var M=b.entries(),S=void 0,T=!0,E=!1,P=void 0;try{for(var A,C=(0,i.default)(M);!(T=(A=C.next()).done);T=!0){S=A.value,f[m]=f[S[1]];for(var R=0;R<d.length;R++)d[R][m]=d[R][S[1]];c[m++]=S[0]}}catch(e){E=!0,P=e}finally{try{!T&&C.return&&C.return()}finally{if(E)throw P}}}v=g}r&&console.log(c.length+" index values reduced to "+m+", duplicates removed: "+(c.length-m));var I=new Uint32Array(c.subarray(0,m)),O=new Uint32Array(f.subarray(0,m)),L=new l.default({faceRangeOffsets:u,faceValueIndices:I,values:e.positions.values}),D={};D.positions=L,D.faceRangeOffsets=D.positions.faceRangeOffsets;var N=new l.default({faceRangeOffsets:D.faceRangeOffsets,faceValueIndices:O,values:e.normalMap.values});if(D.normalMap=N,e.uvMaps){for(var V=new o.default,F=0;F<e.uvMaps.length;F++){var B=e.uvMaps.namesByIndex[F],U=new l.default({faceRangeOffsets:D.faceRangeOffsets,faceValueIndices:d[F],values:e.uvMaps.byName[B].values});V.set(B,U)}D.uvMaps=V}return D.colorMaps=e.colorMaps,new s.default((0,n.default)({},e,D))};u(r(3));var o=u(r(14)),s=(u(r(76)),u(r(5))),l=u(r(7));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r={withLogging:t},o=(0,a.default)(e,function(e,t,r){for(var i=r.withLogging||!1,a=new Uint32Array(e.faceRangeOffsets),o=new Uint32Array(e.faceValueIndices),s=e.values,l=0,u=0,c=0,f=1,h=0,d=1;d<a.length;d++){if(l=a[d],(c=l-u)>2){a[f]=a[f-1]+c,f++;for(var p=0;p<c;p++)o[h++]=o[u+p]}else i&&console.log("Removed face "+d+" of size "+c);u=l}var m=new Uint32Array(a.subarray(0,f)),v=new Uint32Array(o.subarray(0,h));return new n.default({faceRangeOffsets:m,faceValueIndices:v,values:s})},r);t&&console.log(e.faceRangeOffsets.length-1+" faces reduced to "+(o.faceRangeOffsets.length-1)+", faces removed: "+(e.faceRangeOffsets.length-o.faceRangeOffsets.length));return(0,i.default)(o).topologyChanged(!0)};o(r(14)),o(r(5));var n=o(r(7)),i=o(r(292)),a=o(r(192));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(2));t.default=function(e,t,r,c,f,h){var d=e.positions.values,p=d.clone(),m=r.clone().multiplyScalar(Math.PI/180),v=(new i.Euler).setFromVector3(m,"ZYX"),g=(new i.Matrix4).makeRotationFromEuler(v),y=new i.Vector3(0,0,1);y.applyMatrix4(g);var x=t.dot(y),b=new i.Vector3(1,0,0);b.applyMatrix4(g);var w=(0,a.default)(f),_=void 0;_=w.length?w.length:d.length;for(var M=new i.Vector3,S=new i.Vector3,T=void 0,E=void 0,P=0;P<_;++P)(E=w.length?w[P]:P)>=d.length||(d.getAt(E,M),T=(M.dot(y)-x)/y.length(),S.copy(b),M.add(S.multiplyScalar(T*c)),p.setAt(E,M));var A=new s.default(l.default.resolveMap(e,"positions"));A.values=p;var C=(0,n.default)({},e,{positions:A});return e=(0,o.recalculateNormalsFromConnectivity)(new u.default(C))};var i=r(0),a=c(r(55)),o=r(40),s=(c(r(3)),c(r(7))),l=c(r(44)),u=c(r(5));function c(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var o=r||!1;if(!t||!e)return e;if(0===t.x&&0===t.y&&0===t.z)return e;for(var s=e.faceRangeOffsets,l=new Uint32Array(e.faceRangeOffsets.length),u=new Uint32Array(e.positions.faceValueIndices),c=e.positions.values,f=[],h=[],d=new n.Vector3,p=new n.Vector3,m=0;m<s.length-1;m++){f[m]=m;var v=s[m],g=s[m+1];d.set(0,0,0);for(var y=v;y<g;y++)c.getAt(u[y],p),d.add(p);d.multiplyScalar(1/(g-v)),h[m]=d.dot(t)}f.sort(function(e,t){return h[t]-h[e]});for(var x=0;x<f.length;x++)l[x+1]=l[x]+(s[f[x]+1]-s[f[x]]);if(o){console.log("Face List [old][new]:");for(var b=0;b<f.length;b++){for(var w=[],_=[],M=s[b];M<s[b+1];M++)w.push(u[M]);for(var S=s[f[b]];S<s[f[b]+1];S++)_.push(u[S]);console.log(w,_)}}var T={newFaceRangeOffsets:l,reMapping:f};return(0,a.default)(e,function(e,t,r){for(var n=r.newFaceRangeOffsets,a=r.reMapping,o=e.faceRangeOffsets,s=e.faceValueIndices,l=new Uint32Array(s.length),u=0,c=0;c<a.length;c++)for(var f=o[a[c]];f<o[a[c]+1];f++)l[u++]=s[f];return new i.default({faceRangeOffsets:n,faceValueIndices:l,values:e.values})},T).topologyChanged()};var n=r(0),i=o(r(7)),a=o(r(192));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e,t,r,n){var i=e.boundingBox,l=i.min[t],u=i.max[t],c=u-l,f=r>c/2?c/2:r,h=c-2*f,d=(h+2*n)/h,p=new o.Vector3(1,1,1);p[t]=d;for(var m=(new o.Matrix4).makeScale(p.x,p.y,p.z),v=s.PolyMaps.resolveMap(e,"positions"),g=v.values.clone(),y=new o.Vector3,x=0;x<g.length;x+=1)v.values.getAt(x,y),y[t]<l+f?y[t]-=n:y[t]>=u-f?y[t]+=n:y.applyMatrix4(m),g.setAt(x,y);var b=new s.PolyMap((0,a.default)({},v,{values:g})),w=(0,a.default)({},e,{positions:b});return new s.PolyMesh(w)};var o=r(0),s=r(145)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,s.default)(e),n=new Uint8Array(r.positions.faceValueIndices.length);r.normalMap&&f(r.normalMap,n);if(r.edgeCreaseWeights)for(var a=r.positions.faceEdgeAdjacency,u=0;u<a.faceEdgeIndices.length;++u){var p=a.faceEdgeIndices[u];n[u]=n[u]||(r.edgeCreaseWeights[p]>0?1:0)}if(t&&r.materialIds)for(var m=r.positions.faceEdgeAdjacency,v=0;v<m.faceEdgeIndices.length;++v){var g=m.faceEdgeIndices[v];2===m.getNumFacesForEdgeId(g)&&r.materialIds[m.getFaceForEdgeId(g,0)]!==r.materialIds[m.getFaceForEdgeId(g,1)]&&(n[v]+=1)}var y=h(r.positions,n),x=d(r.positions),b=new o.default;b.positions=c(r.positions,null,n,y,x),b.faceRangeOffsets=b.positions.faceRangeOffsets,r.normalMap&&(b.normalMap=c(r.normalMap,b.faceRangeOffsets,n,y,x));if(r.tangentMap){var w=new l.Vector4,_=new l.Vector3,M=new Uint8Array(r.tangentMap.faceValueIndices.length);f(r.tangentMap,M);for(var S=0;S<n.length;++S)M[S]=M[S]||n[S];for(var T=h(r.tangentMap,M),E=0;E<T.length;++E)T[E]=T[E]||y[E];for(var P=c(r.tangentMap,b.faceRangeOffsets,M,T,x),A=P.values,C=0;C<A.length;++C)A.getAt(C,w),_.copy(w),_.normalize(),w.x=_.x,w.y=_.y,w.z=_.z,w.w>=0?w.w=1:w.w=-1,A.setAt(C,w);b.tangentMap=P}if(r.uvMaps){for(var R=new i.default,I=0;I<r.uvMaps.length;++I){var O=r.uvMaps.namesByIndex[I],L=new Uint8Array(r.uvMaps.byName[O].faceValueIndices.length);f(r.uvMaps.byName[O],L);for(var D=0;D<n.length;++D)L[D]=L[D]||n[D];for(var N=h(r.uvMaps.byName[O],L),V=0;V<N.length;++V)N[V]=N[V]||y[V];R.set(O,c(r.uvMaps.byName[O],b.faceRangeOffsets,L,N,x))}b.uvMaps=R}if(r.materialIds){b.materialIds=new Uint32Array(b.faceRangeOffsets.length-1);for(var F=r.faceRangeOffsets,B=F.length-1,U=0,k=F[0],z=0;z<B;++z){for(var G=F[z+1],j=G-k,H=0;H<j;++H,++U)b.materialIds[U]=r.materialIds[z];k=G}}return b.topologyChanged(!0),b};var n=u(r(3)),i=u(r(14)),a=u(r(7)),o=u(r(5)),s=u(r(559)),l=(u(r(193)),r(0));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t,r,i,o){for(var s=e.edgeVertexAdjacency,l=e.valueAdjacency,u=e.faceEdgeAdjacency,c=e.values,f=c.type,h=c.length,d=e.faceRangeOffsets,p=d.length-1,m=e.faceValueIndices,v=s.getNumEdges(),g=m.length,y=new Uint8Array(e.values.length),x=0;x<i.length;x++)y[m[x]]=i[x];if(!t){t=new Uint32Array(g+1);for(var b=0;b<t.length;b++)t[b]=4*b}for(var w=new Uint32Array(4*g),_=h,M=_+v,S=h+v+p,T=new n.default(f,S),E=new Uint8Array(h),P=new Uint8Array(h),A=new Uint8Array(h),C=new Uint8Array(v),R=new Uint8Array(v),I=new f,O=new f,L=new f,D=new f,N=new f,V=new f,F=0,B=new Uint8Array(v),U=new Uint8Array(h),k=d[0],z=0;z<p;++z){var G=d[z+1],j=G-k,H=m[k],W=m[k+1%j],X=s.findEdgeId(H,W);I.multiplyScalar(0);for(var q=0;q<j;++q){var Y=H;H=W,W=m[k+(q+2)%j];var Z=X;X=s.findEdgeId(H,W),++C[Z],++A[Y],0===R[Z]&&(R[Z]=1,P[Y]++,P[H]++,r[k+q]&&(B[Z]=1,U[Y]++,U[H]++)),c.getAt(Y,O),I.add(O),w[F++]=_+Z,w[F++]=H,w[F++]=_+X,w[F++]=M+z}I.multiplyScalar(1/j),T.setAt(M+z,I),k=G}for(var J=0;J<v;++J){var Q=s.edgeVertices[2*J],K=s.edgeVertices[2*J+1];c.getAt(Q,D),c.getAt(K,O),D.add(O);var $=2,ee=u.edgeFaceCounts[J];if(!B[J]&&2===ee)for(var te=0;te<ee;++te){var re=u.edgeFaceIndices[2*J+te];T.getAt(M+re,O),D.add(O),$++}D.multiplyScalar(1/$),T.setAt(_+J,D)}for(var ne=0;ne<m.length;++ne)E[m[ne]]=o[ne];for(var ie=0;ie<h;++ie){c.getAt(ie,L);var ae=P[ie]!==A[ie],oe=P[ie]===E[ie]+1;if(0!==P[ie]&&y[ie]<1){var se=l.valueEdgeOffsets[ie],le=l.valueEdgeOffsets[ie+1]-se;N.multiplyScalar(0);var ue=0;if(ae||U[ie]){for(var ce=0;ce<le;++ce){var fe=l.valueEdgeIndices[se+ce];if(B[fe]||oe){var he=s.edgeVertices[2*fe];he===ie&&(he=s.edgeVertices[2*fe+1]),c.getAt(he,O),N.add(O),ue++}}L.multiplyScalar(.75).add(N.multiplyScalar(.25/ue))}else{for(var de=0;de<le;++de){var pe=l.valueEdgeIndices[se+de],me=s.edgeVertices[2*pe];me===ie&&(me=s.edgeVertices[2*pe+1]),c.getAt(me,O),N.add(O),ue++}N.multiplyScalar(1/(ue*ue));var ve=l.valueFaceOffsets[ie],ge=l.valueFaceOffsets[ie+1]-ve;V.multiplyScalar(0);for(var ye=0,xe=0;xe<ge;++xe){var be=l.valueFaceIndices[ve+xe];T.getAt(M+be,O),V.add(O),ye++}V.multiplyScalar(1/(ye*ye)),L.multiplyScalar((ye-2)/ye),L.add(N),L.add(V)}}T.setAt(ie,L)}var we={faceRangeOffsets:t,faceValueIndices:w,values:T};return new a.default(we)},f=function(e,t){for(var r=e.faceEdgeAdjacency,n=0;n<r.faceEdgeIndices.length;++n){var i=r.faceEdgeIndices[n];t[n]=2!==r.edgeFaceCounts[i]?1:0}},h=function(e,t){for(var r=e.edgeVertexAdjacency,n=new Uint8Array(e.faceValueIndices.length),i=new Uint8Array(e.values.length),a=new Uint8Array(e.values.length),o=new Uint8Array(r.getNumEdges()),s=0;s<e.faceRangeOffsets.length-1;++s)for(var l=e.faceRangeOffsets[s],u=e.faceRangeOffsets[s+1]-l,c=e.faceValueIndices[l],f=0;f<u;++f){var h=c;c=e.faceValueIndices[l+(f+1)%u];var d=r.findEdgeId(h,c);0===o[d]&&(o[d]=1,t[l+f]&&(i[h]++,i[c]++),a[h]++,a[c]++)}for(var p=0;p<n.length;++p){var m=e.faceValueIndices[p];(i[m]>2||i[m]-a[m]==0)&&(n[p]=1)}return n},d=function(e){for(var t=e.faceValueIndices,r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=e.valueAdjacency.getNumEdgesForVertex(t[n]);return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){var a=n?new o.default((0,l.default)(e,t,!1,!0)):e,u=new o.default,h=a.positions;if(u.positions=c(h),u.faceRangeOffsets=h.faceRangeOffsets,a.normalMap){var d=a.normalMap;u.normalMap=c(d)}if(a.uvMaps){for(var p=new i.default,m=0;m<a.uvMaps.length;m++){var v=a.uvMaps.namesByIndex[m];p.set(v,c(a.uvMaps.byName[v]))}u.uvMaps=p}a.materialIds&&(u.materialIds=a.materialIds);var g=u.positions;if(u.positions=f(g,t,!1),u.normalMap){var y=u.normalMap;u.normalMap=f(y,t,!0)}if(r||n){var x=[u,a],b=(0,s.default)(x,null,null);return b}return new o.default(u)};var n=u(r(3)),i=u(r(14)),a=u(r(7)),o=u(r(5)),s=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(r(9)),u(r(113))),l=u(r(294));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){for(var t=e.faceRangeOffsets,r=t.length-1,n=e.faceValueIndices,i=n.length,o=new Uint32Array(i),s=0;s<r;++s)for(var l=t[s],u=t[s+1],c=u-l,f=0;f<c;++f)o[l+f]=n[u-f-1];var h={faceRangeOffsets:t,faceValueIndices:o,values:e.values};return new a.default(h)},f=function(e,t,r){for(var i=e.values,o=i.type,s=i.length,l=new n.default(o,s),u=new o,c=new o,f=0;f<s;++f){i.getAt(f,u);var h=t.distanceToPoint(u);c.copy(t.normal),r?(u.reflect(c),l.setAt(f,u)):(c.multiplyScalar(-2*h),u.add(c),l.setAt(f,u))}var d={faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:e.faceValueIndices,values:l};return new a.default(d)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){for(var i={polyMesh:e,selection:t},a=0;a<n;++a){var o=h(i,r);i.polyMesh=o.polyMesh,i.selection=o.selection}return new l.default(i.polyMesh)};var n=r(0),i=c(r(3)),a=c(r(76)),o=c(r(14)),s=c(r(7)),l=c(r(5)),u=r(280);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r,o,l,c,f){var h=c.faceValueIndices,d=e.edgeVertexAdjacency,p=e.faceRangeOffsets,m=p.length-1,v=e.faceValueIndices,g=e.values,y=g.type,x=new Uint32Array(d.getNumEdges()),b=new Uint32Array(4*p.length),w=new Uint8Array(4*p.length),_=new Uint32Array(4*v.length),M=new a.default(y),S=new y,T=new y,E=new y,P=new y,A=new y,C=0,R=0,I=0,O=0,L=0;b[C++]=0;for(var D=0;D<g.length;++D)g.getAt(D,E),M.push(E),++L;if(o===u.TessellationTypes.vertex)for(var N=0;N<m;++N){var V=p[N],F=p[N+1]-V,B=v[V],U=v[V+1];t[N]===u.TessellateConstants.SELECTED&&(S.set(0,0,0),O=M.push(S)-1,++L);for(var k=0;k<F;++k){var z=B;B=U,U=v[V+(k+2)%F],_[R++]=z,t[N]===u.TessellateConstants.SELECTED&&(g.getAt(z,A),S.add(A),_[R++]=B,_[R++]=O,w[C-1]=u.TessellateConstants.SELECTED,b[C++]=R)}t[N]===u.TessellateConstants.SELECTED&&(S.multiplyScalar(1/F),M.setAt(O,S)),t[N]!==u.TessellateConstants.SELECTED&&(b[C++]=R)}else for(var G=0;G<m;++G){var j=p[G],H=p[G+1]-j;t[G]===u.TessellateConstants.SELECTED&&(S.set(0,0,0),O=M.push(S)-1,++L);for(var W=j,X=j+1,q=0;q<H;++q){var Y=W;W=X,X=j+(q+2)%H;var Z=v[Y],J=v[W],Q=h[Y],K=h[W],$=d.findEdgeId(Z,J),ee=l.findEdgeId(Q,K);if(_[R++]=Z,t[G]===u.TessellateConstants.SELECTED){g.getAt(Z,A),S.add(A);var te=v[j+(q+H-1)%H],re=d.findEdgeId(te,Z);x[$]===u.TessellateConstants.UNPROCESSED?(g.getAt(Z,E),g.getAt(J,P),T.addVectors(E,P),T.multiplyScalar(.5),I=M.push(T)-1,x[$]=I+1,_[R++]=I,++L):(I=x[$]-1,_[R++]=I),_[R++]=O,x[re]===u.TessellateConstants.UNPROCESSED?(g.getAt(te,E),g.getAt(Z,P),T.addVectors(E,P),T.multiplyScalar(.5),I=M.push(T)-1,x[re]=I+1,_[R++]=I,++L):(I=x[re]-1,_[R++]=I),w[C-1]=u.TessellateConstants.SELECTED,b[C++]=R}t[G]!==u.TessellateConstants.SELECTED&&r[ee]===u.TessellateConstants.SELECTED&&(x[$]===u.TessellateConstants.UNPROCESSED?(g.getAt(Z,E),g.getAt(J,P),T.addVectors(E,P),T.multiplyScalar(.5),I=M.push(T)-1,x[$]=I+1,_[R++]=I,++L):(I=x[$]-1,_[R++]=I))}t[G]===u.TessellateConstants.SELECTED&&(S.multiplyScalar(1/H),M.setAt(O,S)),t[G]!==u.TessellateConstants.SELECTED&&(b[C++]=R)}for(var ne=f||new Uint32Array(C),ie=new Uint8Array(C),ae=new Uint32Array(R),oe=new i.default(y,L+1),se=0;se<C;++se)ie[se]=w[se],f||(ne[se]=b[se]);for(var le=0;le<R;++le)ae[le]=_[le];for(var ue=0;ue<L+1;++ue)M.getAt(ue,A),y===n.Vector3&&f&&A.normalize(),oe.setAt(ue,A);var ce={faceRangeOffsets:ne,faceValueIndices:ae,values:oe};return f?new s.default(ce):{polyMap:new s.default(ce),selection:ie}}function h(e,t){for(var r=e.polyMesh,n=e.selection,i=new l.default,a=r.faceRangeOffsets,s=r.positions,c=s.faceValueIndices,h=s.edgeVertexAdjacency,d=new Uint8Array(h.getNumEdges()),p=0;p<n.length;++p)if(n[p]===u.TessellateConstants.SELECTED)for(var m=a[p],v=a[p+1]-m,g=c[m],y=c[m+1],x=0;x<v;++x){var b=g;g=y,y=c[m+(x+2)%v],d[h.findEdgeId(b,g)]=u.TessellateConstants.SELECTED}var w=f(s,n,d,t,h,s);if(i.positions=w.polyMap,i.faceRangeOffsets=i.positions.faceRangeOffsets,r.normalMap&&(i.normalMap=f(r.normalMap,n,d,t,h,s,i.faceRangeOffsets)),r.uvMaps){for(var _=new o.default,M=0;M<r.uvMaps.length;++M){var S=r.uvMaps.namesByIndex[M];_.set(S,f(r.uvMaps.byName[S],n,d,t,h,s,i.faceRangeOffsets))}i.uvMaps=_}return{polyMesh:new l.default(i),selection:w.selection}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(r(13)),i=m(r(47)),a=m(r(58));t.default=function(e,t,r,i,a,m,b,w,_,M,S){var T=a.overrideBoundingBox,E=a.boundingBoxMode,P=a.boundingBox,A=a.boundingBoxJustification;_=_||0;var C=new p.Vector3,R=new p.Vector3,I=(new p.Vector3,new p.Vector3,new p.Quaternion),O=(new p.Triangle,void 0),L=void 0,D=void 0;if(S&&S.cache&&S.id&&S.cache[S.id]){var N=S.cache[S.id];L=N.triangulatedMesh,D=N.uvMesh,O=N.kdTree}else{var V=Math.max(0,t.uvMaps.namesByIndex.indexOf(b||"")),F=function(e,t){for(var r=new p.Vector2,n=new p.Vector3,i=(0,d.default)(e),a=i.uvMaps.byName[t],c=a.values.length,f=new l.default(p.Vector3,c),h=0;h<c;++h)a.values.getAt(h,r),n.setX(r.x),n.setY(r.y),f.setAt(h,n);var m={faceRangeOffsets:a.faceRangeOffsets,positions:o.default.fromData(a.faceRangeOffsets,a.faceValueIndices,f),normalMap:new u.default,uvMaps:new u.default,colorMaps:new u.default};return{triangulatedMesh:i,uvMesh:new s.default(m)}}(t,t.uvMaps.namesByIndex[V]);L=F.triangulatedMesh,D=F.uvMesh,O=new c.default(D),S&&S.cache&&S.id&&(S.cache[S.id]={kdTree:O,triangulatedMesh:L,uvMesh:D})}var B=(new p.Box3).copy(e.boundingBox);B.expandByScalar(1e-4),B.getSize(C),R.copy(B.min);var U=null;1===_&&(U=(new p.Matrix4).compose(R,I,C)).getInverse(U);if(T){var k=null;switch(E){case 0:default:k=g;break;case 1:k=y;break;case 2:k=x}k(P,C,R,A)}var z=(new p.Matrix4).compose(R,I,C);z.getInverse(z);var G=w?new v(w):new f.default(L.positions),j=new s.default(e);0===_?function(e,t,r,n,i,a,o,s,l){for(var u=new p.Vector3,c=new p.Vector3,f=new p.Vector3,h=new p.Vector3,d=new p.Triangle,m=e.positions.values,v=m.length,g=0;g<v;++g){m.getAt(g,u),u.applyMatrix4(i);var y=(u.x+s.x)%1,x=(u.y+s.y)%1;y<0&&(y+=1),x<0&&(x+=1),c.set(y,x,0);var b=t.findNearestNeighbour(c),w=r.faceRangeOffsets[b.faceIndex];r.positions.values.getAt(r.positions.faceValueIndices[w],d.a),r.positions.values.getAt(r.positions.faceValueIndices[w+1],d.b),r.positions.values.getAt(r.positions.faceValueIndices[w+2],d.c),d.barycoordFromPoint(c,f),n.positions.values.getAt(n.positions.faceValueIndices[w],d.a),n.positions.values.getAt(n.positions.faceValueIndices[w+1],d.b),n.positions.values.getAt(n.positions.faceValueIndices[w+2],d.c),d.a.multiplyScalar(f.x),d.b.multiplyScalar(f.y),d.c.multiplyScalar(f.z),a.getNormalForFaceId(b.faceIndex,h),h.multiplyScalar(o*u.z).add(d.a).add(d.b).add(d.c),l&&h.applyMatrix4(l),m.setAt(g,h)}}(j,O,D,L,z,G,i,r,m):function(e,t,r,i,a,o,s,l,u,c){for(var f=new h.default(e),d=new p.Vector3,m=new p.Vector3,v=new p.Vector3,g=new p.Vector3,y=new p.Vector3,x=new Array(8),b=0;b<8;++b)x[b]=new p.Vector3;var w=m,_=d,M=v,S=[w,_],T=new p.Triangle,E=e.positions.values,P=new p.Box3,A=[P.min,P.max],C=!0,R=!1,I=void 0;try{for(var O,L=(0,n.default)(f.getComponents());!(C=(O=L.next()).done);C=!0){var D=O.value;E.getAt(D[0],d),P.set(d,d);var N=!0,V=!1,F=void 0;try{for(var B,U=(0,n.default)(D);!(N=(B=U.next()).done);N=!0){var k=B.value;E.getAt(k,d),P.expandByPoint(d)}}catch(e){V=!0,F=e}finally{try{!N&&U.return&&U.return()}finally{if(V)throw F}}for(var z=0;z<8;++z){d.set(A[1&z].x,A[(2&z)>>1].y,A[(4&z)>>2].z),d.applyMatrix4(a);var G=(d.x+l.x)%1,j=(d.y+l.y)%1;G<0&&(G+=1),j<0&&(j+=1),m.set(G,j,0);var H=t.findNearestNeighbour(m),W=r.faceRangeOffsets[H.faceIndex];r.positions.values.getAt(r.positions.faceValueIndices[W],T.a),r.positions.values.getAt(r.positions.faceValueIndices[W+1],T.b),r.positions.values.getAt(r.positions.faceValueIndices[W+2],T.c),T.barycoordFromPoint(m,v),i.positions.values.getAt(i.positions.faceValueIndices[W],T.a),i.positions.values.getAt(i.positions.faceValueIndices[W+1],T.b),i.positions.values.getAt(i.positions.faceValueIndices[W+2],T.c),T.a.multiplyScalar(v.x),T.b.multiplyScalar(v.y),T.c.multiplyScalar(v.z),o.getNormalForFaceId(H.faceIndex,g),g.multiplyScalar(s*d.z).add(T.a).add(T.b).add(T.c),c&&g.applyMatrix4(c),x[z].copy(g)}P.getSize(y),y.x=1/y.x,y.y=1/y.y,y.z=1/y.z;var X=!0,q=!1,Y=void 0;try{for(var Z,J=(0,n.default)(D);!(X=(Z=J.next()).done);X=!0){var Q=Z.value;E.getAt(Q,_),_.sub(P.min).multiply(y),w.copy(_).negate().addScalar(1),g.set(0,0,0);for(var K=0;K<8;++K){var $=S[1&K].x*S[(2&K)>>1].y*S[(4&K)>>2].z;M.copy(x[K]).multiplyScalar($),g.add(M)}E.setAt(Q,g)}}catch(e){q=!0,Y=e}finally{try{!X&&J.return&&J.return()}finally{if(q)throw Y}}}}catch(e){R=!0,I=e}finally{try{!C&&L.return&&L.return()}finally{if(R)throw I}}}(j,O,D,L,z,G,i,r,0,m);if(M){var H=new p.Vector3;H.set(B.min.x+1e-4,B.min.y+1e-4,0),H.applyMatrix4(z);var W=(H.x+r.x)%1,X=(H.y+r.y)%1;W<0&&(W+=1),X<0&&(X+=1),H.set(W,X,0),M.min=H.clone(),H.set(B.max.x-1e-4,B.max.y-1e-4,0),H.applyMatrix4(z),W=(H.x+r.x)%1,X=(H.y+r.y)%1,W<0&&(W+=1),X<0&&(X+=1),H.set(W,X,0),M.max=H.clone()}return j};var o=m(r(7)),s=m(r(5)),l=m(r(3)),u=m(r(14)),c=m(r(537)),f=m(r(142)),h=m(r(547)),d=m(r(258)),p=r(0);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(){function e(t){(0,i.default)(this,e),this.normal=t.clone().normalize()}return(0,a.default)(e,[{key:"getNormalForFaceId",value:function(e,t){t.copy(this.normal)}}]),e}();function g(e,t,r,n){function i(i){e[i]>t[i]&&(r[i]-=(e[i]-t[i])*n[i],t[i]=e[i])}i("x"),i("y"),i("z")}function y(e,t,r,n){function i(i){if(e[i]){var a=e[i]*t[i];r[i]-=a*n[i],t[i]+=a}}i("x"),i("y"),i("z")}function x(e,t,r,n){function i(i){if(e[i]){var a=e[i];r[i]-=a*n[i],t[i]+=a}}i("x"),i("y"),i("z")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,u,c,f){u=Math.floor(u)||1,c=Math.floor(c)||1,f=Math.floor(f)||1;var h=new Uint32Array(u*c*2+u*f*2+c*f*2+1),d=new Uint32Array(4*(u*c*2+u*f*2+c*f*2)),p=new i.default(n.Vector3,(u+1)*(c+1)*2+(u+1)*(f+1)*2+(c+1)*(f+1)*2),m=new i.default(n.Vector3,(u+1)*(c+1)*2+(u+1)*(f+1)*2+(c+1)*(f+1)*2),v=new i.default(n.Vector2,(u+1)*(c+1)*2+(u+1)*(f+1)*2+(c+1)*(f+1)*2),g=e/u,y=t/c,x=r/f,b=e/2,w=t/2,_=r/2,M=void 0,S=void 0,T=void 0,E=0,P=new n.Vector3,A=new n.Vector3,C=new n.Vector2,R=0;function I(e){d[R]=e,R++}for(T=0,M=0;T<h.length;T++,M+=4)h[T]=M;for(T=0;T<2;T++){for(S=0;S<c;S++)for(M=0;M<u;M++)I(E+S*(u+1)+M),I(E+S*(u+1)+M+1),I(E+(S+1)*(u+1)+M+1),I(E+(S+1)*(u+1)+M);E+=(u+1)*(c+1)}for(S=0;S<2;S++){for(M=0;M<u;M++)for(T=0;T<f;T++)I(E+M*(f+1)+T),I(E+M*(f+1)+T+1),I(E+(M+1)*(f+1)+T+1),I(E+(M+1)*(f+1)+T);E+=(u+1)*(f+1)}for(M=0;M<2;M++){for(T=0;T<f;T++)for(S=0;S<c;S++)I(E+T*(c+1)+S),I(E+T*(c+1)+S+1),I(E+(T+1)*(c+1)+S+1),I(E+(T+1)*(c+1)+S);E+=(f+1)*(c+1)}var O=0;function L(e){p.setAt(O,e),O++}var D=0;function N(e,t){v.setAt(D,e),m.setAt(D,t),D++}for(T=-1;T<2;T+=2)for(S=0;S<c+1;S++){var V=S*y-w;for(M=0;M<u+1;M++){var F=-T*M*g+T*b;P.set(F,V,-1*T*_),L(P),A.set(0,0,-1*T),C.set(M/u,S/c),N(C,A)}}for(S=-1;S<2;S+=2)for(M=0;M<u+1;M++){var B=M*g-b;for(T=0;T<f+1;T++){var U=-S*T*x+S*_;P.set(B,-1*S*w,U),L(P),A.set(0,-1*S,0),C.set(M/u,(f-T)/f),N(C,A)}}for(M=-1;M<2;M+=2)for(T=0;T<f+1;T++){var k=-1*M*T*x+M*_;for(S=0;S<c+1;S++){var z=S*y-w;P.set(-1*M*b,z,k),L(P),A.set(-1*M,0,0),C.set((f-T)/f,S/c),N(C,A)}}var G=new s.default({faceRangeOffsets:h,faceValueIndices:d,values:p}),j=new s.default({faceRangeOffsets:h,faceValueIndices:d,values:m}),H=new s.default({faceRangeOffsets:h,faceValueIndices:d,values:v}),W=new a.default;W.set("default",H);var X={faceRangeOffsets:h,positions:G,normalMap:j,uvMaps:W,colorMaps:new a.default},q=new o.default(X);return(0,l.default)(q)};var n=r(0),i=u(r(3)),a=u(r(14)),o=u(r(5)),s=u(r(7)),l=u(r(194));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,s,l){e=void 0!==e?e:20,t=void 0!==t?t:100,r=Math.max(1,Math.floor(r||8)),o=Math.max(1,Math.floor(o||8)),s=n.Math.clamp(s||0,0,2*Math.PI),l=n.Math.clamp(l||2*Math.PI,0,2*Math.PI-s);for(var u=t/o,c=t/2,f=new n.Vector3,h=new n.Vector3,d=o<3?2:o,p=1/d,m=new i.default(n.Vector3,o+1+2*(d+1)),v=new i.default(n.Vector3,o+1+2*(d+1)),g=0,y=d;g<=y;g++){var x=Math.PI-g*(Math.PI/2)*p;f.set(0,-e*Math.cos(x)+c,e*Math.sin(x)),h.set(0,-Math.cos(x),Math.sin(x)),m.setAt(g,f),v.setAt(g,h.normalize())}h.set(0,0,1);for(var b=0,w=o;b<=w;b++)f.set(0,c-b*u,e),m.setAt(b+d+1,f),v.setAt(b+d+1,h);for(var _=0,M=d;_<=M;_++){var S=Math.PI/2-_*(Math.PI/2)*p;f.set(0,-e*Math.cos(S)-c,e*Math.sin(S)),h.set(0,-Math.cos(S),Math.sin(S)),m.setAt(_+d+o+2,f),v.setAt(_+d+o+2,h.normalize())}var T=r<3?3:r;return(0,a.default)(m,v,d,T,s,l)};var n=r(0),i=o(r(3)),a=o(r(571));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,u,c,f){u=u||12,c=c||0,f=f||2*Math.PI;var h=new i.default(n.Vector3,(u+1)*e.length),d=new i.default(n.Vector3,(u+1)*t.length),p=0,m=new Uint32Array(u*(e.length-1)+1),v=new Uint32Array(u*(e.length-1)*4),g=new i.default(n.Vector2,(u+1)*e.length),y=0,x=e.length-2*(r+1)-1,b=1/x,w=1/u;m[0]=0;for(var _=1,M=new n.Vector2,S=new n.Vector3,T=new n.Vector3,E=new n.Matrix4,P=new n.Matrix3,A=0,C=u;A<=C;A++){var R=c+A*w*f;E.makeRotationY(R),P.getNormalMatrix(E);for(var I=0,O=e.length;I<O;I++)e.getAt(I,S),t.getAt(I,T),S.applyMatrix4(E),T.applyMatrix3(P),h.setAt(p,S),d.setAt(p++,T)}for(var L=0,D=u;L<=D;L++){for(var N=L*w,V=0,F=r+1;V<F;V++){var B=1-V/r;M.set(N,B),g.setAt(y++,M)}for(var U=0,k=x+1;U<k;U++){var z=1-U*b;M.set(N,z),g.setAt(y++,M)}for(var G=0,j=r+1;G<j;G++){var H=1-G/r;M.set(N,H),g.setAt(y++,M)}}for(var W=e.length,X=0,q=0,Y=u;q<Y;q++)for(var Z=0,J=e.length-1;Z<J;Z++){var Q=Z+W*q,K=Q,$=Q+W,ee=Q+1+W,te=Q+1;v[X++]=te,v[X++]=ee,v[X++]=$,v[X++]=K,m[_++]=X}var re=new s.default({faceRangeOffsets:m,faceValueIndices:v,values:h}),ne=new s.default({faceRangeOffsets:m,faceValueIndices:v,values:d}),ie=new s.default({faceRangeOffsets:m,faceValueIndices:v,values:g}),ae=new a.default;ae.set("default",ie);var oe=new o.default;return oe.faceRangeOffsets=re.faceRangeOffsets,oe.positions=re,oe.normalMap=ne,oe.uvMaps=ae,(0,l.default)(new o.default(oe))};var n=r(0),i=u(r(3)),a=u(r(14)),o=u(r(5)),s=u(r(7)),l=u(r(112));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,c,d,p){r=r||12,c=c||0,d=d||2*Math.PI;for(var m=e[0].mesh.faceRangeOffsets[1],v=new i.default(n.Vector3,(r+1)*m),g=new Uint32Array(r*m+1),y=new Uint32Array(r*m*4),x=new i.default(n.Vector3,y.length),b=new i.default(n.Vector2,y.length),w=new Uint32Array(y.length),_=void 0,M=void 0,S=!1,T=0;T<e.length-1;++T)if(_=T,M=(T+1)%e.length,c>=e[_].locationAngle&&c<e[M].locationAngle){S=!0;break}S||(_=e.length-1,M=0);for(var E=1/m,P=1/r,A=void 0,C=void 0,R=new n.Vector2,I=new n.Vector3,O=new n.Vector3,L=new n.Vector3,D=new n.Matrix4,N=0,V=0;V<=r;V++){var F=c+V*P*d;D.makeRotationY(F);for(var B=f(F,e[_].locationAngle,e[M].locationAngle);B>1;)_=M,M=(M+1)%e.length,B=f(F,e[_].locationAngle,e[M].locationAngle);for(var U=0;U<m;U++)A=e[_].mesh.positions,C=e[M].mesh.positions,A.values.getAt(A.faceValueIndices[U],I),C.values.getAt(C.faceValueIndices[U],O),h(p,I,O,B,L),L.x+=t,L.applyMatrix4(D),v.setAt(N++,L)}g[0]=0;for(var k=1,z=0,G=0,j=0;j<r;j++)for(var H=0;H<m;H++){var W=H+m*j,X=W,q=W+m;H===m-1&&(W-=m);var Y=W+1+m,Z=W+1;y[z++]=X,y[z++]=q,y[z++]=Y,y[z++]=Z,g[k++]=z;var J=j*P,Q=H*E,K=J+P,$=Q+E;R.set(J,Q),b.setAt(G,R),R.set(K,Q),b.setAt(G+1,R),R.set(K,$),b.setAt(G+2,R),R.set(J,$),b.setAt(G+3,R),w[G]=G++,w[G]=G++,w[G]=G++,w[G]=G++}var ee=new s.default({faceRangeOffsets:g,faceValueIndices:y,values:v}),te=new s.default({faceRangeOffsets:g,faceValueIndices:y,values:x}),re=new s.default({faceRangeOffsets:g,faceValueIndices:w,values:b}),ne=new a.default;ne.set("default",re);var ie=new o.default;return ie.faceRangeOffsets=ee.faceRangeOffsets,ie.positions=ee,ie.normalMap=te,ie.uvMaps=ne,(0,u.recalculateNormalsFromConnectivity)((0,l.default)(ie))};var n=r(0),i=c(r(3)),a=c(r(14)),o=c(r(5)),s=c(r(7)),l=c(r(112)),u=r(40);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r){e%=2*Math.PI;var n=void 0,i=void 0;return(n=(r-t)%(2*Math.PI))<0&&(n+=2*Math.PI),(i=(e-t)%(2*Math.PI))<0&&(i+=2*Math.PI),n<1e-5?0:i/n}function h(e,t,r,i,a){return a||(a=new n.Vector3),1===e&&(i=-i*i*(2*i-3)),a.lerpVectors(t,r,i),a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,u,c,f){r=r||12,u=u||0,c=c||2*Math.PI;var h=new i.default(n.Vector3,(r+1)*e.length),d=new i.default(n.Vector3,(r+1)*t.length),p=0,m=new Uint32Array(r*(e.length-1)+1),v=new Uint32Array(r*(e.length-1)*4),g=new i.default(n.Vector2,(r+1)*e.length),y=0,x=f?1/(e.length-1):1/(e.length-5),b=1/r;m[0]=0;for(var w=1,_=new n.Vector2,M=new n.Vector3,S=new n.Vector3,T=(new n.Matrix4).identity(),E=(new n.Matrix3).identity(),P=0,A=r;P<=A;P++){var C=u+P*b*c;T.makeRotationY(C),E.getNormalMatrix(T);for(var R=0,I=e.length;R<I;R++)e.getAt(R,M),t.getAt(R,S),M.applyMatrix4(T),S.applyMatrix3(E),h.setAt(p,M),d.setAt(p++,S)}for(var O=0,L=r;O<=L;O++){var D=O*b;if(!f)for(var N=0;N<2;N++){var V=N;0===V?_.set(0,V):_.set(D,V),g.setAt(y++,_)}for(var F=0,B=f?e.length:e.length-4;F<B;F++){var U=F*x;_.set(D,U),g.setAt(y++,_)}if(!f)for(var k=0;k<2;k++){var z=k;1===z?_.set(0,z):_.set(D,z),g.setAt(y++,_)}}for(var G=e.length,j=0,H=0,W=r;H<W;H++)for(var X=0,q=e.length-1;X<q;X++){var Y=X+G*H,Z=Y,J=Y+G,Q=Y+1+G,K=Y+1;v[j++]=Z,v[j++]=J,v[j++]=Q,v[j++]=K,m[w++]=j}var $=new s.default({faceRangeOffsets:m,faceValueIndices:v,values:h}),ee=new s.default({faceRangeOffsets:m,faceValueIndices:v,values:d}),te=new s.default({faceRangeOffsets:m,faceValueIndices:v,values:g}),re=new a.default;re.set("default",te);var ne=new o.default;return ne.faceRangeOffsets=$.faceRangeOffsets,ne.positions=$,ne.normalMap=ee,ne.uvMaps=re,(0,l.default)(new o.default(ne))};var n=r(0),i=u(r(3)),a=u(r(14)),o=u(r(5)),s=u(r(7)),l=u(r(112));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o){e=e||50,t=Math.max(1,Math.floor(t||8));var s=e/t;r=n.Math.clamp(r||0,0,2*Math.PI),o=n.Math.clamp(o||2*Math.PI,0,2*Math.PI-r);for(var l=new i.default(n.Vector3,t+1),u=new i.default(n.Vector3,t+1),c=new n.Vector3(0,1,0),f=new n.Vector3,h=0,d=t;h<=d;h++)f.set(e-h*s,0,0),l.setAt(h,f),u.setAt(h,c);var p=t<3?3:t;return(0,a.default)(l,u,p,r,o)};var n=r(0),i=o(r(3)),a=o(r(144));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var f=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t.length)return new o.default;var g=!f,y=new u.default(e),x=r&&r.length||y.getNumEdges(),b=[0],w=[],_=new i.default(n.Vector3,2*x*(t.length+1)),M={},S=0,T=0;function E(r,n){if(!g||!M[r]){var i=[];e.positions.getAt(r,h),o();for(var a=0;a<t.length;a++)n?h.add(t.getAt(a).clone().applyMatrix4(n)):h.add(t.getAt(a)),o();M[r]=i}function o(){_.setAt(S,h),i.push(S),S++}}function P(t){var r,n,i,a,o=y.getVerticesForEdge(t),s=o.v,l=o.vNext,u=f&&(r=s,n=l,i=e.positions.getAt(r),a=e.positions.getAt(n),m.subVectors(a,i).normalize(),d.crossVectors(p,m).normalize(),v.makeBasis(d,m,p));E(s,u),E(l,u),function(e,t){for(var r=0;r<M[e].length-1;r++)w.push(M[e][r]),w.push(M[t][r]),w.push(M[t][r+1]),w.push(M[e][r+1]),T+=4,b.push(T),w.push(M[e][r+1]),w.push(M[t][r+1]),w.push(M[t][r]),w.push(M[e][r]),T+=4,b.push(T)}(s,l)}var A=0;if(r)for(var C=0;C<x;C++)P(A=r[C]);else for(A=0;A<x;A++)P(A);var R=new Uint32Array(b),I=new Uint32Array(w),O=s.default.fromData(R,I,_),L={faceRangeOffsets:R,positions:O,uvMaps:new a.default,colorMaps:new a.default};return(0,c.applyUVMap)((0,l.flatNormalMap)(new o.default(L),80),{uvProjectionMode:c.UVMapType.Planar,alignmentAxis:c.UVAxisType.Z,autoFit:!0,scale:h,center:d})};var n=r(0),i=f(r(3)),a=f(r(14)),o=f(r(5)),s=f(r(7)),l=r(40),u=f(r(179)),c=r(114);function f(e){return e&&e.__esModule?e:{default:e}}var h=new n.Vector3,d=new n.Vector3,p=new n.Vector3(0,0,1),m=new n.Vector3,v=new n.Matrix4},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeBevelStyles=void 0;var n=m(r(13)),i=m(r(204));t.default=function(e,t,r,m,y,x,b,w){if(0===m)return(0,f.default)(e,t,r,x);var _=Math.cos(w*a.Math.DEG2RAD),M=new a.Vector3,S=new a.Vector3,T=new a.Vector3,E=new a.Vector3,P=new a.Vector3,A=new a.Vector3,C=e.loopRangeOffsets.length-1,R=t;y===v.RoundBoth?(R*=2,b>=.5*Math.abs(r)?b=.5*Math.abs(r):++R):b>=Math.abs(r)?b=Math.abs(r):++R;var I=function(e,t,r,n,i){var a=null;a=e===v.Extended?function(e,t,r,n){for(var i=[],a=1/e,o=-(e===t?n:n>=0?r:-r),s=0;s<=e;++s){var l=s*a;i.push({height:l*o,offset:Math.sqrt(l)})}e!==t&&i.push({height:-n,offset:1});return i}(t,r,n,i):e===v.RoundBoth?function(e,t,r,n){for(var i=[],a=.5*Math.PI/e,o=-(2*e===t?.5*n:n>=0?r:-r),s=0;s<=e;++s){var l=a*s;i.push({height:o-o*Math.cos(l),offset:Math.sin(l)})}var u=i.length-1;2*e===t&&--u;for(;u>=0;){var c=i[u];i.push({height:-(n+c.height),offset:c.offset}),--u}return i}(t,r,n,i):function(e,t,r,n){for(var i=[],a=.5*Math.PI/e,o=-(e===t?n:n>=0?r:-r),s=0;s<=e;++s){var l=a*s;i.push({height:o-o*Math.cos(l),offset:Math.sin(l)})}e!==t&&i.push({height:-n,offset:1});return i}(t,r,n,i);return a}(y,t,R,b,r),O=void 0,L=[],D=[],N=30-(0,i.default)(g.Bevel),V=e.positions.length,F=new o.default(a.Vector3,V*(R+1)),B=[],U=e.loopRangeOffsets[0],k=U,z=void 0,G=void 0;function j(e){var t=-1===(G=P.dot(T))?0:m/(1+G),r=-t*(T.y+P.y),i=t*(T.x+P.x);if(G<0){var a=1+G;r*=a,i*=a}var o=!0,s=!1,l=void 0;try{for(var u,c=(0,n.default)(I);!(o=(u=c.next()).done);o=!0){var f=u.value;A.x=S.x+f.offset*r,A.y=S.y+f.offset*i,A.z=f.height,F.setAt(e,A),e+=V}}catch(e){s=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}}function H(){var t=e.loopValueIndices[k-1]===e.loopValueIndices[U]?k-1:k;e.positions.getAt(e.loopValueIndices[t-1],M);var r=e.loopValueIndices[U];e.positions.getAt(r,S),T.subVectors(S,M).normalize();var i=[],a=!1,o=!0;O=g.Bevel;for(var s=0,l=U+1;l<t;++l){var u=e.loopValueIndices[l];e.positions.getAt(u,E),P.subVectors(E,S).normalize(),j(r),G<_?(s===N&&(s=1),++s,O=g.Bevel<<s,o=!1):(l===U+1&&(a=!0),o&&i.push(u-1)),D[u-1]=O,z=T,T=P,P=z,z=S,S=E,E=z,r=u}if(e.positions.getAt(e.loopValueIndices[U],E),P.subVectors(E,S).normalize(),j(r),G<_?(s===N&&(s=1),++s,O=g.Bevel<<s):o&&i.push(r),D[r]=O,a&&O!==g.Bevel){var c=!0,f=!1,h=void 0;try{for(var d,p=(0,n.default)(i);!(c=(d=p.next()).done);c=!0){var m=d.value;D[m]=O}}catch(e){f=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(f)throw h}}}}function W(){for(var t=e.loopValueIndices[k-1],r=e.loopValueIndices[U+1],n=U+1;n<k;){for(var i=0,a=V,o=0;o<R;++o)B.push(t+i),B.push(r+i),B.push(r+a),L.push(D[t]),B.push(t+i),B.push(r+a),B.push(t+a),L.push(D[t]),i=a,a+=V;t=r,++n,r=e.loopValueIndices[n]}}for(var X=0;X<C;++X){var q=e.holeOffsets[X],Y=U,Z=e.loopRangeOffsets[X+1];Z-U;for(var J=0;J<q.length;++J)k=Y+q[J],H(),W(),U=k;k=Z,H(),W(),U=k}for(var Q=[0],K=[],$=[],ee=0,te=e.loopRangeOffsets[0],re=R*V,ne=0;ne<C;++ne){for(var ie=e.loopRangeOffsets[ne+1],ae=(0,d.extractVertices)(e,te,ie),oe=(0,c.default)(ae,e.holeOffsets[ne],3),se=oe.length,le=0;le<se;le+=3){var ue=e.loopValueIndices[oe[le]+te],ce=e.loopValueIndices[oe[le+1]+te],fe=e.loopValueIndices[oe[le+2]+te];ee+=3,Q.push(ee),r>=0?(K.push(ue),K.push(ce),K.push(fe)):(K.push(ue),K.push(fe),K.push(ce)),$.push(g.Front),x&&(ee+=3,Q.push(ee),r>=0?(K.push(ue+re),K.push(fe+re),K.push(ce+re)):(K.push(ue+re),K.push(ce+re),K.push(fe+re)),$.push(g.Back))}te=ie}for(var he=B.length,de=0;de<he;de+=3)ee+=3,Q.push(ee),r>=0?(K.push(B[de]),K.push(B[de+1]),K.push(B[de+2])):(K.push(B[de]),K.push(B[de+2]),K.push(B[de+1]));$=$.concat(L);var pe=new Uint32Array(Q),me=new Uint32Array(K),ve=u.default.fromData(pe,me,F),ge={faceRangeOffsets:pe,positions:ve,uvMaps:new s.default,colorMaps:new s.default};T.set(1/0,1/0,1/0),S.set(-1/0,-1/0,-1/0);for(var ye=new a.Box3(T,S),xe=0;xe<V;++xe)e.positions.getAt(xe,E),ye.expandByPoint(E);return ye.getCenter(E),ye.getSize(P),(0,p.applyUVMap)((0,h.default)(new l.default(ge),$),{uvProjectionMode:p.UVMapType.Planar,alignmentAxis:p.UVAxisType.Z,autoFit:!1,center:E,scale:P})};var a=r(0),o=m(r(3)),s=m(r(14)),l=m(r(5)),u=m(r(7)),c=m(r(191)),f=m(r(296)),h=m(r(293)),d=r(115),p=r(114);function m(e){return e&&e.__esModule?e:{default:e}}var v=t.ShapeBevelStyles={Round:0,RoundBoth:1,Extended:2};var g={Front:1,Back:2,Bevel:4}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,l){r=Math.floor(r),l=Math.floor(l);var u=new Uint32Array(r*l+1),c=new Uint32Array(r*l*4),f=new i.default(n.Vector3,(r+1)*(l+1)),h=new i.default(n.Vector3,(r+1)*(l+1)),d=new i.default(n.Vector2,(r+1)*(l+1)),p=e/r,m=t/l,v=e/2,g=t/2,y=void 0,x=void 0,b=new n.Vector3,w=new n.Vector3(0,1,0),_=new n.Vector2;for(y=0,x=0;y<u.length;y++,x+=4)u[y]=x;for(y=0;y<l;y++)for(x=0;x<r;x++)c[4*(y*r+x)]=y*(r+1)+x,c[4*(y*r+x)+1]=y*(r+1)+x+1,c[4*(y*r+x)+2]=(y+1)*(r+1)+x+1,c[4*(y*r+x)+3]=(y+1)*(r+1)+x;for(y=0;y<l+1;y++){var M=y*m-g;for(x=0;x<r+1;x++){var S=x*p-v;b.set(S,0,-M),f.setAt(y*(r+1)+x,b),h.setAt(y*(r+1)+x,w),_.set(x/r,y/l),d.setAt(y*(r+1)+x,_)}}var T=new s.default({faceRangeOffsets:u,faceValueIndices:c,values:f}),E=new s.default({faceRangeOffsets:u,faceValueIndices:c,values:h}),P=new s.default({faceRangeOffsets:u,faceValueIndices:c,values:d}),A=new a.default;A.set("default",P);var C={faceRangeOffsets:u,positions:T,normalMap:E,uvMaps:A,colorMaps:new a.default};return new o.default(C)};var n=r(0),i=l(r(3)),a=l(r(14)),o=l(r(5)),s=l(r(7));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,s,l){if(!e)return null;r=r*Math.PI/180,o=o*Math.PI/180;for(var u=(new n.Matrix4).getInverse(s,!0).multiply(l),c=e.positions,f=c.values,h=f.length,d=c.faceRangeOffsets,p=c.faceValueIndices,m=new i.default(n.Vector3,h),v=new i.default(n.Vector3,h+1),g=new i.default(n.Vector3,h+1),y=new n.Vector3,x=new n.Vector3,b=new n.Vector3,w=d[0],_=d[1],M=w;M<_;++M){var S=p[M];f.getAt(S,y),m.setAt(M,y)}for(var T=0;T<=h;++T)m.getAt(T%h,y),y.applyMatrix4(u),v.setAt(T,y);for(var E=new n.Vector3,P=0;E.length()<1e-6&&P<h-2;++P)x=v.getAt(P+1).clone().sub(v.getAt(P)),b=v.getAt(P+2).clone().sub(v.getAt(P+1)),E.crossVectors(x,b);for(var A=new n.Vector3,C=new n.Vector3,R=new n.Vector3,I=new n.Vector3,O=0;O<h+1;++O)v.getAt((O-1+v.length)%v.length,A),v.getAt(O,C),v.getAt((O+1)%v.length,R),x.subVectors(C,A),b.subVectors(R,C),x.cross(E),b.cross(E),I.addVectors(x,b).normalize(),g.setAt(O,I);return(0,a.default)(v,g,t,r,o)};var n=r(0),i=o(r(3)),a=o(r(144));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var n=u(r(7)),i=u(r(5)),a=u(r(143)),o=u(r(113)),s=u(r(290)),l=r(0);function u(e){return e&&e.__esModule?e:{default:e}}var c=Math.PI/180;function f(e,t,r,u,h,d){var p=h/r,m=function(e,t,r,o){var s=e.positions.values.clone(),u=new n.default(e.positions,{values:s});e=new i.default(e,{positions:u});var h=function(e,t){var r={};switch(e){case f.AxisTypes.X:r.bendAxis=0,r.scaleAxis=1,r.translateAxis=2,r.bendAngleDeg=t;break;case f.AxisTypes.Z:r.bendAxis=2,r.scaleAxis=1,r.translateAxis=0,r.bendAngleDeg=-t;break;default:r.bendAxis=1,r.scaleAxis=2,r.translateAxis=0,r.bendAngleDeg=-t}return r}(t,r),d=e.boundingBox,p=d.max.getComponent(h.scaleAxis)-d.min.getComponent(h.scaleAxis),m=o*r*c/p,v=new l.Vector3(1,1,1);v.setComponent(h.scaleAxis,m);for(var g=(new l.Matrix4).scale(v),y=e.positions.values,x=new l.Vector3,b=0;b<y.length;++b)y.getAt(b,x),x.applyMatrix4(g),y.setAt(b,x);e=(0,a.default)(e,h.bendAxis+1,h.bendAngleDeg,new l.Vector3,new l.Vector3,!1);var w=new l.Vector3;w.setComponent(h.translateAxis,o),y=e.positions.values;for(var _=0;_<y.length;++_)y.getAt(_,x),x.add(w),y.setAt(_,x);return e}(e,t,p-d,u),v=new l.Vector3;v.setComponent(t,p*c);var g=(new l.Quaternion).setFromEuler((new l.Euler).setFromVector3(v,"ZYX")),y=(0,s.default)(m,r,new l.Vector3,g,new l.Vector3(1,1,1)),x=y.meshArray,b=y.transforms;return(0,o.default)(x,b)}f.AxisTypes={X:0,Y:1,Z:2}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,s,l,u){e=e||50,t=Math.max(3,Math.floor(t||8)),r=Math.max(2,Math.floor(r||6)),o=n.Math.clamp(o||0,0,2*Math.PI),s=n.Math.clamp(s||2*Math.PI,0,2*Math.PI-o),l=n.Math.clamp(l||0,0,Math.PI),u=n.Math.clamp(u||Math.PI,0,Math.PI-l);for(var c=1/r,f=new i.default(n.Vector3,r+1),h=new i.default(n.Vector3,r+1),d=new n.Vector3,p=0,m=r;p<=m;p++){var v=l+p*c*u;d.set(e*Math.sin(v),-e*Math.cos(v),0),f.setAt(p,d),h.setAt(p,d.normalize())}return(0,a.default)(f,h,t,o,s)};var n=r(0),i=o(r(3)),a=o(r(144));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,s,l,u,c){r=Math.floor(r)||1,o=Math.floor(o)||1,e=e||100,t=t||40,r=Math.max(r||8,3),o=Math.max(o||6,3),s=n.Math.clamp(s||0,0,2*Math.PI),l=n.Math.clamp(l||2*Math.PI,0,2*Math.PI-s),u=n.Math.clamp(u||0,0,2*Math.PI),c=n.Math.clamp(c||2*Math.PI,0,2*Math.PI-u);for(var f=1/o,h=new i.default(n.Vector3,o+1),d=new i.default(n.Vector3,o+1),p=new n.Vector3,m=new n.Vector3,v=0,g=o;v<=g;v++){var y=u+v*f*c;p.set(e+t*Math.cos(y),t*Math.sin(y),0),m.set(Math.cos(y),Math.sin(y),0),h.setAt(v,p),d.setAt(v,m.normalize())}return(0,a.default)(h,d,r,s,l)};var n=r(0),i=o(r(3)),a=o(r(144));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var n=u(r(43)),i=u(r(3)),a=u(r(190)),o=u(r(141)),s=u(r(541)),l=u(r(285));u(r(542));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){this.mesh=e,this.triangulation=null,this.renderIndexing=null}c.prototype={constructor:c,reindexForRendering:function(e){if(null!==this.triangulation)throw Error("Reindex must come before triangulation!");return this.renderIndexing=new s.default(this.mesh,e),this},triangulate:function(e){var t=e||l.default;return this.triangulation=new t(this.mesh,this.renderIndexing),this},getNumFaces:function(){var e=this.triangulation;return null===e?this.mesh.getNumFaces():e.numTriangles},getNumFaceVertices:function(){return null===this.triangulation?this.mesh.getNumFaceVertices():3*this.getNumFaces()},getNumMapValues:function(e){var t=this.renderIndexing;return null!==t?t.numVertices:this.mesh.getMapById(e).values.length},getFaceArities:function(e,t,r){if(null!==this.triangulation)throw Error("No face arity export for triangular meshes!");var n=new a.default(this.getNumFaces(),e,t,r),i=this.mesh.faceRangeOffsets,o=i.length;if(o>1)for(var s=i[0],l=1;l!==o;++l){var u=i[l];n.setAt(l-1,u-s),s=u}return n.data},getMaterialIds:function(e,t,r){var n=null,i=this.mesh.materialIDs;if(null===i)return null;if(null===this.triangulation){var o=t||0,s=r||1,l=e||i.data.constructor;if(0===o&&1===s&&l===i.data.constructor)return i;(n=new a.default(i.length,l,o,s)).fromArray(i)}else this.triangulation.translateMaterialIds(i,n);return n.data},getMapValues:function(e,t,r,n){var i=null,a=this.renderIndexing,o=this.mesh.getMapById(e).values,s=o.type,l=r||0,u=n||s.InstanceScalarSize,c=t||o.data.constructor;if(null===a&&0===l&&u===s.InstanceScalarSize&&c===o.data.constructor)i=o;else{var f=null===a?o.length:a.numVertices;i=this._offsetObjects(s,f,c,l,u),null!==a?a.getMapValues(e,i):i.fromArray(o.data)}return i.data},getGroups:function(){return this.triangulation.groups},getMapIndices:function(e,t,r,n){var i=null,o=this.renderIndexing,s=this.triangulation,l=null!==o?o.renderIndices:this.mesh.getMapById(e).faceValueIndices;if(null===s){var u=r||0,c=n||1,f=t||l.constructor;if(0===u&&1===c&&f===l.constructor)return l;(i=new a.default(l.length,f,u,c)).fromArray(l)}else i=new a.default(3*this.triangulation.numTriangles,t,r,n),s.translateIndices(l,i);return i.data},getUnindexedMapValues:function(e,t,r,n,i){var a=null,o=this.mesh.getMapById(e),s=o.values,l=s.type,u=o.faceValueIndices,c=this.triangulation;if(t&&null!==c)a=this._offsetObjects(l,3*c.numTriangles,r||s.data.constructor,n,i),c.translateToUnindexedValues(s,a,u);else{a=this._offsetObjects(l,u.length,r||s.data.constructor,n,i);for(var f=s.newRangeArray(1),h=0,d=u.length;h!==d;++h)a.arrayToRange(s.rangeToArray(u[h],1,f),h,1)}return a.data},getEdgeIndicesMapValues:function(){for(var e=this.mesh.getMapById("positions"),t=e.values,r=t.type,n=e.edgeVertexAdjacency.edgeVertices,i=this._offsetObjects(r,n.length,t.data.constructor),a=t.newRangeArray(1),o=0;o<n.length;o++)i.arrayToRange(t.rangeToArray(n[o],1,a),o,1);return i},getTriangulatingIndices:function(e,t,r){var n=this.triangulation;if(null===n)return null;var i=new a.default(this.getNumFaceVertices(),e,t,r),s=this.getNumFaceVertices(),l=o.default.identityForReading(s);return n.translateIndices(l,i),i.data},_offsetObjects:function(e,t,r,a,o){var s=a||0,l=o||e.InstanceScalarSize,u=((s/l|0)+t)*l,c=n.default.maybeCreate(r,u),f=0===s?c:c.subarray(s);return new i.default(e,null,f,l)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var n=r(0),i=d(r(3)),a=d(r(190)),o=d(r(43)),s=d(r(44)),l=d(r(7)),u=d(r(5)),c=d(r(286)),f=d(r(543)),h=d(r(540));function d(e){return e&&e.__esModule?e:{default:e}}function p(){this.defaultFaceArity=3,this.collapsePositions=!0,this.collapseMapValues=!0,this.faceArities=null,this.materialIds=null,this.mapIds=[],this.mapValues={},this.mapIndices={},this.skinning=null,this.creases=null}p.prototype={constructor:p,setFaceArities:function(e,t,r,n){return this.faceArities=new a.default(t||null,e,r,n),this},setMaterialIds:function(e){for(var t=0;t<e.length;t++)if(e[t]>0){this.materialIds=e;break}return this},setMapValues:function(e,t,r,n,a){var o=s.default.checkId(e),l=this.mapIds;return-1===l.indexOf(o)&&l.push(o),this.mapValues[o]=new i.default(s.default.getTypeInfo(s.default.getAnchorName(e)).ElementType,r||null,n?t.subarray(n):t,a),this},setMapIndices:function(e,t,r,n,i){return this.mapIndices[s.default.checkId(e)]=new a.default(r||null,t,n,i),this},initializeBlendShape:function(){return this.blendShapes={},this},setBlendShapes:function(e,t,r,o){return this.blendShapes[e]=new c.default(new i.default(n.Vector3,null,t),r?new i.default(n.Vector3,null,r):null,o?new a.default(o.length,o):null),this},setSkinning:function(e,t,r,a){return this.skinning={},this.skinning.positionSkinRange=e,this.skinning.skinWeights=t,this.skinning.skinBoneIndices=r,this.skinning.poseSkinToPoseBoneTransform=new i.default(n.Matrix4,null,a),this},setCreases:function(e,t){this.creases={weights:e,edges:t}},toMeshAndClear:function(){var e=this.mapIds,t=this.mapValues,r=this.mapIndices,n=s.default.IdPositions,i=t[n],a=this.faceArities,c=this.materialIds;if(!i)throw Error("No positions!");var d,m=r[n]||null,v=m?m.length:i.length;if(null===a){var g=this.defaultFaceArity;a=new Uint32Array((v/g|0)+1).fill(g,1)}else a=a.toArray(Uint32Array,1);d=o.default.accumulate(a);for(var y=0;y!==e.length;++y){var x=e[y];if(x!==n){var b=r[x];void 0!==b&&b.forceRepack(Uint32Array)}}var w=null;this.collapsePositions?(null!==m&&(w=m.repack(Uint32Array).data),i=h.default.collapsePositions(i,w)):null!==m&&(w=m.repack(Uint32Array).data);for(var _=u.default.fromData(d,i,w,c),M=0;M!==e.length;++M){var S=e[M];if(S!==n){var T=r[S],E=t[S],P=void 0;try{P=l.default.fromData(d,T.data,E)}catch(D){console.error(D);continue}this.collapseMapValues&&(h.default.collapseMapVertexValues(_,P),P.compactValues()),s.default.assignMap(_,S,P)}}if(this.skinning&&(_.skinning=new f.default(this.skinning)),this.creases){var A=this.creases,C=A.weights,R=A.edges;if(R){for(var I=_.positions.edgeVertexAdjacency,O=new Float32Array(I.getNumEdges()),L=0,D=0;L<R.length;L+=2,D++)O[I.findEdgeId(R[L],R[L+1])]=C[D];_.edgeCreaseWeights=O}else _.edgeCreaseWeights=C}return p.call(this),this.blendShapes&&(_.blendShapes=this.blendShapes),_}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=r(0),i=s(r(189)),a=s(r(3)),o=s(r(7));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){this.mesh=e,this.dirtyFaces=new i.default(e.getNumFaces()),this.areaWeighted=!0,this.needNewNormalMap=!0,this.needNewNormalValues=!0,e.positions.updateInverseIndex()}l.prototype={constructor:l,markPositionsDirty:function(e){for(var t=this.dirtyFaces,r=this.mesh.positions,n=r.valueFaceIndexOffsets,i=r.valueFaceIndices,a=0,o=e.length;a!==o;++a){var s=e[a];t.includeFromArray(i,n[s],n[s+1])}},updateMesh:function(){for(var e=this.mesh,t=this.dirtyFaces,r=this.areaWeighted,o=t.length,s=e.positions,l=s.values,u=s.faceValueIndices,c=new a.default(n.Vector3,o),f=new i.default(o),h=new n.Vector3,d=new n.Vector3,p=new n.Vector3,m=new n.Vector3,v=e.faceRangeOffsets,g=this.ownNormalMap().updateInverseIndex(),y=g.values,x=g.valueFaceIndices,b=g.valueFaceIndexOffsets,w=b[0],_=0,M=y.length;_!==M;++_){var S=b[_+1];if(t.containsAnyIn(x,w,S)){h.setScalar(0);for(var T=w;T!==S;++T)h.add(E(x[T]));y.setAt(_,h.normalize())}w=S}return e;function E(e){if(f.contains(e))c.getAt(e,d);else{var t=v[e],n=v[e+1];if(n-t>=3){var i=d;l.getAt(u[t],p),l.getAt(u[n-1],m).sub(p),l.getAt(u[t+1],i).sub(p),i.cross(m),r||d.normalize()}else d.setScalar(0);c.setAt(e,d),f.include(e)}return d}},ownNormalMap:function(){var e=this.mesh,t=e.normalMap;return this.needNewNormalMap&&(e.normalMap=t=new o.default(t)),this.needNewNormalValues&&(t.values=t.values.clone()),t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(177)),i=u(r(47)),a=u(r(256)),o=u(r(255)),s=u(r(21)),l=u(r(299));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64;(0,i.default)(this,t);var o=void 0,s=void 0;e instanceof t?(s=(o=e).radius,r=o.segments):((s=e)<0&&console.error("Circle radius should be >= 0"),o=(0,l.default)(s,r,0));var u=(0,a.default)(this,(t.__proto__||(0,n.default)(t)).call(this,o));return u.radius=s,u.segments=r,u}return(0,o.default)(t,e),t}(s.default);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(177)),i=c(r(47)),a=c(r(256)),o=c(r(255)),s=c(r(21)),l=c(r(3)),u=r(9);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e,r){(0,i.default)(this,t);var o=void 0,s=void 0,l=void 0,c=void 0;e instanceof t?(o=e,l=e.min.clone(),c=e.max.clone(),s=e.width,r=e.height):(((s=e)<0||r<0)&&console.error("Rectangle height and width radius should be >= 0"),o=h(s,r),l=new u.Vector3(-s/2,-r/2,0),c=new u.Vector3(s/2,r/2,0));var f=(0,a.default)(this,(t.__proto__||(0,n.default)(t)).call(this,o));return f.min=l,f.max=c,f.width=s,f.height=r,f}return(0,o.default)(t,e),t}(s.default);t.default=f;var h=function(e,t){var r=new l.default(u.Vector3,4),n=new Uint32Array([0,1,2,3,0]),i=new Uint32Array([0,5]);return r.setAt(0,new u.Vector3(-e/2,-t/2,0)),r.setAt(1,new u.Vector3(-e/2,t/2,0)),r.setAt(2,new u.Vector3(e/2,t/2,0)),r.setAt(3,new u.Vector3(e/2,-t/2,0)),new s.default({positions:r,loopValueIndices:n,loopRangeOffsets:i,holeOffsets:[[]]})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,l){var u=(0,i.default)(e,o),c=(0,i.default)(t,l),f=new n.default.Clipper;f.AddPaths(u,n.default.PolyType.ptSubject,!0),f.AddPaths(c,n.default.PolyType.ptClip,!0);var h=new n.default.Paths;return f.Execute(s[r],h,n.default.PolyFillType.pftNonZero,n.default.PolyFillType.pftNonZero),(0,a.default)(h)};var n=o(r(260)),i=o(r(298)),a=o(r(297));function o(e){return e&&e.__esModule?e:{default:e}}var s=[n.default.ClipType.ctIntersection,n.default.ClipType.ctUnion,n.default.ClipType.ctDifference,n.default.ClipType.ctXor]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeLoopsByRelativeArea=function(e,t,r){var n=function(e){for(var t=[],r=0;r<e.loopRangeOffsets.length-1;r++){var n=a(e,r);t.push(n)}return t}(e),o=void 0;if("geometry"===r){var s=e.boundingBox;o=s.getSize().x*s.getSize().y}else{o=0;for(var l=0;l<n.length;l++)o+=n[l]}var u=t*o,c=function(e,t){for(var r=[],n=0;n<e.length;n++)t(e[n])&&r.push(n);return r}(n,function(e){return e<u});return(0,i.removeLoops)(e,c)};var n=r(21),i=r(592);function a(e,t){for(var r=e.loopRangeOffsets,i=e.loopValueIndices,a=e.positions,o=r[t],s=(0,n.getFaceUntilWithoutHoles)(e,r[t],t),l=3*i[o],u=a.data[l],c=a.data[l+1],f=0,h=o+1;h<s;h++){var d=u,p=c;l=3*i[h],u=a.data[l],f+=.5*(d*(c=a.data[l+1])-u*p)}return Math.abs(f)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(2));t.default=function(e,t){var r=e.positions.clone(),s=new i.Vector3,l=(new i.Vector3).set(0,0,-90),u=0;r.getAt(0,s);var c=s.x,f=s.x;return function(e,t){for(var n=e;n<t;++n)r.getAt(n,s),s.x<c?c=s.x:s.x>f&&(f=s.x)}(1,r.length),u=-.5*(f-c),s.set(u,0,0),(0,a.bendVertices)(r,"Z",t,l,s,!0),new o.default((0,n.default)({},e,{positions:r}))};var i=r(0),a=r(143),o=s(r(21));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,a){for(var s=new Array(t),l=0;l<t;l++)s[l]=e;if(t<=1)return s;for(var u=(new i.Matrix4).makeRotationAxis(new i.Vector3(0,0,1),n),c=(new i.Matrix4).makeScale(a.x,a.y,a.z).multiply(u),f=new i.Vector3,h=new i.Matrix4,d=new i.Matrix4,p=1;p<t;++p){f.add(r),h.makeTranslation(f.x,f.y,0),d.multiply(c);var m=new i.Matrix4;m.multiply(h),m.multiply(d),s[p]=(0,o.default)(s[p],m)}return s};var n,i=r(0),a=r(116),o=(n=a)&&n.__esModule?n:{default:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JOIN_TYPE=void 0;var n,i=c(r(18));t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.joinType,i=void 0===n?f.SQUARE:n,o=r.mergeShapes,u=void 0!==o&&o,c=r.optionalScale,h=void 0===c?1e5:c,d=r.tolerance,m=void 0===d?.001:d,v=null;if(u){var g=(0,l.default)(e,null,h);v=p(g,t,h,i,m)}else{for(var y=[],x=[],b=new a.Vector3,w=0;w<e.loopRangeOffsets.length-1;++w){var _=(0,l.default)(e,null,h,w),M=p(_,t,h,i,m);y.push(M),x.push(b)}v=s.default.mergeShapeSets(y,x)}return new s.default(v)};var a=r(0),o=c(r(260)),s=c(r(21)),l=c(r(298)),u=c(r(297));function c(e){return e&&e.__esModule?e:{default:e}}var f=t.JOIN_TYPE={SQUARE:0,ROUND:1,MITER:2},h=(n={},(0,i.default)(n,f.SQUARE,o.default.JoinType.jtSquare),(0,i.default)(n,f.ROUND,o.default.JoinType.jtRound),(0,i.default)(n,f.MITER,o.default.JoinType.jtMiter),n),d=new o.default.ClipperOffset(3,.25);function p(e,t,r,n,i){var a=function(e,t,r,n,i){var a=new o.default.Paths;return d.Clear(),d.AddPaths(e,h[n],o.default.EndType.etClosedPolygon),d.ArcTolerance=i*r,d.Execute(a,t*r),a}(e,t,r,n,i);return(0,u.default)(a,t,r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeLoops=function(e,t){var r=e.loopRangeOffsets,n=e.loopValueIndices,o=e.holeOffsets,s=(0,i.getLoopLengths)(e,t),l=new Uint32Array(r.length-t.length),u=new Uint32Array(n.length-s),c=new Array(l.length-1);s=0;for(var f=0,h=0,d=0,p=0;d<r.length;d++)if(d===t[p]){var m=r[d+1]-r[d];p++,s+=m}else{l[f]=r[d]-s,d!==r.length-1&&(c[f]=o[d]);for(var v=r[d];v<r[d+1];v++)u[h]=n[v],h++;f++}var g={loopRangeOffsets:l,loopValueIndices:u,positions:e.positions,holeOffsets:c};return new a.default(g)};var n,i=r(21),a=(n=i)&&n.__esModule?n:{default:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){var a=e.boundingBox,s=a.getCenter(),l=a.getSize(),u=t/l.x,c=r/l.y;n&&(u>=c?u=c:c=u);return function(e,t,r,n){for(var a=e.positions,s=new o.default(i.Vector3,a.length),l=new i.Vector3(t,r,1),u=new i.Vector3,c=0;c<a.length;c++)a.getAt(c,u),u.sub(n).multiply(l).add(n),s.setAt(c,u);return s}(e,u,c,s)};var n,i=r(0),a=r(3),o=(n=a)&&n.__esModule?n:{default:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o){var s=new a.default(n.Vector3,2*r),l=new Uint32Array(2*r+2),u=new Uint32Array([0,l.length]);o=o||0;var c=Math.cos(o),f=Math.sin(o),h=c*e,d=f*e;c*=t,f*=t;for(var p=Math.cos(2*Math.PI/r),m=Math.sin(2*Math.PI/r),v=void 0,g=new n.Vector3,y=0,x=r;y<r;++y,++x)g.set(c,f,0),s.setAt(y,g),g.set(h,d,0),s.setAt(x,g),l[y]=y,l[x+1]=x,v=p*f-m*c,c=p*c+m*f,f=v,v=m*h+p*d,h=p*h-m*d,d=v;return l[r]=0,l[2*r+1]=r,new i.default({positions:s,loopValueIndices:l,loopRangeOffsets:u,holeOffsets:[[r+1]]})};var n=r(0),i=o(r(21)),a=o(r(3));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shapeToLines=function(e){var t=new n.BufferGeometry,r=e.positions.data,i=new n.BufferAttribute(r,3);t.addAttribute("position",i);var a=new n.BufferAttribute(e.loopValueIndices,1,!1);t.setIndex(a,1,!1);for(var o=new n.Object3D,s=new n.LineBasicMaterial({polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1}),l=0;l<e.loopRangeOffsets.length-1;++l){var u=e.holeOffsets[l],c=e.loopRangeOffsets[l],f=e.loopRangeOffsets[l+1],h=t.clone(),d=u.length?u[0]:f-c;h.setDrawRange(c,d);var p=new n.Line(h,s);o.add(p);for(var m=0;m<u.length;m++){var v=t.clone(),g=c+u[m],y=m===u.length-1?f-g:u[m+1]-u[m];v.setDrawRange(g,y);var x=new n.Line(v,s);o.add(x)}}return o},t.shapeToLineSegments=function(e,t,r){var a=2*(0,i.getNumLineSegments)(e),o=null,s=null;t?(s=new Uint32Array(a),o=e.positions.data):o=new Float32Array(3*a);var l=0;function u(r,n){if(!(n-r<1))for(var i=r;i<n-1;i++)if(t)s[l++]=e.loopValueIndices[i],s[l++]=e.loopValueIndices[i+1];else for(var a=3*e.loopValueIndices[i],u=0;u<6;u++)o[l++]=e.positions.data[a+u]}for(var c=0;c<e.loopRangeOffsets.length-1;c++){var f=e.holeOffsets[c],h=e.loopRangeOffsets[c],d=f.length?h+f[0]:e.loopRangeOffsets[c+1];u(h,d);for(var p=0;p<f.length;p++){var m=h+f[p],v=p===f.length-1?e.loopRangeOffsets[c+1]:h+f[p+1];u(m,v)}}var g=new n.BufferGeometry,y=new n.BufferAttribute(o,3);g.addAttribute("position",y);for(var x=new Float32Array(o.length),b=0;b<x.length;b+=3)x[b]=r.r,x[b+1]=r.g,x[b+2]=r.b;var w=new n.BufferAttribute(x,3);if(g.addAttribute("color",w),t){var _=new n.BufferAttribute(s,1,!1);g.setIndex(_,1,!1)}return g};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),i=r(179)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(2));t.getScreenPositionNormalAlpha=function(e,t,r,l){return function(u){var c=(0,a.getWorldTransform)(u,e),f=(0,o.getCamera)(u),h=(0,a.get)(u,{id:f,evalPlug:"Camera"}),d=(0,a.getWorldTransform)(u,f);if(!d)return{};var p=(0,s.default)(h),m=function(e,t,r,n){var a=(new i.Matrix4).getInverse(t),o=(new i.Matrix4).multiply(a).multiply(e),s=(new i.Matrix4).multiply(r).multiply(a).multiply(e),l=new i.Vector3(0,0,0),u=n,c=l.clone().applyMatrix4(o),f=u.clone().applyMatrix4(o),h=(new i.Vector3).subVectors(f,c).normalize(),d=l.clone().applyMatrix4(s);return d.addScalar(1).multiplyScalar(.5),{position:d,normal:h}}(c,d,p,function(e,t,r,n,o){var s=null;if(r){var l=new i.Vector3(0,0,0);o&&(l=(new i.Vector3).setFromMatrixPosition((0,a.getWorldTransform)(e,o)));var u=(0,a.getWorldTransform)(e,t),c=(new i.Vector3).setFromMatrixPosition(u);s=l.clone().sub(c).normalize();var f=new i.Matrix4;f.getInverse(u),s.applyMatrix4(f).normalize()}else(s=new i.Vector3)[n]=-1;return s}(u,e,t,r,l)),v=(0,a.get)(u,{id:e,evalPlug:"Annotation"}),g=1;if(v.limitVisilibility){var y=Math.min(.5*v.visibilityAngle,180),x=new i.Vector3(0,0,-1),b=(x.dot(m.normal),i.Math.radToDeg(Math.acos(x.dot(m.normal))));b>y?g=0:b>.75*y&&(g=(y-b)/(.25*y))}return(0,n.default)({alpha:g},m)}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),a=r(4),o=r(8),s=l(r(118));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHelper=function(e,t){var r=new n.Object3D;"Dimension"===t.helperType&&t.source&&t.target&&(r=function(e,t){var r=new n.Vector3,i=new n.Vector3,o=new n.Vector3,s=(0,a.getWorldTransform)(e,t.id),l=(0,a.getWorldTransform)(e,t.source),u=(0,a.getWorldTransform)(e,t.target);r.setFromMatrixPosition(s),i.setFromMatrixPosition(l),o.setFromMatrixPosition(u);var c=(new n.Vector3).subVectors(r,i),f=(new n.Vector3).subVectors(o,i),h=(new n.Vector3).addVectors(i,f.divideScalar(f.dot(f)/c.dot(f))),d=(new n.Vector3).subVectors(r,h),p=t.endType,m=new n.Geometry;m.vertices.push(i.clone().add(d),o.clone().add(d)),1===p&&function(e,t,r,n,i){var a=t.clone().add(n.clone().multiplyScalar(1-i)),o=r.clone().add(n.clone().multiplyScalar(1-i));e.vertices.push(a,t.clone().add(n)),e.vertices.push(o,r.clone().add(n))}(m,i,o,d,t.endWidth);2===p&&function(e,t,r,n,i){var a=t.clone().add(n.clone().multiplyScalar(1+i/2)),o=t.clone().add(n.clone().multiplyScalar(1-i/2)),s=r.clone().add(n.clone().multiplyScalar(1+i/2)),l=r.clone().add(n.clone().multiplyScalar(1-i/2));e.vertices.push(a,o),e.vertices.push(s,l)}(m,i,o,d,t.endWidth);3===p&&function(e,t,r,n,i,a){var o=t.clone().add(n),s=r.clone().add(n),l=t.clone().add(n.clone().multiplyScalar(1+4*i));l=s.clone().sub(s.clone().sub(l).multiplyScalar(a));var u=t.clone().add(n.clone().multiplyScalar(1-4*i));u=s.clone().sub(s.clone().sub(u).multiplyScalar(a));var c=r.clone().add(n.clone().multiplyScalar(1+4*i));c=o.clone().sub(o.clone().sub(c).multiplyScalar(a));var f=r.clone().add(n.clone().multiplyScalar(1-4*i));f=o.clone().sub(o.clone().sub(f).multiplyScalar(a)),e.vertices.push(l,s),e.vertices.push(u,s),e.vertices.push(c,o),e.vertices.push(f,o)}(m,i,o,d,t.endWidth,t.endLength);var v=new n.LineSegments(m,new n.LineBasicMaterial({linewidth:t.lineWidth,color:t.color,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1}));v.isHelper=!0;var g=(new n.Matrix4).getInverse(s);return v.applyMatrix(g),v}(e,t));if("Billboard"===t.helperType){var u=new n.SpriteMaterial({color:16777215,fog:!0});(r=new n.Sprite(u)).isHelper=!0,function(e,t,r){r.material.rotation=t.rotation/180*Math.PI,r.scale.set(t.scaleX,t.scaleY,1),"Texture"===t.contentType&&(r.material.map=function(e,t){if(!t.image)return null;var r=new n.Texture,i=t.image;if(r.image=(0,s.fetchTextureImage)(e,i),i.canvasOperations){var a=(0,o.checkTextureCache)(e,i.nodeId),u=a&&a.image,c=(0,l.collapseCanvas)(e,i,u);c&&(r.image=c)}r.image&&(r.needsUpdate=!0);return r}(e,t));"Text"===t.contentType&&(r.material.map=function(e,t){var r=new n.Texture,i=e.createCanvas(t.width,t.height),a=i.getContext("2d");a.clearRect(0,0,i.width,i.height),a.fillStyle="rgba(0, 0, 0, 0)",a.fillRect(0,0,t.width,t.height);var o=t.font,s="rgba("+parseInt(255*t.fontColor.r)+","+parseInt(255*t.fontColor.g)+","+parseInt(255*t.fontColor.b)+", 1)";"custom"===o&&t.fontFile||("custom"===o&&(o="sans-serif"),a.font=t.fontSize+"px "+o,a.fillStyle=s,a.textAlign="center",a.textBaseline="middle",a.fillText(t.text,i.width/2,i.height/2),a.restore(),a.width=a.measureText(t.text,t.fontSize).width);if("custom"===o&&t.fontFile){var l=t.fontFile.getFont();if(!l)return;var u=l.getAdvanceWidth(t.text,t.fontSize),c=l.getPath(t.text,(i.width-u)/2,(i.height+t.fontSize)/2,t.fontSize);c.fill=s,c.draw(a),a.restore()}return r.image=i,r.needsUpdate=!0,r}(e,t),r.material.transparent=!0,i.isIOS||delete r.material.alphaTest)}(e,t,r)}"PlanarShadow"===t.helperType&&(r=function(e,t){var r=t.width,i=new n.MeshBasicMaterial({color:16777215,transparent:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1}),o=new n.Mesh(new n.PlaneBufferGeometry(r,r),i),s=new n.ShadowPlane(new n.Vector2(Number(t.resolution),Number(t.resolution)));s.maxDistance=t.maxDistance,s.shadowPlaneSize=new n.Vector2(r,r);var l=(0,a.getWorldTransform)(e,t.id),u=(new n.Vector3).setFromMatrixPosition(l);return s.shadowPlanePosition=u,s.useBlur=t.lightArea>0,s.lightArea=t.lightArea,o.material.map=s.shadowRT.texture,o.material.side=n.FrontSide,o.material.transparent=!0,o.material.opacity=t.opacity,o.material.needsUpdate=!0,o.rotation.x=-Math.PI/2,o.position.set(0,0,0),o.isPlanarShadow=!0,o.shadowPlane=s,o.renderOrder-=1,o}(e,t));return r.helperType=t.helperType,r};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),i=r(31),a=r(4),o=r(78),s=r(198),l=r(203)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLight=function(e,t,r){var a=e.lightType,o=t.getObjectByName("Objects");switch(a){case"DirectionalLight":var s=new n.DirectionalLight(e.color.getHex(),e.intensity,e.decayExponent);return s.target.position.set(0,0,-1),s.target.updateMatrix(),s.add(s.target),i(e,s,o),s;case"PointLight":var l=new n.PointLight(e.color.getHex(),e.intensity,e.distance);return i(e,l),l;case"SpotLight":var u=new n.SpotLight(e.color.getHex(),e.intensity,e.distance,e.coneAngle*Math.PI/180,e.coneFalloff/100,e.decayExponent);return u.target.position.set(0,0,-1),u.target.updateMatrix(),u.add(u.target),i(e,u,o),u;case"HemisphereLight":var c=new n.HemisphereLight(e.color.getHex(),e.gndColor.getHex(),e.intensity);return c.rotateZ(-Math.PI/2),i(e,c,o),c;case"AreaLight":var f=new n.RectAreaLight(e.color.getHex(),e.intensity/4,2*e.width,2*e.height);return f.position.set(0,0,0),f.rotateY(Math.PI),i(e,f),f;default:return void console.warn("Unknown light type: "+a)}},t.updateLight=i;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9));r(634),r(8),r(4);function i(e,t,r){switch(t.intensity=e.intensity,t.color.copy(e.color),e.lightType){case"DirectionalLight":t.shadow.camera.left=-e.shadowCameraSize,t.shadow.camera.right=e.shadowCameraSize,t.shadow.camera.top=e.shadowCameraSize,t.shadow.camera.bottom=-e.shadowCameraSize,t.shadow.spreadAngle=n.Math.DEG2RAD*e.sourceAngle;break;case"PointLight":case"SpotLight":t.distance=e.distance,t.angle=n.Math.DEG2RAD*e.coneAngle,t.penumbra=n.Math.DEG2RAD*e.coneFalloff,t.decay=e.decayExponent,t.shadow.radius=e.radius;break;case"HemisphereLight":t.groundColor.copy(e.gndColor);break;case"AreaLight":t.intensity=e.intensity/4,t.width=2*e.width,t.height=2*e.height,t.color.copy(e.color),t.decay=e.decayExponent,t.distance=e.distance;break;default:console.warn("Unknown light type: "+type)}if(e.iesProfile){var i=e.iesProfile.getIESProfileTexture();i&&(t.iesTexture=i)}else t.iesTexture&&(t.iesTexture=null);t.shadow&&(t.castShadow=e.shadow,t.shadow.bias=e.shadowBias,t.shadow.mapSize.width=e.shadowSize,t.shadow.mapSize.height=e.shadowSize,t.shadow.side=function(e){switch(e){case"front":return n.FrontSide;case"back":return n.BackSide;case"double":return n.DoubleSide}console.error("Unknown side type: "+e)}(e.shadowSide),t.autoShadow=e.autoShadow,t.shadow.virtualPosition=void 0,t.shadow.camera.near=e.shadowNearClip,t.shadow.camera.far=e.shadowFarClip,t.shadow.update&&t.shadow.update(t))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(51)),i=l(r(13));t.default=function(e,t){var r={},l={},h={},d={},p={};function m(n,i){var o=r[n];function l(){var e=i&&i.parent,n=e&&r[e]||t;n.add(o),o.updateMatrix(),o.updateMatrixWorld()}if(o){if(r[n]&&r[n].userData.nodeId!==i.parent){var u=o.parent&&r[o.parent.userData.nodeId]||o.parent&&o.parent.userData.nodeId===(0,s.getSceneId)(e)&&t;u&&u.remove(o),l()}}else{(o=new a.Group).userData.nodeId=n,r[n]=o;var c=new a.Group;c.name="Translation",p[n]=c,o.add(c),l()}o.name=i.name}return{deleteNode:function(e){var t=r[e],n=l[e];(t||n)&&delete h[e];t?(delete r[e],t.parent.remove(t),t.geometry&&t.geometry.dispose(),t.material&&(t.material.dispose?t.material.dispose():t.material.materials.forEach(function(e){e.dispose()}))):n&&delete l[e];delete h[e]},getAnnotations:function(){return l},getNodes:function(){return r},reset:function(){r={},l={},h={},d={},p={}},translate:function(t,a,s,v,g){var y=s.type,x=u[y]||[];h[t]||(h[t]={});var b={},w=void 0,_=void 0,M=void 0;f[y]&&m(t,s);var S=!0,T=!1,E=void 0;try{for(var P,A=(0,i.default)(x);!(S=(P=A.next()).done);S=!0){var C=P.value,R=Array.isArray(C)?C:[C,C],I=(0,n.default)(R,2);w=I[0],_=I[1];var O=a[w];if(M=O&&O.id+"--"+O._v,v||!O||M!==h[t][w]||b[w]){c[w]&&(b=c[w]);var L=t+w,D=d[L];D||(D=o.default[_]()),D?("function"!=typeof D&&(d[L]=D,D=D.translate),D(t,O,s,a.Properties,a,{store:e,addOrUpdateThreeNode:m,translatorState:g,nodes:r,annotations:l,translationObjects:p}),h[t][w]=M):console.warn("Unknown plug translator for: ",w,s.name)}}}catch(e){T=!0,E=e}finally{try{!S&&A.return&&A.return()}finally{if(T)throw E}}},getGeometry:function(e,t){return p[e]&&p[e].getObjectByName(t)},getTranslationRoot:function(e){return p[e]}}};var a=r(9),o=l(r(616)),s=r(19);function l(e){return e&&e.__esModule?e:{default:e}}var u={Scene:["Player","Environment"],PolyMesh:["PolyMesh","Transform","Material","Properties"],Camera:["Camera","Transform"],Null:["Null","Transform","Properties"],Helper:["Helper","Transform","Properties"],Model:["Null","Transform","Properties"],Objects:["Null"],Light:["Light","Transform","Properties"],MaterialLibrary:["Null"],Material:["PrefetchMaterialNull","Material"],Image:["Image"],Renderers:[],Passes:[],Pass:[],Renderer:[],Bone:["Bone","Transform","Properties"],Annotation:["Annotation",["Properties","AnnotationProperties"]],Shape:["Shape","Transform","Material","Properties"],Vrscene:["Vrscene"]},c={PolyMesh:{Material:!0,Transform:!0},Shape:{Material:!0,Transform:!0}},f={PolyMesh:!0,Camera:!0,Null:!0,Helper:!0,Model:!0,Objects:!0,Light:!0,MaterialLibrary:!0,Bone:!0,Shape:!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(r(79)),i=v(r(2)),a=v(r(6));t.default=function(e,t,r,v,w,_,M,S){var T=new o.EffectComposer(r,!0),E=new o.ClearPass;E.cameraAware=!0,T.addPass(E);var P=new o.TexturePass;P.clear=!1,P.cameraAware=!0,T.addPass(P);var A=new o.CubeTexturePass(v);A.clear=!1,A.cameraAware=!0,T.addPass(A);var C=new o.SSRPrePass(t,v);T.addPass(C);var R=new o.MultiPass(r,t,v);T.addPass(R),C.linkNormalRT(R.normalRenderTarget),C.linkDepthRT(R.depthRenderTarget);var I=new o.SAO2Pass(t,v);I.depthTexture=R.depthTexture,I.normalTexture=R.normalTexture,I.applySao=!1,T.addPass(I);var O=new o.SSAARenderPass(t,v);O.clear=!1,O.sampleLevel=2,O.unbiased=!0,O.sampleRenderTarget=T.requestBuffer("temp"),O.enabled=w,O.cameraAware=!0,T.addPass(O);var L=new o.OpaquePass(t,v);L.clear=!1,L.renderOver=!1,L.cameraAware=!0,T.addPass(L);var D=new o.SAOPass(t,v);D.downSamplingRatio=1,D.intensity=3,D.occlusionSphereWorldRadius=2,D.blurEnabled=!0,D.outputOverride="default",D.manualCompositing=!1,D.blurKernelSize=(D.downSamplingRatio,6+(w?2:0)),D.cameraAware=!0,T.addPass(D);var N=new o.RefractiveGlassPass(t,v,r);N.cameraAware=!0,S.refractiveGlassMaterials={},T.addPass(N);var V=new o.SSRPostPass;T.addPass(V),C.linkDiffuseRT(V.renderTarget);var F=new o.TRAAPass(t,v);F.needsSwap=!0,F.depthTexture=R.depthTexture,T.addPass(F);var B=new o.TransparentPass(t,v);B.clear=!1,B.renderOver=!1,B.cameraAware=!0,T.addPass(B);var U=new o.OITRenderPass(t,v,r,null,268435455);U.clear=!1,U.cameraAware=!0,T.addPass(U);var k=U.isSupport(r),z=new o.DofPass(new o.Vector2(_,M),t,v);z.cameraAware=!0,T.addPass(z);var G=new o.UnrealBloomPass(new o.Vector2(_,M),1.5,1,1);G.cameraAware=!0,T.addPass(G);var j=new o.SparklePass(v,r,null,null);j.enabled=!1,j.cameraAware=!0,T.addPass(j);var H=new o.OutlinePass(new o.Vector2(_,M),t,v);H.edgeStrength=10,H.edgeGlow=0,H.edgeThickness=1,H.pulsePeriod=0,H.visibleEdgeColor=new o.Color(0,1,0),H.hiddenEdgeColor=new o.Color(0,1,0),H.cameraAware=!0,T.addPass(H);var W=new o.IndexPass(t,v,function(e){return e.userData.nodeId});W.enabled=!1,T.addPass(W);var X=new o.ShaderPass(o.FXAAShader);X.uniforms.resolution.value.set(1/_,1/M),X.enabled=!w,X.cameraAware=!0,T.addPass(X);var q=new o.ShaderPass(o.CopyShader);q.renderToScreen=!0,q.cameraAware=!0,q.material.uniforms.overbrightProtection.value=!0,T.addPass(q);var Y=new o.CameraJitter;Y.jitterLevel=5,Y.advance(S.rect.x,S.rect.y,v);var Z=!1,J={TexturePass:!1,CubeTexturePass:!1,MultiPass:!1,SAO2Pass:!1,OpaquePass:!0,TransparentPass:!1,SSAARenderPass:!1,OITRenderPass:!1,SAOPass:!1,DofPass:!1,UnrealBloomPass:!1,EffectFXAA:!1,TRAAPass:!1,ReflectiveFloorMesh:!1,SSRPrePass:!1,SSRPostPass:!1},Q={clearPass:E,texturePass:P,cubeTexturePass:A,ssrPrePass:C,multiPass:R,sao2Pass:I,ssaaRenderPass:O,opaquePass:L,saoPass:D,refractiveGlassPass:N,ssrPostPass:V,traaPass:F,transparentPass:B,oitRenderPass:U,dofPass:z,bloomPass:G,sparklePass:j,outlinePass:H,indexPass:W,effectFXAA:X,copyPass:q,cameraJitter:Y};return{composer:T,passes:Q,passControl:function(t,r){if(r=r||(s.isMobile?u.PLATFORMS.mobile:u.PLATFORMS.desktop),!u.PLATFORMS[r]||!h.RENDER_MODES[t])return console.warn("Warning: undefined platform or renderMode:",r,",",t);(0,a.default)(l.default).forEach(function(e){var n=l.default[e],i=T.passes[n.passIndex];if("EffectFXAA"===n.passName){if(!(i instanceof o.ShaderPass))return console.warn("Warning: undefined shader pass",n.passName)}else if("ReflectiveFloorMesh"!==n.passName&&!(i instanceof o[n.passName]))return console.warn("Warning: pass index or name are not correct",n.passName);var a=1===n[r+":"+t];n.passIndex||"ReflectiveFloorMesh"!==n.passName?"RefractiveGlassPass"===n.passName||(i.enabled=n.userSettings&&a?J[n.passName]:a):(W.enabled?S.reflectiveFloor.removeFromScene():S.reflectiveFloor.addToScene(),S.reflectiveFloor.setVisibility(n.userSettings&&a?J.ReflectiveFloorMesh:a))}),Q.oitRenderPass.enabled=Q.oitRenderPass.enabled&&k,Q.transparentPass.enabled=!Q.oitRenderPass.enabled,Q.ssaaRenderPass.enabled=Q.ssaaRenderPass.enabled||0===e.numRendersRemaining(),Q.ssaaRenderPass.enabled&&Q.refractiveGlassPass.enabled&&(Q.ssaaRenderPass.enabled=!1,Q.effectFXAA.enabled=!0,console.warn("SSAA incompatible with RefractiveGlassPass, disabling SSAA"));window&&Q.traaPass.enabled&&-1!=window.navigator.userAgent.indexOf("Win")&&-1!=window.navigator.userAgent.indexOf("Chrome")&&(Q.traaPass.enabled=!1,Q.effectFXAA.enabled=!0);Q.ssaaRenderPass.enabled&&(Q.opaquePass.enabled=!1);var n=null;Q.sao2Pass.enabled&&Q.sao2Pass.saoRenderTarget&&(n=I.saoRenderTarget.texture);T.renderer.ssaoMap!==n&&(console.log("setting ssaoMap on renderer",n),T.renderer.ssaoMap=n,e.dispatch((0,c.touch)((0,f.filter)(e,{type:"Material"}))));Z&&(i=(0,h.getBoundingBox)(e),v.fitClipPlanes(i),v.updateProjectionMatrix());var i;Q.traaPass.enabled&&Y.advance(S.rect.x,S.rect.y,v);Q.transparentPass.useSeparateAA=Q.oitRenderPass.useSeparateAA=Q.traaPass.enabled},resize:function(e,t,r){T.setSize(e*r,t*r),Q.effectFXAA.uniforms.resolution.value.set(1/(e*r),1/(t*r))},updateOutlineHighlights:function(){var t=(0,d.getHighlighters)(e);t.size?t.forEach(function(e){Q.outlinePass.visibleEdgeColor=e.color,Q.outlinePass.hiddenEdgeColor=e.color,Q.outlinePass.edgeThickness=e.thickness,Q.outlinePass.selectedObjects=e.selectedIds.map(function(e){return S.nodeTranslator.getGeometry(e,m.SUB_OBJECT_TYPES.Face)}).filter(function(e){return!!e})}):Q.outlinePass.selectedObjects=[]},updateFromEnvironmentPlug:function(t){var r=t.backgroundStyle;switch(Q.clearPass.enabled=!0,J.TexturePass=!1,J.CubeTexturePass=!1,r){case g:Q.clearPass.clearColor=t.backgroundColor,Q.clearPass.clearAlpha=t.backgroundOpacity;break;case y:Q.texturePass.map=(0,p.assignTexture)(e,S.renderer,t.background),J.TexturePass=!0;break;case x:case b:Q.clearPass.clearColor=0,Q.clearPass.clearAlpha=0;var n=void 0;r===b?(n=t.environmentMap)&&(n=n.specularCubeMap):n=t.cubeMap,n&&(Q.cubeTexturePass.envMap=(0,p.getCubeMapTexture)(e,S.renderer,n,!0,!0),Q.cubeTexturePass.envMapIntensity=1,Q.cubeTexturePass.opacity=t.backgroundOpacity,Q.cubeTexturePass.roughness=t.cubeMapBlurring),J.CubeTexturePass=!0;break;default:Q.clearPass.clearColor=new o.Color(1,1,1),Q.clearPass.clearAlpha=0}},updateFromPlayerPlug:function(t){var n={FXAA:"ssaaPass",TRAA:"traaPass"},i={0:"renderPass",1:"oitRenderPass"}[t.transparencyQuality],a={0:"saoPass",1:"sao2Pass"}[t.saoPassType],s=n[t.aaStyle]||n.FXAA;J.TransparentPass="renderPass"===i,J.OITRenderPass="oitRenderPass"===i,r.transparency=J.OITRenderPass?o.OrderIndependentTransperancy:o.PaintersTransperancy,J.SAOPass=t.saoPass&&"saoPass"===a,Q.saoPass.intensity=t.saoIntensity,Q.saoPass.occlusionSphereWorldRadius=t.saoScale,J.SAO2Pass=t.saoPass&&"sao2Pass"===a;var l=t.ssrQuality>0;J.SSRPostPass!==l&&e.dispatch((0,c.touch)((0,f.filter)(e,{type:"Material"})));J.SSRPrePass=J.SSRPostPass=l,l?C.setQuality(t.ssrQuality-1):C.disable(r);J.MultiPass=J.SAO2Pass||l,Q.sao2Pass.occlusionSphereWorldRadius=t.sao2Radius,Q.sao2Pass.edgeSharpness=t.sao2Sharpness,Q.sao2Pass.bias=t.sao2Bias,Q.sao2Pass.blurEnabled=t.sao2Blur,Q.sao2Pass.intensity=t.sao2Intensity,Q.bloomPass.threshold=t.bloomThreshold,J.UnrealBloomPass=t.bloomPass,J.TRAAPass="traaPass"===s,J.SSAARenderPass=J.EffectFXAA=!J.TRAAPass,Y.jitterLevel=t.traaJitterLevel,t.sparkleTexture&&(Q.sparklePass.setSparkleTexture((0,p.assignTexture)(e,r,t.sparkleTexture)),Q.sparklePass.setWorldSizeOfSparkles(t.sparkleSize));J.DofPass=t.dofPass,t.reflectiveFloor&&(t.reflectiveFloorExcludeServer,1)?J.ReflectiveFloorMesh=!0:J.ReflectiveFloorMesh=!1;J.TRAAPass?e.setTotalRenders(Math.pow(2,Y.jitterLevel)):J.SSRPrePass?e.setTotalRenders(2):J.SSAARenderPass&&e.setTotalRenders(1);Z=t.autoFitClipPlanes},updateFromCameraPlug:function(e){"Orthographic"!==e.project&&(Q.dofPass.focalDistance=e.focalDepthEnabled?e.focalDepth:e.targetDistance)},setPassProperties:function(e,t){var r=Q[e];r&&(0,i.default)(r,t)},checkEnableRefractivePass:function(){var e=(0,n.default)(S.refractiveGlassMaterials);e.length?(N.enabled=!0,N.numPasses=Math.max.apply(Math,e)):N.enabled=!1}}};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),s=r(31),l=v(r(870)),u=r(301),c=r(10),f=r(4),h=r(8),d=r(39),p=r(78),m=r(59);function v(e){return e&&e.__esModule?e:{default:e}}var g=1,y=2,x=3,b=4},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(596);t.default=function(){return function(e,t,r,i,a,o){var s=o.annotations,l="awayFromOrigin"===t.directionMode;s[e]={id:e,annotation:t,position:(0,n.getScreenPositionNormalAlpha)(e,l,t.directionAxis,t.directionTarget),visible:i.visible}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(322),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(){return function(e,t,r,n,i,o){(0,a.default)(o)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10);t.default=function(){return function(e,t,r,i,a,o){var s=o.store,l=o.translatorState,u=l.camera,c=l.passManager;e===(0,n.getCameraController)(s).id&&(u.aspect=t.aspectRatio,u.near=u.nearUserDefined=t.nearClip,u.far=u.farUserDefined=t.farClip,"Orthographic"===t.projection?(u.zoom=1/t.orthoZoom,u.hyperfocusOffset=1,u.hyperfocusScale=0,u.inPerspectiveMode=!1,u.inOrthographicMode=!0,u.fov=360*Math.atan(t.orthoHeight/2)/Math.PI,u.isOrthographicCamera=!0,u.isPerspectiveCamera=!1):(u.isOrthographicCamera=!1,u.isPerspectiveCamera=!0,u.inPerspectiveMode=!0,u.inOrthographicMode=!1,u.fov=t.fieldOfView,u.zoom=1),u.updateProjectionMatrix(),c.updateFromCameraPlug(t))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function(e,t,r,n,i,a){var o=a.translatorState,s=o.passManager;t.environmentMap&&(o.hasLight=!0),s.updateFromEnvironmentPlug(t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(597);t.default=function(){return function(e,t,r,i,a,o){var s=o.store,l=o.translatorState,u=o.translationObjects[e],c=u.getObjectByName("HELPER");c&&u.remove(c),(c=(0,n.createHelper)(s,t))&&(c.name="HELPER",c.userData.nodeId=e,u.add(c)),"PlanarShadow"===c.helperType&&(l.hasPlaneShadow=!0)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(78);t.default=function(){return function(e,t,r,i,a,o){var s=o.store;o.translatorState.loaded&&i.prefetch&&(0,n.getTextureImage)(s,t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(598);t.default=function(){return function(e,t,r,i,a,o){o.nodes;var s=o.translatorState,l=o.translationObjects[e],u=l.getObjectByName("Light");if(u){var c=s.scene.getObjectByName("Objects");(0,n.updateLight)(t,u,c)}else u=(0,n.createLight)(t,s.scene),s.hasLight=!0,u&&(u.name="Light",u.position.set(0,0,0),l.add(u))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrefetchMaterialNull=function(){return function(e,t,r,n,i,a){var o=a.addOrUpdateThreeNode,s=a.nodes,l=a.translatorState,u=l.loaded;u&&n.prefetch&&!s[e]&&o(e,r)}},t.Material=function(){return function(e,t,r,l,u,c){var f=c.store,h=c.nodes,d=c.translatorState,p=c.translationObjects;if(h[e]){var m=d.passManager;"GemMaterial"===t.type&&(l.visible?d.refractiveGlassMaterials[e]=t.mode===s.GemMaterialModes.SIMPLE_TWO_LAYER?4:2:delete d.refractiveGlassMaterials[e]);var v=p[e],g=v&&v.getObjectByName(a.SUB_OBJECT_TYPES.Face);if(g){var y=(0,o.get)(f,{scene:!0,evalPlug:"Player"});g.material=(0,i.primitiveToMaterial)(f,d.renderer,t,g.material,l.doubleSided||y.forceDoubleSided,{sparklePass:m.passes.sparklePass,nodeInfo:g,id:e}),g.material.vertexTangents=!!g.geometry.getAttribute("tangent")}var x=v&&v.getObjectByName(a.SUB_OBJECT_TYPES.Edge);if(x){var b={r:.3,g:.3,b:.3};if("LineMaterial"===t.type)b=t.color;else{var w=r.plugs.Material.find(function(e){return e.defaultColor});w&&(b=w.defaultColor)}x.material=x.material||new n.LineBasicMaterial({polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1}),x.material.color=b,x.material.linewidth=t.thickness||1}var _=v&&v.getObjectByName(a.SUB_OBJECT_TYPES.Vertex);if(_){var M={r:.3,g:.3,b:.3};if("LineMaterial"===t.type)M=t.color;else{var S=r.plugs.Material.find(function(e){return e.defaultColor});S&&(M=S.defaultColor)}_.material=_.material||new n.PointsMaterial({}),_.material.color=M}}}};var n=r(9),i=r(78),a=r(59),o=r(4),s=r(188)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function(e,t,r,n,i,a){var o=a.translationObjects[e];"Objects"!==o.parent.name&&(o.parent.userData.isNull=!0)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9));t.default=function(){return function(e,t,r,a,o,s){var l=s.translatorState,u=l.renderer,c=l.reflectiveFloor,f=l.passManager,h={Linear:i.LinearToneMapping,Reinhard:i.ReinhardToneMapping,Cineon:i.CineonToneMapping,Filmic:i.Uncharted2ToneMapping},d={Basic:i.BasicShadowMap,PCF:i.PCFShadowMap,PCFSoft:i.PCFSoftShadowMap,PCSSSoft:i.PCSSSoftShadowMap,0:i.BasicShadowMap,1:i.PCFShadowMap,2:i.PCFSoftShadowMap,3:i.PCSSSoftShadowMap};l.toneMapping=h[t.toneMapStyle],u.toneMapping=h[t.toneMapStyle],u.toneMappingExposure=t.toneMapExposureGain,u.toneMappingWhitePoint=t.toneMapWhitePoint,u.gammaInput=!0,u.gammaOutput=!0,u.autoClear=!1,u.shadowMap.type=(n.isMobile?d[0]:d[t.shadowType])||d[0],c.updateFromPlayerPlug(t),f.updateFromPlayerPlug(t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(6)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),a=c(r(197)),o=r(78),s=r(8),l=c(r(308)),u=r(59);function c(e){return e&&e.__esModule?e:{default:e}}var f=new i.Color(1,1,1),h=new i.Color(0,1,0),d=new i.Color(1,0,0);function p(e){e&&(0,n.default)(e.attributes).forEach(function(t){e.attributes[t].onUploadCallback=function(){this.array=null}})}t.default=function(){return function(e,t,r,n,c,m){var v=m.store,g=m.translatorState,y=m.translationObjects,x=n.castShadow,b=n.receiveShadow,w=n.discardable,_=(n.doubleSided,t.mesh),M=t.previousMesh,S=(g.passManager,y[e]);S.parent.userData.isPolyMesh=!0,S.parent.userData.castShadow=x;var T=y[e].getObjectByName(u.SUB_OBJECT_TYPES.Vertex);g.selection[e]&&g.selection[e].Vertex&&_?function(){var t=g.selection[e].Vertex.selected||[],r=g.selection[e].Vertex.hover||-1,n=(0,l.default)(_.positions.values.data,t,r,f,d,h);w&&p(n);T?(T.geometry.dispose(),T.geometry=n):((T=new i.Points(n,new i.PointsMaterial({vertexColors:i.VertexColors,size:5,sizeAttenuation:!1}))).name=u.SUB_OBJECT_TYPES.Vertex,T.userData.nodeId=e,y[e].add(T))}():T&&(T.geometry.dispose(),y[e].remove(T));var E=y[e].getObjectByName(u.SUB_OBJECT_TYPES.Edge);((0,s.getWireframeMode)(v)!==s.WIREFRAME_MODE.NONE||g.selection[e]&&g.selection[e].Edge)&&_?function(){var t=g.selection[e],r=t&&t.Edge&&t.Edge.selected||[],n=t&&t.Edge?t.Edge.hover:-1,o=_&&a.default.polyMeshToLineSegmentsBufferGeometry(_,r,n,f,d,h);E?(E.geometry.dispose(),E.geometry=o):((E=o&&new i.LineSegments(o,new i.LineBasicMaterial({vertexColors:i.VertexColors,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1}))).type="wireframe",E.name=u.SUB_OBJECT_TYPES.Edge,E.userData.nodeId=e,y[e].add(E));w&&p(o)}():E&&(E.geometry.dispose(),y[e].remove(E));var P=y[e].getObjectByName(u.SUB_OBJECT_TYPES.Face);((0,s.getWireframeMode)(v)!==s.WIREFRAME_MODE.WIREFRAME_ONLY||g.selection[e]&&g.selection[e].Face)&&_?function(){var r=g.renderer.extensions.get("OES_element_index_uint")?a.default.CompactIndices:a.default.NoIndices,n=P&&P.userData.triangulation,s=P&&P.userData.renderIndexing,l=P&&P.userData.valueMap,c=_&&a.default.polyMeshToMeshBufferGeometry(_,r,!1,_.tangentMap,M,n,s,l),f=void 0,m=void 0,S=void 0,T=void 0;c&&(f=c.geometry,m=c.triangulation,c.triangulationChanged,S=c.renderIndexing,T=c.valueMap);P?f&&(P.geometry.dispose(),P.geometry=f):((P=f&&new i.Mesh(f,(0,o.primitiveToMaterial)(v))).name=u.SUB_OBJECT_TYPES.Face,P.userData.nodeId=e,y[e].add(P));if(g.selection[e]&&g.selection[e].Face){var E=function(e,t){if(!e||!e.length)return null;for(var r=[],n=0;n<e.length;n++)if(e[n]>=0)for(var a=e[n],o=m.mapFaceIdToTriangleOffsets[a],s=m.mapFaceIdToTriangleOffsets[a+1],l=o;l<s;l++)r.push(l);for(var u=[],c=0;c<r.length;c++)u.push(f.index.array[3*r[c]]),u.push(f.index.array[3*r[c]+1]),u.push(f.index.array[3*r[c]+2]);for(var h=new i.BufferAttribute(new Float32Array(3*u.length),3,u.length),d=new i.BufferAttribute(new Float32Array(3*u.length),3,u.length),p=0;p<u.length;p++)h.copyAt(p,f.attributes.position,u[p]),d.copyAt(p,f.attributes.normal,u[p]);var v=new i.BufferGeometry;v.name="selected",v.addAttribute("position",h),v.addAttribute("normal",d);var g=new i.MeshBasicMaterial;g.color=t,g.transparent=!0,g.opacity=.4;var y=new i.Mesh(v,g);return y},A=g.selection[e].Face.selected,C=g.selection[e].Face.hover,R=E(A,d)||new i.Object3D,I=C>=0?E([C],h):null;if(I){for(var O=R.children.length-1;O>=0;O--)R.remove(R.children[O]);R.add(I)}for(var L=P.children.length-1;L>=0;L--)P.remove(P.children[L]);P.add(R)}else for(var D=P.children.length-1;D>=0;D--)P.remove(P.children[D]);w&&p(f);w&&(t.mesh=null,t.previousMesh=null);P&&(P.castShadow=x,P.receiveShadow=b,P.discardable=w,w||(P.userData.triangulation=m),w||(P.userData.renderIndexing=S),w||(P.userData.valueMap=T))}():P&&(P.geometry.dispose(),y[e].remove(P))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Properties=function(){return function(e,t,r,n,i,a){var o=a.nodes;o[e]&&t&&(o[e].visible=t.visible)}},t.AnnotationProperties=function(){return function(e,t,r,n,i,a){var o=a.annotations;o[e].visible=t.visible}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(r(6)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),a=r(595),o=h(r(196)),s=r(78),l=r(8),u=h(r(197)),c=h(r(308)),f=r(59);function h(e){return e&&e.__esModule?e:{default:e}}var d=new i.Color(1,1,1),p=new i.Color(0,1,0),m=new i.Color(1,0,0);t.default=function(){return function(e,t,r,h,v,g){var y=g.translationObjects,x=g.translatorState,b=g.store,w=h.castShadow,_=h.receiveShadow,M=h.discardable,S=(h.doubleSided,y[e].getObjectByName(f.SUB_OBJECT_TYPES.Vertex));t.shape&&x.selection[e]&&x.selection[e].Vertex?function(){var r=x.selection[e].Vertex.selected||[],n=x.selection[e].Vertex.hover,a=(0,c.default)(t.shape.positions.data,r,n,d,m,p);M&&P(a);S?(S.geometry.dispose(),S.geometry=a):((S=new i.Points(a,new i.PointsMaterial({vertexColors:i.VertexColors,size:5,sizeAttenuation:!1}))).name=f.SUB_OBJECT_TYPES.Vertex,S.userData.nodeId=e,y[e].add(S))}():S&&(S.geometry.dispose(),y[e].remove(S));var T=y[e].getObjectByName(f.SUB_OBJECT_TYPES.Edge);t.shape&&((0,l.getWireframeMode)(b)!==l.WIREFRAME_MODE.NONE||x.selection[e]&&x.selection[e].Edge||t.shape.isOpen())?function(){var r=x.renderer.extensions.get("OES_element_index_uint"),n=x.selection[e],o=n&&n.Edge&&n.Edge.selected||[],s=n&&n.Edge?n.Edge.hover:-1;void 0===s&&(s=-1);var l=(0,a.shapeToLineSegments)(t.shape,r,d),u=new i.LineBasicMaterial({vertexColors:i.VertexColors,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1});T?(T.geometry.dispose(),T.geometry=l):((T=new i.LineSegments(l,u)).name=f.SUB_OBJECT_TYPES.Edge,T.userData.nodeId=e,y[e].add(T));function c(e,t,r){for(var n=new i.BufferGeometry,a=new i.LineBasicMaterial({vertexColors:i.VertexColors,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1}),o=e.index.array[t],s=e.index.array[t+1],l=e.attributes.position.array,u=new Float32Array([l[3*o],l[3*o+1],l[3*o+2],l[3*s],l[3*s+1],l[3*s+2]]),c=new Float32Array(u.length),f=0;f<c.length;f+=3)c[f]=r.r,c[f+1]=r.g,c[f+2]=r.b;return n.addAttribute("position",new i.BufferAttribute(u,3)),n.addAttribute("color",new i.BufferAttribute(c,3)),new i.LineSegments(n,a)}var h=T.getObjectByName("hover");h||((h=new i.Object3D).name="hover",T.add(h));for(var v=h.children.length-1;v>=0;v--)h.remove(h.children[v]);if(-1!==s){var g=2*s,b=c(l,g,p);h.add(b)}var S=T.getObjectByName("selected");S||((S=new i.Object3D).name="selected",T.add(S));for(var E=S.children.length-1;E>=0;E--)S.remove(S.children[E]);if(o.length)for(var A=0;A<o.length;A++){var C=2*o[A],R=c(l,C,m);S.add(R)}M&&(t.shape=null,P(l));T&&(T.castShadow=w,T.receiveShadow=_)}():T&&(T.geometry.dispose(),y[e].remove(T));var E=y[e].getObjectByName(f.SUB_OBJECT_TYPES.Face);function P(e){e&&(0,n.default)(e.attributes).forEach(function(t){e.attributes[t].onUploadCallback=function(){this.array=null}})}t.shape&&((0,l.getWireframeMode)(b)!==l.WIREFRAME_MODE.WIREFRAME_ONLY||x.selection[e]&&x.selection[e].Face)&&!t.shape.isOpen()?function(){var r=(0,o.default)(t.shape,!1);if(!r)return;var n=x.renderer.extensions.get("OES_element_index_uint")?u.default.CompactIndices:u.default.NoIndices,a=E&&E.userData.triangulation,l=E&&E.userData.renderIndexing,c=E&&E.userData.valueMap,h=r&&u.default.polyMeshToMeshBufferGeometry(r,n,!1,r.tangentMap,null,a,l,c),d=void 0,v=void 0,g=void 0,S=void 0;h&&(d=h.geometry,v=h.triangulation,h.triangulationChanged,g=h.renderIndexing,S=h.valueMap);E?d&&(E.geometry.dispose(),E.geometry=d):((E=d&&new i.Mesh(d,(0,s.primitiveToMaterial)(b))).name=f.SUB_OBJECT_TYPES.Face,E.userData.nodeId=e,y[e].add(E));if(x.selection[e]&&x.selection[e].Face){var T=function(e,t){if(!e.length)return null;for(var r=[],n=0;n<e.length;n++)for(var a=e[n],o=v.mapFaceIdToTriangleOffsets[a],s=v.mapFaceIdToTriangleOffsets[a+1],l=o;l<s;l++)r.push(l);for(var u=[],c=0;c<r.length;c++)u.push(d.index.array[3*r[c]]),u.push(d.index.array[3*r[c]+1]),u.push(d.index.array[3*r[c]+2]);for(var f=new i.BufferAttribute(new Float32Array(3*u.length),3,u.length),h=new i.BufferAttribute(new Float32Array(3*u.length),3,u.length),p=0;p<u.length;p++)f.copyAt(p,d.attributes.position,u[p]),h.copyAt(p,d.attributes.normal,u[p]);var m=new i.BufferGeometry;m.name="selected",m.addAttribute("position",f),m.addAttribute("normal",h);var g=new i.MeshBasicMaterial;g.color=t,g.transparent=!0,g.opacity=.4;var y=new i.Mesh(m,g);return y},A=x.selection[e].Face.selected||[],C=x.selection[e].Face.hover,R=T(A,m)||new i.Object3D,I=C>=0?T([C],p):null;if(I){for(var O=R.children.length-1;O>=0;O--)R.remove(R.children[O]);R.add(I)}for(var L=E.children.length-1;L>=0;L--)E.remove(E.children[L]);E.add(R)}else for(var D=E.children.length-1;D>=0;D--)E.remove(E.children[D]);M&&P(d);E&&(E.castShadow=w,E.receiveShadow=_,M||(E.userData.triangulation=v),M||(E.userData.renderIndexing=g),M||(E.userData.valueMap=S))}():E&&(E.geometry.dispose(),y[e].remove(E))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function(e,t,r,a,u,c){var f=c.store,h=c.nodes,d=c.translatorState;if(t&&t.transform){h[e]&&(0,n.setMatrixOn)(h[e],t.transform);var p=(0,i.getCameraController)(f);if(e===p.id){var m=p.getWorldTransform(f);m.decompose(o,s,l),l.set(1,1,1),m.compose(o,s,l),(0,n.setMatrixOn)(d.camera,m)}}}};var n=r(630),i=r(10),a=r(0),o=new a.Vector3,s=new a.Quaternion,l=new a.Vector3},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r(9);t.default=function(e,t,r,n,i){}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(r(601)),i=y(r(602)),a=y(r(603)),o=y(r(606)),s=y(r(604)),l=y(r(607)),u=r(608),c=y(r(609)),f=y(r(610)),h=y(r(611)),d=r(612),p=y(r(613)),m=y(r(614)),v=y(r(605)),g=y(r(615));function y(e){return e&&e.__esModule?e:{default:e}}t.default={Annotation:n.default,AnnotationProperties:d.AnnotationProperties,Bone:i.default,Camera:a.default,Environment:s.default,Image:o.default,Light:l.default,Material:u.Material,Null:c.default,Helper:v.default,Player:f.default,PolyMesh:h.default,PrefetchMaterialNull:u.PrefetchMaterialNull,Properties:d.Properties,Shape:p.default,Transform:m.default,Vrscene:g.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9));t.default=function(e){var t=e.scene,r=new n.PlaneBufferGeometry(1,1),i=new n.GlossyMirror({clipBias:.003,textureWidth:1024,textureHeight:1024,color:7829367,localMirrorNormal:new n.Vector3(0,1,0)});i.specularColor=new n.Color(16777215),i.reflectivity=.5;var a=new n.Mesh(r,i.material);a.rotation.x=.5*-Math.PI,i.reflectivity=.5,a.renderOrder=-2;var o=!1,s=!0;function l(){o||(t.add(a),o=!0)}return l(),{setVisibility:function(e){a.visible=e},addToScene:l,removeFromScene:function(){o&&(t.remove(a),o=!1)},updateFromPlayerPlug:function(t){s=t.reflectiveFloor,t.reflectiveFloor&&(t.reflectiveFloorExcludeServer,1)?(a.scale.x=t.reflectiveFloorWidth,a.scale.y=t.reflectiveFloorWidth,a.position.y=t.reflectiveFloorHeight,i.distanceFade=t.reflectiveFloorFade,i.roughness=t.reflectiveFloorRoughness,i.metalness=t.reflectiveFloorMetallic,i.opacity=t.reflectiveFloorOpacity,i.fresnelStrength=t.reflectiveFloorFresnel,a.parent||e.scene.add(a),a.visible=!0):a.visible=!1},setRenderSize:function(e,t){i.setSize(e,t)},render:function(e,r,n,a){e.ssaoMapIntensity=0,i.render(e,t,r,n,a),e.ssaoMapIntensity=1},isActive:function(){return s}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return{label:"Configure",enabled:!0,active:!1,display:{playerTools:!1},options:{},activate:function(){var t=(0,n.getForms)(e),r=(0,n.getConfigurator)(e);e.dispatch((0,n.initConfigurator)({panel:!0,form:r&&r.form||!t.length||t[0].name}))},deactivate:function(){return e.dispatch((0,n.initConfigurator)({panel:!1}))}}};r(19);var n=r(74)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(r(51));t.default=function(e,t){var r=null,p=new a.Vector3(0,0,0),_={x:0,y:0,z:0},M=void 0,S=void 0,T=new i.Raycaster(new a.Vector3(0,1,0),p,0,.8),E=new i.Raycaster(new a.Vector3(0,1,0),new a.Vector3(0,-1,0),0,2);function P(e,t){_[e]+=t,p=new a.Vector3(_.x,_.y,_.z).normalize().multiplyScalar(x)}return{name:"firstPersonMode",active:!1,enabled:!0,options:{movementMode:"fly",keyboardEnabled:!0},display:{playerTools:!1},heldKeys:[],tool:{keydown:function(e){var t=g[e.key];if(t&&this.active){this.heldKeys.push(e.key);var r=(0,n.default)(y[t],2),i=r[0],a=r[1];this.heldKeys.length<=1&&(M=Date.now()),P(i,a)}},keyup:function(e){var t=g[e.key];if(t&&this.active){var r=this.heldKeys.indexOf(e.key);this.heldKeys.splice(r,1);var i=(0,n.default)(y[t],2),a=i[0],o=i[1];P(a,-o)}},keyheld:function(r){var n,i,g=this.heldKeys[0];if(r.key===g&&this.options.keyboardEnabled){!function(){S=Date.now()-M;var e=-((S=m(1,v(1e-5,S/b)))-1)*(S-1)+1;p.normalize().multiplyScalar(x*e)}();var y=t.externals.vrControls.offset,_=function(e,t,r){var n=(0,s.getCamera)(e),i=(0,s.getCameraWorldTransform)(e),o=(0,c.default)(e,n);(0,f.getCameraController)(e);if(o&&i){var l=new a.Vector3,u=new a.Vector3;l.setFromMatrixPosition(i),u.setFromMatrixPosition(o);var d=(new a.Vector3).subVectors(u,l).normalize();"plane"===r&&d.projectOnPlane(w).normalize();var p=(new a.Vector3).crossVectors(d,w).normalize(),m=(new a.Vector3).addScaledVector(d,t.y).addScaledVector(p,t.x);return m.y<-l.y&&(0,h.getConstrainCameraY)(e,n)&&(m.y=-l.y),m}}(e,p,this.options.movementMode);if(n=y,i=_,T.ray.origin.x=n.x,T.ray.origin.z=n.z,T.ray.direction=i,!T.intersectObjects(t.scene.getObjectByName("Objects").children,!0).length&&function(r,n){var i=(0,l.filter)(e,{type:"PolyMesh",plug:"Properties",properties:{walkableInVR:!0}});E.ray.origin.x=r.x+n.x,E.ray.origin.z=r.z+n.z;var a=[];return i.forEach(function(e){var r=e[0],n=t.getThreeObject(r,d.SUB_OBJECT_TYPES.Face);n&&a.push(n)}),!!E.intersectObjects(a).length}(y,_)&&_&&t.externals.vrControls){t.externals.vrControls.offset.add(_);var P=(0,s.getCamera)(e),A=(0,s.getCameraWorldTransform)(e),C=(0,c.default)(e,P),R=(0,f.getCameraController)(e),I=new a.Vector3,O=new a.Vector3;I.setFromMatrixPosition(A),O.setFromMatrixPosition(C),I.add(_),O.add(_),A.setPosition(I),C.setPosition(O),(0,u.default)(A,C,R.upPosition),e.dispatch((0,f.merge)([P,"Transform",0],(0,o.default)(A))),(0,l.get)(e,{id:P,evalPlug:"Transform"}).target||e.dispatch((0,f.merge)([f.virtualTargetId,"Transform",0],(0,o.default)(C)))}}}},activate:function(){var t=(0,s.getCamera)(e);r||(r=(0,h.getOrbitMode)(e,t)),e.dispatch((0,h.setOrbitMode)(e,t,"firstPerson"))},deactivate:function(){e.dispatch((0,h.setOrbitMode)(e,(0,s.getCamera)(e),r)),r=null}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),a=r(0),o=p(r(42)),s=r(8),l=r(4),u=p(r(119)),c=p(r(65)),f=r(10),h=r(117),d=r(59);function p(e){return e&&e.__esModule?e:{default:e}}var m=Math.min,v=Math.max,g={w:"FORWARD",a:"LEFT",s:"BACKWARD",d:"RIGHT",ArrowUp:"FORWARD",ArrowLeft:"LEFT",ArrowDown:"BACKWARD",ArrowRight:"RIGHT"},y={FORWARD:["y",1],BACKWARD:["y",-1],LEFT:["x",-1],RIGHT:["x",1]},x=.2,b=2e3;var w=new a.Vector3(0,1,0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return{enabled:!a.isIOS,display:!0,options:{},isActive:n.isFullscreen,activate:function(){var t=e.getIn(["player","playerElement"]);["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].forEach(function(e){if(t[e])return t[e]()}),e.dispatch((0,i.updateCommands)(["vrSettings"],{enabled:!1})),e.dispatch((0,n.setFullscreen)(!0))},deactivate:function(){["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].forEach(function(e){if(document[e])return document[e]()}),e.dispatch((0,i.undoUpdateCommand)("vrSettings")),e.dispatch((0,n.setFullscreen)(!1))}}};var n=r(8),i=r(25),a=r(31)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=t.width,n=t.height,i=e.getContext(),a=new Uint8Array(4*r*n);return i.readPixels(0,0,r,n,i.RGBA,i.UNSIGNED_BYTE,a),a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return{label:"Home",enabled:!0,display:{playerTools:!0},options:{},execute:function(){var t=(0,n.get)(e,{scene:!0,evalPlug:"Player"}),r=(0,a.getCameraController)(e);r.initFromCamera(e,t&&t.camera),e.dispatch((0,i.setCamera)(a.virtualCameraId))}}};var n=r(4),i=r(8),a=r(10)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=b(r(2)),a=b(r(18)),o=b(r(304)),s=b(r(624)),l=b(r(307)),u=b(r(302)),c=b(r(202)),f=b(r(303)),h=b(r(201)),d=b(r(626)),p=b(r(620)),m=b(r(622)),v=b(r(627)),g=b(r(619)),y=b(r(625)),x=b(r(618));function b(e){return e&&e.__esModule?e:{default:e}}var w=(n={orbit:o.default,pan:s.default,zoom:l.default,home:m.default,select:d.default,nodeMove:u.default,nodeRotate:c.default,nodeScale:f.default,nodeManipulate:h.default},(0,a.default)(n,"select",d.default),(0,a.default)(n,"fullscreen",p.default),(0,a.default)(n,"snapshot",v.default),(0,a.default)(n,"firstPersonMode",g.default),(0,a.default)(n,"configurator",x.default),n);(0,i.default)(w,y.default),t.default=w},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function r(t){var r=t.deltaX,o=t.deltaY,p=1;p=window.devicePixelRatio,function(e,t){var r=(0,a.getCamera)(e),o=(0,l.getCameraController)(e),p=(0,f.default)(e,r),S=(0,s.getWorldTransform)(e,r),T=(0,a.getRect)(e),E=(0,c.default)((0,s.get)(e,{id:r,evalPlug:"Camera"})),P=!o.lookAtTarget,A=(new n.Vector2).copy(t).divide(T).multiplyScalar(2);A.x*=-1;var C=(new n.Matrix4).getInverse(S,!0);if(m.copy(E).multiply(C),g.setFromMatrixPosition(p).applyMatrix4(m),v.getInverse(m,!0),b.set(0,0,g.z).applyMatrix4(v),x.set(A.x,A.y,g.z).applyMatrix4(v),y.copy(x).sub(b),o.radiusConstraint&&y.length()>0){var R=o.radiusConstraint,I=R.maxBoundingSphere,O=R.minBoundingSphere;_.setFromMatrixPosition(S),M.setFromMatrixPosition(p);var L=(new n.Vector3).copy(y).normalize(),D=new n.Ray(_,L),N=new n.Ray(M,L),V=N.intersectSphere(O).sub(M).length()-.001,F=D.intersectSphere(O);F=F?F.sub(_).length()-.001:1/0;var B=I.radius===1/0?1/0:D.intersectSphere(I).sub(_).length()-.001,U=Math.min(y.length(),V,F,B);y.normalize().multiplyScalar(U)}w.makeTranslation(y.x,y.y,y.z),P&&p.multiplyMatrices(w,p);S.multiplyMatrices(w,S),(0,h.getConstrainCameraY)(e,r)&&"trackball"!==(0,h.getOrbitMode)(e,r)&&(_.setFromMatrixPosition(S),M.setFromMatrixPosition(p),_.y<0&&(M.y-=_.y,_.y=0),P&&p.setPosition(M),S.setPosition(_));(0,u.default)(S,p,o.upPosition),(0,d.default)(e,r,S),e.dispatch((0,l.merge)([r,"Transform",0],(0,i.default)(S))),P&&e.dispatch((0,l.merge)([l.virtualTargetId,"Transform",0],(0,i.default)(p)))}(e,new n.Vector2(r/p,o/p))}return{label:"Pan",enabled:!0,display:{playerTools:!0},options:{momentum:!0},tool:{drag:function(t){var n=!1;return["orbit","pan","zoom"].forEach(function(t){n=n||(0,o.isCommandActive)(e,t)}),!!(this.active||n&&(2===t.which||3===t.which)||t.shiftKey)&&{momentum:this.options.momentum,handle:function(e){r(e)}}},swipe:function(e){r(e)}}}};var n=r(0),i=p(r(42)),a=r(8),o=r(25),s=r(4),l=r(10),u=p(r(119)),c=p(r(118)),f=p(r(65)),h=r(117),d=p(r(146));function p(e){return e&&e.__esModule?e:{default:e}}var m=new n.Matrix4,v=new n.Matrix4,g=new n.Vector3,y=new n.Vector3,x=new n.Vector3,b=new n.Vector3,w=new n.Matrix4,_=new n.Vector3,M=new n.Vector3},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(18)),i=s(r(6)),a=r(4),o=r(39);function s(e){return e&&e.__esModule?e:{default:e}}var l={},u={PolyMesh:["Box","Capsule","Cone","Cylinder","Disk","Plane","Sphere","Torus"],Light:["DirectionalLight","SpotLight","PointLight","HemisphereLight","AreaLight"]};(0,i.default)(u).forEach(function(e){u[e].forEach(function(t){l[e+t]=function(r,i){return{label:"Create "+t,enabled:!0,display:{primitives:!0},options:{operator:t,primitive:e},execute:function(){var i=(0,a.find)(r,{type:"Objects"});i&&r.dispatch((0,a.addNode)({type:e,name:t,parent:i,plugs:(0,n.default)({},e,[[t,{}]])})).then(function(e){r.dispatch((0,o.selectNode)(e))})}}}})}),t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r={selectedId:null,hoverIndex:-1},s=e.dispatch((0,i.addSubObjectHighlighter)()),l=s.selection;return e.dispatch((0,i.setActiveSelectionSet)(l)),{label:"Select",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{enableSubSelectionHover:!1,enableSubSelectionClick:!1,subObjectType:o.SUB_OBJECT_TYPES.Face,filter:null,layer:""},tool:{hover:function(t){if(this.options.enableSubSelectionHover){var i=!1,o=s.selection.ids[0],l=-1;if(o){var u=(0,n.filterNodesFromPosition)(e,t,void 0,{subObjects:!0,layer:this.layer,filter:this.filter});if(u.length){var c=u[0];o&&o===c.id&&(c.subObjectType===this.options.subObjectType&&(l=c.index),void 0!==l&&null!==l||(l=-1))}r.hoverIndex!==l&&(r.selectedId=o,r.hoverIndex=l,i=!0)}r.type!==this.options.subObjectType&&(r.type=this.options.subObjectType,i=!0),i&&e.dispatch((0,a.touch)(r.selectedId))}},click:function(t){var r=(0,n.filterNodesFromPosition)(e,t,void 0,{subObjects:!0,layer:this.layer,filter:this.filter});if(r.length){if(e.dispatch((0,i.selectNode)(r[0])),this.options.enableSubSelectionClick){var a=r[0];s.selection.set({id:a.id});var o=void 0!==a.index&&this.options.subObjectType===a.subObjectType?[a.index]:[];s.selection.setSubObjectSelection({type:this.options.subObjectType,indices:o})}}else s.selection.clear()},drag:function(e){return!(1!==e.which||!this.active)&&{momentum:!1,handle:function(e){}}}},getState:function(){return r}}};var n=r(8),i=r(39),a=r(10),o=r(59);r(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return{label:"Snapshot",enabled:!0,display:{playerTools:!1},options:{dataType:"image",format:"png",camera:null,frameScene:!1},execute:function(e,r){r=r||{};var n=(0,a.get)(e,{scene:!0,evalPlug:"Player"}),s=n&&n.autoRotate;s&&e.dispatch((0,o.stopAutoRotate)());var f=e.getIn(["commands","all"]).snapshot,h=(0,i.getCamera)(e),d=null;f.options.camera&&((d=(0,a.find)(e,{name:f.options.camera}))&&(e.dispatch((0,i.setCamera)(d,null,!1)),e.getEvaluatedTranslator(),t.resize()),f.options.frameScene&&e.dispatch((0,i.frameScene)()));var p=t.renderer.domElement,m=Math.round(f.options.width)||p.width,v=Math.round(f.options.height)||p.height,g=void 0;if(e.options&&e.options.makeErrorsFatal)e.renderAll(),g=p;else{m=Math.min(m,600),v=Math.min(v,600),t.resize(m,v),e.getEvaluatedTranslator();var y=(0,l.default)(t,{width:m,height:v});(g=document.createElement("canvas")).width=m,g.height=v;for(var x=g.getContext("2d"),b=x.createImageData(m,v),w=void 0,_=void 0,M=void 0,S=void 0,T=void 0,E=void 0,P=0;P<v;P++)for(var A=0;A<m;A++){_=y[4*(w=P*m+A)],M=y[4*w+1],S=y[4*w+2],T=y[4*w+3],E=(v-P-1)*m+A;var C=255/T;b.data[4*E]=Math.round(_*C),b.data[4*E+1]=Math.round(M*C),b.data[4*E+2]=Math.round(S*C),b.data[4*E+3]=T}x.putImageData(b,0,0)}var R=u[f.options.format]||u.png;u[f.options.format]||console.warn("snapshot command: unsupport format "+f.options.format+", using PNG instead");var I=g.toDataURL(R);if(s&&e.dispatch((0,o.startAutoRotate)(n)),f.options.camera&&e.dispatch((0,i.setCamera)(h,null,!1)),t.resize(),"dataURL"===f.options.dataType)return I;if("blob"===f.options.dataType)return c(I);var O=r.fileName||"screenshot";return function(e,t){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{var r=window.URL.createObjectURL(e),n=document.createElement("a");if(n.setAttribute("href",r),n.setAttribute("download",t),document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),n.dispatchEvent(i)}else n.click()}}(c(I),O+"."+(f.options.format||"png"))}}};var n,i=r(8),a=r(4),o=r(68),s=r(621),l=(n=s)&&n.__esModule?n:{default:n};var u={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg","jpeg-frames":"image/jpeg"};function c(e){return function(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),i=n.length,a=new Uint8Array(i);i--;)a[i]=n.charCodeAt(i);return new Blob([a],{type:r})}(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(r(6)),i=y(r(18)),a=y(r(51));t.default=function(e,t){var r=void 0,f=void 0,y=void 0,w=void 0,_=void 0,M=void 0,S=void 0,T=void 0,E=void 0,P=void 0,A=void 0,C=void 0,R=void 0,I=void 0,O=!1,L=!1,D={},N={};t.externals.controllers=[["OpenVR Gamepad",0],["OpenVR Gamepad",1],["Daydream Controller"],["Oculus Touch (Left)"],["Oculus Touch (Right)"]].map(function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1];return new s.VRController(r,n)});t.scene;var V=t.camera;function F(){y.highlight(e,!0)}function B(t){var r;window.addEventListener("touchstart",F),window.addEventListener("thumbpaddown",F),r=t,P=function(t){if(y.highlight(e,!1),"active"===y.state&&!(0,u.shouldDisplayVrSettings)(e)){(0,u.getCamera)(e);var n=y.getReticlePosition().clone();n.y=0,r.position.add(n),r.updateMatrix();var i=r.position.clone();w.setOffset(i)}},window.addEventListener("touchend",P),T=function(t){return function(r){if(y.highlight(e,!1),"active"===y.state&&!(0,u.shouldDisplayVrSettings)(e)){var n=y.getReticlePosition().clone();n.y=0;var i=n.add(t.position),a=(0,p.getWorldTransform)(e,(0,u.getCamera)(e)),o=(new s.Vector3).setFromMatrixPosition(a);w.rotationalOffset.clone().inverse(),o.sub(w.offset),i.sub(o),i.y=0,w.setOffset(i)}}}(t),window.addEventListener("thumbpadup",T)}function U(){window.removeEventListener("touchstart",F),window.removeEventListener("touchend",P),window.removeEventListener("thumbpadup",T),window.addEventListener("thumbpaddown",F),P=null,T=null}function k(){e.dispatch((0,c.activateCommand)("firstPersonMode")),e.dispatch((0,c.setCommandOptions)("firstPersonMode",{movementMode:"plane"}))}function z(){e.dispatch((0,c.deactivateCommand)("firstPersonMode")),e.dispatch((0,c.setCommandOptions)("firstPersonMode",{movementMode:I}))}function G(t){var r=t.id+t.index,n=N[r];if(!n&&{"Daydream Controller":"a2810b47-5787-420c-8384-d386e336466a","Oculus Touch (Right)":"93ed5b59-8d2d-4e4d-95ca-c6b693d1027a","VR Reticle":"804a38b2-47cb-4489-beae-8a76cb6dca27","OpenVR Gamepad":"abf474c1-7010-46fd-a6da-15097cf95aeb","Oculus Touch (Left)":"8ec601db-39ca-490d-82b3-9d32725f0a66"}[t.id]){var a=(0,p.find)(e,{from:{id:{"Daydream Controller":"a2810b47-5787-420c-8384-d386e336466a","Oculus Touch (Right)":"93ed5b59-8d2d-4e4d-95ca-c6b693d1027a","VR Reticle":"804a38b2-47cb-4489-beae-8a76cb6dca27","OpenVR Gamepad":"abf474c1-7010-46fd-a6da-15097cf95aeb","Oculus Touch (Left)":"8ec601db-39ca-490d-82b3-9d32725f0a66"}[t.id]},name:"IMPORT_NULL"});if(a){var o=(0,p.find)(e,{from:{id:a},name:"CONTROLLER_ROOT"}),l=(0,p.filter)(e,{from:{id:a}});e.dispatch((0,d.clone)(l,(0,i.default)({},a,d.controllerRootId),{cloneDependencies:!0})).then(function(e){N[r]=e[o]})}else D[t.id]||(console.log("try fetch"),e.dispatch((0,m.fetch)({"Daydream Controller":"a2810b47-5787-420c-8384-d386e336466a","Oculus Touch (Right)":"93ed5b59-8d2d-4e4d-95ca-c6b693d1027a","VR Reticle":"804a38b2-47cb-4489-beae-8a76cb6dca27","OpenVR Gamepad":"abf474c1-7010-46fd-a6da-15097cf95aeb","Oculus Touch (Left)":"8ec601db-39ca-490d-82b3-9d32725f0a66"}[t.id],null,{ignoreErrorMessage:!0})).catch(function(e){return D[t.id]=!0}))}else if(n){e.dispatch((0,p.set)({id:n,plug:"Transform",property:"translation"},t.position));var u=(new s.Euler).setFromQuaternion(t.orientation,"ZYX");e.dispatch((0,p.set)({id:n,plug:"Transform",property:"rotation"},u.toVector3().multiplyScalar(180/Math.PI)))}y&&y.update(e,t)}return!o.isIE&&"getVRDisplays"in navigator&&navigator.getVRDisplays().then(function(e){e.length&&(M=e[0].capabilities.hasExternalDisplay,f=e[0])}),{label:"VR mode",activeLabel:"Exit VR Mode",enabled:!0,display:{playerTools:!1},options:{planeEnabled:!1,navigationEnabled:!0,keyboardEnabled:!0,userHeightFeet:5,userHeightInches:11},isActive:u.isVRMode,widget:{draw:function(r){"orbit"!==_&&(y=new l.default(e,C,r),(0,p.filter)(e,{type:"PolyMesh",plug:"Properties",properties:{walkableInVR:!0}}).forEach(function(e){var r=e[0],n=t.getThreeObject(r,v.SUB_OBJECT_TYPES.Face);n&&y.addCollider(n)}));O=this.options.navigationEnabled,this.options.navigationEnabled&&"orbit"!==_&&B(r)},remove:function(e){this.options.navigationEnabled&&"orbit"!==_&&U()},position:function(t){O!==this.options.navigationEnabled&&"orbit"!==_&&(this.options.navigationEnabled?B(t):U(),O=this.options.navigationEnabled),L!==this.options.keyboardEnabled&&(this.options.keyboardEnabled&&"firstperson"==_?k():z(),L=this.options.keyboardEnabled),w&&(w.update(),t.position.copy(w.offset)),C&&("orbit"===_&&C.position.set(0,0,A),C.updateMatrix(),E(e,C));var r=navigator.getGamepads(),i=(0,n.default)(r).find(function(e){return r[e]&&"Daydream Controller"===r[e].id});M&&S?S.update():y&&!i&&y.update(e);var a=new s.Vector3(0,0,-1).applyQuaternion(V.quaternion),o=Math.min(a.y,0),l=1-Math.sqrt(1-o*o);this.options.planeEnabled&&((void 0).material.opacity=l);Math.round(2*t.position.x),t.position.x,Math.round(2*t.position.z),t.position.z;t.updateMatrix()}},tool:{controllerupdate:function(e){e.states.forEach(G)}},activate:function(){var t=this,n=e.getTranslator();if("orbit"!==(_=(0,p.get)(e,{scene:!0,evalPlug:"Player",property:"vrMode"}))?(R=(0,c.isCommandActive)(e,"firstPersonMode"),E=x):E=b,f){if((r=new s.VREffect(n.renderer)).setVRDisplay(f),n.externals.vrEffect=r,!f.capabilities.canPresent)return;return r.requestPresent().then(function(){return I=(0,c.getCommands)(e).firstPersonMode.options.movementMode,R&&(t.options.keyboardEnabled&&"firstperson"==_?k():z()),L=t.options.keyboardEnabled,e.dispatch((0,u.useVrCamera)(!0))}).then(function(){var r=(0,u.getCamera)(e),i=(new s.Vector3).setFromMatrixPosition((0,p.getWorldTransform)(e,r));i.y=0;var a=(new s.Vector3).setFromMatrixPosition((0,h.default)(e,r)).sub(i);a.y=0,a.normalize();var o=(new s.Quaternion).setFromUnitVectors(new s.Vector3(0,0,-1),a);if(C=n.camera.clone(),"orbit"===_){var l=(0,u.getBoundingBox)(e).getBoundingSphere(),c=new s.Object3D;c.position.copy(l.center),c.add(C),c.updateMatrixWorld(!0),A=l.radius/Math.sin(C.fov*Math.PI/360)}w=new g.default(C);var d=(t.options.userHeightFeet+t.options.userHeightInches/12)/3.2808;return w.setUserHeight(d),w.setOffset(i),w.setRotationalOffset(o),n.externals.vrControls=w,w.setStanding(!0),w.resetPose(),w.update(),C.updateMatrix(),E(e,C),"orbit"!==_&&M&&(S=new s.VRController("Oculus Remote")),n.externals.controllers.forEach(function(e){e.standingMatrix=w.getStandingMatrix()}),e.dispatch((0,u.setRenderMode)(u.RENDER_MODES.vr)),e.setRequestAnimationFrame(f.requestAnimationFrame,f),f}).catch(function(e){throw console.log("Error Activating VR"),e})}},deactivate:function(){var t=e.getTranslator();f.isPresenting&&r.exitPresent(),e.setRequestAnimationFrame(),R||z(),e.dispatch((0,u.setRenderMode)(u.RENDER_MODES.normal)),e.dispatch((0,u.useVrCamera)(!1)),C=null,w=null,M&&(S=null),(0,p.filter)(e,{from:{id:d.controllerRootId}}).forEach(function(t){e.dispatch((0,d.deleteNode)(t))}),y&&y.removeAllColliders(),t.renderer.setScissorTest(!1)}}};var o=r(31),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),l=y(r(635)),u=r(8),c=r(25),f=y(r(42)),h=y(r(65)),d=r(10),p=r(4),m=r(19),v=r(59),g=y(r(310));function y(e){return e&&e.__esModule?e:{default:e}}function x(e,t){var r=(0,u.getCamera)(e),n=(0,h.default)(e),i=(new s.Vector3).setFromMatrixPosition(n),a=i.sub(t.position).length();i.set(0,0,-a).applyQuaternion(t.quaternion).add(t.position),n.setPosition(i),(0,d.getCameraController)(e).upPosition.set(0,1,0).applyQuaternion(t.quaternion),e.dispatch((0,d.merge)([r,"Transform",0],(0,f.default)(t.matrix.clone()))),(0,p.get)(e,{id:r,evalPlug:"Transform"}).target||e.dispatch((0,d.merge)([d.virtualTargetId,"Transform",0],(0,f.default)(n)))}function b(e,t){var r=(0,u.getCamera)(e),n=t.position.length(),i=new s.Vector3(0,0,n).applyQuaternion(t.quaternion);t.position.copy(i),t.updateMatrixWorld(!0),(0,d.getCameraController)(e).upPosition.set(0,1,0).applyQuaternion(t.quaternion),e.dispatch((0,d.merge)([r,"Transform",0],(0,f.default)(t.matrixWorld.clone())))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=!1;return!n.isIE&&"getVRDisplays"in navigator&&navigator.getVRDisplays().then(function(t){if(t.length){var a=n.isIOS||n.isAndroidTablet;r=t[0].capabilities.canPresent&&!a,t[0].capabilities.hasExternalDisplay,e.dispatch((0,i.updateCommand)("vrSettings",{enabled:r}))}}),{label:"VR settings",activeLabel:"Exit VR Mode",enabled:r,display:{playerTools:!0},options:{},isActive:a.shouldDisplayVrSettings,activate:function(){this.options.icon="exit",e.dispatch((0,i.updateCommands)(i.MOUSE_CONTROLS,{enabled:!1})),e.dispatch((0,i.activateCommand)("vrMode"))},deactivate:function(){this.options.icon="vrSettings",e.dispatch((0,i.undoUpdateCommands)(i.MOUSE_CONTROLS)),e.dispatch((0,i.deactivateCommand)("vrMode"))}}};var n=r(31),i=r(25),a=r(8)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMatrixOn=function(e,t){var r=new n.Vector3,i=new n.Quaternion,a=new n.Vector3;t.decompose(r,i,a);var o=(new n.Vector3).copy((new n.Euler).setFromQuaternion(i,"ZYX"));!function(e,t,r,n){e.position.set(t.x,t.y,t.z),e.rotation.set(r.x,r.y,r.z,"ZYX"),e.scale.set(n.x,n.y,n.z)}(e,r,o,a)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(2)),i=u(r(6)),a=u(r(13));t.createTranslator=function(e,t,r){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=t(e,r,{}),h=u.forceFetchAssets,d=(e.get("player"),void 0),p=null,m={};e.getIn(["player","renderingMode"]);function v(){var e=!0,t=!1,r=void 0;try{for(var n,o=(0,a.default)((0,i.default)(m));!(e=(n=o.next()).done);e=!0){var s=n.value;f.deleteNode(s)}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}f.reset(),p=null,m={},d=null}return(0,n.default)({},c,f,{reset:v,update:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=(0,o.getSceneId)(e),r=(0,o.getScenePhase)(e);if(t){(t!==d||r<o.SCENE_PHASES.RENDERING)&&(v(),d=t);var n=(0,s.getEvalSceneGraph)(e,{forceFetchAssets:h});f.preTranslate&&f.preTranslate();var u=p!==n._ev?function(e,t){var r={},n=0;function o(e){var i=t.nodes[e];if(i){var s=t.evaluatedNodes[e],l=m[e];l&&l._v===s._v&&l._ev===s._ev||(f.translate(e,s,i),n+=1),r[e]={_v:s._v,_ev:s._ev};var u=!0,c=!1,h=void 0;try{for(var d,p=(0,a.default)(i.children);!(u=(d=p.next()).done);u=!0){var v=d.value;o(v)}}catch(e){c=!0,h=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw h}}}}o(e),t.nodes[s.virtualCameraId]&&o(s.virtualCameraId);t.nodes[s.vrCameraId]&&o(s.vrCameraId);t.nodes[s.controllerRootId]&&o(s.controllerRootId);var l=!0,u=!1,c=void 0;try{for(var h,d=(0,a.default)((0,i.default)(m));!(l=(h=d.next()).done);l=!0){var v=h.value;r[v]||f.deleteNode(v)}}catch(e){u=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}return m=r,p=t._ev,n}(t,n):0,c=r>=o.SCENE_PHASES.RENDERING,g=r>=o.SCENE_PHASES.PRELOADING,y=r>=o.SCENE_PHASES.PRELOADED,x=r>=o.SCENE_PHASES.LOADED,b=r>=o.SCENE_PHASES.RENDERED,w=r>=o.SCENE_PHASES.POSTRENDERING;!c&&u&&e.dispatch((0,o.markRenderingScene)());var _=0===e.numRendersRemaining();if(x&&!b&&_&&e.dispatch((0,o.markRenderedScene)(t)),b&&!w&&e.dispatch((0,o.markPostRendered)()),!x&&y&&(0,o.areAssetsLoaded)(e)){var M=f.onLoad();M&&(e.dispatch((0,o.markLoaded)()),(0,s.getCameraController)(e).needsRadiusConstraint=!0)}if(!g&&(0,o.areAssetsLoaded)(e)){var S=!f.isAttached||f.isAttached()||!1;S&&e.dispatch((0,o.markPreloaded)())}y&&f.postTranslate(),e.dispatch((0,l.incrementTime)())}else d=null}})};var o=r(19),s=r(10),l=r(68);r(23),r(8);function u(e){return e&&e.__esModule?e:{default:e}}var c={onLoad:function(){},postTranslate:function(){},handleStateChanges:function(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new n.Box3,r=new n.Box3;if(!e)return r;var i=e;return e.children.forEach(function(e){"Object3D"===e.type&&"Objects"===e.name&&(i=e)}),r.makeEmpty(),e.updateMatrixWorld(!0),i.traverseVisible(function(e){if(e.geometry&&!e.isHelper){var n=e.geometry;n.isBufferGeometry&&!n.attributes.position.array||(null===n.boundingBox&&n.computeBoundingBox(),!1===n.boundingBox.isEmpty()&&(t.copy(n.boundingBox),e.matrix.compose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),t.applyMatrix4(e.matrixWorld),r.union(t)))}}),r};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=new n.Camera,c=new u.default(r);function f(){var t,u,f,h,d;c&&c.update(),r.updateMatrix(),t=r,u=(0,i.getCamera)(e),f=(0,l.default)(e),h=(new n.Vector3).setFromMatrixPosition(f),d=h.sub(t.position).length(),h.set(0,0,-d).applyQuaternion(t.quaternion).add(t.position),f.setPosition(h),(0,o.getCameraController)(e).upPosition.set(0,1,0).applyQuaternion(t.quaternion),e.dispatch((0,o.set)([u,"Transform",0,"rotation"],(0,s.default)(t.matrix.clone()).rotation)),(0,a.get)(e,{id:u,evalPlug:"Transform"}).target||e.dispatch((0,o.merge)([o.virtualTargetId,"Transform",0],(0,s.default)(f)))}t.vrControls=c,window.addEventListener("deviceorientation",f);return f};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),i=r(8),a=r(4),o=r(10),s=c(r(42)),l=c(r(65)),u=c(r(310));function c(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(56),a=(n=i)&&n.__esModule?n:{default:n};t.DirectionalLightHelper=c;var o,s,l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9));function u(e,t,r,n,i){l.Object3D.call(this),this.className="ArrowHelper",this.light=e,void 0===r&&(r=16777215),void 0===t&&(t=1),void 0===n&&(n=.2*t),void 0===i&&(i=.2*n);var a=new l.CylinderGeometry(.15,.15,.5,10,1),o=new l.CylinderGeometry(0,.5,.5,5,1);this.cylinder1=new l.Mesh(a,new l.MeshBasicMaterial({color:r})),this.cylinder1.matrixAutoUpdate=!1,this.add(this.cylinder1),this.cone1=new l.Mesh(o,new l.MeshBasicMaterial({color:r})),this.cone1.matrixAutoUpdate=!1,this.add(this.cone1),this.setLength(t,n,i),this.update()}function c(e,t){l.Object3D.call(this),this.isHelper=!0,this.light=e,this.light.updateMatrixWorld(),this.arrow=new u(this.light,t),this.add(this.arrow),this.update()}u.prototype=(0,a.default)(l.Object3D.prototype),u.prototype.update=(o=new l.Vector3,s=void 0,function(){var e=new l.Vector3(0,0,-1).applyQuaternion(this.light.quaternion);e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(o.set(e.z,0,-e.x).normalize(),s=Math.acos(e.y),this.quaternion.setFromAxisAngle(o,s))}),u.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.cylinder1.scale.set(r,e,r),this.cylinder1.updateMatrix(),this.cone1.scale.set(r,t,r),this.cone1.position.y=e/4,this.cone1.updateMatrix()},u.prototype.setColor=function(e){this.cylinder1.material.color.setHex(e),this.cone1.material.color.setHex(e)},c.prototype=(0,a.default)(l.Object3D.prototype),c.prototype.update=function(){this.position.set(this.light.position.x,this.light.position.y,this.light.position.z),this.arrow.update()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(18),a=(n=i)&&n.__esModule?n:{default:n};t.default=d;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(9)),s=r(19),l=r(4),u=r(10);var c="804a38b2-47cb-4489-beae-8a76cb6dca27",f=new o.Vector3(0,1,0),h={ACTIVE:"active",INACTIVE:"inactive",DISABLED:"disalbed"};function d(e,t,r){this.state=h.INACTIVE,this.stateChanged=!1,this.colliders=[],this.position=null,this.camera=t,this.manipulatorsObject=r,this.error=null;var n=this;if(!this.reticleMoveRoot&&!this.error){var i=void 0,o=void 0,f=void 0,d=void 0;e.dispatch((0,s.fetch)(c,null,{ignoreErrorMessage:!0})).then(function(){var t=(0,l.find)(e,{from:{id:c},name:"IMPORT_NULL"});f=(0,l.find)(e,{from:{id:c},name:"RETICLE"}),d=(0,l.find)(e,{from:{id:c},name:"DISABLE"}),o=(0,l.find)(e,{from:{id:c},name:"RETICLE_MATERIAL"}),i=(0,l.find)(e,{from:{id:t},name:"RETICLE_ROOT"});var r=(0,l.filter)(e,{from:{id:t}});return e.dispatch((0,u.clone)(r,(0,a.default)({},t,u.controllerRootId),{cloneDependencies:!0}))}).then(function(t){n.reticleMoveRoot=t[i],n.reticleMaterialId=t[o],n.reticleId=t[f],n.disableId=t[d],n.changeVisibility(e)}).catch(function(e){n.error=e})}}d.prototype={constructor:d,getReticlePosition:function(){return this.position},addCollider:function(e){this.colliders.push(e)},removeCollider:function(e){var t=this.colliders.indexOf(e);t>-1&&this.colliders.splice(t,1)},removeAllColliders:function(){this.colliders=[]},getIntersects:function(e){var t=new o.Vector3,r=new o.Vector3;return e?(t=new o.Vector3(0,0,-1).applyQuaternion(e.orientation),r=e.position):(this.camera.getWorldDirection(t),r=this.camera.position),new o.Raycaster(r,t).intersectObjects(this.colliders)},highlight:function(e,t){t?e.dispatch((0,l.set)({id:this.reticleMaterialId,plug:"Material",property:"emissiveColor"},{r:0,g:1,b:0})):e.dispatch((0,l.set)({id:this.reticleMaterialId,plug:"Material",property:"emissiveColor"},{r:.6,g:.6,b:.6}))},changeVisibility:function(e){this.state===h.ACTIVE?(e.dispatch((0,l.set)({id:this.reticleId,plug:"Properties",property:"visible"},!0)),e.dispatch((0,l.set)({id:this.disableId,plug:"Properties",property:"visible"},!1))):this.state===h.INACTIVE?(e.dispatch((0,l.set)({id:this.reticleId,plug:"Properties",property:"visible"},!1)),e.dispatch((0,l.set)({id:this.disableId,plug:"Properties",property:"visible"},!0))):this.state===h.DISABLED&&(e.dispatch((0,l.set)({id:this.reticleId,plug:"Properties",property:"visible"},!1)),e.dispatch((0,l.set)({id:this.disableId,plug:"Properties",property:"visible"},!1)))},update:function(e,t){if(this.camera){var r=this.getIntersects(t);if(r[0]){this.position=r[0].point,this.reticleMoveRoot&&e.dispatch((0,l.set)({id:this.reticleMoveRoot,plug:"Transform",property:"translation"},r[0].point));var n=(0,l.get)(e,{id:this.reticleMoveRoot,plug:"Transform",property:"rotation"});this.reticleMoveRoot&&e.dispatch((0,l.set)({id:this.reticleMoveRoot,plug:"Transform",property:"rotation"},{x:n.x,y:n.y-4,z:n.z})),this.manipulatorsObject.position&&this.position.sub(this.manipulatorsObject.position),1!==r[0].face.normal.dot(f)?(this.state!==h.INACTIVE&&(this.stateChanged=!0),this.state=h.INACTIVE):(this.state!==h.ACTIVE&&(this.stateChanged=!0),this.state=h.ACTIVE)}else this.state!==h.DISABLED&&(this.stateChanged=!0),this.state=h.DISABLED;this.stateChanged&&this.reticleId&&this.disableId&&(this.changeVisibility(e),this.stateChanged=!1)}}}},function(e,t,r){"use strict";function n(e,t){this.xform=t,this.f=e}function i(e,t){this.xform=t,this.f=e}Object.defineProperty(t,"__esModule",{value:!0}),t.map=function(e){return function(t){return new n(e,t)}},t.filter=function(e){return function(t){return new i(e,t)}},t.compose=function(){var e=Array.prototype.slice.call(arguments);return function(t){for(var r=t,n=e.length-1;n>=0;n--)r=e[n](r);return r}},n.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},n.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},n.prototype["@@transducer/step"]=function(e,t){return this.xform["@@transducer/step"](e,this.f(t))},i.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},i.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},i.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xform["@@transducer/step"](e,t):e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invertImage=function(e,t){var r=t.width,n=t.height,i=e.createCanvas(r,n),a=i.getContext("2d");a.drawImage(t,0,0,r,n),a.globalCompositeOperation="difference",a.fillStyle="rgb(255,255,255)",a.fillRect(0,0,r,n);for(var o=a.getImageData(0,0,r,n),s=t.getContext("2d").getImageData(0,0,r,n),l=r*n*4,u=3;u<l;u+=4)o.data[u]=s.data[u];return a.putImageData(o,0,0),i},t.combineChannels=function(e,t,r,n){var i=t.red,o=t.green,s=t.blue,l=t.rgb,u=t.alpha,c=l||i||o||s||u;if(!c)return null;var f=c.width,h=c.height,d=e.createCanvas(f,h),p=d.getContext("2d");if(l)p.drawImage(l,0,0,f,h);else{var m=!0;p.globalCompositeOperation="lighten",i&&(m=!1,a(e,p,i,0,f,h)),o&&(m=!1,a(e,p,o,1,f,h)),s&&(m=!1,a(e,p,s,2,f,h)),m&&(p.fillStyle="rgb(255,255,255)",p.fillRect(0,0,f,h))}if(r){var v=r.redFactor,g=r.greenFactor,y=r.blueFactor,x=void 0===v?255:Math.round(255*v),b=void 0===g?255:Math.round(255*g),w=void 0===y?255:Math.round(255*y);p.globalCompositeOperation="multiply",p.fillStyle="rgb("+x+","+b+","+w+");",p.fillRect(0,0,f,h)}if(u){var _=null;if(u.width!==f||u.height!==h){var M=e.createCanvas(f,h),S=M.getContext("2d");S.drawImage?S.drawImage(u,0,0,f,h):S.draw(u,0,0,f,h),_=S.getImageData(0,0,f,h)}else _=u.getContext("2d").getImageData(0,0,f,h);var T=r&&r.alphaFactor?r.alphaFactor:1;n=n||0;for(var E=p.getImageData(0,0,f,h),P=f*h*4,A=3,C=n;A<P;A+=4,C+=4)E.data[A]=Math.min(255,Math.round(_.data[C]*T));p.putImageData(E,0,0)}return d},t.moveToRed=function(e,t,r,n,i){var a=t.width,o=t.height,s=e.createCanvas(a,o),l=s.getContext("2d"),u=Math.round(255*(i||0));l.fillStyle="rgb(255,0,0)",l.fillRect(0,0,a,o);for(var c=t.getContext("2d").getImageData(0,0,a,o),f=l.getImageData(0,0,a,o),h=a*o*4,d=0;d<h;d+=4)f.data[d]=Math.min(255,Math.round(c.data[d+r]*n)+u);return l.putImageData(f,0,0),s},t.factorCanvas=function(e,t,r){var n=r.redFactor,i=r.greenFactor,a=r.blueFactor,s=r.alphaFactor,l=t.width,u=t.height,c=e.createCanvas(l,u),f=c.getContext("2d");f.drawImage(t,0,0,l,u);var h=o(n),d=o(i),p=o(a);void 0===s&&(s=1);if(f.globalCompositeOperation="multiply",f.fillStyle="rgb("+h+","+d+","+p+");",f.fillRect(0,0,l,u),s<1){for(var m=Math.round(255*s),v=f.getImageData(0,0,l,u),g=l*u*4,y=3;y<g;y+=4)v.data[y]=m;f.putImageData(v,0,0)}return c},t.fixNormalMap=function(e,t,r,i,a){var o=new n.Vector3,u=t.width,c=t.height,f=e.createCanvas(u,c),h=f.getContext("2d");h.drawImage(t,0,0,u,c);for(var d=i?-r:r,p=a?-r:r,m=h.getImageData(0,0,u,c),v=u*c*4,g=0;g<v;g+=4)o.set(s(m.data[g]),s(m.data[g+1]),s(m.data[g+2])),o.x*=d,o.y*=p,o.normalize(),m.data[g]=l(o.x),m.data[g+1]=l(o.y),m.data[g+2]=l(o.z);return h.putImageData(m,0,0),f};var n=r(0),i=["rgb(255,0,0)","rgb(0,255,0)","rgb(0,0,255)"];function a(e,t,r,n,a,o){var s=e.createCanvas(a,o),l=s.getContext("2d");l.fillStyle=i[n],l.fillRect(0,0,a,o),l.globalCompositeOperation="multiply",l.drawImage(r,0,0,a,o),t.drawImage(s,0,0,a,o)}function o(e){return void 0===e?255:Math.round(255*e)}function s(e){return e/255*2-1}function l(e){return e=Math.min(1,Math.max(-1,e)),Math.round(127.5*e+127.5)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e,t){var r=(0,a.default)({},t);return e.forEach(function(e){return delete r[e]}),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subd=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.scene.filter({type:"PolyMesh"}).map(function(t){var r=e.scene.get({id:t,property:"type"});e.sceneGraph.addOperator(t,r,["MeshSmooth",{}])})},t.indexRender=function(e){e._store.getTranslator().indexRender(!0)},t.singleSideTransparent=function(e){e.scene.filter({type:"PolyMesh"}).map(function(t){var r=e.scene.get({id:t,plug:"Material",property:"reference"});if(r){var n=e.scene.get({id:r,plug:"Material",property:"type"});"ProxyReference"===n&&(r=e.scene.get({id:r,plug:"Material",property:"webgl"}));var i=e.scene.get({id:r,plug:"Material",property:"opacityFactor"}),a=e.scene.get({id:r,plug:"Material",property:"baseMapTransparent"}),o=e.scene.get({id:r,plug:"Material",property:"opacityMap"});void 0!==i&&null!==i||(i=1),(i<1||a||o)&&e.scene.set({id:t,plug:"Properties",property:"doubleSided"},!1)}})};r(0),r(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTruthy=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return void 0===e?t:!(!e||"0"===e||"false"===e)},t.parseQueryArg=function(e){return void 0==e?void 0:!(!e||"0"===e||"false"===e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(30),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.async,n=void 0===r||r,i=t.configuration,o=t.configurations,s=t.panel,l=t.preset;if(!e.configuration.getAttributes().length)return a.default.resolve(!1);var u=e.configuration.getForms(),c=t.form||u.length&&u[0].id||!0;s&&e.commands.updateCommand("configurator",{active:!0});return e.configuration.initConfigurator({async:n,configuration:i,configurations:o,form:c,panel:s,preset:l})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(645),a=(n=i)&&n.__esModule?n:{default:n};function o(e){return!!(e&&e.constructor&&e.call&&e.apply)}var s,l=[];function u(e,t){return L(function(t,r){r(e(t.val))},[t])}function c(e){return u(e,this)}var f=(0,a.default)(3,function(e,t,r){var n=L(function(r,n){n(t=e(t,r.val))},[r]);return n.hasVal||n(t),n}),h=(0,a.default)(2,function(e,t){var r=E(L(function(e,t,r,n){n[0]?r(n[0]()):e.hasVal?r(e.val):t.hasVal&&r(t.val)},[e,t]));return R(L(function(){return!0},[e.end,t.end]),r),r});function d(e){return L(function(e,t,r){r(e.val(t.val))},[this,e])}function p(e){var t;if(!(!0!==e.depsMet&&(t=e,t.depsMet=t.deps.every(function(e){return e.hasVal}),!t.depsMet)||void 0!==e.end&&!0===e.end.val))if(void 0===s){s=e,e.depsChanged&&(e.fnArgs[e.fnArgs.length-1]=e.depsChanged);var r=e.fn.apply(e.fn,e.fnArgs);void 0!==r&&e(r),s=void 0,void 0!==e.depsChanged&&(e.depsChanged=[]),e.shouldUpdate=!1,!1===x&&b()}else l.push(e)}var m=[],v=-1;function g(e){var t,r=e.listeners;if(!1===e.queued){for(e.queued=!0,t=0;t<r.length;++t)g(r[t]);m[++v]=e}}function y(e){var t,r,n,i=e.listeners;for(t=0;t<i.length;++t)(n=i[t]).end===e?C(n):(void 0!==n.depsChanged&&n.depsChanged.push(e),n.shouldUpdate=!0,g(n));for(;v>=0;--v)!0===(r=m[v]).shouldUpdate&&p(r),r.queued=!1}var x=!1;function b(){for(x=!0;l.length>0;){var e=l.shift();e.vals.length>0&&(e.val=e.vals.shift()),y(e)}x=!1}function w(){return"stream("+this.val+")"}function _(e,t){void 0!==t&&null!==t&&o(t.then)?t.then(e):(e.val=t,e.hasVal=!0,void 0===s?(x=!0,y(e),l.length>0?b():x=!1):s===e?function(e,t){var r,n;for(r=0;r<t.length;++r)(n=t[r]).end!==e?(void 0!==n.depsChanged&&n.depsChanged.push(e),n.shouldUpdate=!0):C(n)}(e,e.listeners):(e.vals.push(t),l.push(e)))}function M(){function e(t){return arguments.length>0?(_(e,t),e):e.val}return e.hasVal=!1,e.val=void 0,e.vals=[],e.listeners=[],e.queued=!1,e.end=void 0,e.map=c,e.ap=d,e.of=O,e.toString=w,e}function S(e,t){for(var r=0;r<e.length;++r)e[r].listeners.push(t)}function T(e,t){var r=M();return r.fn=t,r.deps=e,r.depsMet=!1,r.depsChanged=e.length>0?[]:void 0,r.shouldUpdate=!1,S(e,r),r}function E(e){return!1===e.depsMet&&(e.depsMet=!0,p(e)),e}function P(e,t){t[t.indexOf(e)]=t[t.length-1],t.length--}function A(e){for(var t=0;t<e.deps.length;++t)P(e,e.deps[t].listeners);e.deps.length=0}function C(e){void 0!==e.deps&&A(e),void 0!==e.end&&A(e.end)}function R(e,t){return A(t.end),e.listeners.push(t.end),t.end.deps.push(e),t}function I(){return!0}function O(e){var t=T([],I),r=M();return r.end=t,r.fnArgs=[],t.listeners.push(r),arguments.length>0&&r(e),r}function L(e,t){var r,n,i,a,o=T([],I);for(i=[],a=[],r=0;r<t.length;++r)void 0!==t[r]&&(i.push(t[r]),void 0!==t[r].end&&a.push(t[r].end));return(n=T(i,e)).depsChanged=[],n.fnArgs=n.deps.concat([n,n.depsChanged]),n.end=o,o.listeners.push(n),S(a,o),o.deps=a,p(n),n}var D=(0,a.default)(2,function(e,t){return e=e(new N),L(function(t,r){var n=e["@@transducer/step"](void 0,t.val);return n&&!0===n["@@transducer/reduced"]?(r.end(!0),n["@@transducer/value"]):n},[t])});function N(){}N.prototype["@@transducer/init"]=function(){},N.prototype["@@transducer/result"]=function(){},N.prototype["@@transducer/step"]=function(e,t){return t},t.default={stream:O,combine:(0,a.default)(2,L),isStream:function(e){return o(e)&&"hasVal"in e},transduce:D,merge:h,scan:f,endsOn:R,map:(0,a.default)(2,u),on:(0,a.default)(2,function(e,t){return L(function(t){e(t.val)},[t])}),curryN:a.default,immediate:E}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e={};function t(t,r,n){return(e[t]||(e[t]=[])).push({fn:r,ctx:n}),this}function r(t,r){var n=e[t],i=[];if(n&&r)for(var a=0,o=n.length;a<o;a++)n[a].fn!==r&&n[a].fn._!==r&&i.push(n[a]);return i.length?e[t]=i:delete e[t],this}return{on:t,once:function(e,n,i){function a(){r(e,a),n.apply(i,arguments)}return a._=n,t(e,a,i)},emit:function(t){var r=[].slice.call(arguments,1),n=(e[t]||[]).slice(),i=0,a=n.length;for(;i<a;i++)n[i].fn.apply(n[i].ctx,r);return this},off:r}}},function(e,t,r){"use strict";var n=n||{};n.OutWindow=function(){this._windowSize=0},n.OutWindow.prototype.create=function(e){this._buffer&&this._windowSize===e||(this._buffer=[]),this._windowSize=e,this._pos=0,this._streamPos=0},n.OutWindow.prototype.flush=function(){var e=this._pos-this._streamPos;if(0!==e){for(;e--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},n.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},n.OutWindow.prototype.setStream=function(e){this.releaseStream(),this._stream=e},n.OutWindow.prototype.init=function(e){e||(this._streamPos=0,this._pos=0)},n.OutWindow.prototype.copyBlock=function(e,t){var r=this._pos-e-1;for(r<0&&(r+=this._windowSize);t--;)r>=this._windowSize&&(r=0),this._buffer[this._pos++]=this._buffer[r++],this._pos>=this._windowSize&&this.flush()},n.OutWindow.prototype.putByte=function(e){this._buffer[this._pos++]=e,this._pos>=this._windowSize&&this.flush()},n.OutWindow.prototype.getByte=function(e){var t=this._pos-e-1;return t<0&&(t+=this._windowSize),this._buffer[t]},n.RangeDecoder=function(){},n.RangeDecoder.prototype.setStream=function(e){this._stream=e},n.RangeDecoder.prototype.releaseStream=function(){this._stream=null},n.RangeDecoder.prototype.init=function(){var e=5;for(this._code=0,this._range=-1;e--;)this._code=this._code<<8|this._stream.readByte()},n.RangeDecoder.prototype.decodeDirectBits=function(e){for(var t,r=0,n=e;n--;)this._range>>>=1,t=this._code-this._range>>>31,this._code-=this._range&t-1,r=r<<1|1-t,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return r},n.RangeDecoder.prototype.decodeBit=function(e,t){var r=e[t],n=(this._range>>>11)*r;return(2147483648^this._code)<(2147483648^n)?(this._range=n,e[t]+=2048-r>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=n,this._code-=n,e[t]-=r>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},n.initBitModels=function(e,t){for(;t--;)e[t]=1024},n.BitTreeDecoder=function(e){this._models=[],this._numBitLevels=e},n.BitTreeDecoder.prototype.init=function(){n.initBitModels(this._models,1<<this._numBitLevels)},n.BitTreeDecoder.prototype.decode=function(e){for(var t=1,r=this._numBitLevels;r--;)t=t<<1|e.decodeBit(this._models,t);return t-(1<<this._numBitLevels)},n.BitTreeDecoder.prototype.reverseDecode=function(e){for(var t,r=1,n=0,i=0;i<this._numBitLevels;++i)r=r<<1|(t=e.decodeBit(this._models,r)),n|=t<<i;return n},n.reverseDecode2=function(e,t,r,n){for(var i,a=1,o=0,s=0;s<n;++s)a=a<<1|(i=r.decodeBit(e,t+a)),o|=i<<s;return o},n.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new n.BitTreeDecoder(8),this._numPosStates=0},n.LenDecoder.prototype.create=function(e){for(;this._numPosStates<e;++this._numPosStates)this._lowCoder[this._numPosStates]=new n.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new n.BitTreeDecoder(3)},n.LenDecoder.prototype.init=function(){var e=this._numPosStates;for(n.initBitModels(this._choice,2);e--;)this._lowCoder[e].init(),this._midCoder[e].init();this._highCoder.init()},n.LenDecoder.prototype.decode=function(e,t){return 0===e.decodeBit(this._choice,0)?this._lowCoder[t].decode(e):0===e.decodeBit(this._choice,1)?8+this._midCoder[t].decode(e):16+this._highCoder.decode(e)},n.Decoder2=function(){this._decoders=[]},n.Decoder2.prototype.init=function(){n.initBitModels(this._decoders,768)},n.Decoder2.prototype.decodeNormal=function(e){var t=1;do{t=t<<1|e.decodeBit(this._decoders,t)}while(t<256);return 255&t},n.Decoder2.prototype.decodeWithMatchByte=function(e,t){var r,n,i=1;do{if(r=t>>7&1,t<<=1,i=i<<1|(n=e.decodeBit(this._decoders,(1+r<<8)+i)),r!==n){for(;i<256;)i=i<<1|e.decodeBit(this._decoders,i);break}}while(i<256);return 255&i},n.LiteralDecoder=function(){},n.LiteralDecoder.prototype.create=function(e,t){var r;if(!this._coders||this._numPrevBits!==t||this._numPosBits!==e)for(this._numPosBits=e,this._posMask=(1<<e)-1,this._numPrevBits=t,this._coders=[],r=1<<this._numPrevBits+this._numPosBits;r--;)this._coders[r]=new n.Decoder2},n.LiteralDecoder.prototype.init=function(){for(var e=1<<this._numPrevBits+this._numPosBits;e--;)this._coders[e].init()},n.LiteralDecoder.prototype.getDecoder=function(e,t){return this._coders[((e&this._posMask)<<this._numPrevBits)+((255&t)>>>8-this._numPrevBits)]},n.Decoder=function(){this._outWindow=new n.OutWindow,this._rangeDecoder=new n.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new n.BitTreeDecoder(4),this._lenDecoder=new n.LenDecoder,this._repLenDecoder=new n.LenDecoder,this._literalDecoder=new n.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new n.BitTreeDecoder(6),this._posSlotDecoder[1]=new n.BitTreeDecoder(6),this._posSlotDecoder[2]=new n.BitTreeDecoder(6),this._posSlotDecoder[3]=new n.BitTreeDecoder(6)},n.Decoder.prototype.setDictionarySize=function(e){return!(e<0)&&(this._dictionarySize!==e&&(this._dictionarySize=e,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},n.Decoder.prototype.setLcLpPb=function(e,t,r){var n=1<<r;return!(e>8||t>4||r>4)&&(this._literalDecoder.create(t,e),this._lenDecoder.create(n),this._repLenDecoder.create(n),this._posStateMask=n-1,!0)},n.Decoder.prototype.init=function(){var e=4;for(this._outWindow.init(!1),n.initBitModels(this._isMatchDecoders,192),n.initBitModels(this._isRep0LongDecoders,192),n.initBitModels(this._isRepDecoders,12),n.initBitModels(this._isRepG0Decoders,12),n.initBitModels(this._isRepG1Decoders,12),n.initBitModels(this._isRepG2Decoders,12),n.initBitModels(this._posDecoders,114),this._literalDecoder.init();e--;)this._posSlotDecoder[e].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},n.Decoder.prototype.decode=function(e,t,r){var i,a,o,s,l,u,c=0,f=0,h=0,d=0,p=0,m=0,v=0;for(this._rangeDecoder.setStream(e),this._outWindow.setStream(t),this.init();r<0||m<r;)if(i=m&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(c<<4)+i))a=this._literalDecoder.getDecoder(m++,v),v=c>=7?a.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(f)):a.decodeNormal(this._rangeDecoder),this._outWindow.putByte(v),c=c<4?0:c-(c<10?3:6);else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,c))o=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,c)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(c<<4)+i)&&(c=c<7?9:11,o=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,c)?s=h:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,c)?s=d:(s=p,p=d),d=h),h=f,f=s),0===o&&(o=2+this._repLenDecoder.decode(this._rangeDecoder,i),c=c<7?8:11);else if(p=d,d=h,h=f,o=2+this._lenDecoder.decode(this._rangeDecoder,i),c=c<7?7:10,(l=this._posSlotDecoder[o<=5?o-2:3].decode(this._rangeDecoder))>=4){if(f=(2|1&l)<<(u=(l>>1)-1),l<14)f+=n.reverseDecode2(this._posDecoders,f-l-1,this._rangeDecoder,u);else if(f+=this._rangeDecoder.decodeDirectBits(u-4)<<4,(f+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(-1===f)break;return!1}}else f=l;if(f>=m||f>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(f,o),m+=o,v=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},n.Decoder.prototype.setDecoderProperties=function(e){var t,r,n,i,a;return!(e.size<5)&&(r=(t=e.readByte())%9,n=(t=~~(t/9))%5,i=~~(t/5),!!this.setLcLpPb(r,n,i)&&(a=e.readByte(),a|=e.readByte()<<8,a|=e.readByte()<<16,a+=16777216*e.readByte(),this.setDictionarySize(a)))},n.decompress=function(e,t,r,i){var a=new n.Decoder;if(!a.setDecoderProperties(e))throw"Incorrect stream properties";if(!a.decode(t,r,i))throw"Error in data stream";return!0},n.decompressFile=function(e,t){var r,i=new n.Decoder;if(!i.setDecoderProperties(e))throw"Incorrect stream properties";if(r=e.readByte(),r|=e.readByte()<<8,r|=e.readByte()<<16,r+=16777216*e.readByte(),e.readByte(),e.readByte(),e.readByte(),e.readByte(),!i.decode(e,t,r))throw"Error in data stream";return!0},e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(33),a=(n=i)&&n.__esModule?n:{default:n};var o,s=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,r){return t.apply(this,arguments)};case 3:return function(e,r,n){return t.apply(this,arguments)};case 4:return function(e,r,n,i){return t.apply(this,arguments)};case 5:return function(e,r,n,i,a){return t.apply(this,arguments)};case 6:return function(e,r,n,i,a,o){return t.apply(this,arguments)};case 7:return function(e,r,n,i,a,o,s){return t.apply(this,arguments)};case 8:return function(e,r,n,i,a,o,s,l){return t.apply(this,arguments)};case 9:return function(e,r,n,i,a,o,s,l,u){return t.apply(this,arguments)};case 10:return function(e,r,n,i,a,o,s,l,u,c){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},l=function(e){return null!=e&&"object"===(void 0===e?"undefined":(0,a.default)(e))&&!0===e["@@functional/placeholder"]},u=function(e){return function t(r){return 0===arguments.length||l(r)?t:e.apply(this,arguments)}},c=(o=function(e,t){return 1===e?u(t):s(e,function e(t,r,n){return function(){for(var i=[],a=0,o=t,u=0;u<r.length||a<arguments.length;){var c;u<r.length&&(!l(r[u])||a>=arguments.length)?c=r[u]:(c=arguments[a],a+=1),i[u]=c,l(c)||(o-=1),u+=1}return o<=0?n.apply(this,i):s(o,e(t,i,n))}}(e,[],t))},function e(t,r){switch(arguments.length){case 0:return e;case 1:return l(t)?e:u(function(e){return o(t,e)});default:return l(t)&&l(r)?e:l(t)?u(function(e){return o(e,r)}):l(r)?u(function(e){return o(t,e)}):o(t,r)}});t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(38)),i=o(r(312)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(263));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.default)(function e(t,r,i,o,s){var l=s.contentType,u=s.method,c=s.body,f=s.onReadyStateChange,h=s.withCredentials,d=s.responseURL;function p(t){if(r.length)return e(r[0],r.slice(1),i,o,{contentType:l,method:u,body:c});var n={status:t.status,err:t,message:t.message};if("json"===l)try{n.body=JSON.parse(t.response)}catch(e){}o(n)}if("img"===l){var m=new Image;m.crossOrigin="anonymous",m.addEventListener("load",function(e){i(m)}),m.addEventListener("error",p),m.src=t}else if("font"===l)a.load(t,function(e,t){if(e)return o(e);i(t)});else{var v=new XMLHttpRequest,g=u||"GET";v.withCredentials=h||"GET"!==g,v.open(g,t,!0),!c||c instanceof FormData||(v.setRequestHeader("Content-Type","application/json"),"string"!=typeof c&&(c=(0,n.default)(c))),"binary"===l&&(v.responseType="arraybuffer"),f&&(v.onreadystatechange=function(){f(v)}),v.onload=function(e){var t=v.response;v.status>=200&&v.status<400||0===v.status&&v.response?("json"===l&&(t=JSON.parse(t)),i(t),d&&v.responseURL&&d(v.responseURL)):p(v)},v.onerror=p,v.send(c)}});t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(6),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e){var t=(0,a.default)(e),r=t.reduce(function(t,r){return t.set(r,e[r]())},(0,o.Map)());return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,i=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4];return t.reduce(function(t,r){var n=t.get(r),u=e[r](n,i,t,a,s,l);if(!u)throw new Error("Reducer: "+r+" failed to return state");return(0,o.is)(n,u)?t:t.set(r,u)},n)}};var o=r(36)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,n.default)(e),o=(0,i.default)(a,void 0,r);return o.dispatch=t(o),o};var n=a(r(647)),i=a(r(120));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(33),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e){if(null!==e&&"object"===(void 0===e?"undefined":(0,a.default)(e)))return"function"==typeof e.then}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withFilter=function(e){var t=l(e);return{toJSON:function(e){return t.write(e)},fromJSON:f}},t.toJSON=function(e){return c.write(e)},t.fromJSON=f;var n=s(r(859)),i=s(r(36)),a=s(r(404)),o=s(r(323));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=n.default.map([i.default.Map,n.default.makeWriteHandler({tag:function(){return"iM"},rep:function(t){var r=0,n=new Array(2*t.size);return e&&(t=t.filter(e)),t.forEach(function(e,t){n[r++]=t,n[r++]=e}),n}}),i.default.List,n.default.makeWriteHandler({tag:function(){return"iL"},rep:function(t){return e&&(t=t.filter(e)),t.toArray()}}),Function,n.default.makeWriteHandler({tag:function(){return"_"},rep:function(){return null}}),Float32Array,n.default.makeWriteHandler({tag:function(){return"f32"},rep:function(e){for(var t="",r=new Uint8Array(e.buffer),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return(0,o.default)(t)}})]);return n.default.writer("json",{handlers:t})}var u=n.default.reader("json",{mapBuilder:{init:function(){return{}},add:function(e,t,r){return e[t]=r,e},finalize:function(e){return e}},handlers:{iM:function(e){for(var t={},r=0;r<e.length;r+=2)t[e[r]]=e[r+1];return new i.default.Map(t)},iL:function(e){return i.default.List(e)},f32:function(e){for(var t=(0,a.default)(e),r=t.length,n=new Uint8Array(r),i=0;i<r;i++)n[i]=t.charCodeAt(i);return new Float32Array(n.buffer)}}}),c=l(!1);function f(e){return u.read(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(2));t.lzmaDecompressor=function(e,t,r,a){for(var s=-1,l=c.length,d=0;d<l;d++)if(!c[d]){s=d;break}if(u.length>0||"undefined"!=typeof Worker&&Worker&&l>=h&&-1===s)u.push({buffer:e,meta:t});else if("undefined"!=typeof Worker&&Worker&&"safari"!==i.default.name){var p=new Worker(URL.createObjectURL(f)),m=-1===s?c.length:s;p.onmessage=function(e){"SUCCESS"===e.data.type?(r(e.data.buffer,e.data.meta),function(e){if(u.length>0){var t=u.shift();t.meta.idx=e,c[e].postMessage(t)}else c[e].postMessage("CLOSE"),delete c[e]}(e.data.meta.idx)):a(e.data.error,e.data.meta)},p.postMessage({buffer:e,meta:(0,n.default)({},t,{idx:m})}),c[m]=p}else{var v={data:new Uint8Array(e),offset:0,readByte:function(){return this.data[this.offset++]}},g={data:[],offset:0,writeByte:function(e){this.data[this.offset++]=e}};try{o.decompressFile(v,g);var y=new Uint8Array(g.data);r(y.buffer,t)}catch(e){a(e)}}};var i=a(r(31));function a(e){return e&&e.__esModule?e:{default:e}}var o=r(644),s='\n//From Repository: https://github.com/jcmellado/js-lzma\n/*\nCopyright (c) 2011 Juan Mellado\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\n/*\nReferences:\n- "LZMA SDK" by Igor Pavlov\n  http://www.7-zip.org/sdk.html\n*/\n\nvar LZMA = LZMA || {};\n\nLZMA.OutWindow = function(){\n  this._windowSize = 0;\n};\n\nLZMA.OutWindow.prototype.create = function(windowSize){\n  if ( (!this._buffer) || (this._windowSize !== windowSize) ){\n    this._buffer = [];\n  }\n  this._windowSize = windowSize;\n  this._pos = 0;\n  this._streamPos = 0;\n};\n\nLZMA.OutWindow.prototype.flush = function(){\n  var size = this._pos - this._streamPos;\n  if (size !== 0){\n    while(size --){\n      this._stream.writeByte(this._buffer[this._streamPos ++]);\n    }\n    if (this._pos >= this._windowSize){\n      this._pos = 0;\n    }\n    this._streamPos = this._pos;\n  }\n};\n\nLZMA.OutWindow.prototype.releaseStream = function(){\n  this.flush();\n  this._stream = null;\n};\n\nLZMA.OutWindow.prototype.setStream = function(stream){\n  this.releaseStream();\n  this._stream = stream;\n};\n\nLZMA.OutWindow.prototype.init = function(solid){\n  if (!solid){\n    this._streamPos = 0;\n    this._pos = 0;\n  }\n};\n\nLZMA.OutWindow.prototype.copyBlock = function(distance, len){\n  var pos = this._pos - distance - 1;\n  if (pos < 0){\n    pos += this._windowSize;\n  }\n  while(len --){\n    if (pos >= this._windowSize){\n      pos = 0;\n    }\n    this._buffer[this._pos ++] = this._buffer[pos ++];\n    if (this._pos >= this._windowSize){\n      this.flush();\n    }\n  }\n};\n\nLZMA.OutWindow.prototype.putByte = function(b){\n  this._buffer[this._pos ++] = b;\n  if (this._pos >= this._windowSize){\n    this.flush();\n  }\n};\n\nLZMA.OutWindow.prototype.getByte = function(distance){\n  var pos = this._pos - distance - 1;\n  if (pos < 0){\n    pos += this._windowSize;\n  }\n  return this._buffer[pos];\n};\n\nLZMA.RangeDecoder = function(){\n};\n\nLZMA.RangeDecoder.prototype.setStream = function(stream){\n  this._stream = stream;\n};\n\nLZMA.RangeDecoder.prototype.releaseStream = function(){\n  this._stream = null;\n};\n\nLZMA.RangeDecoder.prototype.init = function(){\n  var i = 5;\n\n  this._code = 0;\n  this._range = -1;\n\n  while(i --){\n    this._code = (this._code << 8) | this._stream.readByte();\n  }\n};\n\nLZMA.RangeDecoder.prototype.decodeDirectBits = function(numTotalBits){\n  var result = 0, i = numTotalBits, t;\n\n  while(i --){\n    this._range >>>= 1;\n    t = (this._code - this._range) >>> 31;\n    this._code -= this._range & (t - 1);\n    result = (result << 1) | (1 - t);\n\n    if ( (this._range & 0xff000000) === 0){\n      this._code = (this._code << 8) | this._stream.readByte();\n      this._range <<= 8;\n    }\n  }\n\n  return result;\n};\n\nLZMA.RangeDecoder.prototype.decodeBit = function(probs, index){\n  var prob = probs[index],\n      newBound = (this._range >>> 11) * prob;\n\n  if ( (this._code ^ 0x80000000) < (newBound ^ 0x80000000) ){\n    this._range = newBound;\n    probs[index] += (2048 - prob) >>> 5;\n    if ( (this._range & 0xff000000) === 0){\n      this._code = (this._code << 8) | this._stream.readByte();\n      this._range <<= 8;\n    }\n    return 0;\n  }\n\n  this._range -= newBound;\n  this._code -= newBound;\n  probs[index] -= prob >>> 5;\n  if ( (this._range & 0xff000000) === 0){\n    this._code = (this._code << 8) | this._stream.readByte();\n    this._range <<= 8;\n  }\n  return 1;\n};\n\nLZMA.initBitModels = function(probs, len){\n  while(len --){\n    probs[len] = 1024;\n  }\n};\n\nLZMA.BitTreeDecoder = function(numBitLevels){\n  this._models = [];\n  this._numBitLevels = numBitLevels;\n};\n\nLZMA.BitTreeDecoder.prototype.init = function(){\n  LZMA.initBitModels(this._models, 1 << this._numBitLevels);\n};\n\nLZMA.BitTreeDecoder.prototype.decode = function(rangeDecoder){\n  var m = 1, i = this._numBitLevels;\n\n  while(i --){\n    m = (m << 1) | rangeDecoder.decodeBit(this._models, m);\n  }\n  return m - (1 << this._numBitLevels);\n};\n\nLZMA.BitTreeDecoder.prototype.reverseDecode = function(rangeDecoder){\n  var m = 1, symbol = 0, i = 0, bit;\n\n  for (; i < this._numBitLevels; ++ i){\n    bit = rangeDecoder.decodeBit(this._models, m);\n    m = (m << 1) | bit;\n    symbol |= bit << i;\n  }\n  return symbol;\n};\n\nLZMA.reverseDecode2 = function(models, startIndex, rangeDecoder, numBitLevels){\n  var m = 1, symbol = 0, i = 0, bit;\n\n  for (; i < numBitLevels; ++ i){\n    bit = rangeDecoder.decodeBit(models, startIndex + m);\n    m = (m << 1) | bit;\n    symbol |= bit << i;\n  }\n  return symbol;\n};\n\nLZMA.LenDecoder = function(){\n  this._choice = [];\n  this._lowCoder = [];\n  this._midCoder = [];\n  this._highCoder = new LZMA.BitTreeDecoder(8);\n  this._numPosStates = 0;\n};\n\nLZMA.LenDecoder.prototype.create = function(numPosStates){\n  for (; this._numPosStates < numPosStates; ++ this._numPosStates){\n    this._lowCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);\n    this._midCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);\n  }\n};\n\nLZMA.LenDecoder.prototype.init = function(){\n  var i = this._numPosStates;\n  LZMA.initBitModels(this._choice, 2);\n  while(i --){\n    this._lowCoder[i].init();\n    this._midCoder[i].init();\n  }\n  this._highCoder.init();\n};\n\nLZMA.LenDecoder.prototype.decode = function(rangeDecoder, posState){\n  if (rangeDecoder.decodeBit(this._choice, 0) === 0){\n    return this._lowCoder[posState].decode(rangeDecoder);\n  }\n  if (rangeDecoder.decodeBit(this._choice, 1) === 0){\n    return 8 + this._midCoder[posState].decode(rangeDecoder);\n  }\n  return 16 + this._highCoder.decode(rangeDecoder);\n};\n\nLZMA.Decoder2 = function(){\n  this._decoders = [];\n};\n\nLZMA.Decoder2.prototype.init = function(){\n  LZMA.initBitModels(this._decoders, 0x300);\n};\n\nLZMA.Decoder2.prototype.decodeNormal = function(rangeDecoder){\n  var symbol = 1;\n\n  do{\n    symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);\n  }while(symbol < 0x100);\n\n  return symbol & 0xff;\n};\n\nLZMA.Decoder2.prototype.decodeWithMatchByte = function(rangeDecoder, matchByte){\n  var symbol = 1, matchBit, bit;\n\n  do{\n    matchBit = (matchByte >> 7) & 1;\n    matchByte <<= 1;\n    bit = rangeDecoder.decodeBit(this._decoders, ( (1 + matchBit) << 8) + symbol);\n    symbol = (symbol << 1) | bit;\n    if (matchBit !== bit){\n      while(symbol < 0x100){\n        symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);\n      }\n      break;\n    }\n  }while(symbol < 0x100);\n\n  return symbol & 0xff;\n};\n\nLZMA.LiteralDecoder = function(){\n};\n\nLZMA.LiteralDecoder.prototype.create = function(numPosBits, numPrevBits){\n  var i;\n\n  if (this._coders\n    && (this._numPrevBits === numPrevBits)\n    && (this._numPosBits === numPosBits) ){\n    return;\n  }\n  this._numPosBits = numPosBits;\n  this._posMask = (1 << numPosBits) - 1;\n  this._numPrevBits = numPrevBits;\n\n  this._coders = [];\n\n  i = 1 << (this._numPrevBits + this._numPosBits);\n  while(i --){\n    this._coders[i] = new LZMA.Decoder2();\n  }\n};\n\nLZMA.LiteralDecoder.prototype.init = function(){\n  var i = 1 << (this._numPrevBits + this._numPosBits);\n  while(i --){\n    this._coders[i].init();\n  }\n};\n\nLZMA.LiteralDecoder.prototype.getDecoder = function(pos, prevByte){\n  return this._coders[( (pos & this._posMask) << this._numPrevBits)\n    + ( (prevByte & 0xff) >>> (8 - this._numPrevBits) )];\n};\n\nLZMA.Decoder = function(){\n  this._outWindow = new LZMA.OutWindow();\n  this._rangeDecoder = new LZMA.RangeDecoder();\n  this._isMatchDecoders = [];\n  this._isRepDecoders = [];\n  this._isRepG0Decoders = [];\n  this._isRepG1Decoders = [];\n  this._isRepG2Decoders = [];\n  this._isRep0LongDecoders = [];\n  this._posSlotDecoder = [];\n  this._posDecoders = [];\n  this._posAlignDecoder = new LZMA.BitTreeDecoder(4);\n  this._lenDecoder = new LZMA.LenDecoder();\n  this._repLenDecoder = new LZMA.LenDecoder();\n  this._literalDecoder = new LZMA.LiteralDecoder();\n  this._dictionarySize = -1;\n  this._dictionarySizeCheck = -1;\n\n  this._posSlotDecoder[0] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[1] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[2] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[3] = new LZMA.BitTreeDecoder(6);\n};\n\nLZMA.Decoder.prototype.setDictionarySize = function(dictionarySize){\n  if (dictionarySize < 0){\n    return false;\n  }\n  if (this._dictionarySize !== dictionarySize){\n    this._dictionarySize = dictionarySize;\n    this._dictionarySizeCheck = Math.max(this._dictionarySize, 1);\n    this._outWindow.create( Math.max(this._dictionarySizeCheck, 4096) );\n  }\n  return true;\n};\n\nLZMA.Decoder.prototype.setLcLpPb = function(lc, lp, pb){\n  var numPosStates = 1 << pb;\n\n  if (lc > 8 || lp > 4 || pb > 4){\n    return false;\n  }\n\n  this._literalDecoder.create(lp, lc);\n\n  this._lenDecoder.create(numPosStates);\n  this._repLenDecoder.create(numPosStates);\n  this._posStateMask = numPosStates - 1;\n\n  return true;\n};\n\nLZMA.Decoder.prototype.init = function(){\n  var i = 4;\n\n  this._outWindow.init(false);\n\n  LZMA.initBitModels(this._isMatchDecoders, 192);\n  LZMA.initBitModels(this._isRep0LongDecoders, 192);\n  LZMA.initBitModels(this._isRepDecoders, 12);\n  LZMA.initBitModels(this._isRepG0Decoders, 12);\n  LZMA.initBitModels(this._isRepG1Decoders, 12);\n  LZMA.initBitModels(this._isRepG2Decoders, 12);\n  LZMA.initBitModels(this._posDecoders, 114);\n\n  this._literalDecoder.init();\n\n  while(i --){\n    this._posSlotDecoder[i].init();\n  }\n\n  this._lenDecoder.init();\n  this._repLenDecoder.init();\n  this._posAlignDecoder.init();\n  this._rangeDecoder.init();\n};\n\nLZMA.Decoder.prototype.decode = function(inStream, outStream, outSize){\n  var state = 0, rep0 = 0, rep1 = 0, rep2 = 0, rep3 = 0, nowPos64 = 0, prevByte = 0,\n      posState, decoder2, len, distance, posSlot, numDirectBits;\n\n  this._rangeDecoder.setStream(inStream);\n  this._outWindow.setStream(outStream);\n\n  this.init();\n\n  while(outSize < 0 || nowPos64 < outSize){\n    posState = nowPos64 & this._posStateMask;\n\n    if (this._rangeDecoder.decodeBit(this._isMatchDecoders, (state << 4) + posState) === 0){\n      decoder2 = this._literalDecoder.getDecoder(nowPos64 ++, prevByte);\n\n      if (state >= 7){\n        prevByte = decoder2.decodeWithMatchByte(this._rangeDecoder, this._outWindow.getByte(rep0) );\n      }else{\n        prevByte = decoder2.decodeNormal(this._rangeDecoder);\n      }\n      this._outWindow.putByte(prevByte);\n\n      state = state < 4? 0: state - (state < 10? 3: 6);\n\n    }else{\n\n      if (this._rangeDecoder.decodeBit(this._isRepDecoders, state) === 1){\n        len = 0;\n        if (this._rangeDecoder.decodeBit(this._isRepG0Decoders, state) === 0){\n          if (this._rangeDecoder.decodeBit(this._isRep0LongDecoders, (state << 4) + posState) === 0){\n            state = state < 7? 9: 11;\n            len = 1;\n          }\n        }else{\n          if (this._rangeDecoder.decodeBit(this._isRepG1Decoders, state) === 0){\n            distance = rep1;\n          }else{\n            if (this._rangeDecoder.decodeBit(this._isRepG2Decoders, state) === 0){\n              distance = rep2;\n            }else{\n              distance = rep3;\n              rep3 = rep2;\n            }\n            rep2 = rep1;\n          }\n          rep1 = rep0;\n          rep0 = distance;\n        }\n        if (len === 0){\n          len = 2 + this._repLenDecoder.decode(this._rangeDecoder, posState);\n          state = state < 7? 8: 11;\n        }\n      }else{\n        rep3 = rep2;\n        rep2 = rep1;\n        rep1 = rep0;\n\n        len = 2 + this._lenDecoder.decode(this._rangeDecoder, posState);\n        state = state < 7? 7: 10;\n\n        posSlot = this._posSlotDecoder[len <= 5? len - 2: 3].decode(this._rangeDecoder);\n        if (posSlot >= 4){\n\n          numDirectBits = (posSlot >> 1) - 1;\n          rep0 = (2 | (posSlot & 1) ) << numDirectBits;\n\n          if (posSlot < 14){\n            rep0 += LZMA.reverseDecode2(this._posDecoders,\n                rep0 - posSlot - 1, this._rangeDecoder, numDirectBits);\n          }else{\n            rep0 += this._rangeDecoder.decodeDirectBits(numDirectBits - 4) << 4;\n            rep0 += this._posAlignDecoder.reverseDecode(this._rangeDecoder);\n            if (rep0 < 0){\n              if (rep0 === -1){\n                break;\n              }\n              return false;\n            }\n          }\n        }else{\n          rep0 = posSlot;\n        }\n      }\n\n      if (rep0 >= nowPos64 || rep0 >= this._dictionarySizeCheck){\n        return false;\n      }\n\n      this._outWindow.copyBlock(rep0, len);\n      nowPos64 += len;\n      prevByte = this._outWindow.getByte(0);\n    }\n  }\n\n  this._outWindow.flush();\n  this._outWindow.releaseStream();\n  this._rangeDecoder.releaseStream();\n\n  return true;\n};\n\nLZMA.Decoder.prototype.setDecoderProperties = function(properties){\n  var value, lc, lp, pb, dictionarySize;\n\n  if (properties.size < 5){\n    return false;\n  }\n\n  value = properties.readByte();\n  lc = value % 9;\n  value = ~~(value / 9);\n  lp = value % 5;\n  pb = ~~(value / 5);\n\n  if ( !this.setLcLpPb(lc, lp, pb) ){\n    return false;\n  }\n\n  dictionarySize = properties.readByte();\n  dictionarySize |= properties.readByte() << 8;\n  dictionarySize |= properties.readByte() << 16;\n  dictionarySize += properties.readByte() * 16777216;\n\n  return this.setDictionarySize(dictionarySize);\n};\n\nLZMA.decompress = function(properties, inStream, outStream, outSize){\n  var decoder = new LZMA.Decoder();\n\n  if ( !decoder.setDecoderProperties(properties) ){\n    throw "Incorrect stream properties";\n  }\n\n  if ( !decoder.decode(inStream, outStream, outSize) ){\n    throw "Error in data stream";\n  }\n\n  return true;\n};\n\nLZMA.decompressFile = function(inStream, outStream){\n  var decoder = new LZMA.Decoder(), outSize;\n\n  if ( !decoder.setDecoderProperties(inStream) ){\n    throw "Incorrect stream properties";\n  }\n\n  outSize = inStream.readByte();\n  outSize |= inStream.readByte() << 8;\n  outSize |= inStream.readByte() << 16;\n  outSize += inStream.readByte() * 16777216;\n\n  inStream.readByte();\n  inStream.readByte();\n  inStream.readByte();\n  inStream.readByte();\n\n  if ( !decoder.decode(inStream, outStream, outSize) ){\n    throw "Error in data stream";\n  }\n\n  return true;\n};\n\n//export default LZMA;\n\n\n',l="\nfunction decompressBuffer(buffer){\n  var inStream = {\n    data: new Uint8Array(buffer),\n    offset: 0,\n    readByte: function() {\n      return this.data[this.offset++]\n    },\n  }\n  var outStream = {\n    data:[],\n    offset: 0,\n    writeByte: function(val) {\n      this.data[this.offset++] = val\n    },\n  }\n  LZMA.decompressFile(inStream, outStream);\n  var uintGeomArray = new Uint8Array(outStream.data);\n  return uintGeomArray.buffer;\n}\n\nself.onmessage = function( event ) {\n  if(event.data==='CLOSE') {\n    self.close();\n    return;\n  }\n\n  try {\n    var decompBuffer = decompressBuffer(event.data.buffer);\n    self.postMessage({type:'SUCCESS', buffer:decompBuffer, meta:event.data.meta});\n  } catch(e) {\n    self.postMessage({type:'FAILURE', error:e, meta:event.data.meta});\n  }\n\n};\n",u=[],c=[],f=void 0;try{f=new Blob([s,l],{type:"application/javascript"})}catch(e){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(f=new BlobBuilder).append(s),f.append(l),f=f.getBlob()}var h=Math.max(window.navigator.hardwareConcurrency-1,1)},function(e,t,r){e.exports={default:r(388),__esModule:!0}},function(e,t,r){e.exports={default:r(390),__esModule:!0}},function(e,t,r){e.exports={default:r(664),__esModule:!0}},function(e,t,r){e.exports={default:r(674),__esModule:!0}},function(e,t,r){e.exports={default:r(396),__esModule:!0}},function(e,t,r){e.exports={default:r(677),__esModule:!0}},function(e,t,r){e.exports={default:r(397),__esModule:!0}},function(e,t,r){e.exports={default:r(398),__esModule:!0}},function(e,t,r){e.exports={default:r(678),__esModule:!0}},function(e,t,r){"use strict";t.byteLength=function(e){return 3*e.length/4-u(e)},t.toByteArray=function(e){var t,r,n,o,s,l=e.length;o=u(e),s=new a(3*l/4-o),r=o>0?l-4:l;var c=0;for(t=0;t<r;t+=4)n=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],s[c++]=n>>16&255,s[c++]=n>>8&255,s[c++]=255&n;2===o?(n=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,s[c++]=255&n):1===o&&(n=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,s[c++]=n>>8&255,s[c++]=255&n);return s},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a="",o=[],s=0,l=r-i;s<l;s+=16383)o.push(c(e,s,s+16383>l?l:s+16383));1===i?(t=e[r-1],a+=n[t>>2],a+=n[t<<4&63],a+="=="):2===i&&(t=(e[r-2]<<8)+e[r-1],a+=n[t>>10],a+=n[t>>4&63],a+=n[t<<2&63],a+="=");return o.push(a),o.join("")};for(var n=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function c(e,t,r){for(var i,a,o=[],s=t;s<r;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t,r){var n=r(11),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,r){r(156),r(95),r(96),r(703),r(725),r(724),r(723),e.exports=r(11).Map},function(e,t,r){r(704),e.exports=r(11).Math.log10},function(e,t,r){r(705),e.exports=r(11).Math.log2},function(e,t,r){r(706),e.exports=r(11).Math.sign},function(e,t,r){r(707),e.exports=r(11).Math.trunc},function(e,t,r){r(708),e.exports=Math.pow(2,-52)},function(e,t,r){r(709),e.exports=r(11).Number.isInteger},function(e,t,r){r(710),e.exports=r(11).Number.isNaN},function(e,t,r){r(711),e.exports=9007199254740991},function(e,t,r){r(714);var n=r(11).Object;e.exports=function(e,t){return n.defineProperties(e,t)}},function(e,t,r){r(716),e.exports=r(11).Object.freeze},function(e,t,r){r(719),e.exports=r(11).Object.preventExtensions},function(e,t,r){r(726),e.exports=r(11).Object.values},function(e,t,r){r(156),r(95),r(96),r(721),r(727),r(728),e.exports=r(11).Promise},function(e,t,r){r(733),e.exports=r(11).setImmediate},function(e,t,r){r(156),r(96),r(722),r(732),r(731),e.exports=r(11).WeakMap},function(e,t){e.exports=function(){}},function(e,t,r){var n=r(91);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t,r){var n=r(75),i=r(153),a=r(698);e.exports=function(e){return function(t,r,o){var s,l=n(t),u=i(l.length),c=a(o,u);if(e&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}}},function(e,t,r){var n=r(27),i=r(328),a=r(28)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var n=r(682);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){"use strict";var n=r(53).f,i=r(151),a=r(152),o=r(60),s=r(148),l=r(91),u=r(212),c=r(331),f=r(340),h=r(52),d=r(80).fastKey,p=r(155),m=h?"_s":"size",v=function(e,t){var r,n=d(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,u){var c=e(function(e,n){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=n&&l(n,r,e[u],e)});return a(c.prototype,{clear:function(){for(var e=p(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=p(this,t),n=v(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[m]--}return!!n},forEach:function(e){p(this,t);for(var r,n=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(p(this,t),e)}}),h&&n(c.prototype,"size",{get:function(){return p(this,t)[m]}}),c},def:function(e,t,r){var n,i,a=v(e,t);return a?a.v=r:(e._l=a={i:i=d(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[m]++,"F"!==i&&(e._i[i]=a)),e},getEntry:v,setStrong:function(e,t,r){u(e,t,function(e,r){this._t=p(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))},r?"entries":"values",!r,!0),f(t)}}},function(e,t,r){var n=r(149),i=r(680);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,r){"use strict";var n=r(152),i=r(80).getWeak,a=r(48),o=r(27),s=r(148),l=r(91),u=r(207),c=r(66),f=r(155),h=u(5),d=u(6),p=0,m=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},g=function(e,t){return h(e.a,function(e){return e[0]===t})};v.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var r=g(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,a){var u=e(function(e,n){s(e,u,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=n&&l(n,r,e[a],e)});return n(u.prototype,{delete:function(e){if(!o(e))return!1;var r=i(e);return!0===r?m(f(this,t)).delete(e):r&&c(r,this._i)&&delete r[this._i]},has:function(e){if(!o(e))return!1;var r=i(e);return!0===r?m(f(this,t)).has(e):r&&c(r,this._i)}}),u},def:function(e,t,r){var n=i(a(t),!0);return!0===n?m(e).set(t,r):n[e._i]=r,e},ufstore:m}},function(e,t,r){"use strict";var n=r(53),i=r(125);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){var n=r(93),i=r(214),a=r(124);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var o,s=r(e),l=a.f,u=0;s.length>u;)l.call(e,o=s[u++])&&t.push(o);return t}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(27),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},function(e,t,r){"use strict";var n=r(151),i=r(125),a=r(126),o={};r(70)(o,r(28)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)}),a(e,t+" Iterator")}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,r){var n=r(34),i=r(218).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,l="process"==r(123)(o);e.exports=function(){var e,t,r,u=function(){var n,i;for(l&&(n=o.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(l)r=function(){o.nextTick(u)};else if(a){var c=!0,f=document.createTextNode("");new a(u).observe(f,{characterData:!0}),r=function(){f.data=c=!c}}else if(s&&s.resolve){var h=s.resolve();r=function(){h.then(u)}}else r=function(){i.call(n,u)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){var n=r(75),i=r(334).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return o.slice()}}(e):i(n(e))}},function(e,t,r){var n=r(93),i=r(75),a=r(124).f;e.exports=function(e){return function(t){for(var r,o=i(t),s=n(o),l=s.length,u=0,c=[];l>u;)a.call(o,r=s[u++])&&c.push(e?[r,o[r]]:o[r]);return c}}},function(e,t,r){var n=r(27),i=r(48),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(60)(Function.call,r(257).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},function(e,t,r){var n=r(219),i=r(208);e.exports=function(e){return function(t,r){var a,o,s=String(i(t)),l=n(r),u=s.length;return l<0||l>=u?e?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):a:e?s.slice(l,l+2):o-56320+(a-55296<<10)+65536}}},function(e,t,r){var n=r(219),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):a(e,t)}},function(e,t,r){var n=r(48),i=r(223);e.exports=r(11).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){var n=r(149),i=r(28)("iterator"),a=r(92);e.exports=r(11).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||a.hasOwnProperty(n(t))}},function(e,t,r){"use strict";var n=r(60),i=r(12),a=r(94),o=r(329),s=r(327),l=r(153),u=r(687),c=r(223);i(i.S+i.F*!r(330)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,f,h=a(e),d="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,y=c(h);if(v&&(m=n(m,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(r=new d(t=l(h.length));t>g;g++)u(r,g,v?m(h[g],g):h[g]);else for(f=y.call(h),r=new d;!(i=f.next()).done;g++)u(r,g,v?o(f,m,[i.value,g],!0):i.value);return r.length=g,r}})},function(e,t,r){"use strict";var n=r(679),i=r(331),a=r(92),o=r(75);e.exports=r(212)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t,r){"use strict";var n=r(684),i=r(155);e.exports=r(324)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){var n=r(12);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var n=r(12);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(12);n(n.S,"Math",{sign:r(692)})},function(e,t,r){var n=r(12);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(12);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(12);n(n.S,"Number",{isInteger:r(690)})},function(e,t,r){var n=r(12);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(12);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(12);n(n.S+n.F,"Object",{assign:r(332)})},function(e,t,r){var n=r(12);n(n.S,"Object",{create:r(151)})},function(e,t,r){var n=r(12);n(n.S+n.F*!r(52),"Object",{defineProperties:r(333)})},function(e,t,r){var n=r(12);n(n.S+n.F*!r(52),"Object",{defineProperty:r(53).f})},function(e,t,r){var n=r(27),i=r(80).onFreeze;r(138)("freeze",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(94),i=r(259);r(138)("getPrototypeOf",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(94),i=r(93);r(138)("keys",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(27),i=r(80).onFreeze;r(138)("preventExtensions",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(12);n(n.S,"Object",{setPrototypeOf:r(696).set})},function(e,t,r){"use strict";var n,i,a,o,s=r(150),l=r(34),u=r(60),c=r(149),f=r(12),h=r(27),d=r(122),p=r(148),m=r(91),v=r(341),g=r(218).set,y=r(693)(),x=r(213),b=r(336),w=r(337),_=l.TypeError,M=l.process,S=l.Promise,T="process"==c(M),E=function(){},P=i=x.f,A=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[r(28)("species")]=function(e){e(E,E)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(e){}}(),C=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},R=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,i=1==e._s,a=0,o=function(t){var r,a,o=i?t.ok:t.fail,s=t.resolve,l=t.reject,u=t.domain;try{o?(i||(2==e._h&&L(e),e._h=1),!0===o?r=n:(u&&u.enter(),r=o(n),u&&u.exit()),r===t.promise?l(_("Promise-chain cycle")):(a=C(r))?a.call(r,s,l):s(r)):l(n)}catch(e){l(e)}};r.length>a;)o(r[a++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){g.call(l,function(){var t,r,n,i=e._v,a=O(e);if(a&&(t=b(function(){T?M.emit("unhandledRejection",i,e):(r=l.onunhandledrejection)?r({promise:e,reason:i}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=T||O(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},O=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if((t=r[n++]).fail||!O(t.promise))return!1;return!0},L=function(e){g.call(l,function(){var t;T?M.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},N=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw _("Promise can't be resolved itself");(t=C(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,u(N,n,1),u(D,n,1))}catch(e){D.call(n,e)}}):(r._v=e,r._s=1,R(r,!1))}catch(e){D.call({_w:r,_d:!1},e)}}};A||(S=function(e){p(this,S,"Promise","_h"),d(e),n.call(this);try{e(u(N,this,1),u(D,this,1))}catch(e){D.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(152)(S.prototype,{then:function(e,t){var r=P(v(this,S));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=T?M.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&R(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=u(N,e,1),this.reject=u(D,e,1)},x.f=P=function(e){return e===S||e===o?new a(e):i(e)}),f(f.G+f.W+f.F*!A,{Promise:S}),r(126)(S,"Promise"),r(340)("Promise"),o=r(11).Promise,f(f.S+f.F*!A,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!A),"Promise",{resolve:function(e){return w(s&&this===o?S:this,e)}}),f(f.S+f.F*!(A&&r(330)(function(e){S.all(e).catch(E)})),"Promise",{all:function(e){var t=this,r=P(t),n=r.resolve,i=r.reject,a=b(function(){var r=[],a=0,o=1;m(e,!1,function(e){var s=a++,l=!1;r.push(void 0),o++,t.resolve(e).then(function(e){l||(l=!0,r[s]=e,--o||n(r))},i)}),--o||n(r)});return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=P(t),n=r.reject,i=b(function(){m(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(e,t,r){"use strict";var n,i=r(207)(0),a=r(215),o=r(80),s=r(332),l=r(686),u=r(27),c=r(69),f=r(155),h=o.getWeak,d=Object.isExtensible,p=l.ufstore,m={},v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(e){if(u(e)){var t=h(e);return!0===t?p(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(f(this,"WeakMap"),e,t)}},y=e.exports=r(324)("WeakMap",v,g,l,!0,!0);c(function(){return 7!=(new y).set((Object.freeze||Object)(m),7).get(m)})&&(s((n=l.getConstructor(v,"WeakMap")).prototype,g),o.NEED=!0,i(["delete","has","get","set"],function(e){var t=y.prototype,r=t[e];a(t,e,function(t,i){if(u(t)&&!d(t)){this._f||(this._f=new n);var a=this._f[e](t,i);return"set"==e?this:a}return r.call(this,t,i)})}))},function(e,t,r){r(338)("Map")},function(e,t,r){r(339)("Map")},function(e,t,r){var n=r(12);n(n.P+n.R,"Map",{toJSON:r(685)("Map")})},function(e,t,r){var n=r(12),i=r(695)(!1);n(n.S,"Object",{values:function(e){return i(e)}})},function(e,t,r){"use strict";var n=r(12),i=r(11),a=r(34),o=r(341),s=r(337);n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,i.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(12),i=r(213),a=r(336);n(n.S,"Promise",{try:function(e){var t=i.f(this),r=a(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){r(221)("asyncIterator")},function(e,t,r){r(221)("observable")},function(e,t,r){r(338)("WeakMap")},function(e,t,r){r(339)("WeakMap")},function(e,t,r){var n=r(12),i=r(218);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){var n=r(17),i=r(348),a=r(20)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var n=r(734);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){"use strict";var n=r(81),i=r(17),a=r(347),o=[].slice,s={};e.exports=Function.bind||function(e){var t=n(this),r=o.call(arguments,1),l=function(){var n=r.concat(o.call(arguments));return this instanceof l?function(e,t,r){if(!(t in s)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";s[t]=Function("F,a","return new F("+n.join(",")+")")}return s[t](e,r)}(t,n.length,n):a(t,n,e)};return i(t.prototype)&&(l.prototype=t.prototype),l}},function(e,t,r){var n=r(102),i=r(161),a=r(133);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var o,s=r(e),l=a.f,u=0;s.length>u;)l.call(e,o=s[u++])&&t.push(o);return t}},function(e,t,r){"use strict";var n=r(15);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){var n=r(17),i=r(235).set;e.exports=function(e,t,r){var a,o=t.constructor;return o!==r&&"function"==typeof o&&(a=o.prototype)!==r.prototype&&n(a)&&i&&i(e,a),e}},function(e,t,r){"use strict";var n=r(130),i=r(83),a=r(104),o={};r(54)(o,r(20)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)}),a(e,t+" Iterator")}},function(e,t,r){var n=r(234),i=Math.pow,a=i(2,-52),o=i(2,-23),s=i(2,127)*(2-o),l=i(2,-126);e.exports=Math.fround||function(e){var t,r,i=Math.abs(e),u=n(e);return i<l?u*(i/l/o+1/a-1/a)*l*o:(r=(t=(1+o/a)*i)-(t-i))>s||r!=r?u*(1/0):u*r}},function(e,t,r){var n=r(16),i=r(240).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,l="process"==r(99)(o);e.exports=function(){var e,t,r,u=function(){var n,i;for(l&&(n=o.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(l)r=function(){o.nextTick(u)};else if(a){var c=!0,f=document.createTextNode("");new a(u).observe(f,{characterData:!0}),r=function(){f.data=c=!c}}else if(s&&s.resolve){var h=s.resolve();r=function(){h.then(u)}}else r=function(){i.call(n,u)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){var n=r(29),i=r(15),a=r(102);e.exports=r(45)?Object.defineProperties:function(e,t){i(e);for(var r,o=a(t),s=o.length,l=0;s>l;)n.f(e,r=o[l++],t[r]);return e}},function(e,t,r){var n=r(62),i=r(131).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return o.slice()}}(e):i(n(e))}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(15),i=r(17),a=r(355);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,r){var n=r(84),i=r(82);e.exports=function(e){return function(t,r){var a,o,s=String(i(t)),l=n(r),u=s.length;return l<0||l>=u?e?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):a:e?s.slice(l,l+2):o-56320+(a-55296<<10)+65536}}},function(e,t,r){var n=r(16),i=r(128),a=r(101),o=r(364),s=r(29).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,r){var n=r(1);n(n.P,"Array",{copyWithin:r(342)}),r(97)("copyWithin")},function(e,t,r){var n=r(1);n(n.P,"Array",{fill:r(224)}),r(97)("fill")},function(e,t,r){"use strict";var n=r(1),i=r(127)(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(97)(a)},function(e,t,r){"use strict";var n=r(1),i=r(127)(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(97)("find")},function(e,t,r){"use strict";var n=r(61),i=r(1),a=r(85),o=r(351),s=r(232),l=r(35),u=r(227),c=r(242);i(i.S+i.F*!r(160)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,f,h=a(e),d="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,y=c(h);if(v&&(m=n(m,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(r=new d(t=l(h.length));t>g;g++)u(r,g,v?m(h[g],g):h[g]);else for(f=y.call(h),r=new d;!(i=f.next()).done;g++)u(r,g,v?o(f,m,[i.value,g],!0):i.value);return r.length=g,r}})},function(e,t,r){"use strict";var n=r(1),i=r(227);n(n.S+n.F*r(24)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)i(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){var n=r(29).f,i=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in i||r(45)&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,r){"use strict";var n=r(343),i=r(106);e.exports=r(157)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){var n=r(1),i=r(354),a=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+a(e-1)*a(e+1))}})},function(e,t,r){var n=r(1),i=Math.asinh;n(n.S+n.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,r){var n=r(1),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var n=r(1),i=r(234);n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,r){var n=r(1);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var n=r(1),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,r){var n=r(1),i=r(233);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,r){var n=r(1);n(n.S,"Math",{fround:r(741)})},function(e,t,r){var n=r(1),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,a=0,o=0,s=arguments.length,l=0;o<s;)l<(r=i(arguments[o++]))?(a=a*(n=l/r)*n+1,l=r):a+=r>0?(n=r/l)*n:r;return l===1/0?1/0:l*Math.sqrt(a)}})},function(e,t,r){var n=r(1),i=Math.imul;n(n.S+n.F*r(24)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var r=+e,n=+t,i=65535&r,a=65535&n;return 0|i*a+((65535&r>>>16)*a+i*(65535&n>>>16)<<16>>>0)}})},function(e,t,r){var n=r(1);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var n=r(1);n(n.S,"Math",{log1p:r(354)})},function(e,t,r){var n=r(1);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(1);n(n.S,"Math",{sign:r(234)})},function(e,t,r){var n=r(1),i=r(233),a=Math.exp;n(n.S+n.F*r(24)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,r){var n=r(1),i=r(233),a=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),r=i(-e);return t==1/0?1:r==1/0?-1:(t-r)/(a(e)+a(-e))}})},function(e,t,r){var n=r(1);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(1);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(1),i=r(16).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,r){var n=r(1);n(n.S,"Number",{isInteger:r(349)})},function(e,t,r){var n=r(1);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(1),i=r(349),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991}})},function(e,t,r){var n=r(1);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(1);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var n=r(1);n(n.S+n.F,"Object",{assign:r(356)})},function(e,t,r){var n=r(1);n(n.S,"Object",{is:r(747)})},function(e,t,r){var n=r(1);n(n.S,"Object",{setPrototypeOf:r(235).set})},function(e,t,r){"use strict";var n,i,a,o,s=r(101),l=r(16),u=r(61),c=r(226),f=r(1),h=r(17),d=r(81),p=r(98),m=r(159),v=r(238),g=r(240).set,y=r(742)(),x=r(355),b=r(745),w=r(746),_=l.TypeError,M=l.process,S=l.Promise,T="process"==c(M),E=function(){},P=i=x.f,A=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[r(20)("species")]=function(e){e(E,E)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(e){}}(),C=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},R=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,i=1==e._s,a=0,o=function(t){var r,a,o=i?t.ok:t.fail,s=t.resolve,l=t.reject,u=t.domain;try{o?(i||(2==e._h&&L(e),e._h=1),!0===o?r=n:(u&&u.enter(),r=o(n),u&&u.exit()),r===t.promise?l(_("Promise-chain cycle")):(a=C(r))?a.call(r,s,l):s(r)):l(n)}catch(e){l(e)}};r.length>a;)o(r[a++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){g.call(l,function(){var t,r,n,i=e._v,a=O(e);if(a&&(t=b(function(){T?M.emit("unhandledRejection",i,e):(r=l.onunhandledrejection)?r({promise:e,reason:i}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=T||O(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},O=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if((t=r[n++]).fail||!O(t.promise))return!1;return!0},L=function(e){g.call(l,function(){var t;T?M.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},N=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw _("Promise can't be resolved itself");(t=C(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,u(N,n,1),u(D,n,1))}catch(e){D.call(n,e)}}):(r._v=e,r._s=1,R(r,!1))}catch(e){D.call({_w:r,_d:!1},e)}}};A||(S=function(e){p(this,S,"Promise","_h"),d(e),n.call(this);try{e(u(N,this,1),u(D,this,1))}catch(e){D.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(103)(S.prototype,{then:function(e,t){var r=P(v(this,S));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=T?M.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&R(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=u(N,e,1),this.reject=u(D,e,1)},x.f=P=function(e){return e===S||e===o?new a(e):i(e)}),f(f.G+f.W+f.F*!A,{Promise:S}),r(104)(S,"Promise"),r(162)("Promise"),o=r(128).Promise,f(f.S+f.F*!A,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!A),"Promise",{resolve:function(e){return w(s&&this===o?S:this,e)}}),f(f.S+f.F*!(A&&r(160)(function(e){S.all(e).catch(E)})),"Promise",{all:function(e){var t=this,r=P(t),n=r.resolve,i=r.reject,a=b(function(){var r=[],a=0,o=1;m(e,!1,function(e){var s=a++,l=!1;r.push(void 0),o++,t.resolve(e).then(function(e){l||(l=!0,r[s]=e,--o||n(r))},i)}),--o||n(r)});return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=P(t),n=r.reject,i=b(function(){m(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(e,t,r){var n=r(1),i=r(81),a=r(15),o=(r(16).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!r(24)(function(){o(function(){})}),"Reflect",{apply:function(e,t,r){var n=i(e),l=a(r);return o?o(n,t,l):s.call(n,t,l)}})},function(e,t,r){var n=r(1),i=r(130),a=r(81),o=r(15),s=r(17),l=r(24),u=r(736),c=(r(16).Reflect||{}).construct,f=l(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),h=!l(function(){c(function(){})});n(n.S+n.F*(f||h),"Reflect",{construct:function(e,t){a(e),o(t);var r=arguments.length<3?e:a(arguments[2]);if(h&&!f)return c(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(u.apply(e,n))}var l=r.prototype,d=i(s(l)?l:Object.prototype),p=Function.apply.call(e,d,t);return s(p)?p:d}})},function(e,t,r){var n=r(29),i=r(1),a=r(15),o=r(134);i(i.S+i.F*r(24)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){a(e),t=o(t,!0),a(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},function(e,t,r){var n=r(1),i=r(71).f,a=r(15);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=i(a(e),t);return!(r&&!r.configurable)&&delete e[t]}})},function(e,t,r){var n=r(71),i=r(1),a=r(15);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(a(e),t)}})},function(e,t,r){var n=r(1),i=r(132),a=r(15);n(n.S,"Reflect",{getPrototypeOf:function(e){return i(a(e))}})},function(e,t,r){var n=r(71),i=r(132),a=r(46),o=r(1),s=r(17),l=r(15);o(o.S,"Reflect",{get:function e(t,r){var o,u,c=arguments.length<3?t:arguments[2];return l(t)===c?t[r]:(o=n.f(t,r))?a(o,"value")?o.value:void 0!==o.get?o.get.call(c):void 0:s(u=i(t))?e(u,r,c):void 0}})},function(e,t,r){var n=r(1);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var n=r(1),i=r(15),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!a||a(e)}})},function(e,t,r){var n=r(1);n(n.S,"Reflect",{ownKeys:r(359)})},function(e,t,r){var n=r(1),i=r(15),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return a&&a(e),!0}catch(e){return!1}}})},function(e,t,r){var n=r(1),i=r(235);i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,r){var n=r(29),i=r(71),a=r(132),o=r(46),s=r(1),l=r(83),u=r(15),c=r(17);s(s.S,"Reflect",{set:function e(t,r,s){var f,h,d=arguments.length<4?t:arguments[3],p=i.f(u(t),r);if(!p){if(c(h=a(t)))return e(h,r,s,d);p=l(0)}return o(p,"value")?!(!1===p.writable||!c(d)||((f=i.f(d,r)||l(0)).value=s,n.f(d,r,f),0)):void 0!==p.set&&(p.set.call(d,s),!0)}})},function(e,t,r){r(45)&&"g"!=/./g.flags&&r(29).f(RegExp.prototype,"flags",{configurable:!0,get:r(738)})},function(e,t,r){r(158)("match",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){r(158)("replace",2,function(e,t,r){return[function(n,i){"use strict";var a=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,a,i):r.call(String(a),n,i)},r]})},function(e,t,r){r(158)("search",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){r(158)("split",2,function(e,t,n){"use strict";var i=r(350),a=n,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return a.call(r,e,t);var n,l,u,c,f,h=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,m=void 0===t?4294967295:t>>>0,v=new RegExp(e.source,d+"g");for(s||(n=new RegExp("^"+v.source+"$(?!\\s)",d));(l=v.exec(r))&&!((u=l.index+l[0].length)>p&&(h.push(r.slice(p,l.index)),!s&&l.length>1&&l[0].replace(n,function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(l[f]=void 0)}),l.length>1&&l.index<r.length&&o.apply(h,l.slice(1)),c=l[0].length,p=u,h.length>=m));)v.lastIndex===l.index&&v.lastIndex++;return p===r.length?!c&&v.test("")||h.push(""):h.push(r.slice(p)),h.length>m?h.slice(0,m):h}}else"0".split(void 0,0).length&&(n=function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)});return[function(r,i){var a=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,a,i):n.call(String(a),r,i)},n]})},function(e,t,r){"use strict";var n=r(343),i=r(106);e.exports=r(157)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n=r(1),i=r(748)(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,r){"use strict";var n=r(1),i=r(35),a=r(239),o="".endsWith;n(n.P+n.F*r(230)("endsWith"),"String",{endsWith:function(e){var t=a(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(t.length),s=void 0===r?n:Math.min(i(r),n),l=String(e);return o?o.call(t,l,s):t.slice(s-l.length,s)===l}})},function(e,t,r){var n=r(1),i=r(105),a=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,o=0;n>o;){if(t=+arguments[o++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},function(e,t,r){"use strict";var n=r(1),i=r(239);n(n.P+n.F*r(230)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(1),i=r(62),a=r(35);n(n.S,"String",{raw:function(e){for(var t=i(e.raw),r=a(t.length),n=arguments.length,o=[],s=0;r>s;)o.push(String(t[s++])),s<n&&o.push(String(arguments[s]));return o.join("")}})},function(e,t,r){var n=r(1);n(n.P,"String",{repeat:r(361)})},function(e,t,r){"use strict";var n=r(1),i=r(35),a=r(239),o="".startsWith;n(n.P+n.F*r(230)("startsWith"),"String",{startsWith:function(e){var t=a(this,e,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return o?o.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){"use strict";var n=r(16),i=r(46),a=r(45),o=r(1),s=r(72),l=r(129).KEY,u=r(24),c=r(237),f=r(104),h=r(86),d=r(20),p=r(364),m=r(749),v=r(737),g=r(348),y=r(15),x=r(62),b=r(134),w=r(83),_=r(130),M=r(744),S=r(71),T=r(29),E=r(102),P=S.f,A=T.f,C=M.f,R=n.Symbol,I=n.JSON,O=I&&I.stringify,L=d("_hidden"),D=d("toPrimitive"),N={}.propertyIsEnumerable,V=c("symbol-registry"),F=c("symbols"),B=c("op-symbols"),U=Object.prototype,k="function"==typeof R,z=n.QObject,G=!z||!z.prototype||!z.prototype.findChild,j=a&&u(function(){return 7!=_(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=P(U,t);n&&delete U[t],A(e,t,r),n&&e!==U&&A(U,t,n)}:A,H=function(e){var t=F[e]=_(R.prototype);return t._k=e,t},W=k&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},X=function(e,t,r){return e===U&&X(B,t,r),y(e),t=b(t,!0),y(r),i(F,t)?(r.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),r=_(r,{enumerable:w(0,!1)})):(i(e,L)||A(e,L,w(1,{})),e[L][t]=!0),j(e,t,r)):A(e,t,r)},q=function(e,t){y(e);for(var r,n=v(t=x(t)),i=0,a=n.length;a>i;)X(e,r=n[i++],t[r]);return e},Y=function(e){var t=N.call(this,e=b(e,!0));return!(this===U&&i(F,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(F,e)||i(this,L)&&this[L][e])||t)},Z=function(e,t){if(e=x(e),t=b(t,!0),e!==U||!i(F,t)||i(B,t)){var r=P(e,t);return!r||!i(F,t)||i(e,L)&&e[L][t]||(r.enumerable=!0),r}},J=function(e){for(var t,r=C(x(e)),n=[],a=0;r.length>a;)i(F,t=r[a++])||t==L||t==l||n.push(t);return n},Q=function(e){for(var t,r=e===U,n=C(r?B:x(e)),a=[],o=0;n.length>o;)!i(F,t=n[o++])||r&&!i(U,t)||a.push(F[t]);return a};k||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===U&&t.call(B,r),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),j(this,e,w(1,r))};return a&&G&&j(U,e,{configurable:!0,set:t}),H(e)}).prototype,"toString",function(){return this._k}),S.f=Z,T.f=X,r(131).f=M.f=J,r(133).f=Y,r(161).f=Q,a&&!r(101)&&s(U,"propertyIsEnumerable",Y,!0),p.f=function(e){return H(d(e))}),o(o.G+o.W+o.F*!k,{Symbol:R});for(var K="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),$=0;K.length>$;)d(K[$++]);for(var ee=E(d.store),te=0;ee.length>te;)m(ee[te++]);o(o.S+o.F*!k,"Symbol",{for:function(e){return i(V,e+="")?V[e]:V[e]=R(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in V)if(V[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!k,"Object",{create:function(e,t){return void 0===t?_(e):q(_(e),t)},defineProperty:X,defineProperties:q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:J,getOwnPropertySymbols:Q}),I&&o(o.S+o.F*(!k||u(function(){var e=R();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!W(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return"function"==typeof(t=n[1])&&(r=t),!r&&g(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,O.apply(I,n)}}}),R.prototype[D]||r(54)(R.prototype,D,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t,r){"use strict";var n=r(1),i=r(241),a=r(363),o=r(15),s=r(105),l=r(35),u=r(17),c=r(16).ArrayBuffer,f=r(238),h=a.ArrayBuffer,d=a.DataView,p=i.ABV&&c.isView,m=h.prototype.slice,v=i.VIEW;n(n.G+n.W+n.F*(c!==h),{ArrayBuffer:h}),n(n.S+n.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||u(e)&&v in e}}),n(n.P+n.U+n.F*r(24)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(o(this),e);for(var r=o(this).byteLength,n=s(e,r),i=s(void 0===t?r:t,r),a=new(f(this,h))(l(i-n)),u=new d(this),c=new d(a),p=0;n<i;)c.setUint8(p++,u.getUint8(n++));return a}}),r(162)("ArrayBuffer")},function(e,t,r){r(63)("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(63)("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(63)("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(63)("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(63)("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(63)("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(63)("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(63)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(63)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},function(e,t,r){"use strict";var n,i=r(127)(0),a=r(72),o=r(129),s=r(356),l=r(344),u=r(17),c=r(24),f=r(106),h=o.getWeak,d=Object.isExtensible,p=l.ufstore,m={},v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(e){if(u(e)){var t=h(e);return!0===t?p(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(f(this,"WeakMap"),e,t)}},y=e.exports=r(157)("WeakMap",v,g,l,!0,!0);c(function(){return 7!=(new y).set((Object.freeze||Object)(m),7).get(m)})&&(s((n=l.getConstructor(v,"WeakMap")).prototype,g),o.NEED=!0,i(["delete","has","get","set"],function(e){var t=y.prototype,r=t[e];a(t,e,function(t,i){if(u(t)&&!d(t)){this._f||(this._f=new n);var a=this._f[e](t,i);return"set"==e?this:a}return r.call(this,t,i)})}))},function(e,t,r){"use strict";var n=r(344),i=r(106);r(157)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"WeakSet"),e,!0)}},n,!1,!0)},function(e,t,r){"use strict";var n=r(1),i=r(225)(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(97)("includes")},function(e,t,r){var n=r(1),i=r(358)(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},function(e,t,r){var n=r(1),i=r(359),a=r(62),o=r(71),s=r(227);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=a(e),l=o.f,u=i(n),c={},f=0;u.length>f;)void 0!==(r=l(n,t=u[f++]))&&s(c,t,r);return c}})},function(e,t,r){var n=r(1),i=r(358)(!1);n(n.S,"Object",{values:function(e){return i(e)}})},function(e,t,r){"use strict";var n=r(1),i=r(360);n(n.P,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,r){"use strict";var n=r(1),i=r(360);n(n.P,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,r){for(var n=r(243),i=r(102),a=r(72),o=r(16),s=r(54),l=r(100),u=r(20),c=u("iterator"),f=u("toStringTag"),h=l.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),m=0;m<p.length;m++){var v,g=p[m],y=d[g],x=o[g],b=x&&x.prototype;if(b&&(b[c]||s(b,c,h),b[f]||s(b,f,g),l[g]=h,y))for(v in n)b[v]||a(b,v,n[v],!0)}},function(e,t,r){var n=r(1),i=r(240);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){var n=r(16),i=r(1),a=n.navigator,o=[].slice,s=!!a&&/MSIE .\./.test(a.userAgent),l=function(e){return function(t,r){var n=arguments.length>2,i=!!n&&o.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};i(i.G+i.B+i.F*s,{setTimeout:l(n.setTimeout),setInterval:l(n.setInterval)})},function(e,t,r){(e.exports=r(400)(void 0)).push([e.i,"/*\n  This css gets imported and used with the player.\n\n  Do not edit CSS, edit `less` files and regenerate.\n*/\n.claraplayer {\n  /* Elements */\n}\n.claraplayer canvas {\n  box-sizing: content-box;\n  -webkit-box-sizing: content-box;\n}\n.claraplayer canvas:focus {\n  outline: none;\n}\n.claraplayer input[type=range] {\n  -webkit-appearance: none;\n  width: 100%;\n  margin: 7px 0;\n}\n.claraplayer input[type=range]:focus {\n  outline: none;\n}\n.claraplayer input[type=range]::-webkit-slider-runnable-track {\n  width: 100%;\n  height: 4px;\n  cursor: pointer;\n  box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3), 0px 0px 1px rgba(13, 13, 13, 0.3);\n  background: #ffffff;\n  border-radius: 2.6px;\n  border: 0px solid #000000;\n}\n.claraplayer input[type=range]::-webkit-slider-thumb {\n  box-shadow: 0px 0px 2.7px #000000, 0px 0px 0px #0d0d0d;\n  border: 2px solid #ffffff;\n  height: 18px;\n  width: 18px;\n  border-radius: 20px;\n  background: #ffffff;\n  cursor: pointer;\n  -webkit-appearance: none;\n  margin-top: -7px;\n}\n.claraplayer input[type=range]:focus::-webkit-slider-runnable-track {\n  background: #ffffff;\n}\n.claraplayer input[type=range]::-moz-range-track {\n  width: 100%;\n  height: 4px;\n  cursor: pointer;\n  box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3), 0px 0px 1px rgba(13, 13, 13, 0.3);\n  background: #ffffff;\n  border-radius: 2.6px;\n  border: 0px solid #000000;\n}\n.claraplayer input[type=range]::-moz-range-thumb {\n  box-shadow: 0px 0px 2.7px #000000, 0px 0px 0px #0d0d0d;\n  border: 2px solid #ffffff;\n  height: 18px;\n  width: 18px;\n  border-radius: 20px;\n  background: #ffffff;\n  cursor: pointer;\n}\n.claraplayer input[type=range]::-ms-track {\n  width: 100%;\n  height: 4px;\n  cursor: pointer;\n  background: transparent;\n  border-color: transparent;\n  color: transparent;\n}\n.claraplayer input[type=range]::-ms-fill-lower {\n  background: #e3e3e3;\n  border: 0px solid #000000;\n  border-radius: 5.2px;\n  box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3), 0px 0px 1px rgba(13, 13, 13, 0.3);\n}\n.claraplayer input[type=range]::-ms-fill-upper {\n  background: #ffffff;\n  border: 0px solid #000000;\n  border-radius: 5.2px;\n  box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3), 0px 0px 1px rgba(13, 13, 13, 0.3);\n}\n.claraplayer input[type=range]::-ms-thumb {\n  box-shadow: 0px 0px 2.7px #000000, 0px 0px 0px #0d0d0d;\n  border: 2px solid #ffffff;\n  height: 18px;\n  width: 18px;\n  border-radius: 20px;\n  background: #ffffff;\n  cursor: pointer;\n  height: 4px;\n}\n.claraplayer input[type=range]:focus::-ms-fill-lower {\n  background: #ffffff;\n}\n.claraplayer input[type=range]:focus::-ms-fill-upper {\n  background: #ffffff;\n}\n.claraplayer .annotation-text {\n  font-size: 12px;\n  padding: 10px;\n  color: #fff;\n  background-color: #000;\n  border-radius: 5px;\n  opacity: 0.8;\n  cursor: pointer;\n  line-height: 1.3;\n  overflow: auto;\n}\n.claraplayer .annotation-text img {\n  max-width: 100%;\n}\n.claraplayer .annotation-icon {\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.claraplayer .annotation-closed {\n  background-image: url(/img/annotation-closed-2.svg);\n}\n.claraplayer .annotation-open {\n  background-image: url(/img/annotation-open-2.svg);\n}\n.claraplayer .annotation-left {\n  left: 30px;\n}\n.claraplayer .annotation-right {\n  right: 30px;\n}\n.claraplayer .annotation-top {\n  top: 0;\n}\n.claraplayer .annotation-bottom {\n  bottom: 0;\n}\n.claraplayer .annotation {\n  position: absolute;\n  text-align: left;\n  transition: opacity 0.3s ease-out;\n  font-family: sans-serif;\n}\n.claraplayer .annotation .arrow {\n  position: absolute;\n  display: inline-block;\n  border-top: 5px solid transparent;\n  border-bottom: 5px solid transparent;\n  height: 0;\n  width: 0;\n  margin-top: -5px;\n}\n.claraplayer .annotation .arrow-left {\n  left: -10px;\n  border-left: 5px solid transparent;\n  border-right: 5px solid #333;\n}\n.claraplayer .annotation .arrow-right {\n  right: -10px;\n  border-right: 5px solid transparent;\n  border-left: 5px solid #333;\n}\n.claraplayer .annotation .arrow-top {\n  top: 12px;\n}\n.claraplayer .annotation .arrow-bottom {\n  bottom: 8px;\n}\n",""])},function(e,t,r){var n,i=r(836);"undefined"!=typeof navigator&&navigator&&(n=navigator.userAgent),e.exports=i(n)},function(e,t){e.exports=function(e){if(!e)return null;return[["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/]].map(function(t){if(t[1].test(e)){var r=t[1].exec(e),n=r&&r[1].split(/[._]/).slice(0,3);return n&&n.length<3&&Array.prototype.push.apply(n,1==n.length?[0,0]:[0]),{name:t[0],version:n.join(".")}}}).filter(Boolean).shift()}},function(e,t){t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+f],f+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+e[t+f],f+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=u}return(d?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+f>=1?h/l:h*Math.pow(2,1-f))*l>=2&&(o++,l/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*l-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[r+d]=255&o,d+=p,o/=256,u-=8);e[r+d-p]|=128*m}},function(e,t,r){(function(t){(function(){"use strict";var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:h,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:h,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:h,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function r(e){this.tokens=[],this.tokens.links={},this.options=e||p.defaults,this.rules=t.normal,this.options.gfm&&(this.options.tables?this.rules=t.tables:this.rules=t.gfm)}t.bullet=/(?:[*+-]|\d+\.)/,t.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,t.item=l(t.item,"gm")(/bull/g,t.bullet)(),t.list=l(t.list)(/bull/g,t.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+t.def.source+")")(),t.blockquote=l(t.blockquote)("def",t.def)(),t._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",t.html=l(t.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,t._tag)(),t.paragraph=l(t.paragraph)("hr",t.hr)("heading",t.heading)("lheading",t.lheading)("blockquote",t.blockquote)("tag","<"+t._tag)("def",t.def)(),t.normal=d({},t),t.gfm=d({},t.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),t.gfm.paragraph=l(t.paragraph)("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|")(),t.tables=d({},t.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),r.rules=t,r.lex=function(e,t){return new r(t).lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,r,n){var i,a,o,s,l,u,c,f,h;for(e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e))e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(r&&(o=this.rules.nptable.exec(e))){for(e=e.substring(o[0].length),u={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},f=0;f<u.align.length;f++)/^ *-+: *$/.test(u.align[f])?u.align[f]="right":/^ *:-+: *$/.test(u.align[f])?u.align[f]="center":/^ *:-+ *$/.test(u.align[f])?u.align[f]="left":u.align[f]=null;for(f=0;f<u.cells.length;f++)u.cells[f]=u.cells[f].split(/ *\| */);this.tokens.push(u)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,r,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),s=o[2],this.tokens.push({type:"list_start",ordered:s.length>1}),i=!1,h=(o=o[0].match(this.rules.item)).length,f=0;f<h;f++)c=(u=o[f]).length,~(u=u.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(c-=u.length,u=this.options.pedantic?u.replace(/^ {1,4}/gm,""):u.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&f!==h-1&&(s===(l=t.bullet.exec(o[f+1])[0])||s.length>1&&l.length>1||(e=o.slice(f+1).join("\n")+e,f=h-1)),a=i||/\n\n(?!\s*$)/.test(u),f!==h-1&&(i="\n"===u.charAt(u.length-1),a||(a=i)),this.tokens.push({type:a?"loose_item_start":"list_item_start"}),this.token(u,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(!n&&r&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(r&&(o=this.rules.table.exec(e))){for(e=e.substring(o[0].length),u={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},f=0;f<u.align.length;f++)/^ *-+: *$/.test(u.align[f])?u.align[f]="right":/^ *:-+: *$/.test(u.align[f])?u.align[f]="center":/^ *:-+ *$/.test(u.align[f])?u.align[f]="left":u.align[f]=null;for(f=0;f<u.cells.length;f++)u.cells[f]=u.cells[f].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(u)}else if(r&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ <>]+(@|:\/)[^ <>]+)>/,url:h,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^<'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:h,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function i(e,t){if(this.options=t||p.defaults,this.links=e,this.rules=n.normal,this.renderer=this.options.renderer||new a,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function a(e){this.options=e||{}}function o(e){this.tokens=[],this.token=null,this.options=e||p.defaults,this.options.renderer=this.options.renderer||new a,this.renderer=this.options.renderer,this.renderer.options=this.options}function s(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function l(e,t){return e=e.source,t=t||"",function r(n,i){return n?(i=(i=i.source||i).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(n,i),r):new RegExp(e,t)}}function u(e,t){return c[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?c[" "+e]=e+"/":c[" "+e]=e.replace(/[^/]*$/,"")),e=c[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}n._inside=/(?:\[[^\]]*\]|\\[\[\]]|[^\[\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=l(n.link)("inside",n._inside)("href",n._href)(),n.reflink=l(n.reflink)("inside",n._inside)(),n.normal=d({},n),n.pedantic=d({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=d({},n.normal,{escape:l(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:l(n.text)("]|","~]|")("|","|https?://|")()}),n.breaks=d({},n.gfm,{br:l(n.br)("{2,}","*")(),text:l(n.gfm.text)("{2,}","*")()}),i.rules=n,i.output=function(e,t,r){return new i(t,r).output(e)},i.prototype.output=function(e){for(var t,r,n,i,a="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),a+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(r=s(":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1])),n=this.mangle("mailto:")+r):n=r=s(i[1]),a+=this.renderer.link(n,null,r);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):s(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,a+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){a+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),a+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),a+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),a+=this.renderer.codespan(s(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),a+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),a+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),a+=this.renderer.text(s(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(i[0].length),n=r=s(i[1]),a+=this.renderer.link(n,null,r);return a},i.prototype.outputLink=function(e,t){var r=s(t.href),n=t.title?s(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(r,n,this.output(e[1])):this.renderer.image(r,n,s(e[1]))},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},i.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,r="",n=e.length,i=0;i<n;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),r+="&#"+t+";";return r},a.prototype.code=function(e,t,r){if(this.options.highlight){var n=this.options.highlight(e,t);null!=n&&n!==e&&(r=!0,e=n)}return t?'<pre><code class="'+this.options.langPrefix+s(t,!0)+'">'+(r?e:s(e,!0))+"\n</code></pre>\n":"<pre><code>"+(r?e:s(e,!0))+"\n</code></pre>"},a.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},a.prototype.html=function(e){return e},a.prototype.heading=function(e,t,r){return"<h"+t+' id="'+this.options.headerPrefix+r.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},a.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},a.prototype.list=function(e,t){var r=t?"ol":"ul";return"<"+r+">\n"+e+"</"+r+">\n"},a.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},a.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},a.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},a.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},a.prototype.tablecell=function(e,t){var r=t.header?"th":"td";return(t.align?"<"+r+' style="text-align:'+t.align+'">':"<"+r+">")+e+"</"+r+">\n"},a.prototype.strong=function(e){return"<strong>"+e+"</strong>"},a.prototype.em=function(e){return"<em>"+e+"</em>"},a.prototype.codespan=function(e){return"<code>"+e+"</code>"},a.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},a.prototype.del=function(e){return"<del>"+e+"</del>"},a.prototype.link=function(e,t,r){if(this.options.sanitize){try{var n=decodeURIComponent((i=e,i.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return r}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return r}var i;this.options.baseUrl&&!f.test(e)&&(e=u(this.options.baseUrl,e));var a='<a href="'+e+'"';return t&&(a+=' title="'+t+'"'),a+=">"+r+"</a>"},a.prototype.image=function(e,t,r){this.options.baseUrl&&!f.test(e)&&(e=u(this.options.baseUrl,e));var n='<img src="'+e+'" alt="'+r+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"},a.prototype.text=function(e){return e},o.parse=function(e,t,r){return new o(t,r).parse(e)},o.prototype.parse=function(e){this.inline=new i(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},o.prototype.next=function(){return this.token=this.tokens.pop()},o.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},o.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},o.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,r,n,i="",a="";for(r="",e=0;e<this.token.header.length;e++)({header:!0,align:this.token.align[e]}),r+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(r),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],r="",n=0;n<t.length;n++)r+=this.renderer.tablecell(this.inline.output(t[n]),{header:!1,align:this.token.align[n]});a+=this.renderer.tablerow(r)}return this.renderer.table(i,a);case"blockquote_start":for(a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":a="";for(var o=this.token.ordered;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,o);case"list_item_start":for(a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var s=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(s);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var c={},f=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function h(){}function d(e){for(var t,r,n=1;n<arguments.length;n++)for(r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function p(e,t,n){if(n||"function"==typeof t){n||(n=t,t=null);var i,a,l=(t=d({},p.defaults,t||{})).highlight,u=0;try{i=r.lex(e,t)}catch(e){return n(e)}a=i.length;var c=function(e){if(e)return t.highlight=l,n(e);var r;try{r=o.parse(i,t)}catch(t){e=t}return t.highlight=l,e?n(e):n(null,r)};if(!l||l.length<3)return c();if(delete t.highlight,!a)return c();for(;u<i.length;u++)!function(e){"code"!==e.type?--a||c():l(e.text,e.lang,function(t,r){return t?c(t):null==r||r===e.text?--a||c():(e.text=r,e.escaped=!0,void(--a||c()))})}(i[u])}else try{return t&&(t=d({},p.defaults,t)),o.parse(r.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(t||p.defaults).silent)return"<p>An error occurred:</p><pre>"+s(e.message+"",!0)+"</pre>";throw e}}h.exec=h,p.options=p.setOptions=function(e){return d(p.defaults,e),p},p.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new a,xhtml:!1,baseUrl:null},p.Parser=o,p.parser=o.parse,p.Renderer=a,p.Lexer=r,p.lexer=r.lex,p.InlineLexer=i,p.inlineLexer=i.output,p.parse=p,e.exports=p}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(t,r(49))},function(e,t,r){e.exports=r(87)},function(e,t,r){"use strict";e.exports=a;var n=r(367),i=r(135);function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}i.inherits=r(107),i.inherits(a,n),a.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";var n=r(249).Buffer;e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,a=n.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=a,i=s,t.copy(r,i),s+=o.data.length,o=o.next;return a},e}()},function(e,t,r){e.exports=r(247).PassThrough},function(e,t,r){e.exports=r(247).Transform},function(e,t,r){e.exports=r(246)},function(e,t,r){(function(t){var n="object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this,i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(370),i)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}}).call(t,r(49))},function(e,t,r){var n;n=function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";var n=r(2),i=r(3);!function(){var e="undefined"==typeof JSON?{}:JSON;n.setupJSON(e)}();var a=window._rollbarConfig,o=a&&a.globalAlias||"Rollbar";!(window[o]&&void 0!==window[o].shimId)&&a?n.wrapper.init(a):(window.Rollbar=n.wrapper,window.RollbarNotifier=i.Notifier),e.exports=n.wrapper},function(e,t,r){"use strict";function n(e,t){if(t.hasOwnProperty&&t.hasOwnProperty("addEventListener")){var r=t.addEventListener;t.addEventListener=function(t,n,i){r.call(this,t,e.wrap(n),i)};var n=t.removeEventListener;t.removeEventListener=function(e,t,r){n.call(this,e,t&&t._wrapped||t,r)}}}var i=r(3),a=r(8),o=i.Notifier;window._rollbarWrappedError=null;var s={};s.init=function(e,t){var r=new o(t);if(r.configure(e),e.captureUncaught){var i;t&&a.isType(t._rollbarOldOnError,"function")?i=t._rollbarOldOnError:window.onerror&&!window.onerror.belongsToShim&&(i=window.onerror),window.onerror=function(){var e=Array.prototype.slice.call(arguments,0);!function(e,t,r){!r[4]&&window._rollbarWrappedError&&(r[4]=window._rollbarWrappedError,window._rollbarWrappedError=null),e.uncaughtError.apply(e,r),t&&t.apply(window,r)}(r,i,e)};var s,l,u=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];for(s=0;s<u.length;++s)l=u[s],window[l]&&window[l].prototype&&n(r,window[l].prototype)}return e.captureUnhandledRejections&&(t&&a.isType(t._unhandledRejectionHandler,"function")&&window.removeEventListener("unhandledrejection",t._unhandledRejectionHandler),r._unhandledRejectionHandler=function(e){var t=e.reason,n=e.promise,i=e.detail;!t&&i&&(t=i.reason,n=i.promise),r.unhandledRejection(t,n)},window.addEventListener("unhandledrejection",r._unhandledRejectionHandler)),window.Rollbar=r,o.processPayloads(),r},e.exports={wrapper:s,setupJSON:i.setupJSON}},function(e,t,r){"use strict";function n(e,t){return function(){var r=t||this;try{return e.apply(r,arguments)}catch(e){p.consoleError("[Rollbar]:",e)}}}function i(){f||(f=setTimeout(u,1e3))}function a(e){x=x||this;var t="https://"+a.DEFAULT_ENDPOINT;this.options={enabled:!0,endpoint:t,environment:"production",scrubFields:h([],a.DEFAULT_SCRUB_FIELDS),checkIgnore:null,logLevel:a.DEFAULT_LOG_LEVEL,reportLevel:a.DEFAULT_REPORT_LEVEL,uncaughtErrorLevel:a.DEFAULT_UNCAUGHT_ERROR_LEVEL,payload:{}},this.lastError=null,this.plugins={},this.parentNotifier=e,e&&(e.hasOwnProperty("shimId")?e.notifier=this:this.configure(e.options))}function o(e){window._rollbarPayloadQueue.push(e),i()}function s(e){return n(function(){var t=this._getLogArgs(arguments);return this._log(e||t.level||this.options.logLevel||a.DEFAULT_LOG_LEVEL,t.message,t.err,t.custom,t.callback)})}function l(e,t){e||(e=t?y.stringify(t):"");var r={body:e};return t&&(r.extra=h(!0,{},t)),{message:r}}function u(){var e;try{for(;e=window._rollbarPayloadQueue.shift();)c(e)}finally{f=void 0}}function c(e){var t=e.endpointUrl,r=e.accessToken,n=e.payload,i=e.callback||function(){},s=(new Date).getTime();s-w>=6e4&&(w=s,M=0);var l=window._globalRollbarOptions.maxItems,u=window._globalRollbarOptions.itemsPerMinute,c=function(){return!n.ignoreRateLimit&&l>=1&&_>=l};return c()?void i(new Error(l+" max items reached")):!n.ignoreRateLimit&&u>=1&&M>=u?void i(new Error(u+" items per minute reached")):(_++,M++,c()&&x._log(x.options.uncaughtErrorLevel,"maxItems has been hit. Ignoring errors for the remainder of the current page load.",null,{maxItems:l},null,!1,!0),n.ignoreRateLimit&&delete n.ignoreRateLimit,void v.post(t,r,n,function(t,r){return t?(t instanceof g&&(e.callback=function(){},setTimeout(function(){o(e)},a.RETRY_DELAY)),i(t)):i(null,r)}))}var f,h=r(4),d=r(5),p=r(8),m=r(11),v=m.XHR,g=m.ConnectionError,y=null;a.NOTIFIER_VERSION="1.9.4",a.DEFAULT_ENDPOINT="api.rollbar.com/api/1/",a.DEFAULT_SCRUB_FIELDS=["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","secret_key","secretKey","secretToken"],a.DEFAULT_LOG_LEVEL="debug",a.DEFAULT_REPORT_LEVEL="debug",a.DEFAULT_UNCAUGHT_ERROR_LEVEL="error",a.DEFAULT_ITEMS_PER_MIN=60,a.DEFAULT_MAX_ITEMS=0,a.LEVELS={debug:0,info:1,warning:2,error:3,critical:4},a.RETRY_DELAY=1e4,window._rollbarPayloadQueue=window._rollbarPayloadQueue||[],window._globalRollbarOptions={startTime:(new Date).getTime(),maxItems:a.DEFAULT_MAX_ITEMS,itemsPerMinute:a.DEFAULT_ITEMS_PER_MIN};var x,b=a.prototype;b._getLogArgs=function(e){for(var t,r,i,o,s,l,u=this.options.logLevel||a.DEFAULT_LOG_LEVEL,c=[],f=0;f<e.length;++f)l=e[f],"string"===(s=p.typeName(l))?t?c.push(l):t=l:"function"===s?o=n(l,this):"date"===s?c.push(l):"error"===s||l instanceof Error||"undefined"!=typeof DOMException&&l instanceof DOMException?r?c.push(l):r=l:"object"!==s&&"array"!==s||(i?c.push(l):i=l);return c.length&&((i=i||{}).extraArgs=c),{level:u,message:t,err:r,custom:i,callback:o}},b._route=function(e){var t=this.options.endpoint,r=/\/$/.test(t),n=/^\//.test(e);return r&&n?e=e.substring(1):r||n||(e="/"+e),t+e},b._processShimQueue=function(e){for(var t,r,n,i,o,s,l={};r=e.shift();)t=r.shim,n=r.method,i=r.args,o=t.parentShim,(s=l[t.shimId])||(o?s=new a(l[o.shimId]):s=this,l[t.shimId]=s),s[n]&&p.isType(s[n],"function")&&s[n].apply(s,i)},b._buildPayload=function(e,t,r,n,i){var o=this.options.accessToken,s=this.options.environment,l=h(!0,{},this.options.payload),u=p.uuid4();if(void 0===a.LEVELS[t])throw new Error("Invalid level");if(!r&&!n&&!i)throw new Error("No message, stack info or custom data");var c={environment:s,endpoint:this.options.endpoint,uuid:u,level:t,platform:"browser",framework:"browser-js",language:"javascript",body:this._buildBody(r,n,i),request:{url:window.location.href,query_string:window.location.search,user_ip:"$remote_ip"},client:{runtime_ms:e.getTime()-window._globalRollbarOptions.startTime,timestamp:Math.round(e.getTime()/1e3),javascript:{browser:window.navigator.userAgent,language:window.navigator.language,cookie_enabled:window.navigator.cookieEnabled,screen:{width:window.screen.width,height:window.screen.height},plugins:this._getBrowserPlugins()}},server:{},notifier:{name:"rollbar-browser-js",version:a.NOTIFIER_VERSION}};l.body&&delete l.body;var f={access_token:o,data:h(!0,c,l)};return this._scrub(f.data),f},b._buildBody=function(e,t,r){return t?function(e,t,r){var n=d.guessErrorClass(t.message),i=t.name||n[0],a=n[1],o={exception:{class:i,message:a}};if(e&&(o.exception.description=e||"uncaught exception"),t.stack){var s,u,c,f,m,v,g,y;for(o.frames=[],g=0;g<t.stack.length;++g)u={filename:(s=t.stack[g]).url?p.sanitizeUrl(s.url):"(unknown)",lineno:s.line||null,method:s.func&&"?"!==s.func?s.func:"[anonymous]",colno:s.column},c=f=m=null,(v=s.context?s.context.length:0)&&(y=Math.floor(v/2),f=s.context.slice(0,y),c=s.context[y],m=s.context.slice(y)),c&&(u.code=c),(f||m)&&(u.context={},f&&f.length&&(u.context.pre=f),m&&m.length&&(u.context.post=m)),s.args&&(u.args=s.args),o.frames.push(u);return o.frames.reverse(),r&&(o.extra=h(!0,{},r)),{trace:o}}return l(i+": "+a,r)}(e,t,r):l(e,r)},b._getBrowserPlugins=function(){if(!this._browserPlugins){var e,t,r=window.navigator.plugins||[],n=r.length,i=[];for(t=0;t<n;++t)e=r[t],i.push({name:e.name,description:e.description});this._browserPlugins=i}return this._browserPlugins},b._scrub=function(e){function t(e,t,r,n,i,a){return t+p.redact(a)}function r(e){var r;if(p.isType(e,"string"))for(r=0;r<a.length;++r)e=e.replace(a[r],t);return e}var n=this.options.scrubFields,i=this._getScrubFieldRegexs(n),a=this._getScrubQueryParamRegexs(n);return p.traverse(e,function(e,t){var n=function(e,t){var r;for(r=0;r<i.length;++r)if(i[r].test(e)){t=p.redact(t);break}return t}(e,t);return n===t?r(n):n}),e},b._getScrubFieldRegexs=function(e){for(var t,r=[],n=0;n<e.length;++n)t="\\[?(%5[bB])?"+e[n]+"\\[?(%5[bB])?\\]?(%5[dD])?",r.push(new RegExp(t,"i"));return r},b._getScrubQueryParamRegexs=function(e){for(var t,r=[],n=0;n<e.length;++n)t="\\[?(%5[bB])?"+e[n]+"\\[?(%5[bB])?\\]?(%5[dD])?",r.push(new RegExp("("+t+"=)([^&\\n]+)","igm"));return r},b._urlIsWhitelisted=function(e){var t,r,n,i,a,o,s,l;try{if(t=this.options.hostWhiteList,r=e&&e.data&&e.data.body&&e.data.body.trace,!t||0===t.length)return!0;if(!r)return!0;for(o=t.length,i=r.frames.length,s=0;s<i;s++){if(n=r.frames[s].filename,!p.isType(n,"string"))return!0;for(l=0;l<o;l++)if(a=t[l],new RegExp(a).test(n))return!0}}catch(e){return this.configure({hostWhiteList:null}),p.consoleError("[Rollbar]: Error while reading your configuration's hostWhiteList option. Removing custom hostWhiteList.",e),!0}return!1},b._messageIsIgnored=function(e){var t,r,n,i,a,o,s,l;try{if(a=!1,!(n=this.options.ignoredMessages)||0===n.length)return!1;if(s=(o=e&&e.data&&e.data.body)&&o.trace&&o.trace.exception&&o.trace.exception.message,l=o&&o.message&&o.message.body,!(t=s||l))return!1;for(i=n.length,r=0;r<i&&!(a=new RegExp(n[r],"gi").test(t));r++);}catch(e){this.configure({ignoredMessages:null}),p.consoleError("[Rollbar]: Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return a},b._enqueuePayload=function(e,t,r,n){var i={callback:n,accessToken:this.options.accessToken,endpointUrl:this._route("item/"),payload:e},a=function(){if(n){n(null,{err:0,result:{id:null,uuid:null,message:"This item was not sent to Rollbar because it was ignored. This can happen if a custom checkIgnore() function was used or if the item's level was less than the notifier' reportLevel. See https://rollbar.com/docs/notifier/rollbar.js/configuration for more details."}})}};if(this._internalCheckIgnore(t,r,e))a();else{try{if(p.isType(this.options.checkIgnore,"function")&&this.options.checkIgnore(t,r,e))return void a()}catch(e){this.configure({checkIgnore:null}),p.consoleError("[Rollbar]: Error while calling custom checkIgnore() function. Removing custom checkIgnore().",e)}if(this._urlIsWhitelisted(e)&&!this._messageIsIgnored(e)){if(this.options.verbose){if(e.data&&e.data.body&&e.data.body.trace){var s=e.data.body.trace.exception.message;p.consoleError("[Rollbar]: ",s)}p.consoleInfo("[Rollbar]: ",i)}p.isType(this.options.logFunction,"function")&&this.options.logFunction(i);try{p.isType(this.options.transform,"function")&&this.options.transform(e)}catch(e){this.configure({transform:null}),p.consoleError("[Rollbar]: Error while calling custom transform() function. Removing custom transform().",e)}this.options.enabled&&o(i)}}},b._internalCheckIgnore=function(e,t,r){var n=t[0];if((a.LEVELS[n]||0)<(a.LEVELS[this.options.reportLevel]||0))return!0;var i=this.options?this.options.plugins:{};if(i&&i.jquery&&i.jquery.ignoreAjaxErrors)try{return!!r.data.body.message.extra.isAjax}catch(e){return!1}return!1},b._log=function(e,t,r,n,i,a,o){var s=null;if(r)try{if(s=r._savedStackTrace?r._savedStackTrace:d.parse(r),r===this.lastError)return;this.lastError=r}catch(e){p.consoleError("[Rollbar]: Error while parsing the error object.",e),t=r.message||r.description||t||String(r),r=null}var l=this._buildPayload(new Date,e,t,s,n);return o&&(l.ignoreRateLimit=!0),this._enqueuePayload(l,!!a,[e,t,r,n],i),{uuid:l.data.uuid}},b.log=s(),b.debug=s("debug"),b.info=s("info"),b.warn=s("warning"),b.warning=s("warning"),b.error=s("error"),b.critical=s("critical"),b.uncaughtError=n(function(e,t,r,n,i,a){if(a=a||null,i&&p.isType(i,"error"))this._log(this.options.uncaughtErrorLevel,e,i,a,null,!0);else if(t&&p.isType(t,"error"))this._log(this.options.uncaughtErrorLevel,e,t,a,null,!0);else{var o={url:t||"",line:r};o.func=d.guessFunctionName(o.url,o.line),o.context=d.gatherContext(o.url,o.line);var s={mode:"onerror",message:i?String(i):e||"uncaught exception",url:document.location.href,stack:[o],useragent:navigator.userAgent},l=this._buildPayload(new Date,this.options.uncaughtErrorLevel,e,s,a);this._enqueuePayload(l,!0,[this.options.uncaughtErrorLevel,e,t,r,n,i])}}),b.unhandledRejection=n(function(e,t){var r,n;if(e?(r=e.message||String(e),n=e._rollbarContext):r="unhandled rejection was null or undefined!",n=n||t._rollbarContext||null,e&&p.isType(e,"error"))this._log(this.options.uncaughtErrorLevel,r,e,n,null,!0);else{var i={url:"",line:0};i.func=d.guessFunctionName(i.url,i.line),i.context=d.gatherContext(i.url,i.line);var a={mode:"unhandledrejection",message:r,url:document.location.href,stack:[i],useragent:navigator.userAgent},o=this._buildPayload(new Date,this.options.uncaughtErrorLevel,r,a,n);this._enqueuePayload(o,!0,[this.options.uncaughtErrorLevel,r,i.url,i.line,0,e,t])}}),b.global=n(function(e){var t={startTime:(e=e||{}).startTime,maxItems:e.maxItems,itemsPerMinute:e.itemsPerMinute};h(!0,window._globalRollbarOptions,t),void 0!==e.maxItems&&(_=0),void 0!==e.itemsPerMinute&&(M=0)}),b.configure=n(function(e,t){var r=h(!0,{},e);h(!t,this.options,r),this.global(r)}),b.scope=n(function(e){var t=new a(this);return h(!0,t.options.payload,e),t}),b.wrap=function(e,t){try{var r;if(r=p.isType(t,"function")?t:function(){return t||{}},!p.isType(e,"function"))return e;if(e._isWrap)return e;if(!e._wrapped)for(var n in e._wrapped=function(){try{return e.apply(this,arguments)}catch(t){throw"string"==typeof t&&(t=new String(t)),t.stack||(t._savedStackTrace=d.parse(t)),t._rollbarContext=r()||{},t._rollbarContext._wrappedSource=e.toString(),window._rollbarWrappedError=t,t}},e._wrapped._isWrap=!0,e)e.hasOwnProperty(n)&&(e._wrapped[n]=e[n]);return e._wrapped}catch(t){return e}},b.loadFull=function(){p.consoleError("[Rollbar]: Unexpected Rollbar.loadFull() called on a Notifier instance")},a.processPayloads=function(e){return e?void u():void i()};var w=(new Date).getTime(),_=0,M=0;e.exports={Notifier:a,setupJSON:function(e){y=e,m.setupJSON(e),p.setupJSON(e)},topLevelNotifier:function(){return x}}},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,i=r.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!a)return!1;for(t in e);return void 0===t||r.call(e,t)};e.exports=function e(){var t,r,n,o,s,l,u=arguments[0],c=1,f=arguments.length,h=!1;for("boolean"==typeof u?(h=u,u=arguments[1]||{},c=2):("object"!=typeof u&&"function"!=typeof u||null==u)&&(u={});c<f;++c)if(null!=(t=arguments[c]))for(r in t)n=u[r],u!==(o=t[r])&&(h&&o&&(a(o)||(s=i(o)))?(s?(s=!1,l=n&&i(n)?n:[]):l=n&&a(n)?n:{},u[r]=e(h,l,o)):void 0!==o&&(u[r]=o));return u}},function(e,t,r){"use strict";function n(){return null}function i(e){var t={};return t._stackFrame=e,t.url=e.fileName,t.line=e.lineNumber,t.func=e.functionName,t.column=e.columnNumber,t.args=e.args,t.context=(t.url,t.line,null),t}function a(e){return{stack:function(){var t=[];try{t=o.parse(e)}catch(e){t=[]}for(var r=[],n=0;n<t.length;n++)r.push(new i(t[n]));return r}(),message:e.message,name:e.name}}var o=r(6),s="?",l=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");e.exports={guessFunctionName:function(){return s},guessErrorClass:function(e){if(!e)return["Unknown error. There was no error message to display.",""];var t=e.match(l),r="(unknown)";return t&&(r=t[t.length-1],e=(e=e.replace((t[t.length-2]||"")+r+":","")).replace(/(^[\s]+|[\s]+$)/g,"")),[r,e]},gatherContext:n,parse:function(e){return new a(e)},Stack:a,Frame:i}},function(e,t,r){var n,i,a;!function(o,s){"use strict";i=[r(7)],n=function(e){function t(e,t,r){if("function"==typeof Array.prototype.map)return e.map(t,r);for(var n=new Array(e.length),i=0;i<e.length;i++)n[i]=t.call(r,e[i]);return n}function r(e,t,r){if("function"==typeof Array.prototype.filter)return e.filter(t,r);for(var n=[],i=0;i<e.length;i++)t.call(r,e[i])&&n.push(e[i]);return n}var n=/(^|@)\S+\:\d+/,i=/^\s*at .*(\S+\:\d+|\(native\))/m,a=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(i))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=e.replace(/[\(\)\s]/g,"").split(":"),r=t.pop(),n=t[t.length-1];if(!isNaN(parseFloat(n))&&isFinite(n)){var i=t.pop();return[t.join(":"),i,r]}return[t.join(":"),r,void 0]},parseV8OrIE:function(n){var a=r(n.stack.split("\n"),function(e){return!!e.match(i)},this);return t(a,function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(r.pop()),i=r.join(" ")||void 0,a="eval"===n[0]?void 0:n[0];return new e(i,void 0,a,n[1],n[2],t)},this)},parseFFOrSafari:function(n){var i=r(n.stack.split("\n"),function(e){return!e.match(a)},this);return t(i,function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var r=t.split("@"),n=this.extractLocation(r.pop()),i=r.shift()||void 0;return new e(i,void 0,n[0],n[1],n[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),i=[],a=2,o=n.length;a<o;a+=2){var s=r.exec(n[a]);s&&i.push(new e(void 0,void 0,s[2],s[1],void 0,n[a]))}return i},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),i=[],a=0,o=n.length;a<o;a+=2){var s=r.exec(n[a]);s&&i.push(new e(s[3]||void 0,void 0,s[2],s[1],void 0,n[a]))}return i},parseOpera11:function(i){var a=r(i.stack.split("\n"),function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this);return t(a,function(t){var r,n=t.split("@"),i=this.extractLocation(n.pop()),a=n.shift()||"",o=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;a.match(/\(([^\)]*)\)/)&&(r=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e(o,s,i[0],i[1],i[2],t)},this)}}},void 0===(a="function"==typeof n?n.apply(t,i):n)||(e.exports=a)}()},function(e,t,r){var n,i,a;!function(r,o){"use strict";i=[],void 0===(a="function"==typeof(n=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,r,n,i,a){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==r&&this.setFileName(r),void 0!==n&&this.setLineNumber(n),void 0!==i&&this.setColumnNumber(i),void 0!==a&&this.setSource(a)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){var t=this.getFunctionName()||"{anonymous}",r="("+(this.getArgs()||[]).join(",")+")",n=this.getFileName()?"@"+this.getFileName():"",i=e(this.getLineNumber())?":"+this.getLineNumber():"",a=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return t+r+n+i+a}},t})?n.apply(t,i):n)||(e.exports=a)}()},function(e,t,r){"use strict";function n(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function i(e,t){return n(e)===t}function a(e){if(!i(e,"string"))throw new Error("received invalid input");for(var t=u,r=t.parser[t.strictMode?"strict":"loose"].exec(e),n={},a=14;a--;)n[t.key[a]]=r[a]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,function(e,r,i){r&&(n[t.q.name][r]=i)}),n}function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];"object"==typeof r?(r=l.stringify(r)).length>500&&(r=r.substr(0,500)+"..."):void 0===r&&(r="undefined"),e.push(r)}return e.join(" ")}r(9);var s=r(10),l=null,u={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},c={setupJSON:function(e){l=e},isType:i,parseUri:a,parseUriOptions:u,redact:function(e){return e=String(e),new Array(e.length+1).join("*")},sanitizeUrl:function(e){var t=a(e);return""===t.anchor&&(t.source=t.source.replace("#","")),t.source.replace("?"+t.query,"")},traverse:function e(t,r){var n,a,o,s=i(t,"object"),l=i(t,"array"),u=[];if(s)for(n in t)t.hasOwnProperty(n)&&u.push(n);else if(l)for(o=0;o<t.length;++o)u.push(o);for(o=0;o<u.length;++o)s=i(a=t[n=u[o]],"object"),l=i(a,"array"),t[n]=s||l?e(a,r):r(n,a);return t},typeName:n,uuid4:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:7&r|8).toString(16)})},objectCreate:function(e){return"function"!=typeof Object.create?(t=function(){},function(e){if(null!==e&&e!==Object(e))throw TypeError("Argument must be an object, or null");t.prototype=e||{};var r=new t;return t.prototype=null,null===e&&(r.__proto__=null),r})(e):Object.create(e);var t},consoleError:function(){s.ieVersion()<=8?console.error(o.apply(null,arguments)):console.error.apply(null,arguments)},consoleInfo:function(){s.ieVersion()<=8?console.info(o.apply(null,arguments)):console.info.apply(null,arguments)},consoleLog:function(){s.ieVersion()<=8?console.log(o.apply(null,arguments)):console.log.apply(null,arguments)}};e.exports=c},function(e,t){!function(e){"use strict";e.console||(e.console={});for(var t,r,n=e.console,i=function(){},a=["memory"],o="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=a.pop();)n[t]||(n[t]={});for(;r=o.pop();)n[r]||(n[r]=i)}("undefined"==typeof window?this:window)},function(e,t){"use strict";var r={ieVersion:function(){for(var e=3,t=document.createElement("div"),r=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",r[0];);return e>4?e:void 0}};e.exports=r},function(e,t,r){"use strict";function n(e){this.name="Connection Error",this.message=e,this.stack=(new Error).stack}var i=r(8),a=null;n.prototype=i.objectCreate(Error.prototype),n.prototype.constructor=n;var o={XMLHttpFactories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],createXMLHTTPObject:function(){var e,t=!1,r=o.XMLHttpFactories,n=r.length;for(e=0;e<n;e++)try{t=r[e]();break}catch(e){}return t},post:function(e,t,r,s){if(!i.isType(r,"object"))throw new Error("Expected an object to POST");r=a.stringify(r),s=s||function(){};var l=o.createXMLHTTPObject();if(l)try{try{var u=function(){try{if(u&&4===l.readyState){u=void 0;var e=a.parse(l.responseText);200===l.status?s(null,e):i.isType(l.status,"number")&&l.status>=400&&l.status<600?(403==l.status&&i.consoleError("[Rollbar]:"+e.message),s(new Error(String(l.status)))):s(new n("XHR response had no status code (likely connection failure)"))}}catch(e){var t;t=e&&e.stack?e:new Error(e),s(t)}};l.open("POST",e,!0),l.setRequestHeader&&(l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("X-Rollbar-Access-Token",t)),l.onreadystatechange=u,l.send(r)}catch(t){if("undefined"!=typeof XDomainRequest){"http:"===window.location.href.substring(0,5)&&"https"===e.substring(0,5)&&(e="http"+e.substring(5));(l=new XDomainRequest).onprogress=function(){},l.ontimeout=function(){s(new n("Request timed out"))},l.onerror=function(){s(new Error("Error during request"))},l.onload=function(){s(null,a.parse(l.responseText))},l.open("POST",e,!0),l.send(r)}}}catch(e){s(e)}}};e.exports={XHR:o,setupJSON:function(e){a=e},ConnectionError:n}}])},e.exports=n()},function(e,t,r){(function(t){!function(){var r={getDataType:function(e){if("string"==typeof e)return"string";if(e instanceof Array)return"array";if(void 0!==t&&t.Buffer&&t.Buffer.isBuffer(e))return"buffer";if(e instanceof ArrayBuffer)return"arraybuffer";if(e.buffer instanceof ArrayBuffer)return"view";if(e instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};function n(e){"use strict";for(var t={fill:0},a=function(e){for(e+=9;e%64>0;e+=1);return e},o=function(e,t,r,n,i){var a,o=this,s=i%4,l=(n+s)%4,u=n-l;switch(s){case 0:e[i]=o[r+3];case 1:e[i+1-(s<<1)|0]=o[r+2];case 2:e[i+2-(s<<1)|0]=o[r+1];case 3:e[i+3-(s<<1)|0]=o[r]}if(!(n<l+s)){for(a=4-s;a<u;a=a+4|0)t[i+a>>2|0]=o[r+a]<<24|o[r+a+1]<<16|o[r+a+2]<<8|o[r+a+3];switch(l){case 3:e[i+u+1|0]=o[r+u+2];case 2:e[i+u+2|0]=o[r+u+1];case 1:e[i+u+3|0]=o[r+u]}}},s=function(e){switch(r.getDataType(e)){case"string":return function(e,t,r,n,i){var a,o=this,s=i%4,l=(n+s)%4,u=n-l;switch(s){case 0:e[i]=o.charCodeAt(r+3);case 1:e[i+1-(s<<1)|0]=o.charCodeAt(r+2);case 2:e[i+2-(s<<1)|0]=o.charCodeAt(r+1);case 3:e[i+3-(s<<1)|0]=o.charCodeAt(r)}if(!(n<l+s)){for(a=4-s;a<u;a=a+4|0)t[i+a>>2]=o.charCodeAt(r+a)<<24|o.charCodeAt(r+a+1)<<16|o.charCodeAt(r+a+2)<<8|o.charCodeAt(r+a+3);switch(l){case 3:e[i+u+1|0]=o.charCodeAt(r+u+2);case 2:e[i+u+2|0]=o.charCodeAt(r+u+1);case 1:e[i+u+3|0]=o.charCodeAt(r+u)}}}.bind(e);case"array":case"buffer":return o.bind(e);case"arraybuffer":return o.bind(new Uint8Array(e));case"view":return o.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return function(e,t,r,n,a){var o,s=a%4,l=(n+s)%4,u=n-l,c=new Uint8Array(i.readAsArrayBuffer(this.slice(r,r+n)));switch(s){case 0:e[a]=c[3];case 1:e[a+1-(s<<1)|0]=c[2];case 2:e[a+2-(s<<1)|0]=c[1];case 3:e[a+3-(s<<1)|0]=c[0]}if(!(n<l+s)){for(o=4-s;o<u;o=o+4|0)t[a+o>>2|0]=c[o]<<24|c[o+1]<<16|c[o+2]<<8|c[o+3];switch(l){case 3:e[a+u+1|0]=c[u+2];case 2:e[a+u+2|0]=c[u+1];case 1:e[a+u+3|0]=c[u]}}}.bind(e)}},l=new Array(256),u=0;u<256;u++)l[u]=(u<16?"0":"")+u.toString(16);var c=function(e){for(var t=new Uint8Array(e),r=new Array(e.byteLength),n=0;n<r.length;n++)r[n]=l[t[n]];return r.join("")};!function(e){if(e%64>0)throw new Error("Chunk size must be a multiple of 128 bit");t.offset=0,t.maxChunkLen=e,t.padMaxChunkLen=a(e),t.heap=new ArrayBuffer(function(e){var t;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t}(t.padMaxChunkLen+320+20)),t.h32=new Int32Array(t.heap),t.h8=new Int8Array(t.heap),t.core=new n._core({Int32Array:Int32Array,DataView:DataView},{},t.heap),t.buffer=null}(e||65536);var f=function(e,r){t.offset=0;var n=new Int32Array(e,r+320,5);n[0]=1732584193,n[1]=-271733879,n[2]=-1732584194,n[3]=271733878,n[4]=-1009589776},h=function(e,r){var n=a(e),i=new Int32Array(t.heap,0,n>>2);return function(e,t){var r=new Uint8Array(e.buffer),n=t%4,i=t-n;switch(n){case 0:r[i+3]=0;case 1:r[i+2]=0;case 2:r[i+1]=0;case 3:r[i+0]=0}for(var a=1+(t>>2);a<e.length;a++)e[a]=0}(i,e),function(e,t,r){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=r/(1<<29)|0,e[15+(2+(t>>2)&-16)]=r<<3}(i,e,r),n},d=function(e,r,n,i){s(e)(t.h8,t.h32,r,n,i||0)},p=function(e,r,n,i,a){var o=n;d(e,r,n),a&&(o=h(n,i)),t.core.hash(o,t.padMaxChunkLen)},m=function(e,t){var r=new Int32Array(e,t+320,5),n=new Int32Array(5),i=new DataView(n.buffer);return i.setInt32(0,r[0],!1),i.setInt32(4,r[1],!1),i.setInt32(8,r[2],!1),i.setInt32(12,r[3],!1),i.setInt32(16,r[4],!1),n},v=this.rawDigest=function(e){var r=e.byteLength||e.length||e.size||0;f(t.heap,t.padMaxChunkLen);var n=0,i=t.maxChunkLen;for(n=0;r>n+i;n+=i)p(e,n,i,r,!1);return p(e,n,r-n,r,!0),m(t.heap,t.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return c(v(e).buffer)},this.resetState=function(){return f(t.heap,t.padMaxChunkLen),this},this.append=function(e){var r,n=0,i=e.byteLength||e.length||e.size||0,a=t.offset%t.maxChunkLen;for(t.offset+=i;n<i;)r=Math.min(i-n,t.maxChunkLen-a),d(e,n,r,a),n+=r,(a+=r)===t.maxChunkLen&&(t.core.hash(t.maxChunkLen,t.padMaxChunkLen),a=0);return this},this.getState=function(){var e;if(t.offset%t.maxChunkLen)e=t.heap.slice(0);else{var r=new Int32Array(t.heap,t.padMaxChunkLen+320,5);e=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}return{offset:t.offset,heap:e}},this.setState=function(e){(t.offset=e.offset,20===e.heap.byteLength)?new Int32Array(t.heap,t.padMaxChunkLen+320,5).set(new Int32Array(e.heap)):t.h32.set(new Int32Array(e.heap));return this};var g=this.rawEnd=function(){var e=t.offset,r=e%t.maxChunkLen,n=h(r,e);t.core.hash(n,t.padMaxChunkLen);var i=m(t.heap,t.padMaxChunkLen);return f(t.heap,t.padMaxChunkLen),i};this.end=function(){return c(g().buffer)}}if(n._core=function(e,t,r){"use asm";var n=new e.Int32Array(r);function i(e,t){e=e|0;t=t|0;var r=0,i=0,a=0,o=0,s=0,l=0,u=0,c=0,f=0,h=0,d=0,p=0,m=0,v=0;a=n[t+320>>2]|0;s=n[t+324>>2]|0;u=n[t+328>>2]|0;f=n[t+332>>2]|0;d=n[t+336>>2]|0;for(r=0;(r|0)<(e|0);r=r+64|0){o=a;l=s;c=u;h=f;p=d;for(i=0;(i|0)<64;i=i+4|0){v=n[r+i>>2]|0;m=((a<<5|a>>>27)+(s&u|~s&f)|0)+((v+d|0)+1518500249|0)|0;d=f;f=u;u=s<<30|s>>>2;s=a;a=m;n[e+i>>2]=v}for(i=e+64|0;(i|0)<(e+80|0);i=i+4|0){v=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;m=((a<<5|a>>>27)+(s&u|~s&f)|0)+((v+d|0)+1518500249|0)|0;d=f;f=u;u=s<<30|s>>>2;s=a;a=m;n[i>>2]=v}for(i=e+80|0;(i|0)<(e+160|0);i=i+4|0){v=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;m=((a<<5|a>>>27)+(s^u^f)|0)+((v+d|0)+1859775393|0)|0;d=f;f=u;u=s<<30|s>>>2;s=a;a=m;n[i>>2]=v}for(i=e+160|0;(i|0)<(e+240|0);i=i+4|0){v=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;m=((a<<5|a>>>27)+(s&u|s&f|u&f)|0)+((v+d|0)-1894007588|0)|0;d=f;f=u;u=s<<30|s>>>2;s=a;a=m;n[i>>2]=v}for(i=e+240|0;(i|0)<(e+320|0);i=i+4|0){v=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;m=((a<<5|a>>>27)+(s^u^f)|0)+((v+d|0)-899497514|0)|0;d=f;f=u;u=s<<30|s>>>2;s=a;a=m;n[i>>2]=v}a=a+o|0;s=s+l|0;u=u+c|0;f=f+h|0;d=d+p|0}n[t+320>>2]=a;n[t+324>>2]=s;n[t+328>>2]=u;n[t+332>>2]=f;n[t+336>>2]=d}return{hash:i}},e.exports=n,"undefined"!=typeof FileReaderSync){var i=new FileReaderSync,a=function(e,t,r,n,i){var o=new self.FileReader;o.onloadend=function(){var s=o.result;t+=o.result.byteLength;try{e.append(s)}catch(e){return void i(e)}t<n.size?a(e,t,r,n,i):i(null,e.end())},o.readAsArrayBuffer(n.slice(t,t+r))};self.onmessage=function(e){var t=e.data.data,r=e.data.file,i=e.data.id;if(void 0!==i&&(r||t)){var o=e.data.blockSize||4194304,s=new n(o);s.resetState();var l=function(e,t){e?self.postMessage({id:i,error:e.name}):self.postMessage({id:i,hash:t})};t&&function(e,t,r){try{r(null,e.digest(t))}catch(e){return r(e)}}(s,t,l),r&&a(s,0,o,r,l)}}}}()}).call(t,r(49))},function(e,t,r){(function(e){!function(t){t.parser=function(e,t){return new a(e,t)},t.SAXParser=a,t.SAXStream=s,t.createStream=function(e,t){return new s(e,t)},t.MAX_BUFFER_LENGTH=65536;var n,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(e,r){if(!(this instanceof a))return new a(e,r);!function(e){for(var t=0,r=i.length;t<r;t++)e[i[t]]=""}(this),this.q=this.c="",this.bufferCheckPosition=t.MAX_BUFFER_LENGTH,this.opt=r||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!e,this.noscript=!(!e&&!this.opt.noscript),this.state=T.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(h)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),P(this,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),a.prototype={end:function(){O(this)},write:function(e){if(this.error)throw this.error;if(this.closed)return I(this,"Cannot write after close. Assign an onready handler.");if(null===e)return O(this);"object"==typeof e&&(e=e.toString());var r=0,n="";for(;n=z(e,r++),this.c=n,n;)switch(this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++),this.state){case T.BEGIN:if(this.state=T.BEGIN_WHITESPACE,"\ufeff"===n)continue;k(this,n);continue;case T.BEGIN_WHITESPACE:k(this,n);continue;case T.TEXT:if(this.sawRoot&&!this.closedRoot){for(var a=r-1;n&&"<"!==n&&"&"!==n;)(n=z(e,r++))&&this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++);this.textNode+=e.substring(a,r-1)}"<"!==n||this.sawRoot&&this.closedRoot&&!this.strict?(g(n)||this.sawRoot&&!this.closedRoot||L(this,"Text data outside of root node."),"&"===n?this.state=T.TEXT_ENTITY:this.textNode+=n):(this.state=T.OPEN_WAKA,this.startTagPosition=this.position);continue;case T.SCRIPT:"<"===n?this.state=T.SCRIPT_ENDING:this.script+=n;continue;case T.SCRIPT_ENDING:"/"===n?this.state=T.CLOSE_TAG:(this.script+="<"+n,this.state=T.SCRIPT);continue;case T.OPEN_WAKA:if("!"===n)this.state=T.SGML_DECL,this.sgmlDecl="";else if(g(n));else if(b(d,n))this.state=T.OPEN_TAG,this.tagName=n;else if("/"===n)this.state=T.CLOSE_TAG,this.tagName="";else if("?"===n)this.state=T.PROC_INST,this.procInstName=this.procInstBody="";else{if(L(this,"Unencoded <"),this.startTagPosition+1<this.position){var o=this.position-this.startTagPosition;n=new Array(o).join(" ")+n}this.textNode+="<"+n,this.state=T.TEXT}continue;case T.SGML_DECL:(this.sgmlDecl+n).toUpperCase()===l?(A(this,"onopencdata"),this.state=T.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+n==="--"?(this.state=T.COMMENT,this.comment="",this.sgmlDecl=""):(this.sgmlDecl+n).toUpperCase()===u?(this.state=T.DOCTYPE,(this.doctype||this.sawRoot)&&L(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===n?(A(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=T.TEXT):y(n)?(this.state=T.SGML_DECL_QUOTED,this.sgmlDecl+=n):this.sgmlDecl+=n;continue;case T.SGML_DECL_QUOTED:n===this.q&&(this.state=T.SGML_DECL,this.q=""),this.sgmlDecl+=n;continue;case T.DOCTYPE:">"===n?(this.state=T.TEXT,A(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=n,"["===n?this.state=T.DOCTYPE_DTD:y(n)&&(this.state=T.DOCTYPE_QUOTED,this.q=n));continue;case T.DOCTYPE_QUOTED:this.doctype+=n,n===this.q&&(this.q="",this.state=T.DOCTYPE);continue;case T.DOCTYPE_DTD:this.doctype+=n,"]"===n?this.state=T.DOCTYPE:y(n)&&(this.state=T.DOCTYPE_DTD_QUOTED,this.q=n);continue;case T.DOCTYPE_DTD_QUOTED:this.doctype+=n,n===this.q&&(this.state=T.DOCTYPE_DTD,this.q="");continue;case T.COMMENT:"-"===n?this.state=T.COMMENT_ENDING:this.comment+=n;continue;case T.COMMENT_ENDING:"-"===n?(this.state=T.COMMENT_ENDED,this.comment=R(this.opt,this.comment),this.comment&&A(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+n,this.state=T.COMMENT);continue;case T.COMMENT_ENDED:">"!==n?(L(this,"Malformed comment"),this.comment+="--"+n,this.state=T.COMMENT):this.state=T.TEXT;continue;case T.CDATA:"]"===n?this.state=T.CDATA_ENDING:this.cdata+=n;continue;case T.CDATA_ENDING:"]"===n?this.state=T.CDATA_ENDING_2:(this.cdata+="]"+n,this.state=T.CDATA);continue;case T.CDATA_ENDING_2:">"===n?(this.cdata&&A(this,"oncdata",this.cdata),A(this,"onclosecdata"),this.cdata="",this.state=T.TEXT):"]"===n?this.cdata+="]":(this.cdata+="]]"+n,this.state=T.CDATA);continue;case T.PROC_INST:"?"===n?this.state=T.PROC_INST_ENDING:g(n)?this.state=T.PROC_INST_BODY:this.procInstName+=n;continue;case T.PROC_INST_BODY:if(!this.procInstBody&&g(n))continue;"?"===n?this.state=T.PROC_INST_ENDING:this.procInstBody+=n;continue;case T.PROC_INST_ENDING:">"===n?(A(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=T.TEXT):(this.procInstBody+="?"+n,this.state=T.PROC_INST_BODY);continue;case T.OPEN_TAG:b(p,n)?this.tagName+=n:(D(this),">"===n?F(this):"/"===n?this.state=T.OPEN_TAG_SLASH:(g(n)||L(this,"Invalid character in tag name"),this.state=T.ATTRIB));continue;case T.OPEN_TAG_SLASH:">"===n?(F(this,!0),B(this)):(L(this,"Forward-slash in opening tag not followed by >"),this.state=T.ATTRIB);continue;case T.ATTRIB:if(g(n))continue;">"===n?F(this):"/"===n?this.state=T.OPEN_TAG_SLASH:b(d,n)?(this.attribName=n,this.attribValue="",this.state=T.ATTRIB_NAME):L(this,"Invalid attribute name");continue;case T.ATTRIB_NAME:"="===n?this.state=T.ATTRIB_VALUE:">"===n?(L(this,"Attribute without value"),this.attribValue=this.attribName,V(this),F(this)):g(n)?this.state=T.ATTRIB_NAME_SAW_WHITE:b(p,n)?this.attribName+=n:L(this,"Invalid attribute name");continue;case T.ATTRIB_NAME_SAW_WHITE:if("="===n)this.state=T.ATTRIB_VALUE;else{if(g(n))continue;L(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",A(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===n?F(this):b(d,n)?(this.attribName=n,this.state=T.ATTRIB_NAME):(L(this,"Invalid attribute name"),this.state=T.ATTRIB)}continue;case T.ATTRIB_VALUE:if(g(n))continue;y(n)?(this.q=n,this.state=T.ATTRIB_VALUE_QUOTED):(L(this,"Unquoted attribute value"),this.state=T.ATTRIB_VALUE_UNQUOTED,this.attribValue=n);continue;case T.ATTRIB_VALUE_QUOTED:if(n!==this.q){"&"===n?this.state=T.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=n;continue}V(this),this.q="",this.state=T.ATTRIB_VALUE_CLOSED;continue;case T.ATTRIB_VALUE_CLOSED:g(n)?this.state=T.ATTRIB:">"===n?F(this):"/"===n?this.state=T.OPEN_TAG_SLASH:b(d,n)?(L(this,"No whitespace between attributes"),this.attribName=n,this.attribValue="",this.state=T.ATTRIB_NAME):L(this,"Invalid attribute name");continue;case T.ATTRIB_VALUE_UNQUOTED:if(!x(n)){"&"===n?this.state=T.ATTRIB_VALUE_ENTITY_U:this.attribValue+=n;continue}V(this),">"===n?F(this):this.state=T.ATTRIB;continue;case T.CLOSE_TAG:if(this.tagName)">"===n?B(this):b(p,n)?this.tagName+=n:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=T.SCRIPT):(g(n)||L(this,"Invalid tagname in closing tag"),this.state=T.CLOSE_TAG_SAW_WHITE);else{if(g(n))continue;w(d,n)?this.script?(this.script+="</"+n,this.state=T.SCRIPT):L(this,"Invalid tagname in closing tag."):this.tagName=n}continue;case T.CLOSE_TAG_SAW_WHITE:if(g(n))continue;">"===n?B(this):L(this,"Invalid characters in closing tag");continue;case T.TEXT_ENTITY:case T.ATTRIB_VALUE_ENTITY_Q:case T.ATTRIB_VALUE_ENTITY_U:var s,c;switch(this.state){case T.TEXT_ENTITY:s=T.TEXT,c="textNode";break;case T.ATTRIB_VALUE_ENTITY_Q:s=T.ATTRIB_VALUE_QUOTED,c="attribValue";break;case T.ATTRIB_VALUE_ENTITY_U:s=T.ATTRIB_VALUE_UNQUOTED,c="attribValue"}";"===n?(this[c]+=U(this),this.entity="",this.state=s):b(this.entity.length?v:m,n)?this.entity+=n:(L(this,"Invalid character in entity name"),this[c]+="&"+this.entity+n,this.entity="",this.state=s);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(e){for(var r=Math.max(t.MAX_BUFFER_LENGTH,10),n=0,a=0,o=i.length;a<o;a++){var s=e[i[a]].length;if(s>r)switch(i[a]){case"textNode":C(e);break;case"cdata":A(e,"oncdata",e.cdata),e.cdata="";break;case"script":A(e,"onscript",e.script),e.script="";break;default:I(e,"Max buffer length exceeded: "+i[a])}n=Math.max(n,s)}var l=t.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=l+e.position}(this);return this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;C(e=this),""!==e.cdata&&(A(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(A(e,"onscript",e.script),e.script="")}};try{n=r(854).Stream}catch(e){n=function(){}}var o=t.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function s(e,t){if(!(this instanceof s))return new s(e,t);n.apply(this),this._parser=new a(e,t),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,o.forEach(function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t)},enumerable:!0,configurable:!1})})}s.prototype=Object.create(n.prototype,{constructor:{value:s}}),s.prototype.write=function(t){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var n=r(250).StringDecoder;this._decoder=new n("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===o.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),n.prototype.on.call(r,e,t)};var l="[CDATA[",u="DOCTYPE",c="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",h={xml:c,xmlns:f},d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function g(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function y(e){return'"'===e||"'"===e}function x(e){return">"===e||g(e)}function b(e,t){return e.test(t)}function w(e,t){return!b(e,t)}var _,M,S,T=0;for(var E in t.STATE={BEGIN:T++,BEGIN_WHITESPACE:T++,TEXT:T++,TEXT_ENTITY:T++,OPEN_WAKA:T++,SGML_DECL:T++,SGML_DECL_QUOTED:T++,DOCTYPE:T++,DOCTYPE_QUOTED:T++,DOCTYPE_DTD:T++,DOCTYPE_DTD_QUOTED:T++,COMMENT_STARTING:T++,COMMENT:T++,COMMENT_ENDING:T++,COMMENT_ENDED:T++,CDATA:T++,CDATA_ENDING:T++,CDATA_ENDING_2:T++,PROC_INST:T++,PROC_INST_BODY:T++,PROC_INST_ENDING:T++,OPEN_TAG:T++,OPEN_TAG_SLASH:T++,ATTRIB:T++,ATTRIB_NAME:T++,ATTRIB_NAME_SAW_WHITE:T++,ATTRIB_VALUE:T++,ATTRIB_VALUE_QUOTED:T++,ATTRIB_VALUE_CLOSED:T++,ATTRIB_VALUE_UNQUOTED:T++,ATTRIB_VALUE_ENTITY_Q:T++,ATTRIB_VALUE_ENTITY_U:T++,CLOSE_TAG:T++,CLOSE_TAG_SAW_WHITE:T++,SCRIPT:T++,SCRIPT_ENDING:T++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(e){var r=t.ENTITIES[e],n="number"==typeof r?String.fromCharCode(r):r;t.ENTITIES[e]=n}),t.STATE)t.STATE[t.STATE[E]]=E;function P(e,t,r){e[t]&&e[t](r)}function A(e,t,r){e.textNode&&C(e),P(e,t,r)}function C(e){e.textNode=R(e.opt,e.textNode),e.textNode&&P(e,"ontext",e.textNode),e.textNode=""}function R(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function I(e,t){return C(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,P(e,"onerror",t),e}function O(e){return e.sawRoot&&!e.closedRoot&&L(e,"Unclosed root tag"),e.state!==T.BEGIN&&e.state!==T.BEGIN_WHITESPACE&&e.state!==T.TEXT&&I(e,"Unexpected end"),C(e),e.c="",e.closed=!0,P(e,"onend"),a.call(e,e.strict,e.opt),e}function L(e,t){if("object"!=typeof e||!(e instanceof a))throw new Error("bad call to strictFail");e.strict&&I(e,t)}function D(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,A(e,"onopentagstart",r)}function N(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),n=r[0],i=r[1];return t&&"xmlns"===e&&(n="xmlns",i=""),{prefix:n,local:i}}function V(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=N(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r)if("xml"===n&&e.attribValue!==c)L(e,"xml: prefix must be bound to "+c+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==f)L(e,"xmlns: prefix must be bound to "+f+"\nActual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,A(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function F(e,t){if(e.opt.xmlns){var r=e.tag,n=N(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(L(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var i=e.tags[e.tags.length-1]||e;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach(function(t){A(e,"onopennamespace",{prefix:t,uri:r.ns[t]})});for(var a=0,o=e.attribList.length;a<o;a++){var s=e.attribList[a],l=s[0],u=s[1],c=N(l,!0),f=c.prefix,h=c.local,d=""===f?"":r.ns[f]||"",p={name:l,value:u,prefix:f,local:h,uri:d};f&&"xmlns"!==f&&!d&&(L(e,"Unbound namespace prefix: "+JSON.stringify(f)),p.uri=f),e.tag.attributes[l]=p,A(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),A(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=T.TEXT:e.state=T.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function B(e){if(!e.tagName)return L(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=T.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=T.SCRIPT);A(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--;){if(e.tags[t].name===n)break;L(e,"Unexpected close tag")}if(t<0)return L(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=T.TEXT);e.tagName=r;for(var i=e.tags.length;i-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,A(e,"onclosetag",e.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==l.ns&&Object.keys(a.ns).forEach(function(t){var r=a.ns[t];A(e,"onclosenamespace",{prefix:t,uri:r})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=T.TEXT}function U(e){var t,r=e.entity,n=r.toLowerCase(),i="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),i=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),i=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==r?(L(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function k(e,t){"<"===t?(e.state=T.OPEN_WAKA,e.startTagPosition=e.position):g(t)||(L(e,"Non-whitespace before first tag."),e.textNode=t,e.state=T.TEXT)}function z(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}T=t.STATE,String.fromCodePoint||(_=String.fromCharCode,M=Math.floor,S=function(){var e,t,r=[],n=-1,i=arguments.length;if(!i)return"";for(var a="";++n<i;){var o=Number(arguments[n]);if(!isFinite(o)||o<0||o>1114111||M(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?r.push(o):(e=55296+((o-=65536)>>10),t=o%1024+56320,r.push(e,t)),(n+1===i||r.length>16384)&&(a+=_.apply(null,r),r.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:S,configurable:!0,writable:!0}):String.fromCodePoint=S)}(t)}).call(t,r(57).Buffer)},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i,a,o,s,l=1,u={},c=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},n=function(e){a.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,n=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):n=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(o+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return u[l]=i,n(l),l++},h.clearImmediate=d}function d(e){delete u[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{d(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(49),r(88))},function(e,t,r){"use strict";var n={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,r){e.insertBefore(t,r)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}};t.a=n},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(371);function i(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}function a(e){var t=e.data;i(t.fn.apply(void 0,t.args),e)}function o(e,t){var r,n=e.data,a=t.data,o=n.args,s=a.args;if(n.fn===a.fn&&o.length===s.length){for(r=0;r<s.length;++r)if(o[r]!==s[r])return void i(a.fn.apply(void 0,s),t);i(e,t)}else i(a.fn.apply(void 0,s),t)}var s=function(e,t,i,s){return void 0===s&&(s=i,i=t,t=void 0),r.i(n.a)(e,{key:t,hook:{init:a,prepatch:o},fn:i,args:s})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.array=Array.isArray,t.primitive=function(e){return"string"==typeof e||"number"==typeof e}},function(e,t,r){"use strict";function n(e,t,r,n,i){return{sel:e,data:t,children:r,text:n,elm:i,key:void 0===t?void 0:t.key}}Object.defineProperty(t,"__esModule",{value:!0}),t.vnode=n,t.default=n},function(e,t,r){e.exports=i;var n=r(163).EventEmitter;function i(){n.call(this)}r(107)(i,n),i.Readable=r(247),i.Writable=r(844),i.Duplex=r(839),i.Transform=r(843),i.PassThrough=r(842),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function a(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",l));var o=!1;function s(){o||(o=!0,e.end())}function l(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",i),e.removeListener("drain",a),r.removeListener("end",s),r.removeListener("close",l),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}},function(e,t,r){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,r){var n=r(834);"string"==typeof n&&(n=[[e.i,n,""]]);r(402)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"SVGPathData",function(){return E}),r.d(t,"COMMAND_ARG_COUNTS",function(){return P}),r.d(t,"encodeSVGPath",function(){return T}),r.d(t,"SVGPathDataParser",function(){return w}),r.d(t,"SVGPathDataTransformer",function(){return c});var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function a(e,t){var r=e[0],n=e[1];return[r*Math.cos(t)-n*Math.sin(t),r*Math.sin(t)+n*Math.cos(t)]}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;r++)if("number"!=typeof e[r])throw new Error("assertNumbers arguments["+r+"] is not a number. "+typeof e[r]+" == typeof "+e[r]);return!0}var s=Math.PI;function l(e,t,r){e.lArcFlag=0===e.lArcFlag?0:1,e.sweepFlag=0===e.sweepFlag?0:1;var n=e.rX,i=e.rY,o=e.x,l=e.y;n=Math.abs(e.rX),i=Math.abs(e.rY);var u=a([(t-o)/2,(r-l)/2],-e.xRot/180*s),c=u[0],f=u[1],h=Math.pow(c,2)/Math.pow(n,2)+Math.pow(f,2)/Math.pow(i,2);1<h&&(n*=Math.sqrt(h),i*=Math.sqrt(h)),e.rX=n,e.rY=i;var d=Math.pow(n,2)*Math.pow(f,2)+Math.pow(i,2)*Math.pow(c,2),p=(e.lArcFlag!==e.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(n,2)*Math.pow(i,2)-d)/d)),m=n*f/i*p,v=-i*c/n*p,g=a([m,v],e.xRot/180*s);e.cX=g[0]+(t+o)/2,e.cY=g[1]+(r+l)/2,e.phi1=Math.atan2((f-v)/i,(c-m)/n),e.phi2=Math.atan2((-f-v)/i,(-c-m)/n),0===e.sweepFlag&&e.phi2>e.phi1&&(e.phi2-=2*s),1===e.sweepFlag&&e.phi2<e.phi1&&(e.phi2+=2*s),e.phi1*=180/s,e.phi2*=180/s}function u(e,t,r){o(e,t,r);var n=e*e+t*t-r*r;if(0>n)return[];if(0===n)return[[e*r/(e*e+t*t),t*r/(e*e+t*t)]];var i=Math.sqrt(n);return[[(e*r+t*i)/(e*e+t*t),(t*r-e*i)/(e*e+t*t)],[(e*r-t*i)/(e*e+t*t),(t*r+e*i)/(e*e+t*t)]]}var c,f=Math.PI/180;function h(e,t,r){return(1-r)*e+r*t}function d(e,t,r,n){return e+Math.cos(n/180*s)*t+Math.sin(n/180*s)*r}function p(e,t,r,n){var i=t-e,a=r-t,o=3*i+3*(n-r)-6*a,s=6*(a-i),l=3*i;return Math.abs(o)<1e-6?[-l/s]:function(e,t,r){void 0===r&&(r=1e-6);var n=e*e/4-t;if(n<-r)return[];if(n<=r)return[-e/2];var i=Math.sqrt(n);return[-e/2-i,-e/2+i]}(s/o,l/o,1e-6)}function m(e,t,r,n,i){var a=1-i;return e*(a*a*a)+t*(3*a*a*i)+r*(3*a*i*i)+n*(i*i*i)}!function(e){function t(){return i(function(e,t,r){return e.relative&&(void 0!==e.x1&&(e.x1+=t),void 0!==e.y1&&(e.y1+=r),void 0!==e.x2&&(e.x2+=t),void 0!==e.y2&&(e.y2+=r),void 0!==e.x&&(e.x+=t),void 0!==e.y&&(e.y+=r),e.relative=!1),e})}function r(){var e=NaN,t=NaN,r=NaN,n=NaN;return i(function(i,a,o){return i.type&_.SMOOTH_CURVE_TO&&(i.type=_.CURVE_TO,e=isNaN(e)?a:e,t=isNaN(t)?o:t,i.x1=i.relative?a-e:2*a-e,i.y1=i.relative?o-t:2*o-t),i.type&_.CURVE_TO?(e=i.relative?a+i.x2:i.x2,t=i.relative?o+i.y2:i.y2):(e=NaN,t=NaN),i.type&_.SMOOTH_QUAD_TO&&(i.type=_.QUAD_TO,r=isNaN(r)?a:r,n=isNaN(n)?o:n,i.x1=i.relative?a-r:2*a-r,i.y1=i.relative?o-n:2*o-n),i.type&_.QUAD_TO?(r=i.relative?a+i.x1:i.x1,n=i.relative?o+i.y1:i.y1):(r=NaN,n=NaN),i})}function n(){var e=NaN,t=NaN;return i(function(r,n,i){if(r.type&_.SMOOTH_QUAD_TO&&(r.type=_.QUAD_TO,e=isNaN(e)?n:e,t=isNaN(t)?i:t,r.x1=r.relative?n-e:2*n-e,r.y1=r.relative?i-t:2*i-t),r.type&_.QUAD_TO){e=r.relative?n+r.x1:r.x1,t=r.relative?i+r.y1:r.y1;var a=r.x1,o=r.y1;r.type=_.CURVE_TO,r.x1=((r.relative?0:n)+2*a)/3,r.y1=((r.relative?0:i)+2*o)/3,r.x2=(r.x+2*a)/3,r.y2=(r.y+2*o)/3}else e=NaN,t=NaN;return r})}function i(e){var t=0,r=0,n=NaN,i=NaN;return function(a){if(isNaN(n)&&!(a.type&_.MOVE_TO))throw new Error("path must start with moveto");var o=e(a,t,r,n,i);return a.type&_.CLOSE_PATH&&(t=n,r=i),void 0!==a.x&&(t=a.relative?t+a.x:a.x),void 0!==a.y&&(r=a.relative?r+a.y:a.y),a.type&_.MOVE_TO&&(n=t,i=r),o}}function s(e,t,r,n,a,s){return o(e,t,r,n,a,s),i(function(i,o,l,u){var c=i.x1,f=i.x2,h=i.relative&&!isNaN(u),d=void 0!==i.x?i.x:h?0:o,p=void 0!==i.y?i.y:h?0:l;function m(e){return e*e}i.type&_.HORIZ_LINE_TO&&0!==t&&(i.type=_.LINE_TO,i.y=i.relative?0:l),i.type&_.VERT_LINE_TO&&0!==r&&(i.type=_.LINE_TO,i.x=i.relative?0:o),void 0!==i.x&&(i.x=i.x*e+p*r+(h?0:a)),void 0!==i.y&&(i.y=d*t+i.y*n+(h?0:s)),void 0!==i.x1&&(i.x1=i.x1*e+i.y1*r+(h?0:a)),void 0!==i.y1&&(i.y1=c*t+i.y1*n+(h?0:s)),void 0!==i.x2&&(i.x2=i.x2*e+i.y2*r+(h?0:a)),void 0!==i.y2&&(i.y2=f*t+i.y2*n+(h?0:s));var v=e*n-t*r;if(void 0!==i.xRot&&(1!==e||0!==t||0!==r||1!==n))if(0===v)delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag,i.type=_.LINE_TO;else{var g=i.xRot*Math.PI/180,y=Math.sin(g),x=Math.cos(g),b=1/m(i.rX),w=1/m(i.rY),M=m(x)*b+m(y)*w,S=2*y*x*(b-w),T=m(y)*b+m(x)*w,E=M*n*n-S*t*n+T*t*t,P=S*(e*n+t*r)-2*(M*r*n+T*e*t),A=M*r*r-S*e*r+T*e*e,C=(Math.atan2(P,E-A)+Math.PI)%Math.PI/2,R=Math.sin(C),I=Math.cos(C);i.rX=Math.abs(v)/Math.sqrt(E*m(I)+P*R*I+A*m(R)),i.rY=Math.abs(v)/Math.sqrt(E*m(R)-P*R*I+A*m(I)),i.xRot=180*C/Math.PI}return void 0!==i.sweepFlag&&0>v&&(i.sweepFlag=+!i.sweepFlag),i})}e.ROUND=function(e){function t(t){return Math.round(t*e)/e}return void 0===e&&(e=1e13),o(e),function(e){return void 0!==e.x1&&(e.x1=t(e.x1)),void 0!==e.y1&&(e.y1=t(e.y1)),void 0!==e.x2&&(e.x2=t(e.x2)),void 0!==e.y2&&(e.y2=t(e.y2)),void 0!==e.x&&(e.x=t(e.x)),void 0!==e.y&&(e.y=t(e.y)),e}},e.TO_ABS=t,e.TO_REL=function(){return i(function(e,t,r){return e.relative||(void 0!==e.x1&&(e.x1-=t),void 0!==e.y1&&(e.y1-=r),void 0!==e.x2&&(e.x2-=t),void 0!==e.y2&&(e.y2-=r),void 0!==e.x&&(e.x-=t),void 0!==e.y&&(e.y-=r),e.relative=!0),e})},e.NORMALIZE_HVZ=function(e,t,r){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),i(function(n,i,a,o,s){if(isNaN(o)&&!(n.type&_.MOVE_TO))throw new Error("path must start with moveto");return t&&n.type&_.HORIZ_LINE_TO&&(n.type=_.LINE_TO,n.y=n.relative?0:a),r&&n.type&_.VERT_LINE_TO&&(n.type=_.LINE_TO,n.x=n.relative?0:i),e&&n.type&_.CLOSE_PATH&&(n.type=_.LINE_TO,n.x=n.relative?o-i:o,n.y=n.relative?s-a:s),n.type&_.ARC&&(0===n.rX||0===n.rY)&&(n.type=_.LINE_TO,delete n.rX,delete n.rY,delete n.xRot,delete n.lArcFlag,delete n.sweepFlag),n})},e.NORMALIZE_ST=r,e.QT_TO_C=n,e.INFO=i,e.SANITIZE=function(e){void 0===e&&(e=0),o(e);var t=NaN,r=NaN,n=NaN,a=NaN;return i(function(i,o,s,l,u){var c=Math.abs,f=!1,h=0,d=0;if(i.type&_.SMOOTH_CURVE_TO&&(h=isNaN(t)?0:o-t,d=isNaN(r)?0:s-r),i.type&(_.CURVE_TO|_.SMOOTH_CURVE_TO)?(t=i.relative?o+i.x2:i.x2,r=i.relative?s+i.y2:i.y2):(t=NaN,r=NaN),i.type&_.SMOOTH_QUAD_TO?(n=isNaN(n)?o:2*o-n,a=isNaN(a)?s:2*s-a):i.type&_.QUAD_TO?(n=i.relative?o+i.x1:i.x1,a=i.relative?s+i.y1:i.y2):(n=NaN,a=NaN),i.type&_.LINE_COMMANDS||i.type&_.ARC&&(0===i.rX||0===i.rY||!i.lArcFlag)||i.type&_.CURVE_TO||i.type&_.SMOOTH_CURVE_TO||i.type&_.QUAD_TO||i.type&_.SMOOTH_QUAD_TO){var p=void 0===i.x?0:i.relative?i.x:i.x-o,m=void 0===i.y?0:i.relative?i.y:i.y-s;h=isNaN(n)?void 0===i.x1?h:i.relative?i.x:i.x1-o:n-o,d=isNaN(a)?void 0===i.y1?d:i.relative?i.y:i.y1-s:a-s;var v=void 0===i.x2?0:i.relative?i.x:i.x2-o,g=void 0===i.y2?0:i.relative?i.y:i.y2-s;c(p)<=e&&c(m)<=e&&c(h)<=e&&c(d)<=e&&c(v)<=e&&c(g)<=e&&(f=!0)}return i.type&_.CLOSE_PATH&&c(o-l)<=e&&c(s-u)<=e&&(f=!0),f?[]:i})},e.MATRIX=s,e.ROTATE=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),o(e,t,r);var n=Math.sin(e),i=Math.cos(e);return s(i,n,-n,i,t-t*i+r*n,r-t*n-r*i)},e.TRANSLATE=function(e,t){return void 0===t&&(t=0),o(e,t),s(1,0,0,1,e,t)},e.SCALE=function(e,t){return void 0===t&&(t=e),o(e,t),s(e,0,0,t,0,0)},e.SKEW_X=function(e){return o(e),s(1,0,Math.atan(e),1,0,0)},e.SKEW_Y=function(e){return o(e),s(1,Math.atan(e),0,1,0,0)},e.X_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),o(e),s(-1,0,0,1,e,0)},e.Y_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),o(e),s(1,0,0,-1,0,e)},e.A_TO_C=function(){return i(function(e,t,r){return _.ARC===e.type?function(e,t,r){var n,i,o,s;e.cX||l(e,t,r);for(var u=Math.min(e.phi1,e.phi2),c=Math.max(e.phi1,e.phi2)-u,d=Math.ceil(c/90),p=new Array(d),m=t,v=r,g=0;g<d;g++){var y=h(e.phi1,e.phi2,g/d),x=h(e.phi1,e.phi2,(g+1)/d),b=x-y,w=4/3*Math.tan(b*f/4),M=[Math.cos(y*f)-w*Math.sin(y*f),Math.sin(y*f)+w*Math.cos(y*f)],S=M[0],T=M[1],E=[Math.cos(x*f),Math.sin(x*f)],P=E[0],A=E[1],C=[P+w*Math.sin(x*f),A-w*Math.cos(x*f)],R=C[0],I=C[1];p[g]={relative:e.relative,type:_.CURVE_TO};var O=function(t,r){var n=a([t*e.rX,r*e.rY],e.xRot),i=n[0],o=n[1];return[e.cX+i,e.cY+o]};n=O(S,T),p[g].x1=n[0],p[g].y1=n[1],i=O(R,I),p[g].x2=i[0],p[g].y2=i[1],o=O(P,A),p[g].x=o[0],p[g].y=o[1],e.relative&&(p[g].x1-=m,p[g].y1-=v,p[g].x2-=m,p[g].y2-=v,p[g].x-=m,p[g].y-=v),m=(s=[p[g].x,p[g].y])[0],v=s[1]}return p}(e,e.relative?0:t,e.relative?0:r):e})},e.ANNOTATE_ARCS=function(){return i(function(e,t,r){return e.relative&&(t=0,r=0),_.ARC===e.type&&l(e,t,r),e})},e.CLONE=function(){return function(e){var t={};for(var r in e)t[r]=e[r];return t}},e.CALCULATE_BOUNDS=function(){var e=t(),a=n(),o=r(),s=i(function(t,r,n){var i=o(a(e(function(e){var t={};for(var r in e)t[r]=e[r];return t}(t))));function c(e){e>s.maxX&&(s.maxX=e),e<s.minX&&(s.minX=e)}function f(e){e>s.maxY&&(s.maxY=e),e<s.minY&&(s.minY=e)}if(i.type&_.DRAWING_COMMANDS&&(c(r),f(n)),i.type&_.HORIZ_LINE_TO&&c(i.x),i.type&_.VERT_LINE_TO&&f(i.y),i.type&_.LINE_TO&&(c(i.x),f(i.y)),i.type&_.CURVE_TO){c(i.x),f(i.y);for(var h=0,v=p(r,i.x1,i.x2,i.x);h<v.length;h++)0<(L=v[h])&&1>L&&c(m(r,i.x1,i.x2,i.x,L));for(var g=0,y=p(n,i.y1,i.y2,i.y);g<y.length;g++)0<(L=y[g])&&1>L&&f(m(n,i.y1,i.y2,i.y,L))}if(i.type&_.ARC){c(i.x),f(i.y),l(i,r,n);for(var x=i.xRot/180*Math.PI,b=Math.cos(x)*i.rX,w=Math.sin(x)*i.rX,M=-Math.sin(x)*i.rY,S=Math.cos(x)*i.rY,T=i.phi1<i.phi2?[i.phi1,i.phi2]:-180>i.phi2?[i.phi2+360,i.phi1+360]:[i.phi2,i.phi1],E=T[0],P=T[1],A=function(e){var t=e[0],r=e[1],n=180*Math.atan2(r,t)/Math.PI;return n<E?n+360:n},C=0,R=u(M,-b,0).map(A);C<R.length;C++)(L=R[C])>E&&L<P&&c(d(i.cX,b,M,L));for(var I=0,O=u(S,-w,0).map(A);I<O.length;I++){var L;(L=O[I])>E&&L<P&&f(d(i.cY,w,S,L))}}return t});return s.minX=1/0,s.maxX=-1/0,s.minY=1/0,s.maxY=-1/0,s}}(c||(c={}));var v,g,y=function(){function e(){}return e.prototype.round=function(e){return this.transform(c.ROUND(e))},e.prototype.toAbs=function(){return this.transform(c.TO_ABS())},e.prototype.toRel=function(){return this.transform(c.TO_REL())},e.prototype.normalizeHVZ=function(e,t,r){return this.transform(c.NORMALIZE_HVZ(e,t,r))},e.prototype.normalizeST=function(){return this.transform(c.NORMALIZE_ST())},e.prototype.qtToC=function(){return this.transform(c.QT_TO_C())},e.prototype.aToC=function(){return this.transform(c.A_TO_C())},e.prototype.sanitize=function(e){return this.transform(c.SANITIZE(e))},e.prototype.translate=function(e,t){return this.transform(c.TRANSLATE(e,t))},e.prototype.scale=function(e,t){return this.transform(c.SCALE(e,t))},e.prototype.rotate=function(e,t,r){return this.transform(c.ROTATE(e,t,r))},e.prototype.matrix=function(e,t,r,n,i,a){return this.transform(c.MATRIX(e,t,r,n,i,a))},e.prototype.skewX=function(e){return this.transform(c.SKEW_X(e))},e.prototype.skewY=function(e){return this.transform(c.SKEW_Y(e))},e.prototype.xSymmetry=function(e){return this.transform(c.X_AXIS_SYMMETRY(e))},e.prototype.ySymmetry=function(e){return this.transform(c.Y_AXIS_SYMMETRY(e))},e.prototype.annotateArcs=function(){return this.transform(c.ANNOTATE_ARCS())},e}(),x=function(e){return" "===e||"\t"===e||"\r"===e||"\n"===e},b=function(e){return"0".charCodeAt(0)<=e.charCodeAt(0)&&e.charCodeAt(0)<="9".charCodeAt(0)},w=function(e){function t(){var t=e.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return i(t,e),t.prototype.finish=function(e){if(void 0===e&&(e=[]),this.parse(" ",e),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,t){var r=this;void 0===t&&(t=[]);for(var n=function(e){t.push(e),r.curArgs.length=0,r.canParseCommandOrComma=!0},i=0;i<e.length;i++){var a=e[i];if(b(a))this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp;else if("e"!==a&&"E"!==a)if("-"!==a&&"+"!==a||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==a||this.curNumberHasExp||this.curNumberHasDecimal){if(this.curNumber&&-1!==this.curCommandType){var o=Number(this.curNumber);if(isNaN(o))throw new SyntaxError("Invalid number ending at "+i);if(this.curCommandType===_.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>o)throw new SyntaxError('Expected positive number, got "'+o+'" at index "'+i+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+i+'"');this.curArgs.push(o),this.curArgs.length===M[this.curCommandType]&&(_.HORIZ_LINE_TO===this.curCommandType?n({type:_.HORIZ_LINE_TO,relative:this.curCommandRelative,x:o}):_.VERT_LINE_TO===this.curCommandType?n({type:_.VERT_LINE_TO,relative:this.curCommandRelative,y:o}):this.curCommandType===_.MOVE_TO||this.curCommandType===_.LINE_TO||this.curCommandType===_.SMOOTH_QUAD_TO?(n({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),_.MOVE_TO===this.curCommandType&&(this.curCommandType=_.LINE_TO)):this.curCommandType===_.CURVE_TO?n({type:_.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===_.SMOOTH_CURVE_TO?n({type:_.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.QUAD_TO?n({type:_.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.ARC&&n({type:_.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!x(a))if(","===a&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==a&&"-"!==a&&"."!==a){if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+i+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+a+'" at index '+i+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==a&&"Z"!==a)if("h"===a||"H"===a)this.curCommandType=_.HORIZ_LINE_TO,this.curCommandRelative="h"===a;else if("v"===a||"V"===a)this.curCommandType=_.VERT_LINE_TO,this.curCommandRelative="v"===a;else if("m"===a||"M"===a)this.curCommandType=_.MOVE_TO,this.curCommandRelative="m"===a;else if("l"===a||"L"===a)this.curCommandType=_.LINE_TO,this.curCommandRelative="l"===a;else if("c"===a||"C"===a)this.curCommandType=_.CURVE_TO,this.curCommandRelative="c"===a;else if("s"===a||"S"===a)this.curCommandType=_.SMOOTH_CURVE_TO,this.curCommandRelative="s"===a;else if("q"===a||"Q"===a)this.curCommandType=_.QUAD_TO,this.curCommandRelative="q"===a;else if("t"===a||"T"===a)this.curCommandType=_.SMOOTH_QUAD_TO,this.curCommandRelative="t"===a;else{if("a"!==a&&"A"!==a)throw new SyntaxError('Unexpected character "'+a+'" at index '+i+".");this.curCommandType=_.ARC,this.curCommandRelative="a"===a}else t.push({type:_.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal="."===a}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0}return t},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(t,r){void 0===r&&(r=[]);for(var n=0,i=Object.getPrototypeOf(this).parse.call(this,t);n<i.length;n++){var a=i[n],o=e(a);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return r}}})},t}(y),_=function(e){function t(r){var n=e.call(this)||this;return n.commands="string"==typeof r?t.parse(r):r,n}return i(t,e),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=c.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var t=[],r=0,n=this.commands;r<n.length;r++){var i=e(n[r]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return this.commands=t,this},t.encode=function(e){return T(e)},t.parse=function(e){var t=new w,r=[];return t.parse(e,r),t.finish(r),r},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(y),M=((v={})[_.MOVE_TO]=2,v[_.LINE_TO]=2,v[_.HORIZ_LINE_TO]=1,v[_.VERT_LINE_TO]=1,v[_.CLOSE_PATH]=0,v[_.QUAD_TO]=4,v[_.SMOOTH_QUAD_TO]=2,v[_.CURVE_TO]=6,v[_.SMOOTH_CURVE_TO]=4,v[_.ARC]=7,v),S=" ";function T(e){var t="";Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var n=e[r];if(n.type===_.CLOSE_PATH)t+="z";else if(n.type===_.HORIZ_LINE_TO)t+=(n.relative?"h":"H")+n.x;else if(n.type===_.VERT_LINE_TO)t+=(n.relative?"v":"V")+n.y;else if(n.type===_.MOVE_TO)t+=(n.relative?"m":"M")+n.x+S+n.y;else if(n.type===_.LINE_TO)t+=(n.relative?"l":"L")+n.x+S+n.y;else if(n.type===_.CURVE_TO)t+=(n.relative?"c":"C")+n.x1+S+n.y1+S+n.x2+S+n.y2+S+n.x+S+n.y;else if(n.type===_.SMOOTH_CURVE_TO)t+=(n.relative?"s":"S")+n.x2+S+n.y2+S+n.x+S+n.y;else if(n.type===_.QUAD_TO)t+=(n.relative?"q":"Q")+n.x1+S+n.y1+S+n.x+S+n.y;else if(n.type===_.SMOOTH_QUAD_TO)t+=(n.relative?"t":"T")+n.x+S+n.y;else{if(n.type!==_.ARC)throw new Error('Unexpected command type "'+n.type+'" at index '+r+".");t+=(n.relative?"a":"A")+n.rX+S+n.rY+S+n.xRot+S+ +n.lArcFlag+S+ +n.sweepFlag+S+n.x+S+n.y}}return t}var E=function(e){function t(r){var n=e.call(this)||this;return n.commands="string"==typeof r?t.parse(r):r,n}return i(t,e),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=c.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var t=[],r=0,n=this.commands;r<n.length;r++){var i=e(n[r]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return this.commands=t,this},t.encode=function(e){return T(e)},t.parse=function(e){var t=new w,r=[];return t.parse(e,r),t.finish(r),r},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(y),P=((g={})[E.MOVE_TO]=2,g[E.LINE_TO]=2,g[E.HORIZ_LINE_TO]=1,g[E.VERT_LINE_TO]=1,g[E.CLOSE_PATH]=0,g[E.QUAD_TO]=4,g[E.SMOOTH_QUAD_TO]=2,g[E.CURVE_TO]=6,g[E.SMOOTH_CURVE_TO]=4,g[E.ARC]=7,g)},function(e,t){var r=0,n=-3;function i(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}var a=new i,o=new i,s=new Uint8Array(30),l=new Uint16Array(30),u=new Uint8Array(30),c=new Uint16Array(30),f=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=new i,d=new Uint8Array(320);function p(e,t,r,n){var i,a;for(i=0;i<r;++i)e[i]=0;for(i=0;i<30-r;++i)e[i+r]=i/r|0;for(a=n,i=0;i<30;++i)t[i]=a,a+=1<<e[i]}var m=new Uint16Array(16);function v(e,t,r,n){var i,a;for(i=0;i<16;++i)e.table[i]=0;for(i=0;i<n;++i)e.table[t[r+i]]++;for(e.table[0]=0,a=0,i=0;i<16;++i)m[i]=a,a+=e.table[i];for(i=0;i<n;++i)t[r+i]&&(e.trans[m[t[r+i]]++]=i)}function g(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function y(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function x(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,i=0,a=e.tag;do{n=2*n+(1&a),a>>>=1,++i,r+=t.table[i],n-=t.table[i]}while(n>=0);return e.tag=a,e.bitcount-=i,t.trans[r+n]}function b(e,t,r){var n,i,a,o,s,l;for(n=y(e,5,257),i=y(e,5,1),a=y(e,4,4),o=0;o<19;++o)d[o]=0;for(o=0;o<a;++o){var u=y(e,3,0);d[f[o]]=u}for(v(h,d,0,19),s=0;s<n+i;){var c=x(e,h);switch(c){case 16:var p=d[s-1];for(l=y(e,2,3);l;--l)d[s++]=p;break;case 17:for(l=y(e,3,3);l;--l)d[s++]=0;break;case 18:for(l=y(e,7,11);l;--l)d[s++]=0;break;default:d[s++]=c}}v(t,d,0,n),v(r,d,n,i)}function w(e,t,n){for(;;){var i,a,o,f,h=x(e,t);if(256===h)return r;if(h<256)e.dest[e.destLen++]=h;else for(i=y(e,s[h-=257],l[h]),a=x(e,n),f=o=e.destLen-y(e,u[a],c[a]);f<o+i;++f)e.dest[e.destLen++]=e.dest[f]}}function _(e){for(var t,i;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return n;for(e.sourceIndex+=4,i=t;i;--i)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,r}!function(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}(a,o),p(s,l,4,3),p(u,c,2,1),s[28]=0,l[28]=258,e.exports=function(e,t){var s,l,u=new function(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new i,this.dtree=new i}(e,t);do{switch(s=g(u),y(u,2,0)){case 0:l=_(u);break;case 1:l=w(u,a,o);break;case 2:b(u,u.ltree,u.dtree),l=w(u,u.ltree,u.dtree);break;default:l=n}if(l!==r)throw new Error("Data error")}while(!s);return u.destLen<u.dest.length?"function"==typeof u.dest.slice?u.dest.slice(0,u.destLen):u.dest.subarray(0,u.destLen):u.dest}},function(module,exports,__webpack_require__){(function(Buffer){var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,r){e=e.split("."),r=r||goog.global,e[0]in r||!r.execScript||r.execScript("var "+e[0]);for(var n;e.length&&(n=e.shift());)!e.length&&goog.isDef(t)?r[n]=t:r=r[n]?r[n]:r[n]={}},goog.define=function(e,t){var r=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?r=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(r=goog.global.CLOSURE_DEFINES[e])),goog.exportPath_(e,r)},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var r=e;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED)return goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw Error("goog.module.declareTestMethods must be called from within a goog.module");goog.moduleLoaderState_.declareTestMethods=!0},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var r,n=e.split("."),i=t||goog.global;r=n.shift();){if(!goog.isDefAndNotNull(i[r]))return null;i=i[r]}return i},goog.globalize=function(e,t){var r,n=t||goog.global;for(r in e)n[r]=e[r]},goog.addDependency=function(e,t,r,n){if(goog.DEPENDENCIES_ENABLED){var i;e=e.replace(/\\/g,"/");for(var a=goog.dependencies_,o=0;i=t[o];o++)a.nameToPath[i]=e,a.pathIsModule[e]=!!n;for(n=0;t=r[n];n++)e in a.requires||(a.requires[e]={}),a.requires[e][t]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e),goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.included_[t]=!0,goog.writeScripts_(),null}throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e)}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return void 0!==e&&"write"in e},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document.getElementsByTagName("SCRIPT"),t=e.length-1;0<=t;--t){var r=e[t].src,n=-1==(n=r.lastIndexOf("?"))?r.length:n;if("base.js"==r.substr(n-7,7)){goog.basePath=r.substr(0,n-7);break}}},goog.importScript_=function(e,t){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!goog.global.atob&&goog.global.document&&goog.global.document.all,goog.importModule_=function(e){goog.importScript_("",'goog.retrieveAndExecModule_("'+e+'");')&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(0<e){var t=goog.queuedModules_;goog.queuedModules_=[];for(var r=0;r<e;r++)goog.maybeProcessDeferredPath_(t[r])}},goog.maybeProcessDeferredDep_=function(e){goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)&&(e=goog.getPathFromDeps_(e),goog.maybeProcessDeferredPath_(goog.basePath+e))},goog.isDeferredModule_=function(e){return!(!(e=goog.getPathFromDeps_(e))||!goog.dependencies_.pathIsModule[e])&&goog.basePath+e in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(e){if((e=goog.getPathFromDeps_(e))&&e in goog.dependencies_.requires)for(var t in goog.dependencies_.requires[e])if(!goog.isProvided_(t)&&!goog.isDeferredModule_(t))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{var r;if(goog.moduleLoaderState_={moduleName:void 0,declareTestMethods:!1},goog.isFunction(e))r=e.call(goog.global,{});else{if(!goog.isString(e))throw Error("Invalid module definition");r=goog.loadModuleFromSource_.call(goog.global,e)}var n=goog.moduleLoaderState_.moduleName;if(!goog.isString(n)||!n)throw Error('Invalid module name "'+n+'"');if(goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(r),goog.loadedModules_[n]=r,goog.moduleLoaderState_.declareTestMethods)for(var i in r)0!==i.indexOf("test",0)&&"tearDown"!=i&&"setUp"!=i&&"setUpPage"!=i&&"tearDownPage"!=i||(goog.global[i]=r[i])}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"><\/script>')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,r=t.createElement("script");r.type="text/javascript",r.src=e,r.defer=!1,r.async=!1,t.head.appendChild(r)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var r=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==r.readyState){if(/\bdeps.js$/.test(e))return!1;throw Error('Cannot write "'+e+'" after document load')}var n=goog.IS_OLD_IE_;return void 0===t?n?(n=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ",r.write('<script type="text/javascript" src="'+e+'"'+n+"><\/script>")):goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e):r.write('<script type="text/javascript">'+t+"<\/script>"),!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(){function e(t){if(!(t in i.written)){if(!(t in i.visited)&&(i.visited[t]=!0,t in i.requires))for(var a in i.requires[t])if(!goog.isProvided_(a)){if(!(a in i.nameToPath))throw Error("Undefined nameToPath for "+a);e(i.nameToPath[a])}t in n||(n[t]=!0,r.push(t))}}var t,r=[],n={},i=goog.dependencies_;for(t in goog.included_)i.written[t]||e(t);for(var a=0;a<r.length;a++)t=r[a],goog.dependencies_.written[t]=!0;var o=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,a=0;a<r.length;a++){if(!(t=r[a]))throw goog.moduleLoaderState_=o,Error("Undefined script input");i.pathIsModule[t]?goog.importModule_(goog.basePath+t):goog.importScript_(goog.basePath+t)}goog.moduleLoaderState_=o},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),t.responseText},goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var r=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,n=goog.loadFileSync_(e);if(null==n)throw Error("load of "+e+"failed");n=goog.wrapModule_(e,n),goog.IS_OLD_IE_?(goog.dependencies_.deferred[t]=n,goog.queuedModules_.push(t)):r(e,n)}},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){if("object"==(r=goog.typeOf(e))||"array"==r){if(e.clone)return e.clone();var t,r="array"==r?[]:{};for(t in e)r[t]=goog.cloneObject(e[t]);return r}return e},goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var r in t)e[r]=t[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),void 0!==goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("SCRIPT");r.type="text/javascript",r.defer=!1,r.appendChild(t.createTextNode(e)),t.body.appendChild(r),t.body.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){var r=function(e){return goog.cssNameMapping_[e]||e},n=function(e){e=e.split("-");for(var t=[],n=0;n<e.length;n++)t.push(r(e[n]));return t.join("-")};n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:n:function(e){return e};return t?e+"-"+n(t):n(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,r){return r in t?t[r]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)},goog.exportProperty=function(e,t,r){e[t]=r},goog.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r,n){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[r].apply(e,i)}},goog.base=function(e,t,r){var n=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!n)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(n.superClass_){for(var i=Array(arguments.length-1),a=1;a<arguments.length;a++)i[a-1]=arguments[a];return n.superClass_.constructor.apply(e,i)}for(i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];a=!1;for(var o=e.constructor;o;o=o.superClass_&&o.superClass_.constructor)if(o.prototype[t]===n)a=!0;else if(a)return o.prototype[t].apply(e,i);if(e[t]===n)return e.constructor.prototype[t].apply(e,i);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var r=t.constructor,n=t.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,e),e&&goog.inherits(r,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(r.prototype,t),null!=n&&(n instanceof Function?n(r):goog.defineClass.applyProperties_(r,n)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return e;var r=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===r&&Object.seal(t),t};return r}return e},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.math={},goog.math.Long=function(e,t){this.low_=0|e,this.high_=0|t},goog.math.Long.IntCache_={},goog.math.Long.fromInt=function(e){if(-128<=e&&128>e){var t=goog.math.Long.IntCache_[e];if(t)return t}return t=new goog.math.Long(0|e,0>e?-1:0),-128<=e&&128>e&&(goog.math.Long.IntCache_[e]=t),t},goog.math.Long.fromNumber=function(e){return isNaN(e)||!isFinite(e)?goog.math.Long.getZero():e<=-goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMinValue():e+1>=goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMaxValue():0>e?goog.math.Long.fromNumber(-e).negate():new goog.math.Long(e%goog.math.Long.TWO_PWR_32_DBL_|0,e/goog.math.Long.TWO_PWR_32_DBL_|0)},goog.math.Long.fromBits=function(e,t){return new goog.math.Long(e,t)},goog.math.Long.fromString=function(e,t){if(0==e.length)throw Error("number format error: empty string");var r=t||10;if(2>r||36<r)throw Error("radix out of range: "+r);if("-"==e.charAt(0))return goog.math.Long.fromString(e.substring(1),r).negate();if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character: '+e);for(var n=goog.math.Long.fromNumber(Math.pow(r,8)),i=goog.math.Long.getZero(),a=0;a<e.length;a+=8){var o=Math.min(8,e.length-a),s=parseInt(e.substring(a,a+o),r);8>o?(o=goog.math.Long.fromNumber(Math.pow(r,o)),i=i.multiply(o).add(goog.math.Long.fromNumber(s))):i=(i=i.multiply(n)).add(goog.math.Long.fromNumber(s))}return i},goog.math.Long.TWO_PWR_16_DBL_=65536,goog.math.Long.getTwoPwr24DBL_=16777216,goog.math.Long.TWO_PWR_32_DBL_=goog.math.Long.TWO_PWR_16_DBL_*goog.math.Long.TWO_PWR_16_DBL_,goog.math.Long.TWO_PWR_31_DBL_=goog.math.Long.TWO_PWR_32_DBL_/2,goog.math.Long.TWO_PWR_48_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_16_DBL_,goog.math.Long.TWO_PWR_64_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_32_DBL_,goog.math.Long.TWO_PWR_63_DBL_=goog.math.Long.TWO_PWR_64_DBL_/2,goog.math.Long.getZero=function(){return goog.math.Long.ZERO_||(goog.math.Long.ZERO_=goog.math.Long.fromInt(0)),goog.math.Long.ZERO_},goog.math.Long.getOne=function(){return goog.math.Long.ONE_||(goog.math.Long.ONE_=goog.math.Long.fromInt(1)),goog.math.Long.ONE_},goog.math.Long.getNegOne=function(){return goog.math.Long.NEG_ONE_||(goog.math.Long.NEG_ONE_=goog.math.Long.fromInt(-1)),goog.math.Long.NEG_ONE_},goog.math.Long.getMaxValue=function(){return goog.math.Long.MAX_VALUE_||(goog.math.Long.MAX_VALUE_=goog.math.Long.fromBits(-1,2147483647)),goog.math.Long.MAX_VALUE_},goog.math.Long.getMinValue=function(){return goog.math.Long.MIN_VALUE_||(goog.math.Long.MIN_VALUE_=goog.math.Long.fromBits(0,-2147483648)),goog.math.Long.MIN_VALUE_},goog.math.Long.getTwoPwr24=function(){return goog.math.Long.TWO_PWR_24_||(goog.math.Long.TWO_PWR_24_=goog.math.Long.fromInt(16777216)),goog.math.Long.TWO_PWR_24_},goog.math.Long.prototype.toInt=function(){return this.low_},goog.math.Long.prototype.toNumber=function(){return this.high_*goog.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},goog.math.Long.prototype.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(goog.math.Long.getMinValue())){var t=goog.math.Long.fromNumber(e);t=(r=this.div(t)).multiply(t).subtract(this);return r.toString(e)+t.toInt().toString(e)}return"-"+this.negate().toString(e)}for(var r=goog.math.Long.fromNumber(Math.pow(e,6)),n=(t=this,"");;){var i=t.div(r),a=t.subtract(i.multiply(r)).toInt().toString(e);if((t=i).isZero())return a+n;for(;6>a.length;)a="0"+a;n=""+a+n}},goog.math.Long.prototype.getHighBits=function(){return this.high_},goog.math.Long.prototype.getLowBits=function(){return this.low_},goog.math.Long.prototype.getLowBitsUnsigned=function(){return 0<=this.low_?this.low_:goog.math.Long.TWO_PWR_32_DBL_+this.low_},goog.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(goog.math.Long.getMinValue())?64:this.negate().getNumBitsAbs();for(var e=0!=this.high_?this.high_:this.low_,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high_?t+33:t+1},goog.math.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},goog.math.Long.prototype.isNegative=function(){return 0>this.high_},goog.math.Long.prototype.isOdd=function(){return 1==(1&this.low_)},goog.math.Long.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_},goog.math.Long.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_},goog.math.Long.prototype.lessThan=function(e){return 0>this.compare(e)},goog.math.Long.prototype.lessThanOrEqual=function(e){return 0>=this.compare(e)},goog.math.Long.prototype.greaterThan=function(e){return 0<this.compare(e)},goog.math.Long.prototype.greaterThanOrEqual=function(e){return 0<=this.compare(e)},goog.math.Long.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.subtract(e).isNegative()?-1:1},goog.math.Long.prototype.negate=function(){return this.equals(goog.math.Long.getMinValue())?goog.math.Long.getMinValue():this.not().add(goog.math.Long.getOne())},goog.math.Long.prototype.add=function(e){var t,r=this.high_>>>16,n=65535&this.high_,i=this.low_>>>16,a=e.high_>>>16,o=65535&e.high_,s=e.low_>>>16;return e=0+((t=(65535&this.low_)+(65535&e.low_)+0)>>>16),i=0+((e+=i+s)>>>16),n=(n=0+((i+=n+o)>>>16))+(r+a)&65535,goog.math.Long.fromBits((65535&e)<<16|65535&t,n<<16|65535&i)},goog.math.Long.prototype.subtract=function(e){return this.add(e.negate())},goog.math.Long.prototype.multiply=function(e){if(this.isZero()||e.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue()))return e.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(e.equals(goog.math.Long.getMinValue()))return this.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(goog.math.Long.getTwoPwr24())&&e.lessThan(goog.math.Long.getTwoPwr24()))return goog.math.Long.fromNumber(this.toNumber()*e.toNumber());var t,r,n,i,a=this.high_>>>16,o=65535&this.high_,s=this.low_>>>16,l=65535&this.low_,u=e.high_>>>16,c=65535&e.high_,f=e.low_>>>16;return n=0+((i=0+l*(e=65535&e.low_))>>>16),r=0+((n+=s*e)>>>16),r+=(n=(65535&n)+l*f)>>>16,n&=65535,t=0+((r+=o*e)>>>16),t+=(r=(65535&r)+s*f)>>>16,r&=65535,t+=(r+=l*c)>>>16,r&=65535,t=t+(a*e+o*f+s*c+l*u)&65535,goog.math.Long.fromBits(n<<16|65535&i,t<<16|r)},goog.math.Long.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue())){if(e.equals(goog.math.Long.getOne())||e.equals(goog.math.Long.getNegOne()))return goog.math.Long.getMinValue();if(e.equals(goog.math.Long.getMinValue()))return goog.math.Long.getOne();if((n=this.shiftRight(1).div(e).shiftLeft(1)).equals(goog.math.Long.getZero()))return e.isNegative()?goog.math.Long.getOne():goog.math.Long.getNegOne();var t=this.subtract(e.multiply(n));return n.add(t.div(e))}if(e.equals(goog.math.Long.getMinValue()))return goog.math.Long.getZero();if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var r=goog.math.Long.getZero();for(t=this;t.greaterThanOrEqual(e);){for(var n=Math.max(1,Math.floor(t.toNumber()/e.toNumber())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),a=goog.math.Long.fromNumber(n),o=a.multiply(e);o.isNegative()||o.greaterThan(t);)n-=i,o=(a=goog.math.Long.fromNumber(n)).multiply(e);a.isZero()&&(a=goog.math.Long.getOne()),r=r.add(a),t=t.subtract(o)}return r},goog.math.Long.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},goog.math.Long.prototype.not=function(){return goog.math.Long.fromBits(~this.low_,~this.high_)},goog.math.Long.prototype.and=function(e){return goog.math.Long.fromBits(this.low_&e.low_,this.high_&e.high_)},goog.math.Long.prototype.or=function(e){return goog.math.Long.fromBits(this.low_|e.low_,this.high_|e.high_)},goog.math.Long.prototype.xor=function(e){return goog.math.Long.fromBits(this.low_^e.low_,this.high_^e.high_)},goog.math.Long.prototype.shiftLeft=function(e){if(0==(e&=63))return this;var t=this.low_;return 32>e?goog.math.Long.fromBits(t<<e,this.high_<<e|t>>>32-e):goog.math.Long.fromBits(0,t<<e-32)},goog.math.Long.prototype.shiftRight=function(e){if(0==(e&=63))return this;var t=this.high_;return 32>e?goog.math.Long.fromBits(this.low_>>>e|t<<32-e,t>>e):goog.math.Long.fromBits(t>>e-32,0<=t?0:-1)},goog.math.Long.prototype.shiftRightUnsigned=function(e){if(0==(e&=63))return this;var t=this.high_;return 32>e?goog.math.Long.fromBits(this.low_>>>e|t<<32-e,t>>>e):32==e?goog.math.Long.fromBits(t,0):goog.math.Long.fromBits(t>>>e-32,0)},goog.object={},goog.object.forEach=function(e,t,r){for(var n in e)t.call(r,e[n],n,e)},goog.object.filter=function(e,t,r){var n,i={};for(n in e)t.call(r,e[n],n,e)&&(i[n]=e[n]);return i},goog.object.map=function(e,t,r){var n,i={};for(n in e)i[n]=t.call(r,e[n],n,e);return i},goog.object.some=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return!0;return!1},goog.object.every=function(e,t,r){for(var n in e)if(!t.call(r,e[n],n,e))return!1;return!0},goog.object.getCount=function(e){var t,r=0;for(t in e)r++;return r},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,r=[],n=0;for(t in e)r[n++]=e[t];return r},goog.object.getKeys=function(e){var t,r=[],n=0;for(t in e)r[n++]=t;return r},goog.object.getValueByKeys=function(e,t){for(var r=(n=goog.isArrayLike(t))?t:arguments,n=n?0:1;n<r.length&&(e=e[r[n]],goog.isDef(e));n++);return e},goog.object.containsKey=function(e,t){return t in e},goog.object.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},goog.object.findKey=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return n},goog.object.findValue=function(e,t,r){return(t=goog.object.findKey(e,t,r))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var r;return(r=t in e)&&delete e[t],r},goog.object.add=function(e,t,r){if(t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,r)},goog.object.get=function(e,t,r){return t in e?e[t]:r},goog.object.set=function(e,t,r){e[t]=r},goog.object.setIfUndefined=function(e,t,r){return t in e?e[t]:e[t]=r},goog.object.setWithReturnValueIfNotSet=function(e,t,r){return t in e?e[t]:(r=r(),e[t]=r)},goog.object.equals=function(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;for(r in t)if(!(r in e))return!1;return!0},goog.object.clone=function(e){var t,r={};for(t in e)r[t]=e[t];return r},goog.object.unsafeClone=function(e){if("object"==(r=goog.typeOf(e))||"array"==r){if(e.clone)return e.clone();var t,r="array"==r?[]:{};for(t in e)r[t]=goog.object.unsafeClone(e[t]);return r}return e},goog.object.transpose=function(e){var t,r={};for(t in e)r[e[t]]=t;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var r,n,i=1;i<arguments.length;i++){for(r in n=arguments[i])e[r]=n[r];for(var a=0;a<goog.object.PROTOTYPE_FIELDS_.length;a++)r=goog.object.PROTOTYPE_FIELDS_[a],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var r={},n=0;n<t;n+=2)r[arguments[n]]=arguments[n+1];return r},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},n=0;n<t;n++)r[arguments[n]]=!0;return r},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)};var com={cognitect:{}};com.cognitect.transit={},com.cognitect.transit.delimiters={},com.cognitect.transit.delimiters.ESC="~",com.cognitect.transit.delimiters.TAG="#",com.cognitect.transit.delimiters.SUB="^",com.cognitect.transit.delimiters.RES="`",com.cognitect.transit.delimiters.ESC_TAG="~#",com.cognitect.transit.caching={},com.cognitect.transit.caching.MIN_SIZE_CACHEABLE=3,com.cognitect.transit.caching.BASE_CHAR_IDX=48,com.cognitect.transit.caching.CACHE_CODE_DIGITS=44,com.cognitect.transit.caching.MAX_CACHE_ENTRIES=com.cognitect.transit.caching.CACHE_CODE_DIGITS*com.cognitect.transit.caching.CACHE_CODE_DIGITS,com.cognitect.transit.caching.MAX_CACHE_SIZE=4096,com.cognitect.transit.caching.isCacheable=function(e,t){if(e.length>com.cognitect.transit.caching.MIN_SIZE_CACHEABLE){if(t)return!0;var r=e.charAt(0),n=e.charAt(1);return r===com.cognitect.transit.delimiters.ESC&&(":"===n||"$"===n||"#"===n)}return!1},com.cognitect.transit.caching.idxToCode=function(e){var t=Math.floor(e/com.cognitect.transit.caching.CACHE_CODE_DIGITS);return e=String.fromCharCode(e%com.cognitect.transit.caching.CACHE_CODE_DIGITS+com.cognitect.transit.caching.BASE_CHAR_IDX),0===t?com.cognitect.transit.delimiters.SUB+e:com.cognitect.transit.delimiters.SUB+String.fromCharCode(t+com.cognitect.transit.caching.BASE_CHAR_IDX)+e},com.cognitect.transit.caching.WriteCache=function(){this.cacheSize=this.gen=this.idx=0,this.cache={}},com.cognitect.transit.caching.WriteCache.prototype.write=function(e,t){if(com.cognitect.transit.caching.isCacheable(e,t)){this.cacheSize===com.cognitect.transit.caching.MAX_CACHE_SIZE?(this.clear(),this.gen=0,this.cache={}):this.idx===com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&this.clear();var r=this.cache[e];return null==r?(this.cache[e]=[com.cognitect.transit.caching.idxToCode(this.idx),this.gen],this.idx++,e):r[1]!=this.gen?(r[1]=this.gen,r[0]=com.cognitect.transit.caching.idxToCode(this.idx),this.idx++,e):r[0]}return e},com.cognitect.transit.caching.WriteCache.prototype.clear=function(){this.idx=0,this.gen++},com.cognitect.transit.caching.writeCache=function(){return new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.caching.isCacheCode=function(e){return e.charAt(0)===com.cognitect.transit.delimiters.SUB&&" "!==e.charAt(1)},com.cognitect.transit.caching.codeToIdx=function(e){return 2===e.length?e.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX:(e.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX)*com.cognitect.transit.caching.CACHE_CODE_DIGITS+(e=e.charCodeAt(2)-com.cognitect.transit.caching.BASE_CHAR_IDX)},com.cognitect.transit.caching.ReadCache=function(){this.idx=0,this.cache=[]},com.cognitect.transit.caching.ReadCache.prototype.write=function(e,t){return this.idx==com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&(this.idx=0),this.cache[this.idx]=e,this.idx++,e},com.cognitect.transit.caching.ReadCache.prototype.read=function(e,t){return this.cache[com.cognitect.transit.caching.codeToIdx(e)]},com.cognitect.transit.caching.ReadCache.prototype.clear=function(){this.idx=0},com.cognitect.transit.caching.readCache=function(){return new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.util={},com.cognitect.transit.util.objectKeys=void 0!==Object.keys?function(e){return Object.keys(e)}:function(e){return goog.object.getKeys(e)},com.cognitect.transit.util.isArray=void 0!==Array.isArray?function(e){return Array.isArray(e)}:function(e){return"array"===goog.typeOf(e)},com.cognitect.transit.util.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",com.cognitect.transit.util.randInt=function(e){return Math.round(Math.random()*e)},com.cognitect.transit.util.randHex=function(){return com.cognitect.transit.util.randInt(15).toString(16)},com.cognitect.transit.util.randomUUID=function(){var e=(8|3&com.cognitect.transit.util.randInt(14)).toString(16);return com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-4"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+e+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()},com.cognitect.transit.util.btoa=function(e){if("undefined"!=typeof btoa)return btoa(e);e=String(e);for(var t,r,n=0,i=com.cognitect.transit.util.chars,a="";e.charAt(0|n)||(i="=",n%1);a+=i.charAt(63&t>>8-n%1*8)){if(255<(r=e.charCodeAt(n+=.75)))throw Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|r}return a},com.cognitect.transit.util.atob=function(e){if("undefined"!=typeof atob)return atob(e);if(1==(e=String(e).replace(/=+$/,"")).length%4)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,r,n=0,i=0,a="";r=e.charAt(i++);~r&&(t=n%4?64*t+r:r,n++%4)?a+=String.fromCharCode(255&t>>(-2*n&6)):0)r=com.cognitect.transit.util.chars.indexOf(r);return a},com.cognitect.transit.util.Uint8ToBase64=function(e){for(var t=0,r=e.length,n="",i=null;t<r;)i=e.subarray(t,Math.min(t+32768,r)),n+=String.fromCharCode.apply(null,i),t+=32768;return com.cognitect.transit.util.btoa(n)},com.cognitect.transit.util.Base64ToUint8=function(e){for(var t=(e=com.cognitect.transit.util.atob(e)).length,r=new Uint8Array(t),n=0;n<t;n++){var i=e.charCodeAt(n);r[n]=i}return r},com.cognitect.transit.eq={},com.cognitect.transit.eq.hashCodeProperty="transit$hashCode$",com.cognitect.transit.eq.hashCodeCounter=1,com.cognitect.transit.eq.equals=function(e,t){if(null==e)return null==t;if(e===t)return!0;if("object"==typeof e){if(com.cognitect.transit.util.isArray(e)){if(com.cognitect.transit.util.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!com.cognitect.transit.eq.equals(e[r],t[r]))return!1;return!0}return!1}if(e.com$cognitect$transit$equals)return e.com$cognitect$transit$equals(t);if(null!=t&&"object"==typeof t){if(t.com$cognitect$transit$equals)return t.com$cognitect$transit$equals(e);r=0;var n,i=com.cognitect.transit.util.objectKeys(t).length;for(n in e)if(e.hasOwnProperty(n)&&(r++,!t.hasOwnProperty(n)||!com.cognitect.transit.eq.equals(e[n],t[n])))return!1;return r===i}}return!1},com.cognitect.transit.eq.hashCombine=function(e,t){return e^t+2654435769+(e<<6)+(e>>2)},com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=0,com.cognitect.transit.eq.STR_CACHE_MAX=256,com.cognitect.transit.eq.hashString=function(e){var t=com.cognitect.transit.eq.stringCodeCache[e];if(null!=t)return t;for(var r=t=0;r<e.length;++r)t=31*t+e.charCodeAt(r),t%=4294967296;return com.cognitect.transit.eq.stringCodeCacheSize++,com.cognitect.transit.eq.stringCodeCacheSize>=com.cognitect.transit.eq.STR_CACHE_MAX&&(com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=1),com.cognitect.transit.eq.stringCodeCache[e]=t},com.cognitect.transit.eq.hashMapLike=function(e){var t=0;if(null!=e.forEach)e.forEach(function(e,r,n){t=(t+(com.cognitect.transit.eq.hashCode(r)^com.cognitect.transit.eq.hashCode(e)))%4503599627370496});else for(var r=com.cognitect.transit.util.objectKeys(e),n=0;n<r.length;n++){var i=r[n],a=e[i];t=(t+(com.cognitect.transit.eq.hashCode(i)^com.cognitect.transit.eq.hashCode(a)))%4503599627370496}return t},com.cognitect.transit.eq.hashArrayLike=function(e){var t=0;if(com.cognitect.transit.util.isArray(e))for(var r=0;r<e.length;r++)t=com.cognitect.transit.eq.hashCombine(t,com.cognitect.transit.eq.hashCode(e[r]));else e.forEach&&e.forEach(function(e,r){t=com.cognitect.transit.eq.hashCombine(t,com.cognitect.transit.eq.hashCode(e))});return t},com.cognitect.transit.eq.hashCode=function(e){if(null==e)return 0;switch(typeof e){case"number":return e;case"boolean":return!0===e?1:0;case"string":return com.cognitect.transit.eq.hashString(e);case"function":var t=e[com.cognitect.transit.eq.hashCodeProperty];return t||(t=com.cognitect.transit.eq.hashCodeCounter,void 0!==Object.defineProperty?Object.defineProperty(e,com.cognitect.transit.eq.hashCodeProperty,{value:t,enumerable:!1}):e[com.cognitect.transit.eq.hashCodeProperty]=t,com.cognitect.transit.eq.hashCodeCounter++),t;default:return e instanceof Date?e.valueOf():com.cognitect.transit.util.isArray(e)?com.cognitect.transit.eq.hashArrayLike(e):e.com$cognitect$transit$hashCode?e.com$cognitect$transit$hashCode():com.cognitect.transit.eq.hashMapLike(e)}},com.cognitect.transit.eq.extendToEQ=function(e,t){return e.com$cognitect$transit$hashCode=t.hashCode,e.com$cognitect$transit$equals=t.equals,e},com.cognitect.transit.types={},com.cognitect.transit.types.ITERATOR="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",com.cognitect.transit.types.TaggedValue=function(e,t){this.tag=e,this.rep=t,this.hashCode=-1},com.cognitect.transit.types.TaggedValue.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"},com.cognitect.transit.types.TaggedValue.prototype.equiv=function(e){return com.cognitect.transit.eq.equals(this,e)},com.cognitect.transit.types.TaggedValue.prototype.equiv=com.cognitect.transit.types.TaggedValue.prototype.equiv,com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$equals=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&(this.tag===e.tag&&com.cognitect.transit.eq.equals(this.rep,e.rep))},com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCombine(com.cognitect.transit.eq.hashCode(this.tag),com.cognitect.transit.eq.hashCode(this.rep))),this.hashCode},com.cognitect.transit.types.taggedValue=function(e,t){return new com.cognitect.transit.types.TaggedValue(e,t)},com.cognitect.transit.types.isTaggedValue=function(e){return e instanceof com.cognitect.transit.types.TaggedValue},com.cognitect.transit.types.nullValue=function(){return null},com.cognitect.transit.types.boolValue=function(e){return"t"===e},com.cognitect.transit.types.MAX_INT=goog.math.Long.fromString("9007199254740991"),com.cognitect.transit.types.MIN_INT=goog.math.Long.fromString("-9007199254740991"),com.cognitect.transit.types.intValue=function(e){return"number"==typeof e||e instanceof goog.math.Long?e:(e=goog.math.Long.fromString(e,10)).greaterThan(com.cognitect.transit.types.MAX_INT)||e.lessThan(com.cognitect.transit.types.MIN_INT)?e:e.toNumber()},goog.math.Long.prototype.equiv=function(e){return com.cognitect.transit.eq.equals(this,e)},goog.math.Long.prototype.equiv=goog.math.Long.prototype.equiv,goog.math.Long.prototype.com$cognitect$transit$equals=function(e){return e instanceof goog.math.Long&&this.equals(e)},goog.math.Long.prototype.com$cognitect$transit$hashCode=function(){return this.toInt()},com.cognitect.transit.types.isInteger=function(e){return e instanceof goog.math.Long||"number"==typeof e&&!isNaN(e)&&1/0!==e&&parseFloat(e)===parseInt(e,10)},com.cognitect.transit.types.floatValue=function(e){return parseFloat(e)},com.cognitect.transit.types.bigInteger=function(e){return com.cognitect.transit.types.taggedValue("n",e)},com.cognitect.transit.types.isBigInteger=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"n"===e.tag},com.cognitect.transit.types.bigDecimalValue=function(e){return com.cognitect.transit.types.taggedValue("f",e)},com.cognitect.transit.types.isBigDecimal=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"f"===e.tag},com.cognitect.transit.types.charValue=function(e){return e},com.cognitect.transit.types.Keyword=function(e){this._name=e,this.hashCode=-1},com.cognitect.transit.types.Keyword.prototype.toString=function(){return":"+this._name},com.cognitect.transit.types.Keyword.prototype.namespace=function(){var e=this._name.indexOf("/");return-1!=e?this._name.substring(0,e):null},com.cognitect.transit.types.Keyword.prototype.name=function(){var e=this._name.indexOf("/");return-1!=e?this._name.substring(e+1,this._name.length):this._name},com.cognitect.transit.types.Keyword.prototype.equiv=function(e){return com.cognitect.transit.eq.equals(this,e)},com.cognitect.transit.types.Keyword.prototype.equiv=com.cognitect.transit.types.Keyword.prototype.equiv,com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$equals=function(e){return e instanceof com.cognitect.transit.types.Keyword&&this._name==e._name},com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.keyword=function(e){return new com.cognitect.transit.types.Keyword(e)},com.cognitect.transit.types.isKeyword=function(e){return e instanceof com.cognitect.transit.types.Keyword},com.cognitect.transit.types.Symbol=function(e){this._name=e,this.hashCode=-1},com.cognitect.transit.types.Symbol.prototype.namespace=function(){var e=this._name.indexOf("/");return-1!=e?this._name.substring(0,e):null},com.cognitect.transit.types.Symbol.prototype.name=function(){var e=this._name.indexOf("/");return-1!=e?this._name.substring(e+1,this._name.length):this._name},com.cognitect.transit.types.Symbol.prototype.toString=function(){return this._name},com.cognitect.transit.types.Symbol.prototype.equiv=function(e){return com.cognitect.transit.eq.equals(this,e)},com.cognitect.transit.types.Symbol.prototype.equiv=com.cognitect.transit.types.Symbol.prototype.equiv,com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$equals=function(e){return e instanceof com.cognitect.transit.types.Symbol&&this._name==e._name},com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.symbol=function(e){return new com.cognitect.transit.types.Symbol(e)},com.cognitect.transit.types.isSymbol=function(e){return e instanceof com.cognitect.transit.types.Symbol},com.cognitect.transit.types.hexFor=function(e,t,r){var n="";r=r||t+1;for(var i=8*(7-t),a=goog.math.Long.fromInt(255).shiftLeft(i);t<r;t++,i-=8,a=a.shiftRightUnsigned(8)){var o=e.and(a).shiftRightUnsigned(i).toString(16);1==o.length&&(o="0"+o),n+=o}return n},com.cognitect.transit.types.UUID=function(e,t){this.high=e,this.low=t,this.hashCode=-1},com.cognitect.transit.types.UUID.prototype.getLeastSignificantBits=function(){return this.low},com.cognitect.transit.types.UUID.prototype.getMostSignificantBits=function(){return this.high},com.cognitect.transit.types.UUID.prototype.toString=function(){var e,t=this.high,r=this.low;return e=com.cognitect.transit.types.hexFor(t,0,4)+"-",e+=com.cognitect.transit.types.hexFor(t,4,6)+"-",e+=com.cognitect.transit.types.hexFor(t,6,8)+"-",(e+=com.cognitect.transit.types.hexFor(r,0,2)+"-")+com.cognitect.transit.types.hexFor(r,2,8)},com.cognitect.transit.types.UUID.prototype.equiv=function(e){return com.cognitect.transit.eq.equals(this,e)},com.cognitect.transit.types.UUID.prototype.equiv=com.cognitect.transit.types.UUID.prototype.equiv,com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$equals=function(e){return e instanceof com.cognitect.transit.types.UUID&&this.high.equals(e.high)&&this.low.equals(e.low)},com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this.toString())),this.hashCode},com.cognitect.transit.types.UUIDfromString=function(e){e=e.replace(/-/g,"");var t,r=null,n=r=0,i=24,a=0;for(a=r=0,i=24;8>a;a+=2,i-=8)r|=parseInt(e.substring(a,a+2),16)<<i;for(n=0,a=8,i=24;16>a;a+=2,i-=8)n|=parseInt(e.substring(a,a+2),16)<<i;for(t=goog.math.Long.fromBits(n,r),r=0,a=16,i=24;24>a;a+=2,i-=8)r|=parseInt(e.substring(a,a+2),16)<<i;for(n=0,i=a=24;32>a;a+=2,i-=8)n|=parseInt(e.substring(a,a+2),16)<<i;return r=goog.math.Long.fromBits(n,r),new com.cognitect.transit.types.UUID(t,r)},com.cognitect.transit.types.uuid=function(e){return com.cognitect.transit.types.UUIDfromString(e)},com.cognitect.transit.types.isUUID=function(e){return e instanceof com.cognitect.transit.types.UUID},com.cognitect.transit.types.date=function(e){return e="number"==typeof e?e:parseInt(e,10),new Date(e)},com.cognitect.transit.types.verboseDate=function(e){return new Date(e)},Date.prototype.com$cognitect$transit$equals=function(e){return e instanceof Date&&this.valueOf()===e.valueOf()},Date.prototype.com$cognitect$transit$hashCode=function(){return this.valueOf()},com.cognitect.transit.types.binary=function(e,t){return t&&!1===t.preferBuffers||void 0===Buffer?"undefined"!=typeof Uint8Array?com.cognitect.transit.util.Base64ToUint8(e):com.cognitect.transit.types.taggedValue("b",e):new Buffer(e,"base64")},com.cognitect.transit.types.isBinary=function(e){return void 0!==Buffer&&e instanceof Buffer||("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e instanceof com.cognitect.transit.types.TaggedValue&&"b"===e.tag)},com.cognitect.transit.types.uri=function(e){return com.cognitect.transit.types.taggedValue("r",e)},com.cognitect.transit.types.isURI=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"r"===e.tag},com.cognitect.transit.types.KEYS=0,com.cognitect.transit.types.VALUES=1,com.cognitect.transit.types.ENTRIES=2,com.cognitect.transit.types.TransitArrayMapIterator=function(e,t){this.entries=e,this.type=t||com.cognitect.transit.types.KEYS,this.idx=0},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=function(){if(this.idx<this.entries.length){var e=null;e={value:e=this.type===com.cognitect.transit.types.KEYS?this.entries[this.idx]:this.type===com.cognitect.transit.types.VALUES?this.entries[this.idx+1]:[this.entries[this.idx],this.entries[this.idx+1]],done:!1};return this.idx+=2,e}return{value:null,done:!0}},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=com.cognitect.transit.types.TransitArrayMapIterator.prototype.next,com.cognitect.transit.types.TransitArrayMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.TransitMapIterator=function(e,t){this.map=e,this.type=t||com.cognitect.transit.types.KEYS,this.keys=this.map.getKeys(),this.idx=0,this.bucket=null,this.bucketIdx=0},com.cognitect.transit.types.TransitMapIterator.prototype.next=function(){if(this.idx<this.map.size){null!=this.bucket&&this.bucketIdx<this.bucket.length||(this.bucket=this.map.map[this.keys[this.idx]],this.bucketIdx=0);var e=null;e={value:e=this.type===com.cognitect.transit.types.KEYS?this.bucket[this.bucketIdx]:this.type===com.cognitect.transit.types.VALUES?this.bucket[this.bucketIdx+1]:[this.bucket[this.bucketIdx],this.bucket[this.bucketIdx+1]],done:!1};return this.idx++,this.bucketIdx+=2,e}return{value:null,done:!0}},com.cognitect.transit.types.TransitMapIterator.prototype.next=com.cognitect.transit.types.TransitMapIterator.prototype.next,com.cognitect.transit.types.TransitMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.mapEquals=function(e,t){if(e instanceof com.cognitect.transit.types.TransitMap&&com.cognitect.transit.types.isMap(t)){if(e.size!==t.size)return!1;for(var r in e.map)for(var n=e.map[r],i=0;i<n.length;i+=2)if(!com.cognitect.transit.eq.equals(n[i+1],t.get(n[i])))return!1;return!0}if(e instanceof com.cognitect.transit.types.TransitArrayMap&&com.cognitect.transit.types.isMap(t)){if(e.size!==t.size)return!1;for(r=e._entries,i=0;i<r.length;i+=2)if(!com.cognitect.transit.eq.equals(r[i+1],t.get(r[i])))return!1;return!0}if(null!=t&&"object"==typeof t&&(r=(i=com.cognitect.transit.util.objectKeys(t)).length,e.size===r)){for(n=0;n<r;n++){var a=i[n];if(!e.has(a)||!com.cognitect.transit.eq.equals(t[a],e.get(a)))return!1}return!0}return!1},com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD=8,com.cognitect.transit.types.ARRAY_MAP_THRESHOLD=32,com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD=32,com.cognitect.transit.types.print=function(e){return null==e?"null":goog.isArray(e)?"["+e.toString()+"]":goog.isString(e)?'"'+e+'"':e.toString()},com.cognitect.transit.types.printMap=function(e){var t=0,r="TransitMap {";return e.forEach(function(n,i){r+=com.cognitect.transit.types.print(i)+" => "+com.cognitect.transit.types.print(n),t<e.size-1&&(r+=", "),t++}),r+"}"},com.cognitect.transit.types.printSet=function(e){var t=0,r="TransitSet {";return e.forEach(function(n){r+=com.cognitect.transit.types.print(n),t<e.size-1&&(r+=", "),t++}),r+"}"},com.cognitect.transit.types.TransitArrayMap=function(e){this._entries=e,this.backingMap=null,this.hashCode=-1,this.size=e.length/2,this.accesses=0},com.cognitect.transit.types.TransitArrayMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitArrayMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitArrayMap.prototype.convert=function(){if(this.backingMap)throw Error("Invalid operation, already converted");return!(this.size<com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD)&&(this.accesses++,this.accesses>com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=[],!0))},com.cognitect.transit.types.TransitArrayMap.prototype.clear=function(){this.hashCode=-1,this.backingMap?this.backingMap.clear():this._entries=[],this.size=0},com.cognitect.transit.types.TransitArrayMap.prototype.clear=com.cognitect.transit.types.TransitArrayMap.prototype.clear,com.cognitect.transit.types.TransitArrayMap.prototype.keys=function(){return this.backingMap?this.backingMap.keys():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitArrayMap.prototype.keys=com.cognitect.transit.types.TransitArrayMap.prototype.keys,com.cognitect.transit.types.TransitArrayMap.prototype.keySet=function(){if(this.backingMap)return this.backingMap.keySet();for(var e=[],t=0,r=0;r<this._entries.length;t++,r+=2)e[t]=this._entries[r];return e},com.cognitect.transit.types.TransitArrayMap.prototype.keySet=com.cognitect.transit.types.TransitArrayMap.prototype.keySet,com.cognitect.transit.types.TransitArrayMap.prototype.entries=function(){return this.backingMap?this.backingMap.entries():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitArrayMap.prototype.entries=com.cognitect.transit.types.TransitArrayMap.prototype.entries,com.cognitect.transit.types.TransitArrayMap.prototype.values=function(){return this.backingMap?this.backingMap.values():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitArrayMap.prototype.values=com.cognitect.transit.types.TransitArrayMap.prototype.values,com.cognitect.transit.types.TransitArrayMap.prototype.forEach=function(e){if(this.backingMap)this.backingMap.forEach(e);else for(var t=0;t<this._entries.length;t+=2)e(this._entries[t+1],this._entries[t])},com.cognitect.transit.types.TransitArrayMap.prototype.forEach=com.cognitect.transit.types.TransitArrayMap.prototype.forEach,com.cognitect.transit.types.TransitArrayMap.prototype.get=function(e,t){if(this.backingMap)return this.backingMap.get(e);if(this.convert())return this.get(e);for(var r=0;r<this._entries.length;r+=2)if(com.cognitect.transit.eq.equals(this._entries[r],e))return this._entries[r+1];return t},com.cognitect.transit.types.TransitArrayMap.prototype.get=com.cognitect.transit.types.TransitArrayMap.prototype.get,com.cognitect.transit.types.TransitArrayMap.prototype.has=function(e){if(this.backingMap)return this.backingMap.has(e);if(this.convert())return this.has(e);for(var t=0;t<this._entries.length;t+=2)if(com.cognitect.transit.eq.equals(this._entries[t],e))return!0;return!1},com.cognitect.transit.types.TransitArrayMap.prototype.has=com.cognitect.transit.types.TransitArrayMap.prototype.has,com.cognitect.transit.types.TransitArrayMap.prototype.set=function(e,t){if(this.hashCode=-1,this.backingMap)this.backingMap.set(e,t),this.size=this.backingMap.size;else{for(var r=0;r<this._entries.length;r+=2)if(com.cognitect.transit.eq.equals(this._entries[r],e))return void(this._entries[r+1]=t);this._entries.push(e),this._entries.push(t),this.size++,this.size>com.cognitect.transit.types.ARRAY_MAP_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=null)}},com.cognitect.transit.types.TransitArrayMap.prototype.set=com.cognitect.transit.types.TransitArrayMap.prototype.set,com.cognitect.transit.types.TransitArrayMap.prototype.delete=function(e){if(this.hashCode=-1,this.backingMap)return e=this.backingMap.delete(e),this.size=this.backingMap.size,e;for(var t=0;t<this._entries.length;t+=2)if(com.cognitect.transit.eq.equals(this._entries[t],e))return e=this._entries[t+1],this._entries.splice(t,2),this.size--,e},com.cognitect.transit.types.TransitArrayMap.prototype.clone=function(){var e=com.cognitect.transit.types.map();return this.forEach(function(t,r){e.set(r,t)}),e},com.cognitect.transit.types.TransitArrayMap.prototype.clone=com.cognitect.transit.types.TransitArrayMap.prototype.clone,com.cognitect.transit.types.TransitArrayMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$hashCode=function(){return this.backingMap?this.backingMap.com$cognitect$transit$hashCode():(-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode)},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$equals=function(e){return this.backingMap?com.cognitect.transit.types.mapEquals(this.backingMap,e):com.cognitect.transit.types.mapEquals(this,e)},com.cognitect.transit.types.TransitMap=function(e,t,r){this.map=t||{},this._keys=e||[],this.size=r||0,this.hashCode=-1},com.cognitect.transit.types.TransitMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitMap.prototype.clear=function(){this.hashCode=-1,this.map={},this._keys=[],this.size=0},com.cognitect.transit.types.TransitMap.prototype.clear=com.cognitect.transit.types.TransitMap.prototype.clear,com.cognitect.transit.types.TransitMap.prototype.getKeys=function(){return null!=this._keys?this._keys:com.cognitect.transit.util.objectKeys(this.map)},com.cognitect.transit.types.TransitMap.prototype.delete=function(e){this.hashCode=-1,this._keys=null;for(var t=com.cognitect.transit.eq.hashCode(e),r=this.map[t],n=0;n<r.length;n+=2)if(com.cognitect.transit.eq.equals(e,r[n]))return e=r[n+1],r.splice(n,2),0===r.length&&delete this.map[t],this.size--,e},com.cognitect.transit.types.TransitMap.prototype.entries=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitMap.prototype.entries=com.cognitect.transit.types.TransitMap.prototype.entries,com.cognitect.transit.types.TransitMap.prototype.forEach=function(e){for(var t=this.getKeys(),r=0;r<t.length;r++)for(var n=this.map[t[r]],i=0;i<n.length;i+=2)e(n[i+1],n[i],this)},com.cognitect.transit.types.TransitMap.prototype.forEach=com.cognitect.transit.types.TransitMap.prototype.forEach,com.cognitect.transit.types.TransitMap.prototype.get=function(e,t){var r=com.cognitect.transit.eq.hashCode(e);if(null==(r=this.map[r]))return t;for(var n=0;n<r.length;n+=2)if(com.cognitect.transit.eq.equals(e,r[n]))return r[n+1]},com.cognitect.transit.types.TransitMap.prototype.get=com.cognitect.transit.types.TransitMap.prototype.get,com.cognitect.transit.types.TransitMap.prototype.has=function(e){var t=com.cognitect.transit.eq.hashCode(e);if(null!=(t=this.map[t]))for(var r=0;r<t.length;r+=2)if(com.cognitect.transit.eq.equals(e,t[r]))return!0;return!1},com.cognitect.transit.types.TransitMap.prototype.has=com.cognitect.transit.types.TransitMap.prototype.has,com.cognitect.transit.types.TransitMap.prototype.keys=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitMap.prototype.keys=com.cognitect.transit.types.TransitMap.prototype.keys,com.cognitect.transit.types.TransitMap.prototype.keySet=function(){for(var e=this.getKeys(),t=[],r=0;r<e.length;r++)for(var n=this.map[e[r]],i=0;i<n.length;i+=2)t.push(n[i]);return t},com.cognitect.transit.types.TransitMap.prototype.keySet=com.cognitect.transit.types.TransitMap.prototype.keySet,com.cognitect.transit.types.TransitMap.prototype.set=function(e,t){this.hashCode=-1;var r=com.cognitect.transit.eq.hashCode(e),n=this.map[r];if(null==n)this._keys&&this._keys.push(r),this.map[r]=[e,t],this.size++;else{r=!0;for(var i=0;i<n.length;i+=2)if(com.cognitect.transit.eq.equals(t,n[i])){r=!1,n[i]=t;break}r&&(n.push(e),n.push(t),this.size++)}},com.cognitect.transit.types.TransitMap.prototype.set=com.cognitect.transit.types.TransitMap.prototype.set,com.cognitect.transit.types.TransitMap.prototype.values=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitMap.prototype.values=com.cognitect.transit.types.TransitMap.prototype.values,com.cognitect.transit.types.TransitMap.prototype.clone=function(){var e=com.cognitect.transit.types.map();return this.forEach(function(t,r){e.set(r,t)}),e},com.cognitect.transit.types.TransitMap.prototype.clone=com.cognitect.transit.types.TransitMap.prototype.clone,com.cognitect.transit.types.TransitMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$equals=function(e){return com.cognitect.transit.types.mapEquals(this,e)},com.cognitect.transit.types.map=function(e,t,r){if(e=e||[],t=!1!==t||t,(!0!==r||!r)&&e.length<=2*com.cognitect.transit.types.ARRAY_MAP_THRESHOLD){if(t){var n=e;for(e=[],t=0;t<n.length;t+=2){var i=!1;for(r=0;r<e.length;r+=2)if(com.cognitect.transit.eq.equals(e[r],n[t])){e[r+1]=n[t+1],i=!0;break}i||(e.push(n[t]),e.push(n[t+1]))}}return new com.cognitect.transit.types.TransitArrayMap(e)}n={},i=[];var a=0;for(t=0;t<e.length;t+=2){var o=n[r=com.cognitect.transit.eq.hashCode(e[t])];if(null==o)i.push(r),n[r]=[e[t],e[t+1]],a++;else{var s=!0;for(r=0;r<o.length;r+=2)if(com.cognitect.transit.eq.equals(o[r],e[t])){o[r+1]=e[t+1],s=!1;break}s&&(o.push(e[t]),o.push(e[t+1]),a++)}}return new com.cognitect.transit.types.TransitMap(i,n,a)},com.cognitect.transit.types.isArrayMap=function(e){return e instanceof com.cognitect.transit.types.TransitArrayMap},com.cognitect.transit.types.isMap=function(e){return e instanceof com.cognitect.transit.types.TransitArrayMap||e instanceof com.cognitect.transit.types.TransitMap},com.cognitect.transit.types.TransitSet=function(e){this.map=e,this.size=e.size},com.cognitect.transit.types.TransitSet.prototype.toString=function(){return com.cognitect.transit.types.printSet(this)},com.cognitect.transit.types.TransitSet.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitSet.prototype.add=function(e){this.map.set(e,e),this.size=this.map.size},com.cognitect.transit.types.TransitSet.prototype.add=com.cognitect.transit.types.TransitSet.prototype.add,com.cognitect.transit.types.TransitSet.prototype.clear=function(){this.map=new com.cognitect.transit.types.TransitMap,this.size=0},com.cognitect.transit.types.TransitSet.prototype.clear=com.cognitect.transit.types.TransitSet.prototype.clear,com.cognitect.transit.types.TransitSet.prototype.delete=function(e){return e=this.map.delete(e),this.size=this.map.size,e},com.cognitect.transit.types.TransitSet.prototype.entries=function(){return this.map.entries()},com.cognitect.transit.types.TransitSet.prototype.entries=com.cognitect.transit.types.TransitSet.prototype.entries,com.cognitect.transit.types.TransitSet.prototype.forEach=function(e,t){var r=this;this.map.forEach(function(t,n,i){e(n,r)})},com.cognitect.transit.types.TransitSet.prototype.forEach=com.cognitect.transit.types.TransitSet.prototype.forEach,com.cognitect.transit.types.TransitSet.prototype.has=function(e){return this.map.has(e)},com.cognitect.transit.types.TransitSet.prototype.has=com.cognitect.transit.types.TransitSet.prototype.has,com.cognitect.transit.types.TransitSet.prototype.keys=function(){return this.map.keys()},com.cognitect.transit.types.TransitSet.prototype.keys=com.cognitect.transit.types.TransitSet.prototype.keys,com.cognitect.transit.types.TransitSet.prototype.keySet=function(){return this.map.keySet()},com.cognitect.transit.types.TransitSet.prototype.keySet=com.cognitect.transit.types.TransitSet.prototype.keySet,com.cognitect.transit.types.TransitSet.prototype.values=function(){return this.map.values()},com.cognitect.transit.types.TransitSet.prototype.values=com.cognitect.transit.types.TransitSet.prototype.values,com.cognitect.transit.types.TransitSet.prototype.clone=function(){var e=com.cognitect.transit.types.set();return this.forEach(function(t){e.add(t)}),e},com.cognitect.transit.types.TransitSet.prototype.clone=com.cognitect.transit.types.TransitSet.prototype.clone,com.cognitect.transit.types.TransitSet.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.values()},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$equals=function(e){return e instanceof com.cognitect.transit.types.TransitSet&&(this.size===e.size?com.cognitect.transit.eq.equals(this.map,e.map):void 0)},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$hashCode=function(e){return com.cognitect.transit.eq.hashCode(this.map)},com.cognitect.transit.types.set=function(e){e=e||[];for(var t={},r=[],n=0,i=0;i<e.length;i++){var a=t[o=com.cognitect.transit.eq.hashCode(e[i])];if(null==a)r.push(o),t[o]=[e[i],e[i]],n++;else{for(var o=!0,s=0;s<a.length;s+=2)if(com.cognitect.transit.eq.equals(a[s],e[i])){o=!1;break}o&&(a.push(e[i]),a.push(e[i]),n++)}}return new com.cognitect.transit.types.TransitSet(new com.cognitect.transit.types.TransitMap(r,t,n))},com.cognitect.transit.types.isSet=function(e){return e instanceof com.cognitect.transit.types.TransitSet},com.cognitect.transit.types.quoted=function(e){return com.cognitect.transit.types.taggedValue("'",e)},com.cognitect.transit.types.isQuoted=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"'"===e.tag},com.cognitect.transit.types.list=function(e){return com.cognitect.transit.types.taggedValue("list",e)},com.cognitect.transit.types.isList=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"list"===e.tag},com.cognitect.transit.types.link=function(e){return com.cognitect.transit.types.taggedValue("link",e)},com.cognitect.transit.types.isLink=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"link"===e.tag},com.cognitect.transit.types.specialDouble=function(e){switch(e){case"-INF":return-1/0;case"INF":return 1/0;case"NaN":return NaN;default:throw Error("Invalid special double value "+e)}},com.cognitect.transit.handlers={},com.cognitect.transit.handlers.ctorGuid=0,com.cognitect.transit.handlers.ctorGuidProperty="transit$guid$"+com.cognitect.transit.util.randomUUID(),com.cognitect.transit.handlers.typeTag=function(e){if(null==e)return"null";if(e===String)return"string";if(e===Boolean)return"boolean";if(e===Number)return"number";if(e===Array)return"array";if(e===Object)return"map";var t=e[com.cognitect.transit.handlers.ctorGuidProperty];return null==t&&(void 0!==Object.defineProperty?(t=++com.cognitect.transit.handlers.ctorGuid,Object.defineProperty(e,com.cognitect.transit.handlers.ctorGuidProperty,{value:t,enumerable:!1})):e[com.cognitect.transit.handlers.ctorGuidProperty]=t=++com.cognitect.transit.handlers.ctorGuid),t},com.cognitect.transit.handlers.constructor=function(e){return null==e?null:e.constructor},com.cognitect.transit.handlers.padZeros=function(e,t){for(var r=e.toString(),n=r.length;n<t;n++)r="0"+r;return r},com.cognitect.transit.handlers.stringableKeys=function(e){e=com.cognitect.transit.util.objectKeys(e);for(var t=0;t<e.length;t++);return!0},com.cognitect.transit.handlers.NilHandler=function(){},com.cognitect.transit.handlers.NilHandler.prototype.tag=function(e){return"_"},com.cognitect.transit.handlers.NilHandler.prototype.rep=function(e){return null},com.cognitect.transit.handlers.NilHandler.prototype.stringRep=function(e){return"null"},com.cognitect.transit.handlers.StringHandler=function(){},com.cognitect.transit.handlers.StringHandler.prototype.tag=function(e){return"s"},com.cognitect.transit.handlers.StringHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.StringHandler.prototype.stringRep=function(e){return e},com.cognitect.transit.handlers.NumberHandler=function(){},com.cognitect.transit.handlers.NumberHandler.prototype.tag=function(e){return"i"},com.cognitect.transit.handlers.NumberHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.NumberHandler.prototype.stringRep=function(e){return e.toString()},com.cognitect.transit.handlers.IntegerHandler=function(){},com.cognitect.transit.handlers.IntegerHandler.prototype.tag=function(e){return"i"},com.cognitect.transit.handlers.IntegerHandler.prototype.rep=function(e){return e.toString()},com.cognitect.transit.handlers.IntegerHandler.prototype.stringRep=function(e){return e.toString()},com.cognitect.transit.handlers.BooleanHandler=function(){},com.cognitect.transit.handlers.BooleanHandler.prototype.tag=function(e){return"?"},com.cognitect.transit.handlers.BooleanHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.BooleanHandler.prototype.stringRep=function(e){return e.toString()},com.cognitect.transit.handlers.ArrayHandler=function(){},com.cognitect.transit.handlers.ArrayHandler.prototype.tag=function(e){return"array"},com.cognitect.transit.handlers.ArrayHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.ArrayHandler.prototype.stringRep=function(e){return null},com.cognitect.transit.handlers.MapHandler=function(){},com.cognitect.transit.handlers.MapHandler.prototype.tag=function(e){return"map"},com.cognitect.transit.handlers.MapHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.MapHandler.prototype.stringRep=function(e){return null},com.cognitect.transit.handlers.VerboseDateHandler=function(){},com.cognitect.transit.handlers.VerboseDateHandler.prototype.tag=function(e){return"t"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.rep=function(e){return e.getUTCFullYear()+"-"+com.cognitect.transit.handlers.padZeros(e.getUTCMonth()+1,2)+"-"+com.cognitect.transit.handlers.padZeros(e.getUTCDate(),2)+"T"+com.cognitect.transit.handlers.padZeros(e.getUTCHours(),2)+":"+com.cognitect.transit.handlers.padZeros(e.getUTCMinutes(),2)+":"+com.cognitect.transit.handlers.padZeros(e.getUTCSeconds(),2)+"."+com.cognitect.transit.handlers.padZeros(e.getUTCMilliseconds(),3)+"Z"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.stringRep=function(e,t){return t.rep(e)},com.cognitect.transit.handlers.DateHandler=function(){},com.cognitect.transit.handlers.DateHandler.prototype.tag=function(e){return"m"},com.cognitect.transit.handlers.DateHandler.prototype.rep=function(e){return e.valueOf()},com.cognitect.transit.handlers.DateHandler.prototype.stringRep=function(e){return e.valueOf().toString()},com.cognitect.transit.handlers.DateHandler.prototype.getVerboseHandler=function(e){return new com.cognitect.transit.handlers.VerboseDateHandler},com.cognitect.transit.handlers.UUIDHandler=function(){},com.cognitect.transit.handlers.UUIDHandler.prototype.tag=function(e){return"u"},com.cognitect.transit.handlers.UUIDHandler.prototype.rep=function(e){return e.toString()},com.cognitect.transit.handlers.UUIDHandler.prototype.stringRep=function(e){return e.toString()},com.cognitect.transit.handlers.KeywordHandler=function(){},com.cognitect.transit.handlers.KeywordHandler.prototype.tag=function(e){return":"},com.cognitect.transit.handlers.KeywordHandler.prototype.rep=function(e){return e._name},com.cognitect.transit.handlers.KeywordHandler.prototype.stringRep=function(e,t){return t.rep(e)},com.cognitect.transit.handlers.SymbolHandler=function(){},com.cognitect.transit.handlers.SymbolHandler.prototype.tag=function(e){return"$"},com.cognitect.transit.handlers.SymbolHandler.prototype.rep=function(e){return e._name},com.cognitect.transit.handlers.SymbolHandler.prototype.stringRep=function(e,t){return t.rep(e)},com.cognitect.transit.handlers.TaggedHandler=function(){},com.cognitect.transit.handlers.TaggedHandler.prototype.tag=function(e){return e.tag},com.cognitect.transit.handlers.TaggedHandler.prototype.rep=function(e){return e.rep},com.cognitect.transit.handlers.TaggedHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.TransitSetHandler=function(){},com.cognitect.transit.handlers.TransitSetHandler.prototype.tag=function(e){return"set"},com.cognitect.transit.handlers.TransitSetHandler.prototype.rep=function(e){var t=[];return e.forEach(function(e,r){t.push(e)}),com.cognitect.transit.types.taggedValue("array",t)},com.cognitect.transit.handlers.TransitSetHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.TransitArrayMapHandler=function(){},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.tag=function(e){return"map"},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.TransitMapHandler=function(){},com.cognitect.transit.handlers.TransitMapHandler.prototype.tag=function(e){return"map"},com.cognitect.transit.handlers.TransitMapHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.TransitMapHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.BufferHandler=function(){},com.cognitect.transit.handlers.BufferHandler.prototype.tag=function(e){return"b"},com.cognitect.transit.handlers.BufferHandler.prototype.rep=function(e){return e.toString("base64")},com.cognitect.transit.handlers.BufferHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.Uint8ArrayHandler=function(){},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.tag=function(e){return"b"},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.rep=function(e){return com.cognitect.transit.util.Uint8ToBase64(e)},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.defaultHandlers=function(e){return e.set(null,new com.cognitect.transit.handlers.NilHandler),e.set(String,new com.cognitect.transit.handlers.StringHandler),e.set(Number,new com.cognitect.transit.handlers.NumberHandler),e.set(goog.math.Long,new com.cognitect.transit.handlers.IntegerHandler),e.set(Boolean,new com.cognitect.transit.handlers.BooleanHandler),e.set(Array,new com.cognitect.transit.handlers.ArrayHandler),e.set(Object,new com.cognitect.transit.handlers.MapHandler),e.set(Date,new com.cognitect.transit.handlers.DateHandler),e.set(com.cognitect.transit.types.UUID,new com.cognitect.transit.handlers.UUIDHandler),e.set(com.cognitect.transit.types.Keyword,new com.cognitect.transit.handlers.KeywordHandler),e.set(com.cognitect.transit.types.Symbol,new com.cognitect.transit.handlers.SymbolHandler),e.set(com.cognitect.transit.types.TaggedValue,new com.cognitect.transit.handlers.TaggedHandler),e.set(com.cognitect.transit.types.TransitSet,new com.cognitect.transit.handlers.TransitSetHandler),e.set(com.cognitect.transit.types.TransitArrayMap,new com.cognitect.transit.handlers.TransitArrayMapHandler),e.set(com.cognitect.transit.types.TransitMap,new com.cognitect.transit.handlers.TransitMapHandler),void 0!==Buffer&&e.set(Buffer,new com.cognitect.transit.handlers.BufferHandler),"undefined"!=typeof Uint8Array&&e.set(Uint8Array,new com.cognitect.transit.handlers.Uint8ArrayHandler),e},com.cognitect.transit.handlers.Handlers=function(){this.handlers={},com.cognitect.transit.handlers.defaultHandlers(this)},com.cognitect.transit.handlers.Handlers.prototype.get=function(e){var t=null;return null!=(t="string"==typeof e?this.handlers[e]:this.handlers[com.cognitect.transit.handlers.typeTag(e)])?t:this.handlers.default},com.cognitect.transit.handlers.Handlers.prototype.get=com.cognitect.transit.handlers.Handlers.prototype.get,com.cognitect.transit.handlers.validTag=function(e){switch(e){case"null":case"string":case"boolean":case"number":case"array":case"map":return!1}return!0},com.cognitect.transit.handlers.Handlers.prototype.set=function(e,t){"string"==typeof e&&com.cognitect.transit.handlers.validTag(e)?this.handlers[e]=t:this.handlers[com.cognitect.transit.handlers.typeTag(e)]=t},com.cognitect.transit.impl={},com.cognitect.transit.impl.decoder={},com.cognitect.transit.impl.decoder.Tag=function(e){this.str=e},com.cognitect.transit.impl.decoder.tag=function(e){return new com.cognitect.transit.impl.decoder.Tag(e)},com.cognitect.transit.impl.decoder.isTag=function(e){return e&&e instanceof com.cognitect.transit.impl.decoder.Tag},com.cognitect.transit.impl.decoder.isGroundHandler=function(e){switch(e){case"_":case"s":case"?":case"i":case"d":case"b":case"'":case"array":case"map":return!0}return!1},com.cognitect.transit.impl.decoder.Decoder=function(e){for(var t in this.options=e||{},this.handlers={},this.defaults.handlers)this.handlers[t]=this.defaults.handlers[t];for(t in this.options.handlers){if(com.cognitect.transit.impl.decoder.isGroundHandler(t))throw Error('Cannot override handler for ground type "'+t+'"');this.handlers[t]=this.options.handlers[t]}this.preferStrings=null!=this.options.preferStrings?this.options.preferStrings:this.defaults.preferStrings,this.preferBuffers=null!=this.options.preferBuffers?this.options.preferBuffers:this.defaults.preferBuffers,this.defaultHandler=this.options.defaultHandler||this.defaults.defaultHandler,this.mapBuilder=this.options.mapBuilder,this.arrayBuilder=this.options.arrayBuilder},com.cognitect.transit.impl.decoder.Decoder.prototype.defaults={handlers:{_:function(e,t){return com.cognitect.transit.types.nullValue()},"?":function(e,t){return com.cognitect.transit.types.boolValue(e)},b:function(e,t){return com.cognitect.transit.types.binary(e,t)},i:function(e,t){return com.cognitect.transit.types.intValue(e)},n:function(e,t){return com.cognitect.transit.types.bigInteger(e)},d:function(e,t){return com.cognitect.transit.types.floatValue(e)},f:function(e,t){return com.cognitect.transit.types.bigDecimalValue(e)},c:function(e,t){return com.cognitect.transit.types.charValue(e)},":":function(e,t){return com.cognitect.transit.types.keyword(e)},$:function(e,t){return com.cognitect.transit.types.symbol(e)},r:function(e,t){return com.cognitect.transit.types.uri(e)},z:function(e,t){return com.cognitect.transit.types.specialDouble(e)},"'":function(e,t){return e},m:function(e,t){return com.cognitect.transit.types.date(e)},t:function(e,t){return com.cognitect.transit.types.verboseDate(e)},u:function(e,t){return com.cognitect.transit.types.uuid(e)},set:function(e,t){return com.cognitect.transit.types.set(e)},list:function(e,t){return com.cognitect.transit.types.list(e)},link:function(e,t){return com.cognitect.transit.types.link(e)},cmap:function(e,t){return com.cognitect.transit.types.map(e,!1)}},defaultHandler:function(e,t){return com.cognitect.transit.types.taggedValue(e,t)},preferStrings:!0,preferBuffers:!0},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=function(e,t,r,n){if(null==e)return null;switch(typeof e){case"string":return this.decodeString(e,t,r,n);case"object":return com.cognitect.transit.util.isArray(e)?"^ "===e[0]?this.decodeArrayHash(e,t,r,n):this.decodeArray(e,t,r,n):this.decodeHash(e,t,r,n)}return e},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=com.cognitect.transit.impl.decoder.Decoder.prototype.decode,com.cognitect.transit.impl.decoder.Decoder.prototype.decodeString=function(e,t,r,n){return com.cognitect.transit.caching.isCacheable(e,r)?(e=this.parseString(e,t,!1),t&&t.write(e,r),e):com.cognitect.transit.caching.isCacheCode(e)?t.read(e,r):this.parseString(e,t,r)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeHash=function(e,t,r,n){var i=(r=com.cognitect.transit.util.objectKeys(e))[0];if(n=1==r.length?this.decode(i,t,!1,!1):null,com.cognitect.transit.impl.decoder.isTag(n))return e=e[i],null!=(r=this.handlers[n.str])?r(this.decode(e,t,!1,!0),this):com.cognitect.transit.types.taggedValue(n.str,this.decode(e,t,!1,!1));if(this.mapBuilder){if(r.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD&&this.mapBuilder.fromArray){var a=[];for(n=0;n<r.length;n++)i=r[n],a.push(this.decode(i,t,!0,!1)),a.push(this.decode(e[i],t,!1,!1));return this.mapBuilder.fromArray(a,e)}for(a=this.mapBuilder.init(e),n=0;n<r.length;n++)i=r[n],a=this.mapBuilder.add(a,this.decode(i,t,!0,!1),this.decode(e[i],t,!1,!1),e);return this.mapBuilder.finalize(a,e)}for(a=[],n=0;n<r.length;n++)i=r[n],a.push(this.decode(i,t,!0,!1)),a.push(this.decode(e[i],t,!1,!1));return com.cognitect.transit.types.map(a,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArrayHash=function(e,t,r,n){if(this.mapBuilder){if(e.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD+1&&this.mapBuilder.fromArray){for(n=[],r=1;r<e.length;r+=2)n.push(this.decode(e[r],t,!0,!1)),n.push(this.decode(e[r+1],t,!1,!1));return this.mapBuilder.fromArray(n,e)}for(n=this.mapBuilder.init(e),r=1;r<e.length;r+=2)n=this.mapBuilder.add(n,this.decode(e[r],t,!0,!1),this.decode(e[r+1],t,!1,!1),e);return this.mapBuilder.finalize(n,e)}for(n=[],r=1;r<e.length;r+=2)n.push(this.decode(e[r],t,!0,!1)),n.push(this.decode(e[r+1],t,!1,!1));return com.cognitect.transit.types.map(n,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArray=function(e,t,r,n){if(n){var i=[];for(n=0;n<e.length;n++)i.push(this.decode(e[n],t,r,!1));return i}if(i=t&&t.idx,2===e.length&&"string"==typeof e[0]&&(n=this.decode(e[0],t,!1,!1),com.cognitect.transit.impl.decoder.isTag(n)))return e=e[1],null!=(i=this.handlers[n.str])?i=i(this.decode(e,t,r,!0),this):com.cognitect.transit.types.taggedValue(n.str,this.decode(e,t,r,!1));if(t&&i!=t.idx&&(t.idx=i),this.arrayBuilder){if(32>=e.length&&this.arrayBuilder.fromArray){for(i=[],n=0;n<e.length;n++)i.push(this.decode(e[n],t,r,!1));return this.arrayBuilder.fromArray(i,e)}for(i=this.arrayBuilder.init(e),n=0;n<e.length;n++)i=this.arrayBuilder.add(i,this.decode(e[n],t,r,!1),e);return this.arrayBuilder.finalize(i,e)}for(i=[],n=0;n<e.length;n++)i.push(this.decode(e[n],t,r,!1));return i},com.cognitect.transit.impl.decoder.Decoder.prototype.parseString=function(e,t,r){return e.charAt(0)===com.cognitect.transit.delimiters.ESC?(t=e.charAt(1))===com.cognitect.transit.delimiters.ESC||t===com.cognitect.transit.delimiters.SUB||t===com.cognitect.transit.delimiters.RES?e.substring(1):t===com.cognitect.transit.delimiters.TAG?com.cognitect.transit.impl.decoder.tag(e.substring(2)):null==(r=this.handlers[t])?this.defaultHandler(t,e.substring(2)):r(e.substring(2),this):e},com.cognitect.transit.impl.decoder.decoder=function(e){return new com.cognitect.transit.impl.decoder.Decoder(e)},com.cognitect.transit.impl.reader={},com.cognitect.transit.impl.reader.JSONUnmarshaller=function(e){this.decoder=new com.cognitect.transit.impl.decoder.Decoder(e)},com.cognitect.transit.impl.reader.JSONUnmarshaller.prototype.unmarshal=function(e,t){return this.decoder.decode(JSON.parse(e),t)},com.cognitect.transit.impl.reader.Reader=function(e,t){this.unmarshaller=e,this.options=t||{},this.cache=this.options.cache?this.options.cache:new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.impl.reader.Reader.prototype.read=function(e){return e=this.unmarshaller.unmarshal(e,this.cache),this.cache.clear(),e},com.cognitect.transit.impl.reader.Reader.prototype.read=com.cognitect.transit.impl.reader.Reader.prototype.read,com.cognitect.transit.impl.writer={},com.cognitect.transit.impl.writer.escape=function(e){if(0<e.length){var t=e.charAt(0);return t===com.cognitect.transit.delimiters.ESC||t===com.cognitect.transit.delimiters.SUB||t===com.cognitect.transit.delimiters.RES?com.cognitect.transit.delimiters.ESC+e:e}return e},com.cognitect.transit.impl.writer.JSONMarshaller=function(e){if(this.opts=e||{},this.preferStrings=null==this.opts.preferStrings||this.opts.preferStrings,this.objectBuilder=this.opts.objectBuilder||null,this.handlers=new com.cognitect.transit.handlers.Handlers,e=this.opts.handlers){if(com.cognitect.transit.util.isArray(e)||!e.forEach)throw Error('transit writer "handlers" option must be a map');var t=this;e.forEach(function(e,r){if(void 0===r)throw Error("Cannot create handler for JavaScript undefined");t.handlers.set(r,e)})}this.handlerForForeign=this.opts.handlerForForeign,this.unpack=this.opts.unpack||function(e){return!(!com.cognitect.transit.types.isArrayMap(e)||null!==e.backingMap)&&e._entries},this.verbose=this.opts&&this.opts.verbose||!1},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.handler=function(e){var t=this.handlers.get(com.cognitect.transit.handlers.constructor(e));return null!=t?t:(e=e&&e.transitTag)?this.handlers.get(e):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.registerHandler=function(e,t){this.handlers.set(e,t)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitNil=function(e,t){return e?this.emitString(com.cognitect.transit.delimiters.ESC,"_","",e,t):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitString=function(e,t,r,n,i){return e=e+t+r,i?i.write(e,n):e},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBoolean=function(e,t,r){return t?this.emitString(com.cognitect.transit.delimiters.ESC,"?",e.toString()[0],t,r):e},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitInteger=function(e,t,r){return 1/0===e?this.emitString(com.cognitect.transit.delimiters.ESC,"z","INF",t,r):-1/0===e?this.emitString(com.cognitect.transit.delimiters.ESC,"z","-INF",t,r):isNaN(e)?this.emitString(com.cognitect.transit.delimiters.ESC,"z","NaN",t,r):t||"string"==typeof e||e instanceof goog.math.Long?this.emitString(com.cognitect.transit.delimiters.ESC,"i",e.toString(),t,r):e},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitDouble=function(e,t,r){return t?this.emitString(e.ESC,"d",e,t,r):e},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBinary=function(e,t,r){return this.emitString(com.cognitect.transit.delimiters.ESC,"b",e,t,r)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitQuoted=function(e,t,r){return e.verbose?((e={})[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,r)]=com.cognitect.transit.impl.writer.marshal(this,t,!1,r),e):[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,r),com.cognitect.transit.impl.writer.marshal(this,t,!1,r)]},com.cognitect.transit.impl.writer.emitObjects=function(e,t,r){var n=[];if(com.cognitect.transit.util.isArray(t))for(var i=0;i<t.length;i++)n.push(com.cognitect.transit.impl.writer.marshal(e,t[i],!1,r));else t.forEach(function(t,i){n.push(com.cognitect.transit.impl.writer.marshal(e,t,!1,r))});return n},com.cognitect.transit.impl.writer.emitArray=function(e,t,r,n){return com.cognitect.transit.impl.writer.emitObjects(e,t,n)},com.cognitect.transit.impl.writer.isStringableKey=function(e,t){if("string"!=typeof t){var r=e.handler(t);return r&&1===r.tag(t).length}return!0},com.cognitect.transit.impl.writer.stringableKeys=function(e,t){var r=e.unpack(t),n=!0;if(r){for(var i=0;i<r.length&&(n=com.cognitect.transit.impl.writer.isStringableKey(e,r[i]));i+=2);return n}if(t.keys&&(i=null,(r=t.keys()).next)){for(i=r.next();!i.done&&(n=com.cognitect.transit.impl.writer.isStringableKey(e,i.value));)i=r.next();return n}if(t.forEach)return t.forEach(function(t,r){n=n&&com.cognitect.transit.impl.writer.isStringableKey(e,r)}),n;throw Error("Cannot walk keys of object type "+com.cognitect.transit.handlers.constructor(t).name)},com.cognitect.transit.impl.writer.isForeignObject=function(e){if(e.constructor.transit$isObject)return!0;var t="Object"==(t=(t=(t=e.constructor.toString()).substr(9)).substr(0,t.indexOf("(")));return void 0!==Object.defineProperty?Object.defineProperty(e.constructor,"transit$isObject",{value:t,enumerable:!1}):e.constructor.transit$isObject=t,t},com.cognitect.transit.impl.writer.emitMap=function(e,t,r,n){if(t.constructor===Object||null!=t.forEach||e.handlerForForeign&&com.cognitect.transit.impl.writer.isForeignObject(t)){if(e.verbose){if(null!=t.forEach)if(com.cognitect.transit.impl.writer.stringableKeys(e,t)){var i={};t.forEach(function(t,r){i[com.cognitect.transit.impl.writer.marshal(e,r,!0,!1)]=com.cognitect.transit.impl.writer.marshal(e,t,!1,n)})}else{var a=e.unpack(t),o=[],s=e.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,n);if(a)for(r=0;r<a.length;r+=2)o.push(com.cognitect.transit.impl.writer.marshal(e,a[r],!0,!1)),o.push(com.cognitect.transit.impl.writer.marshal(e,a[r+1],!1,n));else t.forEach(function(t,r){o.push(com.cognitect.transit.impl.writer.marshal(e,r,!0,!1)),o.push(com.cognitect.transit.impl.writer.marshal(e,t,!1,n))});(i={})[s]=o}else for(i={},a=com.cognitect.transit.util.objectKeys(t),r=0;r<a.length;r++)i[com.cognitect.transit.impl.writer.marshal(e,a[r],!0,!1)]=com.cognitect.transit.impl.writer.marshal(e,t[a[r]],!1,n);return i}if(null!=t.forEach){if(com.cognitect.transit.impl.writer.stringableKeys(e,t)){if(a=e.unpack(t),i=["^ "],a)for(r=0;r<a.length;r+=2)i.push(com.cognitect.transit.impl.writer.marshal(e,a[r],!0,n)),i.push(com.cognitect.transit.impl.writer.marshal(e,a[r+1],!1,n));else t.forEach(function(t,r){i.push(com.cognitect.transit.impl.writer.marshal(e,r,!0,n)),i.push(com.cognitect.transit.impl.writer.marshal(e,t,!1,n))});return i}if(a=e.unpack(t),o=[],s=e.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,n),a)for(r=0;r<a.length;r+=2)o.push(com.cognitect.transit.impl.writer.marshal(e,a[r],!0,n)),o.push(com.cognitect.transit.impl.writer.marshal(e,a[r+1],!1,n));else t.forEach(function(t,r){o.push(com.cognitect.transit.impl.writer.marshal(e,r,!0,n)),o.push(com.cognitect.transit.impl.writer.marshal(e,t,!1,n))});return[s,o]}for(i=["^ "],a=com.cognitect.transit.util.objectKeys(t),r=0;r<a.length;r++)i.push(com.cognitect.transit.impl.writer.marshal(e,a[r],!0,n)),i.push(com.cognitect.transit.impl.writer.marshal(e,t[a[r]],!1,n));return i}if(null!=e.objectBuilder)return e.objectBuilder(t,function(t){return com.cognitect.transit.impl.writer.marshal(e,t,!0,n)},function(t){return com.cognitect.transit.impl.writer.marshal(e,t,!1,n)});throw r=com.cognitect.transit.handlers.constructor(t).name,(a=Error("Cannot write "+r)).data={obj:t,type:r},a},com.cognitect.transit.impl.writer.emitTaggedMap=function(e,t,r,n,i){return e.verbose?((n={})[e.emitString(com.cognitect.transit.delimiters.ESC_TAG,t,"",!0,i)]=com.cognitect.transit.impl.writer.marshal(e,r,!1,i),n):[e.emitString(com.cognitect.transit.delimiters.ESC_TAG,t,"",!0,i),com.cognitect.transit.impl.writer.marshal(e,r,!1,i)]},com.cognitect.transit.impl.writer.emitEncoded=function(e,t,r,n,i,a,o){if(1===r.length){if("string"==typeof n)return e.emitString(com.cognitect.transit.delimiters.ESC,r,n,a,o);if(a||e.preferStrings){if((n=e.verbose&&t.getVerboseHandler())?(r=n.tag(i),n=n.stringRep(i,n)):n=t.stringRep(i,t),null!==n)return e.emitString(com.cognitect.transit.delimiters.ESC,r,n,a,o);throw(e=Error('Tag "'+r+'" cannot be encoded as string')).data={tag:r,rep:n,obj:i},e}}return com.cognitect.transit.impl.writer.emitTaggedMap(e,r,n,a,o)},com.cognitect.transit.impl.writer.marshal=function(e,t,r,n){var i=e.handler(t)||(e.handlerForForeign?e.handlerForForeign(t,e.handlers):null),a=i?i.tag(t):null,o=i?i.rep(t):null;if(null==i||null==a)throw e=com.cognitect.transit.handlers.constructor(t).name,(r=Error("Cannot write "+e)).data={obj:t,type:e},r;switch(a){case"_":return e.emitNil(r,n);case"s":return e.emitString("","",com.cognitect.transit.impl.writer.escape(o),r,n);case"?":return e.emitBoolean(o,r,n);case"i":return e.emitInteger(o,r,n);case"d":return e.emitDouble(o,r,n);case"b":return e.emitBinary(o,r,n);case"'":return e.emitQuoted(e,o,n);case"array":return com.cognitect.transit.impl.writer.emitArray(e,o,r,n);case"map":return com.cognitect.transit.impl.writer.emitMap(e,o,r,n);default:return com.cognitect.transit.impl.writer.emitEncoded(e,i,a,o,t,r,n)}},com.cognitect.transit.impl.writer.maybeQuoted=function(e,t){if(null!=(r=e.handler(t)||(e.handlerForForeign?e.handlerForForeign(t,e.handlers):null)))return 1===r.tag(t).length?com.cognitect.transit.types.quoted(t):t;var r=com.cognitect.transit.handlers.constructor(t).name,n=Error("Cannot write "+r);throw n.data={obj:t,type:r},n},com.cognitect.transit.impl.writer.marshalTop=function(e,t,r,n){return JSON.stringify(com.cognitect.transit.impl.writer.marshal(e,com.cognitect.transit.impl.writer.maybeQuoted(e,t),r,n))},com.cognitect.transit.impl.writer.Writer=function(e,t){this._marshaller=e,this.options=t||{},this.cache=!1===this.options.cache?null:this.options.cache?this.options.cache:new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=function(){return this._marshaller},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=com.cognitect.transit.impl.writer.Writer.prototype.marshaller,com.cognitect.transit.impl.writer.Writer.prototype.write=function(e,t){var r=null,n=(r=t||{}).asMapKey||!1,i=!this._marshaller.verbose&&this.cache;r=!1===r.marshalTop?com.cognitect.transit.impl.writer.marshal(this._marshaller,e,n,i):com.cognitect.transit.impl.writer.marshalTop(this._marshaller,e,n,i);return null!=this.cache&&this.cache.clear(),r},com.cognitect.transit.impl.writer.Writer.prototype.write=com.cognitect.transit.impl.writer.Writer.prototype.write,com.cognitect.transit.impl.writer.Writer.prototype.register=function(e,t){this._marshaller.registerHandler(e,t)},com.cognitect.transit.impl.writer.Writer.prototype.register=com.cognitect.transit.impl.writer.Writer.prototype.register;var TRANSIT_DEV=!0,TRANSIT_NODE_TARGET=!0,TRANSIT_BROWSER_TARGET=!1,TRANSIT_BROWSER_AMD_TARGET=!1;com.cognitect.transit.reader=function(e,t){if("json"===e||"json-verbose"===e||null==e){var r=new com.cognitect.transit.impl.reader.JSONUnmarshaller(t);return new com.cognitect.transit.impl.reader.Reader(r,t)}throw Error("Cannot create reader of type "+e)},com.cognitect.transit.writer=function(e,t){if("json"===e||"json-verbose"===e||null==e){"json-verbose"===e&&(null==t&&(t={}),t.verbose=!0);var r=new com.cognitect.transit.impl.writer.JSONMarshaller(t);return new com.cognitect.transit.impl.writer.Writer(r,t)}throw(r=Error('Type must be "json"')).data={type:e},r},com.cognitect.transit.makeWriteHandler=function(e){var t=function(){};return t.prototype.tag=e.tag,t.prototype.rep=e.rep,t.prototype.stringRep=e.stringRep,t.prototype.getVerboseHandler=e.getVerboseHandler,new t},com.cognitect.transit.makeBuilder=function(e){var t=function(){};return t.prototype.init=e.init,t.prototype.add=e.add,t.prototype.finalize=e.finalize,t.prototype.fromArray=e.fromArray,new t},com.cognitect.transit.date=com.cognitect.transit.types.date,com.cognitect.transit.integer=com.cognitect.transit.types.intValue,com.cognitect.transit.isInteger=com.cognitect.transit.types.isInteger,com.cognitect.transit.uuid=com.cognitect.transit.types.uuid,com.cognitect.transit.isUUID=com.cognitect.transit.types.isUUID,com.cognitect.transit.bigInt=com.cognitect.transit.types.bigInteger,com.cognitect.transit.isBigInt=com.cognitect.transit.types.isBigInteger,com.cognitect.transit.bigDec=com.cognitect.transit.types.bigDecimalValue,com.cognitect.transit.isBigDec=com.cognitect.transit.types.isBigDecimal,com.cognitect.transit.keyword=com.cognitect.transit.types.keyword,com.cognitect.transit.isKeyword=com.cognitect.transit.types.isKeyword,com.cognitect.transit.symbol=com.cognitect.transit.types.symbol,com.cognitect.transit.isSymbol=com.cognitect.transit.types.isSymbol,com.cognitect.transit.binary=com.cognitect.transit.types.binary,com.cognitect.transit.isBinary=com.cognitect.transit.types.isBinary,com.cognitect.transit.uri=com.cognitect.transit.types.uri,com.cognitect.transit.isURI=com.cognitect.transit.types.isURI,com.cognitect.transit.map=com.cognitect.transit.types.map,com.cognitect.transit.isMap=com.cognitect.transit.types.isMap,com.cognitect.transit.set=com.cognitect.transit.types.set,com.cognitect.transit.isSet=com.cognitect.transit.types.isSet,com.cognitect.transit.list=com.cognitect.transit.types.list,com.cognitect.transit.isList=com.cognitect.transit.types.isList,com.cognitect.transit.quoted=com.cognitect.transit.types.quoted,com.cognitect.transit.isQuoted=com.cognitect.transit.types.isQuoted,com.cognitect.transit.tagged=com.cognitect.transit.types.taggedValue,com.cognitect.transit.isTaggedValue=com.cognitect.transit.types.isTaggedValue,com.cognitect.transit.link=com.cognitect.transit.types.link,com.cognitect.transit.isLink=com.cognitect.transit.types.isLink,com.cognitect.transit.hash=com.cognitect.transit.eq.hashCode,com.cognitect.transit.hashMapLike=com.cognitect.transit.eq.hashMapLike,com.cognitect.transit.hashArrayLike=com.cognitect.transit.eq.hashArrayLike,com.cognitect.transit.equals=com.cognitect.transit.eq.equals,com.cognitect.transit.extendToEQ=com.cognitect.transit.eq.extendToEQ,com.cognitect.transit.mapToObject=function(e){var t={};return e.forEach(function(e,r){if("string"!=typeof r)throw Error("Cannot convert map with non-string keys");t[r]=e}),t},com.cognitect.transit.objectToMap=function(e){var t,r=com.cognitect.transit.map();for(t in e)e.hasOwnProperty(t)&&r.set(t,e[t]);return r},com.cognitect.transit.decoder=com.cognitect.transit.impl.decoder.decoder,com.cognitect.transit.readCache=com.cognitect.transit.caching.readCache,com.cognitect.transit.writeCache=com.cognitect.transit.caching.writeCache,com.cognitect.transit.UUIDfromString=com.cognitect.transit.types.UUIDfromString,com.cognitect.transit.randomUUID=com.cognitect.transit.util.randomUUID,com.cognitect.transit.stringableKeys=com.cognitect.transit.impl.writer.stringableKeys,TRANSIT_BROWSER_TARGET&&(goog.exportSymbol("transit.reader",com.cognitect.transit.reader),goog.exportSymbol("transit.writer",com.cognitect.transit.writer),goog.exportSymbol("transit.makeBuilder",com.cognitect.transit.makeBuilder),goog.exportSymbol("transit.makeWriteHandler",com.cognitect.transit.makeWriteHandler),goog.exportSymbol("transit.date",com.cognitect.transit.types.date),goog.exportSymbol("transit.integer",com.cognitect.transit.types.intValue),goog.exportSymbol("transit.isInteger",com.cognitect.transit.types.isInteger),goog.exportSymbol("transit.uuid",com.cognitect.transit.types.uuid),goog.exportSymbol("transit.isUUID",com.cognitect.transit.types.isUUID),goog.exportSymbol("transit.bigInt",com.cognitect.transit.types.bigInteger),goog.exportSymbol("transit.isBigInt",com.cognitect.transit.types.isBigInteger),goog.exportSymbol("transit.bigDec",com.cognitect.transit.types.bigDecimalValue),goog.exportSymbol("transit.isBigDec",com.cognitect.transit.types.isBigDecimal),goog.exportSymbol("transit.keyword",com.cognitect.transit.types.keyword),goog.exportSymbol("transit.isKeyword",com.cognitect.transit.types.isKeyword),goog.exportSymbol("transit.symbol",com.cognitect.transit.types.symbol),goog.exportSymbol("transit.isSymbol",com.cognitect.transit.types.isSymbol),goog.exportSymbol("transit.binary",com.cognitect.transit.types.binary),goog.exportSymbol("transit.isBinary",com.cognitect.transit.types.isBinary),goog.exportSymbol("transit.uri",com.cognitect.transit.types.uri),goog.exportSymbol("transit.isURI",com.cognitect.transit.types.isURI),goog.exportSymbol("transit.map",com.cognitect.transit.types.map),goog.exportSymbol("transit.isMap",com.cognitect.transit.types.isMap),goog.exportSymbol("transit.set",com.cognitect.transit.types.set),goog.exportSymbol("transit.isSet",com.cognitect.transit.types.isSet),goog.exportSymbol("transit.list",com.cognitect.transit.types.list),goog.exportSymbol("transit.isList",com.cognitect.transit.types.isList),goog.exportSymbol("transit.quoted",com.cognitect.transit.types.quoted),goog.exportSymbol("transit.isQuoted",com.cognitect.transit.types.isQuoted),goog.exportSymbol("transit.tagged",com.cognitect.transit.types.taggedValue),goog.exportSymbol("transit.isTaggedValue",com.cognitect.transit.types.isTaggedValue),goog.exportSymbol("transit.link",com.cognitect.transit.types.link),goog.exportSymbol("transit.isLink",com.cognitect.transit.types.isLink),goog.exportSymbol("transit.hash",com.cognitect.transit.eq.hashCode),goog.exportSymbol("transit.hashMapLike",com.cognitect.transit.eq.hashMapLike),goog.exportSymbol("transit.hashArrayLike",com.cognitect.transit.eq.hashArrayLike),goog.exportSymbol("transit.equals",com.cognitect.transit.eq.equals),goog.exportSymbol("transit.extendToEQ",com.cognitect.transit.eq.extendToEQ),goog.exportSymbol("transit.mapToObject",com.cognitect.transit.mapToObject),goog.exportSymbol("transit.objectToMap",com.cognitect.transit.objectToMap),goog.exportSymbol("transit.decoder",com.cognitect.transit.impl.decoder.decoder),goog.exportSymbol("transit.UUIDfromString",com.cognitect.transit.types.UUIDfromString),goog.exportSymbol("transit.randomUUID",com.cognitect.transit.util.randomUUID),goog.exportSymbol("transit.stringableKeys",com.cognitect.transit.impl.writer.stringableKeys),goog.exportSymbol("transit.readCache",com.cognitect.transit.caching.readCache),goog.exportSymbol("transit.writeCache",com.cognitect.transit.caching.writeCache)),TRANSIT_NODE_TARGET&&(module.exports={reader:com.cognitect.transit.reader,writer:com.cognitect.transit.writer,makeBuilder:com.cognitect.transit.makeBuilder,makeWriteHandler:com.cognitect.transit.makeWriteHandler,date:com.cognitect.transit.types.date,integer:com.cognitect.transit.types.intValue,isInteger:com.cognitect.transit.types.isInteger,uuid:com.cognitect.transit.types.uuid,isUUID:com.cognitect.transit.types.isUUID,bigInt:com.cognitect.transit.types.bigInteger,isBigInt:com.cognitect.transit.types.isBigInteger,bigDec:com.cognitect.transit.types.bigDecimalValue,isBigDec:com.cognitect.transit.types.isBigDecimal,keyword:com.cognitect.transit.types.keyword,isKeyword:com.cognitect.transit.types.isKeyword,symbol:com.cognitect.transit.types.symbol,isSymbol:com.cognitect.transit.types.isSymbol,binary:com.cognitect.transit.types.binary,isBinary:com.cognitect.transit.types.isBinary,uri:com.cognitect.transit.types.uri,isURI:com.cognitect.transit.types.isURI,map:com.cognitect.transit.types.map,isMap:com.cognitect.transit.types.isMap,set:com.cognitect.transit.types.set,isSet:com.cognitect.transit.types.isSet,list:com.cognitect.transit.types.list,isList:com.cognitect.transit.types.isList,quoted:com.cognitect.transit.types.quoted,isQuoted:com.cognitect.transit.types.isQuoted,tagged:com.cognitect.transit.types.taggedValue,isTaggedValue:com.cognitect.transit.types.isTaggedValue,link:com.cognitect.transit.types.link,isLink:com.cognitect.transit.types.isLink,hash:com.cognitect.transit.eq.hashCode,hashArrayLike:com.cognitect.transit.eq.hashArrayLike,hashMapLike:com.cognitect.transit.eq.hashMapLike,equals:com.cognitect.transit.eq.equals,extendToEQ:com.cognitect.transit.eq.extendToEQ,mapToObject:com.cognitect.transit.mapToObject,objectToMap:com.cognitect.transit.objectToMap,decoder:com.cognitect.transit.impl.decoder.decoder,UUIDfromString:com.cognitect.transit.types.UUIDfromString,randomUUID:com.cognitect.transit.util.randomUUID,stringableKeys:com.cognitect.transit.impl.writer.stringableKeys,readCache:com.cognitect.transit.caching.readCache,writeCache:com.cognitect.transit.caching.writeCache})}).call(exports,__webpack_require__(57).Buffer)},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(t,r(49))},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}},function(e,t,r){(function(t){var r,n=t.crypto||t.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);r=function(){return n.getRandomValues(i),i}}if(!r){var a=new Array(16);r=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}e.exports=r}).call(t,r(49))},function(e,t){(function(){"use strict";t.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}).call(this)},function(e,t,r){(function(){"use strict";var e,n,i,a,o,s={}.hasOwnProperty;e=r(869),n=r(252).defaults,a=function(e){return"string"==typeof e&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},o=function(e){return"<![CDATA["+i(e)+"]]>"},i=function(e){return e.replace("]]>","]]]]><![CDATA[>")},t.Builder=function(){function t(e){var t,r,i;for(t in this.options={},r=n[.2])s.call(r,t)&&(i=r[t],this.options[t]=i);for(t in e)s.call(e,t)&&(i=e[t],this.options[t]=i)}return t.prototype.buildObject=function(t){var r,i,l,u,c,f;return r=this.options.attrkey,i=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===n[.2].rootName?t=t[c=Object.keys(t)[0]]:c=this.options.rootName,f=this,l=function(e,t){var n,u,c,h,d,p;if("object"!=typeof t)f.options.cdata&&a(t)?e.raw(o(t)):e.txt(t);else if(Array.isArray(t)){for(h in t)if(s.call(t,h))for(d in u=t[h])c=u[d],e=l(e.ele(d),c).up()}else for(d in t)if(s.call(t,d))if(u=t[d],d===r){if("object"==typeof u)for(n in u)p=u[n],e=e.att(n,p)}else if(d===i)e=f.options.cdata&&a(u)?e.raw(o(u)):e.txt(u);else if(Array.isArray(u))for(h in u)s.call(u,h)&&(e="string"==typeof(c=u[h])?f.options.cdata&&a(c)?e.ele(d).raw(o(c)).up():e.ele(d,c).up():l(e.ele(d),c).up());else"object"==typeof u?e=l(e.ele(d),u).up():"string"==typeof u&&f.options.cdata&&a(u)?e=e.ele(d).raw(o(u)).up():(null==u&&(u=""),e=e.ele(d,u.toString()).up());return e},u=e.create(c,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),l(u,t).end(this.options.renderOpts)},t}()}).call(this)},function(e,t,r){(function(){"use strict";var e,n,i,a,o,s,l,u,c=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty;l=r(848),i=r(163),e=r(863),s=r(380),u=r(251).setImmediate,n=r(252).defaults,a=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},o=function(e,t,r){var n,i;for(n=0,i=e.length;n<i;n++)t=(0,e[n])(t,r);return t},t.Parser=function(r){function h(e){var r,i,a;if(this.parseString=c(this.parseString,this),this.reset=c(this.reset,this),this.assignOrPush=c(this.assignOrPush,this),this.processAsync=c(this.processAsync,this),!(this instanceof t.Parser))return new t.Parser(e);for(r in this.options={},i=n[.2])f.call(i,r)&&(a=i[r],this.options[r]=a);for(r in e)f.call(e,r)&&(a=e[r],this.options[r]=a);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return function(e,t){for(var r in t)f.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(h,i.EventEmitter),h.prototype.processAsync=function(){var e,t;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),u(this.processAsync))}catch(e){if(t=e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},h.prototype.assignOrPush=function(e,t,r){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(r)):this.options.explicitArray?e[t]=[r]:e[t]=r},h.prototype.reset=function(){var e,t,r,n,i;return this.removeAllListeners(),this.saxParser=l.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(i=this,function(e){if(i.saxParser.resume(),!i.saxParser.errThrown)return i.saxParser.errThrown=!0,i.emit("error",e)}),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,n=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(r){return function(i){var a,s,l,u,c;if((l={})[t]="",!r.options.ignoreAttrs)for(a in c=i.attributes)f.call(c,a)&&(e in l||r.options.mergeAttrs||(l[e]={}),s=r.options.attrValueProcessors?o(r.options.attrValueProcessors,i.attributes[a],a):i.attributes[a],u=r.options.attrNameProcessors?o(r.options.attrNameProcessors,a):a,r.options.mergeAttrs?r.assignOrPush(l,u,s):l[e][u]=s);return l["#name"]=r.options.tagNameProcessors?o(r.options.tagNameProcessors,i.name):i.name,r.options.xmlns&&(l[r.options.xmlnskey]={uri:i.uri,local:i.local}),n.push(l)}}(this),this.saxParser.onclosetag=function(e){return function(){var r,i,s,l,u,c,h,d,p,m;if(c=n.pop(),u=c["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete c["#name"],!0===c.cdata&&(r=c.cdata,delete c.cdata),p=n[n.length-1],c[t].match(/^\s*$/)&&!r?(i=c[t],delete c[t]):(e.options.trim&&(c[t]=c[t].trim()),e.options.normalize&&(c[t]=c[t].replace(/\s{2,}/g," ").trim()),c[t]=e.options.valueProcessors?o(e.options.valueProcessors,c[t],u):c[t],1===Object.keys(c).length&&t in c&&!e.EXPLICIT_CHARKEY&&(c=c[t])),a(c)&&(c=""!==e.options.emptyTag?e.options.emptyTag:i),null!=e.options.validator&&(m="/"+function(){var e,t,r;for(r=[],e=0,t=n.length;e<t;e++)l=n[e],r.push(l["#name"]);return r}().concat(u).join("/"),function(){var t;try{c=e.options.validator(m,p&&p[u],c)}catch(r){return t=r,e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof c)if(e.options.preserveChildrenOrder){if(p){for(s in p[e.options.childkey]=p[e.options.childkey]||[],h={},c)f.call(c,s)&&(h[s]=c[s]);p[e.options.childkey].push(h),delete c["#name"],1===Object.keys(c).length&&t in c&&!e.EXPLICIT_CHARKEY&&(c=c[t])}}else l={},e.options.attrkey in c&&(l[e.options.attrkey]=c[e.options.attrkey],delete c[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in c&&(l[e.options.charkey]=c[e.options.charkey],delete c[e.options.charkey]),Object.getOwnPropertyNames(c).length>0&&(l[e.options.childkey]=c),c=l;return n.length>0?e.assignOrPush(p,u,c):(e.options.explicitRoot&&(d=c,(c={})[u]=d),e.resultObject=c,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),r=function(e){return function(r){var i,a;if(a=n[n.length-1])return a[t]+=r,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==r.replace(/\\n/g,"").trim())&&(a[e.options.childkey]=a[e.options.childkey]||[],(i={"#name":"__text__"})[t]=r,e.options.normalize&&(i[t]=i[t].replace(/\s{2,}/g," ").trim()),a[e.options.childkey].push(i)),a}}(this),this.saxParser.ontext=r,this.saxParser.oncdata=function(e){var t;if(t=r(e))return t.cdata=!0}},h.prototype.parseString=function(t,r){var n;null!=r&&"function"==typeof r&&(this.on("end",function(e){return this.reset(),r(null,e)}),this.on("error",function(e){return this.reset(),r(e)}));try{return""===(t=t.toString()).trim()?(this.emit("end",null),!0):(t=e.stripBOM(t),this.options.async?(this.remaining=t,u(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(e){if(n=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",n),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw n}},h}(),t.parseString=function(e,r,n){var i,a;return null!=n?("function"==typeof n&&(i=n),"object"==typeof r&&(a=r)):("function"==typeof r&&(i=r),a={}),new t.Parser(a).parseString(e,i)}}).call(this)},function(e,t,r){(function(){var t,n,i,a,o={}.hasOwnProperty;a=r(73).isPlainObject,t=r(41),i=r(382),n=r(253),e.exports=function(e){function r(e){r.__super__.constructor.call(this,null),e||(e={}),e.writer||(e.writer=new n),this.options=e,this.stringify=new i(e),this.isDocument=!0}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,t),r.prototype.end=function(e){var t;return e?a(e)&&(t=e,e=this.options.writer.set(t)):e=this.options.writer,e.document(this)},r.prototype.toString=function(e){return this.options.writer.set(e).document(this)},r}()}).call(this)},function(e,t,r){(function(){var t,n,i,a,o,s,l,u,c,f,h,d,p,m,v,g,y,x,b,w={}.hasOwnProperty;b=r(73),y=b.isObject,g=b.isFunction,x=b.isPlainObject,f=r(173),n=r(165),i=r(166),d=r(175),v=r(176),h=r(174),u=r(171),c=r(172),a=r(167),s=r(169),o=r(168),l=r(170),t=r(381),m=r(382),p=r(253),e.exports=function(){function e(e,t,r){var n;e||(e={}),e.writer?x(e.writer)&&(n=e.writer,e.writer=new p(n)):e.writer=new p(e),this.options=e,this.writer=e.writer,this.stringify=new m(e),this.onDataCallback=t||function(){},this.onEndCallback=r||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return e.prototype.node=function(e,t,r){var n;if(null==e)throw new Error("Missing node name");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node");return this.openCurrent(),e=e.valueOf(),null==t&&(t={}),t=t.valueOf(),y(t)||(r=(n=[t,r])[0],t=n[1]),this.currentNode=new f(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this},e.prototype.element=function(e,t,r){return this.currentNode&&this.currentNode instanceof c?this.dtdElement.apply(this,arguments):this.node(e,t,r)},e.prototype.attribute=function(e,r){var n,i;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode");if(null!=e&&(e=e.valueOf()),y(e))for(n in e)w.call(e,n)&&(i=e[n],this.attribute(n,i));else g(r)&&(r=r.apply()),this.options.skipNullAttributes&&null==r||(this.currentNode.attributes[e]=new t(this,e,r));return this},e.prototype.text=function(e){var t;return this.openCurrent(),t=new v(this,e),this.onData(this.writer.text(t,this.currentLevel+1)),this},e.prototype.cdata=function(e){var t;return this.openCurrent(),t=new n(this,e),this.onData(this.writer.cdata(t,this.currentLevel+1)),this},e.prototype.comment=function(e){var t;return this.openCurrent(),t=new i(this,e),this.onData(this.writer.comment(t,this.currentLevel+1)),this},e.prototype.raw=function(e){var t;return this.openCurrent(),t=new d(this,e),this.onData(this.writer.raw(t,this.currentLevel+1)),this},e.prototype.instruction=function(e,t){var r,n,i,a,o;if(this.openCurrent(),null!=e&&(e=e.valueOf()),null!=t&&(t=t.valueOf()),Array.isArray(e))for(r=0,a=e.length;r<a;r++)n=e[r],this.instruction(n);else if(y(e))for(n in e)w.call(e,n)&&(i=e[n],this.instruction(n,i));else g(t)&&(t=t.apply()),o=new h(this,e,t),this.onData(this.writer.processingInstruction(o,this.currentLevel+1));return this},e.prototype.declaration=function(e,t,r){var n;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node");return n=new u(this,e,t,r),this.onData(this.writer.declaration(n,this.currentLevel+1)),this},e.prototype.doctype=function(e,t,r){if(this.openCurrent(),null==e)throw new Error("Missing root node name");if(this.root)throw new Error("dtd() must come before the root node");return this.currentNode=new c(this,t,r),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},e.prototype.dtdElement=function(e,t){var r;return this.openCurrent(),r=new o(this,e,t),this.onData(this.writer.dtdElement(r,this.currentLevel+1)),this},e.prototype.attList=function(e,t,r,n,i){var o;return this.openCurrent(),o=new a(this,e,t,r,n,i),this.onData(this.writer.dtdAttList(o,this.currentLevel+1)),this},e.prototype.entity=function(e,t){var r;return this.openCurrent(),r=new s(this,!1,e,t),this.onData(this.writer.dtdEntity(r,this.currentLevel+1)),this},e.prototype.pEntity=function(e,t){var r;return this.openCurrent(),r=new s(this,!0,e,t),this.onData(this.writer.dtdEntity(r,this.currentLevel+1)),this},e.prototype.notation=function(e,t){var r;return this.openCurrent(),r=new l(this,e,t),this.onData(this.writer.dtdNotation(r,this.currentLevel+1)),this},e.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},e.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},e.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},e.prototype.openNode=function(e){if(!e.isOpen)return!this.root&&0===this.currentLevel&&e instanceof f&&(this.root=e),this.onData(this.writer.openNode(e,this.currentLevel)),e.isOpen=!0},e.prototype.closeNode=function(e){if(!e.isClosed)return this.onData(this.writer.closeNode(e,this.currentLevel)),e.isClosed=!0},e.prototype.onData=function(e){return this.documentStarted=!0,this.onDataCallback(e)},e.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},e.prototype.ele=function(){return this.element.apply(this,arguments)},e.prototype.nod=function(e,t,r){return this.node(e,t,r)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.dec=function(e,t,r){return this.declaration(e,t,r)},e.prototype.dtd=function(e,t,r){return this.doctype(e,t,r)},e.prototype.e=function(e,t,r){return this.element(e,t,r)},e.prototype.n=function(e,t,r){return this.node(e,t,r)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.att=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.a=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e}()}).call(this)},function(e,t,r){(function(){var t,n,i,a,o,s,l,u,c,f,h,d,p,m={}.hasOwnProperty;l=r(171),u=r(172),t=r(165),n=r(166),c=r(173),h=r(175),d=r(176),f=r(174),i=r(167),a=r(168),o=r(169),s=r(170),p=r(383),e.exports=function(e){function r(e,t){this.stream=e,r.__super__.constructor.call(this,t)}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,p),r.prototype.document=function(e){var t,r,i,a,o,s,c,h;for(r=0,a=(s=e.children).length;r<a;r++)(t=s[r]).isLastRootNode=!1;for(e.children[e.children.length-1].isLastRootNode=!0,h=[],i=0,o=(c=e.children).length;i<o;i++)switch(t=c[i],!1){case!(t instanceof l):h.push(this.declaration(t));break;case!(t instanceof u):h.push(this.docType(t));break;case!(t instanceof n):h.push(this.comment(t));break;case!(t instanceof f):h.push(this.processingInstruction(t));break;default:h.push(this.element(t))}return h},r.prototype.attribute=function(e){return this.stream.write(" "+e.name+'="'+e.value+'"')},r.prototype.cdata=function(e,t){return this.stream.write(this.space(t)+"<![CDATA["+e.text+"]]>"+this.endline(e))},r.prototype.comment=function(e,t){return this.stream.write(this.space(t)+"\x3c!-- "+e.text+" --\x3e"+this.endline(e))},r.prototype.declaration=function(e,t){return this.stream.write(this.space(t)),this.stream.write('<?xml version="'+e.version+'"'),null!=e.encoding&&this.stream.write(' encoding="'+e.encoding+'"'),null!=e.standalone&&this.stream.write(' standalone="'+e.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(e))},r.prototype.docType=function(e,r){var l,u,c,h;if(r||(r=0),this.stream.write(this.space(r)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e)),u=0,c=(h=e.children).length;u<c;u++)switch(l=h[u],!1){case!(l instanceof i):this.dtdAttList(l,r+1);break;case!(l instanceof a):this.dtdElement(l,r+1);break;case!(l instanceof o):this.dtdEntity(l,r+1);break;case!(l instanceof s):this.dtdNotation(l,r+1);break;case!(l instanceof t):this.cdata(l,r+1);break;case!(l instanceof n):this.comment(l,r+1);break;case!(l instanceof f):this.processingInstruction(l,r+1);break;default:throw new Error("Unknown DTD node type: "+l.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(e))},r.prototype.element=function(e,r){var i,a,o,s,l,u,p,v;for(l in r||(r=0),v=this.space(r),this.stream.write(v+"<"+e.name),u=e.attributes)m.call(u,l)&&(i=u[l],this.attribute(i));if(0===e.children.length||e.children.every(function(e){return""===e.value}))this.allowEmpty?this.stream.write("></"+e.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&1===e.children.length&&null!=e.children[0].value)this.stream.write(">"),this.stream.write(e.children[0].value),this.stream.write("</"+e.name+">");else{for(this.stream.write(">"+this.newline),o=0,s=(p=e.children).length;o<s;o++)switch(a=p[o],!1){case!(a instanceof t):this.cdata(a,r+1);break;case!(a instanceof n):this.comment(a,r+1);break;case!(a instanceof c):this.element(a,r+1);break;case!(a instanceof h):this.raw(a,r+1);break;case!(a instanceof d):this.text(a,r+1);break;case!(a instanceof f):this.processingInstruction(a,r+1);break;default:throw new Error("Unknown XML node type: "+a.constructor.name)}this.stream.write(v+"</"+e.name+">")}return this.stream.write(this.endline(e))},r.prototype.processingInstruction=function(e,t){return this.stream.write(this.space(t)+"<?"+e.target),e.value&&this.stream.write(" "+e.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(e))},r.prototype.raw=function(e,t){return this.stream.write(this.space(t)+e.value+this.endline(e))},r.prototype.text=function(e,t){return this.stream.write(this.space(t)+e.value+this.endline(e))},r.prototype.dtdAttList=function(e,t){return this.stream.write(this.space(t)+"<!ATTLIST "+e.elementName+" "+e.attributeName+" "+e.attributeType),"#DEFAULT"!==e.defaultValueType&&this.stream.write(" "+e.defaultValueType),e.defaultValue&&this.stream.write(' "'+e.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},r.prototype.dtdElement=function(e,t){return this.stream.write(this.space(t)+"<!ELEMENT "+e.name+" "+e.value),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},r.prototype.dtdEntity=function(e,t){return this.stream.write(this.space(t)+"<!ENTITY"),e.pe&&this.stream.write(" %"),this.stream.write(" "+e.name),e.value?this.stream.write(' "'+e.value+'"'):(e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.nData&&this.stream.write(" NDATA "+e.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},r.prototype.dtdNotation=function(e,t){return this.stream.write(this.space(t)+"<!NOTATION "+e.name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.pubID?this.stream.write(' PUBLIC "'+e.pubID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},r.prototype.endline=function(e){return e.isLastRootNode?"":this.newline},r}()}).call(this)},function(e,t,r){(function(){var t,n,i,a,o,s,l;l=r(73),o=l.assign,s=l.isFunction,t=r(866),n=r(867),a=r(253),i=r(868),e.exports.create=function(e,r,n,i){var a,s;if(null==e)throw new Error("Root element needs a name");return i=o({},r,n,i),s=(a=new t(i)).element(e),i.headless||(a.declaration(i),null==i.pubID&&null==i.sysID||a.doctype(i)),s},e.exports.begin=function(e,r,i){var a;return s(e)&&(r=(a=[e,r])[0],i=a[1],e={}),r?new n(e,r,i):new t(e)},e.exports.stringWriter=function(e){return new a(e)},e.exports.streamWriter=function(e,t){return new i(e,t)}}).call(this)},function(e,t){e.exports=[{passIndex:0,passName:"ClearPass",userSettings:0,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":1,"mobile:normal":1,"mobile:vr":1,"mobile:ar":1},{passIndex:1,passName:"TexturePass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":1,"mobile:normal":1,"mobile:vr":1,"mobile:ar":0},{passIndex:2,passName:"CubeTexturePass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":1,"mobile:normal":1,"mobile:vr":1,"mobile:ar":0},{passIndex:3,passName:"SSRPrePass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":0,"desktop:zSpace":0,"mobile:high":1,"mobile:normal":1,"mobile:vr":0,"mobile:ar":0},{passIndex:4,passName:"MultiPass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":0,"desktop:zSpace":0,"mobile:high":1,"mobile:normal":1,"mobile:vr":0,"mobile:ar":0},{passIndex:5,passName:"SAO2Pass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":0,"desktop:zSpace":0,"mobile:high":1,"mobile:normal":1,"mobile:vr":0,"mobile:ar":0},{passIndex:6,passName:"SSAARenderPass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":0,"desktop:vr":0,"desktop:zSpace":0,"mobile:high":1,"mobile:normal":0,"mobile:vr":0,"mobile:ar":0},{passIndex:7,passName:"OpaquePass",userSettings:0,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":1,"mobile:normal":1,"mobile:vr":1,"mobile:ar":1},{passIndex:8,passName:"SAOPass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":0,"desktop:zSpace":0,"mobile:high":0,"mobile:normal":0,"mobile:vr":0,"mobile:ar":0},{passIndex:9,passName:"RefractiveGlassPass",userSettings:0,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":1,"mobile:normal":1,"mobile:vr":1,"mobile:ar":1},{passIndex:10,passName:"SSRPostPass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":0,"desktop:zSpace":0,"mobile:high":1,"mobile:normal":1,"mobile:vr":0,"mobile:ar":0},{passIndex:11,passName:"TRAAPass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":1,"mobile:normal":1,"mobile:vr":1,"mobile:ar":1},{passIndex:12,passName:"TransparentPass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":1,"mobile:normal":1,"mobile:vr":1,"mobile:ar":1},{passIndex:13,passName:"OITRenderPass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":0,"mobile:high":1,"mobile:normal":1,"mobile:vr":0,"mobile:ar":0},{passIndex:14,passName:"DofPass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":1,"mobile:normal":1,"mobile:vr":0,"mobile:ar":0},{passIndex:15,passName:"UnrealBloomPass",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":1,"mobile:normal":1,"mobile:vr":0,"mobile:ar":0},{passIndex:16,passName:"SparklePass",userSettings:0,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":1,"mobile:normal":1,"mobile:vr":1,"mobile:ar":1},{passIndex:17,passName:"OutlinePass",userSettings:0,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":1,"mobile:normal":1,"mobile:vr":1,"mobile:ar":1},{passIndex:19,passName:"EffectFXAA",userSettings:1,"server:high":0,"desktop:high":0,"desktop:normal":1,"desktop:vr":1,"desktop:zSpace":1,"mobile:high":0,"mobile:normal":1,"mobile:vr":1,"mobile:ar":1},{passIndex:"",passName:"ReflectiveFloorMesh",userSettings:1,"server:high":1,"desktop:high":1,"desktop:normal":1,"desktop:vr":0,"desktop:zSpace":1,"mobile:high":0,"mobile:normal":0,"mobile:vr":0,"mobile:ar":0}]},function(e,t){},function(e,t){},function(e,t,r){e.exports=r(384)}])});